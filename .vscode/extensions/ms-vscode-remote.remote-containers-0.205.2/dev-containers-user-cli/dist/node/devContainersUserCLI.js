/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------------------------------------------*/

var O2=Object.create;var vu=Object.defineProperty,D2=Object.defineProperties,N2=Object.getOwnPropertyDescriptor,L2=Object.getOwnPropertyDescriptors,k2=Object.getOwnPropertyNames,Pb=Object.getOwnPropertySymbols,F2=Object.getPrototypeOf,Ob=Object.prototype.hasOwnProperty,M2=Object.prototype.propertyIsEnumerable;var Db=(e,t,r)=>t in e?vu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,$=(e,t)=>{for(var r in t||(t={}))Ob.call(t,r)&&Db(e,r,t[r]);if(Pb)for(var r of Pb(t))M2.call(t,r)&&Db(e,r,t[r]);return e},pe=(e,t)=>D2(e,L2(t)),Nb=e=>vu(e,"__esModule",{value:!0});var I=(e,t)=>()=>(e&&(t=e(e=0)),t);var g=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ua=(e,t)=>{Nb(e);for(var r in t)vu(e,r,{get:t[r],enumerable:!0})},q2=(e,t,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of k2(t))!Ob.call(e,n)&&n!=="default"&&vu(e,n,{get:()=>t[n],enumerable:!(r=N2(t,n))||r.enumerable});return e},M=e=>q2(Nb(vu(e!=null?O2(F2(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var X0=g((bae,Y0)=>{var Ea=1e3,_a=Ea*60,Ca=_a*60,Zo=Ca*24,AG=Zo*7,IG=Zo*365.25;Y0.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return RG(e);if(r==="number"&&isFinite(e))return t.long?OG(e):PG(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function RG(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!!t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*IG;case"weeks":case"week":case"w":return r*AG;case"days":case"day":case"d":return r*Zo;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Ca;case"minutes":case"minute":case"mins":case"min":case"m":return r*_a;case"seconds":case"second":case"secs":case"sec":case"s":return r*Ea;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function PG(e){var t=Math.abs(e);return t>=Zo?Math.round(e/Zo)+"d":t>=Ca?Math.round(e/Ca)+"h":t>=_a?Math.round(e/_a)+"m":t>=Ea?Math.round(e/Ea)+"s":e+"ms"}function OG(e){var t=Math.abs(e);return t>=Zo?dd(e,t,Zo,"day"):t>=Ca?dd(e,t,Ca,"hour"):t>=_a?dd(e,t,_a,"minute"):t>=Ea?dd(e,t,Ea,"second"):e+" ms"}function dd(e,t,r,n){var i=t>=r*1.5;return Math.round(e/r)+" "+n+(i?"s":"")}});var Wg=g((xae,Q0)=>{function DG(e){r.debug=r,r.default=r,r.coerce=c,r.disable=o,r.enable=i,r.enabled=s,r.humanize=X0(),r.destroy=u,Object.keys(e).forEach(l=>{r[l]=e[l]}),r.names=[],r.skips=[],r.formatters={};function t(l){let f=0;for(let d=0;d<l.length;d++)f=(f<<5)-f+l.charCodeAt(d),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=t;function r(l){let f,d=null;function p(...h){if(!p.enabled)return;let m=p,v=Number(new Date),_=v-(f||v);m.diff=_,m.prev=f,m.curr=v,f=v,h[0]=r.coerce(h[0]),typeof h[0]!="string"&&h.unshift("%O");let E=0;h[0]=h[0].replace(/%([a-zA-Z%])/g,(T,N)=>{if(T==="%%")return"%";E++;let P=r.formatters[N];if(typeof P=="function"){let z=h[E];T=P.call(m,z),h.splice(E,1),E--}return T}),r.formatArgs.call(m,h),(m.log||r.log).apply(m,h)}return p.namespace=l,p.useColors=r.useColors(),p.color=r.selectColor(l),p.extend=n,p.destroy=r.destroy,Object.defineProperty(p,"enabled",{enumerable:!0,configurable:!1,get:()=>d===null?r.enabled(l):d,set:h=>{d=h}}),typeof r.init=="function"&&r.init(p),p}function n(l,f){let d=r(this.namespace+(typeof f=="undefined"?":":f)+l);return d.log=this.log,d}function i(l){r.save(l),r.names=[],r.skips=[];let f,d=(typeof l=="string"?l:"").split(/[\s,]+/),p=d.length;for(f=0;f<p;f++)!d[f]||(l=d[f].replace(/\*/g,".*?"),l[0]==="-"?r.skips.push(new RegExp("^"+l.substr(1)+"$")):r.names.push(new RegExp("^"+l+"$")))}function o(){let l=[...r.names.map(a),...r.skips.map(a).map(f=>"-"+f)].join(",");return r.enable(""),l}function s(l){if(l[l.length-1]==="*")return!0;let f,d;for(f=0,d=r.skips.length;f<d;f++)if(r.skips[f].test(l))return!1;for(f=0,d=r.names.length;f<d;f++)if(r.names[f].test(l))return!0;return!1}function a(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function c(l){return l instanceof Error?l.stack||l.message:l}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Q0.exports=DG});var J0=g((Rr,pd)=>{Rr.formatArgs=LG;Rr.save=kG;Rr.load=FG;Rr.useColors=NG;Rr.storage=MG();Rr.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Rr.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function NG(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function LG(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+pd.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),e.splice(n,0,t)}Rr.log=console.debug||console.log||(()=>{});function kG(e){try{e?Rr.storage.setItem("debug",e):Rr.storage.removeItem("debug")}catch(t){}}function FG(){let e;try{e=Rr.storage.getItem("debug")}catch(t){}return!e&&typeof process!="undefined"&&"env"in process&&(e=process.env.DEBUG),e}function MG(){try{return localStorage}catch(e){}}pd.exports=Wg()(Rr);var{formatters:qG}=pd.exports;qG.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var ex=g((Tae,Z0)=>{"use strict";Z0.exports=(e,t=process.argv)=>{let r=e.startsWith("-")?"":e.length===1?"-":"--",n=t.indexOf(r+e),i=t.indexOf("--");return n!==-1&&(i===-1||n<i)}});var nx=g((Aae,rx)=>{"use strict";var $G=require("os"),tx=require("tty"),Qr=ex(),{env:kt}=process,hd;Qr("no-color")||Qr("no-colors")||Qr("color=false")||Qr("color=never")?hd=0:(Qr("color")||Qr("colors")||Qr("color=true")||Qr("color=always"))&&(hd=1);function jG(){if("FORCE_COLOR"in kt)return kt.FORCE_COLOR==="true"?1:kt.FORCE_COLOR==="false"?0:kt.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(kt.FORCE_COLOR,10),3)}function UG(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function HG(e,{streamIsTTY:t,sniffFlags:r=!0}={}){let n=jG();n!==void 0&&(hd=n);let i=r?hd:n;if(i===0)return 0;if(r){if(Qr("color=16m")||Qr("color=full")||Qr("color=truecolor"))return 3;if(Qr("color=256"))return 2}if(e&&!t&&i===void 0)return 0;let o=i||0;if(kt.TERM==="dumb")return o;if(process.platform==="win32"){let s=$G.release().split(".");return Number(s[0])>=10&&Number(s[2])>=10586?Number(s[2])>=14931?3:2:1}if("CI"in kt)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(s=>s in kt)||kt.CI_NAME==="codeship"?1:o;if("TEAMCITY_VERSION"in kt)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(kt.TEAMCITY_VERSION)?1:0;if(kt.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in kt){let s=Number.parseInt((kt.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(kt.TERM_PROGRAM){case"iTerm.app":return s>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(kt.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(kt.TERM)||"COLORTERM"in kt?1:o}function Vg(e,t={}){let r=HG(e,$({streamIsTTY:e&&e.isTTY},t));return UG(r)}rx.exports={supportsColor:Vg,stdout:Vg({isTTY:tx.isatty(1)}),stderr:Vg({isTTY:tx.isatty(2)})}});var ox=g(($t,gd)=>{var BG=require("tty"),md=require("util");$t.init=XG;$t.log=zG;$t.formatArgs=WG;$t.save=KG;$t.load=YG;$t.useColors=GG;$t.destroy=md.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");$t.colors=[6,2,3,4,5,1];try{let e=nx();e&&(e.stderr||e).level>=2&&($t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}$t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(i,o)=>o.toUpperCase()),n=process.env[t];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),e[r]=n,e},{});function GG(){return"colors"in $t.inspectOpts?Boolean($t.inspectOpts.colors):BG.isatty(process.stderr.fd)}function WG(e){let{namespace:t,useColors:r}=this;if(r){let n=this.color,i="[3"+(n<8?n:"8;5;"+n),o=`  ${i};1m${t} [0m`;e[0]=o+e[0].split(`
`).join(`
`+o),e.push(i+"m+"+gd.exports.humanize(this.diff)+"[0m")}else e[0]=VG()+t+" "+e[0]}function VG(){return $t.inspectOpts.hideDate?"":new Date().toISOString()+" "}function zG(...e){return process.stderr.write(md.format(...e)+`
`)}function KG(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function YG(){return process.env.DEBUG}function XG(e){e.inspectOpts={};let t=Object.keys($t.inspectOpts);for(let r=0;r<t.length;r++)e.inspectOpts[t[r]]=$t.inspectOpts[t[r]]}gd.exports=Wg()($t);var{formatters:ix}=gd.exports;ix.o=function(e){return this.inspectOpts.colors=this.useColors,md.inspect(e,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};ix.O=function(e){return this.inspectOpts.colors=this.useColors,md.inspect(e,this.inspectOpts)}});var sx=g((Iae,zg)=>{typeof process=="undefined"||process.type==="renderer"||process.browser===!0||process.__nwjs?zg.exports=J0():zg.exports=ox()});var cx=g((Rae,ax)=>{var xu;ax.exports=function(){if(!xu){try{xu=sx()("follow-redirects")}catch(e){}typeof xu!="function"&&(xu=function(){})}xu.apply(null,arguments)}});var hx=g((Pae,Qg)=>{var wa=require("url"),Kg=wa.URL,QG=require("http"),JG=require("https"),ux=require("stream").Writable,ZG=require("assert"),lx=cx(),es=["abort","aborted","connect","error","socket","timeout"],Yg=Object.create(null);es.forEach(function(e){Yg[e]=function(t,r,n){this._redirectable.emit(e,t,r,n)}});var e3=vd("ERR_FR_REDIRECTION_FAILURE",""),t3=vd("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),r3=vd("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),n3=vd("ERR_STREAM_WRITE_AFTER_END","write after end");function Pr(e,t){ux.call(this),this._sanitizeOptions(e),this._options=e,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],t&&this.on("response",t);var r=this;this._onNativeResponse=function(n){r._processResponse(n)},this._performRequest()}Pr.prototype=Object.create(ux.prototype);Pr.prototype.abort=function(){px(this._currentRequest),this.emit("abort")};Pr.prototype.write=function(e,t,r){if(this._ending)throw new n3;if(!(typeof e=="string"||typeof e=="object"&&"length"in e))throw new TypeError("data should be a string, Buffer or Uint8Array");if(typeof t=="function"&&(r=t,t=null),e.length===0){r&&r();return}this._requestBodyLength+e.length<=this._options.maxBodyLength?(this._requestBodyLength+=e.length,this._requestBodyBuffers.push({data:e,encoding:t}),this._currentRequest.write(e,t,r)):(this.emit("error",new r3),this.abort())};Pr.prototype.end=function(e,t,r){if(typeof e=="function"?(r=e,e=t=null):typeof t=="function"&&(r=t,t=null),!e)this._ended=this._ending=!0,this._currentRequest.end(null,null,r);else{var n=this,i=this._currentRequest;this.write(e,t,function(){n._ended=!0,i.end(null,null,r)}),this._ending=!0}};Pr.prototype.setHeader=function(e,t){this._options.headers[e]=t,this._currentRequest.setHeader(e,t)};Pr.prototype.removeHeader=function(e){delete this._options.headers[e],this._currentRequest.removeHeader(e)};Pr.prototype.setTimeout=function(e,t){var r=this;function n(s){s.setTimeout(e),s.removeListener("timeout",s.destroy),s.addListener("timeout",s.destroy)}function i(s){r._timeout&&clearTimeout(r._timeout),r._timeout=setTimeout(function(){r.emit("timeout"),o()},e),n(s)}function o(){r._timeout&&(clearTimeout(r._timeout),r._timeout=null),t&&r.removeListener("timeout",t),r.socket||r._currentRequest.removeListener("socket",i)}return t&&this.on("timeout",t),this.socket?i(this.socket):this._currentRequest.once("socket",i),this.on("socket",n),this.once("response",o),this.once("error",o),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(e){Pr.prototype[e]=function(t,r){return this._currentRequest[e](t,r)}});["aborted","connection","socket"].forEach(function(e){Object.defineProperty(Pr.prototype,e,{get:function(){return this._currentRequest[e]}})});Pr.prototype._sanitizeOptions=function(e){if(e.headers||(e.headers={}),e.host&&(e.hostname||(e.hostname=e.host),delete e.host),!e.pathname&&e.path){var t=e.path.indexOf("?");t<0?e.pathname=e.path:(e.pathname=e.path.substring(0,t),e.search=e.path.substring(t))}};Pr.prototype._performRequest=function(){var e=this._options.protocol,t=this._options.nativeProtocols[e];if(!t){this.emit("error",new TypeError("Unsupported protocol "+e));return}if(this._options.agents){var r=e.substr(0,e.length-1);this._options.agent=this._options.agents[r]}var n=this._currentRequest=t.request(this._options,this._onNativeResponse);this._currentUrl=wa.format(this._options),n._redirectable=this;for(var i=0;i<es.length;i++)n.on(es[i],Yg[es[i]]);if(this._isRedirect){var o=0,s=this,a=this._requestBodyBuffers;(function c(u){if(n===s._currentRequest)if(u)s.emit("error",u);else if(o<a.length){var l=a[o++];n.finished||n.write(l.data,l.encoding,c)}else s._ended&&n.end()})()}};Pr.prototype._processResponse=function(e){var t=e.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:e.headers,statusCode:t});var r=e.headers.location;if(r&&this._options.followRedirects!==!1&&t>=300&&t<400){if(px(this._currentRequest),e.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new t3);return}((t===301||t===302)&&this._options.method==="POST"||t===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],Xg(/^content-/i,this._options.headers));var n=Xg(/^host$/i,this._options.headers)||wa.parse(this._currentUrl).hostname,i=wa.resolve(this._currentUrl,r);lx("redirecting to",i),this._isRedirect=!0;var o=wa.parse(i);if(Object.assign(this._options,o),o.hostname!==n&&Xg(/^authorization$/i,this._options.headers),typeof this._options.beforeRedirect=="function"){var s={headers:e.headers};try{this._options.beforeRedirect.call(null,this._options,s)}catch(c){this.emit("error",c);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(c){var a=new e3("Redirected request failed: "+c.message);a.cause=c,this.emit("error",a)}}else e.responseUrl=this._currentUrl,e.redirects=this._redirects,this.emit("response",e),this._requestBodyBuffers=[]};function fx(e){var t={maxRedirects:21,maxBodyLength:10*1024*1024},r={};return Object.keys(e).forEach(function(n){var i=n+":",o=r[i]=e[n],s=t[n]=Object.create(o);function a(u,l,f){if(typeof u=="string"){var d=u;try{u=dx(new Kg(d))}catch(p){u=wa.parse(d)}}else Kg&&u instanceof Kg?u=dx(u):(f=l,l=u,u={protocol:i});return typeof l=="function"&&(f=l,l=null),l=Object.assign({maxRedirects:t.maxRedirects,maxBodyLength:t.maxBodyLength},u,l),l.nativeProtocols=r,ZG.equal(l.protocol,i,"protocol mismatch"),lx("options",l),new Pr(l,f)}function c(u,l,f){var d=s.request(u,l,f);return d.end(),d}Object.defineProperties(s,{request:{value:a,configurable:!0,enumerable:!0,writable:!0},get:{value:c,configurable:!0,enumerable:!0,writable:!0}})}),t}function i3(){}function dx(e){var t={protocol:e.protocol,hostname:e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:e.pathname+e.search,href:e.href};return e.port!==""&&(t.port=Number(e.port)),t}function Xg(e,t){var r;for(var n in t)e.test(n)&&(r=t[n],delete t[n]);return r}function vd(e,t){function r(n){Error.captureStackTrace(this,this.constructor),this.message=n||t}return r.prototype=new Error,r.prototype.constructor=r,r.prototype.name="Error ["+e+"]",r.prototype.code=e,r}function px(e){for(var t=0;t<es.length;t++)e.removeListener(es[t],Yg[es[t]]);e.on("error",i3),e.abort()}Qg.exports=fx({http:QG,https:JG});Qg.exports.wrap=fx});var Sa=g((Oae,gx)=>{"use strict";var mx=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"]]);gx.exports=e=>e?Object.keys(e).map(t=>[mx.has(t)?mx.get(t):t,e[t]]).reduce((t,r)=>(t[r[0]]=r[1],t),Object.create(null)):{}});var yx=g((Dae,vx)=>{"use strict";vx.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}});var Tu=g((Nae,Ex)=>{"use strict";Ex.exports=Re;Re.Node=ts;Re.create=Re;function Re(e){var t=this;if(t instanceof Re||(t=new Re),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)t.push(arguments[r]);return t}Re.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t};Re.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};Re.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};Re.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)s3(this,arguments[e]);return this.length};Re.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)a3(this,arguments[e]);return this.length};Re.prototype.pop=function(){if(!!this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};Re.prototype.shift=function(){if(!!this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};Re.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;r!==null;n++)e.call(t,r.value,n,this),r=r.next};Re.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;r!==null;n--)e.call(t,r.value,n,this),r=r.prev};Re.prototype.get=function(e){for(var t=0,r=this.head;r!==null&&t<e;t++)r=r.next;if(t===e&&r!==null)return r.value};Re.prototype.getReverse=function(e){for(var t=0,r=this.tail;r!==null&&t<e;t++)r=r.prev;if(t===e&&r!==null)return r.value};Re.prototype.map=function(e,t){t=t||this;for(var r=new Re,n=this.head;n!==null;)r.push(e.call(t,n.value,this)),n=n.next;return r};Re.prototype.mapReverse=function(e,t){t=t||this;for(var r=new Re,n=this.tail;n!==null;)r.push(e.call(t,n.value,this)),n=n.prev;return r};Re.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)r=e(r,n.value,i),n=n.next;return r};Re.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)r=e(r,n.value,i),n=n.prev;return r};Re.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;r!==null;t++)e[t]=r.value,r=r.next;return e};Re.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;r!==null;t++)e[t]=r.value,r=r.prev;return e};Re.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new Re;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=0,i=this.head;i!==null&&n<e;n++)i=i.next;for(;i!==null&&n<t;n++,i=i.next)r.push(i.value);return r};Re.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new Re;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=this.length,i=this.tail;i!==null&&n>t;n--)i=i.prev;for(;i!==null&&n>e;n--,i=i.prev)r.push(i.value);return r};Re.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,i=this.head;i!==null&&n<e;n++)i=i.next;for(var o=[],n=0;i&&n<t;n++)o.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<r.length;n++)i=o3(this,i,r[n]);return o};Re.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};function o3(e,t,r){var n=t===e.head?new ts(r,null,t,e):new ts(r,t,t.next,e);return n.next===null&&(e.tail=n),n.prev===null&&(e.head=n),e.length++,n}function s3(e,t){e.tail=new ts(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function a3(e,t){e.head=new ts(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function ts(e,t,r,n){if(!(this instanceof ts))return new ts(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{yx()(Re)}catch(e){}});var ba=g((Lae,Ix)=>{"use strict";var c3=require("events"),_x=require("stream"),Au=Tu(),Cx=require("string_decoder").StringDecoder,oi=Symbol("EOF"),Iu=Symbol("maybeEmitEnd"),Gi=Symbol("emittedEnd"),yd=Symbol("emittingEnd"),Ed=Symbol("closed"),wx=Symbol("read"),Jg=Symbol("flush"),Sx=Symbol("flushChunk"),pr=Symbol("encoding"),si=Symbol("decoder"),_d=Symbol("flowing"),Ru=Symbol("paused"),Pu=Symbol("resume"),ir=Symbol("bufferLength"),bx=Symbol("bufferPush"),Zg=Symbol("bufferShift"),Gt=Symbol("objectMode"),Wt=Symbol("destroyed"),xx=global._MP_NO_ITERATOR_SYMBOLS_!=="1",u3=xx&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),l3=xx&&Symbol.iterator||Symbol("iterator not implemented"),Tx=e=>e==="end"||e==="finish"||e==="prefinish",f3=e=>e instanceof ArrayBuffer||typeof e=="object"&&e.constructor&&e.constructor.name==="ArrayBuffer"&&e.byteLength>=0,d3=e=>!Buffer.isBuffer(e)&&ArrayBuffer.isView(e);Ix.exports=class Ax extends _x{constructor(t){super();this[_d]=!1,this[Ru]=!1,this.pipes=new Au,this.buffer=new Au,this[Gt]=t&&t.objectMode||!1,this[Gt]?this[pr]=null:this[pr]=t&&t.encoding||null,this[pr]==="buffer"&&(this[pr]=null),this[si]=this[pr]?new Cx(this[pr]):null,this[oi]=!1,this[Gi]=!1,this[yd]=!1,this[Ed]=!1,this.writable=!0,this.readable=!0,this[ir]=0,this[Wt]=!1}get bufferLength(){return this[ir]}get encoding(){return this[pr]}set encoding(t){if(this[Gt])throw new Error("cannot set encoding in objectMode");if(this[pr]&&t!==this[pr]&&(this[si]&&this[si].lastNeed||this[ir]))throw new Error("cannot change encoding");this[pr]!==t&&(this[si]=t?new Cx(t):null,this.buffer.length&&(this.buffer=this.buffer.map(r=>this[si].write(r)))),this[pr]=t}setEncoding(t){this.encoding=t}get objectMode(){return this[Gt]}set objectMode(t){this[Gt]=this[Gt]||!!t}write(t,r,n){if(this[oi])throw new Error("write after end");return this[Wt]?(this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0):(typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8"),!this[Gt]&&!Buffer.isBuffer(t)&&(d3(t)?t=Buffer.from(t.buffer,t.byteOffset,t.byteLength):f3(t)?t=Buffer.from(t):typeof t!="string"&&(this.objectMode=!0)),!this.objectMode&&!t.length?(this[ir]!==0&&this.emit("readable"),n&&n(),this.flowing):(typeof t=="string"&&!this[Gt]&&!(r===this[pr]&&!this[si].lastNeed)&&(t=Buffer.from(t,r)),Buffer.isBuffer(t)&&this[pr]&&(t=this[si].write(t)),this.flowing?(this[ir]!==0&&this[Jg](!0),this.emit("data",t)):this[bx](t),this[ir]!==0&&this.emit("readable"),n&&n(),this.flowing))}read(t){if(this[Wt])return null;try{return this[ir]===0||t===0||t>this[ir]?null:(this[Gt]&&(t=null),this.buffer.length>1&&!this[Gt]&&(this.encoding?this.buffer=new Au([Array.from(this.buffer).join("")]):this.buffer=new Au([Buffer.concat(Array.from(this.buffer),this[ir])])),this[wx](t||null,this.buffer.head.value))}finally{this[Iu]()}}[wx](t,r){return t===r.length||t===null?this[Zg]():(this.buffer.head.value=r.slice(t),r=r.slice(0,t),this[ir]-=t),this.emit("data",r),!this.buffer.length&&!this[oi]&&this.emit("drain"),r}end(t,r,n){return typeof t=="function"&&(n=t,t=null),typeof r=="function"&&(n=r,r="utf8"),t&&this.write(t,r),n&&this.once("end",n),this[oi]=!0,this.writable=!1,(this.flowing||!this[Ru])&&this[Iu](),this}[Pu](){this[Wt]||(this[Ru]=!1,this[_d]=!0,this.emit("resume"),this.buffer.length?this[Jg]():this[oi]?this[Iu]():this.emit("drain"))}resume(){return this[Pu]()}pause(){this[_d]=!1,this[Ru]=!0}get destroyed(){return this[Wt]}get flowing(){return this[_d]}get paused(){return this[Ru]}[bx](t){return this[Gt]?this[ir]+=1:this[ir]+=t.length,this.buffer.push(t)}[Zg](){return this.buffer.length&&(this[Gt]?this[ir]-=1:this[ir]-=this.buffer.head.value.length),this.buffer.shift()}[Jg](t){do;while(this[Sx](this[Zg]()));!t&&!this.buffer.length&&!this[oi]&&this.emit("drain")}[Sx](t){return t?(this.emit("data",t),this.flowing):!1}pipe(t,r){if(this[Wt])return;let n=this[Gi];r=r||{},t===process.stdout||t===process.stderr?r.end=!1:r.end=r.end!==!1;let i={dest:t,opts:r,ondrain:o=>this[Pu]()};return this.pipes.push(i),t.on("drain",i.ondrain),this[Pu](),n&&i.opts.end&&i.dest.end(),t}addListener(t,r){return this.on(t,r)}on(t,r){try{return super.on(t,r)}finally{t==="data"&&!this.pipes.length&&!this.flowing?this[Pu]():Tx(t)&&this[Gi]&&(super.emit(t),this.removeAllListeners(t))}}get emittedEnd(){return this[Gi]}[Iu](){!this[yd]&&!this[Gi]&&!this[Wt]&&this.buffer.length===0&&this[oi]&&(this[yd]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Ed]&&this.emit("close"),this[yd]=!1)}emit(t,r){if(t!=="error"&&t!=="close"&&t!==Wt&&this[Wt])return;if(t==="data"){if(!r)return;this.pipes.length&&this.pipes.forEach(i=>i.dest.write(r)===!1&&this.pause())}else if(t==="end"){if(this[Gi]===!0)return;this[Gi]=!0,this.readable=!1,this[si]&&(r=this[si].end(),r&&(this.pipes.forEach(i=>i.dest.write(r)),super.emit("data",r))),this.pipes.forEach(i=>{i.dest.removeListener("drain",i.ondrain),i.opts.end&&i.dest.end()})}else if(t==="close"&&(this[Ed]=!0,!this[Gi]&&!this[Wt]))return;let n=new Array(arguments.length);if(n[0]=t,n[1]=r,arguments.length>2)for(let i=2;i<arguments.length;i++)n[i]=arguments[i];try{return super.emit.apply(this,n)}finally{Tx(t)?this.removeAllListeners(t):this[Iu]()}}collect(){let t=[];this[Gt]||(t.dataLength=0);let r=this.promise();return this.on("data",n=>{t.push(n),this[Gt]||(t.dataLength+=n.length)}),r.then(()=>t)}concat(){return this[Gt]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(t=>this[Gt]?Promise.reject(new Error("cannot concat in objectMode")):this[pr]?t.join(""):Buffer.concat(t,t.dataLength))}promise(){return new Promise((t,r)=>{this.on(Wt,()=>r(new Error("stream destroyed"))),this.on("end",()=>t()),this.on("error",n=>r(n))})}[u3](){return{next:()=>{let r=this.read();if(r!==null)return Promise.resolve({done:!1,value:r});if(this[oi])return Promise.resolve({done:!0});let n=null,i=null,o=u=>{this.removeListener("data",s),this.removeListener("end",a),i(u)},s=u=>{this.removeListener("error",o),this.removeListener("end",a),this.pause(),n({value:u,done:!!this[oi]})},a=()=>{this.removeListener("error",o),this.removeListener("data",s),n({done:!0})},c=()=>o(new Error("stream destroyed"));return new Promise((u,l)=>{i=l,n=u,this.once(Wt,c),this.once("error",o),this.once("end",a),this.once("data",s)})}}}[l3](){return{next:()=>{let r=this.read();return{value:r,done:r===null}}}}destroy(t){return this[Wt]?(t?this.emit("error",t):this.emit(Wt),this):(this[Wt]=!0,this.buffer=new Au,this[ir]=0,typeof this.close=="function"&&!this[Ed]&&this.close(),t?this.emit("error",t):this.emit(Wt),this)}static isStream(t){return!!t&&(t instanceof Ax||t instanceof _x||t instanceof c3&&(typeof t.pipe=="function"||typeof t.write=="function"&&typeof t.end=="function"))}}});var Px=g((kae,Rx)=>{var p3=require("zlib").constants||{ZLIB_VERNUM:4736};Rx.exports=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:1/0,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},p3))});var cv=g(Or=>{"use strict";var ev=require("assert"),Wi=require("buffer").Buffer,Ox=require("zlib"),rs=Or.constants=Px(),h3=ba(),Dx=Wi.concat,ns=Symbol("_superWrite"),Ou=class extends Error{constructor(t){super("zlib: "+t.message);this.code=t.code,this.errno=t.errno,this.code||(this.code="ZLIB_ERROR"),this.message="zlib: "+t.message,Error.captureStackTrace(this,this.constructor)}get name(){return"ZlibError"}},m3=Symbol("opts"),Du=Symbol("flushFlag"),Nx=Symbol("finishFlushFlag"),tv=Symbol("fullFlushFlag"),ze=Symbol("handle"),Cd=Symbol("onError"),xa=Symbol("sawError"),rv=Symbol("level"),nv=Symbol("strategy"),iv=Symbol("ended"),Fae=Symbol("_defaultFullFlush"),ov=class extends h3{constructor(t,r){if(!t||typeof t!="object")throw new TypeError("invalid options for ZlibBase constructor");super(t);this[xa]=!1,this[iv]=!1,this[m3]=t,this[Du]=t.flush,this[Nx]=t.finishFlush;try{this[ze]=new Ox[r](t)}catch(n){throw new Ou(n)}this[Cd]=n=>{this[xa]||(this[xa]=!0,this.close(),this.emit("error",n))},this[ze].on("error",n=>this[Cd](new Ou(n))),this.once("end",()=>this.close)}close(){this[ze]&&(this[ze].close(),this[ze]=null,this.emit("close"))}reset(){if(!this[xa])return ev(this[ze],"zlib binding closed"),this[ze].reset()}flush(t){this.ended||(typeof t!="number"&&(t=this[tv]),this.write(Object.assign(Wi.alloc(0),{[Du]:t})))}end(t,r,n){return t&&this.write(t,r),this.flush(this[Nx]),this[iv]=!0,super.end(null,null,n)}get ended(){return this[iv]}write(t,r,n){if(typeof r=="function"&&(n=r,r="utf8"),typeof t=="string"&&(t=Wi.from(t,r)),this[xa])return;ev(this[ze],"zlib binding closed");let i=this[ze]._handle,o=i.close;i.close=()=>{};let s=this[ze].close;this[ze].close=()=>{},Wi.concat=u=>u;let a;try{let u=typeof t[Du]=="number"?t[Du]:this[Du];a=this[ze]._processChunk(t,u),Wi.concat=Dx}catch(u){Wi.concat=Dx,this[Cd](new Ou(u))}finally{this[ze]&&(this[ze]._handle=i,i.close=o,this[ze].close=s,this[ze].removeAllListeners("error"))}this[ze]&&this[ze].on("error",u=>this[Cd](new Ou(u)));let c;if(a)if(Array.isArray(a)&&a.length>0){c=this[ns](Wi.from(a[0]));for(let u=1;u<a.length;u++)c=this[ns](a[u])}else c=this[ns](Wi.from(a));return n&&n(),c}[ns](t){return super.write(t)}},Vi=class extends ov{constructor(t,r){t=t||{},t.flush=t.flush||rs.Z_NO_FLUSH,t.finishFlush=t.finishFlush||rs.Z_FINISH;super(t,r);this[tv]=rs.Z_FULL_FLUSH,this[rv]=t.level,this[nv]=t.strategy}params(t,r){if(!this[xa]){if(!this[ze])throw new Error("cannot switch params when binding is closed");if(!this[ze].params)throw new Error("not supported in this implementation");if(this[rv]!==t||this[nv]!==r){this.flush(rs.Z_SYNC_FLUSH),ev(this[ze],"zlib binding closed");let n=this[ze].flush;this[ze].flush=(i,o)=>{this.flush(i),o()};try{this[ze].params(t,r)}finally{this[ze].flush=n}this[ze]&&(this[rv]=t,this[nv]=r)}}}},Lx=class extends Vi{constructor(t){super(t,"Deflate")}},kx=class extends Vi{constructor(t){super(t,"Inflate")}},sv=Symbol("_portable"),Fx=class extends Vi{constructor(t){super(t,"Gzip");this[sv]=t&&!!t.portable}[ns](t){return this[sv]?(this[sv]=!1,t[9]=255,super[ns](t)):super[ns](t)}},Mx=class extends Vi{constructor(t){super(t,"Gunzip")}},qx=class extends Vi{constructor(t){super(t,"DeflateRaw")}},$x=class extends Vi{constructor(t){super(t,"InflateRaw")}},jx=class extends Vi{constructor(t){super(t,"Unzip")}},av=class extends ov{constructor(t,r){t=t||{},t.flush=t.flush||rs.BROTLI_OPERATION_PROCESS,t.finishFlush=t.finishFlush||rs.BROTLI_OPERATION_FINISH;super(t,r);this[tv]=rs.BROTLI_OPERATION_FLUSH}},Ux=class extends av{constructor(t){super(t,"BrotliCompress")}},Hx=class extends av{constructor(t){super(t,"BrotliDecompress")}};Or.Deflate=Lx;Or.Inflate=kx;Or.Gzip=Fx;Or.Gunzip=Mx;Or.DeflateRaw=qx;Or.InflateRaw=$x;Or.Unzip=jx;typeof Ox.BrotliCompress=="function"?(Or.BrotliCompress=Ux,Or.BrotliDecompress=Hx):Or.BrotliCompress=Or.BrotliDecompress=class{constructor(){throw new Error("Brotli is not supported in this version of Node.js")}}});var Ta=g((qae,Bx)=>{var g3=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform;Bx.exports=g3!=="win32"?e=>e:e=>e&&e.replace(/\\/g,"/")});var wd=g((jae,Gx)=>{"use strict";var v3=ba(),uv=Ta(),lv=Symbol("slurp");Gx.exports=class extends v3{constructor(t,r,n){super();switch(this.pause(),this.extended=r,this.globalExtended=n,this.header=t,this.startBlockSize=512*Math.ceil(t.size/512),this.blockRemain=this.startBlockSize,this.remain=t.size,this.type=t.type,this.meta=!1,this.ignore=!1,this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=!0;break;default:this.ignore=!0}this.path=uv(t.path),this.mode=t.mode,this.mode&&(this.mode=this.mode&4095),this.uid=t.uid,this.gid=t.gid,this.uname=t.uname,this.gname=t.gname,this.size=t.size,this.mtime=t.mtime,this.atime=t.atime,this.ctime=t.ctime,this.linkpath=uv(t.linkpath),this.uname=t.uname,this.gname=t.gname,r&&this[lv](r),n&&this[lv](n,!0)}write(t){let r=t.length;if(r>this.blockRemain)throw new Error("writing more to entry than is appropriate");let n=this.remain,i=this.blockRemain;return this.remain=Math.max(0,n-r),this.blockRemain=Math.max(0,i-r),this.ignore?!0:n>=r?super.write(t):super.write(t.slice(0,n))}[lv](t,r){for(let n in t)t[n]!==null&&t[n]!==void 0&&!(r&&n==="path")&&(this[n]=n==="path"||n==="linkpath"?uv(t[n]):t[n])}}});var fv=g(Sd=>{"use strict";Sd.name=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]);Sd.code=new Map(Array.from(Sd.name).map(e=>[e[1],e[0]]))});var Kx=g((Hae,zx)=>{"use strict";var y3=(e,t)=>{if(Number.isSafeInteger(e))e<0?_3(e,t):E3(e,t);else throw Error("cannot encode number outside of javascript safe integer range");return t},E3=(e,t)=>{t[0]=128;for(var r=t.length;r>1;r--)t[r-1]=e&255,e=Math.floor(e/256)},_3=(e,t)=>{t[0]=255;var r=!1;e=e*-1;for(var n=t.length;n>1;n--){var i=e&255;e=Math.floor(e/256),r?t[n-1]=Wx(i):i===0?t[n-1]=0:(r=!0,t[n-1]=Vx(i))}},C3=e=>{let t=e[0],r=t===128?S3(e.slice(1,e.length)):t===255?w3(e):null;if(r===null)throw Error("invalid base256 encoding");if(!Number.isSafeInteger(r))throw Error("parsed number outside of javascript safe integer range");return r},w3=e=>{for(var t=e.length,r=0,n=!1,i=t-1;i>-1;i--){var o=e[i],s;n?s=Wx(o):o===0?s=o:(n=!0,s=Vx(o)),s!==0&&(r-=s*Math.pow(256,t-i-1))}return r},S3=e=>{for(var t=e.length,r=0,n=t-1;n>-1;n--){var i=e[n];i!==0&&(r+=i*Math.pow(256,t-n-1))}return r},Wx=e=>(255^e)&255,Vx=e=>(255^e)+1&255;zx.exports={encode:y3,parse:C3}});var Ia=g((Bae,Qx)=>{"use strict";var dv=fv(),Aa=require("path").posix,Yx=Kx(),pv=Symbol("slurp"),Dr=Symbol("type"),Xx=class{constructor(t,r,n,i){this.cksumValid=!1,this.needPax=!1,this.nullBlock=!1,this.block=null,this.path=null,this.mode=null,this.uid=null,this.gid=null,this.size=null,this.mtime=null,this.cksum=null,this[Dr]="0",this.linkpath=null,this.uname=null,this.gname=null,this.devmaj=0,this.devmin=0,this.atime=null,this.ctime=null,Buffer.isBuffer(t)?this.decode(t,r||0,n,i):t&&this.set(t)}decode(t,r,n,i){if(r||(r=0),!t||!(t.length>=r+512))throw new Error("need 512 bytes for header");if(this.path=is(t,r,100),this.mode=zi(t,r+100,8),this.uid=zi(t,r+108,8),this.gid=zi(t,r+116,8),this.size=zi(t,r+124,12),this.mtime=hv(t,r+136,12),this.cksum=zi(t,r+148,12),this[pv](n),this[pv](i,!0),this[Dr]=is(t,r+156,1),this[Dr]===""&&(this[Dr]="0"),this[Dr]==="0"&&this.path.substr(-1)==="/"&&(this[Dr]="5"),this[Dr]==="5"&&(this.size=0),this.linkpath=is(t,r+157,100),t.slice(r+257,r+265).toString()==="ustar\x0000")if(this.uname=is(t,r+265,32),this.gname=is(t,r+297,32),this.devmaj=zi(t,r+329,8),this.devmin=zi(t,r+337,8),t[r+475]!==0){let s=is(t,r+345,155);this.path=s+"/"+this.path}else{let s=is(t,r+345,130);s&&(this.path=s+"/"+this.path),this.atime=hv(t,r+476,12),this.ctime=hv(t,r+488,12)}let o=8*32;for(let s=r;s<r+148;s++)o+=t[s];for(let s=r+156;s<r+512;s++)o+=t[s];this.cksumValid=o===this.cksum,this.cksum===null&&o===8*32&&(this.nullBlock=!0)}[pv](t,r){for(let n in t)t[n]!==null&&t[n]!==void 0&&!(r&&n==="path")&&(this[n]=t[n])}encode(t,r){if(t||(t=this.block=Buffer.alloc(512),r=0),r||(r=0),!(t.length>=r+512))throw new Error("need 512 bytes for header");let n=this.ctime||this.atime?130:155,i=b3(this.path||"",n),o=i[0],s=i[1];this.needPax=i[2],this.needPax=os(t,r,100,o)||this.needPax,this.needPax=Ki(t,r+100,8,this.mode)||this.needPax,this.needPax=Ki(t,r+108,8,this.uid)||this.needPax,this.needPax=Ki(t,r+116,8,this.gid)||this.needPax,this.needPax=Ki(t,r+124,12,this.size)||this.needPax,this.needPax=mv(t,r+136,12,this.mtime)||this.needPax,t[r+156]=this[Dr].charCodeAt(0),this.needPax=os(t,r+157,100,this.linkpath)||this.needPax,t.write("ustar\x0000",r+257,8),this.needPax=os(t,r+265,32,this.uname)||this.needPax,this.needPax=os(t,r+297,32,this.gname)||this.needPax,this.needPax=Ki(t,r+329,8,this.devmaj)||this.needPax,this.needPax=Ki(t,r+337,8,this.devmin)||this.needPax,this.needPax=os(t,r+345,n,s)||this.needPax,t[r+475]!==0?this.needPax=os(t,r+345,155,s)||this.needPax:(this.needPax=os(t,r+345,130,s)||this.needPax,this.needPax=mv(t,r+476,12,this.atime)||this.needPax,this.needPax=mv(t,r+488,12,this.ctime)||this.needPax);let a=8*32;for(let c=r;c<r+148;c++)a+=t[c];for(let c=r+156;c<r+512;c++)a+=t[c];return this.cksum=a,Ki(t,r+148,8,this.cksum),this.cksumValid=!0,this.needPax}set(t){for(let r in t)t[r]!==null&&t[r]!==void 0&&(this[r]=t[r])}get type(){return dv.name.get(this[Dr])||this[Dr]}get typeKey(){return this[Dr]}set type(t){dv.code.has(t)?this[Dr]=dv.code.get(t):this[Dr]=t}},b3=(e,t)=>{let r=100,n=e,i="",o,s=Aa.parse(e).root||".";if(Buffer.byteLength(n)<r)o=[n,i,!1];else{i=Aa.dirname(n),n=Aa.basename(n);do Buffer.byteLength(n)<=r&&Buffer.byteLength(i)<=t?o=[n,i,!1]:Buffer.byteLength(n)>r&&Buffer.byteLength(i)<=t?o=[n.substr(0,r-1),i,!0]:(n=Aa.join(Aa.basename(i),n),i=Aa.dirname(i));while(i!==s&&!o);o||(o=[e.substr(0,r-1),"",!0])}return o},is=(e,t,r)=>e.slice(t,t+r).toString("utf8").replace(/\0.*/,""),hv=(e,t,r)=>x3(zi(e,t,r)),x3=e=>e===null?null:new Date(e*1e3),zi=(e,t,r)=>e[t]&128?Yx.parse(e.slice(t,t+r)):A3(e,t,r),T3=e=>isNaN(e)?null:e,A3=(e,t,r)=>T3(parseInt(e.slice(t,t+r).toString("utf8").replace(/\0.*$/,"").trim(),8)),I3={12:8589934591,8:2097151},Ki=(e,t,r,n)=>n===null?!1:n>I3[r]||n<0?(Yx.encode(n,e.slice(t,t+r)),!0):(R3(e,t,r,n),!1),R3=(e,t,r,n)=>e.write(P3(n,r),t,r,"ascii"),P3=(e,t)=>O3(Math.floor(e).toString(8),t),O3=(e,t)=>(e.length===t-1?e:new Array(t-e.length-1).join("0")+e+" ")+"\0",mv=(e,t,r,n)=>n===null?!1:Ki(e,t,r,n.getTime()/1e3),D3=new Array(156).join("\0"),os=(e,t,r,n)=>n===null?!1:(e.write(n+D3,t,r,"utf8"),n.length!==Buffer.byteLength(n)||n.length>r);Qx.exports=Xx});var xd=g((Gae,Jx)=>{"use strict";var N3=Ia(),L3=require("path"),bd=class{constructor(t,r){this.atime=t.atime||null,this.charset=t.charset||null,this.comment=t.comment||null,this.ctime=t.ctime||null,this.gid=t.gid||null,this.gname=t.gname||null,this.linkpath=t.linkpath||null,this.mtime=t.mtime||null,this.path=t.path||null,this.size=t.size||null,this.uid=t.uid||null,this.uname=t.uname||null,this.dev=t.dev||null,this.ino=t.ino||null,this.nlink=t.nlink||null,this.global=r||!1}encode(){let t=this.encodeBody();if(t==="")return null;let r=Buffer.byteLength(t),n=512*Math.ceil(1+r/512),i=Buffer.allocUnsafe(n);for(let o=0;o<512;o++)i[o]=0;new N3({path:("PaxHeader/"+L3.basename(this.path)).slice(0,99),mode:this.mode||420,uid:this.uid||null,gid:this.gid||null,size:r,mtime:this.mtime||null,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime||null,ctime:this.ctime||null}).encode(i),i.write(t,512,r,"utf8");for(let o=r+512;o<i.length;o++)i[o]=0;return i}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(t){if(this[t]===null||this[t]===void 0)return"";let r=this[t]instanceof Date?this[t].getTime()/1e3:this[t],n=" "+(t==="dev"||t==="ino"||t==="nlink"?"SCHILY.":"")+t+"="+r+`
`,i=Buffer.byteLength(n),o=Math.floor(Math.log(i)/Math.log(10))+1;return i+o>=Math.pow(10,o)&&(o+=1),o+i+n}};bd.parse=(e,t,r)=>new bd(k3(F3(e),t),r);var k3=(e,t)=>t?Object.keys(e).reduce((r,n)=>(r[n]=e[n],r),t):e,F3=e=>e.replace(/\n$/,"").split(`
`).reduce(M3,Object.create(null)),M3=(e,t)=>{let r=parseInt(t,10);if(r!==Buffer.byteLength(t)+1)return e;t=t.substr((r+" ").length);let n=t.split("="),i=n.shift().replace(/^SCHILY\.(dev|ino|nlink)/,"$1");if(!i)return e;let o=n.join("=");return e[i]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(i)?new Date(o*1e3):/^[0-9]+$/.test(o)?+o:o,e};Jx.exports=bd});var Ra=g((Wae,Zx)=>{Zx.exports=e=>{let t=e.length-1,r=-1;for(;t>-1&&e.charAt(t)==="/";)r=t,t--;return r===-1?e:e.slice(0,r)}});var Td=g((Vae,eT)=>{"use strict";eT.exports=e=>class extends e{warn(t,r,n={}){this.file&&(n.file=this.file),this.cwd&&(n.cwd=this.cwd),n.code=r instanceof Error&&r.code||t,n.tarCode=t,!this.strict&&n.recoverable!==!1?(r instanceof Error&&(n=Object.assign(r,n),r=r.message),this.emit("warn",n.tarCode,r,n)):r instanceof Error?this.emit("error",Object.assign(r,n)):this.emit("error",Object.assign(new Error(`${t}: ${r}`),n))}}});var vv=g((zae,tT)=>{"use strict";var Ad=["|","<",">","?",":"],gv=Ad.map(e=>String.fromCharCode(61440+e.charCodeAt(0))),q3=new Map(Ad.map((e,t)=>[e,gv[t]])),$3=new Map(gv.map((e,t)=>[e,Ad[t]]));tT.exports={encode:e=>Ad.reduce((t,r)=>t.split(r).join(q3.get(r)),e),decode:e=>gv.reduce((t,r)=>t.split(r).join($3.get(r)),e)}});var yv=g((Kae,nT)=>{var{isAbsolute:j3,parse:rT}=require("path").win32;nT.exports=e=>{let t="",r=rT(e);for(;j3(e)||r.root;){let n=e.charAt(0)==="/"&&e.slice(0,4)!=="//?/"?"/":r.root;e=e.substr(n.length),t+=n,r=rT(e)}return[t,e]}});var oT=g((Yae,iT)=>{"use strict";iT.exports=(e,t,r)=>(e&=4095,r&&(e=(e|384)&~18),t&&(e&256&&(e|=64),e&32&&(e|=8),e&4&&(e|=1)),e)});var Av=g((Jae,_T)=>{"use strict";var sT=ba(),aT=xd(),cT=Ia(),$n=require("fs"),uT=require("path"),jn=Ta(),U3=Ra(),lT=(e,t)=>t?(e=jn(e).replace(/^\.(\/|$)/,""),U3(t)+"/"+e):jn(e),H3=16*1024*1024,fT=Symbol("process"),dT=Symbol("file"),pT=Symbol("directory"),Ev=Symbol("symlink"),hT=Symbol("hardlink"),Nu=Symbol("header"),Id=Symbol("read"),_v=Symbol("lstat"),Rd=Symbol("onlstat"),Cv=Symbol("onread"),wv=Symbol("onreadlink"),Sv=Symbol("openfile"),bv=Symbol("onopenfile"),Yi=Symbol("close"),Pd=Symbol("mode"),xv=Symbol("awaitDrain"),Tv=Symbol("ondrain"),Un=Symbol("prefix"),mT=Symbol("hadError"),gT=Td(),B3=vv(),vT=yv(),yT=oT(),Od=gT(class extends sT{constructor(t,r){r=r||{};super(r);if(typeof t!="string")throw new TypeError("path is required");this.path=jn(t),this.portable=!!r.portable,this.myuid=process.getuid&&process.getuid()||0,this.myuser=process.env.USER||"",this.maxReadSize=r.maxReadSize||H3,this.linkCache=r.linkCache||new Map,this.statCache=r.statCache||new Map,this.preservePaths=!!r.preservePaths,this.cwd=jn(r.cwd||process.cwd()),this.strict=!!r.strict,this.noPax=!!r.noPax,this.noMtime=!!r.noMtime,this.mtime=r.mtime||null,this.prefix=r.prefix?jn(r.prefix):null,this.fd=null,this.blockLen=null,this.blockRemain=null,this.buf=null,this.offset=null,this.length=null,this.pos=null,this.remain=null,typeof r.onwarn=="function"&&this.on("warn",r.onwarn);let n=!1;if(!this.preservePaths){let[i,o]=vT(this.path);i&&(this.path=o,n=i)}this.win32=!!r.win32||process.platform==="win32",this.win32&&(this.path=B3.decode(this.path.replace(/\\/g,"/")),t=t.replace(/\\/g,"/")),this.absolute=jn(r.absolute||uT.resolve(this.cwd,t)),this.path===""&&(this.path="./"),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path}),this.statCache.has(this.absolute)?this[Rd](this.statCache.get(this.absolute)):this[_v]()}emit(t,...r){return t==="error"&&(this[mT]=!0),super.emit(t,...r)}[_v](){$n.lstat(this.absolute,(t,r)=>{if(t)return this.emit("error",t);this[Rd](r)})}[Rd](t){this.statCache.set(this.absolute,t),this.stat=t,t.isFile()||(t.size=0),this.type=W3(t),this.emit("stat",t),this[fT]()}[fT](){switch(this.type){case"File":return this[dT]();case"Directory":return this[pT]();case"SymbolicLink":return this[Ev]();default:return this.end()}}[Pd](t){return yT(t,this.type==="Directory",this.portable)}[Un](t){return lT(t,this.prefix)}[Nu](){this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.header=new cT({path:this[Un](this.path),linkpath:this.type==="Link"?this[Un](this.linkpath):this.linkpath,mode:this[Pd](this.stat.mode),uid:this.portable?null:this.stat.uid,gid:this.portable?null:this.stat.gid,size:this.stat.size,mtime:this.noMtime?null:this.mtime||this.stat.mtime,type:this.type,uname:this.portable?null:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?null:this.stat.atime,ctime:this.portable?null:this.stat.ctime}),this.header.encode()&&!this.noPax&&super.write(new aT({atime:this.portable?null:this.header.atime,ctime:this.portable?null:this.header.ctime,gid:this.portable?null:this.header.gid,mtime:this.noMtime?null:this.mtime||this.header.mtime,path:this[Un](this.path),linkpath:this.type==="Link"?this[Un](this.linkpath):this.linkpath,size:this.header.size,uid:this.portable?null:this.header.uid,uname:this.portable?null:this.header.uname,dev:this.portable?null:this.stat.dev,ino:this.portable?null:this.stat.ino,nlink:this.portable?null:this.stat.nlink}).encode()),super.write(this.header.block)}[pT](){this.path.substr(-1)!=="/"&&(this.path+="/"),this.stat.size=0,this[Nu](),this.end()}[Ev](){$n.readlink(this.absolute,(t,r)=>{if(t)return this.emit("error",t);this[wv](r)})}[wv](t){this.linkpath=jn(t),this[Nu](),this.end()}[hT](t){this.type="Link",this.linkpath=jn(uT.relative(this.cwd,t)),this.stat.size=0,this[Nu](),this.end()}[dT](){if(this.stat.nlink>1){let t=this.stat.dev+":"+this.stat.ino;if(this.linkCache.has(t)){let r=this.linkCache.get(t);if(r.indexOf(this.cwd)===0)return this[hT](r)}this.linkCache.set(t,this.absolute)}if(this[Nu](),this.stat.size===0)return this.end();this[Sv]()}[Sv](){$n.open(this.absolute,"r",(t,r)=>{if(t)return this.emit("error",t);this[bv](r)})}[bv](t){if(this.fd=t,this[mT])return this[Yi]();this.blockLen=512*Math.ceil(this.stat.size/512),this.blockRemain=this.blockLen;let r=Math.min(this.blockLen,this.maxReadSize);this.buf=Buffer.allocUnsafe(r),this.offset=0,this.pos=0,this.remain=this.stat.size,this.length=this.buf.length,this[Id]()}[Id](){let{fd:t,buf:r,offset:n,length:i,pos:o}=this;$n.read(t,r,n,i,o,(s,a)=>{if(s)return this[Yi](()=>this.emit("error",s));this[Cv](a)})}[Yi](t){$n.close(this.fd,t)}[Cv](t){if(t<=0&&this.remain>0){let i=new Error("encountered unexpected EOF");return i.path=this.absolute,i.syscall="read",i.code="EOF",this[Yi](()=>this.emit("error",i))}if(t>this.remain){let i=new Error("did not encounter expected EOF");return i.path=this.absolute,i.syscall="read",i.code="EOF",this[Yi](()=>this.emit("error",i))}if(t===this.remain)for(let i=t;i<this.length&&t<this.blockRemain;i++)this.buf[i+this.offset]=0,t++,this.remain++;let r=this.offset===0&&t===this.buf.length?this.buf:this.buf.slice(this.offset,this.offset+t);this.write(r)?this[Tv]():this[xv](()=>this[Tv]())}[xv](t){this.once("drain",t)}write(t){if(this.blockRemain<t.length){let r=new Error("writing more data than expected");return r.path=this.absolute,this.emit("error",r)}return this.remain-=t.length,this.blockRemain-=t.length,this.pos+=t.length,this.offset+=t.length,super.write(t)}[Tv](){if(!this.remain)return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),this[Yi](t=>t?this.emit("error",t):this.end());this.offset>=this.length&&(this.buf=Buffer.allocUnsafe(Math.min(this.blockRemain,this.buf.length)),this.offset=0),this.length=this.buf.length-this.offset,this[Id]()}}),ET=class extends Od{[_v](){this[Rd]($n.lstatSync(this.absolute))}[Ev](){this[wv]($n.readlinkSync(this.absolute))}[Sv](){this[bv]($n.openSync(this.absolute,"r"))}[Id](){let t=!0;try{let{fd:r,buf:n,offset:i,length:o,pos:s}=this,a=$n.readSync(r,n,i,o,s);this[Cv](a),t=!1}finally{if(t)try{this[Yi](()=>{})}catch(r){}}}[xv](t){t()}[Yi](t){$n.closeSync(this.fd),t()}},G3=gT(class extends sT{constructor(t,r){r=r||{};super(r);this.preservePaths=!!r.preservePaths,this.portable=!!r.portable,this.strict=!!r.strict,this.noPax=!!r.noPax,this.noMtime=!!r.noMtime,this.readEntry=t,this.type=t.type,this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.prefix=r.prefix||null,this.path=jn(t.path),this.mode=this[Pd](t.mode),this.uid=this.portable?null:t.uid,this.gid=this.portable?null:t.gid,this.uname=this.portable?null:t.uname,this.gname=this.portable?null:t.gname,this.size=t.size,this.mtime=this.noMtime?null:r.mtime||t.mtime,this.atime=this.portable?null:t.atime,this.ctime=this.portable?null:t.ctime,this.linkpath=jn(t.linkpath),typeof r.onwarn=="function"&&this.on("warn",r.onwarn);let n=!1;if(!this.preservePaths){let[i,o]=vT(this.path);i&&(this.path=o,n=i)}this.remain=t.size,this.blockRemain=t.startBlockSize,this.header=new cT({path:this[Un](this.path),linkpath:this.type==="Link"?this[Un](this.linkpath):this.linkpath,mode:this.mode,uid:this.portable?null:this.uid,gid:this.portable?null:this.gid,size:this.size,mtime:this.noMtime?null:this.mtime,type:this.type,uname:this.portable?null:this.uname,atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime}),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path}),this.header.encode()&&!this.noPax&&super.write(new aT({atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime,gid:this.portable?null:this.gid,mtime:this.noMtime?null:this.mtime,path:this[Un](this.path),linkpath:this.type==="Link"?this[Un](this.linkpath):this.linkpath,size:this.size,uid:this.portable?null:this.uid,uname:this.portable?null:this.uname,dev:this.portable?null:this.readEntry.dev,ino:this.portable?null:this.readEntry.ino,nlink:this.portable?null:this.readEntry.nlink}).encode()),super.write(this.header.block),t.pipe(this)}[Un](t){return lT(t,this.prefix)}[Pd](t){return yT(t,this.type==="Directory",this.portable)}write(t){let r=t.length;if(r>this.blockRemain)throw new Error("writing more to entry than is appropriate");return this.blockRemain-=r,super.write(t)}end(){return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),super.end()}});Od.Sync=ET;Od.Tar=G3;var W3=e=>e.isFile()?"File":e.isDirectory()?"Directory":e.isSymbolicLink()?"SymbolicLink":"Unsupported";_T.exports=Od});var $d=g((ece,IT)=>{"use strict";var Iv=class{constructor(t,r){this.path=t||"./",this.absolute=r,this.entry=null,this.stat=null,this.readdir=null,this.pending=!1,this.ignore=!1,this.piped=!1}},V3=ba(),z3=cv(),K3=wd(),Rv=Av(),Y3=Rv.Sync,X3=Rv.Tar,Q3=Tu(),CT=Buffer.alloc(1024),Dd=Symbol("onStat"),Nd=Symbol("ended"),Hn=Symbol("queue"),Pa=Symbol("current"),ss=Symbol("process"),Ld=Symbol("processing"),wT=Symbol("processJob"),Bn=Symbol("jobs"),Pv=Symbol("jobDone"),kd=Symbol("addFSEntry"),ST=Symbol("addTarEntry"),Ov=Symbol("stat"),Dv=Symbol("readdir"),Fd=Symbol("onreaddir"),Md=Symbol("pipe"),bT=Symbol("entry"),Nv=Symbol("entryOpt"),Lv=Symbol("writeEntryClass"),xT=Symbol("write"),kv=Symbol("ondrain"),qd=require("fs"),TT=require("path"),J3=Td(),Fv=Ta(),Mv=J3(class extends V3{constructor(t){super(t);t=t||Object.create(null),this.opt=t,this.file=t.file||"",this.cwd=t.cwd||process.cwd(),this.maxReadSize=t.maxReadSize,this.preservePaths=!!t.preservePaths,this.strict=!!t.strict,this.noPax=!!t.noPax,this.prefix=Fv(t.prefix||""),this.linkCache=t.linkCache||new Map,this.statCache=t.statCache||new Map,this.readdirCache=t.readdirCache||new Map,this[Lv]=Rv,typeof t.onwarn=="function"&&this.on("warn",t.onwarn),this.portable=!!t.portable,this.zip=null,t.gzip?(typeof t.gzip!="object"&&(t.gzip={}),this.portable&&(t.gzip.portable=!0),this.zip=new z3.Gzip(t.gzip),this.zip.on("data",r=>super.write(r)),this.zip.on("end",r=>super.end()),this.zip.on("drain",r=>this[kv]()),this.on("resume",r=>this.zip.resume())):this.on("drain",this[kv]),this.noDirRecurse=!!t.noDirRecurse,this.follow=!!t.follow,this.noMtime=!!t.noMtime,this.mtime=t.mtime||null,this.filter=typeof t.filter=="function"?t.filter:r=>!0,this[Hn]=new Q3,this[Bn]=0,this.jobs=+t.jobs||4,this[Ld]=!1,this[Nd]=!1}[xT](t){return super.write(t)}add(t){return this.write(t),this}end(t){return t&&this.write(t),this[Nd]=!0,this[ss](),this}write(t){if(this[Nd])throw new Error("write after end");return t instanceof K3?this[ST](t):this[kd](t),this.flowing}[ST](t){let r=Fv(TT.resolve(this.cwd,t.path));if(!this.filter(t.path,t))t.resume();else{let n=new Iv(t.path,r,!1);n.entry=new X3(t,this[Nv](n)),n.entry.on("end",i=>this[Pv](n)),this[Bn]+=1,this[Hn].push(n)}this[ss]()}[kd](t){let r=Fv(TT.resolve(this.cwd,t));this[Hn].push(new Iv(t,r)),this[ss]()}[Ov](t){t.pending=!0,this[Bn]+=1;let r=this.follow?"stat":"lstat";qd[r](t.absolute,(n,i)=>{t.pending=!1,this[Bn]-=1,n?this.emit("error",n):this[Dd](t,i)})}[Dd](t,r){this.statCache.set(t.absolute,r),t.stat=r,this.filter(t.path,r)||(t.ignore=!0),this[ss]()}[Dv](t){t.pending=!0,this[Bn]+=1,qd.readdir(t.absolute,(r,n)=>{if(t.pending=!1,this[Bn]-=1,r)return this.emit("error",r);this[Fd](t,n)})}[Fd](t,r){this.readdirCache.set(t.absolute,r),t.readdir=r,this[ss]()}[ss](){if(!this[Ld]){this[Ld]=!0;for(let t=this[Hn].head;t!==null&&this[Bn]<this.jobs;t=t.next)if(this[wT](t.value),t.value.ignore){let r=t.next;this[Hn].removeNode(t),t.next=r}this[Ld]=!1,this[Nd]&&!this[Hn].length&&this[Bn]===0&&(this.zip?this.zip.end(CT):(super.write(CT),super.end()))}}get[Pa](){return this[Hn]&&this[Hn].head&&this[Hn].head.value}[Pv](t){this[Hn].shift(),this[Bn]-=1,this[ss]()}[wT](t){if(!t.pending){if(t.entry){t===this[Pa]&&!t.piped&&this[Md](t);return}if(t.stat||(this.statCache.has(t.absolute)?this[Dd](t,this.statCache.get(t.absolute)):this[Ov](t)),!!t.stat&&!t.ignore&&!(!this.noDirRecurse&&t.stat.isDirectory()&&!t.readdir&&(this.readdirCache.has(t.absolute)?this[Fd](t,this.readdirCache.get(t.absolute)):this[Dv](t),!t.readdir))){if(t.entry=this[bT](t),!t.entry){t.ignore=!0;return}t===this[Pa]&&!t.piped&&this[Md](t)}}}[Nv](t){return{onwarn:(r,n,i)=>this.warn(r,n,i),noPax:this.noPax,cwd:this.cwd,absolute:t.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime,prefix:this.prefix}}[bT](t){this[Bn]+=1;try{return new this[Lv](t.path,this[Nv](t)).on("end",()=>this[Pv](t)).on("error",r=>this.emit("error",r))}catch(r){this.emit("error",r)}}[kv](){this[Pa]&&this[Pa].entry&&this[Pa].entry.resume()}[Md](t){t.piped=!0,t.readdir&&t.readdir.forEach(i=>{let o=t.path,s=o==="./"?"":o.replace(/\/*$/,"/");this[kd](s+i)});let r=t.entry,n=this.zip;n?r.on("data",i=>{n.write(i)||r.pause()}):r.on("data",i=>{super.write(i)||r.pause()})}pause(){return this.zip&&this.zip.pause(),super.pause()}}),AT=class extends Mv{constructor(t){super(t);this[Lv]=Y3}pause(){}resume(){}[Ov](t){let r=this.follow?"statSync":"lstatSync";this[Dd](t,qd[r](t.absolute))}[Dv](t,r){this[Fd](t,qd.readdirSync(t.absolute))}[Md](t){let r=t.entry,n=this.zip;t.readdir&&t.readdir.forEach(i=>{let o=t.path,s=o==="./"?"":o.replace(/\/*$/,"/");this[kd](s+i)}),n?r.on("data",i=>{n.write(i)}):r.on("data",i=>{super[xT](i)})}};Mv.Sync=AT;IT.exports=Mv});var qa=g(ku=>{"use strict";var Z3=ba(),eW=require("events").EventEmitter,hr=require("fs"),qv=hr.writev;if(!qv){let e=process.binding("fs"),t=e.FSReqWrap||e.FSReqCallback;qv=(r,n,i,o)=>{let s=(c,u)=>o(c,u,n),a=new t;a.oncomplete=s,e.writeBuffers(r,n,i,a)}}var Oa=Symbol("_autoClose"),bn=Symbol("_close"),Lu=Symbol("_ended"),Ue=Symbol("_fd"),RT=Symbol("_finished"),Xi=Symbol("_flags"),$v=Symbol("_flush"),jv=Symbol("_handleChunk"),Uv=Symbol("_makeBuf"),jd=Symbol("_mode"),Ud=Symbol("_needDrain"),Da=Symbol("_onerror"),Na=Symbol("_onopen"),Hv=Symbol("_onread"),La=Symbol("_onwrite"),Qi=Symbol("_open"),ai=Symbol("_path"),as=Symbol("_pos"),Gn=Symbol("_queue"),ka=Symbol("_read"),PT=Symbol("_readSize"),Ji=Symbol("_reading"),Hd=Symbol("_remain"),OT=Symbol("_size"),Bd=Symbol("_write"),Fa=Symbol("_writing"),Gd=Symbol("_defaultFlag"),Ma=Symbol("_errored"),Bv=class extends Z3{constructor(t,r){r=r||{};super(r);if(this.readable=!0,this.writable=!1,typeof t!="string")throw new TypeError("path must be a string");this[Ma]=!1,this[Ue]=typeof r.fd=="number"?r.fd:null,this[ai]=t,this[PT]=r.readSize||16*1024*1024,this[Ji]=!1,this[OT]=typeof r.size=="number"?r.size:1/0,this[Hd]=this[OT],this[Oa]=typeof r.autoClose=="boolean"?r.autoClose:!0,typeof this[Ue]=="number"?this[ka]():this[Qi]()}get fd(){return this[Ue]}get path(){return this[ai]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[Qi](){hr.open(this[ai],"r",(t,r)=>this[Na](t,r))}[Na](t,r){t?this[Da](t):(this[Ue]=r,this.emit("open",r),this[ka]())}[Uv](){return Buffer.allocUnsafe(Math.min(this[PT],this[Hd]))}[ka](){if(!this[Ji]){this[Ji]=!0;let t=this[Uv]();if(t.length===0)return process.nextTick(()=>this[Hv](null,0,t));hr.read(this[Ue],t,0,t.length,null,(r,n,i)=>this[Hv](r,n,i))}}[Hv](t,r,n){this[Ji]=!1,t?this[Da](t):this[jv](r,n)&&this[ka]()}[bn](){if(this[Oa]&&typeof this[Ue]=="number"){let t=this[Ue];this[Ue]=null,hr.close(t,r=>r?this.emit("error",r):this.emit("close"))}}[Da](t){this[Ji]=!0,this[bn](),this.emit("error",t)}[jv](t,r){let n=!1;return this[Hd]-=t,t>0&&(n=super.write(t<r.length?r.slice(0,t):r)),(t===0||this[Hd]<=0)&&(n=!1,this[bn](),super.end()),n}emit(t,r){switch(t){case"prefinish":case"finish":break;case"drain":typeof this[Ue]=="number"&&this[ka]();break;case"error":return this[Ma]?void 0:(this[Ma]=!0,super.emit(t,r));default:return super.emit(t,r)}}},DT=class extends Bv{[Qi](){let t=!0;try{this[Na](null,hr.openSync(this[ai],"r")),t=!1}finally{t&&this[bn]()}}[ka](){let t=!0;try{if(!this[Ji]){this[Ji]=!0;do{let r=this[Uv](),n=r.length===0?0:hr.readSync(this[Ue],r,0,r.length,null);if(!this[jv](n,r))break}while(!0);this[Ji]=!1}t=!1}finally{t&&this[bn]()}}[bn](){if(this[Oa]&&typeof this[Ue]=="number"){let t=this[Ue];this[Ue]=null,hr.closeSync(t),this.emit("close")}}},Gv=class extends eW{constructor(t,r){r=r||{};super(r);this.readable=!1,this.writable=!0,this[Ma]=!1,this[Fa]=!1,this[Lu]=!1,this[Ud]=!1,this[Gn]=[],this[ai]=t,this[Ue]=typeof r.fd=="number"?r.fd:null,this[jd]=r.mode===void 0?438:r.mode,this[as]=typeof r.start=="number"?r.start:null,this[Oa]=typeof r.autoClose=="boolean"?r.autoClose:!0;let n=this[as]!==null?"r+":"w";this[Gd]=r.flags===void 0,this[Xi]=this[Gd]?n:r.flags,this[Ue]===null&&this[Qi]()}emit(t,r){if(t==="error"){if(this[Ma])return;this[Ma]=!0}return super.emit(t,r)}get fd(){return this[Ue]}get path(){return this[ai]}[Da](t){this[bn](),this[Fa]=!0,this.emit("error",t)}[Qi](){hr.open(this[ai],this[Xi],this[jd],(t,r)=>this[Na](t,r))}[Na](t,r){this[Gd]&&this[Xi]==="r+"&&t&&t.code==="ENOENT"?(this[Xi]="w",this[Qi]()):t?this[Da](t):(this[Ue]=r,this.emit("open",r),this[$v]())}end(t,r){return t&&this.write(t,r),this[Lu]=!0,!this[Fa]&&!this[Gn].length&&typeof this[Ue]=="number"&&this[La](null,0),this}write(t,r){return typeof t=="string"&&(t=Buffer.from(t,r)),this[Lu]?(this.emit("error",new Error("write() after end()")),!1):this[Ue]===null||this[Fa]||this[Gn].length?(this[Gn].push(t),this[Ud]=!0,!1):(this[Fa]=!0,this[Bd](t),!0)}[Bd](t){hr.write(this[Ue],t,0,t.length,this[as],(r,n)=>this[La](r,n))}[La](t,r){t?this[Da](t):(this[as]!==null&&(this[as]+=r),this[Gn].length?this[$v]():(this[Fa]=!1,this[Lu]&&!this[RT]?(this[RT]=!0,this[bn](),this.emit("finish")):this[Ud]&&(this[Ud]=!1,this.emit("drain"))))}[$v](){if(this[Gn].length===0)this[Lu]&&this[La](null,0);else if(this[Gn].length===1)this[Bd](this[Gn].pop());else{let t=this[Gn];this[Gn]=[],qv(this[Ue],t,this[as],(r,n)=>this[La](r,n))}}[bn](){if(this[Oa]&&typeof this[Ue]=="number"){let t=this[Ue];this[Ue]=null,hr.close(t,r=>r?this.emit("error",r):this.emit("close"))}}},NT=class extends Gv{[Qi](){let t;if(this[Gd]&&this[Xi]==="r+")try{t=hr.openSync(this[ai],this[Xi],this[jd])}catch(r){if(r.code==="ENOENT")return this[Xi]="w",this[Qi]();throw r}else t=hr.openSync(this[ai],this[Xi],this[jd]);this[Na](null,t)}[bn](){if(this[Oa]&&typeof this[Ue]=="number"){let t=this[Ue];this[Ue]=null,hr.closeSync(t),this.emit("close")}}[Bd](t){let r=!0;try{this[La](null,hr.writeSync(this[Ue],t,0,t.length,this[as])),r=!1}finally{if(r)try{this[bn]()}catch(n){}}}};ku.ReadStream=Bv;ku.ReadStreamSync=DT;ku.WriteStream=Gv;ku.WriteStreamSync=NT});var Qd=g((nce,jT)=>{"use strict";var tW=Td(),rW=Ia(),nW=require("events"),iW=Tu(),oW=1024*1024,sW=wd(),LT=xd(),aW=cv(),Wv=Buffer.from([31,139]),Jr=Symbol("state"),cs=Symbol("writeEntry"),ci=Symbol("readEntry"),Vv=Symbol("nextEntry"),kT=Symbol("processEntry"),Zr=Symbol("extendedHeader"),Fu=Symbol("globalExtendedHeader"),Zi=Symbol("meta"),FT=Symbol("emitMeta"),Xe=Symbol("buffer"),ui=Symbol("queue"),us=Symbol("ended"),MT=Symbol("emittedEnd"),ls=Symbol("emit"),mr=Symbol("unzip"),Wd=Symbol("consumeChunk"),Vd=Symbol("consumeChunkSub"),zv=Symbol("consumeBody"),qT=Symbol("consumeMeta"),$T=Symbol("consumeHeader"),zd=Symbol("consuming"),Kv=Symbol("bufferConcat"),Yv=Symbol("maybeEnd"),Mu=Symbol("writing"),eo=Symbol("aborted"),Kd=Symbol("onDone"),fs=Symbol("sawValidEntry"),Yd=Symbol("sawNullBlock"),Xd=Symbol("sawEOF"),cW=e=>!0;jT.exports=tW(class extends nW{constructor(t){t=t||{};super(t);this.file=t.file||"",this[fs]=null,this.on(Kd,r=>{(this[Jr]==="begin"||this[fs]===!1)&&this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")}),t.ondone?this.on(Kd,t.ondone):this.on(Kd,r=>{this.emit("prefinish"),this.emit("finish"),this.emit("end"),this.emit("close")}),this.strict=!!t.strict,this.maxMetaEntrySize=t.maxMetaEntrySize||oW,this.filter=typeof t.filter=="function"?t.filter:cW,this.writable=!0,this.readable=!1,this[ui]=new iW,this[Xe]=null,this[ci]=null,this[cs]=null,this[Jr]="begin",this[Zi]="",this[Zr]=null,this[Fu]=null,this[us]=!1,this[mr]=null,this[eo]=!1,this[Yd]=!1,this[Xd]=!1,typeof t.onwarn=="function"&&this.on("warn",t.onwarn),typeof t.onentry=="function"&&this.on("entry",t.onentry)}[$T](t,r){this[fs]===null&&(this[fs]=!1);let n;try{n=new rW(t,r,this[Zr],this[Fu])}catch(i){return this.warn("TAR_ENTRY_INVALID",i)}if(n.nullBlock)this[Yd]?(this[Xd]=!0,this[Jr]==="begin"&&(this[Jr]="header"),this[ls]("eof")):(this[Yd]=!0,this[ls]("nullBlock"));else if(this[Yd]=!1,!n.cksumValid)this.warn("TAR_ENTRY_INVALID","checksum failure",{header:n});else if(!n.path)this.warn("TAR_ENTRY_INVALID","path is required",{header:n});else{let i=n.type;if(/^(Symbolic)?Link$/.test(i)&&!n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:n});else if(!/^(Symbolic)?Link$/.test(i)&&n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:n});else{let o=this[cs]=new sW(n,this[Zr],this[Fu]);if(!this[fs])if(o.remain){let s=()=>{o.invalid||(this[fs]=!0)};o.on("end",s)}else this[fs]=!0;o.meta?o.size>this.maxMetaEntrySize?(o.ignore=!0,this[ls]("ignoredEntry",o),this[Jr]="ignore",o.resume()):o.size>0&&(this[Zi]="",o.on("data",s=>this[Zi]+=s),this[Jr]="meta"):(this[Zr]=null,o.ignore=o.ignore||!this.filter(o.path,o),o.ignore?(this[ls]("ignoredEntry",o),this[Jr]=o.remain?"ignore":"header",o.resume()):(o.remain?this[Jr]="body":(this[Jr]="header",o.end()),this[ci]?this[ui].push(o):(this[ui].push(o),this[Vv]())))}}}[kT](t){let r=!0;return t?Array.isArray(t)?this.emit.apply(this,t):(this[ci]=t,this.emit("entry",t),t.emittedEnd||(t.on("end",n=>this[Vv]()),r=!1)):(this[ci]=null,r=!1),r}[Vv](){do;while(this[kT](this[ui].shift()));if(!this[ui].length){let t=this[ci];!t||t.flowing||t.size===t.remain?this[Mu]||this.emit("drain"):t.once("drain",n=>this.emit("drain"))}}[zv](t,r){let n=this[cs],i=n.blockRemain,o=i>=t.length&&r===0?t:t.slice(r,r+i);return n.write(o),n.blockRemain||(this[Jr]="header",this[cs]=null,n.end()),o.length}[qT](t,r){let n=this[cs],i=this[zv](t,r);return this[cs]||this[FT](n),i}[ls](t,r,n){!this[ui].length&&!this[ci]?this.emit(t,r,n):this[ui].push([t,r,n])}[FT](t){switch(this[ls]("meta",this[Zi]),t.type){case"ExtendedHeader":case"OldExtendedHeader":this[Zr]=LT.parse(this[Zi],this[Zr],!1);break;case"GlobalExtendedHeader":this[Fu]=LT.parse(this[Zi],this[Fu],!0);break;case"NextFileHasLongPath":case"OldGnuLongPath":this[Zr]=this[Zr]||Object.create(null),this[Zr].path=this[Zi].replace(/\0.*/,"");break;case"NextFileHasLongLinkpath":this[Zr]=this[Zr]||Object.create(null),this[Zr].linkpath=this[Zi].replace(/\0.*/,"");break;default:throw new Error("unknown meta: "+t.type)}}abort(t){this[eo]=!0,this.emit("abort",t),this.warn("TAR_ABORT",t,{recoverable:!1})}write(t){if(this[eo])return;if(this[mr]===null&&t){if(this[Xe]&&(t=Buffer.concat([this[Xe],t]),this[Xe]=null),t.length<Wv.length)return this[Xe]=t,!0;for(let n=0;this[mr]===null&&n<Wv.length;n++)t[n]!==Wv[n]&&(this[mr]=!1);if(this[mr]===null){let n=this[us];this[us]=!1,this[mr]=new aW.Unzip,this[mr].on("data",o=>this[Wd](o)),this[mr].on("error",o=>this.abort(o)),this[mr].on("end",o=>{this[us]=!0,this[Wd]()}),this[Mu]=!0;let i=this[mr][n?"end":"write"](t);return this[Mu]=!1,i}}this[Mu]=!0,this[mr]?this[mr].write(t):this[Wd](t),this[Mu]=!1;let r=this[ui].length?!1:this[ci]?this[ci].flowing:!0;return!r&&!this[ui].length&&this[ci].once("drain",n=>this.emit("drain")),r}[Kv](t){t&&!this[eo]&&(this[Xe]=this[Xe]?Buffer.concat([this[Xe],t]):t)}[Yv](){if(this[us]&&!this[MT]&&!this[eo]&&!this[zd]){this[MT]=!0;let t=this[cs];if(t&&t.blockRemain){let r=this[Xe]?this[Xe].length:0;this.warn("TAR_BAD_ARCHIVE",`Truncated input (needed ${t.blockRemain} more bytes, only ${r} available)`,{entry:t}),this[Xe]&&t.write(this[Xe]),t.end()}this[ls](Kd)}}[Wd](t){if(this[zd])this[Kv](t);else if(!t&&!this[Xe])this[Yv]();else{if(this[zd]=!0,this[Xe]){this[Kv](t);let r=this[Xe];this[Xe]=null,this[Vd](r)}else this[Vd](t);for(;this[Xe]&&this[Xe].length>=512&&!this[eo]&&!this[Xd];){let r=this[Xe];this[Xe]=null,this[Vd](r)}this[zd]=!1}(!this[Xe]||this[us])&&this[Yv]()}[Vd](t){let r=0,n=t.length;for(;r+512<=n&&!this[eo]&&!this[Xd];)switch(this[Jr]){case"begin":case"header":this[$T](t,r),r+=512;break;case"ignore":case"body":r+=this[zv](t,r);break;case"meta":r+=this[qT](t,r);break;default:throw new Error("invalid state: "+this[Jr])}r<n&&(this[Xe]?this[Xe]=Buffer.concat([t.slice(r),this[Xe]]):this[Xe]=t.slice(r))}end(t){this[eo]||(this[mr]?this[mr].end(t):(this[us]=!0,this.write(t)))}})});var Jd=g((ice,GT)=>{"use strict";var uW=Sa(),UT=Qd(),$a=require("fs"),lW=qa(),HT=require("path"),Xv=Ra();GT.exports=(e,t,r)=>{typeof e=="function"?(r=e,t=null,e={}):Array.isArray(e)&&(t=e,e={}),typeof t=="function"&&(r=t,t=null),t?t=Array.from(t):t=[];let n=uW(e);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return t.length&&dW(n,t),n.noResume||fW(n),n.file&&n.sync?pW(n):n.file?hW(n,r):BT(n)};var fW=e=>{let t=e.onentry;e.onentry=t?r=>{t(r),r.resume()}:r=>r.resume()},dW=(e,t)=>{let r=new Map(t.map(o=>[Xv(o),!0])),n=e.filter,i=(o,s)=>{let a=s||HT.parse(o).root||".",c=o===a?!1:r.has(o)?r.get(o):i(HT.dirname(o),a);return r.set(o,c),c};e.filter=n?(o,s)=>n(o,s)&&i(Xv(o)):o=>i(Xv(o))},pW=e=>{let t=BT(e),r=e.file,n=!0,i;try{let o=$a.statSync(r),s=e.maxReadSize||16*1024*1024;if(o.size<s)t.end($a.readFileSync(r));else{let a=0,c=Buffer.allocUnsafe(s);for(i=$a.openSync(r,"r");a<o.size;){let u=$a.readSync(i,c,0,s,a);a+=u,t.write(c.slice(0,u))}t.end()}n=!1}finally{if(n&&i)try{$a.closeSync(i)}catch(o){}}},hW=(e,t)=>{let r=new UT(e),n=e.maxReadSize||16*1024*1024,i=e.file,o=new Promise((s,a)=>{r.on("error",a),r.on("end",s),$a.stat(i,(c,u)=>{if(c)a(c);else{let l=new lW.ReadStream(i,{readSize:n,size:u.size});l.on("error",a),l.pipe(r)}})});return t?o.then(t,t):o},BT=e=>new UT(e)});var XT=g((oce,YT)=>{"use strict";var mW=Sa(),Zd=$d(),WT=qa(),VT=Jd(),zT=require("path");YT.exports=(e,t,r)=>{if(typeof t=="function"&&(r=t),Array.isArray(e)&&(t=e,e={}),!t||!Array.isArray(t)||!t.length)throw new TypeError("no files or directories specified");t=Array.from(t);let n=mW(e);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return n.file&&n.sync?gW(n,t):n.file?vW(n,t,r):n.sync?yW(n,t):EW(n,t)};var gW=(e,t)=>{let r=new Zd.Sync(e),n=new WT.WriteStreamSync(e.file,{mode:e.mode||438});r.pipe(n),KT(r,t)},vW=(e,t,r)=>{let n=new Zd(e),i=new WT.WriteStream(e.file,{mode:e.mode||438});n.pipe(i);let o=new Promise((s,a)=>{i.on("error",a),i.on("close",s),n.on("error",a)});return Qv(n,t),r?o.then(r,r):o},KT=(e,t)=>{t.forEach(r=>{r.charAt(0)==="@"?VT({file:zT.resolve(e.cwd,r.substr(1)),sync:!0,noResume:!0,onentry:n=>e.add(n)}):e.add(r)}),e.end()},Qv=(e,t)=>{for(;t.length;){let r=t.shift();if(r.charAt(0)==="@")return VT({file:zT.resolve(e.cwd,r.substr(1)),noResume:!0,onentry:n=>e.add(n)}).then(n=>Qv(e,t));e.add(r)}e.end()},yW=(e,t)=>{let r=new Zd.Sync(e);return KT(r,t),r},EW=(e,t)=>{let r=new Zd(e);return Qv(r,t),r}});var Jv=g((sce,nA)=>{"use strict";var _W=Sa(),QT=$d(),Nr=require("fs"),JT=qa(),ZT=Jd(),eA=require("path"),tA=Ia();nA.exports=(e,t,r)=>{let n=_W(e);if(!n.file)throw new TypeError("file is required");if(n.gzip)throw new TypeError("cannot append to compressed archives");if(!t||!Array.isArray(t)||!t.length)throw new TypeError("no files or directories specified");return t=Array.from(t),n.sync?CW(n,t):SW(n,t,r)};var CW=(e,t)=>{let r=new QT.Sync(e),n=!0,i,o;try{try{i=Nr.openSync(e.file,"r+")}catch(c){if(c.code==="ENOENT")i=Nr.openSync(e.file,"w+");else throw c}let s=Nr.fstatSync(i),a=Buffer.alloc(512);e:for(o=0;o<s.size;o+=512){for(let l=0,f=0;l<512;l+=f){if(f=Nr.readSync(i,a,l,a.length-l,o+l),o===0&&a[0]===31&&a[1]===139)throw new Error("cannot append to compressed archives");if(!f)break e}let c=new tA(a);if(!c.cksumValid)break;let u=512*Math.ceil(c.size/512);if(o+u+512>s.size)break;o+=u,e.mtimeCache&&e.mtimeCache.set(c.path,c.mtime)}n=!1,wW(e,r,o,i,t)}finally{if(n)try{Nr.closeSync(i)}catch(s){}}},wW=(e,t,r,n,i)=>{let o=new JT.WriteStreamSync(e.file,{fd:n,start:r});t.pipe(o),bW(t,i)},SW=(e,t,r)=>{t=Array.from(t);let n=new QT(e),i=(s,a,c)=>{let u=(h,m)=>{h?Nr.close(s,v=>c(h)):c(null,m)},l=0;if(a===0)return u(null,0);let f=0,d=Buffer.alloc(512),p=(h,m)=>{if(h)return u(h);if(f+=m,f<512&&m)return Nr.read(s,d,f,d.length-f,l+f,p);if(l===0&&d[0]===31&&d[1]===139)return u(new Error("cannot append to compressed archives"));if(f<512)return u(null,l);let v=new tA(d);if(!v.cksumValid)return u(null,l);let _=512*Math.ceil(v.size/512);if(l+_+512>a||(l+=_+512,l>=a))return u(null,l);e.mtimeCache&&e.mtimeCache.set(v.path,v.mtime),f=0,Nr.read(s,d,0,512,l,p)};Nr.read(s,d,0,512,l,p)},o=new Promise((s,a)=>{n.on("error",a);let c="r+",u=(l,f)=>{if(l&&l.code==="ENOENT"&&c==="r+")return c="w+",Nr.open(e.file,c,u);if(l)return a(l);Nr.fstat(f,(d,p)=>{if(d)return Nr.close(f,()=>a(d));i(f,p.size,(h,m)=>{if(h)return a(h);let v=new JT.WriteStream(e.file,{fd:f,start:m});n.pipe(v),v.on("error",a),v.on("close",s),rA(n,t)})})};Nr.open(e.file,c,u)});return r?o.then(r,r):o},bW=(e,t)=>{t.forEach(r=>{r.charAt(0)==="@"?ZT({file:eA.resolve(e.cwd,r.substr(1)),sync:!0,noResume:!0,onentry:n=>e.add(n)}):e.add(r)}),e.end()},rA=(e,t)=>{for(;t.length;){let r=t.shift();if(r.charAt(0)==="@")return ZT({file:eA.resolve(e.cwd,r.substr(1)),noResume:!0,onentry:n=>e.add(n)}).then(n=>rA(e,t));e.add(r)}e.end()}});var oA=g((ace,iA)=>{"use strict";var xW=Sa(),TW=Jv();iA.exports=(e,t,r)=>{let n=xW(e);if(!n.file)throw new TypeError("file is required");if(n.gzip)throw new TypeError("cannot append to compressed archives");if(!t||!Array.isArray(t)||!t.length)throw new TypeError("no files or directories specified");return t=Array.from(t),AW(n),TW(n,t,r)};var AW=e=>{let t=e.filter;e.mtimeCache||(e.mtimeCache=new Map),e.filter=t?(r,n)=>t(r,n)&&!(e.mtimeCache.get(r)>n.mtime):(r,n)=>!(e.mtimeCache.get(r)>n.mtime)}});var cA=g((cce,aA)=>{var{promisify:sA}=require("util"),to=require("fs"),IW=e=>{if(!e)e={mode:511,fs:to};else if(typeof e=="object")e=$({mode:511,fs:to},e);else if(typeof e=="number")e={mode:e,fs:to};else if(typeof e=="string")e={mode:parseInt(e,8),fs:to};else throw new TypeError("invalid options argument");return e.mkdir=e.mkdir||e.fs.mkdir||to.mkdir,e.mkdirAsync=sA(e.mkdir),e.stat=e.stat||e.fs.stat||to.stat,e.statAsync=sA(e.stat),e.statSync=e.statSync||e.fs.statSync||to.statSync,e.mkdirSync=e.mkdirSync||e.fs.mkdirSync||to.mkdirSync,e};aA.exports=IW});var lA=g((uce,uA)=>{var RW=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:PW,parse:OW}=require("path"),DW=e=>{if(/\0/.test(e))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:e,code:"ERR_INVALID_ARG_VALUE"});if(e=PW(e),RW==="win32"){let t=/[*|"<>?:]/,{root:r}=OW(e);if(t.test(e.substr(r.length)))throw Object.assign(new Error("Illegal characters in path."),{path:e,code:"EINVAL"})}return e};uA.exports=DW});var mA=g((lce,hA)=>{var{dirname:fA}=require("path"),dA=(e,t,r=void 0)=>r===t?Promise.resolve():e.statAsync(t).then(n=>n.isDirectory()?r:void 0,n=>n.code==="ENOENT"?dA(e,fA(t),t):void 0),pA=(e,t,r=void 0)=>{if(r!==t)try{return e.statSync(t).isDirectory()?r:void 0}catch(n){return n.code==="ENOENT"?pA(e,fA(t),t):void 0}};hA.exports={findMade:dA,findMadeSync:pA}});var ty=g((fce,vA)=>{var{dirname:gA}=require("path"),Zv=(e,t,r)=>{t.recursive=!1;let n=gA(e);return n===e?t.mkdirAsync(e,t).catch(i=>{if(i.code!=="EISDIR")throw i}):t.mkdirAsync(e,t).then(()=>r||e,i=>{if(i.code==="ENOENT")return Zv(n,t).then(o=>Zv(e,t,o));if(i.code!=="EEXIST"&&i.code!=="EROFS")throw i;return t.statAsync(e).then(o=>{if(o.isDirectory())return r;throw i},()=>{throw i})})},ey=(e,t,r)=>{let n=gA(e);if(t.recursive=!1,n===e)try{return t.mkdirSync(e,t)}catch(i){if(i.code!=="EISDIR")throw i;return}try{return t.mkdirSync(e,t),r||e}catch(i){if(i.code==="ENOENT")return ey(e,t,ey(n,t,r));if(i.code!=="EEXIST"&&i.code!=="EROFS")throw i;try{if(!t.statSync(e).isDirectory())throw i}catch(o){throw i}}};vA.exports={mkdirpManual:Zv,mkdirpManualSync:ey}});var _A=g((dce,EA)=>{var{dirname:yA}=require("path"),{findMade:NW,findMadeSync:LW}=mA(),{mkdirpManual:kW,mkdirpManualSync:FW}=ty(),MW=(e,t)=>(t.recursive=!0,yA(e)===e?t.mkdirAsync(e,t):NW(t,e).then(n=>t.mkdirAsync(e,t).then(()=>n).catch(i=>{if(i.code==="ENOENT")return kW(e,t);throw i}))),qW=(e,t)=>{if(t.recursive=!0,yA(e)===e)return t.mkdirSync(e,t);let n=LW(t,e);try{return t.mkdirSync(e,t),n}catch(i){if(i.code==="ENOENT")return FW(e,t);throw i}};EA.exports={mkdirpNative:MW,mkdirpNativeSync:qW}});var bA=g((pce,SA)=>{var CA=require("fs"),$W=process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version,ry=$W.replace(/^v/,"").split("."),wA=+ry[0]>10||+ry[0]==10&&+ry[1]>=12,jW=wA?e=>e.mkdir===CA.mkdir:()=>!1,UW=wA?e=>e.mkdirSync===CA.mkdirSync:()=>!1;SA.exports={useNative:jW,useNativeSync:UW}});var PA=g((hce,RA)=>{var ja=cA(),Ua=lA(),{mkdirpNative:xA,mkdirpNativeSync:TA}=_A(),{mkdirpManual:AA,mkdirpManualSync:IA}=ty(),{useNative:HW,useNativeSync:BW}=bA(),Ha=(e,t)=>(e=Ua(e),t=ja(t),HW(t)?xA(e,t):AA(e,t)),GW=(e,t)=>(e=Ua(e),t=ja(t),BW(t)?TA(e,t):IA(e,t));Ha.sync=GW;Ha.native=(e,t)=>xA(Ua(e),ja(t));Ha.manual=(e,t)=>AA(Ua(e),ja(t));Ha.nativeSync=(e,t)=>TA(Ua(e),ja(t));Ha.manualSync=(e,t)=>IA(Ua(e),ja(t));RA.exports=Ha});var MA=g((mce,FA)=>{"use strict";var en=require("fs"),ds=require("path"),WW=en.lchown?"lchown":"chown",VW=en.lchownSync?"lchownSync":"chownSync",OA=en.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/),DA=(e,t,r)=>{try{return en[VW](e,t,r)}catch(n){if(n.code!=="ENOENT")throw n}},zW=(e,t,r)=>{try{return en.chownSync(e,t,r)}catch(n){if(n.code!=="ENOENT")throw n}},KW=OA?(e,t,r,n)=>i=>{!i||i.code!=="EISDIR"?n(i):en.chown(e,t,r,n)}:(e,t,r,n)=>n,ny=OA?(e,t,r)=>{try{return DA(e,t,r)}catch(n){if(n.code!=="EISDIR")throw n;zW(e,t,r)}}:(e,t,r)=>DA(e,t,r),YW=process.version,NA=(e,t,r)=>en.readdir(e,t,r),XW=(e,t)=>en.readdirSync(e,t);/^v4\./.test(YW)&&(NA=(e,t,r)=>en.readdir(e,r));var ep=(e,t,r,n)=>{en[WW](e,t,r,KW(e,t,r,i=>{n(i&&i.code!=="ENOENT"?i:null)}))},LA=(e,t,r,n,i)=>{if(typeof t=="string")return en.lstat(ds.resolve(e,t),(o,s)=>{if(o)return i(o.code!=="ENOENT"?o:null);s.name=t,LA(e,s,r,n,i)});if(t.isDirectory())iy(ds.resolve(e,t.name),r,n,o=>{if(o)return i(o);let s=ds.resolve(e,t.name);ep(s,r,n,i)});else{let o=ds.resolve(e,t.name);ep(o,r,n,i)}},iy=(e,t,r,n)=>{NA(e,{withFileTypes:!0},(i,o)=>{if(i){if(i.code==="ENOENT")return n();if(i.code!=="ENOTDIR"&&i.code!=="ENOTSUP")return n(i)}if(i||!o.length)return ep(e,t,r,n);let s=o.length,a=null,c=u=>{if(!a){if(u)return n(a=u);if(--s==0)return ep(e,t,r,n)}};o.forEach(u=>LA(e,u,t,r,c))})},QW=(e,t,r,n)=>{if(typeof t=="string")try{let i=en.lstatSync(ds.resolve(e,t));i.name=t,t=i}catch(i){if(i.code==="ENOENT")return;throw i}t.isDirectory()&&kA(ds.resolve(e,t.name),r,n),ny(ds.resolve(e,t.name),r,n)},kA=(e,t,r)=>{let n;try{n=XW(e,{withFileTypes:!0})}catch(i){if(i.code==="ENOENT")return;if(i.code==="ENOTDIR"||i.code==="ENOTSUP")return ny(e,t,r);throw i}return n&&n.length&&n.forEach(i=>QW(e,i,t,r)),ny(e,t,r)};FA.exports=iy;iy.sync=kA});var UA=g((gce,ay)=>{"use strict";var qA=PA(),tn=require("fs"),tp=require("path"),$A=MA(),xn=Ta(),oy=class extends Error{constructor(t,r){super("Cannot extract through symbolic link");this.path=r,this.symlink=t}get name(){return"SylinkError"}},sy=class extends Error{constructor(t,r){super(r+": Cannot cd into '"+t+"'");this.path=t,this.code=r}get name(){return"CwdError"}},rp=(e,t)=>e.get(xn(t)),qu=(e,t,r)=>e.set(xn(t),r),JW=(e,t)=>{tn.stat(e,(r,n)=>{(r||!n.isDirectory())&&(r=new sy(e,r&&r.code||"ENOTDIR")),t(r)})};ay.exports=(e,t,r)=>{e=xn(e);let n=t.umask,i=t.mode|448,o=(i&n)!=0,s=t.uid,a=t.gid,c=typeof s=="number"&&typeof a=="number"&&(s!==t.processUid||a!==t.processGid),u=t.preserve,l=t.unlink,f=t.cache,d=xn(t.cwd),p=(v,_)=>{v?r(v):(qu(f,e,!0),_&&c?$A(_,s,a,E=>p(E)):o?tn.chmod(e,i,r):r())};if(f&&rp(f,e)===!0)return p();if(e===d)return JW(e,p);if(u)return qA(e,{mode:i}).then(v=>p(null,v),p);let m=xn(tp.relative(d,e)).split("/");np(d,m,i,f,l,d,null,p)};var np=(e,t,r,n,i,o,s,a)=>{if(!t.length)return a(null,s);let c=t.shift(),u=xn(tp.resolve(e+"/"+c));if(rp(n,u))return np(u,t,r,n,i,o,s,a);tn.mkdir(u,r,jA(u,t,r,n,i,o,s,a))},jA=(e,t,r,n,i,o,s,a)=>c=>{c?tn.lstat(e,(u,l)=>{if(u)u.path=u.path&&xn(u.path),a(u);else if(l.isDirectory())np(e,t,r,n,i,o,s,a);else if(i)tn.unlink(e,f=>{if(f)return a(f);tn.mkdir(e,r,jA(e,t,r,n,i,o,s,a))});else{if(l.isSymbolicLink())return a(new oy(e,e+"/"+t.join("/")));a(c)}}):(s=s||e,np(e,t,r,n,i,o,s,a))},ZW=e=>{let t=!1,r="ENOTDIR";try{t=tn.statSync(e).isDirectory()}catch(n){r=n.code}finally{if(!t)throw new sy(e,r)}};ay.exports.sync=(e,t)=>{e=xn(e);let r=t.umask,n=t.mode|448,i=(n&r)!=0,o=t.uid,s=t.gid,a=typeof o=="number"&&typeof s=="number"&&(o!==t.processUid||s!==t.processGid),c=t.preserve,u=t.unlink,l=t.cache,f=xn(t.cwd),d=v=>{qu(l,e,!0),v&&a&&$A.sync(v,o,s),i&&tn.chmodSync(e,n)};if(l&&rp(l,e)===!0)return d();if(e===f)return ZW(f),d();if(c)return d(qA.sync(e,n));let h=xn(tp.relative(f,e)).split("/"),m=null;for(let v=h.shift(),_=f;v&&(_+="/"+v);v=h.shift())if(_=xn(tp.resolve(_)),!rp(l,_))try{tn.mkdirSync(_,n),m=m||_,qu(l,_,!0)}catch(E){let w=tn.lstatSync(_);if(w.isDirectory()){qu(l,_,!0);continue}else if(u){tn.unlinkSync(_),tn.mkdirSync(_,n),m=m||_,qu(l,_,!0);continue}else if(w.isSymbolicLink())return new oy(_,_+"/"+h.join("/"))}return d(m)}});var uy=g((vce,HA)=>{var cy=Object.create(null),{hasOwnProperty:eV}=Object.prototype;HA.exports=e=>(eV.call(cy,e)||(cy[e]=e.normalize("NFKD")),cy[e])});var VA=g((yce,WA)=>{var BA=require("assert"),tV=uy(),rV=Ra(),{join:GA}=require("path"),nV=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,iV=nV==="win32";WA.exports=()=>{let e=new Map,t=new Map,r=u=>u.split("/").slice(0,-1).reduce((f,d)=>(f.length&&(d=GA(f[f.length-1],d)),f.push(d||"/"),f),[]),n=new Set,i=u=>{let l=t.get(u);if(!l)throw new Error("function does not have any path reservations");return{paths:l.paths.map(f=>e.get(f)),dirs:[...l.dirs].map(f=>e.get(f))}},o=u=>{let{paths:l,dirs:f}=i(u);return l.every(d=>d[0]===u)&&f.every(d=>d[0]instanceof Set&&d[0].has(u))},s=u=>n.has(u)||!o(u)?!1:(n.add(u),u(()=>a(u)),!0),a=u=>{if(!n.has(u))return!1;let{paths:l,dirs:f}=t.get(u),d=new Set;return l.forEach(p=>{let h=e.get(p);BA.equal(h[0],u),h.length===1?e.delete(p):(h.shift(),typeof h[0]=="function"?d.add(h[0]):h[0].forEach(m=>d.add(m)))}),f.forEach(p=>{let h=e.get(p);BA(h[0]instanceof Set),h[0].size===1&&h.length===1?e.delete(p):h[0].size===1?(h.shift(),d.add(h[0])):h[0].delete(u)}),n.delete(u),d.forEach(p=>s(p)),!0};return{check:o,reserve:(u,l)=>{u=iV?["win32 parallelization disabled"]:u.map(d=>tV(rV(GA(d))).toLowerCase());let f=new Set(u.map(d=>r(d)).reduce((d,p)=>d.concat(p)));return t.set(l,{dirs:f,paths:u}),u.forEach(d=>{let p=e.get(d);p?p.push(l):e.set(d,[l])}),f.forEach(d=>{let p=e.get(d);p?p[p.length-1]instanceof Set?p[p.length-1].add(l):p.push(new Set([l])):e.set(d,[new Set([l])])}),s(l)}}}});var YA=g((Ece,KA)=>{var oV=process.env.__FAKE_PLATFORM__||process.platform,sV=oV==="win32",aV=global.__FAKE_TESTING_FS__||require("fs"),{O_CREAT:cV,O_TRUNC:uV,O_WRONLY:lV,UV_FS_O_FILEMAP:zA=0}=aV.constants,fV=sV&&!!zA,dV=512*1024,pV=zA|uV|cV|lV;KA.exports=fV?e=>e<dV?pV:"w":()=>"w"});var vy=g((_ce,lI)=>{"use strict";var hV=require("assert"),mV=Qd(),Pe=require("fs"),gV=qa(),li=require("path"),XA=UA(),QA=vv(),vV=VA(),yV=yv(),Lr=Ta(),EV=Ra(),_V=uy(),JA=Symbol("onEntry"),ly=Symbol("checkFs"),ZA=Symbol("checkFs2"),ip=Symbol("pruneCache"),fy=Symbol("isReusable"),rn=Symbol("makeFs"),dy=Symbol("file"),py=Symbol("directory"),op=Symbol("link"),eI=Symbol("symlink"),tI=Symbol("hardlink"),rI=Symbol("unsupported"),nI=Symbol("checkPath"),ro=Symbol("mkdir"),Vt=Symbol("onError"),sp=Symbol("pending"),iI=Symbol("pend"),Ba=Symbol("unpend"),hy=Symbol("ended"),my=Symbol("maybeClose"),gy=Symbol("skip"),$u=Symbol("doChown"),ju=Symbol("uid"),Uu=Symbol("gid"),Hu=Symbol("checkedCwd"),oI=require("crypto"),sI=YA(),CV=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,Bu=CV==="win32",wV=(e,t)=>{if(!Bu)return Pe.unlink(e,t);let r=e+".DELETE."+oI.randomBytes(16).toString("hex");Pe.rename(e,r,n=>{if(n)return t(n);Pe.unlink(r,t)})},SV=e=>{if(!Bu)return Pe.unlinkSync(e);let t=e+".DELETE."+oI.randomBytes(16).toString("hex");Pe.renameSync(e,t),Pe.unlinkSync(t)},aI=(e,t,r)=>e===e>>>0?e:t===t>>>0?t:r,cI=e=>_V(EV(Lr(e))).toLowerCase(),bV=(e,t)=>{t=cI(t);for(let r of e.keys()){let n=cI(r);(n===t||n.indexOf(t+"/")===0)&&e.delete(r)}},xV=e=>{for(let t of e.keys())e.delete(t)},ap=class extends mV{constructor(t){t||(t={}),t.ondone=r=>{this[hy]=!0,this[my]()};super(t);if(this[Hu]=!1,this.reservations=vV(),this.transform=typeof t.transform=="function"?t.transform:null,this.writable=!0,this.readable=!1,this[sp]=0,this[hy]=!1,this.dirCache=t.dirCache||new Map,typeof t.uid=="number"||typeof t.gid=="number"){if(typeof t.uid!="number"||typeof t.gid!="number")throw new TypeError("cannot set owner without number uid and gid");if(t.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=t.uid,this.gid=t.gid,this.setOwner=!0}else this.uid=null,this.gid=null,this.setOwner=!1;t.preserveOwner===void 0&&typeof t.uid!="number"?this.preserveOwner=process.getuid&&process.getuid()===0:this.preserveOwner=!!t.preserveOwner,this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():null,this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():null,this.forceChown=t.forceChown===!0,this.win32=!!t.win32||Bu,this.newer=!!t.newer,this.keep=!!t.keep,this.noMtime=!!t.noMtime,this.preservePaths=!!t.preservePaths,this.unlink=!!t.unlink,this.cwd=Lr(li.resolve(t.cwd||process.cwd())),this.strip=+t.strip||0,this.processUmask=t.noChmod?0:process.umask(),this.umask=typeof t.umask=="number"?t.umask:this.processUmask,this.dmode=t.dmode||511&~this.umask,this.fmode=t.fmode||438&~this.umask,this.on("entry",r=>this[JA](r))}warn(t,r,n={}){return(t==="TAR_BAD_ARCHIVE"||t==="TAR_ABORT")&&(n.recoverable=!1),super.warn(t,r,n)}[my](){this[hy]&&this[sp]===0&&(this.emit("prefinish"),this.emit("finish"),this.emit("end"),this.emit("close"))}[nI](t){if(this.strip){let r=Lr(t.path).split("/");if(r.length<this.strip)return!1;if(t.path=r.slice(this.strip).join("/"),t.type==="Link"){let n=Lr(t.linkpath).split("/");if(n.length>=this.strip)t.linkpath=n.slice(this.strip).join("/");else return!1}}if(!this.preservePaths){let r=Lr(t.path),n=r.split("/");if(n.includes("..")||Bu&&/^[a-z]:\.\.$/i.test(n[0]))return this.warn("TAR_ENTRY_ERROR","path contains '..'",{entry:t,path:r}),!1;let[i,o]=yV(r);i&&(t.path=o,this.warn("TAR_ENTRY_INFO",`stripping ${i} from absolute path`,{entry:t,path:r}))}if(li.isAbsolute(t.path)?t.absolute=Lr(li.resolve(t.path)):t.absolute=Lr(li.resolve(this.cwd,t.path)),!this.preservePaths&&t.absolute.indexOf(this.cwd+"/")!==0&&t.absolute!==this.cwd)return this.warn("TAR_ENTRY_ERROR","path escaped extraction target",{entry:t,path:Lr(t.path),resolvedPath:t.absolute,cwd:this.cwd}),!1;if(t.absolute===this.cwd&&t.type!=="Directory"&&t.type!=="GNUDumpDir")return!1;if(this.win32){let{root:r}=li.win32.parse(t.absolute);t.absolute=r+QA.encode(t.absolute.substr(r.length));let{root:n}=li.win32.parse(t.path);t.path=n+QA.encode(t.path.substr(n.length))}return!0}[JA](t){if(!this[nI](t))return t.resume();switch(hV.equal(typeof t.absolute,"string"),t.type){case"Directory":case"GNUDumpDir":t.mode&&(t.mode=t.mode|448);case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[ly](t);case"CharacterDevice":case"BlockDevice":case"FIFO":default:return this[rI](t)}}[Vt](t,r){t.name==="CwdError"?this.emit("error",t):(this.warn("TAR_ENTRY_ERROR",t,{entry:r}),this[Ba](),r.resume())}[ro](t,r,n){XA(Lr(t),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:r,noChmod:this.noChmod},n)}[$u](t){return this.forceChown||this.preserveOwner&&(typeof t.uid=="number"&&t.uid!==this.processUid||typeof t.gid=="number"&&t.gid!==this.processGid)||typeof this.uid=="number"&&this.uid!==this.processUid||typeof this.gid=="number"&&this.gid!==this.processGid}[ju](t){return aI(this.uid,t.uid,this.processUid)}[Uu](t){return aI(this.gid,t.gid,this.processGid)}[dy](t,r){let n=t.mode&4095||this.fmode,i=new gV.WriteStream(t.absolute,{flags:sI(t.size),mode:n,autoClose:!1});i.on("error",c=>{i.fd&&Pe.close(i.fd,()=>{}),i.write=()=>!0,this[Vt](c,t),r()});let o=1,s=c=>{if(c){i.fd&&Pe.close(i.fd,()=>{}),this[Vt](c,t),r();return}--o==0&&Pe.close(i.fd,u=>{u?this[Vt](u,t):this[Ba](),r()})};i.on("finish",c=>{let u=t.absolute,l=i.fd;if(t.mtime&&!this.noMtime){o++;let f=t.atime||new Date,d=t.mtime;Pe.futimes(l,f,d,p=>p?Pe.utimes(u,f,d,h=>s(h&&p)):s())}if(this[$u](t)){o++;let f=this[ju](t),d=this[Uu](t);Pe.fchown(l,f,d,p=>p?Pe.chown(u,f,d,h=>s(h&&p)):s())}s()});let a=this.transform&&this.transform(t)||t;a!==t&&(a.on("error",c=>{this[Vt](c,t),r()}),t.pipe(a)),a.pipe(i)}[py](t,r){let n=t.mode&4095||this.dmode;this[ro](t.absolute,n,i=>{if(i){this[Vt](i,t),r();return}let o=1,s=a=>{--o==0&&(r(),this[Ba](),t.resume())};t.mtime&&!this.noMtime&&(o++,Pe.utimes(t.absolute,t.atime||new Date,t.mtime,s)),this[$u](t)&&(o++,Pe.chown(t.absolute,this[ju](t),this[Uu](t),s)),s()})}[rI](t){t.unsupported=!0,this.warn("TAR_ENTRY_UNSUPPORTED",`unsupported entry type: ${t.type}`,{entry:t}),t.resume()}[eI](t,r){this[op](t,t.linkpath,"symlink",r)}[tI](t,r){let n=Lr(li.resolve(this.cwd,t.linkpath));this[op](t,n,"link",r)}[iI](){this[sp]++}[Ba](){this[sp]--,this[my]()}[gy](t){this[Ba](),t.resume()}[fy](t,r){return t.type==="File"&&!this.unlink&&r.isFile()&&r.nlink<=1&&!Bu}[ly](t){this[iI]();let r=[t.path];t.linkpath&&r.push(t.linkpath),this.reservations.reserve(r,n=>this[ZA](t,n))}[ip](t){t.type==="SymbolicLink"?xV(this.dirCache):t.type!=="Directory"&&bV(this.dirCache,t.absolute)}[ZA](t,r){this[ip](t);let n=a=>{this[ip](t),r(a)},i=()=>{this[ro](this.cwd,this.dmode,a=>{if(a){this[Vt](a,t),n();return}this[Hu]=!0,o()})},o=()=>{if(t.absolute!==this.cwd){let a=Lr(li.dirname(t.absolute));if(a!==this.cwd)return this[ro](a,this.dmode,c=>{if(c){this[Vt](c,t),n();return}s()})}s()},s=()=>{Pe.lstat(t.absolute,(a,c)=>{if(c&&(this.keep||this.newer&&c.mtime>t.mtime)){this[gy](t),n();return}if(a||this[fy](t,c))return this[rn](null,t,n);if(c.isDirectory()){if(t.type==="Directory"){let u=!this.noChmod&&t.mode&&(c.mode&4095)!==t.mode,l=f=>this[rn](f,t,n);return u?Pe.chmod(t.absolute,t.mode,l):l()}if(t.absolute!==this.cwd)return Pe.rmdir(t.absolute,u=>this[rn](u,t,n))}if(t.absolute===this.cwd)return this[rn](null,t,n);wV(t.absolute,u=>this[rn](u,t,n))})};this[Hu]?o():i()}[rn](t,r,n){if(t){this[Vt](t,r),n();return}switch(r.type){case"File":case"OldFile":case"ContiguousFile":return this[dy](r,n);case"Link":return this[tI](r,n);case"SymbolicLink":return this[eI](r,n);case"Directory":case"GNUDumpDir":return this[py](r,n)}}[op](t,r,n,i){Pe[n](r,t.absolute,o=>{o?this[Vt](o,t):(this[Ba](),t.resume()),i()})}},cp=e=>{try{return[null,e()]}catch(t){return[t,null]}},uI=class extends ap{[rn](t,r){return super[rn](t,r,()=>{})}[ly](t){if(this[ip](t),!this[Hu]){let o=this[ro](this.cwd,this.dmode);if(o)return this[Vt](o,t);this[Hu]=!0}if(t.absolute!==this.cwd){let o=Lr(li.dirname(t.absolute));if(o!==this.cwd){let s=this[ro](o,this.dmode);if(s)return this[Vt](s,t)}}let[r,n]=cp(()=>Pe.lstatSync(t.absolute));if(n&&(this.keep||this.newer&&n.mtime>t.mtime))return this[gy](t);if(r||this[fy](t,n))return this[rn](null,t);if(n.isDirectory()){if(t.type==="Directory"){let s=!this.noChmod&&t.mode&&(n.mode&4095)!==t.mode,[a]=s?cp(()=>{Pe.chmodSync(t.absolute,t.mode)}):[];return this[rn](a,t)}let[o]=cp(()=>Pe.rmdirSync(t.absolute));this[rn](o,t)}let[i]=t.absolute===this.cwd?[]:cp(()=>SV(t.absolute));this[rn](i,t)}[dy](t,r){let n=t.mode&4095||this.fmode,i=a=>{let c;try{Pe.closeSync(o)}catch(u){c=u}(a||c)&&this[Vt](a||c,t),r()},o;try{o=Pe.openSync(t.absolute,sI(t.size),n)}catch(a){return i(a)}let s=this.transform&&this.transform(t)||t;s!==t&&(s.on("error",a=>this[Vt](a,t)),t.pipe(s)),s.on("data",a=>{try{Pe.writeSync(o,a,0,a.length)}catch(c){i(c)}}),s.on("end",a=>{let c=null;if(t.mtime&&!this.noMtime){let u=t.atime||new Date,l=t.mtime;try{Pe.futimesSync(o,u,l)}catch(f){try{Pe.utimesSync(t.absolute,u,l)}catch(d){c=f}}}if(this[$u](t)){let u=this[ju](t),l=this[Uu](t);try{Pe.fchownSync(o,u,l)}catch(f){try{Pe.chownSync(t.absolute,u,l)}catch(d){c=c||f}}}i(c)})}[py](t,r){let n=t.mode&4095||this.dmode,i=this[ro](t.absolute,n);if(i){this[Vt](i,t),r();return}if(t.mtime&&!this.noMtime)try{Pe.utimesSync(t.absolute,t.atime||new Date,t.mtime)}catch(o){}if(this[$u](t))try{Pe.chownSync(t.absolute,this[ju](t),this[Uu](t))}catch(o){}r(),t.resume()}[ro](t,r){try{return XA.sync(Lr(t),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:r})}catch(n){return n}}[op](t,r,n,i){try{Pe[n+"Sync"](r,t.absolute),i(),t.resume()}catch(o){return this[Vt](o,t)}}};ap.Sync=uI;lI.exports=ap});var mI=g((Cce,hI)=>{"use strict";var TV=Sa(),up=vy(),fI=require("fs"),dI=qa(),pI=require("path"),yy=Ra();hI.exports=(e,t,r)=>{typeof e=="function"?(r=e,t=null,e={}):Array.isArray(e)&&(t=e,e={}),typeof t=="function"&&(r=t,t=null),t?t=Array.from(t):t=[];let n=TV(e);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return t.length&&AV(n,t),n.file&&n.sync?IV(n):n.file?RV(n,r):n.sync?PV(n):OV(n)};var AV=(e,t)=>{let r=new Map(t.map(o=>[yy(o),!0])),n=e.filter,i=(o,s)=>{let a=s||pI.parse(o).root||".",c=o===a?!1:r.has(o)?r.get(o):i(pI.dirname(o),a);return r.set(o,c),c};e.filter=n?(o,s)=>n(o,s)&&i(yy(o)):o=>i(yy(o))},IV=e=>{let t=new up.Sync(e),r=e.file,n=fI.statSync(r),i=e.maxReadSize||16*1024*1024;new dI.ReadStreamSync(r,{readSize:i,size:n.size}).pipe(t)},RV=(e,t)=>{let r=new up(e),n=e.maxReadSize||16*1024*1024,i=e.file,o=new Promise((s,a)=>{r.on("error",a),r.on("close",s),fI.stat(i,(c,u)=>{if(c)a(c);else{let l=new dI.ReadStream(i,{readSize:n,size:u.size});l.on("error",a),l.pipe(r)}})});return t?o.then(t,t):o},PV=e=>new up.Sync(e),OV=e=>new up(e)});var Gu=g(Ot=>{"use strict";Ot.c=Ot.create=XT();Ot.r=Ot.replace=Jv();Ot.t=Ot.list=Jd();Ot.u=Ot.update=oA();Ot.x=Ot.extract=mI();Ot.Pack=$d();Ot.Unpack=vy();Ot.Parse=Qd();Ot.ReadEntry=wd();Ot.WriteEntry=Av();Ot.Header=Ia();Ot.Pax=xd();Ot.types=fv()});var Cy=g((Pce,SI)=>{SI.exports=function(t,r,n){t(r),n&&n(r===!0?null:r)}});var fp=g((Oce,xI)=>{"use strict";var bI=Cy();xI.exports=function(t,r){if(!t)return function(i,o){return i?bI(o,i,r):o(!0)};Array.isArray(t)||(t=Object.keys(t).map(function(i){return t[i]}));var n=0;return function(i,o){if(i)return bI(o,i,r);n>=t.length?o(!0):o(null,t[n++])}}});var AI=g((Dce,TI)=>{"use strict";var MV=fp();TI.exports=function(e){return MV(Object.keys(e))}});var wy=g((Nce,II)=>{"use strict";var qV=Cy();II.exports=function(t,r){return function(n,i){if(n)return qV(i,n,r);if(t!=null){var o=t;t=null,i(null,o)}else i(!0)}}});var PI=g((Lce,RI)=>{"use strict";RI.exports=function(t){var r=0;return t=t||1/0,function(n,i){if(n)return i&&i(n);if(r>t)return i(!0);i(null,r++)}}});var DI=g((kce,OI)=>{"use strict";OI.exports=function(t){return t=t||Math.random,function(r,n){return r?n&&n(r):n(null,t())}}});var LI=g((Fce,NI)=>{"use strict";NI.exports=function(){return function(t,r){r(!0)}}});var FI=g((Mce,kI)=>{"use strict";kI.exports=function(t){return function(r,n){n(t)}}});var qI=g((qce,MI)=>{"use strict";MI.exports={keys:AI(),once:wy(),values:fp(),count:PI(),infinite:DI(),empty:LI(),error:FI()}});var Wa=g(($ce,$I)=>{"use strict";$I.exports=function(t,r){var n,i;function o(s){if(n=s,i)return o.abort();(function a(){for(var c=!0,u=!1;c;)if(u=!1,n(null,function(l,f){if(u=!0,l=l||i){if(c=!1,r)r(l===!0?null:l);else if(l&&l!==!0)throw l}else t&&t(f)===!1||i?(c=!1,n(i||!0,r||function(){})):c||a()}),!u){c=!1;return}})()}return o.abort=function(s,a){if(typeof s=="function"&&(a=s,s=!0),i=s||!0,n)return n(i,a||function(){})},o}});var UI=g((jce,jI)=>{"use strict";var $V=Wa();jI.exports=function(t){return $V(null,t)}});var BI=g((Uce,HI)=>{"use strict";var jV=Wa();HI.exports=function(t){return jV(function(r){console.log(r)},t)}});var Va=g((Hce,GI)=>{GI.exports=function(t){return t&&(typeof t=="string"?function(r){return r[t]}:typeof t=="object"&&typeof t.exec=="function"?function(r){var n=t.exec(r);return n&&n[0]}:t)}});var zI=g((Bce,VI)=>{"use strict";function WI(e){return e}var UV=Va(),HV=Wa();VI.exports=function(t,r){var n=!1;return r?t=UV(t)||WI:(r=t,t=WI),HV(function(i){if(t(i))return n=!0,r(null,i),!1},function(i){n||r(i===!0?null:i,null)})}});var dp=g((Gce,KI)=>{"use strict";var BV=Wa();KI.exports=function(t,r,n){n||(n=r,r=null);var i=BV(function(o){r=t(r,o)},function(o){n(o,r)});return arguments.length===2?function(o){o(null,function(s,a){if(s)return n(s===!0?null:s);r=a,i(o)})}:i}});var XI=g((Wce,YI)=>{"use strict";var GV=dp();YI.exports=function(t){return GV(function(r,n){return r.push(n),r},[],t)}});var JI=g((Vce,QI)=>{"use strict";var WV=dp();QI.exports=function(t){return WV(function(r,n){return r+n},"",t)}});var eR=g((zce,ZI)=>{"use strict";ZI.exports={drain:Wa(),onEnd:UI(),log:BI(),find:zI(),reduce:dp(),collect:XI(),concat:JI()}});var rR=g((Kce,tR)=>{"use strict";function VV(e){return e}var zV=Va();tR.exports=function(t){return t?(t=zV(t),function(r){return function(n,i){r(n,function(o,s){try{s=o?null:t(s)}catch(a){return r(a,function(){return i(a)})}i(o,s)})}}):VV}});var iR=g((Yce,nR)=>{"use strict";function KV(e){return e}var YV=Va();nR.exports=function(t){if(!t)return KV;t=YV(t);var r=!1,n,i;return function(o){return function s(a,c){if(i)return c(i);a?(i=a,r?o(a,function(u){r?n=c:c(a)}):o(a,function(u){c(a)})):o(null,function(u,l){u?c(u):i?c(i):(r=!0,t(l,function(f,d){r=!1,i?(c(i),n&&n(i)):f?s(f,c):c(null,d)}))})}}}});var Sy=g((Xce,oR)=>{var XV=Va();function QV(e){return e}oR.exports=function(t){return typeof t=="object"&&typeof t.test=="function"?function(r){return t.test(r)}:XV(t)||QV}});var pp=g((Qce,sR)=>{"use strict";var JV=Sy();sR.exports=function(t){return t=JV(t),function(r){return function n(i,o){for(var s,a=!0;a;)a=!1,s=!0,r(i,function(c,u){if(!c&&!t(u))return s?a=!0:n(c,o);o(c,u)}),s=!1}}}});var cR=g((Jce,aR)=>{"use strict";var ZV=Sy(),ez=pp();aR.exports=function(t){return t=ZV(t),ez(function(r){return!t(r)})}});var lR=g((Zce,uR)=>{"use strict";uR.exports=function(t,r){var n=!1;function i(o){n||!r||(n=!0,r(o===!0?null:o))}return function(o){return function(s,a){return s&&i(s),o(s,function(c,u){c?i(c):t&&t(u),a(c,u)})}}}});var dR=g((eue,fR)=>{"use strict";fR.exports=function(t,r){r=r||{};var n=r.last||!1,i=!1;if(typeof t=="number"){n=!0;var o=t;t=function(){return--o}}return function(s){function a(c){s(!0,function(u){n=!1,c(u||!0)})}return function(c,u){i&&!c?n?a(u):u(i):(i=c)?s(i,u):s(null,function(l,f){(i=i||l)?u(i):t(f)?u(null,f):(i=!0,n?u(null,f):a(u))})}}}});var by=g((tue,pR)=>{"use strict";function tz(e){return e}var rz=Va(),nz=pp();pR.exports=function(t,r){t=rz(t)||tz;var n={};return nz(function(i){var o=t(i);return n[o]?!!r:(n[o]=!0,!r)})}});var mR=g((rue,hR)=>{"use strict";var iz=by();hR.exports=function(t){return iz(t,!0)}});var vR=g((nue,gR)=>{"use strict";var oz=fp(),sz=wy();gR.exports=function(){return function(t){var r;return function(n,i){n?r?r(n,function(a){t(a||n,i)}):t(n,i):r?o():s();function o(){r(null,function(a,c){a===!0?s():a?t(!0,function(u){i(a)}):i(null,c)})}function s(){r=null,t(null,function(a,c){if(a)return i(a);Array.isArray(c)||c&&typeof c=="object"?c=oz(c):typeof c!="function"&&(c=sz(c)),r=c,o()})}}}}});var ER=g((iue,yR)=>{"use strict";yR.exports={map:rR(),asyncMap:iR(),filter:pp(),filterNot:cR(),through:lR(),take:dR(),unique:by(),nonUnique:mR(),flatten:vR()}});var xy=g((oue,_R)=>{"use strict";_R.exports=function e(t){var r=arguments.length;if(typeof t=="function"&&t.length===1){for(var n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return function(a){if(n==null)throw new TypeError("partial sink should only be called once!");var c=n;switch(n=null,r){case 1:return e(a,c[0]);case 2:return e(a,c[0],c[1]);case 3:return e(a,c[0],c[1],c[2]);case 4:return e(a,c[0],c[1],c[2],c[3]);default:return c.unshift(a),e.apply(null,c)}}}var o=t;o&&typeof o.source=="function"&&(o=o.source);for(var i=1;i<r;i++){var s=arguments[i];typeof s=="function"?o=s(o):s&&typeof s=="object"&&(s.sink(o),o=s.source)}return o}});var hp=g((ms,bR)=>{"use strict";var CR=qI(),wR=eR(),SR=ER();ms=bR.exports=xy();ms.pull=ms;for(Tn in CR)ms[Tn]=CR[Tn];var Tn;for(Tn in SR)ms[Tn]=SR[Tn];var Tn;for(Tn in wR)ms[Tn]=wR[Tn];var Tn});var Ly=g((kue,UR)=>{var Lue=UR.exports=function(e){(function t(){var r=!0,n=!1,i=!1;do i=!0,r=!1,e.call(this,function(){i?r=!0:t()}),i=!1;while(r)})()}});var BR=g((Fue,HR)=>{var mz=Ly();HR.exports=function(e,t){return function(r){var n=[],i,o;function s(u){n.push(u)}e=e||function(u){this.queue(u)},t=t||function(){this.queue(null)};var a={emit:function(u,l){u=="data"&&s(l),u=="end"&&(i=!0,s(null)),u=="error"&&(o=l)},queue:s},c;return function(u,l){if(i=i||u,u)return r(u,function(){if(c){var f=c;c=null,f(u)}l(u)});c=l,mz(function f(d){if(!!c)if(l=c,o)c=null,l(o);else if(n.length){var p=n.shift();c=null,l(p===null,p)}else r(i,function(h,m){if(h&&h!==!0)return o=h,d();if(i=i||h)t.call(a);else if(m!==null&&(e.call(a,m),o||i))return r(o||i,function(){c=null,l(o||i)});d(f)})})}}}});var WR=g((Mue,GR)=>{GR.exports=function(){var e=[],t=0;function r(){return e.reduce(function(n,i){return n+i.length},0)}return{length:t,data:this,add:function(n){if(!Buffer.isBuffer(n))throw new Error("data must be a buffer, was: "+JSON.stringify(n));return this.length=t=t+n.length,e.push(n),this},has:function(n){return n==null?t>0:t>=n},get:function(n){var i;if(n==null||n===t){t=0;var o=e;return e=[],o.length==1?o[0]:Buffer.concat(o)}else if(e.length>1&&n<=(i=e[0].length)){var s=e[0].slice(0,n);return n===i?e.shift():e[0]=e[0].slice(n,i),t-=n,s}else if(n<t){for(var a=[],c=0;c+e[0].length<n;){var u=e.shift();c+=u.length,a.push(u)}return c<n&&(a.push(e[0].slice(0,n-c)),e[0]=e[0].slice(n-c,e[0].length),this.length=t=t-n),Buffer.concat(a)}else throw new Error("could not get "+n+" bytes")}}}});var YR=g((que,KR)=>{"use strict";var gz=WR();function vz(e){return Number.isFinite(e)}function VR(e){return typeof e=="function"}function zR(e,t){return t?function(r,n){var i=setTimeout(function(){e(new Error("pull-reader: read exceeded timeout"),n)},t);e(r,function(o,s){clearTimeout(i),n(o,s)})}:e}KR.exports=function(e){var t=[],r,n,i=!1,o=gz(),s,a,c;function u(){for(;t.length;)if(t[0].length==null&&o.has(1))t.shift().cb(null,o.get());else if(o.has(t[0].length)){var d=t.shift();d.cb(null,o.get(d.length))}else if(s==!0&&t[0].length&&o.length<t[0].length){var p="stream ended with:"+o.length+" but wanted:"+t[0].length;t.shift().cb(new Error(p))}else if(s)t.shift().cb(s);else return!!t.length;return t.length||!o.has(1)||c}function l(){var d=u();d&&!i&&r&&!i&&!a&&(i=!0,n(null,function(p,h){if(i=!1,p)return s=p,u();o.add(h),l()}))}function f(d){if(c){for(;t.length;)t.shift().cb(c);return cb&&cb(c)}n=zR(d,e),r=d,l()}return f.abort=function(d,p){c=d||!0,r?(i=!0,r(c,function(){for(;t.length;)t.shift().cb(c);p&&p(c)})):p()},f.read=function(d,p,h){if(VR(p)&&(h=p,p=e),VR(h))t.push({length:vz(d)?d:null,cb:h}),l();else return a=!0,function(m,v){if(i||o.has(1)){if(m)return r(m,v);t.push({length:null,cb:v}),l()}else zR(r,p)(m,function(_,E){v(_,E)})}},f}});var aP=g((Es,sP)=>{var yz=BR(),Ez=YR(),XR=0,QR=1,JR=2,ZR="GOODBYE",_z=Buffer.isBuffer;function eP(e){return typeof e=="string"}function tP(e){var t=Buffer.alloc(9),r=0,n=e.value!==void 0?e.value:e.end;return eP(e)&&e===ZR?(t.fill(0),[t,null]):(eP(n)?(r=QR,n=Buffer.from(n,"utf-8")):_z(n)?r=XR:(r=JR,n=Buffer.from(JSON.stringify(n),"utf-8")),r=e.stream<<3|e.end<<2|r,t[0]=r,t.writeUInt32BE(n.length,1),t.writeInt32BE(e.req||0,5),[t,n])}function rP(e){if(e.length!=9)throw new Error("expected header to be 9 bytes long");var t=e[0],r=e.readUInt32BE(1),n=e.readInt32BE(5);return{req:n,stream:!!(t&8),end:!!(t&4),value:null,length:r,type:t&3}}function nP(e,t){if(e.length!==t.length)throw new Error("incorrect length, expected:"+t.length+" found:"+e.length);if(XR===t.type)t.value=e;else if(QR===t.type)t.value=e.toString();else if(JR===t.type)t.value=JSON.parse(e.toString());else throw new Error("unknown message type");return t}function iP(){return yz(function(e){var t=tP(e);this.queue(t[0]),t[1]!==null&&this.queue(t[1])})}function oP(){var e=Ez(),t=!1;return function(r){return e(r),function(n,i){if(t)return i(!0);if(n)return e.abort(n,i);e.read(9,function(o,s){if(o)return i(o);var a=rP(s);if(a.length===0)return t=!0,i(null,ZR);e.read(a.length,function(c,u){if(c)return i(c);try{nP(u,a)}catch(l){return i(l)}i(null,a)})})}}}Es=sP.exports=function(e){return{source:iP()(e.source),sink:function(t){return e.sink(oP()(t))}}};Es.encodePair=tP;Es.decodeHead=rP;Es.decodeBody=nP;Es.encode=iP;Es.decode=oP});var lP=g(($ue,uP)=>{function el(e){return e&&(e===!0?!0:{message:e.message,name:e.name,stack:e.stack})}uP.exports=function(e){return new nn(e)};function nn(e){this.ended=!1,this.opts=e,this._req_counter=1,this._requests={},this._instreams={},this._outstreams={},this._closecbs=[],this._closing=!1,this._closed=!1,e.close&&this._closecbs.push(e.close)}nn.prototype.message=function(e){this.read({req:0,stream:!1,end:!1,value:e})};nn.prototype.request=function(e,t){if(this._closing)return t(new Error("parent stream is closing"));var r=this._req_counter++,n=this;this._requests[r]=function(i,o){delete n._requests[r],t(i,o),n._maybedone(i)},this.read({req:r,stream:!1,end:!1,value:e})};nn.prototype.stream=function(){if(this._closing)throw new Error("parent stream is closing");var e=this._req_counter++,t=this;return this._outstreams[e]=new tl(e,this,function(){delete t._outstreams[e]}),this._outstreams[e]};nn.prototype.close=function(e){if(!e)throw new Error("packet-stream.close *must* have callback");if(this._closed)return e();this._closecbs.push(e),this._closing=!0,this._maybedone()};nn.prototype.destroy=function(e){e=e||el(e),this.ended=e,this._closing=!0;var t=e===!0?new Error("unexpected end of parent stream"):e,r=0;for(var n in this._requests)r++,this._requests[n](t);for(var n in this._instreams)r++,this._instreams[n].writeEnd=!0,this._instreams[n].destroy(t);for(var n in this._outstreams)r++,this._outstreams[n].writeEnd=!0,this._outstreams[n].destroy(t);r===0&&e===!0&&(t=null),this._maybedone(t)};nn.prototype._maybedone=function(e){this._closed||!this._closing||Object.keys(this._requests).length!==0||Object.keys(this._instreams).length!==0||Object.keys(this._outstreams).length!==0||(this._closed=!0,this._closecbs.forEach(function(t){t(e)}),this.read(null,e||!0),this.opts=null,this._closecbs.length=0,this.read=cP)};function cP(e){console.error("packet-stream asked to read after closed",e)}nn.prototype.read=function(e){console.error("please overwrite read method to do IO",e)};nn.prototype.write=function(e,t){this.ended||(t?this.destroy(t):e.req&&!e.stream?this._onrequest(e):e.req&&e.stream?this._onstream(e):this._onmessage(e))};nn.prototype._onmessage=function(e){this.opts&&typeof this.opts.message=="function"&&this.opts.message(e.value)};nn.prototype._onrequest=function(e){var t=e.req*-1;if(e.req<0)typeof this._requests[t]=="function"&&this._requests[t](e.end?e.value:null,e.end?null:e.value);else if(this.opts&&typeof this.opts.request=="function"){var r=!1,n=this;this.opts.request(e.value,function(o,s){if(r)throw new Error("cb called twice from local api");r=!0,o?n.read({value:el(o),end:!0,req:t}):n.read({value:s,end:!1,req:t}),n._maybedone()})}else{if(this.ended){var i=this.ended===!0?new Error("unexpected end of parent stream"):this.ended;this.read({value:el(i),end:!0,stream:!1,req:t})}else this.read({value:{message:"Unable to handle requests",name:"NO_REQUEST_HANDLER",stack:null},end:!0,stream:!1,req:t});this._maybedone()}};nn.prototype._onstream=function(e){if(e.req<0){var t=e.req*-1,r=this._outstreams[t];if(!r)return console.error("no stream for incoming msg",e);e.end?(r.writeEnd&&delete this._outstreams[t],r.readEnd=!0,r.read(null,e.value),this._maybedone()):r.read(e.value)}else{var t=e.req,n=this._instreams[t];if(!n){var i=this;n=this._instreams[t]=new tl(t*-1,this,function(){delete i._instreams[t]}),this.opts&&typeof this.opts.stream=="function"&&this.opts.stream(n)}e.end?(n.writeEnd&&delete this._instreams[t],n.readEnd=!0,n.read&&n.read(null,e.value),this._maybedone()):n.read?n.read(e.value):console.error("no .read for stream:",n.id,"dropped:",e)}};function tl(e,t,r){this.id=e,this.read=null,this.writeEnd=null,this.readEnd=null,this._ps=t,this._remove=r,this._seq_counter=1}tl.prototype.write=function(e,t){if(t){this.writeEnd=t;var r=this._ps;r&&(r.read({req:this.id,stream:!0,end:!0,value:el(t)}),this.readEnd&&this.destroy(t),r._maybedone(t))}else this._ps&&this._ps.read({req:this.id,stream:!0,end:!1,value:e})};tl.prototype.end=function(e){this.write(null,el(e||!0))};tl.prototype.destroy=function(e){if(this.writeEnd){if(!this.readEnd){this.readEnd=!0;try{this.read&&this.read(null,e)}catch(t){console.error("Exception thrown by PacketStream substream end handler",t),console.error(t.stack)}}}else{if(this.writeEnd=!0,!this.readEnd){this.readEnd=!0;try{this.read(null,e)}catch(t){console.error("Exception thrown by PacketStream substream end handler",t),console.error(t.stack)}}this.write(null,e)}this._ps&&(this._remove(),this._remove=null,this.read=cP,this._ps=null)}});var dP=g((jue,rl)=>{"use strict";var Cz=hp();function wz(e){let t=!1;return(r,n)=>{t||(t=!0,e(r,n))}}function ky(e,t){let r=[],n=!1,i,o,s=wz((a,c)=>{t&&t(a,c),e=null,t=null,i=null,o&&o(a||!0,()=>{})});return e.read=function(a,c){if(n=n||c,i){let u=i;i=null,u(n,a)}else n||r.push(a);n&&s(n!==!0?n:null)},{source(a,c){a?(e&&e.write(null,a),c(a),s(a!==!0?a:null)):r.length?c(null,r.shift()):n?c(n):i=c},sink(a){if(n)return o=null,a(n,()=>{});o=a,Cz.drain(c=>{if(n)return!1;e.write(c)},c=>{e&&!e.writeEnd&&e.write(null,c||!0),s&&s(c)})(a)}}}function fP(e,t){return ky(e,r=>{e.writeEnd||e.write(null,r||!0),t&&t(r)})}function Sz(e){return fP(e).source}function bz(e,t){return fP(e,t).sink}rl.exports=ky;rl.exports.source=Sz;rl.exports.sink=bz;rl.exports.duplex=ky});var hP=g((Uue,pP)=>{pP.exports=function(t){var r,n,i;function o(s){return function(a,c){s(a,function(u,l){if(u&&!i)return i=!0,c(null,t);u&&r?c(u):u?n=c:c(null,l)})}}return o.end=function(){return r=!0,n&&n(r),o},o}});var Fy=g((Hue,mP)=>{mP.exports=function(t,r,n){t(r),n&&n(r===!0?null:r)}});var Sp=g((Bue,vP)=>{"use strict";var gP=Fy();vP.exports=function(t,r){if(!t)return function(i,o){return i?gP(o,i,r):o(!0)};Array.isArray(t)||(t=Object.keys(t).map(function(i){return t[i]}));var n=0;return function(i,o){if(i)return gP(o,i,r);n>=t.length?o(!0):o(null,t[n++])}}});var EP=g((Gue,yP)=>{"use strict";var xz=Sp();yP.exports=function(e){return xz(Object.keys(e))}});var My=g((Wue,_P)=>{"use strict";var Tz=Fy();_P.exports=function(t,r){return function(n,i){if(n)return Tz(i,n,r);if(t!=null){var o=t;t=null,i(null,o)}else i(!0)}}});var wP=g((Vue,CP)=>{"use strict";CP.exports=function(t){var r=0;return t=t||1/0,function(n,i){if(n)return i&&i(n);if(r>t)return i(!0);i(null,r++)}}});var bP=g((zue,SP)=>{"use strict";SP.exports=function(t){return t=t||Math.random,function(r,n){return r?n&&n(r):n(null,t())}}});var TP=g((Kue,xP)=>{"use strict";xP.exports=function(){return function(t,r){r(!0)}}});var IP=g((Yue,AP)=>{"use strict";AP.exports=function(t){return function(r,n){n(t)}}});var PP=g((Xue,RP)=>{"use strict";RP.exports={keys:EP(),once:My(),values:Sp(),count:wP(),infinite:bP(),empty:TP(),error:IP()}});var za=g((Que,OP)=>{"use strict";OP.exports=function(t,r){var n,i;function o(s){if(n=s,i)return o.abort();(function a(){for(var c=!0,u=!1;c;)if(u=!1,n(null,function(l,f){if(u=!0,l=l||i){if(c=!1,r)r(l===!0?null:l);else if(l&&l!==!0)throw l}else t&&t(f)===!1||i?(c=!1,n(i||!0,r||function(){})):c||a()}),!u){c=!1;return}})()}return o.abort=function(s,a){if(typeof s=="function"&&(a=s,s=!0),i=s||!0,n)return n(i,a||function(){})},o}});var NP=g((Jue,DP)=>{"use strict";var Az=za();DP.exports=function(t){return Az(null,t)}});var kP=g((Zue,LP)=>{"use strict";var Iz=za();LP.exports=function(t){return Iz(function(r){console.log(r)},t)}});var Ka=g((ele,FP)=>{FP.exports=function(t){return t&&(typeof t=="string"?function(r){return r[t]}:typeof t=="object"&&typeof t.exec=="function"?function(r){var n=t.exec(r);return n&&n[0]}:t)}});var $P=g((tle,qP)=>{"use strict";function MP(e){return e}var Rz=Ka(),Pz=za();qP.exports=function(t,r){var n=!1;return r?t=Rz(t)||MP:(r=t,t=MP),Pz(function(i){if(t(i))return n=!0,r(null,i),!1},function(i){n||r(i===!0?null:i,null)})}});var bp=g((rle,jP)=>{"use strict";var Oz=za();jP.exports=function(t,r,n){n||(n=r,r=null);var i=Oz(function(o){r=t(r,o)},function(o){n(o,r)});return arguments.length===2?function(o){o(null,function(s,a){if(s)return n(s===!0?null:s);r=a,i(o)})}:i}});var HP=g((nle,UP)=>{"use strict";var Dz=bp();UP.exports=function(t){return Dz(function(r,n){return r.push(n),r},[],t)}});var GP=g((ile,BP)=>{"use strict";var Nz=bp();BP.exports=function(t){return Nz(function(r,n){return r+n},"",t)}});var VP=g((ole,WP)=>{"use strict";WP.exports={drain:za(),onEnd:NP(),log:kP(),find:$P(),reduce:bp(),collect:HP(),concat:GP()}});var KP=g((sle,zP)=>{"use strict";function Lz(e){return e}var kz=Ka();zP.exports=function(t){return t?(t=kz(t),function(r){return function(n,i){r(n,function(o,s){try{s=o?null:t(s)}catch(a){return r(a,function(){return i(a)})}i(o,s)})}}):Lz}});var XP=g((ale,YP)=>{"use strict";function Fz(e){return e}var Mz=Ka();YP.exports=function(t){if(!t)return Fz;t=Mz(t);var r=!1,n,i;return function(o){return function s(a,c){if(i)return c(i);a?(i=a,r?o(a,function(){r?n=c:c(a)}):o(a,c)):o(null,function(u,l){u?c(u):i?c(i):(r=!0,t(l,function(f,d){r=!1,i?(c(i),n(i)):f?s(f,c):c(null,d)}))})}}}});var qy=g((cle,QP)=>{var qz=Ka();function $z(e){return e}QP.exports=function(t){return typeof t=="object"&&typeof t.test=="function"?function(r){return t.test(r)}:qz(t)||$z}});var xp=g((ule,JP)=>{"use strict";var jz=qy();JP.exports=function(t){return t=jz(t),function(r){return function n(i,o){for(var s,a=!0;a;)a=!1,s=!0,r(i,function(c,u){if(!c&&!t(u))return s?a=!0:n(c,o);o(c,u)}),s=!1}}}});var eO=g((lle,ZP)=>{"use strict";var Uz=qy(),Hz=xp();ZP.exports=function(t){return t=Uz(t),Hz(function(r){return!t(r)})}});var rO=g((fle,tO)=>{"use strict";tO.exports=function(t,r){var n=!1;function i(o){n||!r||(n=!0,r(o===!0?null:o))}return function(o){return function(s,a){return s&&i(s),o(s,function(c,u){c?i(c):t&&t(u),a(c,u)})}}}});var iO=g((dle,nO)=>{"use strict";nO.exports=function(t,r){r=r||{};var n=r.last||!1,i=!1;if(typeof t=="number"){n=!0;var o=t;t=function(){return--o}}return function(s){function a(c){s(!0,function(u){n=!1,c(u||!0)})}return function(c,u){i?n?a(u):u(i):(i=c)?s(i,u):s(null,function(l,f){(i=i||l)?u(i):t(f)?u(null,f):(i=!0,n?u(null,f):a(u))})}}}});var $y=g((ple,oO)=>{"use strict";function Bz(e){return e}var Gz=Ka(),Wz=xp();oO.exports=function(t,r){t=Gz(t)||Bz;var n={};return Wz(function(i){var o=t(i);return n[o]?!!r:(n[o]=!0,!r)})}});var aO=g((hle,sO)=>{"use strict";var Vz=$y();sO.exports=function(t){return Vz(t,!0)}});var uO=g((mle,cO)=>{"use strict";var zz=Sp(),Kz=My();cO.exports=function(){return function(t){var r;return function(n,i){n?r?r(n,function(a){t(a||n,i)}):t(n,i):r?o():s();function o(){r(null,function(a,c){a===!0?s():a?t(!0,function(u){i(a)}):i(null,c)})}function s(){r=null,t(null,function(a,c){if(a)return i(a);Array.isArray(c)||c&&typeof c=="object"?c=zz(c):typeof c!="function"&&(c=Kz(c)),r=c,o()})}}}}});var fO=g((gle,lO)=>{"use strict";lO.exports={map:KP(),asyncMap:XP(),filter:xp(),filterNot:eO(),through:rO(),take:iO(),unique:$y(),nonUnique:aO(),flatten:uO()}});var pO=g((vle,dO)=>{"use strict";dO.exports=function e(t){var r=arguments.length;if(typeof t=="function"&&t.length===1){for(var n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return function(a){if(n==null)throw new TypeError("partial sink should only be called once!");var c=n;switch(n=null,r){case 1:return e(a,c[0]);case 2:return e(a,c[0],c[1]);case 3:return e(a,c[0],c[1],c[2]);case 4:return e(a,c[0],c[1],c[2],c[3]);default:return c.unshift(a),e.apply(null,c)}}}var o=t;o&&typeof o.source=="function"&&(o=o.source);for(var i=1;i<r;i++){var s=arguments[i];typeof s=="function"?o=s(o):s&&typeof s=="object"&&(s.sink(o),o=s.source)}return o}});var yO=g((nl,vO)=>{"use strict";var hO=PP(),mO=VP(),gO=fO();nl=vO.exports=pO();for(An in hO)nl[An]=hO[An];var An;for(An in gO)nl[An]=gO[An];var An;for(An in mO)nl[An]=mO[An];var An});var _O=g((yle,EO)=>{var Yz=hP(),jy=yO();EO.exports=function(e,t){t=t||"GOODBYE";var r=Yz(t);return{source:jy(e.source,r),sink:jy(jy.filter(function(n){if(n!==t)return!0;r.end()}),e.sink)}}});var il=g(In=>{"use strict";var Tp=hp();function Xz(e){return e?Object.keys(e).length===0:!0}In.set=function(t,r,n){let i,o;for(let s=0;s<r.length;s++){let a=r[s];t[a]=t[a]||{},i=t,o=a,t=t[a]}i[o]=n};In.get=function(t,r){if(typeof r=="string")return t[r];let n;for(let i=0;i<r.length;i++){let o=r[i];if(n=t=t[o],t==null)return t}return n};In.prefix=function(t,r){let n;for(let i=0;i<r.length;i++){let o=r[i];if(n=t=t[o],typeof t!="object")return t}return typeof n!="object"?!!n:!1};function Qz(e,t){for(let r in t){let n=t[r];e[n]||(e[n]={}),e=e[n]}return e}function Jz(e,t){(function r(n,i){let o=t[i];if(n)t.length-1===i?delete n[o]:i<t.length&&r(n[o],i+1);else return;Xz(n[o])&&delete n[o]})(e,0)}function Zz(e,t){for(let r in t)e[r]=t[r];return e}In.mount=function(t,r,n){if(!Array.isArray(r))throw new Error("path must be array of strings");return Zz(Qz(t,r),n)};In.unmount=function(t,r){return Jz(t,r)};var Ap=e=>e==="source",Ip=e=>e==="sink",CO=e=>e==="duplex",e4=e=>e==="sync",t4=e=>e==="async",wO=e=>e4(e)||t4(e),r4=e=>Ap(e)||Ip(e)||CO(e);In.isRequest=wO;In.isStream=r4;function Uy(e){return function(t){t(e||!0,()=>{})}}function SO(e){return{source:Tp.error(e),sink:Uy(e)}}In.errorAsStream=function(t,r){return Ap(t)?Tp.error(r):Ip(t)?Uy(r):SO(r)};In.errorAsStreamOrCb=function(t,r,n){return wO(t)?n(r):Ap(t)?Tp.error(r):Ip(t)?Uy(r):n(r),SO(r)};In.pipeToStream=function(t,r,n){Ap(t)?r(n):Ip(t)?n(r):CO(t)&&Tp(r,n,r)}});var Hy=g((Cle,xO)=>{function bO(e){if(e.stack&&e.name&&e.message)return e.stack.substring(e.name.length+3+e.message.length).split(`
`);if(e.stack)return e.stack.split(`
`)}function n4(e,t){return e.filter(function(r){return!~t.indexOf(r)})}var _le=xO.exports=function(e,t){if(!(e.stack&&e.name&&e.message))return console.error(new Error("stackless error")),e;var r=new Error(t),n=n4(bO(r).slice(1),bO(e)).join(`
`);return r.__proto__=e,r.stack=r.name+": "+r.message+`
`+n+`
  `+e.stack,r}});var IO=g((wle,AO)=>{"use strict";var i4=lP(),By=dP(),o4=_O(),Ya=il(),TO=Hy();AO.exports=function(t,r,n){let i=i4({message(){},request(s,a){if(!Array.isArray(s.args))return a(new Error(`invalid request, args should be array, was: ${JSON.stringify(s)}`));let c=s.name,u=s.args,l=!1,f=!1;u.push((d,p)=>{f=!0,l=!0,a(d,p)});try{t("async",c,u)}catch(d){if(l||f)throw TO(d,"no callback provided to muxrpc async funtion");a(d)}},stream(s){s.read=function(c,u){if(u)return s.write(null,u);let{name:l,type:f,args:d}=c,p,h;if(s.read=null,!Ya.isStream(f))return s.write(null,new Error(`unsupported stream type: ${f}`));try{h=t(f,l,d)}catch(_){p=_}let v=By[f==="source"?"sink":f==="sink"?"source":"duplex"](s);return Ya.pipeToStream(f,v,p?Ya.errorAsStream(f,p):h)}},close(s){if(i=null,o.ended=!0,!o.closed&&(o.closed=!0,n)){let a=n;n=null,a(s)}}}),o=o4(By(i,()=>{}));return o=r?r(o):o,o.remoteCall=function(s,a,c,u){if(a==="emit")return i.message(c);if(!(Ya.isRequest(s)||Ya.isStream(s)))throw new Error(`unsupported type: ${JSON.stringify(s)}`);if(Ya.isRequest(s))return i.request({name:a,args:c},u);let l=i.stream(),f=By[s](l,u);return l.write({name:a,args:c,type:s}),f},o.isOpen=function(){return!i.ended},o.close=function(s,a){if(typeof s=="function"&&(a=s,s=!1),!i){a&&a();return}if(s){i.destroy(s),a&&a();return}return i.close(c=>{if(a)a(c);else if(c)throw TO(c,"no callback provided for muxrpc close")}),this},o.closed=!1,o}});var PO=g((Sle,RO)=>{"use strict";var s4=Hy(),a4=il();function Gy(e,t,r,n){for(let i in t){let o=t[i],s=r?r.concat(i):[i];if(o&&typeof o=="object"){let a=o;e[i]=Gy({},a,s,n)}else{let a=o;e[i]=(...c)=>n(a,s,c)}}return e}function c4(e){if(e)throw s4(e,"callback not provided")}function u4(e,t,r,n){e=e||{};function i(o,s,a){let c=typeof a[a.length-1]=="function"?a.pop():o==="sync"||o==="async"?null:c4;if(typeof c=="function"){let u;try{u=r(o,s,a,c)}catch(l){return a4.errorAsStreamOrCb(o,l,c)}return u}else return new Promise((u,l)=>{r(o,s,a,(f,d)=>{f?l(f):u(d)})})}return n?i("async","manifest",[function(o,s){if(o)return n(o);Gy(e,s,null,i),n(null,s,e)}]):Gy(e,t,null,i),e}RO.exports=u4});var NO=g((ble,DO)=>{"use strict";var Rp=il();function OO(e){return Array.isArray(e)?e:e.split(".")}function l4(e){return e&&typeof e.pre=="function"&&typeof e.test=="function"&&typeof e.post=="function"}DO.exports=function(t){if(l4(t))return t;if(typeof t=="function")return{pre:t};let r=null,n={};function i(o){if(o.allow){r={};for(let s of o.allow)Rp.set(r,OO(s),!0)}else r=null;if(o.deny)for(let s of o.deny)Rp.set(n,OO(s),!0);else n={};return this}return t&&i(t),i.pre=o=>{if(o=Array.isArray(o)?o:[o],r&&!Rp.prefix(r,o))return new Error(`method:${o} is not in list of allowed methods`);if(n&&Rp.prefix(n,o))return new Error(`method:${o} is on list of disallowed methods`)},i.post=()=>{},i.test=o=>i.pre(o),i.get=()=>({allow:r,deny:n}),i}});var kO=g((xle,LO)=>{"use strict";var f4=NO(),Wy=il();LO.exports=function(t,r,n){n=f4(n);function i(s,a){return s===Wy.get(r,a)}function o(s,a,c){if(a==="emit")throw new Error("emit has been removed");if(s==="async"&&i("sync",a)){let u=c.pop(),l;try{l=Wy.get(t,a).apply(this,c)}catch(f){return u(f)}return u(null,l)}if(!i(s,a))throw new Error(`no ${s}:${a}`);return Wy.get(t,a).apply(this,c)}return function(a,c,u){let l=n.pre(c,u);if(l)throw l;return o.call(this,a,c,u)}}});var qO=g((Tle,MO)=>{"use strict";var d4=aP(),p4=require("events").EventEmitter,h4=IO(),m4=PO(),g4=kO();function FO(e,t,r,n,i,o,s){let a;typeof e=="function"&&(a=e,e={}),t=t||{},e=e||{};let c=new p4;o||(o=d4);let u,l={_emit(d,p){return c&&c._emit(d,p),l},id:n},f=h4(g4(r,t,i).bind(l),o,d=>{if(!c.closed&&(c.closed=!0,c.emit("closed"),u)){let p=u;u=null,p(d)}});if(m4(c,e,(d,p,h,m)=>{if(f.closed)throw new Error("stream is closed");return f.remoteCall(d,p,h,m)},a),c._emit=c.emit,s){Object.__defineGetter__.call(c,"id",()=>l.id),Object.__defineSetter__.call(c,"id",p=>{l.id=p});let d=!0;c.createStream=p=>{if(u=p,d)return d=!1,f;throw new Error("one stream per rpc")}}else c.stream=f;return c.closed=!1,c.close=function(d,p){return f.close(d,p),this},c}MO.exports=function(e,t,r){return arguments.length>3?FO.apply(this,arguments):function(n,i,o){return FO(e,t,n,o,i,r,!0)}}});var HO=g((pi,UO)=>{var Ale=xy(),v4=Ly();function $O(e){e.destroy?e.destroy():console.error("warning, stream-to-pull-stream: \nthe wrapped node-stream does not implement `destroy`, \nthis may cause resource leaks.")}function jO(e,t,r){var n,i=!1,o;function s(){o||(o=!0,r&&r(n===!0?null:n))}function a(){i||(i=!0,u(),n?s():e(n=!0,s))}function c(l){u(),n||e(n=l,s)}function u(){t.on("finish",a),t.removeListener("close",a),t.removeListener("error",c)}t.on("close",a),t.on("finish",a),t.on("error",c),process.nextTick(function(){v4(function(l){e(null,function(f,d){if(n=n||f,f===!0)return t._isStdio?s():t.end();if(n=n||f)return $O(t),s(n);if(t._isStdio)t.write(d,function(){l()});else{var p=t.write(d);p===!1?t.once("drain",l):l()}})})})}function y4(e){var t=!1,r=!1,n;function i(){var o=e.read();if(o!==null&&n){var s=n;n=null,s(null,o)}}return e.on("readable",function(){r=!0,n&&i()}).on("end",function(){t=!0,n&&n(t)}).on("error",function(o){t=o,n&&n(t)}),function(o,s){n=s,t?s(t):r&&i()}}function Pp(e){var t=[],r=[],n,i=!1,o;function s(){for(;(t.length||n)&&r.length;)r.shift()(t.length?null:n,t.shift());!t.length&&i&&(i=!1,e.resume())}return e.on("data",function(a){t.push(a),s(),t.length&&e.pause&&(i=!0,e.pause())}),e.on("end",function(){n=!0,s()}),e.on("close",function(){n=!0,s()}),e.on("error",function(a){n=a,s()}),function(a,c){if(!c)throw new Error("*must* provide cb");if(a){let l=function(){for(;r.length;)r.shift()(a);c(a)};var u=l;if(n)return l();e.once("close",l),$O(e)}else r.push(c),s()}}var E4=Pp,Op=function(e,t){return function(r){return jO(r,e,t)}},Dp=function(e){return Pp(e)};pi=UO.exports=function(e,t){return e.writable&&e.write?e.readable?function(r){return jO(r,e,t),Pp(e)}:Op(e,t):Dp(e)};pi.sink=Op;pi.source=Dp;pi.read=E4;pi.read1=Pp;pi.read2=y4;pi.duplex=function(e,t){return{source:Dp(e),sink:Op(e,t)}};pi.transform=function(e){return function(t){var r=Dp(e);return Op(e)(t),r}}});var GO=g((Ile,Np)=>{var _4=require("stream");Np.exports=Vy;Np.exports.source=function(e){return Vy(null,e)};Np.exports.sink=function(e){return Vy(e,null)};var BO=typeof setImmediate=="undefined"?process.nextTick:setImmediate;function Vy(e,t){e&&typeof e=="object"&&(t=e.source,e=e.sink);var r=[],n=[],i,o,s=new _4;s.writable=s.readable=!0,s.write=function(v){return r.length?r.shift()(null,v):n.push(v),r.length||(o=!0),!!r.length},s.end=function(){t?n.length?m():t(i=!0,r.length?r.shift():function(){}):r.length&&r.shift()(!0)},s.source=function(v,_){n.length?(_(null,n.shift()),n.length||s.emit("drain")):((i=i||v)?_(i):r.push(_),o&&(o=!1,s.emit("drain")))};var a;e&&(a=e(s.source)),a&&!t&&(t=a);var c=[],u=[],l=!1,f=!1,d=!1;if(s.sink=function(v){t=v,BO(m)},t){s.sink(t),s.paused=!0;var p=s.on.bind(s);s.on=(v,_)=>{var E=p(v,_);return v==="data"&&s.paused&&BO(s.resume.bind(s)),E};var h=s.pipe.bind(s);s.pipe=function(v,_){var E=h(v,_);return s.paused&&s.resume(),E}}function m(){if(f=!1,!(!t||d)){for(;c.length&&!s.paused;)s.emit("data",c.shift());if(!s.paused){if(l)return s.emit("end");d=!0,t(null,function v(_,E){d=!1,s.paused?(_===!0?l=_:_?s.emit("error",_):c.push(E),f=!0):_&&(i=_)!==!0?s.emit("error",_):(i=i||_)?s.emit("end"):(s.emit("data",E),d=!0,t(null,v))})}}}return s.pause=function(){return s.paused=!0,s},s.resume=function(){return s.paused=!1,m(),s},s.destroy=function(){!i&&t&&t(i=!0,function(){}),i=!0,r.length&&r.shift()(!0),s.emit("close")},s}});var Xy=g((jle,QO)=>{"use strict";var YO=require("child_process"),R4=1024*1024,XO={exec(e,t){YO.exec(e,{maxBuffer:2*R4,windowsHide:!0},t)},spawn(e,t,r){return YO.spawn(e,t,r)},stripLine(e,t){let r=0;for(;t-- >0;){let n=e.indexOf(`
`,r);n>=0&&(r=n+1)}return r>0?e.substring(r):e},split(e,t){let r=e.trim().split(/\s+/);return r.length>t&&(r[t-1]=r.slice(t-1).join(" ")),r},extractColumns(e,t,r){let n=e.split(/(\r\n|\n|\r)/),i=[];return r||(r=Math.max.apply(null,t)+1),n.forEach(o=>{let s=XO.split(o,r),a=[];t.forEach(c=>{a.push(s[c]||"")}),i.push(a)}),i},parseTable(e){let t=e.split(/(\r\n|\n|\r)/).filter(o=>o.trim().length>0),r=t.shift().trim().match(/(\w+\s*)/g);if(!r)return[];let n=[],i=r.map((o,s)=>{let a=[];return s===0?(a[0]=0,a[1]=o.length):(a[0]=n[s-1][1],a[1]=a[0]+o.length),n.push(a),o.trim()});return n[n.length-1][1]=1/0,t.map(o=>{let s={};return n.forEach((a,c)=>{let u=i[c],l=o.substring(a[0],a[1]).trim();s[u]=l}),s})}};QO.exports=XO});var ZO=g((Ule,JO)=>{"use strict";var P4=require("os"),Fp=require("fs"),on=Xy(),O4=e=>new Promise((t,r)=>{Fp.existsSync(e)?t():Fp.mkdir(e,n=>{n?r(n):t()})}),Qy={darwin(e){return new Promise((t,r)=>{on.exec("netstat -anv -p TCP && netstat -anv -p UDP",function(n,i,o){if(n)r(n);else{if(n=o.toString().trim(),n){r(n);return}let s=on.stripLine(i.toString(),2),a=on.extractColumns(s,[0,3,8],10).filter(c=>!!String(c[0]).match(/^(udp|tcp)/)).find(c=>{let u=String(c[1]).match(/\.(\d+)$/);if(u&&u[1]===String(e))return!0});a&&a[2].length?t(parseInt(a[2],10)):r(new Error(`pid of port (${e}) not found`))}})})},freebsd:"darwin",sunos:"darwin",linux(e){return new Promise((t,r)=>{let n="netstat -tunlp";on.exec(n,function(i,o,s){if(i)r(i);else{let a=s.toString().trim();a&&console.warn(a);let c=on.stripLine(o.toString(),2),u=on.extractColumns(c,[3,6],7).find(l=>{let f=String(l[0]).match(/:(\d+)$/);if(f&&f[1]===String(e))return!0});if(u&&u[1]){let l=u[1].split("/",1)[0];l.length?t(parseInt(l,10)):r(new Error(`pid of port (${e}) not found`))}else r(new Error(`pid of port (${e}) not found`))}})})},win32(e){return new Promise((t,r)=>{on.exec("netstat -ano",function(n,i,o){if(n)r(n);else{if(n=o.toString().trim(),n){r(n);return}let s=on.stripLine(i.toString(),4),a=on.extractColumns(s,[1,4],5).find(c=>{let u=String(c[0]).match(/:(\d+)$/);if(u&&u[1]===String(e))return!0});a&&a[1].length&&parseInt(a[1],10)>0?t(parseInt(a[1],10)):r(new Error(`pid of port (${e}) not found`))}})})},android(e){return new Promise((t,r)=>{let n=P4.tmpdir()+"/.find-process",i=n+"/"+process.pid,o='netstat -tunp >> "'+i+'"';O4(n).then(()=>{on.exec(o,()=>{Fp.readFile(i,"utf8",(s,a)=>{if(Fp.unlink(i,()=>{}),s)r(s);else{a=on.stripLine(a,2);let c=on.extractColumns(a,[3,6],7).find(u=>{let l=String(u[0]).match(/:(\d+)$/);if(l&&l[1]===String(e))return!0});if(c&&c[1]){let u=c[1].split("/",1)[0];u.length?t(parseInt(u,10)):r(new Error(`pid of port (${e}) not found`))}else r(new Error(`pid of port (${e}) not found`))}})})})})}};function D4(e){let t=process.platform;return new Promise((r,n)=>{if(!(t in Qy))return n(new Error(`platform ${t} is unsupported`));let i=Qy[t];typeof i=="string"&&(i=Qy[i]),i(e).then(r,n)})}JO.exports=D4});var nD=g((Hle,rD)=>{"use strict";var Mp=require("path"),co=Xy();function Jy(e,t){return t?e&&e.match?e.match(t):!1:!0}function eD(e){let t=e.split(Mp.sep),r=t[t.length-1];r&&(t[t.length-1]=r.split(" ")[0]);let n=[];for(let i of t){let o=i.indexOf(" -");if(o>=0){n.push(i.substring(0,o).trim());break}else if(i.endsWith(" ")){n.push(i.trim());break}n.push(i)}return n.join(Mp.sep)}function tD(e){if(process.platform==="darwin"){let t=e.indexOf(".app/");if(t>=0)return Mp.basename(e.substring(0,t))}return Mp.basename(e)}var Zy={darwin(e){return new Promise((t,r)=>{let n;"pid"in e?n=`ps -p ${e.pid} -ww -o pid,ppid,uid,gid,args`:n="ps ax -ww -o pid,ppid,uid,gid,args",co.exec(n,function(i,o,s){if(i)"pid"in e?t([]):r(i);else{if(i=s.toString().trim(),i){r(i);return}let a=co.stripLine(o.toString(),1),u=co.extractColumns(a,[0,1,2,3,4],5).filter(l=>l[0]&&e.pid?l[0]===String(e.pid):l[4]&&e.name?Jy(l[4],e.name):!!l[0]).map(l=>{let f=String(l[4]),d=eD(f);return{pid:parseInt(l[0],10),ppid:parseInt(l[1],10),uid:parseInt(l[2],10),gid:parseInt(l[3],10),name:tD(d),bin:d,cmd:l[4]}});e.strict&&e.name&&(u=u.filter(l=>l.name===e.name)),t(u)}})})},linux:"darwin",sunos:"darwin",freebsd:"darwin",win32(e){return new Promise((t,r)=>{let n="WMIC path win32_process get Name,Processid,ParentProcessId,Commandline,ExecutablePath",i=[],o=co.spawn("cmd",["/c",n],{detached:!1,windowsHide:!0});o.stdout.on("data",s=>{i.push(s.toString())}),o.on("close",s=>{if(s!==0)return r(new Error("Command '"+n+"' terminated with code: "+s));let a=co.parseTable(i.join(`
`)).filter(c=>"pid"in e?c.ProcessId===String(e.pid):e.name?e.strict?c.Name===e.name||c.Name.endsWith(".exe")&&c.Name.slice(0,-4)===e.name:Jy(c.CommandLine||c.Name,e.name):!0).map(c=>({pid:parseInt(c.ProcessId,10),ppid:parseInt(c.ParentProcessId,10),bin:c.ExecutablePath,name:c.Name,cmd:c.CommandLine}));t(a)})})},android(e){return new Promise((t,r)=>{let n="ps";co.exec(n,function(i,o,s){if(i)"pid"in e?t([]):r(i);else{if(i=s.toString().trim(),i){r(i);return}let a=co.stripLine(o.toString(),1),u=co.extractColumns(a,[0,3],4).filter(l=>l[0]&&e.pid?l[0]===String(e.pid):l[1]&&e.name?Jy(l[1],e.name):!!l[0]).map(l=>{let f=String(l[1]),d=eD(f);return{pid:parseInt(l[0],10),name:tD(d),bin:d,cmd:f}});e.strict&&e.name&&(u=u.filter(l=>l.name===e.name)),t(u)}})})}};function N4(e){let t=process.platform;return new Promise((r,n)=>{if(!(t in Zy))return n(new Error(`platform ${t} is unsupported`));let i=Zy[t];typeof i=="string"&&(i=Zy[i]),i(e).then(r,n)})}rD.exports=N4});var sD=g((Ble,oD)=>{"use strict";var L4=ZO(),iD=nD(),eE={port(e,t){return L4(e,t).then(r=>eE.pid(r,t),()=>[])},pid(e,t){return iD({pid:e,strict:t})},name(e,t){return iD({name:e,strict:t})}};function k4(e,t,r){return new Promise((n,i)=>{e in eE?e==="pid"&&typeof t!="number"?i(new Error("pid must be a number")):e==="port"&&typeof t!="number"?i(new Error("port must be a number")):eE[e](t,r).then(n,i):i(new Error(`do not support find by "${e}"`))})}oD.exports=k4});var cD=g((Gle,aD)=>{"use strict";aD.exports=sD()});var gl=g((xde,NN)=>{var c9="2.0.0",u9=256,l9=Number.MAX_SAFE_INTEGER||9007199254740991,f9=16;NN.exports={SEMVER_SPEC_VERSION:c9,MAX_LENGTH:u9,MAX_SAFE_INTEGER:l9,MAX_SAFE_COMPONENT_LENGTH:f9}});var vl=g((Tde,LN)=>{var d9=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};LN.exports=d9});var xs=g((go,kN)=>{var{MAX_SAFE_COMPONENT_LENGTH:LE}=gl(),p9=vl();go=kN.exports={};var h9=go.re=[],J=go.src=[],Z=go.t={},m9=0,Ee=(e,t,r)=>{let n=m9++;p9(n,t),Z[e]=n,J[n]=t,h9[n]=new RegExp(t,r?"g":void 0)};Ee("NUMERICIDENTIFIER","0|[1-9]\\d*");Ee("NUMERICIDENTIFIERLOOSE","[0-9]+");Ee("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");Ee("MAINVERSION",`(${J[Z.NUMERICIDENTIFIER]})\\.(${J[Z.NUMERICIDENTIFIER]})\\.(${J[Z.NUMERICIDENTIFIER]})`);Ee("MAINVERSIONLOOSE",`(${J[Z.NUMERICIDENTIFIERLOOSE]})\\.(${J[Z.NUMERICIDENTIFIERLOOSE]})\\.(${J[Z.NUMERICIDENTIFIERLOOSE]})`);Ee("PRERELEASEIDENTIFIER",`(?:${J[Z.NUMERICIDENTIFIER]}|${J[Z.NONNUMERICIDENTIFIER]})`);Ee("PRERELEASEIDENTIFIERLOOSE",`(?:${J[Z.NUMERICIDENTIFIERLOOSE]}|${J[Z.NONNUMERICIDENTIFIER]})`);Ee("PRERELEASE",`(?:-(${J[Z.PRERELEASEIDENTIFIER]}(?:\\.${J[Z.PRERELEASEIDENTIFIER]})*))`);Ee("PRERELEASELOOSE",`(?:-?(${J[Z.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${J[Z.PRERELEASEIDENTIFIERLOOSE]})*))`);Ee("BUILDIDENTIFIER","[0-9A-Za-z-]+");Ee("BUILD",`(?:\\+(${J[Z.BUILDIDENTIFIER]}(?:\\.${J[Z.BUILDIDENTIFIER]})*))`);Ee("FULLPLAIN",`v?${J[Z.MAINVERSION]}${J[Z.PRERELEASE]}?${J[Z.BUILD]}?`);Ee("FULL",`^${J[Z.FULLPLAIN]}$`);Ee("LOOSEPLAIN",`[v=\\s]*${J[Z.MAINVERSIONLOOSE]}${J[Z.PRERELEASELOOSE]}?${J[Z.BUILD]}?`);Ee("LOOSE",`^${J[Z.LOOSEPLAIN]}$`);Ee("GTLT","((?:<|>)?=?)");Ee("XRANGEIDENTIFIERLOOSE",`${J[Z.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);Ee("XRANGEIDENTIFIER",`${J[Z.NUMERICIDENTIFIER]}|x|X|\\*`);Ee("XRANGEPLAIN",`[v=\\s]*(${J[Z.XRANGEIDENTIFIER]})(?:\\.(${J[Z.XRANGEIDENTIFIER]})(?:\\.(${J[Z.XRANGEIDENTIFIER]})(?:${J[Z.PRERELEASE]})?${J[Z.BUILD]}?)?)?`);Ee("XRANGEPLAINLOOSE",`[v=\\s]*(${J[Z.XRANGEIDENTIFIERLOOSE]})(?:\\.(${J[Z.XRANGEIDENTIFIERLOOSE]})(?:\\.(${J[Z.XRANGEIDENTIFIERLOOSE]})(?:${J[Z.PRERELEASELOOSE]})?${J[Z.BUILD]}?)?)?`);Ee("XRANGE",`^${J[Z.GTLT]}\\s*${J[Z.XRANGEPLAIN]}$`);Ee("XRANGELOOSE",`^${J[Z.GTLT]}\\s*${J[Z.XRANGEPLAINLOOSE]}$`);Ee("COERCE",`(^|[^\\d])(\\d{1,${LE}})(?:\\.(\\d{1,${LE}}))?(?:\\.(\\d{1,${LE}}))?(?:$|[^\\d])`);Ee("COERCERTL",J[Z.COERCE],!0);Ee("LONETILDE","(?:~>?)");Ee("TILDETRIM",`(\\s*)${J[Z.LONETILDE]}\\s+`,!0);go.tildeTrimReplace="$1~";Ee("TILDE",`^${J[Z.LONETILDE]}${J[Z.XRANGEPLAIN]}$`);Ee("TILDELOOSE",`^${J[Z.LONETILDE]}${J[Z.XRANGEPLAINLOOSE]}$`);Ee("LONECARET","(?:\\^)");Ee("CARETTRIM",`(\\s*)${J[Z.LONECARET]}\\s+`,!0);go.caretTrimReplace="$1^";Ee("CARET",`^${J[Z.LONECARET]}${J[Z.XRANGEPLAIN]}$`);Ee("CARETLOOSE",`^${J[Z.LONECARET]}${J[Z.XRANGEPLAINLOOSE]}$`);Ee("COMPARATORLOOSE",`^${J[Z.GTLT]}\\s*(${J[Z.LOOSEPLAIN]})$|^$`);Ee("COMPARATOR",`^${J[Z.GTLT]}\\s*(${J[Z.FULLPLAIN]})$|^$`);Ee("COMPARATORTRIM",`(\\s*)${J[Z.GTLT]}\\s*(${J[Z.LOOSEPLAIN]}|${J[Z.XRANGEPLAIN]})`,!0);go.comparatorTrimReplace="$1$2$3";Ee("HYPHENRANGE",`^\\s*(${J[Z.XRANGEPLAIN]})\\s+-\\s+(${J[Z.XRANGEPLAIN]})\\s*$`);Ee("HYPHENRANGELOOSE",`^\\s*(${J[Z.XRANGEPLAINLOOSE]})\\s+-\\s+(${J[Z.XRANGEPLAINLOOSE]})\\s*$`);Ee("STAR","(<|>)?=?\\s*\\*");Ee("GTE0","^\\s*>=\\s*0.0.0\\s*$");Ee("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")});var yl=g((Ade,FN)=>{var g9=["includePrerelease","loose","rtl"],v9=e=>e?typeof e!="object"?{loose:!0}:g9.filter(t=>e[t]).reduce((t,r)=>(t[r]=!0,t),{}):{};FN.exports=v9});var rh=g((Ide,$N)=>{var MN=/^[0-9]+$/,qN=(e,t)=>{let r=MN.test(e),n=MN.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},y9=(e,t)=>qN(t,e);$N.exports={compareIdentifiers:qN,rcompareIdentifiers:y9}});var Yt=g((Rde,BN)=>{var nh=vl(),{MAX_LENGTH:jN,MAX_SAFE_INTEGER:ih}=gl(),{re:UN,t:HN}=xs(),E9=yl(),{compareIdentifiers:El}=rh(),sn=class{constructor(t,r){if(r=E9(r),t instanceof sn){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid Version: ${t}`);if(t.length>jN)throw new TypeError(`version is longer than ${jN} characters`);nh("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=t.trim().match(r.loose?UN[HN.LOOSE]:UN[HN.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>ih||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ih||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ih||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<ih)return o}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(nh("SemVer.compare",this.version,this.options,t),!(t instanceof sn)){if(typeof t=="string"&&t===this.version)return 0;t=new sn(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof sn||(t=new sn(t,this.options)),El(this.major,t.major)||El(this.minor,t.minor)||El(this.patch,t.patch)}comparePre(t){if(t instanceof sn||(t=new sn(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=t.prerelease[r];if(nh("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return El(n,i)}while(++r)}compareBuild(t){t instanceof sn||(t=new sn(t,this.options));let r=0;do{let n=this.build[r],i=t.build[r];if(nh("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return El(n,i)}while(++r)}inc(t,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r),this.inc("pre",r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r),this.inc("pre",r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let n=this.prerelease.length;for(;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}r&&(this.prerelease[0]===r?isNaN(this.prerelease[1])&&(this.prerelease=[r,0]):this.prerelease=[r,0]);break;default:throw new Error(`invalid increment argument: ${t}`)}return this.format(),this.raw=this.version,this}};BN.exports=sn});var Ts=g((Pde,zN)=>{var{MAX_LENGTH:_9}=gl(),{re:GN,t:WN}=xs(),VN=Yt(),C9=yl(),w9=(e,t)=>{if(t=C9(t),e instanceof VN)return e;if(typeof e!="string"||e.length>_9||!(t.loose?GN[WN.LOOSE]:GN[WN.FULL]).test(e))return null;try{return new VN(e,t)}catch(n){return null}};zN.exports=w9});var YN=g((Ode,KN)=>{var S9=Ts(),b9=(e,t)=>{let r=S9(e,t);return r?r.version:null};KN.exports=b9});var QN=g((Dde,XN)=>{var x9=Ts(),T9=(e,t)=>{let r=x9(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};XN.exports=T9});var ZN=g((Nde,JN)=>{var A9=Yt(),I9=(e,t,r,n)=>{typeof r=="string"&&(n=r,r=void 0);try{return new A9(e,r).inc(t,n).version}catch(i){return null}};JN.exports=I9});var an=g((Lde,tL)=>{var eL=Yt(),R9=(e,t,r)=>new eL(e,r).compare(new eL(t,r));tL.exports=R9});var oh=g((kde,rL)=>{var P9=an(),O9=(e,t,r)=>P9(e,t,r)===0;rL.exports=O9});var oL=g((Fde,iL)=>{var nL=Ts(),D9=oh(),N9=(e,t)=>{if(D9(e,t))return null;{let r=nL(e),n=nL(t),i=r.prerelease.length||n.prerelease.length,o=i?"pre":"",s=i?"prerelease":"";for(let a in r)if((a==="major"||a==="minor"||a==="patch")&&r[a]!==n[a])return o+a;return s}};iL.exports=N9});var aL=g((Mde,sL)=>{var L9=Yt(),k9=(e,t)=>new L9(e,t).major;sL.exports=k9});var uL=g((qde,cL)=>{var F9=Yt(),M9=(e,t)=>new F9(e,t).minor;cL.exports=M9});var fL=g(($de,lL)=>{var q9=Yt(),$9=(e,t)=>new q9(e,t).patch;lL.exports=$9});var pL=g((jde,dL)=>{var j9=Ts(),U9=(e,t)=>{let r=j9(e,t);return r&&r.prerelease.length?r.prerelease:null};dL.exports=U9});var mL=g((Ude,hL)=>{var H9=an(),B9=(e,t,r)=>H9(t,e,r);hL.exports=B9});var vL=g((Hde,gL)=>{var G9=an(),W9=(e,t)=>G9(e,t,!0);gL.exports=W9});var sh=g((Bde,EL)=>{var yL=Yt(),V9=(e,t,r)=>{let n=new yL(e,r),i=new yL(t,r);return n.compare(i)||n.compareBuild(i)};EL.exports=V9});var CL=g((Gde,_L)=>{var z9=sh(),K9=(e,t)=>e.sort((r,n)=>z9(r,n,t));_L.exports=K9});var SL=g((Wde,wL)=>{var Y9=sh(),X9=(e,t)=>e.sort((r,n)=>Y9(n,r,t));wL.exports=X9});var _l=g((Vde,bL)=>{var Q9=an(),J9=(e,t,r)=>Q9(e,t,r)>0;bL.exports=J9});var ah=g((zde,xL)=>{var Z9=an(),e8=(e,t,r)=>Z9(e,t,r)<0;xL.exports=e8});var kE=g((Kde,TL)=>{var t8=an(),r8=(e,t,r)=>t8(e,t,r)!==0;TL.exports=r8});var ch=g((Yde,AL)=>{var n8=an(),i8=(e,t,r)=>n8(e,t,r)>=0;AL.exports=i8});var uh=g((Xde,IL)=>{var o8=an(),s8=(e,t,r)=>o8(e,t,r)<=0;IL.exports=s8});var FE=g((Qde,RL)=>{var a8=oh(),c8=kE(),u8=_l(),l8=ch(),f8=ah(),d8=uh(),p8=(e,t,r,n)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return a8(e,r,n);case"!=":return c8(e,r,n);case">":return u8(e,r,n);case">=":return l8(e,r,n);case"<":return f8(e,r,n);case"<=":return d8(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};RL.exports=p8});var OL=g((Jde,PL)=>{var h8=Yt(),m8=Ts(),{re:lh,t:fh}=xs(),g8=(e,t)=>{if(e instanceof h8)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(lh[fh.COERCE]);else{let n;for(;(n=lh[fh.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),lh[fh.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;lh[fh.COERCERTL].lastIndex=-1}return r===null?null:m8(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,t)};PL.exports=g8});var qL=g((Zde,ML)=>{"use strict";var v8=Tu(),As=Symbol("max"),mi=Symbol("length"),uc=Symbol("lengthCalculator"),Cl=Symbol("allowStale"),Is=Symbol("maxAge"),gi=Symbol("dispose"),DL=Symbol("noDisposeOnSet"),Ft=Symbol("lruList"),Pn=Symbol("cache"),NL=Symbol("updateAgeOnGet"),ME=()=>1,LL=class{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");let r=this[As]=t.max||1/0,n=t.length||ME;if(this[uc]=typeof n!="function"?ME:n,this[Cl]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[Is]=t.maxAge||0,this[gi]=t.dispose,this[DL]=t.noDisposeOnSet||!1,this[NL]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[As]=t||1/0,wl(this)}get max(){return this[As]}set allowStale(t){this[Cl]=!!t}get allowStale(){return this[Cl]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[Is]=t,wl(this)}get maxAge(){return this[Is]}set lengthCalculator(t){typeof t!="function"&&(t=ME),t!==this[uc]&&(this[uc]=t,this[mi]=0,this[Ft].forEach(r=>{r.length=this[uc](r.value,r.key),this[mi]+=r.length})),wl(this)}get lengthCalculator(){return this[uc]}get length(){return this[mi]}get itemCount(){return this[Ft].length}rforEach(t,r){r=r||this;for(let n=this[Ft].tail;n!==null;){let i=n.prev;FL(this,t,n,r),n=i}}forEach(t,r){r=r||this;for(let n=this[Ft].head;n!==null;){let i=n.next;FL(this,t,n,r),n=i}}keys(){return this[Ft].toArray().map(t=>t.key)}values(){return this[Ft].toArray().map(t=>t.value)}reset(){this[gi]&&this[Ft]&&this[Ft].length&&this[Ft].forEach(t=>this[gi](t.key,t.value)),this[Pn]=new Map,this[Ft]=new v8,this[mi]=0}dump(){return this[Ft].map(t=>dh(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Ft]}set(t,r,n){if(n=n||this[Is],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let i=n?Date.now():0,o=this[uc](r,t);if(this[Pn].has(t)){if(o>this[As])return lc(this,this[Pn].get(t)),!1;let c=this[Pn].get(t).value;return this[gi]&&(this[DL]||this[gi](t,c.value)),c.now=i,c.maxAge=n,c.value=r,this[mi]+=o-c.length,c.length=o,this.get(t),wl(this),!0}let s=new kL(t,r,o,i,n);return s.length>this[As]?(this[gi]&&this[gi](t,r),!1):(this[mi]+=s.length,this[Ft].unshift(s),this[Pn].set(t,this[Ft].head),wl(this),!0)}has(t){if(!this[Pn].has(t))return!1;let r=this[Pn].get(t).value;return!dh(this,r)}get(t){return qE(this,t,!0)}peek(t){return qE(this,t,!1)}pop(){let t=this[Ft].tail;return t?(lc(this,t),t.value):null}del(t){lc(this,this[Pn].get(t))}load(t){this.reset();let r=Date.now();for(let n=t.length-1;n>=0;n--){let i=t[n],o=i.e||0;if(o===0)this.set(i.k,i.v);else{let s=o-r;s>0&&this.set(i.k,i.v,s)}}}prune(){this[Pn].forEach((t,r)=>qE(this,r,!1))}},qE=(e,t,r)=>{let n=e[Pn].get(t);if(n){let i=n.value;if(dh(e,i)){if(lc(e,n),!e[Cl])return}else r&&(e[NL]&&(n.value.now=Date.now()),e[Ft].unshiftNode(n));return i.value}},dh=(e,t)=>{if(!t||!t.maxAge&&!e[Is])return!1;let r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[Is]&&r>e[Is]},wl=e=>{if(e[mi]>e[As])for(let t=e[Ft].tail;e[mi]>e[As]&&t!==null;){let r=t.prev;lc(e,t),t=r}},lc=(e,t)=>{if(t){let r=t.value;e[gi]&&e[gi](r.key,r.value),e[mi]-=r.length,e[Pn].delete(r.key),e[Ft].removeNode(t)}},kL=class{constructor(t,r,n,i,o){this.key=t,this.value=r,this.length=n,this.now=i,this.maxAge=o||0}},FL=(e,t,r,n)=>{let i=r.value;dh(e,i)&&(lc(e,r),e[Cl]||(i=void 0)),i&&t.call(n,i.value,i.key,e)};ML.exports=LL});var cn=g((epe,HL)=>{var fc=class{constructor(t,r){if(r=E8(r),t instanceof fc)return t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease?t:new fc(t.raw,r);if(t instanceof $E)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=t,this.set=t.split(/\s*\|\|\s*/).map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${t}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!jL(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&b8(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(t=>t.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(t){t=t.trim();let n=`parseRange:${Object.keys(this.options).join(",")}:${t}`,i=$L.get(n);if(i)return i;let o=this.options.loose,s=o?Xt[jt.HYPHENRANGELOOSE]:Xt[jt.HYPHENRANGE];t=t.replace(s,L8(this.options.includePrerelease)),yt("hyphen replace",t),t=t.replace(Xt[jt.COMPARATORTRIM],C8),yt("comparator trim",t,Xt[jt.COMPARATORTRIM]),t=t.replace(Xt[jt.TILDETRIM],w8),t=t.replace(Xt[jt.CARETTRIM],S8),t=t.split(/\s+/).join(" ");let a=o?Xt[jt.COMPARATORLOOSE]:Xt[jt.COMPARATOR],c=t.split(" ").map(d=>x8(d,this.options)).join(" ").split(/\s+/).map(d=>N8(d,this.options)).filter(this.options.loose?d=>!!d.match(a):()=>!0).map(d=>new $E(d,this.options)),u=c.length,l=new Map;for(let d of c){if(jL(d))return[d];l.set(d.value,d)}l.size>1&&l.has("")&&l.delete("");let f=[...l.values()];return $L.set(n,f),f}intersects(t,r){if(!(t instanceof fc))throw new TypeError("a Range is required");return this.set.some(n=>UL(n,r)&&t.set.some(i=>UL(i,r)&&n.every(o=>i.every(s=>o.intersects(s,r)))))}test(t){if(!t)return!1;if(typeof t=="string")try{t=new _8(t,this.options)}catch(r){return!1}for(let r=0;r<this.set.length;r++)if(k8(this.set[r],t,this.options))return!0;return!1}};HL.exports=fc;var y8=qL(),$L=new y8({max:1e3}),E8=yl(),$E=Sl(),yt=vl(),_8=Yt(),{re:Xt,t:jt,comparatorTrimReplace:C8,tildeTrimReplace:w8,caretTrimReplace:S8}=xs(),jL=e=>e.value==="<0.0.0-0",b8=e=>e.value==="",UL=(e,t)=>{let r=!0,n=e.slice(),i=n.pop();for(;r&&n.length;)r=n.every(o=>i.intersects(o,t)),i=n.pop();return r},x8=(e,t)=>(yt("comp",e,t),e=I8(e,t),yt("caret",e),e=T8(e,t),yt("tildes",e),e=P8(e,t),yt("xrange",e),e=D8(e,t),yt("stars",e),e),sr=e=>!e||e.toLowerCase()==="x"||e==="*",T8=(e,t)=>e.trim().split(/\s+/).map(r=>A8(r,t)).join(" "),A8=(e,t)=>{let r=t.loose?Xt[jt.TILDELOOSE]:Xt[jt.TILDE];return e.replace(r,(n,i,o,s,a)=>{yt("tilde",e,n,i,o,s,a);let c;return sr(i)?c="":sr(o)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:sr(s)?c=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:a?(yt("replaceTilde pr",a),c=`>=${i}.${o}.${s}-${a} <${i}.${+o+1}.0-0`):c=`>=${i}.${o}.${s} <${i}.${+o+1}.0-0`,yt("tilde return",c),c})},I8=(e,t)=>e.trim().split(/\s+/).map(r=>R8(r,t)).join(" "),R8=(e,t)=>{yt("caret",e,t);let r=t.loose?Xt[jt.CARETLOOSE]:Xt[jt.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,(i,o,s,a,c)=>{yt("caret",e,i,o,s,a,c);let u;return sr(o)?u="":sr(s)?u=`>=${o}.0.0${n} <${+o+1}.0.0-0`:sr(a)?o==="0"?u=`>=${o}.${s}.0${n} <${o}.${+s+1}.0-0`:u=`>=${o}.${s}.0${n} <${+o+1}.0.0-0`:c?(yt("replaceCaret pr",c),o==="0"?s==="0"?u=`>=${o}.${s}.${a}-${c} <${o}.${s}.${+a+1}-0`:u=`>=${o}.${s}.${a}-${c} <${o}.${+s+1}.0-0`:u=`>=${o}.${s}.${a}-${c} <${+o+1}.0.0-0`):(yt("no pr"),o==="0"?s==="0"?u=`>=${o}.${s}.${a}${n} <${o}.${s}.${+a+1}-0`:u=`>=${o}.${s}.${a}${n} <${o}.${+s+1}.0-0`:u=`>=${o}.${s}.${a} <${+o+1}.0.0-0`),yt("caret return",u),u})},P8=(e,t)=>(yt("replaceXRanges",e,t),e.split(/\s+/).map(r=>O8(r,t)).join(" ")),O8=(e,t)=>{e=e.trim();let r=t.loose?Xt[jt.XRANGELOOSE]:Xt[jt.XRANGE];return e.replace(r,(n,i,o,s,a,c)=>{yt("xRange",e,n,i,o,s,a,c);let u=sr(o),l=u||sr(s),f=l||sr(a),d=f;return i==="="&&d&&(i=""),c=t.includePrerelease?"-0":"",u?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&d?(l&&(s=0),a=0,i===">"?(i=">=",l?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",l?o=+o+1:s=+s+1),i==="<"&&(c="-0"),n=`${i+o}.${s}.${a}${c}`):l?n=`>=${o}.0.0${c} <${+o+1}.0.0-0`:f&&(n=`>=${o}.${s}.0${c} <${o}.${+s+1}.0-0`),yt("xRange return",n),n})},D8=(e,t)=>(yt("replaceStars",e,t),e.trim().replace(Xt[jt.STAR],"")),N8=(e,t)=>(yt("replaceGTE0",e,t),e.trim().replace(Xt[t.includePrerelease?jt.GTE0PRE:jt.GTE0],"")),L8=e=>(t,r,n,i,o,s,a,c,u,l,f,d,p)=>(sr(n)?r="":sr(i)?r=`>=${n}.0.0${e?"-0":""}`:sr(o)?r=`>=${n}.${i}.0${e?"-0":""}`:s?r=`>=${r}`:r=`>=${r}${e?"-0":""}`,sr(u)?c="":sr(l)?c=`<${+u+1}.0.0-0`:sr(f)?c=`<${u}.${+l+1}.0-0`:d?c=`<=${u}.${l}.${f}-${d}`:e?c=`<${u}.${l}.${+f+1}-0`:c=`<=${c}`,`${r} ${c}`.trim()),k8=(e,t,r)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let n=0;n<e.length;n++)if(yt(e[n].semver),e[n].semver!==$E.ANY&&e[n].semver.prerelease.length>0){let i=e[n].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}});var Sl=g((tpe,zL)=>{var bl=Symbol("SemVer ANY"),xl=class{static get ANY(){return bl}constructor(t,r){if(r=F8(r),t instanceof xl){if(t.loose===!!r.loose)return t;t=t.value}UE("comparator",t,r),this.options=r,this.loose=!!r.loose,this.parse(t),this.semver===bl?this.value="":this.value=this.operator+this.semver.version,UE("comp",this)}parse(t){let r=this.options.loose?BL[GL.COMPARATORLOOSE]:BL[GL.COMPARATOR],n=t.match(r);if(!n)throw new TypeError(`Invalid comparator: ${t}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new WL(n[2],this.options.loose):this.semver=bl}toString(){return this.value}test(t){if(UE("Comparator.test",t,this.options.loose),this.semver===bl||t===bl)return!0;if(typeof t=="string")try{t=new WL(t,this.options)}catch(r){return!1}return jE(t,this.operator,this.semver,this.options)}intersects(t,r){if(!(t instanceof xl))throw new TypeError("a Comparator is required");if((!r||typeof r!="object")&&(r={loose:!!r,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new VL(t.value,r).test(this.value);if(t.operator==="")return t.value===""?!0:new VL(this.value,r).test(t.semver);let n=(this.operator===">="||this.operator===">")&&(t.operator===">="||t.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(t.operator==="<="||t.operator==="<"),o=this.semver.version===t.semver.version,s=(this.operator===">="||this.operator==="<=")&&(t.operator===">="||t.operator==="<="),a=jE(this.semver,"<",t.semver,r)&&(this.operator===">="||this.operator===">")&&(t.operator==="<="||t.operator==="<"),c=jE(this.semver,">",t.semver,r)&&(this.operator==="<="||this.operator==="<")&&(t.operator===">="||t.operator===">");return n||i||o&&s||a||c}};zL.exports=xl;var F8=yl(),{re:BL,t:GL}=xs(),jE=FE(),UE=vl(),WL=Yt(),VL=cn()});var Tl=g((rpe,KL)=>{var M8=cn(),q8=(e,t,r)=>{try{t=new M8(t,r)}catch(n){return!1}return t.test(e)};KL.exports=q8});var XL=g((npe,YL)=>{var $8=cn(),j8=(e,t)=>new $8(e,t).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));YL.exports=j8});var JL=g((ipe,QL)=>{var U8=Yt(),H8=cn(),B8=(e,t,r)=>{let n=null,i=null,o=null;try{o=new H8(t,r)}catch(s){return null}return e.forEach(s=>{o.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new U8(n,r))}),n};QL.exports=B8});var ek=g((ope,ZL)=>{var G8=Yt(),W8=cn(),V8=(e,t,r)=>{let n=null,i=null,o=null;try{o=new W8(t,r)}catch(s){return null}return e.forEach(s=>{o.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new G8(n,r))}),n};ZL.exports=V8});var nk=g((spe,rk)=>{var HE=Yt(),z8=cn(),tk=_l(),K8=(e,t)=>{e=new z8(e,t);let r=new HE("0.0.0");if(e.test(r)||(r=new HE("0.0.0-0"),e.test(r)))return r;r=null;for(let n=0;n<e.set.length;++n){let i=e.set[n],o=null;i.forEach(s=>{let a=new HE(s.semver.version);switch(s.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!o||tk(a,o))&&(o=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),o&&(!r||tk(r,o))&&(r=o)}return r&&e.test(r)?r:null};rk.exports=K8});var ok=g((ape,ik)=>{var Y8=cn(),X8=(e,t)=>{try{return new Y8(e,t).range||"*"}catch(r){return null}};ik.exports=X8});var ph=g((cpe,uk)=>{var Q8=Yt(),sk=Sl(),{ANY:J8}=sk,Z8=cn(),eX=Tl(),ak=_l(),ck=ah(),tX=uh(),rX=ch(),nX=(e,t,r,n)=>{e=new Q8(e,n),t=new Z8(t,n);let i,o,s,a,c;switch(r){case">":i=ak,o=tX,s=ck,a=">",c=">=";break;case"<":i=ck,o=rX,s=ak,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(eX(e,t,n))return!1;for(let u=0;u<t.set.length;++u){let l=t.set[u],f=null,d=null;if(l.forEach(p=>{p.semver===J8&&(p=new sk(">=0.0.0")),f=f||p,d=d||p,i(p.semver,f.semver,n)?f=p:s(p.semver,d.semver,n)&&(d=p)}),f.operator===a||f.operator===c||(!d.operator||d.operator===a)&&o(e,d.semver))return!1;if(d.operator===c&&s(e,d.semver))return!1}return!0};uk.exports=nX});var fk=g((upe,lk)=>{var iX=ph(),oX=(e,t,r)=>iX(e,t,">",r);lk.exports=oX});var pk=g((lpe,dk)=>{var sX=ph(),aX=(e,t,r)=>sX(e,t,"<",r);dk.exports=aX});var gk=g((fpe,mk)=>{var hk=cn(),cX=(e,t,r)=>(e=new hk(e,r),t=new hk(t,r),e.intersects(t));mk.exports=cX});var yk=g((dpe,vk)=>{var uX=Tl(),lX=an();vk.exports=(e,t,r)=>{let n=[],i=null,o=null,s=e.sort((l,f)=>lX(l,f,r));for(let l of s)uX(l,t,r)?(o=l,i||(i=l)):(o&&n.push([i,o]),o=null,i=null);i&&n.push([i,null]);let a=[];for(let[l,f]of n)l===f?a.push(l):!f&&l===s[0]?a.push("*"):f?l===s[0]?a.push(`<=${f}`):a.push(`${l} - ${f}`):a.push(`>=${l}`);let c=a.join(" || "),u=typeof t.raw=="string"?t.raw:String(t);return c.length<u.length?c:t}});var Sk=g((ppe,wk)=>{var Ek=cn(),hh=Sl(),{ANY:BE}=hh,Al=Tl(),GE=an(),fX=(e,t,r={})=>{if(e===t)return!0;e=new Ek(e,r),t=new Ek(t,r);let n=!1;e:for(let i of e.set){for(let o of t.set){let s=dX(i,o,r);if(n=n||s!==null,s)continue e}if(n)return!1}return!0},dX=(e,t,r)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===BE){if(t.length===1&&t[0].semver===BE)return!0;r.includePrerelease?e=[new hh(">=0.0.0-0")]:e=[new hh(">=0.0.0")]}if(t.length===1&&t[0].semver===BE){if(r.includePrerelease)return!0;t=[new hh(">=0.0.0")]}let n=new Set,i,o;for(let p of e)p.operator===">"||p.operator===">="?i=_k(i,p,r):p.operator==="<"||p.operator==="<="?o=Ck(o,p,r):n.add(p.semver);if(n.size>1)return null;let s;if(i&&o){if(s=GE(i.semver,o.semver,r),s>0)return null;if(s===0&&(i.operator!==">="||o.operator!=="<="))return null}for(let p of n){if(i&&!Al(p,String(i),r)||o&&!Al(p,String(o),r))return null;for(let h of t)if(!Al(p,String(h),r))return!1;return!0}let a,c,u,l,f=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1,d=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;f&&f.prerelease.length===1&&o.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(let p of t){if(l=l||p.operator===">"||p.operator===">=",u=u||p.operator==="<"||p.operator==="<=",i){if(d&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===d.major&&p.semver.minor===d.minor&&p.semver.patch===d.patch&&(d=!1),p.operator===">"||p.operator===">="){if(a=_k(i,p,r),a===p&&a!==i)return!1}else if(i.operator===">="&&!Al(i.semver,String(p),r))return!1}if(o){if(f&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===f.major&&p.semver.minor===f.minor&&p.semver.patch===f.patch&&(f=!1),p.operator==="<"||p.operator==="<="){if(c=Ck(o,p,r),c===p&&c!==o)return!1}else if(o.operator==="<="&&!Al(o.semver,String(p),r))return!1}if(!p.operator&&(o||i)&&s!==0)return!1}return!(i&&u&&!o&&s!==0||o&&l&&!i&&s!==0||d||f)},_k=(e,t,r)=>{if(!e)return t;let n=GE(e.semver,t.semver,r);return n>0?e:n<0||t.operator===">"&&e.operator===">="?t:e},Ck=(e,t,r)=>{if(!e)return t;let n=GE(e.semver,t.semver,r);return n<0?e:n>0||t.operator==="<"&&e.operator==="<="?t:e};wk.exports=fX});var xk=g((hpe,bk)=>{var WE=xs();bk.exports={re:WE.re,src:WE.src,tokens:WE.t,SEMVER_SPEC_VERSION:gl().SEMVER_SPEC_VERSION,SemVer:Yt(),compareIdentifiers:rh().compareIdentifiers,rcompareIdentifiers:rh().rcompareIdentifiers,parse:Ts(),valid:YN(),clean:QN(),inc:ZN(),diff:oL(),major:aL(),minor:uL(),patch:fL(),prerelease:pL(),compare:an(),rcompare:mL(),compareLoose:vL(),compareBuild:sh(),sort:CL(),rsort:SL(),gt:_l(),lt:ah(),eq:oh(),neq:kE(),gte:ch(),lte:uh(),cmp:FE(),coerce:OL(),Comparator:Sl(),Range:cn(),satisfies:Tl(),toComparators:XL(),maxSatisfying:JL(),minSatisfying:ek(),minVersion:nk(),validRange:ok(),outside:ph(),gtr:fk(),ltr:pk(),intersects:gk(),simplifyRange:yk(),subset:Sk()}});var Tt=g((sve,r1)=>{"use strict";var BX=function(){function e(){}return e.info=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.enableDebug&&console.info(e.TAG+t,r)},e.warn=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.disableWarnings||console.warn(e.TAG+t,r)},e.enableDebug=!1,e.disableWarnings=!1,e.disableErrors=!1,e.TAG="ApplicationInsights:",e}();r1.exports=BX});var t_=g(vo=>{"use strict";var vc=vo&&vo.__assign||function(){return vc=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},vc.apply(this,arguments)};Object.defineProperty(vo,"__esModule",{value:!0});vo.AsyncScopeManager=vo.OpenTelemetryScopeManagerWrapper=void 0;var Ds=Ns(),GX=require("events"),n1=function(){function e(){}return e.prototype.active=function(){var t=this,r=Ds.CorrelationContextManager.getCurrentContext();return vc(vc({},r),{getValue:function(n){return t._activeSymbol?n===t._activeSymbol?r:!1:(t._activeSymbol=n,r)},setValue:function(){}})},e.prototype.with=function(t,r){var n=t.parentSpanId,i=t.name,o=e._spanToContext(t,n,i);return Ds.CorrelationContextManager.runWithContext(o,r)()},e.prototype.bind=function(t){return typeof t=="function"?Ds.CorrelationContextManager.wrapCallback(t):(t instanceof GX.EventEmitter&&Ds.CorrelationContextManager.wrapEmitter(t),t)},e.prototype.enable=function(){return Ds.CorrelationContextManager.enable(),this},e.prototype.disable=function(){return Ds.CorrelationContextManager.disable(),this},e._spanToContext=function(t,r,n){var i=t.spanContext?t.spanContext():t.context(),o=r?"|"+i.traceId+"."+r+".":i.traceId,s=vc(vc({},t.spanContext()),{traceFlags:t.spanContext().traceFlags}),a=Ds.CorrelationContextManager.spanToContextObject(s,o,n);return a},e}();vo.OpenTelemetryScopeManagerWrapper=n1;vo.AsyncScopeManager=new n1});var _1=g((me,E1)=>{me=E1.exports=Se;var Me;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?Me=function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:Me=function(){};me.SEMVER_SPEC_VERSION="2.0.0";var r_=256,Eh=Number.MAX_SAFE_INTEGER||9007199254740991,n_=16,He=me.re=[],L=me.src=[],_e=0,yc=_e++;L[yc]="0|[1-9]\\d*";var Ec=_e++;L[Ec]="[0-9]+";var i_=_e++;L[i_]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var i1=_e++;L[i1]="("+L[yc]+")\\.("+L[yc]+")\\.("+L[yc]+")";var o1=_e++;L[o1]="("+L[Ec]+")\\.("+L[Ec]+")\\.("+L[Ec]+")";var o_=_e++;L[o_]="(?:"+L[yc]+"|"+L[i_]+")";var s_=_e++;L[s_]="(?:"+L[Ec]+"|"+L[i_]+")";var a_=_e++;L[a_]="(?:-("+L[o_]+"(?:\\."+L[o_]+")*))";var c_=_e++;L[c_]="(?:-?("+L[s_]+"(?:\\."+L[s_]+")*))";var u_=_e++;L[u_]="[0-9A-Za-z-]+";var Pl=_e++;L[Pl]="(?:\\+("+L[u_]+"(?:\\."+L[u_]+")*))";var l_=_e++,s1="v?"+L[i1]+L[a_]+"?"+L[Pl]+"?";L[l_]="^"+s1+"$";var f_="[v=\\s]*"+L[o1]+L[c_]+"?"+L[Pl]+"?",d_=_e++;L[d_]="^"+f_+"$";var _c=_e++;L[_c]="((?:<|>)?=?)";var _h=_e++;L[_h]=L[Ec]+"|x|X|\\*";var Ch=_e++;L[Ch]=L[yc]+"|x|X|\\*";var Ls=_e++;L[Ls]="[v=\\s]*("+L[Ch]+")(?:\\.("+L[Ch]+")(?:\\.("+L[Ch]+")(?:"+L[a_]+")?"+L[Pl]+"?)?)?";var Cc=_e++;L[Cc]="[v=\\s]*("+L[_h]+")(?:\\.("+L[_h]+")(?:\\.("+L[_h]+")(?:"+L[c_]+")?"+L[Pl]+"?)?)?";var a1=_e++;L[a1]="^"+L[_c]+"\\s*"+L[Ls]+"$";var c1=_e++;L[c1]="^"+L[_c]+"\\s*"+L[Cc]+"$";var u1=_e++;L[u1]="(?:^|[^\\d])(\\d{1,"+n_+"})(?:\\.(\\d{1,"+n_+"}))?(?:\\.(\\d{1,"+n_+"}))?(?:$|[^\\d])";var wh=_e++;L[wh]="(?:~>?)";var Sh=_e++;L[Sh]="(\\s*)"+L[wh]+"\\s+";He[Sh]=new RegExp(L[Sh],"g");var WX="$1~",l1=_e++;L[l1]="^"+L[wh]+L[Ls]+"$";var f1=_e++;L[f1]="^"+L[wh]+L[Cc]+"$";var bh=_e++;L[bh]="(?:\\^)";var xh=_e++;L[xh]="(\\s*)"+L[bh]+"\\s+";He[xh]=new RegExp(L[xh],"g");var VX="$1^",d1=_e++;L[d1]="^"+L[bh]+L[Ls]+"$";var p1=_e++;L[p1]="^"+L[bh]+L[Cc]+"$";var p_=_e++;L[p_]="^"+L[_c]+"\\s*("+f_+")$|^$";var h_=_e++;L[h_]="^"+L[_c]+"\\s*("+s1+")$|^$";var Ol=_e++;L[Ol]="(\\s*)"+L[_c]+"\\s*("+f_+"|"+L[Ls]+")";He[Ol]=new RegExp(L[Ol],"g");var zX="$1$2$3",h1=_e++;L[h1]="^\\s*("+L[Ls]+")\\s+-\\s+("+L[Ls]+")\\s*$";var m1=_e++;L[m1]="^\\s*("+L[Cc]+")\\s+-\\s+("+L[Cc]+")\\s*$";var g1=_e++;L[g1]="(<|>)?=?\\s*\\*";for(yo=0;yo<_e;yo++)Me(yo,L[yo]),He[yo]||(He[yo]=new RegExp(L[yo]));var yo;me.parse=ks;function ks(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof Se)return e;if(typeof e!="string"||e.length>r_)return null;var r=t.loose?He[d_]:He[l_];if(!r.test(e))return null;try{return new Se(e,t)}catch(n){return null}}me.valid=KX;function KX(e,t){var r=ks(e,t);return r?r.version:null}me.clean=YX;function YX(e,t){var r=ks(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}me.SemVer=Se;function Se(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof Se){if(e.loose===t.loose)return e;e=e.version}else if(typeof e!="string")throw new TypeError("Invalid Version: "+e);if(e.length>r_)throw new TypeError("version is longer than "+r_+" characters");if(!(this instanceof Se))return new Se(e,t);Me("SemVer",e,t),this.options=t,this.loose=!!t.loose;var r=e.trim().match(t.loose?He[d_]:He[l_]);if(!r)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Eh||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Eh||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Eh||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var i=+n;if(i>=0&&i<Eh)return i}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}Se.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};Se.prototype.toString=function(){return this.version};Se.prototype.compare=function(e){return Me("SemVer.compare",this.version,this.options,e),e instanceof Se||(e=new Se(e,this.options)),this.compareMain(e)||this.comparePre(e)};Se.prototype.compareMain=function(e){return e instanceof Se||(e=new Se(e,this.options)),wc(this.major,e.major)||wc(this.minor,e.minor)||wc(this.patch,e.patch)};Se.prototype.comparePre=function(e){if(e instanceof Se||(e=new Se(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],n=e.prerelease[t];if(Me("prerelease compare",t,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return wc(r,n)}while(++t)};Se.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this};me.inc=XX;function XX(e,t,r,n){typeof r=="string"&&(n=r,r=void 0);try{return new Se(e,r).inc(t,n).version}catch(i){return null}}me.diff=QX;function QX(e,t){if(m_(e,t))return null;var r=ks(e),n=ks(t),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var o="prerelease"}for(var s in r)if((s==="major"||s==="minor"||s==="patch")&&r[s]!==n[s])return i+s;return o}me.compareIdentifiers=wc;var v1=/^[0-9]+$/;function wc(e,t){var r=v1.test(e),n=v1.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}me.rcompareIdentifiers=JX;function JX(e,t){return wc(t,e)}me.major=ZX;function ZX(e,t){return new Se(e,t).major}me.minor=e5;function e5(e,t){return new Se(e,t).minor}me.patch=t5;function t5(e,t){return new Se(e,t).patch}me.compare=vi;function vi(e,t,r){return new Se(e,r).compare(new Se(t,r))}me.compareLoose=r5;function r5(e,t){return vi(e,t,!0)}me.rcompare=n5;function n5(e,t,r){return vi(t,e,r)}me.sort=i5;function i5(e,t){return e.sort(function(r,n){return me.compare(r,n,t)})}me.rsort=o5;function o5(e,t){return e.sort(function(r,n){return me.rcompare(r,n,t)})}me.gt=Dl;function Dl(e,t,r){return vi(e,t,r)>0}me.lt=Th;function Th(e,t,r){return vi(e,t,r)<0}me.eq=m_;function m_(e,t,r){return vi(e,t,r)===0}me.neq=y1;function y1(e,t,r){return vi(e,t,r)!==0}me.gte=g_;function g_(e,t,r){return vi(e,t,r)>=0}me.lte=v_;function v_(e,t,r){return vi(e,t,r)<=0}me.cmp=Ah;function Ah(e,t,r,n){switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return m_(e,r,n);case"!=":return y1(e,r,n);case">":return Dl(e,r,n);case">=":return g_(e,r,n);case"<":return Th(e,r,n);case"<=":return v_(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}me.Comparator=ln;function ln(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof ln){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof ln))return new ln(e,t);Me("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===Nl?this.value="":this.value=this.operator+this.semver.version,Me("comp",this)}var Nl={};ln.prototype.parse=function(e){var t=this.options.loose?He[p_]:He[h_],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],this.operator==="="&&(this.operator=""),r[2]?this.semver=new Se(r[2],this.options.loose):this.semver=Nl};ln.prototype.toString=function(){return this.value};ln.prototype.test=function(e){return Me("Comparator.test",e,this.options.loose),this.semver===Nl?!0:(typeof e=="string"&&(e=new Se(e,this.options)),Ah(e,this.operator,this.semver,this.options))};ln.prototype.intersects=function(e,t){if(!(e instanceof ln))throw new TypeError("a Comparator is required");(!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1});var r;if(this.operator==="")return r=new st(e.value,t),Ih(this.value,r,t);if(e.operator==="")return r=new st(this.value,t),Ih(e.semver,r,t);var n=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),o=this.semver.version===e.semver.version,s=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),a=Ah(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),c=Ah(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return n||i||o&&s||a||c};me.Range=st;function st(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof st)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new st(e.raw,t);if(e instanceof ln)return new st(e.value,t);if(!(this instanceof st))return new st(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(r){return this.parseRange(r.trim())},this).filter(function(r){return r.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}st.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim(),this.range};st.prototype.toString=function(){return this.range};st.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var r=t?He[m1]:He[h1];e=e.replace(r,m5),Me("hyphen replace",e),e=e.replace(He[Ol],zX),Me("comparator trim",e,He[Ol]),e=e.replace(He[Sh],WX),e=e.replace(He[xh],VX),e=e.split(/\s+/).join(" ");var n=t?He[p_]:He[h_],i=e.split(" ").map(function(o){return a5(o,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter(function(o){return!!o.match(n)})),i=i.map(function(o){return new ln(o,this.options)},this),i};st.prototype.intersects=function(e,t){if(!(e instanceof st))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(n){return e.set.some(function(i){return i.every(function(o){return n.intersects(o,t)})})})})};me.toComparators=s5;function s5(e,t){return new st(e,t).set.map(function(r){return r.map(function(n){return n.value}).join(" ").trim().split(" ")})}function a5(e,t){return Me("comp",e,t),e=l5(e,t),Me("caret",e),e=c5(e,t),Me("tildes",e),e=d5(e,t),Me("xrange",e),e=h5(e,t),Me("stars",e),e}function ar(e){return!e||e.toLowerCase()==="x"||e==="*"}function c5(e,t){return e.trim().split(/\s+/).map(function(r){return u5(r,t)}).join(" ")}function u5(e,t){var r=t.loose?He[f1]:He[l1];return e.replace(r,function(n,i,o,s,a){Me("tilde",e,n,i,o,s,a);var c;return ar(i)?c="":ar(o)?c=">="+i+".0.0 <"+(+i+1)+".0.0":ar(s)?c=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":a?(Me("replaceTilde pr",a),c=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0"):c=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0",Me("tilde return",c),c})}function l5(e,t){return e.trim().split(/\s+/).map(function(r){return f5(r,t)}).join(" ")}function f5(e,t){Me("caret",e,t);var r=t.loose?He[p1]:He[d1];return e.replace(r,function(n,i,o,s,a){Me("caret",e,n,i,o,s,a);var c;return ar(i)?c="":ar(o)?c=">="+i+".0.0 <"+(+i+1)+".0.0":ar(s)?i==="0"?c=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":c=">="+i+"."+o+".0 <"+(+i+1)+".0.0":a?(Me("replaceCaret pr",a),i==="0"?o==="0"?c=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+o+"."+(+s+1):c=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0":c=">="+i+"."+o+"."+s+"-"+a+" <"+(+i+1)+".0.0"):(Me("no pr"),i==="0"?o==="0"?c=">="+i+"."+o+"."+s+" <"+i+"."+o+"."+(+s+1):c=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0":c=">="+i+"."+o+"."+s+" <"+(+i+1)+".0.0"),Me("caret return",c),c})}function d5(e,t){return Me("replaceXRanges",e,t),e.split(/\s+/).map(function(r){return p5(r,t)}).join(" ")}function p5(e,t){e=e.trim();var r=t.loose?He[c1]:He[a1];return e.replace(r,function(n,i,o,s,a,c){Me("xRange",e,n,i,o,s,a,c);var u=ar(o),l=u||ar(s),f=l||ar(a),d=f;return i==="="&&d&&(i=""),u?i===">"||i==="<"?n="<0.0.0":n="*":i&&d?(l&&(s=0),a=0,i===">"?(i=">=",l?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",l?o=+o+1:s=+s+1),n=i+o+"."+s+"."+a):l?n=">="+o+".0.0 <"+(+o+1)+".0.0":f&&(n=">="+o+"."+s+".0 <"+o+"."+(+s+1)+".0"),Me("xRange return",n),n})}function h5(e,t){return Me("replaceStars",e,t),e.trim().replace(He[g1],"")}function m5(e,t,r,n,i,o,s,a,c,u,l,f,d){return ar(r)?t="":ar(n)?t=">="+r+".0.0":ar(i)?t=">="+r+"."+n+".0":t=">="+t,ar(c)?a="":ar(u)?a="<"+(+c+1)+".0.0":ar(l)?a="<"+c+"."+(+u+1)+".0":f?a="<="+c+"."+u+"."+l+"-"+f:a="<="+a,(t+" "+a).trim()}st.prototype.test=function(e){if(!e)return!1;typeof e=="string"&&(e=new Se(e,this.options));for(var t=0;t<this.set.length;t++)if(g5(this.set[t],e,this.options))return!0;return!1};function g5(e,t,r){for(var n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(n=0;n<e.length;n++)if(Me(e[n].semver),e[n].semver!==Nl&&e[n].semver.prerelease.length>0){var i=e[n].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}me.satisfies=Ih;function Ih(e,t,r){try{t=new st(t,r)}catch(n){return!1}return t.test(e)}me.maxSatisfying=v5;function v5(e,t,r){var n=null,i=null;try{var o=new st(t,r)}catch(s){return null}return e.forEach(function(s){o.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new Se(n,r))}),n}me.minSatisfying=y5;function y5(e,t,r){var n=null,i=null;try{var o=new st(t,r)}catch(s){return null}return e.forEach(function(s){o.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new Se(n,r))}),n}me.minVersion=E5;function E5(e,t){e=new st(e,t);var r=new Se("0.0.0");if(e.test(r)||(r=new Se("0.0.0-0"),e.test(r)))return r;r=null;for(var n=0;n<e.set.length;++n){var i=e.set[n];i.forEach(function(o){var s=new Se(o.semver.version);switch(o.operator){case">":s.prerelease.length===0?s.patch++:s.prerelease.push(0),s.raw=s.format();case"":case">=":(!r||Dl(r,s))&&(r=s);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+o.operator)}})}return r&&e.test(r)?r:null}me.validRange=_5;function _5(e,t){try{return new st(e,t).range||"*"}catch(r){return null}}me.ltr=C5;function C5(e,t,r){return y_(e,t,"<",r)}me.gtr=w5;function w5(e,t,r){return y_(e,t,">",r)}me.outside=y_;function y_(e,t,r,n){e=new Se(e,n),t=new st(t,n);var i,o,s,a,c;switch(r){case">":i=Dl,o=v_,s=Th,a=">",c=">=";break;case"<":i=Th,o=g_,s=Dl,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Ih(e,t,n))return!1;for(var u=0;u<t.set.length;++u){var l=t.set[u],f=null,d=null;if(l.forEach(function(p){p.semver===Nl&&(p=new ln(">=0.0.0")),f=f||p,d=d||p,i(p.semver,f.semver,n)?f=p:s(p.semver,d.semver,n)&&(d=p)}),f.operator===a||f.operator===c||(!d.operator||d.operator===a)&&o(e,d.semver))return!1;if(d.operator===c&&s(e,d.semver))return!1}return!0}me.prerelease=S5;function S5(e,t){var r=ks(e,t);return r&&r.prerelease.length?r.prerelease:null}me.intersects=b5;function b5(e,t,r){return e=new st(e,r),t=new st(t,r),e.intersects(t)}me.coerce=x5;function x5(e){if(e instanceof Se)return e;if(typeof e!="string")return null;var t=e.match(He[u1]);return t==null?null:ks(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}});var E_=g(Rh=>{"use strict";Object.defineProperty(Rh,"__esModule",{value:!0});Rh.makePatchingRequire=void 0;var T5=require("path"),A5=_1(),C1=require("module"),I5=Object.keys(process.binding("natives")),w1=C1.prototype.require;function R5(e){var t={};return function(n){var i=w1.apply(this,arguments);if(e[n]){var o=C1._resolveFilename(n,this);if(t.hasOwnProperty(o))return t[o];var s=void 0;if(I5.indexOf(n)<0)try{s=w1.call(this,T5.join(n,"package.json")).version}catch(d){return i}else s=process.version.substring(1);var a=s.indexOf("-");a>=0&&(s=s.substring(0,a));for(var c=i,u=0,l=e[n];u<l.length;u++){var f=l[u];A5.satisfies(s,f.versionSpecifier)&&(c=f.patch(c,o))}return t[o]=c}return i}}Rh.makePatchingRequire=R5});var S1=g((uve,P5)=>{P5.exports={name:"diagnostic-channel",version:"1.0.0",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"tslint -c tslint.json -p tsconfig.json",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^5.3.0"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"~8.0.0",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"4.1.2"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT"}});var Et=g(Sc=>{"use strict";Object.defineProperty(Sc,"__esModule",{value:!0});Sc.channel=Sc.makePatchingRequire=void 0;var O5=E_(),D5=E_();Object.defineProperty(Sc,"makePatchingRequire",{enumerable:!0,get:function(){return D5.makePatchingRequire}});var b1=function(e){return!0},N5=function(){function e(){this.version=S1().version,this.subscribers={},this.contextPreservationFunction=function(t){return t},this.knownPatches={},this.currentlyPublishing=!1}return e.prototype.shouldPublish=function(t){var r=this.subscribers[t];return r?r.some(function(n){var i=n.filter;return!i||i(!1)}):!1},e.prototype.publish=function(t,r){if(!this.currentlyPublishing){var n=this.subscribers[t];if(n){var i={timestamp:Date.now(),data:r};this.currentlyPublishing=!0,n.forEach(function(o){var s=o.listener,a=o.filter;try{a&&a(!0)&&s(i)}catch(c){}}),this.currentlyPublishing=!1}}},e.prototype.subscribe=function(t,r,n){n===void 0&&(n=b1),this.subscribers[t]||(this.subscribers[t]=[]),this.subscribers[t].push({listener:r,filter:n})},e.prototype.unsubscribe=function(t,r,n){n===void 0&&(n=b1);var i=this.subscribers[t];if(i){for(var o=0;o<i.length;++o)if(i[o].listener===r&&i[o].filter===n)return i.splice(o,1),!0}return!1},e.prototype.reset=function(){var t=this;this.subscribers={},this.contextPreservationFunction=function(r){return r},Object.getOwnPropertyNames(this.knownPatches).forEach(function(r){return delete t.knownPatches[r]})},e.prototype.bindToContext=function(t){return this.contextPreservationFunction(t)},e.prototype.addContextPreservation=function(t){var r=this.contextPreservationFunction;this.contextPreservationFunction=function(n){return t(r(n))}},e.prototype.registerMonkeyPatch=function(t,r){this.knownPatches[t]||(this.knownPatches[t]=[]),this.knownPatches[t].push(r)},e.prototype.getPatchesObject=function(){return this.knownPatches},e}();global.diagnosticsSource||(global.diagnosticsSource=new N5,x1=require("module"),x1.prototype.require=O5.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));var x1;Sc.channel=global.diagnosticsSource});var T1=I(()=>{});var A1,I1=I(()=>{A1=typeof globalThis=="object"?globalThis:global});var R1=I(()=>{I1()});var P1=I(()=>{R1()});var Eo,__=I(()=>{Eo="1.0.3"});function L5(e){var t=new Set([e]),r=new Set,n=e.match(O1);if(!n)return function(){return!1};var i={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(i.prerelease!=null)return function(c){return c===e};function o(a){return r.add(a),!1}function s(a){return t.add(a),!0}return function(c){if(t.has(c))return!0;if(r.has(c))return!1;var u=c.match(O1);if(!u)return o(c);var l={major:+u[1],minor:+u[2],patch:+u[3],prerelease:u[4]};return l.prerelease!=null||i.major!==l.major?o(c):i.major===0?i.minor===l.minor&&i.patch<=l.patch?s(c):o(c):i.minor<=l.minor?s(c):o(c)}}var O1,D1,N1=I(()=>{__();O1=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;D1=L5(Eo)});function _o(e,t,r,n){var i;n===void 0&&(n=!1);var o=kl[Ll]=(i=kl[Ll])!==null&&i!==void 0?i:{version:Eo};if(!n&&o[e]){var s=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return r.error(s.stack||s.message),!1}if(o.version!==Eo){var s=new Error("@opentelemetry/api: All API registration versions must match");return r.error(s.stack||s.message),!1}return o[e]=t,r.debug("@opentelemetry/api: Registered a global for "+e+" v"+Eo+"."),!0}function On(e){var t,r,n=(t=kl[Ll])===null||t===void 0?void 0:t.version;if(!(!n||!D1(n)))return(r=kl[Ll])===null||r===void 0?void 0:r[e]}function Co(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+Eo+".");var r=kl[Ll];r&&delete r[e]}var k5,Ll,kl,bc=I(()=>{P1();__();N1();k5=Eo.split(".")[0],Ll=Symbol.for("opentelemetry.js.api."+k5),kl=A1});function Fl(e,t,r){var n=On("diag");if(!!n)return r.unshift(t),n[e].apply(n,r)}var L1,k1=I(()=>{bc();L1=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Fl("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Fl("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Fl("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Fl("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Fl("verbose",this._namespace,t)},e}()});var nt,Ph=I(()=>{(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(nt||(nt={}))});function F1(e,t){e<nt.NONE?e=nt.NONE:e>nt.ALL&&(e=nt.ALL),t=t||{};function r(n,i){var o=t[n];return typeof o=="function"&&e>=i?o.bind(t):function(){}}return{error:r("error",nt.ERROR),warn:r("warn",nt.WARN),info:r("info",nt.INFO),debug:r("debug",nt.DEBUG),verbose:r("verbose",nt.VERBOSE)}}var M1=I(()=>{Ph()});var F5,Mr,xc=I(()=>{k1();M1();Ph();bc();F5="diag",Mr=function(){function e(){function t(n){return function(){var i=On("diag");if(!!i)return i[n].apply(i,arguments)}}var r=this;r.setLogger=function(n,i){var o,s;if(i===void 0&&(i=nt.INFO),n===r){var a=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((o=a.stack)!==null&&o!==void 0?o:a.message),!1}var c=On("diag"),u=F1(i,n);if(c){var l=(s=new Error().stack)!==null&&s!==void 0?s:"<failed to generate stacktrace>";c.warn("Current logger will be overwritten from "+l),u.warn("Current logger will overwrite one already registered from "+l)}return _o("diag",u,r,!0)},r.disable=function(){Co(F5,r)},r.createComponentLogger=function(n){return new L1(n)},r.verbose=t("verbose"),r.debug=t("debug"),r.info=t("info"),r.warn=t("warn"),r.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}()});var q1,$1=I(()=>{q1=function(){function e(t){this._entries=t?new Map(t):new Map}return e.prototype.getEntry=function(t){var r=this._entries.get(t);if(!!r)return Object.assign({},r)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(t){var r=t[0],n=t[1];return[r,n]})},e.prototype.setEntry=function(t,r){var n=new e(this._entries);return n._entries.set(t,r),n},e.prototype.removeEntry=function(t){var r=new e(this._entries);return r._entries.delete(t),r},e.prototype.removeEntries=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var n=new e(this._entries),i=0,o=t;i<o.length;i++){var s=o[i];n._entries.delete(s)}return n},e.prototype.clear=function(){return new e},e}()});var j1,U1=I(()=>{j1=Symbol("BaggageEntryMetadata")});function H1(e){return e===void 0&&(e={}),new q1(new Map(Object.entries(e)))}function Oh(e){return typeof e!="string"&&(M5.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:j1,toString:function(){return e}}}var M5,C_=I(()=>{xc();$1();U1();M5=Mr.instance()});var B1=I(()=>{});var G1=I(()=>{});var w_,q5,W1=I(()=>{w_=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],q5=function(){function e(){function t(n){return function(){var i=arguments;if(console){var o=console[n];if(typeof o!="function"&&(o=console.log),typeof o=="function")return o.apply(console,i)}}}for(var r=0;r<w_.length;r++)this[w_[r].n]=t(w_[r].c)}return e}()});var V1=I(()=>{W1();Ph()});var S_,b_,x_=I(()=>{S_={get:function(e,t){if(e!=null)return e[t]},keys:function(e){return e==null?[]:Object.keys(e)}},b_={set:function(e,t,r){e!=null&&(e[t]=r)}}});var z1=I(()=>{});var K1=I(()=>{});function yi(e){return Symbol.for(e)}var $5,T_,Ml=I(()=>{$5=function(){function e(t){var r=this;r._currentContext=t?new Map(t):new Map,r.getValue=function(n){return r._currentContext.get(n)},r.setValue=function(n,i){var o=new e(r._currentContext);return o._currentContext.set(n,i),o},r.deleteValue=function(n){var i=new e(r._currentContext);return i._currentContext.delete(n),i}}return e}(),T_=new $5});var j5,Y1,X1=I(()=>{Ml();j5=function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e},Y1=function(){function e(){}return e.prototype.active=function(){return T_},e.prototype.with=function(t,r,n){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return r.call.apply(r,j5([n],i))},e.prototype.bind=function(t,r){return r},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}()});var U5,A_,H5,Dh,I_=I(()=>{X1();bc();xc();U5=function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e},A_="context",H5=new Y1,Dh=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return _o(A_,t,Mr.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,r,n){for(var i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return(i=this._getContextManager()).with.apply(i,U5([t,r,n],o))},e.prototype.bind=function(t,r){return this._getContextManager().bind(t,r)},e.prototype._getContextManager=function(){return On(A_)||H5},e.prototype.disable=function(){this._getContextManager().disable(),Co(A_,Mr.instance())},e}()});var qr,R_=I(()=>{(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(qr||(qr={}))});var ql,$l,Fs,Nh=I(()=>{R_();ql="0000000000000000",$l="00000000000000000000000000000000",Fs={traceId:$l,spanId:ql,traceFlags:qr.NONE}});var wo,Lh=I(()=>{Nh();wo=function(){function e(t){t===void 0&&(t=Fs),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,r){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,r){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,r){},e}()});function O_(e){return e.getValue(P_)||void 0}function jl(e,t){return e.setValue(P_,t)}function Q1(e){return e.deleteValue(P_)}function J1(e,t){return jl(e,new wo(t))}function kh(e){var t;return(t=O_(e))===null||t===void 0?void 0:t.spanContext()}var P_,D_=I(()=>{Ml();Lh();P_=yi("OpenTelemetry Context Key SPAN")});function Ul(e){return B5.test(e)&&e!==$l}function N_(e){return G5.test(e)&&e!==ql}function zn(e){return Ul(e.traceId)&&N_(e.spanId)}function Z1(e){return new wo(e)}var B5,G5,Fh=I(()=>{Nh();Lh();B5=/^([0-9a-f]{32})$/i,G5=/^[0-9a-f]{16}$/i});function W5(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var eF,Mh,L_=I(()=>{I_();D_();Lh();Fh();eF=Dh.getInstance(),Mh=function(){function e(){}return e.prototype.startSpan=function(t,r,n){var i=Boolean(r==null?void 0:r.root);if(i)return new wo;var o=n&&kh(n);return W5(o)&&zn(o)?new wo(o):new wo},e.prototype.startActiveSpan=function(t,r,n,i){var o,s,a;if(!(arguments.length<2)){arguments.length===2?a=r:arguments.length===3?(o=r,a=n):(o=r,s=n,a=i);var c=s!=null?s:eF.active(),u=this.startSpan(t,o,c),l=jl(c,u);return eF.with(l,a,void 0,u)}},e}()});var V5,k_,F_=I(()=>{L_();V5=new Mh,k_=function(){function e(t,r,n){this._provider=t,this.name=r,this.version=n}return e.prototype.startSpan=function(t,r,n){return this._getTracer().startSpan(t,r,n)},e.prototype.startActiveSpan=function(t,r,n,i){var o=this._getTracer();return Reflect.apply(o.startActiveSpan,o,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version);return t?(this._delegate=t,this._delegate):V5},e}()});var tF,rF=I(()=>{L_();tF=function(){function e(){}return e.prototype.getTracer=function(t,r){return new Mh},e}()});var z5,qh,M_=I(()=>{F_();rF();z5=new tF,qh=function(){function e(){}return e.prototype.getTracer=function(t,r){var n;return(n=this.getDelegateTracer(t,r))!==null&&n!==void 0?n:new k_(this,t,r)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:z5},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,r){var n;return(n=this._delegate)===null||n===void 0?void 0:n.getTracer(t,r)},e}()});var nF=I(()=>{});var $r,iF=I(()=>{(function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})($r||($r={}))});var oF=I(()=>{});var Hl,sF=I(()=>{(function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"})(Hl||(Hl={}))});var aF=I(()=>{});var cF=I(()=>{});var Bl,uF=I(()=>{(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(Bl||(Bl={}))});var lF=I(()=>{});var fF=I(()=>{});var dF=I(()=>{});var pF=I(()=>{});var q_,hF,mF=I(()=>{bc();M_();Fh();D_();xc();q_="trace",hF=function(){function e(){this._proxyTracerProvider=new qh,this.wrapSpanContext=Z1,this.isSpanContextValid=zn,this.deleteSpan=Q1,this.getSpan=O_,this.getSpanContext=kh,this.setSpan=jl,this.setSpanContext=J1}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var r=_o(q_,this._proxyTracerProvider,Mr.instance());return r&&this._proxyTracerProvider.setDelegate(t),r},e.prototype.getTracerProvider=function(){return On(q_)||this._proxyTracerProvider},e.prototype.getTracer=function(t,r){return this.getTracerProvider().getTracer(t,r)},e.prototype.disable=function(){Co(q_,Mr.instance()),this._proxyTracerProvider=new qh},e}()});var gF,vF=I(()=>{gF=function(){function e(){}return e.prototype.inject=function(t,r){},e.prototype.extract=function(t,r){return t},e.prototype.fields=function(){return[]},e}()});function yF(e){return e.getValue($_)||void 0}function EF(e,t){return e.setValue($_,t)}function _F(e){return e.deleteValue($_)}var $_,CF=I(()=>{Ml();$_=yi("OpenTelemetry Baggage Key")});var j_,K5,wF,SF=I(()=>{bc();vF();x_();CF();C_();xc();j_="propagation",K5=new gF,wF=function(){function e(){this.createBaggage=H1,this.getBaggage=yF,this.setBaggage=EF,this.deleteBaggage=_F}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(t){return _o(j_,t,Mr.instance())},e.prototype.inject=function(t,r,n){return n===void 0&&(n=b_),this._getGlobalPropagator().inject(t,r,n)},e.prototype.extract=function(t,r,n){return n===void 0&&(n=S_),this._getGlobalPropagator().extract(t,r,n)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){Co(j_,Mr.instance())},e.prototype._getGlobalPropagator=function(){return On(j_)||K5},e}()});var Gl={};ua(Gl,{DiagConsoleLogger:()=>q5,DiagLogLevel:()=>nt,INVALID_SPANID:()=>ql,INVALID_SPAN_CONTEXT:()=>Fs,INVALID_TRACEID:()=>$l,ProxyTracer:()=>k_,ProxyTracerProvider:()=>qh,ROOT_CONTEXT:()=>T_,SamplingDecision:()=>$r,SpanKind:()=>Hl,SpanStatusCode:()=>Bl,TraceFlags:()=>qr,baggageEntryMetadataFromString:()=>Oh,context:()=>_r,createContextKey:()=>yi,default:()=>Y5,defaultTextMapGetter:()=>S_,defaultTextMapSetter:()=>b_,diag:()=>Oe,isSpanContextValid:()=>zn,isValidSpanId:()=>N_,isValidTraceId:()=>Ul,propagation:()=>So,trace:()=>Qt});var _r,Qt,So,Oe,Y5,Ke=I(()=>{T1();C_();B1();G1();V1();x_();z1();K1();F_();M_();nF();iF();oF();sF();aF();cF();uF();R_();lF();fF();dF();Fh();Nh();Ml();pF();I_();mF();SF();xc();_r=Dh.getInstance(),Qt=hF.getInstance(),So=wF.getInstance(),Oe=Mr.instance(),Y5={trace:Qt,context:_r,propagation:So,diag:Oe}});function Wl(e){return e.setValue(U_,!0)}function X5(e){return e.deleteValue(U_)}function Ms(e){return e.getValue(U_)===!0}var U_,$h=I(()=>{Ke();U_=yi("OpenTelemetry SDK Context Key SUPPRESS_TRACING")});var bF,H_,Vl,jh,xF,TF,AF,B_=I(()=>{bF="=",H_=";",Vl=",",jh="baggage",xF=180,TF=4096,AF=8192});var V_={};ua(V_,{getKeyPairs:()=>W_,parseKeyPairsIntoRecord:()=>Q5,parsePairKeyValue:()=>Uh,serializeKeyPairs:()=>G_});var G_,W_,Uh,Q5,z_=I(()=>{Ke();B_();G_=function(e){return e.reduce(function(t,r){var n=""+t+(t!==""?Vl:"")+r;return n.length>AF?t:n},"")},W_=function(e){return e.getAllEntries().map(function(t){var r=t[0],n=t[1];return encodeURIComponent(r)+"="+encodeURIComponent(n.value)})},Uh=function(e){var t=e.split(H_);if(!(t.length<=0)){var r=t.shift();if(!!r){var n=r.split(bF);if(n.length===2){var i=decodeURIComponent(n[0].trim()),o=decodeURIComponent(n[1].trim()),s;return t.length>0&&(s=Oh(t.join(H_))),{key:i,value:o,metadata:s}}}}},Q5=function(e){return typeof e!="string"||e.length===0?{}:e.split(Vl).map(function(t){return Uh(t)}).filter(function(t){return t!==void 0&&t.value.length>0}).reduce(function(t,r){return t[r.key]=r.value,t},{})}});var K_,IF=I(()=>{Ke();$h();B_();z_();K_=function(){function e(){}return e.prototype.inject=function(t,r,n){var i=So.getBaggage(t);if(!(!i||Ms(t))){var o=W_(i).filter(function(a){return a.length<=TF}).slice(0,xF),s=G_(o);s.length>0&&n.set(r,jh,s)}},e.prototype.extract=function(t,r,n){var i=n.get(r,jh);if(!i)return t;var o={};if(i.length===0)return t;var s=i.split(Vl);return s.forEach(function(a){var c=Uh(a);if(c){var u={value:c.value};c.metadata&&(u.metadata=c.metadata),o[c.key]=u}}),Object.entries(o).length===0?t:So.setBaggage(t,So.createBaggage(o))},e.prototype.fields=function(){return[jh]},e}()});function Y_(e){var t={};if(e==null||typeof e!="object")return t;for(var r=0,n=Object.entries(e);r<n.length;r++){var i=n[r],o=i[0],s=i[1];Hh(s)&&(Array.isArray(s)?t[o]=s.slice():t[o]=s)}return t}function Hh(e){return e==null?!0:Array.isArray(e)?J5(e):RF(e)}function J5(e){for(var t,r=0,n=e;r<n.length;r++){var i=n[r];if(i!=null){if(!t){if(RF(i)){t=typeof i;continue}return!1}if(typeof i!==t)return!1}}return!0}function RF(e){switch(typeof e){case"number":return!0;case"boolean":return!0;case"string":return!0}return!1}var PF=I(()=>{});function X_(){return function(e){Oe.error(Z5(e))}}function Z5(e){return typeof e=="string"?e:JSON.stringify(e7(e))}function e7(e){for(var t={},r=e;r!==null;)Object.getOwnPropertyNames(r).forEach(function(n){if(!t[n]){var i=r[n];i&&(t[n]=String(i))}}),r=Object.getPrototypeOf(r);return t}var Q_=I(()=>{Ke()});function t7(e){OF=e}var OF,Ei,J_=I(()=>{Q_();OF=X_();Ei=function(e){try{OF(e)}catch(t){}}});var jr,Z_=I(()=>{(function(e){e.AlwaysOff="always_off",e.AlwaysOn="always_on",e.ParentBasedAlwaysOff="parentbased_always_off",e.ParentBasedAlwaysOn="parentbased_always_on",e.ParentBasedTraceIdRatio="parentbased_traceidratio",e.TraceIdRatio="traceidratio"})(jr||(jr={}))});function i7(e){return n7.indexOf(e)>-1}function s7(e){return o7.indexOf(e)>-1}function a7(e,t,r,n,i){if(n===void 0&&(n=-1/0),i===void 0&&(i=1/0),typeof r[e]!="undefined"){var o=Number(r[e]);isNaN(o)||(o<n?t[e]=n:o>i?t[e]=i:t[e]=o)}}function c7(e,t,r,n){n===void 0&&(n=r7);var i=r[e];typeof i=="string"&&(t[e]=i.split(n).map(function(o){return o.trim()}))}function l7(e,t,r){var n=r[e];if(typeof n=="string"){var i=u7[n.toUpperCase()];i!=null&&(t[e]=i)}}function eC(e){var t={};for(var r in Bh){var n=r;switch(n){case"OTEL_LOG_LEVEL":l7(n,t,e);break;default:if(i7(n))a7(n,t,e);else if(s7(n))c7(n,t,e);else{var i=e[n];typeof i!="undefined"&&i!==null&&(t[n]=String(i))}}}return t}var r7,n7,o7,Bh,u7,tC=I(()=>{Ke();Z_();r7=",",n7=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT"];o7=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];Bh={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:nt.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"none",OTEL_TRACES_SAMPLER:jr.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:""};u7={ALL:nt.ALL,VERBOSE:nt.VERBOSE,DEBUG:nt.DEBUG,INFO:nt.INFO,WARN:nt.WARN,ERROR:nt.ERROR,NONE:nt.NONE}});function Cr(){var e=eC(process.env);return Object.assign({HOSTNAME:DF.hostname()},Bh,e)}var DF,NF=I(()=>{DF=M(require("os"));tC()});function f7(e){for(var t=e.length,r="",n=0;n<t;n+=2){var i=e.substring(n,n+2),o=parseInt(i,16);r+=String.fromCharCode(o)}return Buffer.from(r,"ascii").toString("base64")}var LF=I(()=>{});function FF(e){return function(){for(var r=0;r<e/4;r++)Gh.writeUInt32BE(Math.random()*Math.pow(2,32)>>>0,r*4);for(var r=0;r<e&&!(Gh[r]>0);r++)r===e-1&&(Gh[e-1]=1);return Gh.toString("hex",0,e)}}var d7,kF,rC,Gh,MF=I(()=>{d7=8,kF=16,rC=function(){function e(){this.generateTraceId=FF(kF),this.generateSpanId=FF(d7)}return e}(),Gh=Buffer.allocUnsafe(kF)});var qF,zl,$F=I(()=>{qF=M(require("perf_hooks")),zl=qF.performance});var nC,Wh=I(()=>{nC="0.23.0"});var _i,iC,oC,sC,aC,cC,uC,lC,fC,dC,pC,jF=I(()=>{_i={DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_METHOD:"rpc.jsonrpc.method",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message"};(function(e){e.OTHER_SQL="other_sql",e.MSSQL="mssql",e.MYSQL="mysql",e.ORACLE="oracle",e.DB2="db2",e.POSTGRESQL="postgresql",e.REDSHIFT="redshift",e.HIVE="hive",e.CLOUDSCAPE="cloudscape",e.HSQLDB="hsqldb",e.PROGRESS="progress",e.MAXDB="maxdb",e.HANADB="hanadb",e.INGRES="ingres",e.FIRSTSQL="firstsql",e.EDB="edb",e.CACHE="cache",e.ADABAS="adabas",e.FIREBIRD="firebird",e.DERBY="derby",e.FILEMAKER="filemaker",e.INFORMIX="informix",e.INSTANTDB="instantdb",e.INTERBASE="interbase",e.MARIADB="mariadb",e.NETEZZA="netezza",e.PERVASIVE="pervasive",e.POINTBASE="pointbase",e.SQLITE="sqlite",e.SYBASE="sybase",e.TERADATA="teradata",e.VERTICA="vertica",e.H2="h2",e.COLDFUSION="coldfusion",e.CASSANDRA="cassandra",e.HBASE="hbase",e.MONGODB="mongodb",e.REDIS="redis",e.COUCHBASE="couchbase",e.COUCHDB="couchdb",e.COSMOSDB="cosmosdb",e.DYNAMODB="dynamodb",e.NEO4J="neo4j",e.GEODE="geode",e.ELASTICSEARCH="elasticsearch",e.MEMCACHED="memcached",e.COCKROACHDB="cockroachdb"})(iC||(iC={}));(function(e){e.ALL="all",e.EACH_QUORUM="each_quorum",e.QUORUM="quorum",e.LOCAL_QUORUM="local_quorum",e.ONE="one",e.TWO="two",e.THREE="three",e.LOCAL_ONE="local_one",e.ANY="any",e.SERIAL="serial",e.LOCAL_SERIAL="local_serial"})(oC||(oC={}));(function(e){e.DATASOURCE="datasource",e.HTTP="http",e.PUBSUB="pubsub",e.TIMER="timer",e.OTHER="other"})(sC||(sC={}));(function(e){e.INSERT="insert",e.EDIT="edit",e.DELETE="delete"})(aC||(aC={}));(function(e){e.AWS="aws",e.AZURE="azure",e.GCP="gcp"})(cC||(cC={}));(function(e){e.IP_TCP="ip_tcp",e.IP_UDP="ip_udp",e.IP="ip",e.UNIX="unix",e.PIPE="pipe",e.INPROC="inproc",e.OTHER="other"})(uC||(uC={}));(function(e){e.HTTP_1_0="1.0",e.HTTP_1_1="1.1",e.HTTP_2_0="2.0",e.SPDY="SPDY",e.QUIC="QUIC"})(lC||(lC={}));(function(e){e.QUEUE="queue",e.TOPIC="topic"})(fC||(fC={}));(function(e){e.RECEIVE="receive",e.PROCESS="process"})(dC||(dC={}));(function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED"})(pC||(pC={}))});var UF=I(()=>{jF()});var Qe,hC,mC,gC,vC,yC,Kl,HF=I(()=>{Qe={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"};(function(e){e.AWS="aws",e.AZURE="azure",e.GCP="gcp"})(hC||(hC={}));(function(e){e.AWS_EC2="aws_ec2",e.AWS_ECS="aws_ecs",e.AWS_EKS="aws_eks",e.AWS_LAMBDA="aws_lambda",e.AWS_ELASTIC_BEANSTALK="aws_elastic_beanstalk",e.AZURE_VM="azure_vm",e.AZURE_CONTAINER_INSTANCES="azure_container_instances",e.AZURE_AKS="azure_aks",e.AZURE_FUNCTIONS="azure_functions",e.AZURE_APP_SERVICE="azure_app_service",e.GCP_COMPUTE_ENGINE="gcp_compute_engine",e.GCP_CLOUD_RUN="gcp_cloud_run",e.GCP_KUBERNETES_ENGINE="gcp_kubernetes_engine",e.GCP_CLOUD_FUNCTIONS="gcp_cloud_functions",e.GCP_APP_ENGINE="gcp_app_engine"})(mC||(mC={}));(function(e){e.EC2="ec2",e.FARGATE="fargate"})(gC||(gC={}));(function(e){e.AMD64="amd64",e.ARM32="arm32",e.ARM64="arm64",e.IA64="ia64",e.PPC32="ppc32",e.PPC64="ppc64",e.X86="x86"})(vC||(vC={}));(function(e){e.WINDOWS="windows",e.LINUX="linux",e.DARWIN="darwin",e.FREEBSD="freebsd",e.NETBSD="netbsd",e.OPENBSD="openbsd",e.DRAGONFLYBSD="dragonflybsd",e.HPUX="hpux",e.AIX="aix",e.SOLARIS="solaris",e.Z_OS="z_os"})(yC||(yC={}));(function(e){e.CPP="cpp",e.DOTNET="dotnet",e.ERLANG="erlang",e.GO="go",e.JAVA="java",e.NODEJS="nodejs",e.PHP="php",e.PYTHON="python",e.RUBY="ruby",e.WEBJS="webjs"})(Kl||(Kl={}))});var BF=I(()=>{HF()});var EC={};ua(EC,{AwsEcsLaunchtypeValues:()=>gC,CloudPlatformValues:()=>mC,CloudProviderValues:()=>hC,DbCassandraConsistencyLevelValues:()=>oC,DbSystemValues:()=>iC,FaasDocumentOperationValues:()=>aC,FaasInvokedProviderValues:()=>cC,FaasTriggerValues:()=>sC,HostArchValues:()=>vC,HttpFlavorValues:()=>lC,MessagingDestinationKindValues:()=>fC,MessagingOperationValues:()=>dC,NetTransportValues:()=>uC,OsTypeValues:()=>yC,ResourceAttributes:()=>Qe,RpcGrpcStatusCodeValues:()=>pC,SemanticAttributes:()=>_i,TelemetrySdkLanguageValues:()=>Kl});var bo=I(()=>{UF();BF()});var Tc,Yl,GF=I(()=>{Wh();bo();Yl=(Tc={},Tc[Qe.TELEMETRY_SDK_NAME]="opentelemetry",Tc[Qe.PROCESS_RUNTIME_NAME]="node",Tc[Qe.TELEMETRY_SDK_LANGUAGE]=Kl.NODEJS,Tc[Qe.TELEMETRY_SDK_VERSION]=nC,Tc)});function _C(e){e.unref()}var WF=I(()=>{});var VF=I(()=>{NF();LF();MF();$F();GF();WF()});var CC=I(()=>{VF()});function Vh(e){var t=e/1e3,r=Math.trunc(t),n=Number((t-r).toFixed(wC))*Xl;return[r,n]}function zF(){var e=zl.timeOrigin;if(typeof e!="number"){var t=zl;e=t.timing&&t.timing.fetchStart}return e}function qs(e){var t=Vh(zF()),r=Vh(typeof e=="number"?e:zl.now()),n=t[0]+r[0],i=t[1]+r[1];return i>Xl&&(i-=Xl,n+=1),[n,i]}function Ql(e){if(bC(e))return e;if(typeof e=="number")return e<zF()?qs(e):Vh(e);if(e instanceof Date)return Vh(e.getTime());throw TypeError("Invalid input type")}function SC(e,t){var r=t[0]-e[0],n=t[1]-e[1];return n<0&&(r-=1,n+=Xl),[r,n]}function p7(e){var t=wC,r=""+"0".repeat(t)+e[1]+"Z",n=r.substr(r.length-t-1),i=new Date(e[0]*1e3).toISOString();return i.replace("000Z",n)}function h7(e){return e[0]*Xl+e[1]}function m7(e){return Math.round(e[0]*1e3+e[1]/1e6)}function zh(e){return Math.round(e[0]*1e6+e[1]/1e3)}function bC(e){return Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number"}function xC(e){return bC(e)||typeof e=="number"||e instanceof Date}var wC,Xl,KF=I(()=>{CC();wC=9,Xl=Math.pow(10,wC)});var YF=I(()=>{});var fn,XF=I(()=>{(function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAILED=1]="FAILED"})(fn||(fn={}))});var TC,QF=I(()=>{Ke();TC=function(){function e(t){t===void 0&&(t={});var r;this._propagators=(r=t.propagators)!==null&&r!==void 0?r:[],this._fields=Array.from(new Set(this._propagators.map(function(n){return typeof n.fields=="function"?n.fields():[]}).reduce(function(n,i){return n.concat(i)},[])))}return e.prototype.inject=function(t,r,n){for(var i=0,o=this._propagators;i<o.length;i++){var s=o[i];try{s.inject(t,r,n)}catch(a){Oe.warn("Failed to inject with "+s.constructor.name+". Err: "+a.message)}}},e.prototype.extract=function(t,r,n){return this._propagators.reduce(function(i,o){try{return o.extract(i,r,n)}catch(s){Oe.warn("Failed to inject with "+o.constructor.name+". Err: "+s.message)}return i},t)},e.prototype.fields=function(){return this._fields.slice()},e}()});function JF(e){return y7.test(e)}function ZF(e){return E7.test(e)&&!_7.test(e)}var AC,g7,v7,y7,E7,_7,eM=I(()=>{AC="[_0-9a-z-*/]",g7="[a-z]"+AC+"{0,255}",v7="[a-z0-9]"+AC+"{0,240}@[a-z]"+AC+"{0,13}",y7=new RegExp("^(?:"+g7+"|"+v7+")$"),E7=/^[ -~]{0,255}[!-~]$/,_7=/,|=/});var tM,C7,rM,nM,IC,RC=I(()=>{eM();tM=32,C7=512,rM=",",nM="=",IC=function(){function e(t){this._internalState=new Map,t&&this._parse(t)}return e.prototype.set=function(t,r){var n=this._clone();return n._internalState.has(t)&&n._internalState.delete(t),n._internalState.set(t,r),n},e.prototype.unset=function(t){var r=this._clone();return r._internalState.delete(t),r},e.prototype.get=function(t){return this._internalState.get(t)},e.prototype.serialize=function(){var t=this;return this._keys().reduce(function(r,n){return r.push(n+nM+t.get(n)),r},[]).join(rM)},e.prototype._parse=function(t){t.length>C7||(this._internalState=t.split(rM).reverse().reduce(function(r,n){var i=n.trim(),o=i.indexOf(nM);if(o!==-1){var s=i.slice(0,o),a=i.slice(o+1,n.length);JF(s)&&ZF(a)&&r.set(s,a)}return r},new Map),this._internalState.size>tM&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,tM))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e}()});function iM(e){var t=A7.exec(e);return!t||t[1]==="00"&&t[5]?null:{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}}var Kh,Yh,w7,S7,b7,x7,T7,A7,PC,oM=I(()=>{Ke();$h();RC();Kh="traceparent",Yh="tracestate",w7="00",S7="(?!ff)[\\da-f]{2}",b7="(?![0]{32})[\\da-f]{32}",x7="(?![0]{16})[\\da-f]{16}",T7="[\\da-f]{2}",A7=new RegExp("^\\s?("+S7+")-("+b7+")-("+x7+")-("+T7+")(-.*)?\\s?$");PC=function(){function e(){}return e.prototype.inject=function(t,r,n){var i=Qt.getSpanContext(t);if(!(!i||Ms(t)||!zn(i))){var o=w7+"-"+i.traceId+"-"+i.spanId+"-0"+Number(i.traceFlags||qr.NONE).toString(16);n.set(r,Kh,o),i.traceState&&n.set(r,Yh,i.traceState.serialize())}},e.prototype.extract=function(t,r,n){var i=n.get(r,Kh);if(!i)return t;var o=Array.isArray(i)?i[0]:i;if(typeof o!="string")return t;var s=iM(o);if(!s)return t;s.isRemote=!0;var a=n.get(r,Yh);if(a){var c=Array.isArray(a)?a.join(","):a;s.traceState=new IC(typeof c=="string"?c:void 0)}return Qt.setSpanContext(t,s)},e.prototype.fields=function(){return[Kh,Yh]},e}()});var sM=I(()=>{});function I7(e,t){return e.setValue(OC,t)}function R7(e){return e.deleteValue(OC)}function P7(e){return e.getValue(OC)}var OC,DC,aM=I(()=>{Ke();OC=yi("OpenTelemetry SDK Context Key RPC_METADATA");(function(e){e.HTTP="http"})(DC||(DC={}))});var $s,NC=I(()=>{Ke();$s=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:$r.NOT_RECORD}},e.prototype.toString=function(){return"AlwaysOffSampler"},e}()});var Ci,LC=I(()=>{Ke();Ci=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:$r.RECORD_AND_SAMPLED}},e.prototype.toString=function(){return"AlwaysOnSampler"},e}()});var Jl,cM=I(()=>{Ke();J_();NC();LC();Jl=function(){function e(t){var r,n,i,o;this._root=t.root,this._root||(Ei(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new Ci),this._remoteParentSampled=(r=t.remoteParentSampled)!==null&&r!==void 0?r:new Ci,this._remoteParentNotSampled=(n=t.remoteParentNotSampled)!==null&&n!==void 0?n:new $s,this._localParentSampled=(i=t.localParentSampled)!==null&&i!==void 0?i:new Ci,this._localParentNotSampled=(o=t.localParentNotSampled)!==null&&o!==void 0?o:new $s}return e.prototype.shouldSample=function(t,r,n,i,o,s){var a=Qt.getSpanContext(t);return!a||!zn(a)?this._root.shouldSample(t,r,n,i,o,s):a.isRemote?a.traceFlags&qr.SAMPLED?this._remoteParentSampled.shouldSample(t,r,n,i,o,s):this._remoteParentNotSampled.shouldSample(t,r,n,i,o,s):a.traceFlags&qr.SAMPLED?this._localParentSampled.shouldSample(t,r,n,i,o,s):this._localParentNotSampled.shouldSample(t,r,n,i,o,s)},e.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},e}()});var Xh,uM=I(()=>{Ke();Xh=function(){function e(t){t===void 0&&(t=0),this._ratio=t,this._ratio=this._normalize(t),this._upperBound=Math.floor(this._ratio*4294967295)}return e.prototype.shouldSample=function(t,r){return{decision:Ul(r)&&this._accumulate(r)<this._upperBound?$r.RECORD_AND_SAMPLED:$r.NOT_RECORD}},e.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},e.prototype._normalize=function(t){return typeof t!="number"||isNaN(t)?0:t>=1?1:t<=0?0:t},e.prototype._accumulate=function(t){for(var r=0,n=0;n<t.length/8;n++){var i=n*8,o=parseInt(t.slice(i,i+8),16);r=(r^o)>>>0}return r},e}()});function lM(e,t){return typeof t=="string"?e===t:t.test(e)}function O7(e,t){if(!t)return!1;for(var r=0,n=t;r<n.length;r++){var i=n[r];if(lM(e,i))return!0}return!1}var fM=I(()=>{});function D7(e){return typeof e=="function"&&typeof e.__original=="function"&&typeof e.__unwrap=="function"&&e.__wrapped===!0}var dM=I(()=>{});var pM={};ua(pM,{AlwaysOffSampler:()=>$s,AlwaysOnSampler:()=>Ci,CompositePropagator:()=>TC,DEFAULT_ENVIRONMENT:()=>Bh,ExportResultCode:()=>fn,HttpBaggagePropagator:()=>K_,HttpTraceContextPropagator:()=>PC,ParentBasedSampler:()=>Jl,RPCType:()=>DC,RandomIdGenerator:()=>rC,SDK_INFO:()=>Yl,TRACE_PARENT_HEADER:()=>Kh,TRACE_STATE_HEADER:()=>Yh,TraceIdRatioBasedSampler:()=>Xh,TraceState:()=>IC,TracesSamplerValues:()=>jr,VERSION:()=>nC,baggageUtils:()=>V_,deleteRPCMetadata:()=>R7,getEnv:()=>Cr,getRPCMetadata:()=>P7,globalErrorHandler:()=>Ei,hexToBase64:()=>f7,hrTime:()=>qs,hrTimeDuration:()=>SC,hrTimeToMicroseconds:()=>zh,hrTimeToMilliseconds:()=>m7,hrTimeToNanoseconds:()=>h7,hrTimeToTimeStamp:()=>p7,isAttributeValue:()=>Hh,isTimeInput:()=>xC,isTimeInputHrTime:()=>bC,isTracingSuppressed:()=>Ms,isUrlIgnored:()=>O7,isWrapped:()=>D7,loggingErrorHandler:()=>X_,otperformance:()=>zl,parseEnvironment:()=>eC,parseTraceParent:()=>iM,sanitizeAttributes:()=>Y_,setGlobalErrorHandler:()=>t7,setRPCMetadata:()=>I7,suppressTracing:()=>Wl,timeInputToHrTime:()=>Ql,unrefTimer:()=>_C,unsuppressTracing:()=>X5,urlMatches:()=>lM});var Ur=I(()=>{IF();PF();J_();Q_();KF();YF();XF();Wh();z_();CC();QF();oM();sM();aM();NC();LC();cM();uM();$h();RC();tC();Z_();fM();dM();Wh()});var hM,mM=I(()=>{hM="exception"});var kC,FC=I(()=>{Ke();Ur();bo();mM();kC=function(){function e(t,r,n,i,o,s,a,c){a===void 0&&(a=[]),c===void 0&&(c=qs()),this.attributes={},this.links=[],this.events=[],this.status={code:Bl.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=n,this._spanContext=i,this.parentSpanId=s,this.kind=o,this.links=a,this.startTime=Ql(c),this.resource=t.resource,this.instrumentationLibrary=t.instrumentationLibrary,this._spanLimits=t.getSpanLimits(),this._spanProcessor=t.getActiveSpanProcessor(),this._spanProcessor.onStart(this,r)}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,r){return r==null||this._isSpanEnded()?this:t.length===0?(Oe.warn("Invalid attribute key: "+t),this):Hh(r)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,t)?this:(this.attributes[t]=r,this):(Oe.warn("Invalid attribute value set for key: "+t),this)},e.prototype.setAttributes=function(t){for(var r=0,n=Object.entries(t);r<n.length;r++){var i=n[r],o=i[0],s=i[1];this.setAttribute(o,s)}return this},e.prototype.addEvent=function(t,r,n){return this._isSpanEnded()?this:(this.events.length>=this._spanLimits.eventCountLimit&&(Oe.warn("Dropping extra events."),this.events.shift()),xC(r)&&(typeof n=="undefined"&&(n=r),r=void 0),typeof n=="undefined"&&(n=qs()),this.events.push({name:t,attributes:r,time:Ql(n)}),this)},e.prototype.setStatus=function(t){return this._isSpanEnded()?this:(this.status=t,this)},e.prototype.updateName=function(t){return this._isSpanEnded()?this:(this.name=t,this)},e.prototype.end=function(t){if(t===void 0&&(t=qs()),this._isSpanEnded()){Oe.error("You can only call end() on a span once.");return}this._ended=!0,this.endTime=Ql(t),this._duration=SC(this.startTime,this.endTime),this._duration[0]<0&&Oe.warn("Inconsistent start and end time, startTime > endTime",this.startTime,this.endTime),this._spanProcessor.onEnd(this)},e.prototype.isRecording=function(){return this._ended===!1},e.prototype.recordException=function(t,r){r===void 0&&(r=qs());var n={};typeof t=="string"?n[_i.EXCEPTION_MESSAGE]=t:t&&(t.code?n[_i.EXCEPTION_TYPE]=t.code.toString():t.name&&(n[_i.EXCEPTION_TYPE]=t.name),t.message&&(n[_i.EXCEPTION_MESSAGE]=t.message),t.stack&&(n[_i.EXCEPTION_STACKTRACE]=t.stack)),n[_i.EXCEPTION_TYPE]||n[_i.EXCEPTION_MESSAGE]?this.addEvent(hM,n,r):Oe.warn("Failed to record an exception "+t)},Object.defineProperty(e.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),e.prototype._isSpanEnded=function(){return this._ended&&Oe.warn("Can not execute the operation on ended Span {traceId: %s, spanId: %s}",this._spanContext.traceId,this._spanContext.spanId),this._ended},e}()});function MC(e){switch(e===void 0&&(e=Cr()),e.OTEL_TRACES_SAMPLER){case jr.AlwaysOn:return new Ci;case jr.AlwaysOff:return new $s;case jr.ParentBasedAlwaysOn:return new Jl({root:new Ci});case jr.ParentBasedAlwaysOff:return new Jl({root:new $s});case jr.TraceIdRatio:return new Xh(gM(e));case jr.ParentBasedTraceIdRatio:return new Jl({root:new Xh(gM(e))});default:return Oe.error('OTEL_TRACES_SAMPLER value "'+e.OTEL_TRACES_SAMPLER+" invalid, defaulting to "+L7+'".'),new Ci}}function gM(e){if(e.OTEL_TRACES_SAMPLER_ARG===void 0||e.OTEL_TRACES_SAMPLER_ARG==="")return Oe.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to "+Ac+"."),Ac;var t=Number(e.OTEL_TRACES_SAMPLER_ARG);return isNaN(t)?(Oe.error("OTEL_TRACES_SAMPLER_ARG="+e.OTEL_TRACES_SAMPLER_ARG+" was given, but it is invalid, defaulting to "+Ac+"."),Ac):t<0||t>1?(Oe.error("OTEL_TRACES_SAMPLER_ARG="+e.OTEL_TRACES_SAMPLER_ARG+" was given, but it is out of range ([0..1]), defaulting to "+Ac+"."),Ac):t}var N7,L7,Zl,Ac,qC=I(()=>{Ke();Ur();N7=Cr(),L7=jr.AlwaysOn,Zl={sampler:MC(N7),forceFlushTimeoutMillis:3e4,spanLimits:{attributeCountLimit:Cr().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:Cr().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:Cr().OTEL_SPAN_EVENT_COUNT_LIMIT}};Ac=1});function vM(e){var t={sampler:MC()},r=Object.assign({},Zl,t,e);return r.spanLimits=Object.assign({},Zl.spanLimits,e.spanLimits||{}),r}var yM=I(()=>{qC()});function k7(e,t){if(!e.root)return Qt.getSpanContext(t)}var $C,EM=I(()=>{Ke();Ur();FC();yM();$C=function(){function e(t,r,n){this._tracerProvider=n;var i=vM(r);this._sampler=i.sampler,this._spanLimits=i.spanLimits,this._idGenerator=r.idGenerator||new rC,this.resource=n.resource,this.instrumentationLibrary=t}return e.prototype.startSpan=function(t,r,n){var i,o;if(r===void 0&&(r={}),n===void 0&&(n=_r.active()),Ms(n))return Oe.debug("Instrumentation suppressed, returning Noop Span"),Qt.wrapSpanContext(Fs);var s=k7(r,n),a=this._idGenerator.generateSpanId(),c,u,l;!s||!Qt.isSpanContextValid(s)?c=this._idGenerator.generateTraceId():(c=s.traceId,u=s.traceState,l=s.spanId);var f=(i=r.kind)!==null&&i!==void 0?i:Hl.INTERNAL,d=(o=r.links)!==null&&o!==void 0?o:[],p=Y_(r.attributes),h=this._sampler.shouldSample(r.root?Qt.setSpanContext(n,Fs):n,c,t,f,p,d),m=h.decision===$r.RECORD_AND_SAMPLED?qr.SAMPLED:qr.NONE,v={traceId:c,spanId:a,traceFlags:m,traceState:u};if(h.decision===$r.NOT_RECORD)return Oe.debug("Recording is off, propagating context in a non-recording span"),Qt.wrapSpanContext(v);var _=new kC(this,n,t,v,f,l,d,r.startTime);return _.setAttributes(Object.assign(p,h.attributes)),_},e.prototype.startActiveSpan=function(t,r,n,i){var o,s,a;if(!(arguments.length<2)){arguments.length===2?a=r:arguments.length===3?(o=r,a=n):(o=r,s=n,a=i);var c=s!=null?s:_r.active(),u=this.startSpan(t,o,c),l=Qt.setSpan(c,u);return _r.with(l,a,void 0,u)}},e.prototype.getSpanLimits=function(){return this._spanLimits},e.prototype.getActiveSpanProcessor=function(){return this._tracerProvider.getActiveSpanProcessor()},e}()});function _M(){return"unknown_service:"+process.argv0}var CM=I(()=>{});var F7,wM=I(()=>{jC();Ke();F7=M(require("util"))});var M7,q7,$7,HCe,SM=I(()=>{Ke();Ur();bo();Qh();M7=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(f){s(f)}}function c(l){try{u(n.throw(l))}catch(f){s(f)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(e,t||[])).next())})},q7=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},$7=function(){function e(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}return e.prototype.detect=function(t){return M7(this,void 0,void 0,function(){var r,n,i,o,s;return q7(this,function(a){if(r={},n=Cr(),i=n.OTEL_RESOURCE_ATTRIBUTES,o=n.OTEL_SERVICE_NAME,i)try{s=this._parseResourceAttributes(i),Object.assign(r,s)}catch(c){Oe.debug("EnvDetector failed: "+c.message)}return o&&(r[Qe.SERVICE_NAME]=o),[2,new wi(r)]})})},e.prototype._parseResourceAttributes=function(t){if(!t)return{};for(var r={},n=t.split(this._COMMA_SEPARATOR,-1),i=0,o=n;i<o.length;i++){var s=o[i],a=s.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(a.length===2){var c=a[0],u=a[1];if(c=c.trim(),u=u.trim().split('^"|"$').join(""),!this._isValidAndNotEmpty(c))throw new Error("Attribute key "+this._ERROR_MESSAGE_INVALID_CHARS);if(!this._isValid(u))throw new Error("Attribute value "+this._ERROR_MESSAGE_INVALID_VALUE);r[c]=u}}return r},e.prototype._isValid=function(t){return t.length<=this._MAX_LENGTH&&this._isPrintableString(t)},e.prototype._isPrintableString=function(t){for(var r=0;r<t.length;r++){var n=t.charAt(r);if(n<=" "||n>="~")return!1}return!0},e.prototype._isValidAndNotEmpty=function(t){return t.length>0&&this._isValid(t)},e}(),HCe=new $7});var UC,j7,U7,H7,zCe,bM=I(()=>{Ke();bo();Qh();UC=function(){return UC=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},UC.apply(this,arguments)},j7=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(f){s(f)}}function c(l){try{u(n.throw(l))}catch(f){s(f)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(e,t||[])).next())})},U7=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},H7=function(){function e(){}return e.prototype.detect=function(t){return j7(this,void 0,void 0,function(){var r,n;return U7(this,function(i){return r=(n={},n[Qe.PROCESS_PID]=process.pid,n[Qe.PROCESS_EXECUTABLE_NAME]=process.title||"",n[Qe.PROCESS_COMMAND]=process.argv[1]||"",n[Qe.PROCESS_COMMAND_LINE]=process.argv.join(" ")||"",n),[2,this._getResourceAttributes(r,t)]})})},e.prototype._getResourceAttributes=function(t,r){return t[Qe.PROCESS_EXECUTABLE_NAME]===""||t[Qe.PROCESS_EXECUTABLE_PATH]===""||t[Qe.PROCESS_COMMAND]===""||t[Qe.PROCESS_COMMAND_LINE]===""?(Oe.debug("ProcessDetector failed: Unable to find required process resources. "),wi.empty()):new wi(UC({},t))},e}(),zCe=new H7});var xM=I(()=>{SM();bM()});var TM=I(()=>{CM();wM();xM()});var HC=I(()=>{TM()});var wi,jC=I(()=>{bo();Ur();HC();wi=function(){function e(t){this.attributes=t}return e.empty=function(){return e.EMPTY},e.default=function(){var t;return new e((t={},t[Qe.SERVICE_NAME]=_M(),t[Qe.TELEMETRY_SDK_LANGUAGE]=Yl[Qe.TELEMETRY_SDK_LANGUAGE],t[Qe.TELEMETRY_SDK_NAME]=Yl[Qe.TELEMETRY_SDK_NAME],t[Qe.TELEMETRY_SDK_VERSION]=Yl[Qe.TELEMETRY_SDK_VERSION],t))},e.prototype.merge=function(t){if(!t||!Object.keys(t.attributes).length)return this;var r=Object.assign({},this.attributes,t.attributes);return new e(r)},e.EMPTY=new e({}),e}()});var AM=I(()=>{});var IM=I(()=>{});var Qh=I(()=>{jC();HC();AM();IM()});var RM,PM=I(()=>{Ur();RM=function(){function e(t){this._spanProcessors=t}return e.prototype.forceFlush=function(){for(var t=[],r=0,n=this._spanProcessors;r<n.length;r++){var i=n[r];t.push(i.forceFlush())}return new Promise(function(o){Promise.all(t).then(function(){o()}).catch(function(s){Ei(s||new Error("MultiSpanProcessor: forceFlush failed")),o()})})},e.prototype.onStart=function(t,r){for(var n=0,i=this._spanProcessors;n<i.length;n++){var o=i[n];o.onStart(t,r)}},e.prototype.onEnd=function(t){for(var r=0,n=this._spanProcessors;r<n.length;r++){var i=n[r];i.onEnd(t)}},e.prototype.shutdown=function(){for(var t=[],r=0,n=this._spanProcessors;r<n.length;r++){var i=n[r];t.push(i.shutdown())}return new Promise(function(o,s){Promise.all(t).then(function(){o()},s)})},e}()});var BC,GC=I(()=>{BC=function(){function e(){}return e.prototype.onStart=function(t,r){},e.prototype.onEnd=function(t){},e.prototype.shutdown=function(){return Promise.resolve()},e.prototype.forceFlush=function(){return Promise.resolve()},e}()});var OM,DM=I(()=>{Ke();Ur();OM=function(){function e(t,r){this._exporter=t,this._finishedSpans=[],this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve();var n=Cr();this._maxExportBatchSize=typeof(r==null?void 0:r.maxExportBatchSize)=="number"?r.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof(r==null?void 0:r.maxQueueSize)=="number"?r.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof(r==null?void 0:r.scheduledDelayMillis)=="number"?r.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof(r==null?void 0:r.exportTimeoutMillis)=="number"?r.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT}return e.prototype.forceFlush=function(){return this._isShutdown?this._shuttingDownPromise:this._flushAll()},e.prototype.onStart=function(t){},e.prototype.onEnd=function(t){this._isShutdown||this._addToBuffer(t)},e.prototype.shutdown=function(){var t=this;return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise(function(r,n){Promise.resolve().then(function(){return t.onShutdown()}).then(function(){return t._flushAll()}).then(function(){return t._exporter.shutdown()}).then(r).catch(function(i){n(i)})}),this._shuttingDownPromise)},e.prototype._addToBuffer=function(t){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(t),this._maybeStartTimer())},e.prototype._flushAll=function(){var t=this;return new Promise(function(r,n){for(var i=[],o=Math.ceil(t._finishedSpans.length/t._maxExportBatchSize),s=0,a=o;s<a;s++)i.push(t._flushOneBatch());Promise.all(i).then(function(){r()}).catch(n)})},e.prototype._flushOneBatch=function(){var t=this;return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise(function(r,n){var i=setTimeout(function(){n(new Error("Timeout"))},t._exportTimeoutMillis);_r.with(Wl(_r.active()),function(){t._exporter.export(t._finishedSpans.splice(0,t._maxExportBatchSize),function(o){var s;clearTimeout(i),o.code===fn.SUCCESS?r():n((s=o.error)!==null&&s!==void 0?s:new Error("BatchSpanProcessor: span export failed"))})})})},e.prototype._maybeStartTimer=function(){var t=this;this._timer===void 0&&(this._timer=setTimeout(function(){t._flushOneBatch().then(function(){t._finishedSpans.length>0&&(t._clearTimer(),t._maybeStartTimer())}).catch(function(r){Ei(r)})},this._scheduledDelayMillis),_C(this._timer))},e.prototype._clearTimer=function(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)},e}()});var B7,WC,NM=I(()=>{DM();B7=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),WC=function(e){B7(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.onShutdown=function(){},t}(OM)});var LM=I(()=>{NM()});var VC=I(()=>{LM()});var uq=g((of,Pc)=>{var G7=200,kM="__lodash_hash_undefined__",W7=800,V7=16,FM=9007199254740991,MM="[object Arguments]",z7="[object Array]",K7="[object AsyncFunction]",Y7="[object Boolean]",X7="[object Date]",Q7="[object Error]",qM="[object Function]",J7="[object GeneratorFunction]",Z7="[object Map]",eQ="[object Number]",tQ="[object Null]",$M="[object Object]",rQ="[object Proxy]",nQ="[object RegExp]",iQ="[object Set]",oQ="[object String]",sQ="[object Undefined]",aQ="[object WeakMap]",cQ="[object ArrayBuffer]",uQ="[object DataView]",lQ="[object Float32Array]",fQ="[object Float64Array]",dQ="[object Int8Array]",pQ="[object Int16Array]",hQ="[object Int32Array]",mQ="[object Uint8Array]",gQ="[object Uint8ClampedArray]",vQ="[object Uint16Array]",yQ="[object Uint32Array]",EQ=/[\\^$.*+?()[\]{}|]/g,_Q=/^\[object .+?Constructor\]$/,CQ=/^(?:0|[1-9]\d*)$/,Je={};Je[lQ]=Je[fQ]=Je[dQ]=Je[pQ]=Je[hQ]=Je[mQ]=Je[gQ]=Je[vQ]=Je[yQ]=!0;Je[MM]=Je[z7]=Je[cQ]=Je[Y7]=Je[uQ]=Je[X7]=Je[Q7]=Je[qM]=Je[Z7]=Je[eQ]=Je[$M]=Je[nQ]=Je[iQ]=Je[oQ]=Je[aQ]=!1;var jM=typeof global=="object"&&global&&global.Object===Object&&global,wQ=typeof self=="object"&&self&&self.Object===Object&&self,ef=jM||wQ||Function("return this")(),UM=typeof of=="object"&&of&&!of.nodeType&&of,tf=UM&&typeof Pc=="object"&&Pc&&!Pc.nodeType&&Pc,HM=tf&&tf.exports===UM,zC=HM&&jM.process,BM=function(){try{var e=tf&&tf.require&&tf.require("util").types;return e||zC&&zC.binding&&zC.binding("util")}catch(t){}}(),GM=BM&&BM.isTypedArray;function SQ(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function bQ(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function xQ(e){return function(t){return e(t)}}function TQ(e,t){return e==null?void 0:e[t]}function AQ(e,t){return function(r){return e(t(r))}}var IQ=Array.prototype,RQ=Function.prototype,Jh=Object.prototype,KC=ef["__core-js_shared__"],Zh=RQ.toString,Si=Jh.hasOwnProperty,WM=function(){var e=/[^.]+$/.exec(KC&&KC.keys&&KC.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),VM=Jh.toString,PQ=Zh.call(Object),OQ=RegExp("^"+Zh.call(Si).replace(EQ,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),em=HM?ef.Buffer:void 0,zM=ef.Symbol,KM=ef.Uint8Array,YM=em?em.allocUnsafe:void 0,XM=AQ(Object.getPrototypeOf,Object),QM=Object.create,DQ=Jh.propertyIsEnumerable,NQ=IQ.splice,js=zM?zM.toStringTag:void 0,tm=function(){try{var e=QC(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),LQ=em?em.isBuffer:void 0,JM=Math.max,kQ=Date.now,ZM=QC(ef,"Map"),rf=QC(Object,"create"),FQ=function(){function e(){}return function(t){if(!Hs(t))return{};if(QM)return QM(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function Us(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function MQ(){this.__data__=rf?rf(null):{},this.size=0}function qQ(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function $Q(e){var t=this.__data__;if(rf){var r=t[e];return r===kM?void 0:r}return Si.call(t,e)?t[e]:void 0}function jQ(e){var t=this.__data__;return rf?t[e]!==void 0:Si.call(t,e)}function UQ(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=rf&&t===void 0?kM:t,this}Us.prototype.clear=MQ;Us.prototype.delete=qQ;Us.prototype.get=$Q;Us.prototype.has=jQ;Us.prototype.set=UQ;function bi(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function HQ(){this.__data__=[],this.size=0}function BQ(e){var t=this.__data__,r=rm(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():NQ.call(t,r,1),--this.size,!0}function GQ(e){var t=this.__data__,r=rm(t,e);return r<0?void 0:t[r][1]}function WQ(e){return rm(this.__data__,e)>-1}function VQ(e,t){var r=this.__data__,n=rm(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}bi.prototype.clear=HQ;bi.prototype.delete=BQ;bi.prototype.get=GQ;bi.prototype.has=WQ;bi.prototype.set=VQ;function Ic(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function zQ(){this.size=0,this.__data__={hash:new Us,map:new(ZM||bi),string:new Us}}function KQ(e){var t=im(this,e).delete(e);return this.size-=t?1:0,t}function YQ(e){return im(this,e).get(e)}function XQ(e){return im(this,e).has(e)}function QQ(e,t){var r=im(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}Ic.prototype.clear=zQ;Ic.prototype.delete=KQ;Ic.prototype.get=YQ;Ic.prototype.has=XQ;Ic.prototype.set=QQ;function Rc(e){var t=this.__data__=new bi(e);this.size=t.size}function JQ(){this.__data__=new bi,this.size=0}function ZQ(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function eJ(e){return this.__data__.get(e)}function tJ(e){return this.__data__.has(e)}function rJ(e,t){var r=this.__data__;if(r instanceof bi){var n=r.__data__;if(!ZM||n.length<G7-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Ic(n)}return r.set(e,t),this.size=r.size,this}Rc.prototype.clear=JQ;Rc.prototype.delete=ZQ;Rc.prototype.get=eJ;Rc.prototype.has=tJ;Rc.prototype.set=rJ;function nJ(e,t){var r=ew(e),n=!r&&ZC(e),i=!r&&!n&&iq(e),o=!r&&!n&&!i&&sq(e),s=r||n||i||o,a=s?bQ(e.length,String):[],c=a.length;for(var u in e)(t||Si.call(e,u))&&!(s&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||rq(u,c)))&&a.push(u);return a}function YC(e,t,r){(r!==void 0&&!om(e[t],r)||r===void 0&&!(t in e))&&XC(e,t,r)}function iJ(e,t,r){var n=e[t];(!(Si.call(e,t)&&om(n,r))||r===void 0&&!(t in e))&&XC(e,t,r)}function rm(e,t){for(var r=e.length;r--;)if(om(e[r][0],t))return r;return-1}function XC(e,t,r){t=="__proto__"&&tm?tm(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var oJ=yJ();function nm(e){return e==null?e===void 0?sQ:tQ:js&&js in Object(e)?EJ(e):xJ(e)}function eq(e){return nf(e)&&nm(e)==MM}function sJ(e){if(!Hs(e)||SJ(e))return!1;var t=rw(e)?OQ:_Q;return t.test(RJ(e))}function aJ(e){return nf(e)&&oq(e.length)&&!!Je[nm(e)]}function cJ(e){if(!Hs(e))return bJ(e);var t=nq(e),r=[];for(var n in e)n=="constructor"&&(t||!Si.call(e,n))||r.push(n);return r}function tq(e,t,r,n,i){e!==t&&oJ(t,function(o,s){if(i||(i=new Rc),Hs(o))uJ(e,t,s,r,tq,n,i);else{var a=n?n(JC(e,s),o,s+"",e,t,i):void 0;a===void 0&&(a=o),YC(e,s,a)}},aq)}function uJ(e,t,r,n,i,o,s){var a=JC(e,r),c=JC(t,r),u=s.get(c);if(u){YC(e,r,u);return}var l=o?o(a,c,r+"",e,t,s):void 0,f=l===void 0;if(f){var d=ew(c),p=!d&&iq(c),h=!d&&!p&&sq(c);l=c,d||p||h?ew(a)?l=a:PJ(a)?l=mJ(a):p?(f=!1,l=dJ(c,!0)):h?(f=!1,l=hJ(c,!0)):l=[]:OJ(c)||ZC(c)?(l=a,ZC(a)?l=DJ(a):(!Hs(a)||rw(a))&&(l=_J(c))):f=!1}f&&(s.set(c,l),i(l,c,n,o,s),s.delete(c)),YC(e,r,l)}function lJ(e,t){return AJ(TJ(e,t,cq),e+"")}var fJ=tm?function(e,t){return tm(e,"toString",{configurable:!0,enumerable:!1,value:LJ(t),writable:!0})}:cq;function dJ(e,t){if(t)return e.slice();var r=e.length,n=YM?YM(r):new e.constructor(r);return e.copy(n),n}function pJ(e){var t=new e.constructor(e.byteLength);return new KM(t).set(new KM(e)),t}function hJ(e,t){var r=t?pJ(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function mJ(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function gJ(e,t,r,n){var i=!r;r||(r={});for(var o=-1,s=t.length;++o<s;){var a=t[o],c=n?n(r[a],e[a],a,r,e):void 0;c===void 0&&(c=e[a]),i?XC(r,a,c):iJ(r,a,c)}return r}function vJ(e){return lJ(function(t,r){var n=-1,i=r.length,o=i>1?r[i-1]:void 0,s=i>2?r[2]:void 0;for(o=e.length>3&&typeof o=="function"?(i--,o):void 0,s&&CJ(r[0],r[1],s)&&(o=i<3?void 0:o,i=1),t=Object(t);++n<i;){var a=r[n];a&&e(t,a,n,o)}return t})}function yJ(e){return function(t,r,n){for(var i=-1,o=Object(t),s=n(t),a=s.length;a--;){var c=s[e?a:++i];if(r(o[c],c,o)===!1)break}return t}}function im(e,t){var r=e.__data__;return wJ(t)?r[typeof t=="string"?"string":"hash"]:r.map}function QC(e,t){var r=TQ(e,t);return sJ(r)?r:void 0}function EJ(e){var t=Si.call(e,js),r=e[js];try{e[js]=void 0;var n=!0}catch(o){}var i=VM.call(e);return n&&(t?e[js]=r:delete e[js]),i}function _J(e){return typeof e.constructor=="function"&&!nq(e)?FQ(XM(e)):{}}function rq(e,t){var r=typeof e;return t=t==null?FM:t,!!t&&(r=="number"||r!="symbol"&&CQ.test(e))&&e>-1&&e%1==0&&e<t}function CJ(e,t,r){if(!Hs(r))return!1;var n=typeof t;return(n=="number"?tw(r)&&rq(t,r.length):n=="string"&&t in r)?om(r[t],e):!1}function wJ(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function SJ(e){return!!WM&&WM in e}function nq(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Jh;return e===r}function bJ(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}function xJ(e){return VM.call(e)}function TJ(e,t,r){return t=JM(t===void 0?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=JM(n.length-t,0),s=Array(o);++i<o;)s[i]=n[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=n[i];return a[t]=r(s),SQ(e,this,a)}}function JC(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var AJ=IJ(fJ);function IJ(e){var t=0,r=0;return function(){var n=kQ(),i=V7-(n-r);if(r=n,i>0){if(++t>=W7)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function RJ(e){if(e!=null){try{return Zh.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function om(e,t){return e===t||e!==e&&t!==t}var ZC=eq(function(){return arguments}())?eq:function(e){return nf(e)&&Si.call(e,"callee")&&!DQ.call(e,"callee")},ew=Array.isArray;function tw(e){return e!=null&&oq(e.length)&&!rw(e)}function PJ(e){return nf(e)&&tw(e)}var iq=LQ||kJ;function rw(e){if(!Hs(e))return!1;var t=nm(e);return t==qM||t==J7||t==K7||t==rQ}function oq(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=FM}function Hs(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function nf(e){return e!=null&&typeof e=="object"}function OJ(e){if(!nf(e)||nm(e)!=$M)return!1;var t=XM(e);if(t===null)return!0;var r=Si.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Zh.call(r)==PQ}var sq=GM?xQ(GM):aJ;function DJ(e){return gJ(e,aq(e))}function aq(e){return tw(e)?nJ(e,!0):cJ(e)}var NJ=vJ(function(e,t,r){tq(e,t,r)});function LJ(e){return function(){return e}}function cq(e){return e}function kJ(){return!1}Pc.exports=NJ});var FJ,xo,MJ,lq=I(()=>{Ke();Ur();Qh();nw();qC();PM();GC();VC();FJ=uq();(function(e){e[e.resolved=0]="resolved",e[e.timeout=1]="timeout",e[e.error=2]="error",e[e.unresolved=3]="unresolved"})(xo||(xo={}));MJ=function(){function e(t){t===void 0&&(t={});var r;this._registeredSpanProcessors=[],this._tracers=new Map;var n=FJ({},Zl,t);this.resource=(r=n.resource)!==null&&r!==void 0?r:wi.empty(),this.resource=wi.default().merge(this.resource),this._config=Object.assign({},n,{resource:this.resource});var i=this._buildExporterFromEnv();if(i!==void 0){var o=new WC(i);this.activeSpanProcessor=o}else this.activeSpanProcessor=new BC}return e.prototype.getTracer=function(t,r){var n=t+"@"+(r||"");return this._tracers.has(n)||this._tracers.set(n,new $C({name:t,version:r},this._config,this)),this._tracers.get(n)},e.prototype.addSpanProcessor=function(t){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(function(r){return Oe.error("Error while trying to shutdown current span processor",r)}),this._registeredSpanProcessors.push(t),this.activeSpanProcessor=new RM(this._registeredSpanProcessors)},e.prototype.getActiveSpanProcessor=function(){return this.activeSpanProcessor},e.prototype.register=function(t){t===void 0&&(t={}),Qt.setGlobalTracerProvider(this),t.propagator===void 0&&(t.propagator=this._buildPropagatorFromEnv()),t.contextManager&&_r.setGlobalContextManager(t.contextManager),t.propagator&&So.setGlobalPropagator(t.propagator)},e.prototype.forceFlush=function(){var t=this._config.forceFlushTimeoutMillis,r=this._registeredSpanProcessors.map(function(n){return new Promise(function(i){var o,s=setTimeout(function(){i(new Error("Span processor did not completed within timeout period of "+t+" ms")),o=xo.timeout},t);n.forceFlush().then(function(){clearTimeout(s),o!==xo.timeout&&(o=xo.resolved,i(o))}).catch(function(a){clearTimeout(s),o=xo.error,i(a)})})});return new Promise(function(n,i){Promise.all(r).then(function(o){var s=o.filter(function(a){return a!==xo.resolved});s.length>0?i(s):n()}).catch(function(o){return i([o])})})},e.prototype.shutdown=function(){return this.activeSpanProcessor.shutdown()},e.prototype._getPropagator=function(t){var r;return(r=e._registeredPropagators.get(t))===null||r===void 0?void 0:r()},e.prototype._getSpanExporter=function(t){var r;return(r=e._registeredExporters.get(t))===null||r===void 0?void 0:r()},e.prototype._buildPropagatorFromEnv=function(){var t=this,r=Array.from(new Set(Cr().OTEL_PROPAGATORS)),n=r.map(function(o){var s=t._getPropagator(o);return s||Oe.warn('Propagator "'+o+'" requested through environment variable is unavailable.'),s}),i=n.reduce(function(o,s){return s&&o.push(s),o},[]);if(i.length!==0)return r.length===1?i[0]:new TC({propagators:i})},e.prototype._buildExporterFromEnv=function(){var t=Cr().OTEL_TRACES_EXPORTER;if(t!=="none"){var r=this._getSpanExporter(t);return r||Oe.error('Exporter "'+t+'" requested through environment variable is unavailable.'),r}},e._registeredPropagators=new Map([["tracecontext",function(){return new PC}],["baggage",function(){return new K_}]]),e._registeredExporters=new Map,e}()});var qJ,fq=I(()=>{Ur();qJ=function(){function e(){}return e.prototype.export=function(t,r){return this._sendSpans(t,r)},e.prototype.shutdown=function(){return this._sendSpans([]),Promise.resolve()},e.prototype._exportInfo=function(t){return{traceId:t.spanContext().traceId,parentId:t.parentSpanId,name:t.name,id:t.spanContext().spanId,kind:t.kind,timestamp:zh(t.startTime),duration:zh(t.duration),attributes:t.attributes,status:t.status,events:t.events}},e.prototype._sendSpans=function(t,r){for(var n=0,i=t;n<i.length;n++){var o=i[n];console.log(this._exportInfo(o))}if(r)return r({code:fn.SUCCESS})},e}()});var $J,dq=I(()=>{Ur();$J=function(){function e(){this._finishedSpans=[],this._stopped=!1}return e.prototype.export=function(t,r){var n;if(this._stopped)return r({code:fn.FAILED,error:new Error("Exporter has been stopped")});(n=this._finishedSpans).push.apply(n,t),setTimeout(function(){return r({code:fn.SUCCESS})},0)},e.prototype.shutdown=function(){return this._stopped=!0,this._finishedSpans=[],Promise.resolve()},e.prototype.reset=function(){this._finishedSpans=[]},e.prototype.getFinishedSpans=function(){return this._finishedSpans},e}()});var pq=I(()=>{});var jJ,hq=I(()=>{Ke();Ur();jJ=function(){function e(t){this._exporter=t,this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve()}return e.prototype.forceFlush=function(){return Promise.resolve()},e.prototype.onStart=function(t){},e.prototype.onEnd=function(t){var r=this;this._isShutdown||_r.with(Wl(_r.active()),function(){r._exporter.export([t],function(n){var i;n.code!==fn.SUCCESS&&Ei((i=n.error)!==null&&i!==void 0?i:new Error("SimpleSpanProcessor: span export failed (status "+n+")"))})})},e.prototype.shutdown=function(){var t=this;return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise(function(r,n){Promise.resolve().then(function(){return t._exporter.shutdown()}).then(r).catch(function(i){n(i)})}),this._shuttingDownPromise)},e}()});var mq=I(()=>{});var gq=I(()=>{});var vq=I(()=>{});var yq=I(()=>{});var Eq={};ua(Eq,{BasicTracerProvider:()=>MJ,BatchSpanProcessor:()=>WC,ConsoleSpanExporter:()=>qJ,ForceFlushState:()=>xo,InMemorySpanExporter:()=>$J,NoopSpanProcessor:()=>BC,SimpleSpanProcessor:()=>jJ,Span:()=>kC,Tracer:()=>$C});var nw=I(()=>{EM();lq();VC();fq();dq();pq();hq();mq();GC();FC();gq();vq();yq()});var Cq=g(dn=>{"use strict";Object.defineProperty(dn,"__esModule",{value:!0});dn.enable=dn.azureCoreTracing=dn.AzureMonitorSymbol=void 0;var iw=Et();dn.AzureMonitorSymbol="Azure_Monitor_Tracer";var _q=!1,UJ=function(e){if(_q)return e;try{var t=(nw(),Eq),r=(Ke(),Gl),n=new t.BasicTracerProvider,i=n.getTracer("applicationinsights tracer");if(e.setTracer){var o=e.setTracer;e.setTracer=function(a){var c=a.startSpan;a.startSpan=function(u,l,f){var d=c.call(this,u,l,f),p=d.end;return d.end=function(){var h=p.apply(this,arguments);return iw.channel.publish("azure-coretracing",d),h},d},a[dn.AzureMonitorSymbol]=!0,o.call(this,a)},r.trace.getSpan(r.context.active()),e.setTracer(i)}else{var s=r.trace.setGlobalTracerProvider;r.trace.setGlobalTracerProvider=function(a){var c=a.getTracer;return a.getTracer=function(u,l){var f=c.call(this,u,l);if(!f[dn.AzureMonitorSymbol]){var d=f.startSpan;f.startSpan=function(p,h,m){var v=d.call(this,p,h,m),_=v.end;return v.end=function(){var E=_.apply(this,arguments);return iw.channel.publish("azure-coretracing",v),E},v},f[dn.AzureMonitorSymbol]=!0}return f},s.call(this,a)},n.register(),r.trace.getSpan(r.context.active())}_q=!0}catch(a){}return e};dn.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:UJ};function HJ(){iw.channel.registerMonkeyPatch("@azure/core-tracing",dn.azureCoreTracing)}dn.enable=HJ});var Sq=g(Bs=>{"use strict";Object.defineProperty(Bs,"__esModule",{value:!0});Bs.enable=Bs.bunyan=void 0;var wq=Et(),BJ=function(e){var t=e.prototype._emit;return e.prototype._emit=function(r,n){var i=t.apply(this,arguments);if(!n){var o=i;o||(o=t.call(this,r,!0)),wq.channel.publish("bunyan",{level:r.level,result:o})}return i},e};Bs.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:BJ};function GJ(){wq.channel.registerMonkeyPatch("bunyan",Bs.bunyan)}Bs.enable=GJ});var xq=g(Gs=>{"use strict";Object.defineProperty(Gs,"__esModule",{value:!0});Gs.enable=Gs.console=void 0;var ow=Et(),bq=require("stream"),WJ=function(e){var t=new bq.Writable,r=new bq.Writable;t.write=function(u){if(!u)return!0;var l=u.toString();return ow.channel.publish("console",{message:l}),!0},r.write=function(u){if(!u)return!0;var l=u.toString();return ow.channel.publish("console",{message:l,stderr:!0}),!0};for(var n=new e.Console(t,r),i=["log","info","warn","error","dir","time","timeEnd","trace","assert"],o=function(u){var l=e[u];l&&(e[u]=function(){if(n[u])try{n[u].apply(n,arguments)}catch(f){}return l.apply(e,arguments)})},s=0,a=i;s<a.length;s++){var c=a[s];o(c)}return e};Gs.console={versionSpecifier:">= 4.0.0",patch:WJ};function VJ(){ow.channel.registerMonkeyPatch("console",Gs.console),require("console")}Gs.enable=VJ});var Tq=g(Ws=>{"use strict";Object.defineProperty(Ws,"__esModule",{value:!0});Ws.enable=Ws.mongoCore=void 0;var sw=Et(),zJ=function(e){var t=e.Server.prototype.connect;return e.Server.prototype.connect=function(){var n=t.apply(this,arguments),i=this.s.pool.write;this.s.pool.write=function(){var a=typeof arguments[1]=="function"?1:2;return typeof arguments[a]=="function"&&(arguments[a]=sw.channel.bindToContext(arguments[a])),i.apply(this,arguments)};var o=this.s.pool.logout;return this.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=sw.channel.bindToContext(arguments[1])),o.apply(this,arguments)},n},e};Ws.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:zJ};function KJ(){sw.channel.registerMonkeyPatch("mongodb-core",Ws.mongoCore)}Ws.enable=KJ});var Aq=g(cr=>{"use strict";var Oc=cr&&cr.__assign||function(){return Oc=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Oc.apply(this,arguments)};Object.defineProperty(cr,"__esModule",{value:!0});cr.enable=cr.mongo330=cr.mongo3=cr.mongo2=void 0;var Jt=Et(),YJ=function(e){var t=e.instrument({operationIdGenerator:{next:function(){return Jt.channel.bindToContext(function(n){return n()})}}}),r={};return t.on("started",function(n){r[n.requestId]||(r[n.requestId]=Oc(Oc({},n),{time:new Date}))}),t.on("succeeded",function(n){var i=r[n.requestId];i&&delete r[n.requestId],typeof n.operationId=="function"?n.operationId(function(){return Jt.channel.publish("mongodb",{startedData:i,event:n,succeeded:!0})}):Jt.channel.publish("mongodb",{startedData:i,event:n,succeeded:!0})}),t.on("failed",function(n){var i=r[n.requestId];i&&delete r[n.requestId],typeof n.operationId=="function"?n.operationId(function(){return Jt.channel.publish("mongodb",{startedData:i,event:n,succeeded:!1})}):Jt.channel.publish("mongodb",{startedData:i,event:n,succeeded:!1})}),e},XJ=function(e){var t=e.instrument(),r={},n={};return t.on("started",function(i){r[i.requestId]||(n[i.requestId]=Jt.channel.bindToContext(function(o){return o()}),r[i.requestId]=Oc(Oc({},i),{time:new Date}))}),t.on("succeeded",function(i){var o=r[i.requestId];o&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return Jt.channel.publish("mongodb",{startedData:o,event:i,succeeded:!0})}),delete n[i.requestId])}),t.on("failed",function(i){var o=r[i.requestId];o&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return Jt.channel.publish("mongodb",{startedData:o,event:i,succeeded:!1})}),delete n[i.requestId])}),e},QJ=function(e){var t=e.Server.prototype.connect;return e.Server.prototype.connect=function(){var n=t.apply(this,arguments),i=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var a=typeof arguments[1]=="function"?1:2;return typeof arguments[a]=="function"&&(arguments[a]=Jt.channel.bindToContext(arguments[a])),i.apply(this,arguments)};var o=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=Jt.channel.bindToContext(arguments[1])),o.apply(this,arguments)},n},e},JJ=function(e){QJ(e);var t=e.instrument(),r={},n={};return t.on("started",function(i){r[i.requestId]||(n[i.requestId]=Jt.channel.bindToContext(function(o){return o()}),r[i.requestId]=i)}),t.on("succeeded",function(i){var o=r[i.requestId];o&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return Jt.channel.publish("mongodb",{startedData:o,event:i,succeeded:!0})}),delete n[i.requestId])}),t.on("failed",function(i){var o=r[i.requestId];o&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return Jt.channel.publish("mongodb",{startedData:o,event:i,succeeded:!1})}),delete n[i.requestId])}),e};cr.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:YJ};cr.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:XJ};cr.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:JJ};function ZJ(){Jt.channel.registerMonkeyPatch("mongodb",cr.mongo2),Jt.channel.registerMonkeyPatch("mongodb",cr.mongo3),Jt.channel.registerMonkeyPatch("mongodb",cr.mongo330)}cr.enable=ZJ});var Rq=g(Vs=>{"use strict";Object.defineProperty(Vs,"__esModule",{value:!0});Vs.enable=Vs.mysql=void 0;var sm=Et(),Iq=require("path"),eZ=function(e,t){var r=function(c,u){return function(l,f){var d=c[l];d&&(c[l]=function(){for(var h=arguments.length-1,m=arguments.length-1;m>=0;--m)if(typeof arguments[m]=="function"){h=m;break}else if(typeof arguments[m]!="undefined")break;var v=arguments[h],_={result:null,startTime:null,startDate:null};typeof v=="function"&&(f?(_.startTime=process.hrtime(),_.startDate=new Date,arguments[h]=sm.channel.bindToContext(f(_,v))):arguments[h]=sm.channel.bindToContext(v));var E=d.apply(this,arguments);return _.result=E,E})}},n=function(c,u){return r(c.prototype,u+".prototype")},i=["connect","changeUser","ping","statistics","end"],o=require(Iq.dirname(t)+"/lib/Connection");i.forEach(function(c){return n(o,"Connection")(c)}),r(o,"Connection")("createQuery",function(c,u){return function(l){var f=process.hrtime(c.startTime),d=f[0]*1e3+f[1]/1e6|0;sm.channel.publish("mysql",{query:c.result,callbackArgs:arguments,err:l,duration:d,time:c.startDate}),u.apply(this,arguments)}});var s=["_enqueueCallback"],a=require(Iq.dirname(t)+"/lib/Pool");return s.forEach(function(c){return n(a,"Pool")(c)}),e};Vs.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:eZ};function tZ(){sm.channel.registerMonkeyPatch("mysql",Vs.mysql)}Vs.enable=tZ});var Oq=g(zs=>{"use strict";Object.defineProperty(zs,"__esModule",{value:!0});zs.enable=zs.postgresPool1=void 0;var Pq=Et();function rZ(e){var t=e.prototype.connect;return e.prototype.connect=function(n){return n&&(arguments[0]=Pq.channel.bindToContext(n)),t.apply(this,arguments)},e}zs.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:rZ};function nZ(){Pq.channel.registerMonkeyPatch("pg-pool",zs.postgresPool1)}zs.enable=nZ});var Nq=g(Kn=>{"use strict";Object.defineProperty(Kn,"__esModule",{value:!0});Kn.enable=Kn.postgres7=Kn.postgres6=void 0;var Dc=Et(),Dq=require("events");function iZ(e,t){var r=e.Client.prototype.query,n="__diagnosticOriginalFunc";return e.Client.prototype.query=function(o,s,a){var c={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},u=process.hrtime(),l;function f(d){d&&d[n]&&(d=d[n]);var p=Dc.channel.bindToContext(function(h,m){var v=process.hrtime(u);if(c.result=m&&{rowCount:m.rowCount,command:m.command},c.error=h,c.duration=Math.ceil(v[0]*1e3+v[1]/1e6),Dc.channel.publish("postgres",c),h){if(d)return d.apply(this,arguments);l&&l instanceof Dq.EventEmitter&&l.emit("error",h)}else d&&d.apply(this,arguments)});try{return Object.defineProperty(p,n,{value:d}),p}catch(h){return d}}try{typeof o=="string"?s instanceof Array?(c.query.preparable={text:o,args:s},a=f(a)):(c.query.text=o,a?a=f(a):s=f(s)):(typeof o.name=="string"?c.query.plan=o.name:o.values instanceof Array?c.query.preparable={text:o.text,args:o.values}:c.query.text=o.text,a?a=f(a):s?s=f(s):o.callback=f(o.callback))}catch(d){return r.apply(this,arguments)}return arguments[0]=o,arguments[1]=s,arguments[2]=a,arguments.length=arguments.length>3?arguments.length:3,l=r.apply(this,arguments),l},e}function oZ(e,t){var r=e.Client.prototype.query,n="__diagnosticOriginalFunc";return e.Client.prototype.query=function(o,s,a){var c=this,u=!!a,l={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},f=process.hrtime(),d;function p(h){h&&h[n]&&(h=h[n]);var m=Dc.channel.bindToContext(function(v,_){var E=process.hrtime(f);if(l.result=_&&{rowCount:_.rowCount,command:_.command},l.error=v,l.duration=Math.ceil(E[0]*1e3+E[1]/1e6),Dc.channel.publish("postgres",l),v){if(h)return h.apply(this,arguments);d&&d instanceof Dq.EventEmitter&&d.emit("error",v)}else h&&h.apply(this,arguments)});try{return Object.defineProperty(m,n,{value:h}),m}catch(v){return h}}try{typeof o=="string"?s instanceof Array?(l.query.preparable={text:o,args:s},u=typeof a=="function",a=u?p(a):a):(l.query.text=o,a?(u=typeof a=="function",a=u?p(a):a):(u=typeof s=="function",s=u?p(s):s)):(typeof o.name=="string"?l.query.plan=o.name:o.values instanceof Array?l.query.preparable={text:o.text,args:o.values}:l.query.text=o.text,a?(u=typeof a=="function",a=p(a)):s?(u=typeof s=="function",s=u?p(s):s):(u=typeof o.callback=="function",o.callback=u?p(o.callback):o.callback))}catch(h){return r.apply(this,arguments)}return arguments[0]=o,arguments[1]=s,arguments[2]=a,arguments.length=arguments.length>3?arguments.length:3,d=r.apply(this,arguments),u?d:d.then(function(h){return p()(void 0,h),new c._Promise(function(m,v){m(h)})}).catch(function(h){return p()(h,void 0),new c._Promise(function(m,v){v(h)})})},e}Kn.postgres6={versionSpecifier:"6.*",patch:iZ};Kn.postgres7={versionSpecifier:">=7.* <=8.*",patch:oZ};function sZ(){Dc.channel.registerMonkeyPatch("pg",Kn.postgres6),Dc.channel.registerMonkeyPatch("pg",Kn.postgres7)}Kn.enable=sZ});var Lq=g(Ks=>{"use strict";Object.defineProperty(Ks,"__esModule",{value:!0});Ks.enable=Ks.redis=void 0;var aw=Et(),aZ=function(e){var t=e.RedisClient.prototype.internal_send_command;return e.RedisClient.prototype.internal_send_command=function(r){if(r){var n=r.callback;if(!n||!n.pubsubBound){var i=this.address,o=process.hrtime(),s=new Date;r.callback=aw.channel.bindToContext(function(a,c){var u=process.hrtime(o),l=u[0]*1e3+u[1]/1e6|0;aw.channel.publish("redis",{duration:l,address:i,commandObj:r,err:a,result:c,time:s}),typeof n=="function"&&n.apply(this,arguments)}),r.callback.pubsubBound=!0}}return t.call(this,r)},e};Ks.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:aZ};function cZ(){aw.channel.registerMonkeyPatch("redis",Ks.redis)}Ks.enable=cZ});var kq=g(xi=>{"use strict";var am=xi&&xi.__assign||function(){return am=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},am.apply(this,arguments)};Object.defineProperty(xi,"__esModule",{value:!0});xi.enable=xi.tedious=void 0;var cw=Et(),uZ=function(e){var t=e.Connection.prototype.makeRequest;return e.Connection.prototype.makeRequest=function(){function n(o){var s=process.hrtime(),a={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return cw.channel.bindToContext(function(c,u,l){var f=process.hrtime(s);a=am(am({},a),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!c&&{rowCount:u,rows:l},query:{text:this.parametersByName.statement.value},error:c,duration:Math.ceil(f[0]*1e3+f[1]/1e6)}),cw.channel.publish("tedious",a),o.call(this,c,u,l)})}var i=arguments[0];arguments[0].callback=n(i.callback),t.apply(this,arguments)},e};xi.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:uZ};function lZ(){cw.channel.registerMonkeyPatch("tedious",xi.tedious)}xi.enable=lZ});var Fq=g(wr=>{"use strict";var fZ=wr&&wr.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),dZ=wr&&wr.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};Object.defineProperty(wr,"__esModule",{value:!0});wr.enable=wr.winston2=wr.winston3=void 0;var cm=Et(),pZ=function(e){var t=e.Logger.prototype.log,r,n=function(i,o,s){var a;return r===e.config.npm.levels?a="npm":r===e.config.syslog.levels?a="syslog":a="unknown",cm.channel.publish("winston",{level:i,message:o,meta:s,levelKind:a}),o};return e.Logger.prototype.log=function(){return r=this.levels,!this.filters||this.filters.length===0?this.filters=[n]:this.filters[this.filters.length-1]!==n&&(this.filters=this.filters.filter(function(o){return o!==n}),this.filters.push(n)),t.apply(this,arguments)},e},hZ=function(e){var t=function(s,a){var c;return s.config.npm.levels[a]!=null?c="npm":s.config.syslog.levels[a]!=null?c="syslog":c="unknown",c},r=function(s){fZ(a,s);function a(c,u){var l=s.call(this,u)||this;return l.winston=c,l}return a.prototype.log=function(c,u){var l=c.message,f=c.level,d=c.meta,p=dZ(c,["message","level","meta"]);f=typeof Symbol.for=="function"?c[Symbol.for("level")]:f,l=c instanceof Error?c:l;var h=t(this.winston,f);d=d||{};for(var m in p)p.hasOwnProperty(m)&&(d[m]=p[m]);cm.channel.publish("winston",{message:l,level:f,levelKind:h,meta:d}),u()},a}(e.Transport);function n(){var s=arguments[0].levels||e.config.npm.levels,a;for(var c in s)s.hasOwnProperty(c)&&(a=a===void 0||s[c]>s[a]?c:a);this.add(new r(e,{level:a}))}var i=e.createLogger;e.createLogger=function(){var a=arguments[0].levels||e.config.npm.levels,c;for(var u in a)a.hasOwnProperty(u)&&(c=c===void 0||a[u]>a[c]?u:c);var l=i.apply(this,arguments);l.add(new r(e,{level:c}));var f=l.configure;return l.configure=function(){f.apply(this,arguments),n.apply(this,arguments)},l};var o=e.configure;return e.configure=function(){o.apply(this,arguments),n.apply(this,arguments)},e.add(new r(e)),e};wr.winston3={versionSpecifier:"3.x",patch:hZ};wr.winston2={versionSpecifier:"2.x",patch:pZ};function mZ(){cm.channel.registerMonkeyPatch("winston",wr.winston2),cm.channel.registerMonkeyPatch("winston",wr.winston3)}wr.enable=mZ});var Kq=g(Ye=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0});Ye.enable=Ye.tedious=Ye.pgPool=Ye.pg=Ye.winston=Ye.redis=Ye.mysql=Ye.mongodb=Ye.mongodbCore=Ye.console=Ye.bunyan=Ye.azuresdk=void 0;var Mq=Cq();Ye.azuresdk=Mq;var qq=Sq();Ye.bunyan=qq;var $q=xq();Ye.console=$q;var jq=Tq();Ye.mongodbCore=jq;var Uq=Aq();Ye.mongodb=Uq;var Hq=Rq();Ye.mysql=Hq;var Bq=Oq();Ye.pgPool=Bq;var Gq=Nq();Ye.pg=Gq;var Wq=Lq();Ye.redis=Wq;var Vq=kq();Ye.tedious=Vq;var zq=Fq();Ye.winston=zq;function gZ(){qq.enable(),$q.enable(),jq.enable(),Uq.enable(),Hq.enable(),Gq.enable(),Bq.enable(),Wq.enable(),zq.enable(),Mq.enable(),Vq.enable()}Ye.enable=gZ});var fm=g(To=>{"use strict";Object.defineProperty(To,"__esModule",{value:!0});To.registerContextPreservation=To.IsInitialized=void 0;var vZ=t_(),uw=Tt();To.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;var lw="DiagnosticChannel";if(To.IsInitialized){Dn=Kq(),Yq=process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"",um=Yq.split(","),fw={bunyan:Dn.bunyan,console:Dn.console,mongodb:Dn.mongodb,mongodbCore:Dn.mongodbCore,mysql:Dn.mysql,redis:Dn.redis,pg:Dn.pg,pgPool:Dn.pgPool,winston:Dn.winston,azuresdk:Dn.azuresdk};for(lm in fw)um.indexOf(lm)===-1&&(fw[lm].enable(),uw.info(lw,"Subscribed to "+lm+" events"));um.length>0&&uw.info(lw,"Some modules will not be patched",um)}else uw.info(lw,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");var Dn,Yq,um,fw,lm;function yZ(e){if(!!To.IsInitialized){var t=Et();t.channel.addContextPreservation(e),t.channel.spanContextPropagator=vZ.AsyncScopeManager}}To.registerContextPreservation=yZ});var Nc=g((_Se,Xq)=>{"use strict";Xq.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}});var Hr=g((pw,Jq)=>{"use strict";var Ao=pw&&pw.__assign||function(){return Ao=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Ao.apply(this,arguments)},EZ=require("http"),Qq=require("https"),dw=require("url"),dm=require("constants"),sf=Tt(),Lc=Nc(),_Z=function(){function e(){}return e.getCookie=function(t,r){var n="";if(t&&t.length&&typeof r=="string")for(var i=t+"=",o=r.split(";"),s=0;s<o.length;s++){var r=o[s];if(r=e.trim(r),r&&r.indexOf(i)===0){n=r.substring(i.length,o[s].length);break}}return n},e.trim=function(t){return typeof t=="string"?t.replace(/^\s+|\s+$/g,""):""},e.int32ArrayToBase64=function(t){var r=function(a,c){return String.fromCharCode(a>>c&255)},n=function(a){return r(a,24)+r(a,16)+r(a,8)+r(a,0)},i=t.map(n).join(""),o=Buffer.from?Buffer.from(i,"binary"):new Buffer(i,"binary"),s=o.toString("base64");return s.substr(0,s.indexOf("="))},e.random32=function(){return 4294967296*Math.random()|0},e.randomu32=function(){return e.random32()+2147483648},e.w3cTraceId=function(){for(var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],r="",n,i=0;i<4;i++)n=e.random32(),r+=t[n&15]+t[n>>4&15]+t[n>>8&15]+t[n>>12&15]+t[n>>16&15]+t[n>>20&15]+t[n>>24&15]+t[n>>28&15];var o=t[8+Math.random()*4|0];return r.substr(0,8)+r.substr(9,4)+"4"+r.substr(13,3)+o+r.substr(16,3)+r.substr(19,12)},e.w3cSpanId=function(){return e.w3cTraceId().substring(16)},e.isValidW3CId=function(t){return t.length===32&&t!=="00000000000000000000000000000000"},e.isArray=function(t){return Object.prototype.toString.call(t)==="[object Array]"},e.isError=function(t){return t instanceof Error},e.isPrimitive=function(t){var r=typeof t;return r==="string"||r==="number"||r==="boolean"},e.isDate=function(t){return Object.prototype.toString.call(t)==="[object Date]"},e.msToTimeSpan=function(t){(isNaN(t)||t<0)&&(t=0);var r=(t/1e3%60).toFixed(7).replace(/0{0,4}$/,""),n=""+Math.floor(t/(1e3*60))%60,i=""+Math.floor(t/(1e3*60*60))%24,o=Math.floor(t/(1e3*60*60*24));r=r.indexOf(".")<2?"0"+r:r,n=n.length<2?"0"+n:n,i=i.length<2?"0"+i:i;var s=o>0?o+".":"";return s+i+":"+n+":"+r},e.extractError=function(t){var r=t;return{message:t.message,code:r.code||r.id||""}},e.extractObject=function(t){return t instanceof Error?e.extractError(t):typeof t.toJSON=="function"?t.toJSON():t},e.validateStringMap=function(t){if(typeof t!="object"){sf.info("Invalid properties dropped from payload");return}var r={};for(var n in t){var i="",o=t[n],s=typeof o;if(e.isPrimitive(o))i=o.toString();else if(o===null||s==="undefined")i="";else if(s==="function"){sf.info("key: "+n+" was function; will not serialize");continue}else{var a=e.isArray(o)?o:e.extractObject(o);try{e.isPrimitive(a)?i=a:i=JSON.stringify(a)}catch(c){i=o.constructor.name.toString()+" (Error: "+c.message+")",sf.info("key: "+n+", could not be serialized")}}r[n]=i.substring(0,e.MAX_PROPERTY_LENGTH)}return r},e.canIncludeCorrelationHeader=function(t,r){var n=t&&t.config&&t.config.correlationHeaderExcludedDomains;if(!n||n.length==0||!r)return!0;for(var i=0;i<n.length;i++){var o=new RegExp(n[i].replace(/\./g,".").replace(/\*/g,".*"));if(o.test(new dw.URL(r).hostname))return!1}return!0},e.getCorrelationContextTarget=function(t,r){var n=t.headers&&t.headers[Lc.requestContextHeader];if(n)for(var i=n.split(","),o=0;o<i.length;++o){var s=i[o].split("=");if(s.length==2&&s[0]==r)return s[1]}},e.makeRequest=function(t,r,n,i){r&&r.indexOf("//")===0&&(r="https:"+r);var o=new dw.URL(r),s=Ao(Ao({},n),{host:o.hostname,port:o.port,path:o.pathname}),a=void 0;if(o.protocol==="https:"&&(a=t.proxyHttpsUrl||void 0),o.protocol==="http:"&&(a=t.proxyHttpUrl||void 0),a){a.indexOf("//")===0&&(a="http:"+a);var c=new dw.URL(a);c.protocol==="https:"?(sf.info("Proxies that use HTTPS are not supported"),a=void 0):s=Ao(Ao({},s),{host:c.hostname,port:c.port||"80",path:r,headers:Ao(Ao({},s.headers),{Host:o.hostname})})}var u=o.protocol==="https:"&&!a;return u&&t.httpsAgent!==void 0?s.agent=t.httpsAgent:!u&&t.httpAgent!==void 0?s.agent=t.httpAgent:u&&(s.agent=e.tlsRestrictedAgent),u?Qq.request(s,i):EZ.request(s,i)},e.safeIncludeCorrelationHeader=function(t,r,n){var i;if(typeof n=="string")i=n;else if(n instanceof Array)i=n.join(",");else if(n&&typeof n.toString=="function")try{i=n.toString()}catch(o){sf.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",o,n)}i?e.addCorrelationIdHeaderFromString(t,r,i):r.setHeader(Lc.requestContextHeader,Lc.requestContextSourceKey+"="+t.config.correlationId)},e.dumpObj=function(t){var r=Object.prototype.toString.call(t),n="";return r==="[object Error]"?n="{ stack: '"+t.stack+"', message: '"+t.message+"', name: '"+t.name+"'":n=JSON.stringify(t),r+n},e.addCorrelationIdHeaderFromString=function(t,r,n){var i=n.split(","),o=Lc.requestContextSourceKey+"=",s=i.some(function(a){return a.substring(0,o.length)===o});s||r.setHeader(Lc.requestContextHeader,n+","+Lc.requestContextSourceKey+"="+t.config.correlationId)},e._useKeepAlive=!process.env.APPLICATION_INSIGHTS_NO_HTTP_AGENT_KEEP_ALIVE,e.MAX_PROPERTY_LENGTH=8192,e.tlsRestrictedAgent=new Qq.Agent({keepAlive:e._useKeepAlive,maxSockets:e._useKeepAlive?25:1/0,secureOptions:dm.SSL_OP_NO_SSLv2|dm.SSL_OP_NO_SSLv3|dm.SSL_OP_NO_TLSv1|dm.SSL_OP_NO_TLSv1_1}),e}();Jq.exports=_Z});var Ys=g((CSe,Zq)=>{"use strict";var pm=Hr(),hw=Tt(),CZ=function(){function e(){}return e.queryCorrelationId=function(t,r){var n=t.profileQueryEndpoint+"/api/profiles/"+t.instrumentationKey+"/appId";if(e.completedLookups.hasOwnProperty(n)){r(e.completedLookups[n]);return}else if(e.pendingLookups[n]){e.pendingLookups[n].push(r);return}e.pendingLookups[n]=[r];var i=function(){if(!!e.pendingLookups[n]){var o={method:"GET",disableAppInsightsAutoCollection:!0};hw.info(e.TAG,o);var s=pm.makeRequest(t,n,o,function(a){if(a.statusCode===200){var c="";a.setEncoding("utf-8"),a.on("data",function(u){c+=u}),a.on("end",function(){hw.info(e.TAG,c);var u=e.correlationIdPrefix+c;e.completedLookups[n]=u,e.pendingLookups[n]&&e.pendingLookups[n].forEach(function(l){return l(u)}),delete e.pendingLookups[n]})}else a.statusCode>=400&&a.statusCode<500?(e.completedLookups[n]=void 0,delete e.pendingLookups[n]):setTimeout(i,t.correlationIdRetryIntervalMs)});s&&(s.on("error",function(a){hw.warn(e.TAG,a)}),s.end())}};setTimeout(i,0)},e.cancelCorrelationIdQuery=function(t,r){var n=t.profileQueryEndpoint+"/api/profiles/"+t.instrumentationKey+"/appId",i=e.pendingLookups[n];i&&(e.pendingLookups[n]=i.filter(function(o){return o!=r}),e.pendingLookups[n].length==0&&delete e.pendingLookups[n])},e.generateRequestId=function(t){if(t){t=t[0]=="|"?t:"|"+t,t[t.length-1]!=="."&&(t+=".");var r=(e.currentRootId++).toString(16);return e.appendSuffix(t,r,"_")}else return e.generateRootId()},e.getRootId=function(t){var r=t.indexOf(".");r<0&&(r=t.length);var n=t[0]==="|"?1:0;return t.substring(n,r)},e.generateRootId=function(){return"|"+pm.w3cTraceId()+"."},e.appendSuffix=function(t,r,n){if(t.length+r.length<e.requestIdMaxLength)return t+r+n;var i=e.requestIdMaxLength-9;if(t.length>i)for(;i>1;--i){var o=t[i-1];if(o==="."||o==="_")break}if(i<=1)return e.generateRootId();for(r=pm.randomu32().toString(16);r.length<8;)r="0"+r;return t.substring(0,i)+r+"#"},e.TAG="CorrelationIdManager",e.correlationIdPrefix="cid-v1:",e.w3cEnabled=!0,e.pendingLookups={},e.completedLookups={},e.requestIdMaxLength=1024,e.currentRootId=pm.randomu32(),e}();Zq.exports=CZ});var hm=g((wSe,e$)=>{"use strict";var Ut=Hr(),wZ=Ys(),SZ=function(){function e(t,r){if(this.traceFlag=e.DEFAULT_TRACE_FLAG,this.version=e.DEFAULT_VERSION,t&&typeof t=="string")if(t.split(",").length>1)this.traceId=Ut.w3cTraceId(),this.spanId=Ut.w3cTraceId().substr(0,16);else{var n=t.trim().split("-"),i=n.length;i>=4?(this.version=n[0],this.traceId=n[1],this.spanId=n[2],this.traceFlag=n[3]):(this.traceId=Ut.w3cTraceId(),this.spanId=Ut.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=e.DEFAULT_VERSION,this.traceId=Ut.w3cTraceId()),this.version==="00"&&i!==4&&(this.traceId=Ut.w3cTraceId(),this.spanId=Ut.w3cTraceId().substr(0,16)),this.version==="ff"&&(this.version=e.DEFAULT_VERSION,this.traceId=Ut.w3cTraceId(),this.spanId=Ut.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=e.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=e.DEFAULT_TRACE_FLAG,this.traceId=Ut.w3cTraceId()),e.isValidTraceId(this.traceId)||(this.traceId=Ut.w3cTraceId()),e.isValidSpanId(this.spanId)||(this.spanId=Ut.w3cTraceId().substr(0,16),this.traceId=Ut.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(r){this.parentId=r.slice();var o=wZ.getRootId(r);e.isValidTraceId(o)||(this.legacyRootId=o,o=Ut.w3cTraceId()),r.indexOf("|")!==-1&&(r=r.substring(1+r.substring(0,r.length-1).lastIndexOf("."),r.length-1)),this.traceId=o,this.spanId=r}else this.traceId=Ut.w3cTraceId(),this.spanId=Ut.w3cTraceId().substr(0,16)}return e.isValidTraceId=function(t){return t.match(/^[0-9a-f]{32}$/)&&t!=="00000000000000000000000000000000"},e.isValidSpanId=function(t){return t.match(/^[0-9a-f]{16}$/)&&t!=="0000000000000000"},e.formatOpenTelemetryTraceFlags=function(t){var r="0"+t.toString(16);return r.substring(r.length-2)},e.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},e.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},e.prototype.updateSpanId=function(){this.spanId=Ut.w3cTraceId().substr(0,16)},e.DEFAULT_TRACE_FLAG="01",e.DEFAULT_VERSION="00",e}();e$.exports=SZ});var mw=g((SSe,t$)=>{"use strict";var bZ=function(){function e(t){this.fieldmap=[],!!t&&(this.fieldmap=this.parseHeader(t))}return e.prototype.toString=function(){var t=this.fieldmap;return!t||t.length==0?null:t.join(", ")},e.validateKeyChars=function(t){var r=t.split("@");if(r.length==2){var n=r[0].trim(),i=r[1].trim(),o=Boolean(n.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),s=Boolean(i.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return o&&s}else if(r.length==1)return Boolean(t.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/));return!1},e.prototype.parseHeader=function(t){var r=[],n={},i=t.split(",");if(i.length>32)return null;for(var o=0,s=i;o<s.length;o++){var a=s[o],c=a.trim();if(c.length!==0){var u=c.split("=");if(u.length!==2||!e.validateKeyChars(u[0])||n[u[0]])return null;n[u[0]]=!0,r.push(c)}}return r},e.strict=!0,e}();t$.exports=bZ});var Ti=g((bSe,r$)=>{"use strict";var xZ=function(){function e(){}return e}();r$.exports=xZ});var i$=g((gw,n$)=>{"use strict";var TZ=gw&&gw.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),AZ=Ti(),IZ=function(e){TZ(t,e);function t(){var r=e.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return t}(AZ);n$.exports=IZ});var vw=g((xSe,o$)=>{"use strict";var RZ=function(){function e(){}return e}();o$.exports=RZ});var a$=g((TSe,s$)=>{"use strict";var PZ=function(){function e(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}return e}();s$.exports=PZ});var u$=g((yw,c$)=>{"use strict";var OZ=yw&&yw.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),DZ=vw(),NZ=function(e){OZ(t,e);function t(){return e.call(this)||this}return t}(DZ);c$.exports=NZ});var _w=g((ASe,l$)=>{"use strict";var Ew;(function(e){e[e.Measurement=0]="Measurement",e[e.Aggregation=1]="Aggregation"})(Ew||(Ew={}));l$.exports=Ew});var d$=g((ISe,f$)=>{"use strict";var LZ=_w(),kZ=function(){function e(){this.kind=LZ.Measurement}return e}();f$.exports=kZ});var h$=g((RSe,p$)=>{"use strict";var FZ=function(){function e(){this.ver=1,this.sampleRate=100,this.tags={}}return e}();p$.exports=FZ});var ww=g((Cw,m$)=>{"use strict";var MZ=Cw&&Cw.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),qZ=Ti(),$Z=function(e){MZ(t,e);function t(){var r=e.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return t}(qZ);m$.exports=$Z});var v$=g((Sw,g$)=>{"use strict";var jZ=Sw&&Sw.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),UZ=Ti(),HZ=function(e){jZ(t,e);function t(){var r=e.call(this)||this;return r.ver=2,r.exceptions=[],r.properties={},r.measurements={},r}return t}(UZ);g$.exports=HZ});var E$=g((PSe,y$)=>{"use strict";var BZ=function(){function e(){this.hasFullStack=!0,this.parsedStack=[]}return e}();y$.exports=BZ});var C$=g((bw,_$)=>{"use strict";var GZ=bw&&bw.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),WZ=Ti(),VZ=function(e){GZ(t,e);function t(){var r=e.call(this)||this;return r.ver=2,r.properties={},r}return t}(WZ);_$.exports=VZ});var S$=g((xw,w$)=>{"use strict";var zZ=xw&&xw.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),KZ=Ti(),YZ=function(e){zZ(t,e);function t(){var r=e.call(this)||this;return r.ver=2,r.metrics=[],r.properties={},r}return t}(KZ);w$.exports=YZ});var x$=g((Tw,b$)=>{"use strict";var XZ=Tw&&Tw.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),QZ=ww(),JZ=function(e){XZ(t,e);function t(){var r=e.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return t}(QZ);b$.exports=JZ});var A$=g((Aw,T$)=>{"use strict";var ZZ=Aw&&Aw.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),eee=Ti(),tee=function(e){ZZ(t,e);function t(){var r=e.call(this)||this;return r.ver=2,r.success=!0,r.properties={},r.measurements={},r}return t}(eee);T$.exports=tee});var R$=g((Iw,I$)=>{"use strict";var ree=Iw&&Iw.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),nee=Ti(),iee=function(e){ree(t,e);function t(){var r=e.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return t}(nee);I$.exports=iee});var O$=g((OSe,P$)=>{"use strict";var Rw;(function(e){e[e.Verbose=0]="Verbose",e[e.Information=1]="Information",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e[e.Critical=4]="Critical"})(Rw||(Rw={}));P$.exports=Rw});var N$=g((DSe,D$)=>{"use strict";var oee=function(){function e(){}return e}();D$.exports=oee});var Pw=g(At=>{"use strict";Object.defineProperty(At,"__esModule",{value:!0});At.AvailabilityData=i$();At.Base=vw();At.ContextTagKeys=a$();At.Data=u$();At.DataPoint=d$();At.DataPointType=_w();At.Domain=Ti();At.Envelope=h$();At.EventData=ww();At.ExceptionData=v$();At.ExceptionDetails=E$();At.MessageData=C$();At.MetricData=S$();At.PageViewData=x$();At.RemoteDependencyData=A$();At.RequestData=R$();At.SeverityLevel=O$();At.StackFrame=N$()});var L$=g(kc=>{"use strict";Object.defineProperty(kc,"__esModule",{value:!0});kc.domainSupportsProperties=kc.RemoteDependencyDataConstants=void 0;var Xs=Pw(),see=function(){function e(){}return e.TYPE_HTTP="Http",e.TYPE_AI="Http (tracked component)",e}();kc.RemoteDependencyDataConstants=see;function aee(e){return"properties"in e||e instanceof Xs.EventData||e instanceof Xs.ExceptionData||e instanceof Xs.MessageData||e instanceof Xs.MetricData||e instanceof Xs.PageViewData||e instanceof Xs.RemoteDependencyData||e instanceof Xs.RequestData}kc.domainSupportsProperties=aee});var F$=g(k$=>{"use strict";Object.defineProperty(k$,"__esModule",{value:!0})});var q$=g(M$=>{"use strict";Object.defineProperty(M$,"__esModule",{value:!0})});var j$=g($$=>{"use strict";Object.defineProperty($$,"__esModule",{value:!0})});var H$=g(U$=>{"use strict";Object.defineProperty(U$,"__esModule",{value:!0})});var G$=g(B$=>{"use strict";Object.defineProperty(B$,"__esModule",{value:!0})});var V$=g(W$=>{"use strict";Object.defineProperty(W$,"__esModule",{value:!0})});var K$=g(z$=>{"use strict";Object.defineProperty(z$,"__esModule",{value:!0})});var X$=g(Y$=>{"use strict";Object.defineProperty(Y$,"__esModule",{value:!0})});var J$=g(Q$=>{"use strict";Object.defineProperty(Q$,"__esModule",{value:!0})});var ej=g(Z$=>{"use strict";Object.defineProperty(Z$,"__esModule",{value:!0})});var rj=g(tj=>{"use strict";Object.defineProperty(tj,"__esModule",{value:!0})});var ij=g(nj=>{"use strict";Object.defineProperty(nj,"__esModule",{value:!0})});var oj=g(Nn=>{"use strict";Object.defineProperty(Nn,"__esModule",{value:!0});Nn.TelemetryType=Nn.TelemetryTypeString=Nn.baseTypeToTelemetryType=Nn.telemetryTypeToBaseType=void 0;function cee(e){switch(e){case Ht.Event:return"EventData";case Ht.Exception:return"ExceptionData";case Ht.Trace:return"MessageData";case Ht.Metric:return"MetricData";case Ht.Request:return"RequestData";case Ht.Dependency:return"RemoteDependencyData";case Ht.Availability:return"AvailabilityData";case Ht.PageView:return"PageViewData"}}Nn.telemetryTypeToBaseType=cee;function uee(e){switch(e){case"EventData":return Ht.Event;case"ExceptionData":return Ht.Exception;case"MessageData":return Ht.Trace;case"MetricData":return Ht.Metric;case"RequestData":return Ht.Request;case"RemoteDependencyData":return Ht.Dependency;case"AvailabilityData":return Ht.Availability;case"PageViewData":return Ht.PageView}}Nn.baseTypeToTelemetryType=uee;Nn.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"};var Ht;(function(e){e[e.Event=0]="Event",e[e.Exception=1]="Exception",e[e.Trace=2]="Trace",e[e.Metric=3]="Metric",e[e.Request=4]="Request",e[e.Dependency=5]="Dependency",e[e.Availability=6]="Availability",e[e.PageView=7]="PageView"})(Ht=Nn.TelemetryType||(Nn.TelemetryType={}))});var sj=g(Nt=>{"use strict";var lee=Nt&&Nt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Br=Nt&&Nt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&lee(t,e,r)};Object.defineProperty(Nt,"__esModule",{value:!0});Br(F$(),Nt);Br(q$(),Nt);Br(j$(),Nt);Br(H$(),Nt);Br(G$(),Nt);Br(V$(),Nt);Br(K$(),Nt);Br(X$(),Nt);Br(J$(),Nt);Br(ej(),Nt);Br(rj(),Nt);Br(ij(),Nt);Br(oj(),Nt)});var cj=g(aj=>{"use strict";Object.defineProperty(aj,"__esModule",{value:!0})});var lj=g(uj=>{"use strict";Object.defineProperty(uj,"__esModule",{value:!0})});var dj=g(fj=>{"use strict";Object.defineProperty(fj,"__esModule",{value:!0})});var hj=g(pj=>{"use strict";Object.defineProperty(pj,"__esModule",{value:!0})});var gj=g(mj=>{"use strict";Object.defineProperty(mj,"__esModule",{value:!0})});var yj=g(vj=>{"use strict";Object.defineProperty(vj,"__esModule",{value:!0})});var _j=g(Ej=>{"use strict";Object.defineProperty(Ej,"__esModule",{value:!0})});var wj=g(Cj=>{"use strict";Object.defineProperty(Cj,"__esModule",{value:!0})});var Sj=g(Sr=>{"use strict";var fee=Sr&&Sr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Io=Sr&&Sr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&fee(t,e,r)};Object.defineProperty(Sr,"__esModule",{value:!0});Io(cj(),Sr);Io(lj(),Sr);Io(dj(),Sr);Io(hj(),Sr);Io(gj(),Sr);Io(yj(),Sr);Io(_j(),Sr);Io(wj(),Sr)});var Zt=g(Yn=>{"use strict";var dee=Yn&&Yn.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),mm=Yn&&Yn.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&dee(t,e,r)};Object.defineProperty(Yn,"__esModule",{value:!0});mm(L$(),Yn);mm(Pw(),Yn);mm(sj(),Yn);mm(Sj(),Yn)});var Ow=g((obe,bj)=>{"use strict";var pee=function(){function e(){}return e.prototype.getUrl=function(){return this.url},e.prototype.RequestParser=function(){this.startTime=+new Date},e.prototype._setStatus=function(t,r){var n=+new Date;this.duration=n-this.startTime,this.statusCode=t;var i=this.properties||{};if(r){if(typeof r=="string")i.error=r;else if(r instanceof Error)i.error=r.message;else if(typeof r=="object")for(var o in r)i[o]=r[o]&&r[o].toString&&r[o].toString()}this.properties=i},e.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},e}();bj.exports=pee});var Lw=g((Nw,Tj)=>{"use strict";var hee=Nw&&Nw.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gm=require("url"),mee=Zt(),xj=Hr(),Gr=Nc(),gee=Ow(),Ro=Ys(),vee=mw(),Dw=hm(),yee=function(e){hee(t,e);function t(r,n){var i=e.call(this)||this;return r&&(i.method=r.method,i.url=i._getAbsoluteUrl(r),i.startTime=+new Date,i.socketRemoteAddress=r.socket&&r.socket.remoteAddress,i.parseHeaders(r,n),r.connection&&(i.connectionRemoteAddress=r.connection.remoteAddress,i.legacySocketRemoteAddress=r.connection.socket&&r.connection.socket.remoteAddress)),i}return t.prototype.onError=function(r,n){this._setStatus(void 0,r),n&&(this.duration=n)},t.prototype.onResponse=function(r,n){this._setStatus(r.statusCode,void 0),n&&(this.duration=n)},t.prototype.getRequestTelemetry=function(r){var n={id:this.requestId,name:this.method+" "+new gm.URL(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(r&&r.time?n.time=r.time:this.startTime&&(n.time=new Date(this.startTime)),r){for(var i in r)n[i]||(n[i]=r[i]);if(r.properties)for(var i in r.properties)n.properties[i]=r.properties[i]}return n},t.prototype.getRequestTags=function(r){var n={};for(var i in r)n[i]=r[i];return n[t.keys.locationIp]=r[t.keys.locationIp]||this._getIp(),n[t.keys.sessionId]=r[t.keys.sessionId]||this._getId("ai_session"),n[t.keys.userId]=r[t.keys.userId]||this._getId("ai_user"),n[t.keys.userAuthUserId]=r[t.keys.userAuthUserId]||this._getId("ai_authUser"),n[t.keys.operationName]=this.getOperationName(r),n[t.keys.operationParentId]=this.getOperationParentId(r),n[t.keys.operationId]=this.getOperationId(r),n},t.prototype.getOperationId=function(r){return r[t.keys.operationId]||this.operationId},t.prototype.getOperationParentId=function(r){return r[t.keys.operationParentId]||this.parentId||this.getOperationId(r)},t.prototype.getOperationName=function(r){return r[t.keys.operationName]||this.method+" "+new gm.URL(this.url).pathname},t.prototype.getRequestId=function(){return this.requestId},t.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},t.prototype.getTraceparent=function(){return this.traceparent},t.prototype.getTracestate=function(){return this.tracestate},t.prototype.getLegacyRootId=function(){return this.legacyRootId},t.prototype._getAbsoluteUrl=function(r){if(!r.headers)return r.url;var n=r.connection?r.connection.encrypted:null,i=n||r.headers["x-forwarded-proto"]=="https"?"https":"http",o=i+"://"+r.headers.host+"/",s=new gm.URL(r.url,o),a=s.pathname,c=s.search,u=gm.format({protocol:i,host:r.headers.host,pathname:a,search:c});return u},t.prototype._getIp=function(){var r=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,n=function(o){var s=r.exec(o);if(s)return s[0]},i=n(this.rawHeaders["x-forwarded-for"])||n(this.rawHeaders["x-client-ip"])||n(this.rawHeaders["x-real-ip"])||n(this.connectionRemoteAddress)||n(this.socketRemoteAddress)||n(this.legacySocketRemoteAddress);return!i&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&this.connectionRemoteAddress.substr(0,2)==="::"&&(i="127.0.0.1"),i},t.prototype._getId=function(r){var n=this.rawHeaders&&this.rawHeaders.cookie&&typeof this.rawHeaders.cookie=="string"&&this.rawHeaders.cookie||"",i=t.parseId(xj.getCookie(r,n));return i},t.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},t.prototype.parseHeaders=function(r,n){if(this.rawHeaders=r.headers||r.rawHeaders,this.userAgent=r.headers&&r.headers["user-agent"],this.sourceCorrelationId=xj.getCorrelationContextTarget(r,Gr.requestContextSourceKey),r.headers){var i=r.headers[Gr.traceStateHeader]?r.headers[Gr.traceStateHeader].toString():null,o=r.headers[Gr.traceparentHeader]?r.headers[Gr.traceparentHeader].toString():null,s=r.headers[Gr.requestIdHeader]?r.headers[Gr.requestIdHeader].toString():null,a=r.headers[Gr.parentIdHeader]?r.headers[Gr.parentIdHeader].toString():null,c=r.headers[Gr.rootIdHeader]?r.headers[Gr.rootIdHeader].toString():null;this.correlationContextHeader=r.headers[Gr.correlationContextHeader]?r.headers[Gr.correlationContextHeader].toString():null,Ro.w3cEnabled&&(o||i)?(this.traceparent=new Dw(o?o.toString():null),this.tracestate=o&&i&&new vee(i?i.toString():null),this.setBackCompatFromThisTraceContext()):s?Ro.w3cEnabled?(this.traceparent=new Dw(null,s),this.setBackCompatFromThisTraceContext()):(this.parentId=s,this.requestId=Ro.generateRequestId(this.parentId),this.operationId=Ro.getRootId(this.requestId)):Ro.w3cEnabled?(this.traceparent=new Dw,this.traceparent.parentId=a,this.traceparent.legacyRootId=c||a,this.setBackCompatFromThisTraceContext()):(this.parentId=a,this.requestId=Ro.generateRequestId(c||this.parentId),this.correlationContextHeader=null,this.operationId=Ro.getRootId(this.requestId)),n&&(this.requestId=n,this.operationId=Ro.getRootId(this.requestId))}},t.parseId=function(r){var n=r.split("|");return n.length>0?n[0]:""},t.keys=new mee.ContextTagKeys,t}(gee);Tj.exports=yee});var Bj=g((ge,Hj)=>{ge=Hj.exports=be;var qe;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?qe=function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:qe=function(){};ge.SEMVER_SPEC_VERSION="2.0.0";var kw=256,vm=Number.MAX_SAFE_INTEGER||9007199254740991,Fw=16,Be=ge.re=[],k=ge.src=[],Ce=0,Fc=Ce++;k[Fc]="0|[1-9]\\d*";var Mc=Ce++;k[Mc]="[0-9]+";var Mw=Ce++;k[Mw]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var Aj=Ce++;k[Aj]="("+k[Fc]+")\\.("+k[Fc]+")\\.("+k[Fc]+")";var Ij=Ce++;k[Ij]="("+k[Mc]+")\\.("+k[Mc]+")\\.("+k[Mc]+")";var qw=Ce++;k[qw]="(?:"+k[Fc]+"|"+k[Mw]+")";var $w=Ce++;k[$w]="(?:"+k[Mc]+"|"+k[Mw]+")";var jw=Ce++;k[jw]="(?:-("+k[qw]+"(?:\\."+k[qw]+")*))";var Uw=Ce++;k[Uw]="(?:-?("+k[$w]+"(?:\\."+k[$w]+")*))";var Hw=Ce++;k[Hw]="[0-9A-Za-z-]+";var af=Ce++;k[af]="(?:\\+("+k[Hw]+"(?:\\."+k[Hw]+")*))";var Bw=Ce++,Rj="v?"+k[Aj]+k[jw]+"?"+k[af]+"?";k[Bw]="^"+Rj+"$";var Gw="[v=\\s]*"+k[Ij]+k[Uw]+"?"+k[af]+"?",Ww=Ce++;k[Ww]="^"+Gw+"$";var qc=Ce++;k[qc]="((?:<|>)?=?)";var ym=Ce++;k[ym]=k[Mc]+"|x|X|\\*";var Em=Ce++;k[Em]=k[Fc]+"|x|X|\\*";var Qs=Ce++;k[Qs]="[v=\\s]*("+k[Em]+")(?:\\.("+k[Em]+")(?:\\.("+k[Em]+")(?:"+k[jw]+")?"+k[af]+"?)?)?";var $c=Ce++;k[$c]="[v=\\s]*("+k[ym]+")(?:\\.("+k[ym]+")(?:\\.("+k[ym]+")(?:"+k[Uw]+")?"+k[af]+"?)?)?";var Pj=Ce++;k[Pj]="^"+k[qc]+"\\s*"+k[Qs]+"$";var Oj=Ce++;k[Oj]="^"+k[qc]+"\\s*"+k[$c]+"$";var Dj=Ce++;k[Dj]="(?:^|[^\\d])(\\d{1,"+Fw+"})(?:\\.(\\d{1,"+Fw+"}))?(?:\\.(\\d{1,"+Fw+"}))?(?:$|[^\\d])";var _m=Ce++;k[_m]="(?:~>?)";var Cm=Ce++;k[Cm]="(\\s*)"+k[_m]+"\\s+";Be[Cm]=new RegExp(k[Cm],"g");var Eee="$1~",Nj=Ce++;k[Nj]="^"+k[_m]+k[Qs]+"$";var Lj=Ce++;k[Lj]="^"+k[_m]+k[$c]+"$";var wm=Ce++;k[wm]="(?:\\^)";var Sm=Ce++;k[Sm]="(\\s*)"+k[wm]+"\\s+";Be[Sm]=new RegExp(k[Sm],"g");var _ee="$1^",kj=Ce++;k[kj]="^"+k[wm]+k[Qs]+"$";var Fj=Ce++;k[Fj]="^"+k[wm]+k[$c]+"$";var Vw=Ce++;k[Vw]="^"+k[qc]+"\\s*("+Gw+")$|^$";var zw=Ce++;k[zw]="^"+k[qc]+"\\s*("+Rj+")$|^$";var cf=Ce++;k[cf]="(\\s*)"+k[qc]+"\\s*("+Gw+"|"+k[Qs]+")";Be[cf]=new RegExp(k[cf],"g");var Cee="$1$2$3",Mj=Ce++;k[Mj]="^\\s*("+k[Qs]+")\\s+-\\s+("+k[Qs]+")\\s*$";var qj=Ce++;k[qj]="^\\s*("+k[$c]+")\\s+-\\s+("+k[$c]+")\\s*$";var $j=Ce++;k[$j]="(<|>)?=?\\s*\\*";for(Po=0;Po<Ce;Po++)qe(Po,k[Po]),Be[Po]||(Be[Po]=new RegExp(k[Po]));var Po;ge.parse=Js;function Js(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof be)return e;if(typeof e!="string"||e.length>kw)return null;var r=t.loose?Be[Ww]:Be[Bw];if(!r.test(e))return null;try{return new be(e,t)}catch(n){return null}}ge.valid=wee;function wee(e,t){var r=Js(e,t);return r?r.version:null}ge.clean=See;function See(e,t){var r=Js(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}ge.SemVer=be;function be(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof be){if(e.loose===t.loose)return e;e=e.version}else if(typeof e!="string")throw new TypeError("Invalid Version: "+e);if(e.length>kw)throw new TypeError("version is longer than "+kw+" characters");if(!(this instanceof be))return new be(e,t);qe("SemVer",e,t),this.options=t,this.loose=!!t.loose;var r=e.trim().match(t.loose?Be[Ww]:Be[Bw]);if(!r)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>vm||this.major<0)throw new TypeError("Invalid major version");if(this.minor>vm||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>vm||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var i=+n;if(i>=0&&i<vm)return i}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}be.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};be.prototype.toString=function(){return this.version};be.prototype.compare=function(e){return qe("SemVer.compare",this.version,this.options,e),e instanceof be||(e=new be(e,this.options)),this.compareMain(e)||this.comparePre(e)};be.prototype.compareMain=function(e){return e instanceof be||(e=new be(e,this.options)),jc(this.major,e.major)||jc(this.minor,e.minor)||jc(this.patch,e.patch)};be.prototype.comparePre=function(e){if(e instanceof be||(e=new be(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],n=e.prerelease[t];if(qe("prerelease compare",t,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return jc(r,n)}while(++t)};be.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this};ge.inc=bee;function bee(e,t,r,n){typeof r=="string"&&(n=r,r=void 0);try{return new be(e,r).inc(t,n).version}catch(i){return null}}ge.diff=xee;function xee(e,t){if(Kw(e,t))return null;var r=Js(e),n=Js(t),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var o="prerelease"}for(var s in r)if((s==="major"||s==="minor"||s==="patch")&&r[s]!==n[s])return i+s;return o}ge.compareIdentifiers=jc;var jj=/^[0-9]+$/;function jc(e,t){var r=jj.test(e),n=jj.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}ge.rcompareIdentifiers=Tee;function Tee(e,t){return jc(t,e)}ge.major=Aee;function Aee(e,t){return new be(e,t).major}ge.minor=Iee;function Iee(e,t){return new be(e,t).minor}ge.patch=Ree;function Ree(e,t){return new be(e,t).patch}ge.compare=Ai;function Ai(e,t,r){return new be(e,r).compare(new be(t,r))}ge.compareLoose=Pee;function Pee(e,t){return Ai(e,t,!0)}ge.rcompare=Oee;function Oee(e,t,r){return Ai(t,e,r)}ge.sort=Dee;function Dee(e,t){return e.sort(function(r,n){return ge.compare(r,n,t)})}ge.rsort=Nee;function Nee(e,t){return e.sort(function(r,n){return ge.rcompare(r,n,t)})}ge.gt=uf;function uf(e,t,r){return Ai(e,t,r)>0}ge.lt=bm;function bm(e,t,r){return Ai(e,t,r)<0}ge.eq=Kw;function Kw(e,t,r){return Ai(e,t,r)===0}ge.neq=Uj;function Uj(e,t,r){return Ai(e,t,r)!==0}ge.gte=Yw;function Yw(e,t,r){return Ai(e,t,r)>=0}ge.lte=Xw;function Xw(e,t,r){return Ai(e,t,r)<=0}ge.cmp=xm;function xm(e,t,r,n){switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return Kw(e,r,n);case"!=":return Uj(e,r,n);case">":return uf(e,r,n);case">=":return Yw(e,r,n);case"<":return bm(e,r,n);case"<=":return Xw(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}ge.Comparator=pn;function pn(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof pn){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof pn))return new pn(e,t);qe("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===lf?this.value="":this.value=this.operator+this.semver.version,qe("comp",this)}var lf={};pn.prototype.parse=function(e){var t=this.options.loose?Be[Vw]:Be[zw],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],this.operator==="="&&(this.operator=""),r[2]?this.semver=new be(r[2],this.options.loose):this.semver=lf};pn.prototype.toString=function(){return this.value};pn.prototype.test=function(e){return qe("Comparator.test",e,this.options.loose),this.semver===lf?!0:(typeof e=="string"&&(e=new be(e,this.options)),xm(e,this.operator,this.semver,this.options))};pn.prototype.intersects=function(e,t){if(!(e instanceof pn))throw new TypeError("a Comparator is required");(!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1});var r;if(this.operator==="")return r=new at(e.value,t),Tm(this.value,r,t);if(e.operator==="")return r=new at(this.value,t),Tm(e.semver,r,t);var n=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),o=this.semver.version===e.semver.version,s=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),a=xm(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),c=xm(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return n||i||o&&s||a||c};ge.Range=at;function at(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof at)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new at(e.raw,t);if(e instanceof pn)return new at(e.value,t);if(!(this instanceof at))return new at(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(r){return this.parseRange(r.trim())},this).filter(function(r){return r.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}at.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim(),this.range};at.prototype.toString=function(){return this.range};at.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var r=t?Be[qj]:Be[Mj];e=e.replace(r,Bee),qe("hyphen replace",e),e=e.replace(Be[cf],Cee),qe("comparator trim",e,Be[cf]),e=e.replace(Be[Cm],Eee),e=e.replace(Be[Sm],_ee),e=e.split(/\s+/).join(" ");var n=t?Be[Vw]:Be[zw],i=e.split(" ").map(function(o){return kee(o,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter(function(o){return!!o.match(n)})),i=i.map(function(o){return new pn(o,this.options)},this),i};at.prototype.intersects=function(e,t){if(!(e instanceof at))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(n){return e.set.some(function(i){return i.every(function(o){return n.intersects(o,t)})})})})};ge.toComparators=Lee;function Lee(e,t){return new at(e,t).set.map(function(r){return r.map(function(n){return n.value}).join(" ").trim().split(" ")})}function kee(e,t){return qe("comp",e,t),e=qee(e,t),qe("caret",e),e=Fee(e,t),qe("tildes",e),e=jee(e,t),qe("xrange",e),e=Hee(e,t),qe("stars",e),e}function ur(e){return!e||e.toLowerCase()==="x"||e==="*"}function Fee(e,t){return e.trim().split(/\s+/).map(function(r){return Mee(r,t)}).join(" ")}function Mee(e,t){var r=t.loose?Be[Lj]:Be[Nj];return e.replace(r,function(n,i,o,s,a){qe("tilde",e,n,i,o,s,a);var c;return ur(i)?c="":ur(o)?c=">="+i+".0.0 <"+(+i+1)+".0.0":ur(s)?c=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":a?(qe("replaceTilde pr",a),c=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0"):c=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0",qe("tilde return",c),c})}function qee(e,t){return e.trim().split(/\s+/).map(function(r){return $ee(r,t)}).join(" ")}function $ee(e,t){qe("caret",e,t);var r=t.loose?Be[Fj]:Be[kj];return e.replace(r,function(n,i,o,s,a){qe("caret",e,n,i,o,s,a);var c;return ur(i)?c="":ur(o)?c=">="+i+".0.0 <"+(+i+1)+".0.0":ur(s)?i==="0"?c=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":c=">="+i+"."+o+".0 <"+(+i+1)+".0.0":a?(qe("replaceCaret pr",a),i==="0"?o==="0"?c=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+o+"."+(+s+1):c=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0":c=">="+i+"."+o+"."+s+"-"+a+" <"+(+i+1)+".0.0"):(qe("no pr"),i==="0"?o==="0"?c=">="+i+"."+o+"."+s+" <"+i+"."+o+"."+(+s+1):c=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0":c=">="+i+"."+o+"."+s+" <"+(+i+1)+".0.0"),qe("caret return",c),c})}function jee(e,t){return qe("replaceXRanges",e,t),e.split(/\s+/).map(function(r){return Uee(r,t)}).join(" ")}function Uee(e,t){e=e.trim();var r=t.loose?Be[Oj]:Be[Pj];return e.replace(r,function(n,i,o,s,a,c){qe("xRange",e,n,i,o,s,a,c);var u=ur(o),l=u||ur(s),f=l||ur(a),d=f;return i==="="&&d&&(i=""),u?i===">"||i==="<"?n="<0.0.0":n="*":i&&d?(l&&(s=0),a=0,i===">"?(i=">=",l?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",l?o=+o+1:s=+s+1),n=i+o+"."+s+"."+a):l?n=">="+o+".0.0 <"+(+o+1)+".0.0":f&&(n=">="+o+"."+s+".0 <"+o+"."+(+s+1)+".0"),qe("xRange return",n),n})}function Hee(e,t){return qe("replaceStars",e,t),e.trim().replace(Be[$j],"")}function Bee(e,t,r,n,i,o,s,a,c,u,l,f,d){return ur(r)?t="":ur(n)?t=">="+r+".0.0":ur(i)?t=">="+r+"."+n+".0":t=">="+t,ur(c)?a="":ur(u)?a="<"+(+c+1)+".0.0":ur(l)?a="<"+c+"."+(+u+1)+".0":f?a="<="+c+"."+u+"."+l+"-"+f:a="<="+a,(t+" "+a).trim()}at.prototype.test=function(e){if(!e)return!1;typeof e=="string"&&(e=new be(e,this.options));for(var t=0;t<this.set.length;t++)if(Gee(this.set[t],e,this.options))return!0;return!1};function Gee(e,t,r){for(var n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(n=0;n<e.length;n++)if(qe(e[n].semver),e[n].semver!==lf&&e[n].semver.prerelease.length>0){var i=e[n].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}ge.satisfies=Tm;function Tm(e,t,r){try{t=new at(t,r)}catch(n){return!1}return t.test(e)}ge.maxSatisfying=Wee;function Wee(e,t,r){var n=null,i=null;try{var o=new at(t,r)}catch(s){return null}return e.forEach(function(s){o.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new be(n,r))}),n}ge.minSatisfying=Vee;function Vee(e,t,r){var n=null,i=null;try{var o=new at(t,r)}catch(s){return null}return e.forEach(function(s){o.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new be(n,r))}),n}ge.minVersion=zee;function zee(e,t){e=new at(e,t);var r=new be("0.0.0");if(e.test(r)||(r=new be("0.0.0-0"),e.test(r)))return r;r=null;for(var n=0;n<e.set.length;++n){var i=e.set[n];i.forEach(function(o){var s=new be(o.semver.version);switch(o.operator){case">":s.prerelease.length===0?s.patch++:s.prerelease.push(0),s.raw=s.format();case"":case">=":(!r||uf(r,s))&&(r=s);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+o.operator)}})}return r&&e.test(r)?r:null}ge.validRange=Kee;function Kee(e,t){try{return new at(e,t).range||"*"}catch(r){return null}}ge.ltr=Yee;function Yee(e,t,r){return Qw(e,t,"<",r)}ge.gtr=Xee;function Xee(e,t,r){return Qw(e,t,">",r)}ge.outside=Qw;function Qw(e,t,r,n){e=new be(e,n),t=new at(t,n);var i,o,s,a,c;switch(r){case">":i=uf,o=Xw,s=bm,a=">",c=">=";break;case"<":i=bm,o=Yw,s=uf,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Tm(e,t,n))return!1;for(var u=0;u<t.set.length;++u){var l=t.set[u],f=null,d=null;if(l.forEach(function(p){p.semver===lf&&(p=new pn(">=0.0.0")),f=f||p,d=d||p,i(p.semver,f.semver,n)?f=p:s(p.semver,d.semver,n)&&(d=p)}),f.operator===a||f.operator===c||(!d.operator||d.operator===a)&&o(e,d.semver))return!1;if(d.operator===c&&s(e,d.semver))return!1}return!0}ge.prerelease=Qee;function Qee(e,t){var r=Js(e,t);return r&&r.prerelease.length?r.prerelease:null}ge.intersects=Jee;function Jee(e,t,r){return e=new at(e,r),t=new at(t,r),e.intersects(t)}ge.coerce=Zee;function Zee(e){if(e instanceof be)return e;if(typeof e!="string")return null;var t=e.match(Be[Dj]);return t==null?null:Js(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}});var Am=g((sbe,Vj)=>{"use strict";function Jw(e){return typeof e=="function"}var lr=console.error.bind(console);function ff(e,t,r){var n=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:n,writable:!0,value:r})}function df(e){e&&e.logger&&(Jw(e.logger)?lr=e.logger:lr("new logger isn't a function, not replacing"))}function Gj(e,t,r){if(!e||!e[t]){lr("no original function "+t+" to wrap");return}if(!r){lr("no wrapper function"),lr(new Error().stack);return}if(!Jw(e[t])||!Jw(r)){lr("original object and wrapper must be functions");return}var n=e[t],i=r(n,t);return ff(i,"__original",n),ff(i,"__unwrap",function(){e[t]===i&&ff(e,t,n)}),ff(i,"__wrapped",!0),ff(e,t,i),i}function ete(e,t,r){if(e)Array.isArray(e)||(e=[e]);else{lr("must provide one or more modules to patch"),lr(new Error().stack);return}if(!(t&&Array.isArray(t))){lr("must provide one or more functions to wrap on modules");return}e.forEach(function(n){t.forEach(function(i){Gj(n,i,r)})})}function Wj(e,t){if(!e||!e[t]){lr("no function to unwrap."),lr(new Error().stack);return}if(!e[t].__unwrap)lr("no original to unwrap to -- has "+t+" already been unwrapped?");else return e[t].__unwrap()}function tte(e,t){if(e)Array.isArray(e)||(e=[e]);else{lr("must provide one or more modules to patch"),lr(new Error().stack);return}if(!(t&&Array.isArray(t))){lr("must provide one or more functions to unwrap on modules");return}e.forEach(function(r){t.forEach(function(n){Wj(r,n)})})}df.wrap=Gj;df.massWrap=ete;df.unwrap=Wj;df.massUnwrap=tte;Vj.exports=df});var Pm=g((abe,Xj)=>{"use strict";var zj=Am(),Uc=zj.wrap,Im=zj.unwrap,Ii="wrap@before";function Rm(e,t,r){var n=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:n,writable:!0,value:r})}function rte(e,t){for(var r=t.length,n=0;n<r;n++){var i=t[n],o=e[Ii];if(typeof o=="function")o(i);else if(Array.isArray(o))for(var s=o.length,a=0;a<s;a++)o[a](i)}}function Kj(e,t){var r;return r=e._events&&e._events[t],Array.isArray(r)||(r?r=[r]:r=[]),r}function nte(e,t,r){var n=Kj(e,t),i=n.filter(function(o){return r.indexOf(o)===-1});i.length>0&&rte(e,i)}function Yj(e,t){if(!!e){var r=e;if(typeof e=="function")r=t(e);else if(Array.isArray(e)){r=[];for(var n=0;n<e.length;n++)r[n]=t(e[n])}return r}}Xj.exports=function(t,r,n){if(!t||!t.on||!t.addListener||!t.removeListener||!t.emit)throw new Error("can only wrap real EEs");if(!r)throw new Error("must have function to run on listener addition");if(!n)throw new Error("must have function to wrap listeners when emitting");function i(s){return function(c,u){var l=Kj(this,c).slice();try{var f=s.call(this,c,u);return nte(this,c,l),f}finally{this.on.__wrapped||Uc(this,"on",i),this.addListener.__wrapped||Uc(this,"addListener",i)}}}function o(s){return function(c){if(!this._events||!this._events[c])return s.apply(this,arguments);var u=this._events[c];function l(f){return function(){this._events[c]=u;try{return f.apply(this,arguments)}finally{u=this._events[c],this._events[c]=Yj(u,n)}}}Uc(this,"removeListener",l);try{return this._events[c]=Yj(u,n),s.apply(this,arguments)}finally{Im(this,"removeListener"),this._events[c]=u}}}t[Ii]?typeof t[Ii]=="function"?Rm(t,Ii,[t[Ii],r]):Array.isArray(t[Ii])&&t[Ii].push(r):Rm(t,Ii,r),t.__wrapped||(Uc(t,"addListener",i),Uc(t,"on",i),Uc(t,"emit",o),Rm(t,"__unwrap",function(){Im(t,"addListener"),Im(t,"on"),Im(t,"emit"),delete t[Ii],delete t.__wrapped}),Rm(t,"__wrapped",!0))}});var eU=g((cbe,Zj)=>{"use strict";var De=require("util"),Ri=require("assert"),ite=Pm(),Ze=require("async_hooks"),pf="cls@contexts",hf="error@context",ct=process.env.DEBUG_CLS_HOOKED,Ne=-1;Zj.exports={getNamespace:Qj,createNamespace:ote,destroyNamespace:Jj,reset:ste,ERROR_SYMBOL:hf};function hn(e){this.name=e,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}hn.prototype.set=function(t,r){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[t]=r,ct){let n=" ".repeat(this._indent<0?0:this._indent);it(n+"CONTEXT-SET KEY:"+t+"="+r+" in ns:"+this.name+" currentUid:"+Ne+" active:"+De.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return r};hn.prototype.get=function(t){if(!this.active){if(ct){let r=Ze.currentId(),n=Ze.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);it(`${i}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${t}=undefined currentUid:${Ne} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length}`)}return}if(ct){let r=Ze.executionAsyncId(),n=Ze.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);it(i+"CONTEXT-GETTING KEY:"+t+"="+this.active[t]+" ("+this.name+") currentUid:"+Ne+" active:"+De.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),it(`${i}CONTEXT-GETTING KEY: (${this.name}) ${t}=${this.active[t]} currentUid:${Ne} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length} active:${De.inspect(this.active)}`)}return this.active[t]};hn.prototype.createContext=function(){let t=Object.create(this.active?this.active:Object.prototype);if(t._ns_name=this.name,t.id=Ne,ct){let r=Ze.executionAsyncId(),n=Ze.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);it(`${i}CONTEXT-CREATED Context: (${this.name}) currentUid:${Ne} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length} context:${De.inspect(t,{showHidden:!0,depth:2,colors:!0})}`)}return t};hn.prototype.run=function(t){let r=this.createContext();this.enter(r);try{if(ct){let n=Ze.triggerAsyncId(),i=Ze.executionAsyncId(),o=" ".repeat(this._indent<0?0:this._indent);it(`${o}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${Ne} triggerId:${n} asyncHooksCurrentId:${i} len:${this._set.length} context:${De.inspect(r)}`)}return t(r),r}catch(n){throw n&&(n[hf]=r),n}finally{if(ct){let n=Ze.triggerAsyncId(),i=Ze.executionAsyncId(),o=" ".repeat(this._indent<0?0:this._indent);it(`${o}CONTEXT-RUN END: (${this.name}) currentUid:${Ne} triggerId:${n} asyncHooksCurrentId:${i} len:${this._set.length} ${De.inspect(r)}`)}this.exit(r)}};hn.prototype.runAndReturn=function(t){let r;return this.run(function(n){r=t(n)}),r};hn.prototype.runPromise=function(t){let r=this.createContext();this.enter(r);let n=t(r);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return ct&&it("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+Ne+" len:"+this._set.length+" "+De.inspect(r)),n.then(i=>(ct&&it("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+Ne+" len:"+this._set.length+" "+De.inspect(r)),this.exit(r),i)).catch(i=>{throw i[hf]=r,ct&&it("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+Ne+" len:"+this._set.length+" "+De.inspect(r)),this.exit(r),i})};hn.prototype.bind=function(t,r){r||(this.active?r=this.active:r=this.createContext());let n=this;return function(){n.enter(r);try{return t.apply(this,arguments)}catch(o){throw o&&(o[hf]=r),o}finally{n.exit(r)}}};hn.prototype.enter=function(t){if(Ri.ok(t,"context must be provided for entering"),ct){let r=Ze.executionAsyncId(),n=Ze.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);it(`${i}CONTEXT-ENTER: (${this.name}) currentUid:${Ne} triggerId:${n} asyncHooksCurrentId:${r} len:${this._set.length} ${De.inspect(t)}`)}this._set.push(this.active),this.active=t};hn.prototype.exit=function(t){if(Ri.ok(t,"context must be provided for exiting"),ct){let n=Ze.executionAsyncId(),i=Ze.triggerAsyncId(),o=" ".repeat(this._indent<0?0:this._indent);it(`${o}CONTEXT-EXIT: (${this.name}) currentUid:${Ne} triggerId:${i} asyncHooksCurrentId:${n} len:${this._set.length} ${De.inspect(t)}`)}if(this.active===t){Ri.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let r=this._set.lastIndexOf(t);r<0?(ct&&it("??ERROR?? context exiting but not entered - ignoring: "+De.inspect(t)),Ri.ok(r>=0,`context not currently entered; can't exit. 
`+De.inspect(this)+`
`+De.inspect(t))):(Ri.ok(r,"can't remove top context"),this._set.splice(r,1))};hn.prototype.bindEmitter=function(t){Ri.ok(t.on&&t.addListener&&t.emit,"can only bind real EEs");let r=this,n="context@"+this.name;function i(s){!s||(s[pf]||(s[pf]=Object.create(null)),s[pf][n]={namespace:r,context:r.active})}function o(s){if(!(s&&s[pf]))return s;let a=s,c=s[pf];return Object.keys(c).forEach(function(u){let l=c[u];a=l.namespace.bind(a,l.context)}),a}ite(t,i,o)};hn.prototype.fromException=function(t){return t[hf]};function Qj(e){return process.namespaces[e]}function ote(e){Ri.ok(e,"namespace must be given a name."),ct&&it(`NS-CREATING NAMESPACE (${e})`);let t=new hn(e);return t.id=Ne,Ze.createHook({init(n,i,o,s){if(Ne=Ze.executionAsyncId(),t.active){if(t._contexts.set(n,t.active),ct){let a=" ".repeat(t._indent<0?0:t._indent);it(`${a}INIT [${i}] (${e}) asyncId:${n} currentUid:${Ne} triggerId:${o} active:${De.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}}else if(Ne===0){let a=Ze.triggerAsyncId(),c=t._contexts.get(a);if(c){if(t._contexts.set(n,c),ct){let u=" ".repeat(t._indent<0?0:t._indent);it(`${u}INIT USING CONTEXT FROM TRIGGERID [${i}] (${e}) asyncId:${n} currentUid:${Ne} triggerId:${a} active:${De.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}}else if(ct){let u=" ".repeat(t._indent<0?0:t._indent);it(`${u}INIT MISSING CONTEXT [${i}] (${e}) asyncId:${n} currentUid:${Ne} triggerId:${a} active:${De.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}}if(ct&&i==="PROMISE"){it(De.inspect(s,{showHidden:!0}));let a=s.parentId,c=" ".repeat(t._indent<0?0:t._indent);it(`${c}INIT RESOURCE-PROMISE [${i}] (${e}) parentId:${a} asyncId:${n} currentUid:${Ne} triggerId:${o} active:${De.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}},before(n){Ne=Ze.executionAsyncId();let i;if(i=t._contexts.get(n)||t._contexts.get(Ne),i){if(ct){let o=Ze.triggerAsyncId(),s=" ".repeat(t._indent<0?0:t._indent);it(`${s}BEFORE (${e}) asyncId:${n} currentUid:${Ne} triggerId:${o} active:${De.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${De.inspect(i)}`),t._indent+=2}t.enter(i)}else if(ct){let o=Ze.triggerAsyncId(),s=" ".repeat(t._indent<0?0:t._indent);it(`${s}BEFORE MISSING CONTEXT (${e}) asyncId:${n} currentUid:${Ne} triggerId:${o} active:${De.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${De.inspect(t._contexts,{showHidden:!0,depth:2,colors:!0})}`),t._indent+=2}},after(n){Ne=Ze.executionAsyncId();let i;if(i=t._contexts.get(n)||t._contexts.get(Ne),i){if(ct){let o=Ze.triggerAsyncId();t._indent-=2;let s=" ".repeat(t._indent<0?0:t._indent);it(`${s}AFTER (${e}) asyncId:${n} currentUid:${Ne} triggerId:${o} active:${De.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${De.inspect(i)}`)}t.exit(i)}else if(ct){let o=Ze.triggerAsyncId();t._indent-=2;let s=" ".repeat(t._indent<0?0:t._indent);it(`${s}AFTER MISSING CONTEXT (${e}) asyncId:${n} currentUid:${Ne} triggerId:${o} active:${De.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${De.inspect(i)}`)}},destroy(n){if(Ne=Ze.executionAsyncId(),ct){let i=Ze.triggerAsyncId(),o=" ".repeat(t._indent<0?0:t._indent);it(`${o}DESTROY (${e}) currentUid:${Ne} asyncId:${n} triggerId:${i} active:${De.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${De.inspect(t._contexts.get(Ne))}`)}t._contexts.delete(n)}}).enable(),process.namespaces[e]=t,t}function Jj(e){let t=Qj(e);Ri.ok(t,`can't delete nonexistent namespace! "`+e+'"'),Ri.ok(t.id,"don't assign to process.namespaces directly! "+De.inspect(t)),process.namespaces[e]=null}function ste(){process.namespaces&&Object.keys(process.namespaces).forEach(function(e){Jj(e)}),process.namespaces=Object.create(null)}process.namespaces={};function it(...e){ct&&process._rawDebug(`${De.format(...e)}`)}});var rU=g((ube,tU)=>{"use strict";function ate(){}tU.exports=function(){let t=this._hooks,r=this._state,n=process.nextTick;process.nextTick=function(){if(!r.enabled)return n.apply(process,arguments);let i=new Array(arguments.length);for(let c=0;c<arguments.length;c++)i[c]=arguments[c];let o=i[0];if(typeof o!="function")throw new TypeError("callback is not a function");let s=new ate,a=--r.counter;return t.init.call(s,a,0,null,null),i[0]=function(){t.pre.call(s,a);let c=!0;try{o.apply(this,arguments),c=!1}finally{c&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){t.post.call(s,a,!0),t.destroy.call(null,a)})}t.post.call(s,a,!1),t.destroy.call(null,a)},n.apply(process,i)}}});var iU=g((lbe,nU)=>{"use strict";function cte(){}nU.exports=function(){let t=this._hooks,r=this._state,n=global.Promise,i=n.prototype.then;n.prototype.then=c;function o(u,l,f,d){return typeof u!="function"?d?s(f):a(f):function(){t.pre.call(l,f);try{return u.apply(this,arguments)}finally{t.post.call(l,f,!1),t.destroy.call(null,f)}}}function s(u){return function(f){return t.destroy.call(null,u),f}}function a(u){return function(f){throw t.destroy.call(null,u),f}}function c(u,l){if(!r.enabled)return i.call(this,u,l);let f=new cte,d=--r.counter;return t.init.call(f,d,0,null,null),i.call(this,o(u,f,d,!0),o(l,f,d,!1))}}});var sU=g((fbe,oU)=>{"use strict";var Wr=require("timers");function ute(){}function lte(){}function fte(){}var dte=new Map,pte=new Map,hte=new Map,Zw=null,eS=!1;oU.exports=function(){tS(this._hooks,this._state,"setTimeout","clearTimeout",ute,dte,!0),tS(this._hooks,this._state,"setInterval","clearInterval",lte,pte,!1),tS(this._hooks,this._state,"setImmediate","clearImmediate",fte,hte,!0),global.setTimeout=Wr.setTimeout,global.setInterval=Wr.setInterval,global.setImmediate=Wr.setImmediate,global.clearTimeout=Wr.clearTimeout,global.clearInterval=Wr.clearInterval,global.clearImmediate=Wr.clearImmediate};function tS(e,t,r,n,i,o,s){let a=Wr[r],c=Wr[n];Wr[r]=function(){if(!t.enabled)return a.apply(Wr,arguments);let u=new Array(arguments.length);for(let h=0;h<arguments.length;h++)u[h]=arguments[h];let l=u[0];if(typeof l!="function")throw new TypeError('"callback" argument must be a function');let f=new i,d=--t.counter,p;return e.init.call(f,d,0,null,null),u[0]=function(){Zw=p,e.pre.call(f,d);let h=!0;try{l.apply(this,arguments),h=!1}finally{h&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){e.post.call(f,d,!0),o.delete(p),e.destroy.call(null,d)})}e.post.call(f,d,!1),Zw=null,(s||eS)&&(eS=!1,o.delete(p),e.destroy.call(null,d))},p=a.apply(Wr,u),o.set(p,d),p},Wr[n]=function(u){if(Zw===u&&u!==null)eS=!0;else if(o.has(u)){let l=o.get(u);o.delete(u),e.destroy.call(null,l)}c.apply(Wr,arguments)}}});var rS=g((dbe,mte)=>{mte.exports={name:"async-hook-jl",description:"Inspect the life of handle objects in node",version:"1.7.6",author:"Andreas Madsen <amwebdk@gmail.com>",main:"./index.js",scripts:{test:"node ./test/runner.js && eslint ."},repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},keywords:["async","async hooks","inspect","async wrap"],license:"MIT",dependencies:{"stack-chain":"^1.3.7"},devDependencies:{async:"1.5.x","cli-color":"1.1.x",eslint:"^3.4.0",endpoint:"0.4.x"},engines:{node:"^4.7 || >=6.9 || >=7.3"}}});var uU=g((pbe,cU)=>{"use strict";var mf=process.binding("async_wrap"),gte=mf.Providers.TIMERWRAP,aU={nextTick:rU(),promise:iU(),timers:sU()},gf=new Set;function vte(){this.enabled=!1,this.counter=0}function nS(){let e=this.initFns=[],t=this.preFns=[],r=this.postFns=[],n=this.destroyFns=[];this.init=function(i,o,s,a){if(o===gte){gf.add(i);return}for(let c of e)c(i,this,o,s,a)},this.pre=function(i){if(!gf.has(i))for(let o of t)o(i,this)},this.post=function(i,o){if(!gf.has(i))for(let s of r)s(i,this,o)},this.destroy=function(i){if(gf.has(i)){gf.delete(i);return}for(let o of n)o(i)}}nS.prototype.add=function(e){e.init&&this.initFns.push(e.init),e.pre&&this.preFns.push(e.pre),e.post&&this.postFns.push(e.post),e.destroy&&this.destroyFns.push(e.destroy)};function Om(e,t){let r=e.indexOf(t);r!==-1&&e.splice(r,1)}nS.prototype.remove=function(e){e.init&&Om(this.initFns,e.init),e.pre&&Om(this.preFns,e.pre),e.post&&Om(this.postFns,e.post),e.destroy&&Om(this.destroyFns,e.destroy)};function vf(){this._state=new vte,this._hooks=new nS,this.version=rS().version,this.providers=mf.Providers;for(let e of Object.keys(aU))aU[e].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),mf.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}cU.exports=vf;vf.prototype.addHooks=function(e){this._hooks.add(e)};vf.prototype.removeHooks=function(e){this._hooks.remove(e)};vf.prototype.enable=function(){this._state.enabled=!0,mf.enable()};vf.prototype.disable=function(){this._state.enabled=!1,mf.disable()}});var iS=g((hbe,yte)=>{yte.exports={name:"stack-chain",description:"API for combining call site modifiers",version:"1.3.7",author:"Andreas Madsen <amwebdk@gmail.com>",scripts:{test:"tap ./test/simple"},repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},keywords:["stack","chain","trace","call site","concat","format"],devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},license:"MIT"}});var fU=g((mbe,lU)=>{function Ete(e){try{return Error.prototype.toString.call(e)}catch(t){try{return"<error: "+t+">"}catch(r){return"<error>"}}}lU.exports=function(t,r){var n=[];n.push(Ete(t));for(var i=0;i<r.length;i++){var o=r[i],s;try{s=o.toString()}catch(a){try{s="<error: "+a+">"}catch(c){s="<error>"}}n.push("    at "+s)}return n.join(`
`)}});var mU=g((gbe,hU)=>{var Dm=fU();function dU(){this.extend=new yf,this.filter=new yf,this.format=new Ef,this.version=iS().version}var oS=!1;dU.prototype.callSite=function e(t){t||(t={}),oS=!0;var r={};Error.captureStackTrace(r,e);var n=r.stack;return oS=!1,n=n.slice(t.slice||0),t.extend&&(n=this.extend._modify(r,n)),t.filter&&(n=this.filter._modify(r,n)),n};var Oo=new dU;function yf(){this._modifiers=[]}yf.prototype._modify=function(e,t){for(var r=0,n=this._modifiers.length;r<n;r++)t=this._modifiers[r](e,t);return t};yf.prototype.attach=function(e){this._modifiers.push(e)};yf.prototype.deattach=function(e){var t=this._modifiers.indexOf(e);return t===-1?!1:(this._modifiers.splice(t,1),!0)};function Ef(){this._formater=Dm,this._previous=void 0}Ef.prototype.replace=function(e){e?this._formater=e:this.restore()};Ef.prototype.restore=function(){this._formater=Dm,this._previous=void 0};Ef.prototype._backup=function(){this._previous=this._formater};Ef.prototype._roolback=function(){this._previous===Dm?this.replace(void 0):this.replace(this._previous),this._previous=void 0};Error.prepareStackTrace&&Oo.format.replace(Error.prepareStackTrace);var sS=!1;function pU(e,t){if(oS)return t;if(sS)return Dm(e,t);var r=t.concat();r=Oo.extend._modify(e,r),r=Oo.filter._modify(e,r),r=r.slice(0,Error.stackTraceLimit),Object.isExtensible(e)&&Object.getOwnPropertyDescriptor(e,"callSite")===void 0&&(e.callSite={original:t,mutated:r}),sS=!0;var n=Oo.format._formater(e,r);return sS=!1,n}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return pU},set:function(e){e===pU?Oo.format._roolback():(Oo.format._backup(),Oo.format.replace(e))}});function _te(){return this.stack,this.callSite}Object.defineProperty(Error.prototype,"callSite",{get:_te,set:function(e){Object.defineProperty(this,"callSite",{value:e,writable:!0,configurable:!0})},configurable:!0});hU.exports=Oo});var cS=g((vbe,aS)=>{if(global._stackChain)if(global._stackChain.version===iS().version)aS.exports=global._stackChain;else throw new Error("Conflicting version of stack-chain found");else aS.exports=global._stackChain=mU()});var gU=g((ybe,uS)=>{"use strict";var Cte=uU();if(global._asyncHook)if(global._asyncHook.version===rS().version)uS.exports=global._asyncHook;else throw new Error("Conflicting version of async-hook-jl found");else cS().filter.attach(function(t,r){return r.filter(function(n){let i=n.getFileName();return!(i&&i.slice(0,__dirname.length)===__dirname)})}),uS.exports=global._asyncHook=new Cte});var wU=g((Ebe,CU)=>{"use strict";var _t=require("util"),Pi=require("assert"),wte=Pm(),Hc=gU(),_f="cls@contexts",Cf="error@context",vU=[];for(let e in Hc.providers)vU[Hc.providers[e]]=e;var dt=process.env.DEBUG_CLS_HOOKED,It=-1;CU.exports={getNamespace:yU,createNamespace:Ste,destroyNamespace:EU,reset:bte,ERROR_SYMBOL:Cf};function mn(e){this.name=e,this.active=null,this._set=[],this.id=null,this._contexts=new Map}mn.prototype.set=function(t,r){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return dt&&Ct("    SETTING KEY:"+t+"="+r+" in ns:"+this.name+" uid:"+It+" active:"+_t.inspect(this.active,!0)),this.active[t]=r,r};mn.prototype.get=function(t){if(!this.active){dt&&Ct("    GETTING KEY:"+t+"=undefined "+this.name+" uid:"+It+" active:"+_t.inspect(this.active,!0));return}return dt&&Ct("    GETTING KEY:"+t+"="+this.active[t]+" "+this.name+" uid:"+It+" active:"+_t.inspect(this.active,!0)),this.active[t]};mn.prototype.createContext=function(){dt&&Ct("   CREATING Context: "+this.name+" uid:"+It+" len:"+this._set.length+"  active:"+_t.inspect(this.active,!0,2,!0));let t=Object.create(this.active?this.active:Object.prototype);return t._ns_name=this.name,t.id=It,dt&&Ct("   CREATED Context: "+this.name+" uid:"+It+" len:"+this._set.length+"  context:"+_t.inspect(t,!0,2,!0)),t};mn.prototype.run=function(t){let r=this.createContext();this.enter(r);try{return dt&&Ct(" BEFORE RUN: "+this.name+" uid:"+It+" len:"+this._set.length+" "+_t.inspect(r)),t(r),r}catch(n){throw n&&(n[Cf]=r),n}finally{dt&&Ct(" AFTER RUN: "+this.name+" uid:"+It+" len:"+this._set.length+" "+_t.inspect(r)),this.exit(r)}};mn.prototype.runAndReturn=function(t){var r;return this.run(function(n){r=t(n)}),r};mn.prototype.runPromise=function(t){let r=this.createContext();this.enter(r);let n=t(r);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return dt&&Ct(" BEFORE runPromise: "+this.name+" uid:"+It+" len:"+this._set.length+" "+_t.inspect(r)),n.then(i=>(dt&&Ct(" AFTER runPromise: "+this.name+" uid:"+It+" len:"+this._set.length+" "+_t.inspect(r)),this.exit(r),i)).catch(i=>{throw i[Cf]=r,dt&&Ct(" AFTER runPromise: "+this.name+" uid:"+It+" len:"+this._set.length+" "+_t.inspect(r)),this.exit(r),i})};mn.prototype.bind=function(t,r){r||(this.active?r=this.active:r=this.createContext());let n=this;return function(){n.enter(r);try{return t.apply(this,arguments)}catch(o){throw o&&(o[Cf]=r),o}finally{n.exit(r)}}};mn.prototype.enter=function(t){Pi.ok(t,"context must be provided for entering"),dt&&Ct("  ENTER "+this.name+" uid:"+It+" len:"+this._set.length+" context: "+_t.inspect(t)),this._set.push(this.active),this.active=t};mn.prototype.exit=function(t){if(Pi.ok(t,"context must be provided for exiting"),dt&&Ct("  EXIT "+this.name+" uid:"+It+" len:"+this._set.length+" context: "+_t.inspect(t)),this.active===t){Pi.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let r=this._set.lastIndexOf(t);r<0?(dt&&Ct("??ERROR?? context exiting but not entered - ignoring: "+_t.inspect(t)),Pi.ok(r>=0,`context not currently entered; can't exit. 
`+_t.inspect(this)+`
`+_t.inspect(t))):(Pi.ok(r,"can't remove top context"),this._set.splice(r,1))};mn.prototype.bindEmitter=function(t){Pi.ok(t.on&&t.addListener&&t.emit,"can only bind real EEs");let r=this,n="context@"+this.name;function i(s){!s||(s[_f]||(s[_f]=Object.create(null)),s[_f][n]={namespace:r,context:r.active})}function o(s){if(!(s&&s[_f]))return s;let a=s,c=s[_f];return Object.keys(c).forEach(function(u){let l=c[u];a=l.namespace.bind(a,l.context)}),a}wte(t,i,o)};mn.prototype.fromException=function(t){return t[Cf]};function yU(e){return process.namespaces[e]}function Ste(e){Pi.ok(e,"namespace must be given a name."),dt&&Ct("CREATING NAMESPACE "+e);let t=new mn(e);return t.id=It,Hc.addHooks({init(r,n,i,o,s){It=r,o?(t._contexts.set(r,t._contexts.get(o)),dt&&Ct("PARENTID: "+e+" uid:"+r+" parent:"+o+" provider:"+i)):t._contexts.set(It,t.active),dt&&Ct("INIT "+e+" uid:"+r+" parent:"+o+" provider:"+vU[i]+" active:"+_t.inspect(t.active,!0))},pre(r,n){It=r;let i=t._contexts.get(r);i?(dt&&Ct(" PRE "+e+" uid:"+r+" handle:"+Nm(n)+" context:"+_t.inspect(i)),t.enter(i)):dt&&Ct(" PRE MISSING CONTEXT "+e+" uid:"+r+" handle:"+Nm(n))},post(r,n){It=r;let i=t._contexts.get(r);i?(dt&&Ct(" POST "+e+" uid:"+r+" handle:"+Nm(n)+" context:"+_t.inspect(i)),t.exit(i)):dt&&Ct(" POST MISSING CONTEXT "+e+" uid:"+r+" handle:"+Nm(n))},destroy(r){It=r,dt&&Ct("DESTROY "+e+" uid:"+r+" context:"+_t.inspect(t._contexts.get(It))+" active:"+_t.inspect(t.active,!0)),t._contexts.delete(r)}}),process.namespaces[e]=t,t}function EU(e){let t=yU(e);Pi.ok(t,`can't delete nonexistent namespace! "`+e+'"'),Pi.ok(t.id,"don't assign to process.namespaces directly! "+_t.inspect(t)),process.namespaces[e]=null}function bte(){process.namespaces&&Object.keys(process.namespaces).forEach(function(e){EU(e)}),process.namespaces=Object.create(null)}process.namespaces={};Hc._state&&!Hc._state.enabled&&Hc.enable();function Ct(e){process.env.DEBUG&&process._rawDebug(e)}function Nm(e){if(!e)return e;if(typeof e=="function")return e.name?e.name:(e.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1];if(e.constructor&&e.constructor.name)return e.constructor.name}if(dt){lS=cS();for(_U in lS.filter._modifiers)lS.filter.deattach(_U)}var lS,_U});var SU=g((_be,fS)=>{"use strict";var xte=Bj();process&&xte.gte(process.versions.node,"8.0.0")?fS.exports=eU():fS.exports=wU()});var jU=g((ve,$U)=>{ve=$U.exports=xe;var $e;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?$e=function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:$e=function(){};ve.SEMVER_SPEC_VERSION="2.0.0";var dS=256,Lm=Number.MAX_SAFE_INTEGER||9007199254740991,pS=16,Ge=ve.re=[],F=ve.src=[],we=0,Bc=we++;F[Bc]="0|[1-9]\\d*";var Gc=we++;F[Gc]="[0-9]+";var hS=we++;F[hS]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var bU=we++;F[bU]="("+F[Bc]+")\\.("+F[Bc]+")\\.("+F[Bc]+")";var xU=we++;F[xU]="("+F[Gc]+")\\.("+F[Gc]+")\\.("+F[Gc]+")";var mS=we++;F[mS]="(?:"+F[Bc]+"|"+F[hS]+")";var gS=we++;F[gS]="(?:"+F[Gc]+"|"+F[hS]+")";var vS=we++;F[vS]="(?:-("+F[mS]+"(?:\\."+F[mS]+")*))";var yS=we++;F[yS]="(?:-?("+F[gS]+"(?:\\."+F[gS]+")*))";var ES=we++;F[ES]="[0-9A-Za-z-]+";var wf=we++;F[wf]="(?:\\+("+F[ES]+"(?:\\."+F[ES]+")*))";var _S=we++,TU="v?"+F[bU]+F[vS]+"?"+F[wf]+"?";F[_S]="^"+TU+"$";var CS="[v=\\s]*"+F[xU]+F[yS]+"?"+F[wf]+"?",wS=we++;F[wS]="^"+CS+"$";var Wc=we++;F[Wc]="((?:<|>)?=?)";var km=we++;F[km]=F[Gc]+"|x|X|\\*";var Fm=we++;F[Fm]=F[Bc]+"|x|X|\\*";var Zs=we++;F[Zs]="[v=\\s]*("+F[Fm]+")(?:\\.("+F[Fm]+")(?:\\.("+F[Fm]+")(?:"+F[vS]+")?"+F[wf]+"?)?)?";var Vc=we++;F[Vc]="[v=\\s]*("+F[km]+")(?:\\.("+F[km]+")(?:\\.("+F[km]+")(?:"+F[yS]+")?"+F[wf]+"?)?)?";var AU=we++;F[AU]="^"+F[Wc]+"\\s*"+F[Zs]+"$";var IU=we++;F[IU]="^"+F[Wc]+"\\s*"+F[Vc]+"$";var RU=we++;F[RU]="(?:^|[^\\d])(\\d{1,"+pS+"})(?:\\.(\\d{1,"+pS+"}))?(?:\\.(\\d{1,"+pS+"}))?(?:$|[^\\d])";var Mm=we++;F[Mm]="(?:~>?)";var qm=we++;F[qm]="(\\s*)"+F[Mm]+"\\s+";Ge[qm]=new RegExp(F[qm],"g");var Tte="$1~",PU=we++;F[PU]="^"+F[Mm]+F[Zs]+"$";var OU=we++;F[OU]="^"+F[Mm]+F[Vc]+"$";var $m=we++;F[$m]="(?:\\^)";var jm=we++;F[jm]="(\\s*)"+F[$m]+"\\s+";Ge[jm]=new RegExp(F[jm],"g");var Ate="$1^",DU=we++;F[DU]="^"+F[$m]+F[Zs]+"$";var NU=we++;F[NU]="^"+F[$m]+F[Vc]+"$";var SS=we++;F[SS]="^"+F[Wc]+"\\s*("+CS+")$|^$";var bS=we++;F[bS]="^"+F[Wc]+"\\s*("+TU+")$|^$";var Sf=we++;F[Sf]="(\\s*)"+F[Wc]+"\\s*("+CS+"|"+F[Zs]+")";Ge[Sf]=new RegExp(F[Sf],"g");var Ite="$1$2$3",LU=we++;F[LU]="^\\s*("+F[Zs]+")\\s+-\\s+("+F[Zs]+")\\s*$";var kU=we++;F[kU]="^\\s*("+F[Vc]+")\\s+-\\s+("+F[Vc]+")\\s*$";var FU=we++;F[FU]="(<|>)?=?\\s*\\*";for(Do=0;Do<we;Do++)$e(Do,F[Do]),Ge[Do]||(Ge[Do]=new RegExp(F[Do]));var Do;ve.parse=ea;function ea(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof xe)return e;if(typeof e!="string"||e.length>dS)return null;var r=t.loose?Ge[wS]:Ge[_S];if(!r.test(e))return null;try{return new xe(e,t)}catch(n){return null}}ve.valid=Rte;function Rte(e,t){var r=ea(e,t);return r?r.version:null}ve.clean=Pte;function Pte(e,t){var r=ea(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}ve.SemVer=xe;function xe(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof xe){if(e.loose===t.loose)return e;e=e.version}else if(typeof e!="string")throw new TypeError("Invalid Version: "+e);if(e.length>dS)throw new TypeError("version is longer than "+dS+" characters");if(!(this instanceof xe))return new xe(e,t);$e("SemVer",e,t),this.options=t,this.loose=!!t.loose;var r=e.trim().match(t.loose?Ge[wS]:Ge[_S]);if(!r)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Lm||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Lm||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Lm||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var i=+n;if(i>=0&&i<Lm)return i}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}xe.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};xe.prototype.toString=function(){return this.version};xe.prototype.compare=function(e){return $e("SemVer.compare",this.version,this.options,e),e instanceof xe||(e=new xe(e,this.options)),this.compareMain(e)||this.comparePre(e)};xe.prototype.compareMain=function(e){return e instanceof xe||(e=new xe(e,this.options)),zc(this.major,e.major)||zc(this.minor,e.minor)||zc(this.patch,e.patch)};xe.prototype.comparePre=function(e){if(e instanceof xe||(e=new xe(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],n=e.prerelease[t];if($e("prerelease compare",t,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return zc(r,n)}while(++t)};xe.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this};ve.inc=Ote;function Ote(e,t,r,n){typeof r=="string"&&(n=r,r=void 0);try{return new xe(e,r).inc(t,n).version}catch(i){return null}}ve.diff=Dte;function Dte(e,t){if(xS(e,t))return null;var r=ea(e),n=ea(t),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var o="prerelease"}for(var s in r)if((s==="major"||s==="minor"||s==="patch")&&r[s]!==n[s])return i+s;return o}ve.compareIdentifiers=zc;var MU=/^[0-9]+$/;function zc(e,t){var r=MU.test(e),n=MU.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}ve.rcompareIdentifiers=Nte;function Nte(e,t){return zc(t,e)}ve.major=Lte;function Lte(e,t){return new xe(e,t).major}ve.minor=kte;function kte(e,t){return new xe(e,t).minor}ve.patch=Fte;function Fte(e,t){return new xe(e,t).patch}ve.compare=Oi;function Oi(e,t,r){return new xe(e,r).compare(new xe(t,r))}ve.compareLoose=Mte;function Mte(e,t){return Oi(e,t,!0)}ve.rcompare=qte;function qte(e,t,r){return Oi(t,e,r)}ve.sort=$te;function $te(e,t){return e.sort(function(r,n){return ve.compare(r,n,t)})}ve.rsort=jte;function jte(e,t){return e.sort(function(r,n){return ve.rcompare(r,n,t)})}ve.gt=bf;function bf(e,t,r){return Oi(e,t,r)>0}ve.lt=Um;function Um(e,t,r){return Oi(e,t,r)<0}ve.eq=xS;function xS(e,t,r){return Oi(e,t,r)===0}ve.neq=qU;function qU(e,t,r){return Oi(e,t,r)!==0}ve.gte=TS;function TS(e,t,r){return Oi(e,t,r)>=0}ve.lte=AS;function AS(e,t,r){return Oi(e,t,r)<=0}ve.cmp=Hm;function Hm(e,t,r,n){switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return xS(e,r,n);case"!=":return qU(e,r,n);case">":return bf(e,r,n);case">=":return TS(e,r,n);case"<":return Um(e,r,n);case"<=":return AS(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}ve.Comparator=gn;function gn(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof gn){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof gn))return new gn(e,t);$e("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===xf?this.value="":this.value=this.operator+this.semver.version,$e("comp",this)}var xf={};gn.prototype.parse=function(e){var t=this.options.loose?Ge[SS]:Ge[bS],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],this.operator==="="&&(this.operator=""),r[2]?this.semver=new xe(r[2],this.options.loose):this.semver=xf};gn.prototype.toString=function(){return this.value};gn.prototype.test=function(e){return $e("Comparator.test",e,this.options.loose),this.semver===xf?!0:(typeof e=="string"&&(e=new xe(e,this.options)),Hm(e,this.operator,this.semver,this.options))};gn.prototype.intersects=function(e,t){if(!(e instanceof gn))throw new TypeError("a Comparator is required");(!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1});var r;if(this.operator==="")return r=new ut(e.value,t),Bm(this.value,r,t);if(e.operator==="")return r=new ut(this.value,t),Bm(e.semver,r,t);var n=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),o=this.semver.version===e.semver.version,s=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),a=Hm(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),c=Hm(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return n||i||o&&s||a||c};ve.Range=ut;function ut(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof ut)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new ut(e.raw,t);if(e instanceof gn)return new ut(e.value,t);if(!(this instanceof ut))return new ut(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(r){return this.parseRange(r.trim())},this).filter(function(r){return r.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}ut.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim(),this.range};ut.prototype.toString=function(){return this.range};ut.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var r=t?Ge[kU]:Ge[LU];e=e.replace(r,Xte),$e("hyphen replace",e),e=e.replace(Ge[Sf],Ite),$e("comparator trim",e,Ge[Sf]),e=e.replace(Ge[qm],Tte),e=e.replace(Ge[jm],Ate),e=e.split(/\s+/).join(" ");var n=t?Ge[SS]:Ge[bS],i=e.split(" ").map(function(o){return Hte(o,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter(function(o){return!!o.match(n)})),i=i.map(function(o){return new gn(o,this.options)},this),i};ut.prototype.intersects=function(e,t){if(!(e instanceof ut))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(n){return e.set.some(function(i){return i.every(function(o){return n.intersects(o,t)})})})})};ve.toComparators=Ute;function Ute(e,t){return new ut(e,t).set.map(function(r){return r.map(function(n){return n.value}).join(" ").trim().split(" ")})}function Hte(e,t){return $e("comp",e,t),e=Wte(e,t),$e("caret",e),e=Bte(e,t),$e("tildes",e),e=zte(e,t),$e("xrange",e),e=Yte(e,t),$e("stars",e),e}function fr(e){return!e||e.toLowerCase()==="x"||e==="*"}function Bte(e,t){return e.trim().split(/\s+/).map(function(r){return Gte(r,t)}).join(" ")}function Gte(e,t){var r=t.loose?Ge[OU]:Ge[PU];return e.replace(r,function(n,i,o,s,a){$e("tilde",e,n,i,o,s,a);var c;return fr(i)?c="":fr(o)?c=">="+i+".0.0 <"+(+i+1)+".0.0":fr(s)?c=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":a?($e("replaceTilde pr",a),c=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0"):c=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0",$e("tilde return",c),c})}function Wte(e,t){return e.trim().split(/\s+/).map(function(r){return Vte(r,t)}).join(" ")}function Vte(e,t){$e("caret",e,t);var r=t.loose?Ge[NU]:Ge[DU];return e.replace(r,function(n,i,o,s,a){$e("caret",e,n,i,o,s,a);var c;return fr(i)?c="":fr(o)?c=">="+i+".0.0 <"+(+i+1)+".0.0":fr(s)?i==="0"?c=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":c=">="+i+"."+o+".0 <"+(+i+1)+".0.0":a?($e("replaceCaret pr",a),i==="0"?o==="0"?c=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+o+"."+(+s+1):c=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0":c=">="+i+"."+o+"."+s+"-"+a+" <"+(+i+1)+".0.0"):($e("no pr"),i==="0"?o==="0"?c=">="+i+"."+o+"."+s+" <"+i+"."+o+"."+(+s+1):c=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0":c=">="+i+"."+o+"."+s+" <"+(+i+1)+".0.0"),$e("caret return",c),c})}function zte(e,t){return $e("replaceXRanges",e,t),e.split(/\s+/).map(function(r){return Kte(r,t)}).join(" ")}function Kte(e,t){e=e.trim();var r=t.loose?Ge[IU]:Ge[AU];return e.replace(r,function(n,i,o,s,a,c){$e("xRange",e,n,i,o,s,a,c);var u=fr(o),l=u||fr(s),f=l||fr(a),d=f;return i==="="&&d&&(i=""),u?i===">"||i==="<"?n="<0.0.0":n="*":i&&d?(l&&(s=0),a=0,i===">"?(i=">=",l?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",l?o=+o+1:s=+s+1),n=i+o+"."+s+"."+a):l?n=">="+o+".0.0 <"+(+o+1)+".0.0":f&&(n=">="+o+"."+s+".0 <"+o+"."+(+s+1)+".0"),$e("xRange return",n),n})}function Yte(e,t){return $e("replaceStars",e,t),e.trim().replace(Ge[FU],"")}function Xte(e,t,r,n,i,o,s,a,c,u,l,f,d){return fr(r)?t="":fr(n)?t=">="+r+".0.0":fr(i)?t=">="+r+"."+n+".0":t=">="+t,fr(c)?a="":fr(u)?a="<"+(+c+1)+".0.0":fr(l)?a="<"+c+"."+(+u+1)+".0":f?a="<="+c+"."+u+"."+l+"-"+f:a="<="+a,(t+" "+a).trim()}ut.prototype.test=function(e){if(!e)return!1;typeof e=="string"&&(e=new xe(e,this.options));for(var t=0;t<this.set.length;t++)if(Qte(this.set[t],e,this.options))return!0;return!1};function Qte(e,t,r){for(var n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(n=0;n<e.length;n++)if($e(e[n].semver),e[n].semver!==xf&&e[n].semver.prerelease.length>0){var i=e[n].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}ve.satisfies=Bm;function Bm(e,t,r){try{t=new ut(t,r)}catch(n){return!1}return t.test(e)}ve.maxSatisfying=Jte;function Jte(e,t,r){var n=null,i=null;try{var o=new ut(t,r)}catch(s){return null}return e.forEach(function(s){o.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new xe(n,r))}),n}ve.minSatisfying=Zte;function Zte(e,t,r){var n=null,i=null;try{var o=new ut(t,r)}catch(s){return null}return e.forEach(function(s){o.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new xe(n,r))}),n}ve.minVersion=ere;function ere(e,t){e=new ut(e,t);var r=new xe("0.0.0");if(e.test(r)||(r=new xe("0.0.0-0"),e.test(r)))return r;r=null;for(var n=0;n<e.set.length;++n){var i=e.set[n];i.forEach(function(o){var s=new xe(o.semver.version);switch(o.operator){case">":s.prerelease.length===0?s.patch++:s.prerelease.push(0),s.raw=s.format();case"":case">=":(!r||bf(r,s))&&(r=s);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+o.operator)}})}return r&&e.test(r)?r:null}ve.validRange=tre;function tre(e,t){try{return new ut(e,t).range||"*"}catch(r){return null}}ve.ltr=rre;function rre(e,t,r){return IS(e,t,"<",r)}ve.gtr=nre;function nre(e,t,r){return IS(e,t,">",r)}ve.outside=IS;function IS(e,t,r,n){e=new xe(e,n),t=new ut(t,n);var i,o,s,a,c;switch(r){case">":i=bf,o=AS,s=Um,a=">",c=">=";break;case"<":i=Um,o=TS,s=bf,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Bm(e,t,n))return!1;for(var u=0;u<t.set.length;++u){var l=t.set[u],f=null,d=null;if(l.forEach(function(p){p.semver===xf&&(p=new gn(">=0.0.0")),f=f||p,d=d||p,i(p.semver,f.semver,n)?f=p:s(p.semver,d.semver,n)&&(d=p)}),f.operator===a||f.operator===c||(!d.operator||d.operator===a)&&o(e,d.semver))return!1;if(d.operator===c&&s(e,d.semver))return!1}return!0}ve.prerelease=ire;function ire(e,t){var r=ea(e,t);return r&&r.prerelease.length?r.prerelease:null}ve.intersects=ore;function ore(e,t,r){return e=new ut(e,r),t=new ut(t,r),e.intersects(t)}ve.coerce=sre;function sre(e){if(e instanceof xe)return e;if(typeof e!="string")return null;var t=e.match(Ge[RU]);return t==null?null:ea(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}});var BU=g((Cbe,HU)=>{var are=Am().wrap,RS=1<<0,PS=1<<1,OS=1<<2,Gm=1<<3,We=[],cre=0,er=!1,No=[],Kc,DS;function NS(e,t){var r=e.length,n=t.length,i=[];if(r===0&&n===0)return i;for(var o=0;o<r;o++)i[o]=e[o];if(n===0)return i;for(var s=0;s<n;s++){var a=!0;for(o=0;o<r;o++)if(e[o].uid===t[s].uid){a=!1;break}a&&i.push(t[s])}return i}process._fatalException?(Wm=!1,Kc=function(t){var r=We.length;if(Wm||r===0)return!1;var n=!1;Wm=!0;for(var i=0;i<r;++i){var o=We[i];if((o.flags&Gm)!=0){var s=Yc&&Yc[o.uid];n=o.error(s,t)||n}}return Wm=!1,No.length>0&&(We=No.pop()),Yc=void 0,n&&!er},DS=function(t,r,n){var i=[];er=!0;for(var o=0;o<n;++o){var s=r[o];if(i[s.uid]=s.data,(s.flags&RS)!=0){var a=s.create(s.data);a!==void 0&&(i[s.uid]=a)}}return er=!1,function(){Yc=i,No.push(We),We=NS(r,We),er=!0;for(var c=0;c<n;++c)(r[c].flags&PS)>0&&r[c].before(this,i[r[c].uid]);er=!1;var u=t.apply(this,arguments);for(er=!0,c=0;c<n;++c)(r[c].flags&OS)>0&&r[c].after(this,i[r[c].uid]);return er=!1,We=No.pop(),Yc=void 0,u}},are(process,"_fatalException",function(e){return function(r){return Kc(r)||e(r)}})):(LS=!1,Kc=function(t){if(LS)throw t;for(var r=!1,n=We.length,i=0;i<n;++i){var o=We[i];(o.flags&Gm)!=0&&(r=o.error(null,t)||r)}if(!r&&er)throw t},DS=function(t,r,n){var i=[];er=!0;for(var o=0;o<n;++o){var s=r[o];if(i[s.uid]=s.data,(s.flags&RS)!=0){var a=s.create(s.data);a!==void 0&&(i[s.uid]=a)}}return er=!1,function(){var c=!1,u=!1;No.push(We),We=NS(r,We),er=!0;for(var l=0;l<n;++l)(r[l].flags&PS)>0&&r[l].before(this,i[r[l].uid]);er=!1;var f;try{f=t.apply(this,arguments)}catch(d){c=!0;for(var l=0;l<n;++l)if((We[l].flags&Gm)!=0)try{u=We[l].error(i[r[l].uid],d)||u}catch(h){throw LS=!0,h}if(!u)throw process.removeListener("uncaughtException",Kc),process._originalNextTick(function(){process.addListener("uncaughtException",Kc)}),d}finally{if(!c||u){for(er=!0,l=0;l<n;++l)(r[l].flags&OS)>0&&r[l].after(this,i[r[l].uid]);er=!1}We=No.pop()}return f}},process.addListener("uncaughtException",Kc));var Wm,Yc,LS;function ure(e,t,r){er=!0;for(var n=0;n<r;++n){var i=t[n];i.create&&i.create(i.data)}return er=!1,function(){No.push(We),We=NS(t,We);var o=e.apply(this,arguments);return We=No.pop(),o}}function lre(e){var t=We.length;if(t===0)return e;for(var r=We.slice(),n=0;n<t;++n)if(r[n].flags>0)return DS(e,r,t);return ure(e,r,t)}function Xn(e,t){typeof e.create=="function"&&(this.create=e.create,this.flags|=RS),typeof e.before=="function"&&(this.before=e.before,this.flags|=PS),typeof e.after=="function"&&(this.after=e.after,this.flags|=OS),typeof e.error=="function"&&(this.error=e.error,this.flags|=Gm),this.uid=++cre,this.data=t===void 0?null:t}Xn.prototype.create=void 0;Xn.prototype.before=void 0;Xn.prototype.after=void 0;Xn.prototype.error=void 0;Xn.prototype.data=void 0;Xn.prototype.uid=0;Xn.prototype.flags=0;function UU(e,t){if(typeof e!="object"||!e)throw new TypeError("callbacks argument must be an object");return e instanceof Xn?e:new Xn(e,t)}function fre(e,t){var r;e instanceof Xn?r=e:r=UU(e,t);for(var n=!1,i=0;i<We.length;i++)if(r===We[i]){n=!0;break}return n||We.push(r),r}function dre(e){for(var t=0;t<We.length;t++)if(e===We[t]){We.splice(t,1);break}}process.createAsyncListener=UU;process.addAsyncListener=fre;process.removeAsyncListener=dre;HU.exports=lre});var WU=g((Sbe,GU)=>{"use strict";GU.exports=(e,t)=>class extends e{constructor(n){var i,o;super(a);var s=this;try{n.apply(i,o)}catch(c){o[1](c)}return s;function a(c,u){i=this,o=[l,f];function l(d){return t(s,!1),c(d)}function f(d){return t(s,!1),u(d)}}}}});var JU=g(()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var VU=Am(),Vm=jU(),br=VU.wrap,Lo=VU.massWrap,lt=BU(),pre=require("util"),hre=Vm.gte(process.version,"6.0.0"),kS=Vm.gte(process.version,"7.0.0"),mre=Vm.gte(process.version,"8.0.0"),gre=Vm.gte(process.version,"11.0.0"),Qn=require("net");kS&&!Qn._normalizeArgs?Qn._normalizeArgs=function(e){if(e.length===0)return[{},null];var t=e[0],r={};typeof t=="object"&&t!==null?r=t:Cre(t)?r.path=t:(r.port=t,e.length>1&&typeof e[1]=="string"&&(r.host=e[1]));var n=e[e.length-1];return typeof n!="function"?[r,null]:[r,n]}:!kS&&!Qn._normalizeConnectArgs&&(Qn._normalizeConnectArgs=function(e){var t={};function r(i){return(i=Number(i))>=0?i:!1}typeof e[0]=="object"&&e[0]!==null?t=e[0]:typeof e[0]=="string"&&r(e[0])===!1?t.path=e[0]:(t.port=e[0],typeof e[1]=="string"&&(t.host=e[1]));var n=e[e.length-1];return typeof n=="function"?[t,n]:[t]});"_setUpListenHandle"in Qn.Server.prototype?br(Qn.Server.prototype,"_setUpListenHandle",zU):br(Qn.Server.prototype,"_listen2",zU);function zU(e){return function(){this.on("connection",function(t){t._handle&&(t._handle.onread=lt(t._handle.onread))});try{return e.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=lt(this._handle.onconnection))}}}function KU(e){if(e&&e._handle){var t=e._handle;t._originalOnread||(t._originalOnread=t.onread),t.onread=lt(t._originalOnread)}}br(Qn.Socket.prototype,"connect",function(e){return function(){var t;mre&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?t=arguments[0]:t=kS?Qn._normalizeArgs(arguments):Qn._normalizeConnectArgs(arguments),t[1]&&(t[1]=lt(t[1]));var r=e.apply(this,t);return KU(this),r}});var vre=require("http");br(vre.Agent.prototype,"addRequest",function(e){return function(t){var r=t.onSocket;return t.onSocket=lt(function(n){return KU(n),r.apply(this,arguments)}),e.apply(this,arguments)}});var FS=require("child_process");function YU(e){Array.isArray(e.stdio)&&e.stdio.forEach(function(t){t&&t._handle&&(t._handle.onread=lt(t._handle.onread),br(t._handle,"close",Km))}),e._handle&&(e._handle.onexit=lt(e._handle.onexit))}FS.ChildProcess?br(FS.ChildProcess.prototype,"spawn",function(e){return function(){var t=e.apply(this,arguments);return YU(this),t}}):Lo(FS,["execFile","fork","spawn"],function(e){return function(){var t=e.apply(this,arguments);return YU(t),t}});process._fatalException||(process._originalNextTick=process.nextTick);var MS=[];process._nextDomainTick&&MS.push("_nextDomainTick");process._tickDomainCallback&&MS.push("_tickDomainCallback");Lo(process,MS,Jn);br(process,"nextTick",Km);var qS=["setTimeout","setInterval"];global.setImmediate&&qS.push("setImmediate");var XU=require("timers"),yre=global.setTimeout===XU.setTimeout;Lo(XU,qS,Km);yre&&Lo(global,qS,Km);var $S=require("dns");Lo($S,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],Jn);$S.resolveNaptr&&br($S,"resolveNaptr",Jn);var ta=require("fs");Lo(ta,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],Jn);ta.lchown&&br(ta,"lchown",Jn);ta.lchmod&&br(ta,"lchmod",Jn);ta.ftruncate&&br(ta,"ftruncate",Jn);var Tf;try{Tf=require("zlib")}catch(e){}Tf&&Tf.Deflate&&Tf.Deflate.prototype&&(ra=Object.getPrototypeOf(Tf.Deflate.prototype),ra._transform?br(ra,"_transform",Jn):ra.write&&ra.flush&&ra.end&&Lo(ra,["write","flush","end"],Jn));var ra,jS;try{jS=require("crypto")}catch(e){}jS&&(US=["pbkdf2","randomBytes"],gre||US.push("pseudoRandomBytes"),Lo(jS,US,Jn));var US,zm=!!global.Promise&&Promise.toString()==="function Promise() { [native code] }"&&Promise.toString.toString()==="function toString() { [native code] }";zm&&(QU=process.addAsyncListener({create:function(){zm=!1}}),global.Promise.resolve(!0).then(function(){zm=!1}),process.removeAsyncListener(QU));var QU;zm&&Ere();function Ere(){var e=global.Promise;function t(s){if(!(this instanceof t))return e(s);if(typeof s!="function")return new e(s);var a,c,u=new e(l);u.__proto__=t.prototype;try{s.apply(a,c)}catch(f){c[1](f)}return u;function l(f,d){a=this,c=[p,h];function p(m){return n(u,!1),f(m)}function h(m){return n(u,!1),d(m)}}}if(pre.inherits(t,e),br(e.prototype,"then",o),e.prototype.chain&&br(e.prototype,"chain",o),hre)global.Promise=WU()(e,n);else{var r=["all","race","reject","resolve","accept","defer"];r.forEach(function(s){typeof e[s]=="function"&&(t[s]=e[s])}),global.Promise=t}function n(s,a){(!s.__asl_wrapper||a)&&(s.__asl_wrapper=lt(i))}function i(s,a,c,u){var l;try{return l=a.call(s,c),{returnVal:l,error:!1}}catch(f){return{errorVal:f,error:!0}}finally{l instanceof e?u.__asl_wrapper=function(){var d=l.__asl_wrapper||i;return d.apply(this,arguments)}:n(u,!0)}}function o(s){return function(){var c=this,u=s.apply(c,Array.prototype.map.call(arguments,l));return u.__asl_wrapper=function(d,p,h,m){return c.__asl_wrapper?(c.__asl_wrapper(d,function(){},null,u),u.__asl_wrapper(d,p,h,m)):i(d,p,h,m)},u;function l(f){return typeof f!="function"?f:lt(function(d){var p=(c.__asl_wrapper||i)(this,f,d,u);if(p.error)throw p.errorVal;return p.returnVal})}}}}function Jn(e){var t=function(){var r,n=arguments.length-1;if(typeof arguments[n]=="function"){r=Array(arguments.length);for(var i=0;i<arguments.length-1;i++)r[i]=arguments[i];r[n]=lt(arguments[n])}return e.apply(this,r||arguments)};switch(e.length){case 1:return function(r){return arguments.length!==1?t.apply(this,arguments):(typeof r=="function"&&(r=lt(r)),e.call(this,r))};case 2:return function(r,n){return arguments.length!==2?t.apply(this,arguments):(typeof n=="function"&&(n=lt(n)),e.call(this,r,n))};case 3:return function(r,n,i){return arguments.length!==3?t.apply(this,arguments):(typeof i=="function"&&(i=lt(i)),e.call(this,r,n,i))};case 4:return function(r,n,i,o){return arguments.length!==4?t.apply(this,arguments):(typeof o=="function"&&(o=lt(o)),e.call(this,r,n,i,o))};case 5:return function(r,n,i,o,s){return arguments.length!==5?t.apply(this,arguments):(typeof s=="function"&&(s=lt(s)),e.call(this,r,n,i,o,s))};case 6:return function(r,n,i,o,s,a){return arguments.length!==6?t.apply(this,arguments):(typeof a=="function"&&(a=lt(a)),e.call(this,r,n,i,o,s,a))};default:return t}}function Km(e){var t=function(){var r;if(typeof arguments[0]=="function"){r=Array(arguments.length),r[0]=lt(arguments[0]);for(var n=1;n<arguments.length;n++)r[n]=arguments[n]}return e.apply(this,r||arguments)};switch(e.length){case 1:return function(r){return arguments.length!==1?t.apply(this,arguments):(typeof r=="function"&&(r=lt(r)),e.call(this,r))};case 2:return function(r,n){return arguments.length!==2?t.apply(this,arguments):(typeof r=="function"&&(r=lt(r)),e.call(this,r,n))};case 3:return function(r,n,i){return arguments.length!==3?t.apply(this,arguments):(typeof r=="function"&&(r=lt(r)),e.call(this,r,n,i))};case 4:return function(r,n,i,o){return arguments.length!==4?t.apply(this,arguments):(typeof r=="function"&&(r=lt(r)),e.call(this,r,n,i,o))};case 5:return function(r,n,i,o,s){return arguments.length!==5?t.apply(this,arguments):(typeof r=="function"&&(r=lt(r)),e.call(this,r,n,i,o,s))};case 6:return function(r,n,i,o,s,a){return arguments.length!==6?t.apply(this,arguments):(typeof r=="function"&&(r=lt(r)),e.call(this,r,n,i,o,s,a))};default:return t}}function _re(e){return(e=Number(e))>=0?e:!1}function Cre(e){return typeof e=="string"&&_re(e)===!1}});var nH=g((Tbe,rH)=>{"use strict";var Di=require("assert"),wre=Pm(),Af="cls@contexts",HS="error@context";process.addAsyncListener||JU();function Ln(e){this.name=e,this.active=null,this._set=[],this.id=null}Ln.prototype.set=function(e,t){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[e]=t,t};Ln.prototype.get=function(e){if(!!this.active)return this.active[e]};Ln.prototype.createContext=function(){return Object.create(this.active)};Ln.prototype.run=function(e){var t=this.createContext();this.enter(t);try{return e(t),t}catch(r){throw r&&(r[HS]=t),r}finally{this.exit(t)}};Ln.prototype.runAndReturn=function(e){var t;return this.run(function(r){t=e(r)}),t};Ln.prototype.bind=function(e,t){t||(this.active?t=this.active:t=this.createContext());var r=this;return function(){r.enter(t);try{return e.apply(this,arguments)}catch(n){throw n&&(n[HS]=t),n}finally{r.exit(t)}}};Ln.prototype.enter=function(e){Di.ok(e,"context must be provided for entering"),this._set.push(this.active),this.active=e};Ln.prototype.exit=function(e){if(Di.ok(e,"context must be provided for exiting"),this.active===e){Di.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}var t=this._set.lastIndexOf(e);Di.ok(t>=0,"context not currently entered; can't exit"),Di.ok(t,"can't remove top context"),this._set.splice(t,1)};Ln.prototype.bindEmitter=function(e){Di.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");var t=this,r="context@"+this.name;function n(o){!o||(o[Af]||(o[Af]=Object.create(null)),o[Af][r]={namespace:t,context:t.active})}function i(o){if(!(o&&o[Af]))return o;var s=o,a=o[Af];return Object.keys(a).forEach(function(c){var u=a[c];s=u.namespace.bind(s,u.context)}),s}wre(e,n,i)};Ln.prototype.fromException=function(e){return e[HS]};function ZU(e){return process.namespaces[e]}function Sre(e){Di.ok(e,"namespace must be given a name!");var t=new Ln(e);return t.id=process.addAsyncListener({create:function(){return t.active},before:function(r,n){n&&t.enter(n)},after:function(r,n){n&&t.exit(n)},error:function(r){r&&t.exit(r)}}),process.namespaces[e]=t,t}function eH(e){var t=ZU(e);Di.ok(t,"can't delete nonexistent namespace!"),Di.ok(t.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(t.id),process.namespaces[e]=null}function tH(){process.namespaces&&Object.keys(process.namespaces).forEach(function(e){eH(e)}),process.namespaces=Object.create(null)}process.namespaces||tH();rH.exports={getNamespace:ZU,createNamespace:Sre,destroyNamespace:eH,reset:tH}});var Ns=g(Ym=>{"use strict";Object.defineProperty(Ym,"__esModule",{value:!0});Ym.CorrelationContextManager=void 0;var iH=Tt(),bre=fm(),Xc=hm(),BS=mw(),oH=Lw(),xre=function(){function e(){}return e.getCurrentContext=function(){if(!e.enabled)return null;var t=e.session.get(e.CONTEXT_NAME);return t===void 0?null:t},e.generateContextObject=function(t,r,n,i,o,s){return r=r||t,this.enabled?{operation:{name:n,id:t,parentId:r,traceparent:o,tracestate:s},customProperties:new Tre(i)}:null},e.spanToContextObject=function(t,r,n){var i=new Xc;return i.traceId=t.traceId,i.spanId=t.spanId,i.traceFlag=Xc.formatOpenTelemetryTraceFlags(t.traceFlags)||Xc.DEFAULT_TRACE_FLAG,i.parentId=r,e.generateContextObject(i.traceId,i.parentId,n,null,i)},e.runWithContext=function(t,r){var n;return e.enabled?e.session.bind(r,(n={},n[e.CONTEXT_NAME]=t,n))():r()},e.wrapEmitter=function(t){e.enabled&&e.session.bindEmitter(t)},e.wrapCallback=function(t,r){var n;return e.enabled?e.session.bind(t,r?(n={},n[e.CONTEXT_NAME]=r,n):void 0):t},e.enable=function(t){if(!this.enabled){if(!this.isNodeVersionCompatible()){this.enabled=!1;return}e.hasEverEnabled||(this.forceClsHooked=t,this.hasEverEnabled=!0,typeof this.cls=="undefined"&&(e.forceClsHooked===!0||e.forceClsHooked===void 0&&e.shouldUseClsHooked()?this.cls=SU():this.cls=nH()),e.session=this.cls.createNamespace("AI-CLS-Session"),bre.registerContextPreservation(function(r){return e.session.bind(r)})),this.enabled=!0}},e.startOperation=function(t,r){var n=t&&t.traceContext||null,i=t&&t.traceId?t:null,o=t&&t.headers;if(i){var s=new Xc("00-"+i.traceId+"-"+i.spanId+"-01"),a=new BS(i.traceState?i.traceState.serialize():null),c=e.generateContextObject(i.traceId,"|"+i.traceId+"."+i.spanId+".",typeof r=="string"?r:"",void 0,s,a);return c}if(n){var s=new Xc(n.traceparent),a=new BS(n.tracestate),u=typeof r=="object"?new oH(r):null,c=e.generateContextObject(s.traceId,s.parentId,typeof r=="string"?r:u.getOperationName({}),u&&u.getCorrelationContextHeader()||void 0,s,a);return c}if(o){var s=new Xc(o.traceparent?o.traceparent.toString():null),a=new BS(o.tracestate?o.tracestate.toString():null),u=new oH(t),c=e.generateContextObject(s.traceId,s.parentId,u.getOperationName({}),u.getCorrelationContextHeader(),s,a);return c}return iH.warn("startOperation was called with invalid arguments",arguments),null},e.disable=function(){this.enabled=!1},e.reset=function(){e.hasEverEnabled&&(e.session=null,e.session=this.cls.createNamespace("AI-CLS-Session"))},e.isNodeVersionCompatible=function(){var t=process.versions.node.split(".");return parseInt(t[0])>3||parseInt(t[0])>2&&parseInt(t[1])>2},e.shouldUseClsHooked=function(){var t=process.versions.node.split(".");return parseInt(t[0])>8||parseInt(t[0])>=8&&parseInt(t[1])>=2},e.canUseClsHooked=function(){var t=process.versions.node.split("."),r=parseInt(t[0])>8||parseInt(t[0])>=8&&parseInt(t[1])>=0,n=parseInt(t[0])<8||parseInt(t[0])<=8&&parseInt(t[1])<2,i=parseInt(t[0])>4||parseInt(t[0])>=4&&parseInt(t[1])>=7;return!(r&&n)&&i},e.enabled=!1,e.hasEverEnabled=!1,e.forceClsHooked=void 0,e.CONTEXT_NAME="ApplicationInsights-Context",e}();Ym.CorrelationContextManager=xre;var Tre=function(){function e(t){this.props=[],this.addHeaderData(t)}return e.prototype.addHeaderData=function(t){var r=t?t.split(", "):[];this.props=r.map(function(n){var i=n.split("=");return{key:i[0],value:i[1]}}).concat(this.props)},e.prototype.serializeToHeader=function(){return this.props.map(function(t){return t.key+"="+t.value}).join(", ")},e.prototype.getProperty=function(t){for(var r=0;r<this.props.length;++r){var n=this.props[r];if(n.key===t)return n.value}},e.prototype.setProperty=function(t,r){if(e.bannedCharacters.test(t)||e.bannedCharacters.test(r)){iH.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+t+" and value: "+r);return}for(var n=0;n<this.props.length;++n){var i=this.props[n];if(i.key===t){i.value=r;return}}this.props.push({key:t,value:r})},e.bannedCharacters=/[,=]/,e}()});var Rt=g(V=>{"use strict";var kn;Object.defineProperty(V,"__esModule",{value:!0});V.TIME_SINCE_ENQUEUED=V.ENQUEUED_TIME=V.MessageBusDestination=V.MicrosoftEventHub=V.AzNamespace=V.StatsbeatNetworkCategory=V.StatsbeatFeatureType=V.StatsbeatInstrumentation=V.StatsbeatFeature=V.StatsbeatCounter=V.StatsbeatAttach=V.StatsbeatResourceProvider=V.StatsbeatTelemetryName=V.HeartBeatMetricName=V.DependencyTypeName=V.TelemetryTypeStringToQuickPulseDocumentType=V.TelemetryTypeStringToQuickPulseType=V.QuickPulseType=V.QuickPulseDocumentType=V.PerformanceToQuickPulseCounter=V.MetricId=V.PerformanceCounter=V.QuickPulseCounter=V.DEFAULT_LIVEMETRICS_HOST=V.DEFAULT_LIVEMETRICS_ENDPOINT=V.DEFAULT_BREEZE_ENDPOINT=void 0;V.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com";V.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com";V.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com";var tr;(function(e){e.COMMITTED_BYTES="\\Memory\\Committed Bytes",e.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",e.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",e.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",e.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",e.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",e.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",e.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",e.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"})(tr=V.QuickPulseCounter||(V.QuickPulseCounter={}));var Xm;(function(e){e.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",e.AVAILABLE_BYTES="\\Memory\\Available Bytes",e.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",e.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",e.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",e.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"})(Xm=V.PerformanceCounter||(V.PerformanceCounter={}));var Are;(function(e){e.REQUESTS_DURATION="requests/duration",e.DEPENDENCIES_DURATION="dependencies/duration",e.EXCEPTIONS_COUNT="exceptions/count",e.TRACES_COUNT="traces/count"})(Are=V.MetricId||(V.MetricId={}));V.PerformanceToQuickPulseCounter=(kn={},kn[Xm.PROCESSOR_TIME]=tr.PROCESSOR_TIME,kn[Xm.REQUEST_RATE]=tr.REQUEST_RATE,kn[Xm.REQUEST_DURATION]=tr.REQUEST_DURATION,kn[tr.COMMITTED_BYTES]=tr.COMMITTED_BYTES,kn[tr.REQUEST_FAILURE_RATE]=tr.REQUEST_FAILURE_RATE,kn[tr.DEPENDENCY_RATE]=tr.DEPENDENCY_RATE,kn[tr.DEPENDENCY_FAILURE_RATE]=tr.DEPENDENCY_FAILURE_RATE,kn[tr.DEPENDENCY_DURATION]=tr.DEPENDENCY_DURATION,kn[tr.EXCEPTION_RATE]=tr.EXCEPTION_RATE,kn);V.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"};V.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"};V.TelemetryTypeStringToQuickPulseType={EventData:V.QuickPulseType.Event,ExceptionData:V.QuickPulseType.Exception,MessageData:V.QuickPulseType.Trace,MetricData:V.QuickPulseType.Metric,RequestData:V.QuickPulseType.Request,RemoteDependencyData:V.QuickPulseType.Dependency,AvailabilityData:V.QuickPulseType.Availability,PageViewData:V.QuickPulseType.PageView};V.TelemetryTypeStringToQuickPulseDocumentType={EventData:V.QuickPulseDocumentType.Event,ExceptionData:V.QuickPulseDocumentType.Exception,MessageData:V.QuickPulseDocumentType.Trace,MetricData:V.QuickPulseDocumentType.Metric,RequestData:V.QuickPulseDocumentType.Request,RemoteDependencyData:V.QuickPulseDocumentType.Dependency,AvailabilityData:V.QuickPulseDocumentType.Availability,PageViewData:V.QuickPulseDocumentType.PageView};V.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc",Sql:"SQL",QueueMessage:"Queue Message"};V.HeartBeatMetricName="HeartBeat";V.StatsbeatTelemetryName="Statsbeat";V.StatsbeatResourceProvider={appsvc:"appsvc",functions:"functions",vm:"vm",unknown:"unknown"};V.StatsbeatAttach={codeless:"codeless",sdk:"sdk"};V.StatsbeatCounter={REQUEST_SUCCESS:"Request Success Count",REQUEST_FAILURE:"Requests Failure Count",REQUEST_DURATION:"Request Duration",RETRY_COUNT:"Retry Count",THROTTLE_COUNT:"Throttle Count",EXCEPTION_COUNT:"Exception Count",ATTACH:"Attach",FEATURE:"Feature"};var Ire;(function(e){e[e.NONE=0]="NONE",e[e.DISK_RETRY=1]="DISK_RETRY",e[e.AAD_HANDLING=2]="AAD_HANDLING"})(Ire=V.StatsbeatFeature||(V.StatsbeatFeature={}));var Rre;(function(e){e[e.NONE=0]="NONE",e[e.AZURE_CORE_TRACING=1]="AZURE_CORE_TRACING",e[e.MONGODB=2]="MONGODB",e[e.MYSQL=4]="MYSQL",e[e.REDIS=8]="REDIS",e[e.POSTGRES=16]="POSTGRES",e[e.BUNYAN=32]="BUNYAN",e[e.WINSTON=64]="WINSTON",e[e.CONSOLE=128]="CONSOLE"})(Rre=V.StatsbeatInstrumentation||(V.StatsbeatInstrumentation={}));var Pre;(function(e){e[e.Feature=0]="Feature",e[e.Instrumentation=1]="Instrumentation"})(Pre=V.StatsbeatFeatureType||(V.StatsbeatFeatureType={}));var Ore;(function(e){e[e.Breeze=0]="Breeze",e[e.Quickpulse=1]="Quickpulse"})(Ore=V.StatsbeatNetworkCategory||(V.StatsbeatNetworkCategory={}));V.AzNamespace="az.namespace";V.MicrosoftEventHub="Microsoft.EventHub";V.MessageBusDestination="message_bus.destination";V.ENQUEUED_TIME="enqueuedTime";V.TIME_SINCE_ENQUEUED="timeSinceEnqueued"});var cH=g(Qc=>{"use strict";Object.defineProperty(Qc,"__esModule",{value:!0});Qc.dispose=Qc.enable=void 0;var sH=Zt(),aH=Rt(),GS=Et(),na=[],WS=function(e){var t=e.data.message;na.forEach(function(r){t instanceof Error?r.trackException({exception:t}):(t.lastIndexOf(`
`)==t.length-1&&(t=t.substring(0,t.length-1)),r.trackTrace({message:t,severity:e.data.stderr?sH.SeverityLevel.Warning:sH.SeverityLevel.Information}))})};function Dre(e,t){var r=t.getStatsbeat();e?(na.length===0&&(GS.channel.subscribe("console",WS),r&&r.addInstrumentation(aH.StatsbeatInstrumentation.CONSOLE)),na.push(t)):(na=na.filter(function(n){return n!=t}),na.length===0&&(GS.channel.unsubscribe("console",WS),r&&r.removeInstrumentation(aH.StatsbeatInstrumentation.CONSOLE)))}Qc.enable=Dre;function Nre(){GS.channel.unsubscribe("console",WS),na=[]}Qc.dispose=Nre});var lH=g(Zc=>{"use strict";Object.defineProperty(Zc,"__esModule",{value:!0});Zc.dispose=Zc.enable=void 0;var Jc=Zt(),uH=Rt(),VS=Et(),ia=[],Lre={10:Jc.SeverityLevel.Verbose,20:Jc.SeverityLevel.Verbose,30:Jc.SeverityLevel.Information,40:Jc.SeverityLevel.Warning,50:Jc.SeverityLevel.Error,60:Jc.SeverityLevel.Critical},zS=function(e){var t=e.data.result;ia.forEach(function(r){var n=Lre[e.data.level];t instanceof Error?r.trackException({exception:t}):r.trackTrace({message:t,severity:n})})};function kre(e,t){var r=t.getStatsbeat();e?(ia.length===0&&(VS.channel.subscribe("bunyan",zS),r&&r.addInstrumentation(uH.StatsbeatInstrumentation.BUNYAN)),ia.push(t)):(ia=ia.filter(function(n){return n!=t}),ia.length===0&&(VS.channel.unsubscribe("bunyan",zS),r&&r.removeInstrumentation(uH.StatsbeatInstrumentation.BUNYAN)))}Zc.enable=kre;function Fre(){VS.channel.unsubscribe("bunyan",zS),ia=[]}Zc.dispose=Fre});var dH=g(eu=>{"use strict";Object.defineProperty(eu,"__esModule",{value:!0});eu.dispose=eu.enable=void 0;var fH=Rt(),Bt=Zt(),KS=Et(),oa=[],Mre={syslog:function(e){var t={emerg:Bt.SeverityLevel.Critical,alert:Bt.SeverityLevel.Critical,crit:Bt.SeverityLevel.Critical,error:Bt.SeverityLevel.Error,warning:Bt.SeverityLevel.Warning,notice:Bt.SeverityLevel.Information,info:Bt.SeverityLevel.Information,debug:Bt.SeverityLevel.Verbose};return t[e]===void 0?Bt.SeverityLevel.Information:t[e]},npm:function(e){var t={error:Bt.SeverityLevel.Error,warn:Bt.SeverityLevel.Warning,info:Bt.SeverityLevel.Information,verbose:Bt.SeverityLevel.Verbose,debug:Bt.SeverityLevel.Verbose,silly:Bt.SeverityLevel.Verbose};return t[e]===void 0?Bt.SeverityLevel.Information:t[e]},unknown:function(e){return Bt.SeverityLevel.Information}},YS=function(e){var t=e.data.message;oa.forEach(function(r){if(t instanceof Error)r.trackException({exception:t,properties:e.data.meta});else{var n=Mre[e.data.levelKind](e.data.level);r.trackTrace({message:t,severity:n,properties:e.data.meta})}})};function qre(e,t){var r=t.getStatsbeat();e?(oa.length===0&&(KS.channel.subscribe("winston",YS),r&&r.addInstrumentation(fH.StatsbeatInstrumentation.WINSTON)),oa.push(t)):(oa=oa.filter(function(n){return n!=t}),oa.length===0&&(KS.channel.unsubscribe("winston",YS),r&&r.removeInstrumentation(fH.StatsbeatInstrumentation.WINSTON)))}eu.enable=qre;function $re(){KS.channel.unsubscribe("winston",YS),oa=[]}eu.dispose=$re});var hH=g((Dbe,pH)=>{"use strict";var jre=fm(),Ure=function(){function e(t){if(e.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=t,e.INSTANCE=this}return e.prototype.enable=function(t,r){jre.IsInitialized&&(cH().enable(t&&r,this._client),lH().enable(t,this._client),dH().enable(t,this._client))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1,!1)},e._methodNames=["debug","info","log","warn","error"],e}();pH.exports=Ure});var gH=g((Nbe,mH)=>{"use strict";var Hre=function(){function e(t){if(e.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t;var r=process.versions.node.split(".");e._canUseUncaughtExceptionMonitor=parseInt(r[0])>13||parseInt(r[0])===13&&parseInt(r[1])>=7}return e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.enable=function(t){var r=this;if(t){this._isInitialized=!0;var n=this;if(!this._exceptionListenerHandle){var i=function(o,s,a){a===void 0&&(a=new Error(e._FALLBACK_ERROR_MESSAGE));var c={exception:a};c.contextObjects={},c.contextObjects.Error=a,r._client.trackException(c),r._client.flush({isAppCrashing:!0}),o&&s&&process.listeners(s).length===1&&(console.error(a),process.exit(1))};e._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=i.bind(this,!1,void 0),process.on(e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=i.bind(this,!0,e.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=i.bind(this,!1,void 0),process.on(e.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(e.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(e._canUseUncaughtExceptionMonitor?process.removeListener(e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(e.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(e.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.INSTANCE=null,e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",e.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",e.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",e._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",e._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",e._canUseUncaughtExceptionMonitor=!1,e}();mH.exports=Hre});var Jm=g((Lbe,vH)=>{"use strict";var Qm=require("os"),vn=Rt(),Bre=function(){function e(t,r,n){r===void 0&&(r=6e4),n===void 0&&(n=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,e.INSTANCE||(e.INSTANCE=this),this._lastRequests={totalRequestCount:0,totalFailedRequestCount:0,time:0},this._lastDependencies={totalDependencyCount:0,totalFailedDependencyCount:0,time:0},this._lastExceptions={totalExceptionCount:0,time:0},this._isInitialized=!1,this._client=t,this._collectionInterval=r,this._enableLiveMetricsCounters=n}return e.prototype.enable=function(t,r){var n=this;this._isEnabled=t,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),t?this._handle||(this._lastCpus=Qm.cpus(),this._lastRequests={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:e._totalDependencyCount,totalFailedDependencyCount:e._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:e._totalExceptionCount,time:+new Date},typeof process.cpuUsage=="function"&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=r||this._collectionInterval,this._handle=setInterval(function(){return n.trackPerformance()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},e.countRequest=function(t,r){var n;if(!!e.isEnabled()){if(typeof t=="string")n=+new Date("1970-01-01T"+t+"Z");else if(typeof t=="number")n=t;else return;e._intervalRequestExecutionTime+=n,r===!1&&e._totalFailedRequestCount++,e._totalRequestCount++}},e.countException=function(){e._totalExceptionCount++},e.countDependency=function(t,r){var n;if(!!e.isEnabled()){if(typeof t=="string")n=+new Date("1970-01-01T"+t+"Z");else if(typeof t=="number")n=t;else return;e._intervalDependencyExecutionTime+=n,r===!1&&e._totalFailedDependencyCount++,e._totalDependencyCount++}},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},e.prototype._trackCpu=function(){var t=Qm.cpus();if(t&&t.length&&this._lastCpus&&t.length===this._lastCpus.length){for(var r=0,n=0,i=0,o=0,s=0,a=0;!!t&&a<t.length;a++){var c=t[a],u=this._lastCpus[a],l="% cpu("+a+") ",f=c.model,d=c.speed,p=c.times,h=u.times,m=p.user-h.user||0;r+=m;var v=p.sys-h.sys||0;n+=v;var _=p.nice-h.nice||0;i+=_;var E=p.idle-h.idle||0;o+=E;var w=p.irq-h.irq||0;s+=w}var T=void 0;if(typeof process.cpuUsage=="function"){var N=process.cpuUsage(),P=process.hrtime(),z=N.user-this._lastAppCpuUsage.user+(N.system-this._lastAppCpuUsage.system)||0;if(typeof this._lastHrtime!="undefined"&&this._lastHrtime.length===2){var H=(P[0]-this._lastHrtime[0])*1e6+(P[1]-this._lastHrtime[1])/1e3||0;T=100*z/(H*t.length)}this._lastAppCpuUsage=N,this._lastHrtime=P}var R=r+n+i+o+s||1;this._client.trackMetric({name:vn.PerformanceCounter.PROCESSOR_TIME,value:(R-o)/R*100}),this._client.trackMetric({name:vn.PerformanceCounter.PROCESS_TIME,value:T||r/R*100})}this._lastCpus=t},e.prototype._trackMemory=function(){var t=Qm.freemem(),r=process.memoryUsage().rss,n=Qm.totalmem()-t;this._client.trackMetric({name:vn.PerformanceCounter.PRIVATE_BYTES,value:r}),this._client.trackMetric({name:vn.PerformanceCounter.AVAILABLE_BYTES,value:t}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:vn.QuickPulseCounter.COMMITTED_BYTES,value:n})},e.prototype._trackNetwork=function(){var t=this._lastRequests,r={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date},n=r.totalRequestCount-t.totalRequestCount||0,i=r.totalFailedRequestCount-t.totalFailedRequestCount||0,o=r.time-t.time,s=o/1e3,a=(e._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/n||0;if(this._lastIntervalRequestExecutionTime=e._intervalRequestExecutionTime,o>0){var c=n/s,u=i/s;this._client.trackMetric({name:vn.PerformanceCounter.REQUEST_RATE,value:c}),(!this._enableLiveMetricsCounters||n>0)&&this._client.trackMetric({name:vn.PerformanceCounter.REQUEST_DURATION,value:a}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:vn.QuickPulseCounter.REQUEST_FAILURE_RATE,value:u})}this._lastRequests=r},e.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var t=this._lastDependencies,r={totalDependencyCount:e._totalDependencyCount,totalFailedDependencyCount:e._totalFailedDependencyCount,time:+new Date},n=r.totalDependencyCount-t.totalDependencyCount||0,i=r.totalFailedDependencyCount-t.totalFailedDependencyCount||0,o=r.time-t.time,s=o/1e3,a=(e._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/n||0;if(this._lastIntervalDependencyExecutionTime=e._intervalDependencyExecutionTime,o>0){var c=n/s,u=i/s;this._client.trackMetric({name:vn.QuickPulseCounter.DEPENDENCY_RATE,value:c}),this._client.trackMetric({name:vn.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:u}),(!this._enableLiveMetricsCounters||n>0)&&this._client.trackMetric({name:vn.QuickPulseCounter.DEPENDENCY_DURATION,value:a})}this._lastDependencies=r}},e.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var t=this._lastExceptions,r={totalExceptionCount:e._totalExceptionCount,time:+new Date},n=r.totalExceptionCount-t.totalExceptionCount||0,i=r.time-t.time,o=i/1e3;if(i>0){var s=n/o;this._client.trackMetric({name:vn.QuickPulseCounter.EXCEPTION_RATE,value:s})}this._lastExceptions=r}},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e._totalRequestCount=0,e._totalFailedRequestCount=0,e._totalDependencyCount=0,e._totalFailedDependencyCount=0,e._totalExceptionCount=0,e._intervalDependencyExecutionTime=0,e._intervalRequestExecutionTime=0,e}();vH.exports=Bre});var yH=g(Zm=>{"use strict";Object.defineProperty(Zm,"__esModule",{value:!0});Zm.AggregatedMetricCounter=void 0;var Gre=function(){function e(t){this.dimensions=t,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0}return e}();Zm.AggregatedMetricCounter=Gre});var EH=g(eg=>{"use strict";Object.defineProperty(eg,"__esModule",{value:!0});eg.PreaggregatedMetricPropertyNames=void 0;eg.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}});var QS=g((XS,_H)=>{"use strict";var tg=XS&&XS.__assign||function(){return tg=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},tg.apply(this,arguments)},rg=Rt(),Wre=yH(),Vre=EH(),zre=function(){function e(t,r){r===void 0&&(r=6e4),e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,e._dependencyCountersCollection=[],e._requestCountersCollection=[],e._exceptionCountersCollection=[],e._traceCountersCollection=[],this._client=t,this._collectionInterval=r}return e.prototype.enable=function(t,r){var n=this;this._isEnabled=t,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),t?this._handle||(this._collectionInterval=r||this._collectionInterval,this._handle=setInterval(function(){return n.trackPreAggregatedMetrics()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},e.countException=function(t){if(!!e.isEnabled()){var r=e._getAggregatedCounter(t,this._exceptionCountersCollection);r.totalCount++}},e.countTrace=function(t){if(!!e.isEnabled()){var r=e._getAggregatedCounter(t,this._traceCountersCollection);r.totalCount++}},e.countRequest=function(t,r){if(!!e.isEnabled()){var n,i=e._getAggregatedCounter(r,this._requestCountersCollection);if(typeof t=="string")n=+new Date("1970-01-01T"+t+"Z");else if(typeof t=="number")n=t;else return;i.intervalExecutionTime+=n,i.totalCount++}},e.countDependency=function(t,r){if(!!e.isEnabled()){var n=e._getAggregatedCounter(r,this._dependencyCountersCollection),i;if(typeof t=="string")i=+new Date("1970-01-01T"+t+"Z");else if(typeof t=="number")i=t;else return;n.intervalExecutionTime+=i,n.totalCount++}},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},e._getAggregatedCounter=function(t,r){for(var n=!1,i=0;i<r.length;i++){if(t===r[i].dimensions)return r[i];if(Object.keys(t).length===Object.keys(r[i].dimensions).length){for(var o in t)if(t[o]!=r[i].dimensions[o]){n=!0;break}if(!n)return r[i];n=!1}}var s=new Wre.AggregatedMetricCounter(t);return r.push(s),s},e.prototype._trackRequestMetrics=function(){for(var t=0;t<e._requestCountersCollection.length;t++){var r=e._requestCountersCollection[t];r.time=+new Date;var n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime,o=(r.intervalExecutionTime-r.lastIntervalExecutionTime)/n||0;r.lastIntervalExecutionTime=r.intervalExecutionTime,i>0&&n>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:r.dimensions,value:o,count:n,aggregationInterval:i,metricType:rg.MetricId.REQUESTS_DURATION}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},e.prototype._trackDependencyMetrics=function(){for(var t=0;t<e._dependencyCountersCollection.length;t++){var r=e._dependencyCountersCollection[t];r.time=+new Date;var n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime,o=(r.intervalExecutionTime-r.lastIntervalExecutionTime)/n||0;r.lastIntervalExecutionTime=r.intervalExecutionTime,i>0&&n>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:r.dimensions,value:o,count:n,aggregationInterval:i,metricType:rg.MetricId.DEPENDENCIES_DURATION}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},e.prototype._trackExceptionMetrics=function(){for(var t=0;t<e._exceptionCountersCollection.length;t++){var r=e._exceptionCountersCollection[t],n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime;this._trackPreAggregatedMetric({name:"Exceptions",dimensions:r.dimensions,value:n,count:n,aggregationInterval:i,metricType:rg.MetricId.EXCEPTIONS_COUNT}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},e.prototype._trackTraceMetrics=function(){for(var t=0;t<e._traceCountersCollection.length;t++){var r=e._traceCountersCollection[t],n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime;this._trackPreAggregatedMetric({name:"Traces",dimensions:r.dimensions,value:n,count:n,aggregationInterval:i,metricType:rg.MetricId.TRACES_COUNT}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},e.prototype._trackPreAggregatedMetric=function(t){var r={};for(var n in t.dimensions)r[Vre.PreaggregatedMetricPropertyNames[n]]=t.dimensions[n];r=tg(tg({},r),{"_MS.MetricId":t.metricType,"_MS.AggregationIntervalMs":String(t.aggregationInterval),"_MS.IsAutocollected":"True"});var i={name:t.name,value:t.value,count:t.count,properties:r,kind:"Aggregation"};this._client.trackMetric(i)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e}();_H.exports=zre});var wH=g((ZS,CH)=>{"use strict";var Kre=ZS&&ZS.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Fn=require("url"),JS=Zt(),Yre=Hr(),Xre=Nc(),Qre=Ow(),Jre=Ys(),Zre=function(e){Kre(t,e);function t(r,n){var i=e.call(this)||this;return n&&n.method&&r&&(i.method=n.method,i.url=t._getUrlFromRequestOptions(r,n),i.startTime=+new Date),i}return t.prototype.onError=function(r){this._setStatus(void 0,r)},t.prototype.onResponse=function(r){this._setStatus(r.statusCode,void 0),this.correlationId=Yre.getCorrelationContextTarget(r,Xre.requestContextTargetKey)},t.prototype.getDependencyTelemetry=function(r,n){var i=new Fn.URL(this.url);i.search=void 0,i.hash=void 0;var o=this.method.toUpperCase()+" "+i.pathname,s=JS.RemoteDependencyDataConstants.TYPE_HTTP,a=i.hostname;i.port&&(a+=":"+i.port),this.correlationId?(s=JS.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==Jre.correlationIdPrefix&&(a+=" | "+this.correlationId)):s=JS.RemoteDependencyDataConstants.TYPE_HTTP;var c={id:n,name:o,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:s,target:a};if(r&&r.time?c.time=r.time:this.startTime&&(c.time=new Date(this.startTime)),r){for(var u in r)c[u]||(c[u]=r[u]);if(r.properties)for(var u in r.properties)c.properties[u]=r.properties[u]}return c},t._getUrlFromRequestOptions=function(r,n){if(typeof r=="string")if(r.indexOf("http://")===0||r.indexOf("https://")===0)r=new Fn.URL(r);else{var i=new Fn.URL("http://"+r);i.port==="443"?r=new Fn.URL("https://"+r):r=new Fn.URL("http://"+r)}else{if(r&&typeof Fn.URL=="function"&&r instanceof Fn.URL)return Fn.format(r);var o=r;r={},o&&Object.keys(o).forEach(function(c){r[c]=o[c]})}if(r.path&&r.host){var s=new Fn.URL(r.path,"http://"+r.host+r.path);r.pathname=s.pathname,r.search=s.search}if(r.host&&r.port){var a=new Fn.URL("http://"+r.host);!a.port&&r.port&&(r.hostname=r.host,delete r.host)}return r.protocol=r.protocol||n.agent&&n.agent.protocol||n.protocol||void 0,r.hostname=r.hostname||"localhost",Fn.format(r)},t}(Qre);CH.exports=Zre});var SH=g(tu=>{"use strict";var ng=tu&&tu.__assign||function(){return ng=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ng.apply(this,arguments)};Object.defineProperty(tu,"__esModule",{value:!0});tu.parseEventHubSpan=void 0;var eb=(Ke(),Gl),ene=(Ur(),pM),tne=(bo(),EC),If=Rt(),rne=function(e){var t=0,r=0,n=ene.hrTimeToMilliseconds(e.startTime);return e.links.forEach(function(i){var o=i.attributes,s=o==null?void 0:o[If.ENQUEUED_TIME];s&&(t+=1,r+=n-(parseFloat(s.toString())||0))}),Math.max(r/(t||1),0)},nne=function(e,t){var r,n=e.attributes[If.AzNamespace],i=(e.attributes[tne.SemanticAttributes.NET_PEER_NAME]||e.attributes["peer.address"]||"unknown").replace(/\/$/g,""),o=e.attributes[If.MessageBusDestination]||"unknown";switch(e.kind){case eb.SpanKind.CLIENT:t.dependencyTypeName=n,t.target=i+"/"+o;break;case eb.SpanKind.PRODUCER:t.dependencyTypeName=If.DependencyTypeName.QueueMessage+" | "+n,t.target=i+"/"+o;break;case eb.SpanKind.CONSUMER:t.source=i+"/"+o,t.measurements=ng(ng({},t.measurements),(r={},r[If.TIME_SINCE_ENQUEUED]=rne(e),r));break;default:}};tu.parseEventHubSpan=nne});var xH=g(ig=>{"use strict";Object.defineProperty(ig,"__esModule",{value:!0});ig.spanToTelemetryContract=void 0;var Zn=(Ke(),Gl),Ae=(bo(),EC),Ni=Rt(),ine=SH();function one(e){for(var t={},r=0,n=Object.keys(e.attributes);r<n.length;r++){var i=n[r];i.startsWith("http.")||i.startsWith("rpc.")||i.startsWith("db.")||i.startsWith("peer.")||i.startsWith("net.")||(t[i]=e.attributes[i])}var o=e.links.map(function(s){return{operation_Id:s.context.traceId,id:s.context.spanId}});return o.length>0&&(t["_MS.links"]=JSON.stringify(o)),t}function sne(e){return e===Ae.DbSystemValues.DB2||e===Ae.DbSystemValues.DERBY||e===Ae.DbSystemValues.MARIADB||e===Ae.DbSystemValues.MYSQL||e===Ae.DbSystemValues.MSSQL||e===Ae.DbSystemValues.ORACLE||e===Ae.DbSystemValues.POSTGRESQL||e===Ae.DbSystemValues.SQLITE||e===Ae.DbSystemValues.OTHER_SQL||e===Ae.DbSystemValues.HSQLDB||e===Ae.DbSystemValues.H2}function bH(e){var t=e.attributes[Ae.SemanticAttributes.HTTP_METHOD];if(t){var r=e.attributes[Ae.SemanticAttributes.HTTP_URL];if(r)return String(r);var n=e.attributes[Ae.SemanticAttributes.HTTP_SCHEME],i=e.attributes[Ae.SemanticAttributes.HTTP_TARGET];if(n&&i){var o=e.attributes[Ae.SemanticAttributes.HTTP_HOST];if(o)return n+"://"+o+i;var s=e.attributes[Ae.SemanticAttributes.NET_PEER_PORT];if(s){var a=e.attributes[Ae.SemanticAttributes.NET_PEER_NAME];if(a)return n+"://"+a+":"+s+i;var c=e.attributes[Ae.SemanticAttributes.NET_PEER_IP];if(c)return n+"://"+c+":"+s+i}}}return""}function tb(e){var t=e.attributes[Ae.SemanticAttributes.PEER_SERVICE],r=e.attributes[Ae.SemanticAttributes.HTTP_HOST],n=e.attributes[Ae.SemanticAttributes.HTTP_URL],i=e.attributes[Ae.SemanticAttributes.NET_PEER_NAME],o=e.attributes[Ae.SemanticAttributes.NET_PEER_IP];return t?String(t):r?String(r):n?String(n):i?String(i):o?String(o):""}function ane(e){var t={name:e.name,success:e.status.code!=Zn.SpanStatusCode.ERROR,resultCode:"0",duration:0,data:"",dependencyTypeName:""};e.kind===Zn.SpanKind.PRODUCER&&(t.dependencyTypeName=Ni.DependencyTypeName.QueueMessage),e.kind===Zn.SpanKind.INTERNAL&&e.parentSpanId&&(t.dependencyTypeName=Ni.DependencyTypeName.InProc);var r=e.attributes[Ae.SemanticAttributes.HTTP_METHOD],n=e.attributes[Ae.SemanticAttributes.DB_SYSTEM],i=e.attributes[Ae.SemanticAttributes.RPC_SYSTEM];if(r){t.dependencyTypeName=Ni.DependencyTypeName.Http,t.data=bH(e);var o=e.attributes[Ae.SemanticAttributes.HTTP_STATUS_CODE];o&&(t.resultCode=String(o));var s=tb(e);if(s){try{var a=new RegExp(/(https?)(:\/\/.*)(:\d+)(\S*)/),c=a.exec(s);if(c!=null){var u=c[1],l=c[3];(u=="https"&&l==":443"||u=="http"&&l==":80")&&(s=c[1]+c[2]+c[4])}}catch(h){}t.target=""+s}}else if(n){sne(String(n))?t.dependencyTypeName="SQL":t.dependencyTypeName=String(n);var f=e.attributes[Ae.SemanticAttributes.DB_STATEMENT];f&&(t.data=String(f));var s=tb(e),d=e.attributes[Ae.SemanticAttributes.DB_NAME];s?t.target=d?s+"/"+d:""+s:t.target=d?""+d:""+n}else if(i){t.dependencyTypeName=Ni.DependencyTypeName.Grpc;var p=e.attributes[Ae.SemanticAttributes.RPC_GRPC_STATUS_CODE];p&&(t.resultCode=String(p));var s=tb(e);s?t.target=""+s:i&&(t.target=String(i))}return t}function cne(e){var t={name:e.name,success:e.status.code!=Zn.SpanStatusCode.ERROR,resultCode:"0",duration:0,url:"",source:void 0},r=e.attributes[Ae.SemanticAttributes.HTTP_METHOD],n=e.attributes[Ae.SemanticAttributes.RPC_GRPC_STATUS_CODE];if(r){t.url=bH(e);var i=e.attributes[Ae.SemanticAttributes.HTTP_STATUS_CODE];i&&(t.resultCode=String(i))}else n&&(t.resultCode=String(n));return t}function une(e){var t;switch(e.kind){case Zn.SpanKind.CLIENT:case Zn.SpanKind.PRODUCER:case Zn.SpanKind.INTERNAL:t=ane(e);break;case Zn.SpanKind.SERVER:case Zn.SpanKind.CONSUMER:t=cne(e);break}var r=e.spanContext?e.spanContext():e.context(),n=""+r.spanId,i=Math.round(e.duration[0]*1e3+e.duration[1]/1e6);return t.id=n,t.duration=i,t.properties=one(e),e.attributes[Ni.AzNamespace]&&(e.kind===Zn.SpanKind.INTERNAL&&(t.dependencyTypeName=Ni.DependencyTypeName.InProc+" | "+e.attributes[Ni.AzNamespace]),e.attributes[Ni.AzNamespace]===Ni.MicrosoftEventHub&&ine.parseEventHubSpan(e,t)),t}ig.spanToTelemetryContract=une});var IH=g(ko=>{"use strict";Object.defineProperty(ko,"__esModule",{value:!0});ko.enable=ko.subscriber=void 0;var Rf=(Ke(),Gl),TH=Rt(),AH=Et(),lne=xH(),fne=t_(),ru=[],dne=function(e){try{var t=e.data,r=lne.spanToTelemetryContract(t);fne.AsyncScopeManager.with(t,function(){ru.forEach(function(n){t.kind===Rf.SpanKind.SERVER||t.kind===Rf.SpanKind.CONSUMER?n.trackRequest(r):(t.kind===Rf.SpanKind.CLIENT||t.kind===Rf.SpanKind.INTERNAL||t.kind===Rf.SpanKind.PRODUCER)&&n.trackDependency(r)})})}catch(n){}};ko.subscriber=dne;function pne(e,t){var r=t.getStatsbeat();e?(ru.length===0&&(AH.channel.subscribe("azure-coretracing",ko.subscriber),r&&r.addInstrumentation(TH.StatsbeatInstrumentation.AZURE_CORE_TRACING)),ru.push(t)):(ru=ru.filter(function(n){return n!=t}),ru.length===0&&(AH.channel.unsubscribe("azure-coretracing",ko.subscriber),r&&r.removeInstrumentation(TH.StatsbeatInstrumentation.AZURE_CORE_TRACING)))}ko.enable=pne});var OH=g(Fo=>{"use strict";Object.defineProperty(Fo,"__esModule",{value:!0});Fo.enable=Fo.subscriber=void 0;var RH=Rt(),PH=Et(),nu=[],hne=function(e){e.data.event.commandName!=="ismaster"&&nu.forEach(function(t){var r=e.data.startedData&&e.data.startedData.databaseName||"Unknown database";t.trackDependency({target:r,data:e.data.event.commandName,name:e.data.event.commandName,duration:e.data.event.duration,success:e.data.succeeded,resultCode:e.data.succeeded?"0":"1",time:e.data.startedData.time,dependencyTypeName:"mongodb"})})};Fo.subscriber=hne;function mne(e,t){var r=t.getStatsbeat();e?(nu.length===0&&(PH.channel.subscribe("mongodb",Fo.subscriber),r&&r.addInstrumentation(RH.StatsbeatInstrumentation.MONGODB)),nu.push(t)):(nu=nu.filter(function(n){return n!=t}),nu.length===0&&(PH.channel.unsubscribe("mongodb",Fo.subscriber),r&&r.removeInstrumentation(RH.StatsbeatInstrumentation.MONGODB)))}Fo.enable=mne});var LH=g(Mo=>{"use strict";Object.defineProperty(Mo,"__esModule",{value:!0});Mo.enable=Mo.subscriber=void 0;var DH=Rt(),NH=Et(),iu=[],gne=function(e){iu.forEach(function(t){var r=e.data.query||{},n=r.sql||"Unknown query",i=!e.data.err,o=r._connection||{},s=o.config||{},a=s.socketPath?s.socketPath:(s.host||"localhost")+":"+s.port;t.trackDependency({target:a,data:n,name:n,duration:e.data.duration,success:i,resultCode:i?"0":"1",time:e.data.time,dependencyTypeName:"mysql"})})};Mo.subscriber=gne;function vne(e,t){var r=t.getStatsbeat();e?(iu.length===0&&(NH.channel.subscribe("mysql",Mo.subscriber),r&&r.addInstrumentation(DH.StatsbeatInstrumentation.MYSQL)),iu.push(t)):(iu=iu.filter(function(n){return n!=t}),iu.length===0&&(NH.channel.unsubscribe("mysql",Mo.subscriber),r&&r.removeInstrumentation(DH.StatsbeatInstrumentation.MYSQL)))}Mo.enable=vne});var MH=g(qo=>{"use strict";Object.defineProperty(qo,"__esModule",{value:!0});qo.enable=qo.subscriber=void 0;var kH=Rt(),FH=Et(),ou=[],yne=function(e){ou.forEach(function(t){e.data.commandObj.command!=="info"&&t.trackDependency({target:e.data.address,name:e.data.commandObj.command,data:e.data.commandObj.command,duration:e.data.duration,success:!e.data.err,resultCode:e.data.err?"1":"0",time:e.data.time,dependencyTypeName:"redis"})})};qo.subscriber=yne;function Ene(e,t){var r=t.getStatsbeat();e?(ou.length===0&&(FH.channel.subscribe("redis",qo.subscriber),r&&r.addInstrumentation(kH.StatsbeatInstrumentation.REDIS)),ou.push(t)):(ou=ou.filter(function(n){return n!=t}),ou.length===0&&(FH.channel.unsubscribe("redis",qo.subscriber),r&&r.removeInstrumentation(kH.StatsbeatInstrumentation.REDIS)))}qo.enable=Ene});var jH=g($o=>{"use strict";Object.defineProperty($o,"__esModule",{value:!0});$o.enable=$o.subscriber=void 0;var qH=Rt(),$H=Et(),su=[],_ne=function(e){su.forEach(function(t){var r=e.data.query,n=r.preparable&&r.preparable.text||r.plan||r.text||"unknown query",i=!e.data.error,o=e.data.database.host+":"+e.data.database.port;t.trackDependency({target:o,data:n,name:n,duration:e.data.duration,success:i,resultCode:i?"0":"1",time:e.data.time,dependencyTypeName:"postgres"})})};$o.subscriber=_ne;function Cne(e,t){var r=t.getStatsbeat();e?(su.length===0&&($H.channel.subscribe("postgres",$o.subscriber),r&&r.addInstrumentation(qH.StatsbeatInstrumentation.POSTGRES)),su.push(t)):(su=su.filter(function(n){return n!=t}),su.length===0&&($H.channel.unsubscribe("postgres",$o.subscriber),r&&r.removeInstrumentation(qH.StatsbeatInstrumentation.POSTGRES)))}$o.enable=Cne});var uu=g((ib,GH)=>{"use strict";var og=ib&&ib.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n},au=require("http"),cu=require("https"),rb=Tt(),UH=Hr(),jo=Nc(),wne=wH(),HH=Ns(),BH=Ys(),nb=hm(),Sne=fm(),bne=function(){function e(t){if(e.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t}return e.prototype.enable=function(t){this._isEnabled=t,this._isEnabled&&!this._isInitialized&&this._initialize(),Sne.IsInitialized&&(IH().enable(!0,this._client),OH().enable(t,this._client),LH().enable(t,this._client),MH().enable(t,this._client),jH().enable(t,this._client))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype._initialize=function(){var t=this;this._isInitialized=!0;var r=au.request,n=cu.request,i=function(o,s){var a=!s[e.disableCollectionRequestOption]&&!o[e.alreadyAutoCollectedFlag];s.headers&&s.headers["user-agent"]&&s.headers["user-agent"].toString().indexOf("azsdk-js")!==-1&&(a=!1),o[e.alreadyAutoCollectedFlag]=!0,o&&s&&a&&(HH.CorrelationContextManager.wrapEmitter(o),e.trackRequest(t._client,{options:s,request:o}))};au.request=function(o){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];var c=r.call.apply(r,og([au,o],s));return i(c,o),c},cu.request=function(o){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];var c=n.call.apply(n,og([cu,o],s));return i(c,o),c},au.get=function(o){for(var s,a=[],c=1;c<arguments.length;c++)a[c-1]=arguments[c];var u=(s=au.request).call.apply(s,og([au,o],a));return u.end(),u},cu.get=function(o){for(var s,a=[],c=1;c<arguments.length;c++)a[c-1]=arguments[c];var u=(s=cu.request).call.apply(s,og([cu,o],a));return u.end(),u}},e.trackRequest=function(t,r){if(!r.options||!r.request||!t){rb.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!r.options,!r.request,!t);return}var n=new wne(r.options,r.request),i=HH.CorrelationContextManager.getCurrentContext(),o,s;if(i&&i.operation&&i.operation.traceparent&&nb.isValidTraceId(i.operation.traceparent.traceId))i.operation.traceparent.updateSpanId(),o=i.operation.traceparent.getBackCompatRequestId();else if(BH.w3cEnabled){var a=new nb;s=a.toString(),o=a.getBackCompatRequestId()}else o=i&&i.operation&&i.operation.parentId+e.requestNumber+++".";if(UH.canIncludeCorrelationHeader(t,n.getUrl())&&r.request.getHeader&&r.request.setHeader&&t.config&&t.config.correlationId){var c=r.request.getHeader(jo.requestContextHeader);try{UH.safeIncludeCorrelationHeader(t,r.request,c)}catch(f){rb.warn("Request-Context header could not be set. Correlation of requests may be lost",f)}if(i&&i.operation)try{if(r.request.setHeader(jo.requestIdHeader,o),t.config.ignoreLegacyHeaders||(r.request.setHeader(jo.parentIdHeader,i.operation.id),r.request.setHeader(jo.rootIdHeader,o)),s||i.operation.traceparent)r.request.setHeader(jo.traceparentHeader,s||i.operation.traceparent.toString());else if(BH.w3cEnabled){var a=new nb().toString();r.request.setHeader(jo.traceparentHeader,a)}if(i.operation.tracestate){var u=i.operation.tracestate.toString();u&&r.request.setHeader(jo.traceStateHeader,u)}var l=i.customProperties.serializeToHeader();l&&r.request.setHeader(jo.correlationContextHeader,l)}catch(f){rb.warn("Correlation headers could not be set. Correlation of requests may be lost.",f)}}r.request.on&&(r.request.on("response",function(f){n.onResponse(f);var d=n.getDependencyTelemetry(r,o);d.contextObjects=d.contextObjects||{},d.contextObjects["http.RequestOptions"]=r.options,d.contextObjects["http.ClientRequest"]=r.request,d.contextObjects["http.ClientResponse"]=f,t.trackDependency(d)}),r.request.on("error",function(f){n.onError(f);var d=n.getDependencyTelemetry(r,o);d.contextObjects=d.contextObjects||{},d.contextObjects["http.RequestOptions"]=r.options,d.contextObjects["http.ClientRequest"]=r.request,d.contextObjects.Error=f,t.trackDependency(d)}),r.request.on("abort",function(){n.onError(new Error);var f=n.getDependencyTelemetry(r,o);f.contextObjects=f.contextObjects||{},f.contextObjects["http.RequestOptions"]=r.options,f.contextObjects["http.ClientRequest"]=r.request,t.trackDependency(f)}))},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.disableCollectionRequestOption="disableAppInsightsAutoCollection",e.requestNumber=1,e.alreadyAutoCollectedFlag="_appInsightsAutoCollected",e}();GH.exports=bne});var ob=g(sg=>{"use strict";Object.defineProperty(sg,"__esModule",{value:!0});sg.AzureVirtualMachine=void 0;var WH=Tt(),xne=Hr(),Tne=uu(),Ane="http://169.254.169.254/metadata/instance/compute",Ine="api-version=2017-12-01",Rne="format=json",Pne="ENETUNREACH",One=function(){function e(){}return e.getAzureComputeMetadata=function(t,r){var n,i={},o=Ane+"?"+Ine+"&"+Rne,s=(n={method:"GET"},n[Tne.disableCollectionRequestOption]=!0,n.headers={Metadata:"True"},n),a=xne.makeRequest(t,o,s,function(c){if(c.statusCode===200){i.isVM=!0;var u="";c.on("data",function(l){u+=l}),c.on("end",function(){try{var l=JSON.parse(u);i.id=l.vmId||"",i.subscriptionId=l.subscriptionId||"",i.osType=l.osType||""}catch(f){WH.warn(e.TAG,f)}r(i)})}else r(i)});a&&(a.on("error",function(c){c&&c.message&&c.message.indexOf(Pne)>-1?i.isVM=!1:WH.warn(e.TAG,c),r(i)}),a.end())},e.TAG="AzureVirtualMachine",e}();sg.AzureVirtualMachine=One});var lu=g((Wbe,YH)=>{"use strict";var Li=require("os"),VH=require("fs"),zH=require("path"),Dne=Zt(),KH=Tt(),Nne=function(){function e(t){this.keys=new Dne.ContextTagKeys,this.tags={},this._loadApplicationContext(t),this._loadDeviceContext(),this._loadInternalContext()}return e.prototype._loadApplicationContext=function(t){if(t=t||zH.resolve(__dirname,"../../../../package.json"),!e.appVersion[t]){e.appVersion[t]="unknown";try{var r=JSON.parse(VH.readFileSync(t,"utf8"));r&&typeof r.version=="string"&&(e.appVersion[t]=r.version)}catch(n){KH.info("unable to read app version: ",n)}}this.tags[this.keys.applicationVersion]=e.appVersion[t]},e.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=Li&&Li.hostname(),this.tags[this.keys.deviceOSVersion]=Li&&Li.type()+" "+Li.release(),this.tags[this.keys.cloudRole]=e.DefaultRoleName,this.tags["ai.device.osArchitecture"]=Li&&Li.arch(),this.tags["ai.device.osPlatform"]=Li&&Li.platform()},e.prototype._loadInternalContext=function(){var t=zH.resolve(__dirname,"../../package.json");if(!e.sdkVersion){e.sdkVersion="unknown";try{var r=JSON.parse(VH.readFileSync(t,"utf8"));r&&typeof r.version=="string"&&(e.sdkVersion=r.version)}catch(n){KH.info("unable to read app version: ",n)}}this.tags[this.keys.internalSdkVersion]="node:"+e.sdkVersion},e.DefaultRoleName="Web",e.appVersion={},e.sdkVersion=null,e}();YH.exports=Nne});var JH=g((Vbe,QH)=>{"use strict";var Lne=require("os"),kne=ob(),XH=Rt(),Fne=lu(),Mne=function(){function e(t){this._collectionInterval=9e5,e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,this._client=t}return e.prototype.enable=function(t,r){var n=this;this._isEnabled=t,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),t?this._handle||(this._handle=setInterval(function(){return n.trackHeartBeat(r,function(){})},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackHeartBeat=function(t,r){var n=this,i=!1,o={},s=Fne.sdkVersion;o.sdk=s,o.osType=Lne.type(),process.env.WEBSITE_SITE_NAME?(o.appSrv_SiteName=process.env.WEBSITE_SITE_NAME||"",o.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME||"",o.appSrv_wsHost=process.env.WEBSITE_HOSTNAME||""):process.env.FUNCTIONS_WORKER_RUNTIME?o.azfunction_appId=process.env.WEBSITE_HOSTNAME:t&&this._isVM===void 0&&(i=!0,kne.AzureVirtualMachine.getAzureComputeMetadata(t,function(a){n._isVM=a.isVM,n._isVM&&(o.azInst_vmId=a.id,o.azInst_subscriptionId=a.subscriptionId,o.azInst_osType=a.osType),n._client.trackMetric({name:XH.HeartBeatMetricName,value:0,properties:o}),r()})),i||(this._client.trackMetric({name:XH.HeartBeatMetricName,value:0,properties:o}),r())},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e}();QH.exports=Mne});var ab=g((zbe,nB)=>{"use strict";var ZH=require("http"),eB=require("https"),tB=Tt(),rB=Hr(),qne=Nc(),sb=Lw(),ki=Ns(),$ne=Jm(),jne=function(){function e(t){if(e.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t}return e.prototype.enable=function(t){this._isEnabled=t,(this._isAutoCorrelating||this._isEnabled||$ne.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},e.prototype.useAutoCorrelation=function(t,r){t&&!this._isAutoCorrelating?ki.CorrelationContextManager.enable(r):!t&&this._isAutoCorrelating&&ki.CorrelationContextManager.disable(),this._isAutoCorrelating=t},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},e.prototype._generateCorrelationContext=function(t){if(!!this._isAutoCorrelating)return ki.CorrelationContextManager.generateContextObject(t.getOperationId(this._client.context.tags),t.getRequestId(),t.getOperationName(this._client.context.tags),t.getCorrelationContextHeader(),t.getTraceparent(),t.getTracestate())},e.prototype._initialize=function(){var t=this;this._isInitialized=!0;var r=function(s){if(!!s){if(typeof s!="function")throw new Error("onRequest handler must be a function");return function(a,c){ki.CorrelationContextManager.wrapEmitter(a),ki.CorrelationContextManager.wrapEmitter(c);var u=a&&!a[e.alreadyAutoCollectedFlag];if(a&&u){var l=new sb(a),f=t._generateCorrelationContext(l);ki.CorrelationContextManager.runWithContext(f,function(){t._isEnabled&&(a[e.alreadyAutoCollectedFlag]=!0,e.trackRequest(t._client,{request:a,response:c},l)),typeof s=="function"&&s(a,c)})}else typeof s=="function"&&s(a,c)}}},n=function(s){var a=s.addListener.bind(s);s.addListener=function(c,u){switch(c){case"request":case"checkContinue":return a(c,r(u));default:return a(c,u)}},s.on=s.addListener},i=ZH.createServer;ZH.createServer=function(s,a){if(a&&typeof a=="function"){var c=i(s,r(a));return n(c),c}else{var c=i(r(s));return n(c),c}};var o=eB.createServer;eB.createServer=function(s,a){var c=o(s,r(a));return n(c),c}},e.trackRequestSync=function(t,r){if(!r.request||!r.response||!t){tB.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!r.request,!r.response,!t);return}e.addResponseCorrelationIdHeader(t,r.response);var n=ki.CorrelationContextManager.getCurrentContext(),i=new sb(r.request,n&&n.operation.parentId);n&&(n.operation.id=i.getOperationId(t.context.tags)||n.operation.id,n.operation.name=i.getOperationName(t.context.tags)||n.operation.name,n.operation.parentId=i.getRequestId()||n.operation.parentId,n.customProperties.addHeaderData(i.getCorrelationContextHeader())),e.endRequest(t,i,r,r.duration,r.error)},e.trackRequest=function(t,r,n){if(!r.request||!r.response||!t){tB.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!r.request,!r.response,!t);return}var i=ki.CorrelationContextManager.getCurrentContext(),o=n||new sb(r.request,i&&i.operation.parentId);rB.canIncludeCorrelationHeader(t,o.getUrl())&&e.addResponseCorrelationIdHeader(t,r.response),i&&!n&&(i.operation.id=o.getOperationId(t.context.tags)||i.operation.id,i.operation.name=o.getOperationName(t.context.tags)||i.operation.name,i.operation.parentId=o.getOperationParentId(t.context.tags)||i.operation.parentId,i.customProperties.addHeaderData(o.getCorrelationContextHeader())),r.response.once&&r.response.once("finish",function(){e.endRequest(t,o,r,null,null)}),r.request.on&&r.request.on("error",function(s){e.endRequest(t,o,r,null,s)}),r.request.on&&r.request.on("aborted",function(){var s="The request has been aborted and the network socket has closed.";e.endRequest(t,o,r,null,s)})},e.addResponseCorrelationIdHeader=function(t,r){if(t.config&&t.config.correlationId&&r.getHeader&&r.setHeader&&!r.headersSent){var n=r.getHeader(qne.requestContextHeader);rB.safeIncludeCorrelationHeader(t,r,n)}},e.endRequest=function(t,r,n,i,o){o?r.onError(o,i):r.onResponse(n.response,i);var s=r.getRequestTelemetry(n);if(s.tagOverrides=r.getRequestTags(t.context.tags),n.tagOverrides)for(var a in n.tagOverrides)s.tagOverrides[a]=n.tagOverrides[a];var c=r.getLegacyRootId();c&&(s.properties.ai_legacyRootId=c),s.contextObjects=s.contextObjects||{},s.contextObjects["http.ServerRequest"]=n.request,s.contextObjects["http.ServerResponse"]=n.response,t.trackRequest(s)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1,ki.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},e.alreadyAutoCollectedFlag="_appInsightsAutoCollected",e}();nB.exports=jne});var sB=g((lb,oB)=>{"use strict";var yn=lb&&lb.__assign||function(){return yn=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},yn.apply(this,arguments)},ub=require("os"),sa=Zt(),iB=Rt(),Une=Hr(),Hne=Tt(),Bne=Une.w3cTraceId(),Gne=function(){function e(){}return e.createQuickPulseEnvelope=function(t,r,n,i){var o=ub&&typeof ub.hostname=="function"&&ub.hostname()||"Unknown",s=i.tags&&i.keys&&i.keys.cloudRoleInstance&&i.tags[i.keys.cloudRoleInstance]||o,a=i.tags&&i.keys&&i.keys.cloudRole&&i.tags[i.keys.cloudRole]||null,c={Documents:r.length>0?r:null,InstrumentationKey:n.instrumentationKey||"",Metrics:t.length>0?t:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:i.tags[i.keys.internalSdkVersion],StreamId:Bne,MachineName:o,Instance:s,RoleName:a};return c},e.createQuickPulseMetric=function(t){var r;return r={Name:t.name,Value:t.value,Weight:t.count||1},r},e.telemetryEnvelopeToQuickPulseDocument=function(t){switch(t.data.baseType){case sa.TelemetryTypeString.Event:return e.createQuickPulseEventDocument(t);case sa.TelemetryTypeString.Exception:return e.createQuickPulseExceptionDocument(t);case sa.TelemetryTypeString.Trace:return e.createQuickPulseTraceDocument(t);case sa.TelemetryTypeString.Dependency:return e.createQuickPulseDependencyDocument(t);case sa.TelemetryTypeString.Request:return e.createQuickPulseRequestDocument(t)}return null},e.createQuickPulseEventDocument=function(t){var r=e.createQuickPulseDocument(t),n=t.data.baseData.name,i=yn(yn({},r),{Name:n});return i},e.createQuickPulseTraceDocument=function(t){var r=e.createQuickPulseDocument(t),n=t.data.baseData.severityLevel||0,i=yn(yn({},r),{Message:t.data.baseData.message,SeverityLevel:sa.SeverityLevel[n]});return i},e.createQuickPulseExceptionDocument=function(t){var r=e.createQuickPulseDocument(t),n=t.data.baseData.exceptions,i="",o="",s="";n&&n.length>0&&(n[0].parsedStack&&n[0].parsedStack.length>0?n[0].parsedStack.forEach(function(c){i+=c.assembly+`
`}):n[0].stack&&n[0].stack.length>0&&(i=n[0].stack),o=n[0].message,s=n[0].typeName);var a=yn(yn({},r),{Exception:i,ExceptionMessage:o,ExceptionType:s});return a},e.createQuickPulseRequestDocument=function(t){var r=e.createQuickPulseDocument(t),n=t.data.baseData,i=yn(yn({},r),{Name:n.name,Success:n.success,Duration:n.duration,ResponseCode:n.responseCode,OperationName:n.name});return i},e.createQuickPulseDependencyDocument=function(t){var r=e.createQuickPulseDocument(t),n=t.data.baseData,i=yn(yn({},r),{Name:n.name,Target:n.target,Success:n.success,Duration:n.duration,ResultCode:n.resultCode,CommandName:n.data,OperationName:r.OperationId,DependencyTypeName:n.type});return i},e.createQuickPulseDocument=function(t){var r,n,i,o;t.data.baseType?(n=iB.TelemetryTypeStringToQuickPulseType[t.data.baseType],r=iB.TelemetryTypeStringToQuickPulseDocumentType[t.data.baseType]):Hne.warn("Document type invalid; not sending live metric document",t.data.baseType),i=t.tags[e.keys.operationId],o=e.aggregateProperties(t);var s={DocumentType:r,__type:n,OperationId:i,Version:"1.0",Properties:o};return s},e.aggregateProperties=function(t){var r=[],n=t.data.baseData.measurements||{};for(var i in n)if(n.hasOwnProperty(i)){var o=n[i],s={key:i,value:o};r.push(s)}var a=t.data.baseData.properties||{};for(var i in a)if(a.hasOwnProperty(i)){var o=a[i],s={key:i,value:o};r.push(s)}return r},e.keys=new sa.ContextTagKeys,e}();oB.exports=Gne});var cB=g((Kbe,aB)=>{"use strict";var Wne=function(){return(Date.now()+621355968e5)*1e4};aB.exports={getTransmissionTime:Wne}});var pB=g((Pf,dB)=>{"use strict";var uB=Pf&&Pf.__awaiter||function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(f){s(f)}}function c(l){try{u(n.throw(l))}catch(f){s(f)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(e,t||[])).next())})},lB=Pf&&Pf.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Vne=require("https"),zne=uu(),fB=Tt(),Kne=cB(),Yne=Hr(),En={method:"POST",time:"x-ms-qps-transmission-time",pollingIntervalHint:"x-ms-qps-service-polling-interval-hint",endpointRedirect:"x-ms-qps-service-endpoint-redirect",instanceName:"x-ms-qps-instance-name",streamId:"x-ms-qps-stream-id",machineName:"x-ms-qps-machine-name",roleName:"x-ms-qps-role-name",streamid:"x-ms-qps-stream-id",invariantVersion:"x-ms-qps-invariant-version",subscribed:"x-ms-qps-subscribed"},Xne=function(){function e(t){this._config=t,this._consecutiveErrors=0}return e.prototype.ping=function(t,r,n){var i=[{name:En.streamId,value:t.StreamId},{name:En.machineName,value:t.MachineName},{name:En.roleName,value:t.RoleName},{name:En.instanceName,value:t.Instance},{name:En.invariantVersion,value:t.InvariantVersion.toString()}];this._submitData(t,r,n,"ping",i)},e.prototype.post=function(t,r,n){return uB(this,void 0,void 0,function(){return lB(this,function(i){switch(i.label){case 0:return[4,this._submitData([t],r,n,"post")];case 1:return i.sent(),[2]}})})},e.prototype._submitData=function(t,r,n,i,o){return uB(this,void 0,void 0,function(){var s,a,c,u,l,f=this;return lB(this,function(d){return s=JSON.stringify(t),a=(u={},u[zne.disableCollectionRequestOption]=!0,u.host=r&&r.length>0?r:this._config.quickPulseHost,u.method=En.method,u.path="/QuickPulseService.svc/"+i+"?ikey="+this._config.instrumentationKey,u.headers=(l={Expect:"100-continue"},l[En.time]=Kne.getTransmissionTime(),l["Content-Type"]="application/json",l["Content-Length"]=Buffer.byteLength(s),l),u),o&&o.length>0&&o.forEach(function(p){return a.headers[p.name]=p.value}),this._config.httpsAgent?a.agent=this._config.httpsAgent:a.agent=Yne.tlsRestrictedAgent,c=Vne.request(a,function(p){if(p.statusCode==200){var h=p.headers[En.subscribed]==="true",m=p.headers[En.endpointRedirect]?p.headers[En.endpointRedirect].toString():null,v=p.headers[En.pollingIntervalHint]?parseInt(p.headers[En.pollingIntervalHint].toString()):null;f._consecutiveErrors=0,n(h,p,m,v)}else f._onError("StatusCode:"+p.statusCode+" StatusMessage:"+p.statusMessage),n()}),c.on("error",function(p){f._onError(p),n()}),c.write(s),c.end(),[2]})})},e.prototype._onError=function(t){this._consecutiveErrors++;var r="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%e.MAX_QPS_FAILURES_BEFORE_WARN==0?(r="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",fB.warn(e.TAG,r,t)):fB.info(e.TAG,r,t)},e.TAG="QuickPulseSender",e.MAX_QPS_FAILURES_BEFORE_WARN=25,e}();dB.exports=Xne});var yB=g((Of,vB)=>{"use strict";var hB=Of&&Of.__awaiter||function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(f){s(f)}}function c(l){try{u(n.throw(l))}catch(f){s(f)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(e,t||[])).next())})},mB=Of&&Of.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},gB=Tt(),fb=sB(),Qne=pB(),Jne=Rt(),Zne=lu(),eie=function(){function e(t,r){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=t,this.context=r||new Zne,this._sender=new Qne(this.config),this._isEnabled=!1}return e.prototype.addCollector=function(t){this._collectors.push(t)},e.prototype.trackMetric=function(t){this._addMetric(t)},e.prototype.addDocument=function(t){var r=fb.telemetryEnvelopeToQuickPulseDocument(t);r&&this._documents.push(r)},e.prototype.enable=function(t){t&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!t&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},e.prototype.enableCollectors=function(t){this._collectors.forEach(function(r){r.enable(t)})},e.prototype._addMetric=function(t){var r=t.value,n=t.count||1,i=Jne.PerformanceToQuickPulseCounter[t.name];i&&(this._metrics[i]?(this._metrics[i].Value=(this._metrics[i].Value*this._metrics[i].Weight+r*n)/(this._metrics[i].Weight+n),this._metrics[i].Weight+=n):(this._metrics[i]=fb.createQuickPulseMetric(t),this._metrics[i].Name=i,this._metrics[i].Weight=1))},e.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},e.prototype._goQuickPulse=function(){return hB(this,void 0,void 0,function(){var t,r,n,i,o=this;return mB(this,function(s){switch(s.label){case 0:return t=Object.keys(this._metrics).map(function(a){return o._metrics[a]}),r=fb.createQuickPulseEnvelope(t,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(r)]:[3,2];case 1:return s.sent(),[3,3];case 2:this._ping(r),s.label=3;case 3:return n=this._pollingIntervalHint>0?this._pollingIntervalHint:e.PING_INTERVAL,i=this._isCollectingData?e.POST_INTERVAL:n,this._isCollectingData&&Date.now()-this._lastSuccessTime>=e.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,i=e.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=e.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(i=e.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),i),this._handle.unref(),[2]}})})},e.prototype._ping=function(t){this._sender.ping(t,this._redirectedHost,this._quickPulseDone.bind(this))},e.prototype._post=function(t){return hB(this,void 0,void 0,function(){return mB(this,function(r){switch(r.label){case 0:return[4,this._sender.post(t,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return r.sent(),[2]}})})},e.prototype._quickPulseDone=function(t,r,n,i){t!=null?(this._isCollectingData!==t&&(gB.info("Live Metrics sending data",t),this.enableCollectors(t)),this._isCollectingData=t,n&&n.length>0&&(this._redirectedHost=n,gB.info("Redirecting endpoint to: ",n)),i&&i>0&&(this._pollingIntervalHint=i),r&&r.statusCode<300&&r.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},e.MAX_POST_WAIT_TIME=2e4,e.MAX_PING_WAIT_TIME=6e4,e.FALLBACK_INTERVAL=6e4,e.PING_INTERVAL=5e3,e.POST_INTERVAL=1e3,e}();vB.exports=eie});var CB=g((Ybe,_B)=>{"use strict";var EB=Rt(),tie=function(){function e(){}return e.parse=function(t){if(!t)return{};var r=t.split(e._FIELDS_SEPARATOR),n=r.reduce(function(o,s){var a=s.split(e._FIELD_KEY_VALUE_SEPARATOR);if(a.length===2){var c=a[0].toLowerCase(),u=a[1];o[c]=u}return o},{});if(Object.keys(n).length>0){if(n.endpointsuffix){var i=n.location?n.location+".":"";n.ingestionendpoint=n.ingestionendpoint||"https://"+i+"dc."+n.endpointsuffix,n.liveendpoint=n.liveendpoint||"https://"+i+"live."+n.endpointsuffix}n.ingestionendpoint=n.ingestionendpoint||EB.DEFAULT_BREEZE_ENDPOINT,n.liveendpoint=n.liveendpoint||EB.DEFAULT_LIVEMETRICS_ENDPOINT}return n},e._FIELDS_SEPARATOR=";",e._FIELD_KEY_VALUE_SEPARATOR="=",e}();_B.exports=tie});var ag=g((Qbe,bB)=>{"use strict";var db=Ys(),wB=CB(),Xbe=Tt(),SB=Rt(),rie=require("url"),nie=function(){function e(t){var r=this;this.endpointBase=SB.DEFAULT_BREEZE_ENDPOINT;var n=process.env[e.ENV_connectionString],i=wB.parse(t),o=wB.parse(n),s=!i.instrumentationkey&&Object.keys(i).length>0?null:t;this.instrumentationKey=i.instrumentationkey||s||o.instrumentationkey||e._getInstrumentationKey(),!e._validateInstrumentationKey(this.instrumentationKey),this.endpointUrl=(i.ingestionendpoint||o.ingestionendpoint||this.endpointBase)+"/v2.1/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=30*1e3,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.setCorrelationId=function(a){return r.correlationId=a},this.proxyHttpUrl=process.env[e.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[e.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this.profileQueryEndpoint=i.ingestionendpoint||o.ingestionendpoint||process.env[e.ENV_profileQueryEndpoint]||this.endpointBase,this._quickPulseHost=i.liveendpoint||o.liveendpoint||process.env[e.ENV_quickPulseHost]||SB.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=new rie.URL(this._quickPulseHost).host)}return Object.defineProperty(e.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(t){db.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=t,this.correlationId=db.correlationIdPrefix,db.queryCorrelationId(this,this.setCorrelationId)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(t){this._quickPulseHost=t},enumerable:!1,configurable:!0}),e._getInstrumentationKey=function(){var t=process.env[e.ENV_iKey]||process.env[e.ENV_azurePrefix+e.ENV_iKey]||process.env[e.legacy_ENV_iKey]||process.env[e.ENV_azurePrefix+e.legacy_ENV_iKey];if(!t||t=="")throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return t},e._validateInstrumentationKey=function(t){var r="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",n=new RegExp(r);return n.test(t)},e.ENV_azurePrefix="APPSETTING_",e.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",e.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",e.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",e.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",e.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",e.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",e.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",e.ENV_http_proxy="http_proxy",e.ENV_https_proxy="https_proxy",e}();bB.exports=nie});var TB=g(fu=>{"use strict";var cg=fu&&fu.__assign||function(){return cg=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},cg.apply(this,arguments)};Object.defineProperty(fu,"__esModule",{value:!0});fu.AutoCollectNativePerformance=void 0;var xB=ag(),Df=lu(),iie=Tt(),oie=function(){function e(t){this._disabledMetrics={},e.INSTANCE&&e.INSTANCE.dispose(),e.INSTANCE=this,this._client=t}return e.isNodeVersionCompatible=function(){var t=process.versions.node.split(".");return parseInt(t[0])>=6},e.prototype.enable=function(t,r,n){var i=this;if(r===void 0&&(r={}),n===void 0&&(n=6e4),!!e.isNodeVersionCompatible()){if(e._metricsAvailable==null&&t&&!this._isInitialized)try{var o=require("applicationinsights-native-metrics");e._emitter=new o,e._metricsAvailable=!0,iie.info("Native metrics module successfully loaded!")}catch(s){e._metricsAvailable=!1;return}this._isEnabled=t,this._disabledMetrics=r,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&e._emitter?(e._emitter.enable(!0,n),this._handle||(this._handle=setInterval(function(){return i._trackNativeMetrics()},n),this._handle.unref())):e._emitter&&(e._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))}},e.prototype.dispose=function(){this.enable(!1)},e.parseEnabled=function(t){var r=process.env[xB.ENV_nativeMetricsDisableAll],n=process.env[xB.ENV_nativeMetricsDisablers];if(r)return{isEnabled:!1,disabledMetrics:{}};if(n){var i=n.split(","),o={};if(i.length>0)for(var s=0,a=i;s<a.length;s++){var c=a[s];o[c]=!0}return typeof t=="object"?{isEnabled:!0,disabledMetrics:cg(cg({},t),o)}:{isEnabled:t,disabledMetrics:o}}return typeof t=="boolean"?{isEnabled:t,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:t}},e.prototype._trackNativeMetrics=function(){var t=!0;typeof this._isEnabled!="object"&&(t=this._isEnabled),t&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},e.prototype._trackGarbageCollection=function(){var t;if(!this._disabledMetrics.gc){var r=e._emitter.getGCData();for(var n in r){var i=r[n].metrics,o=n+" Garbage Collection Duration",s=Math.sqrt(i.sumSquares/i.count-Math.pow(i.total/i.count,2))||0;this._client.trackMetric({name:o,value:i.total,count:i.count,max:i.max,min:i.min,stdDev:s,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+Df.sdkVersion,t)})}}},e.prototype._trackEventLoop=function(){var t;if(!this._disabledMetrics.loop){var r=e._emitter.getLoopData(),n=r.loopUsage;if(n.count!=0){var i="Event Loop CPU Time",o=Math.sqrt(n.sumSquares/n.count-Math.pow(n.total/n.count,2))||0;this._client.trackMetric({name:i,value:n.total,count:n.count,min:n.min,max:n.max,stdDev:o,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+Df.sdkVersion,t)})}}},e.prototype._trackHeapUsage=function(){var t,r,n;if(!this._disabledMetrics.heap){var i=process.memoryUsage(),o=i.heapUsed,s=i.heapTotal,a=i.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:o,count:1,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+Df.sdkVersion,t)}),this._client.trackMetric({name:"Memory Total (Heap)",value:s,count:1,tagOverrides:(r={},r[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+Df.sdkVersion,r)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:a-s,count:1,tagOverrides:(n={},n[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+Df.sdkVersion,n)})}},e}();fu.AutoCollectNativePerformance=oie});var IB=g((Zbe,AB)=>{"use strict";var sie=Tt(),aie=function(){function e(t,r,n,i){this._buffer=[],this._lastSend=0,this._isDisabled=t,this._getBatchSize=r,this._getBatchIntervalMs=n,this._sender=i}return e.prototype.setUseDiskRetryCaching=function(t,r,n){this._sender.setDiskRetryMode(t,r,n)},e.prototype.send=function(t){var r=this;if(!this._isDisabled()){if(!t){sie.warn("Cannot send null/undefined telemetry");return}if(this._buffer.push(t),this._buffer.length>=this._getBatchSize()){this.triggerSend(!1);return}!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){r._timeoutHandle=null,r.triggerSend(!1)},this._getBatchIntervalMs()))}},e.prototype.triggerSend=function(t,r){var n=this._buffer.length<1;n||(t?(this._sender.saveOnCrash(this._buffer),typeof r=="function"&&r("data saved on crash")):this._sender.send(this._buffer,r)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,n&&typeof r=="function"&&r("no data to send")},e}();AB.exports=aie});var RB=g(ug=>{"use strict";Object.defineProperty(ug,"__esModule",{value:!0});ug.azureRoleEnvironmentTelemetryProcessor=void 0;function cie(e,t){process.env.WEBSITE_SITE_NAME&&(e.tags[t.keys.cloudRole]=process.env.WEBSITE_SITE_NAME),process.env.WEBSITE_INSTANCE_ID&&(e.tags[t.keys.cloudRoleInstance]=process.env.WEBSITE_INSTANCE_ID)}ug.azureRoleEnvironmentTelemetryProcessor=cie});var DB=g(du=>{"use strict";Object.defineProperty(du,"__esModule",{value:!0});du.getSamplingHashCode=du.samplingTelemetryProcessor=void 0;var PB=Zt();function uie(e,t){var r=e.sampleRate,n=!1;return r==null||r>=100||e.data&&PB.TelemetryType.Metric===PB.baseTypeToTelemetryType(e.data.baseType)?!0:(t.correlationContext&&t.correlationContext.operation?n=OB(t.correlationContext.operation.id)<r:n=Math.random()*100<r,n)}du.samplingTelemetryProcessor=uie;function OB(e){var t=-2147483648,r=2147483647,n=5381;if(!e)return 0;for(;e.length<8;)e=e+e;for(var i=0;i<e.length;i++)n=((n<<5)+n|0)+e.charCodeAt(i)|0;return n=n<=t?r:Math.abs(n),n/r*100}du.getSamplingHashCode=OB});var NB=g(lg=>{"use strict";Object.defineProperty(lg,"__esModule",{value:!0});lg.performanceMetricsTelemetryProcessor=void 0;var pb=Jm(),hb=Zt();function lie(e,t){switch(t&&t.addDocument(e),e.data.baseType){case hb.TelemetryTypeString.Exception:pb.countException();break;case hb.TelemetryTypeString.Request:var r=e.data.baseData;pb.countRequest(r.duration,r.success);break;case hb.TelemetryTypeString.Dependency:var n=e.data.baseData;pb.countDependency(n.duration,n.success);break}return!0}lg.performanceMetricsTelemetryProcessor=lie});var LB=g(pu=>{"use strict";var ei=pu&&pu.__assign||function(){return ei=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ei.apply(this,arguments)};Object.defineProperty(pu,"__esModule",{value:!0});pu.preAggregatedMetricsTelemetryProcessor=void 0;var fie=Zt(),Nf=QS(),fg=Zt();function die(e,t){if(Nf.isEnabled())switch(e.data.baseType){case fg.TelemetryTypeString.Exception:var r=e.data.baseData;r.properties=ei(ei({},r.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var n={cloudRoleInstance:e.tags[t.keys.cloudRoleInstance],cloudRoleName:e.tags[t.keys.cloudRole]};Nf.countException(n);break;case fg.TelemetryTypeString.Trace:var i=e.data.baseData;i.properties=ei(ei({},i.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var o={cloudRoleInstance:e.tags[t.keys.cloudRoleInstance],cloudRoleName:e.tags[t.keys.cloudRole],traceSeverityLevel:fie.SeverityLevel[i.severity]};Nf.countTrace(o);break;case fg.TelemetryTypeString.Request:var s=e.data.baseData;s.properties=ei(ei({},s.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var a={cloudRoleInstance:e.tags[t.keys.cloudRoleInstance],cloudRoleName:e.tags[t.keys.cloudRole],operationSynthetic:e.tags[t.keys.operationSyntheticSource],requestSuccess:s.success,requestResultCode:s.responseCode};Nf.countRequest(s.duration,a);break;case fg.TelemetryTypeString.Dependency:var c=e.data.baseData;c.properties=ei(ei({},c.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var u={cloudRoleInstance:e.tags[t.keys.cloudRoleInstance],cloudRoleName:e.tags[t.keys.cloudRole],operationSynthetic:e.tags[t.keys.operationSyntheticSource],dependencySuccess:c.success,dependencyType:c.type,dependencyTarget:c.target,dependencyResultCode:c.resultCode};Nf.countDependency(c.duration,u);break}return!0}pu.preAggregatedMetricsTelemetryProcessor=die});var kB=g(ti=>{"use strict";var pie=ti&&ti.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),dg=ti&&ti.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&pie(t,e,r)};Object.defineProperty(ti,"__esModule",{value:!0});dg(RB(),ti);dg(DB(),ti);dg(NB(),ti);dg(LB(),ti)});var mb=g((o0e,MB)=>{"use strict";var fe=Zt(),_n=Hr(),hie=Ns(),mie=function(){function e(){}return e.createEnvelope=function(t,r,n,i,o){var s=null;switch(r){case fe.TelemetryType.Trace:s=e.createTraceData(t);break;case fe.TelemetryType.Dependency:s=e.createDependencyData(t);break;case fe.TelemetryType.Event:s=e.createEventData(t);break;case fe.TelemetryType.Exception:s=e.createExceptionData(t);break;case fe.TelemetryType.Request:s=e.createRequestData(t);break;case fe.TelemetryType.Metric:s=e.createMetricData(t);break;case fe.TelemetryType.Availability:s=e.createAvailabilityData(t);break;case fe.TelemetryType.PageView:s=e.createPageViewData(t);break}if(n&&fe.domainSupportsProperties(s.baseData)){if(s&&s.baseData)if(!s.baseData.properties)s.baseData.properties=n;else for(var a in n)s.baseData.properties[a]||(s.baseData.properties[a]=n[a]);s.baseData.properties=_n.validateStringMap(s.baseData.properties)}var c=o&&o.instrumentationKey||"",u=new fe.Envelope;return u.data=s,u.iKey=c,u.name="Microsoft.ApplicationInsights."+c.replace(/-/g,"")+"."+s.baseType.substr(0,s.baseType.length-4),u.tags=this.getTags(i,t.tagOverrides),u.time=new Date().toISOString(),u.ver=1,u.sampleRate=o?o.samplingPercentage:100,r===fe.TelemetryType.Metric&&(u.sampleRate=100),u},e.createTraceData=function(t){var r=new fe.MessageData;r.message=t.message,r.properties=t.properties,isNaN(t.severity)?r.severityLevel=fe.SeverityLevel.Information:r.severityLevel=t.severity;var n=new fe.Data;return n.baseType=fe.telemetryTypeToBaseType(fe.TelemetryType.Trace),n.baseData=r,n},e.createDependencyData=function(t){var r=new fe.RemoteDependencyData;typeof t.name=="string"&&(r.name=t.name.length>1024?t.name.slice(0,1021)+"...":t.name),r.data=t.data,r.target=t.target,r.duration=_n.msToTimeSpan(t.duration),r.success=t.success,r.type=t.dependencyTypeName,r.properties=t.properties,r.resultCode=t.resultCode?t.resultCode+"":"",t.id?r.id=t.id:r.id=_n.w3cTraceId();var n=new fe.Data;return n.baseType=fe.telemetryTypeToBaseType(fe.TelemetryType.Dependency),n.baseData=r,n},e.createEventData=function(t){var r=new fe.EventData;r.name=t.name,r.properties=t.properties,r.measurements=t.measurements;var n=new fe.Data;return n.baseType=fe.telemetryTypeToBaseType(fe.TelemetryType.Event),n.baseData=r,n},e.createExceptionData=function(t){var r=new fe.ExceptionData;r.properties=t.properties,isNaN(t.severity)?r.severityLevel=fe.SeverityLevel.Error:r.severityLevel=t.severity,r.measurements=t.measurements,r.exceptions=[];var n=t.exception.stack,i=new fe.ExceptionDetails;i.message=t.exception.message,i.typeName=t.exception.name,i.parsedStack=this.parseStack(n),i.hasFullStack=_n.isArray(i.parsedStack)&&i.parsedStack.length>0,r.exceptions.push(i);var o=new fe.Data;return o.baseType=fe.telemetryTypeToBaseType(fe.TelemetryType.Exception),o.baseData=r,o},e.createRequestData=function(t){var r=new fe.RequestData;t.id?r.id=t.id:r.id=_n.w3cTraceId(),r.name=t.name,r.url=t.url,r.source=t.source,r.duration=_n.msToTimeSpan(t.duration),r.responseCode=t.resultCode?t.resultCode+"":"",r.success=t.success,r.properties=t.properties,r.measurements=t.measurements;var n=new fe.Data;return n.baseType=fe.telemetryTypeToBaseType(fe.TelemetryType.Request),n.baseData=r,n},e.createMetricData=function(t){var r=new fe.MetricData;r.metrics=[];var n=new fe.DataPoint;n.count=isNaN(t.count)?1:t.count,n.kind=fe.DataPointType.Aggregation,n.max=isNaN(t.max)?t.value:t.max,n.min=isNaN(t.min)?t.value:t.min,n.name=t.name,n.stdDev=isNaN(t.stdDev)?0:t.stdDev,n.value=t.value,r.metrics.push(n),r.properties=t.properties;var i=new fe.Data;return i.baseType=fe.telemetryTypeToBaseType(fe.TelemetryType.Metric),i.baseData=r,i},e.createAvailabilityData=function(t){var r=new fe.AvailabilityData;t.id?r.id=t.id:r.id=_n.w3cTraceId(),r.name=t.name,r.duration=_n.msToTimeSpan(t.duration),r.success=t.success,r.runLocation=t.runLocation,r.message=t.message,r.measurements=t.measurements,r.properties=t.properties;var n=new fe.Data;return n.baseType=fe.telemetryTypeToBaseType(fe.TelemetryType.Availability),n.baseData=r,n},e.createPageViewData=function(t){var r=new fe.PageViewData;r.name=t.name,r.duration=_n.msToTimeSpan(t.duration),r.url=t.url,r.measurements=t.measurements,r.properties=t.properties;var n=new fe.Data;return n.baseType=fe.telemetryTypeToBaseType(fe.TelemetryType.PageView),n.baseData=r,n},e.getTags=function(t,r){var n=hie.CorrelationContextManager.getCurrentContext(),i={};if(t&&t.tags)for(var o in t.tags)i[o]=t.tags[o];if(r)for(var o in r)i[o]=r[o];return n&&(i[t.keys.operationId]=i[t.keys.operationId]||n.operation.id,i[t.keys.operationName]=i[t.keys.operationName]||n.operation.name,i[t.keys.operationParentId]=i[t.keys.operationParentId]||n.operation.parentId),i},e.parseStack=function(t){var r=void 0;if(typeof t=="string"){var n=t.split(`
`);r=[];for(var i=0,o=0,s=0;s<=n.length;s++){var a=n[s];if(FB.regex.test(a)){var c=new FB(n[s],i++);o+=c.sizeInBytes,r.push(c)}}var u=32*1024;if(o>u)for(var l=0,f=r.length-1,d=0,p=l,h=f;l<f;){var m=r[l].sizeInBytes,v=r[f].sizeInBytes;if(d+=m+v,d>u){var _=h-p+1;r.splice(p,_);break}p=l,h=f,l++,f--}}return r},e}(),FB=function(){function e(t,r){this.sizeInBytes=0,this.level=r,this.method="<no_method>",this.assembly=_n.trim(t);var n=t.match(e.regex);n&&n.length>=5&&(this.method=_n.trim(n[2])||this.method,this.fileName=_n.trim(n[4])||"<no_filename>",this.line=parseInt(n[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=e.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return e.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,e.baseSize=58,e}();MB.exports=mie});var gb=g((Lf,$B)=>{"use strict";var gie=Lf&&Lf.__awaiter||function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(f){s(f)}}function c(l){try{u(n.throw(l))}catch(f){s(f)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(e,t||[])).next())})},vie=Lf&&Lf.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Mt=require("fs"),qB=require("os"),Fi=require("path"),yie=require("zlib"),hu=require("child_process"),qt=Tt(),aa=Rt(),Eie=uu(),pg=Hr(),_ie=require("url"),Cie=function(){function e(t,r,n,i){if(this._redirectedHost=null,this._config=t,this._onSuccess=r,this._onError=n,this._statsbeat=i,this._enableDiskRetryMode=!1,this._resendInterval=e.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=e.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._fileCleanupTimer=null,this._tempDir=Fi.join(qB.tmpdir(),e.TEMPDIR_PREFIX+this._config.instrumentationKey),!e.OS_PROVIDES_FILE_PROTECTION)if(e.USE_ICACLS){try{e.OS_PROVIDES_FILE_PROTECTION=Mt.existsSync(e.ICACLS_PATH)}catch(o){}e.OS_PROVIDES_FILE_PROTECTION||qt.warn(e.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else e.OS_PROVIDES_FILE_PROTECTION=!0}return e.prototype.setDiskRetryMode=function(t,r,n){var i=this;this._enableDiskRetryMode=e.OS_PROVIDES_FILE_PROTECTION&&t,typeof r=="number"&&r>=0&&(this._resendInterval=Math.floor(r)),typeof n=="number"&&n>=0&&(this._maxBytesOnDisk=Math.floor(n)),t&&!e.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,qt.warn(e.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?(this._statsbeat&&this._statsbeat.addFeature(aa.StatsbeatFeature.DISK_RETRY),this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout(function(){i._fileCleanupTask()},e.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref())):(this._statsbeat&&this._statsbeat.removeFeature(aa.StatsbeatFeature.DISK_RETRY),this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer))},e.prototype.send=function(t,r){return gie(this,void 0,void 0,function(){var n,i,o,s,a,c=this;return vie(this,function(u){return t&&(n=this._redirectedHost||this._config.endpointUrl,i=new _ie.URL(n).hostname,o={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},s="",t.forEach(function(l){var f=c._stringify(l);typeof f=="string"&&(s+=f+`
`)}),s.length>0&&(s=s.substring(0,s.length-1)),a=Buffer.from?Buffer.from(s):new Buffer(s),yie.gzip(a,function(l,f){var d=f;l?(qt.warn(l),d=a,o.headers["Content-Length"]=a.length.toString()):(o.headers["Content-Encoding"]="gzip",o.headers["Content-Length"]=f.length.toString()),qt.info(e.TAG,o),o[Eie.disableCollectionRequestOption]=!0;var p=+new Date,h=function(v){v.setEncoding("utf-8");var _="";v.on("data",function(E){_+=E}),v.on("end",function(){var E=+new Date,w=E-p;if(c._numConsecutiveFailures=0,c._enableDiskRetryMode){if(v.statusCode===200)c._resendTimer||(c._resendTimer=setTimeout(function(){c._resendTimer=null,c._sendFirstFileOnDisk()},c._resendInterval),c._resendTimer.unref());else if(c._isRetriable(v.statusCode))try{c._statsbeat&&(c._statsbeat.countRetry(aa.StatsbeatNetworkCategory.Breeze,i),v.statusCode===429&&c._statsbeat.countThrottle(aa.StatsbeatNetworkCategory.Breeze,i));var T=JSON.parse(_),N=[];T.errors.forEach(function(z){c._isRetriable(z.statusCode)&&N.push(t[z.index])}),N.length>0&&c._storeToDisk(N)}catch(z){c._storeToDisk(t)}}if(v.statusCode===307||v.statusCode===308)if(c._numConsecutiveRedirects++,c._numConsecutiveRedirects<10){var P=v.headers.location?v.headers.location.toString():null;P&&(c._redirectedHost=P,c.send(t,r))}else c._statsbeat&&c._statsbeat.countException(aa.StatsbeatNetworkCategory.Breeze,i),typeof r=="function"&&r("Error sending telemetry because of circular redirects.");else c._statsbeat&&c._statsbeat.countRequest(aa.StatsbeatNetworkCategory.Breeze,i,w,v.statusCode===200),c._numConsecutiveRedirects=0,typeof r=="function"&&r(_),qt.info(e.TAG,_),typeof c._onSuccess=="function"&&c._onSuccess(_)})},m=pg.makeRequest(c._config,n,o,h);m.on("error",function(v){if(c._numConsecutiveFailures++,c._statsbeat&&c._statsbeat.countException(aa.StatsbeatNetworkCategory.Breeze,i),!c._enableDiskRetryMode||c._numConsecutiveFailures>0&&c._numConsecutiveFailures%e.MAX_CONNECTION_FAILURES_BEFORE_WARN==0){var _="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";c._enableDiskRetryMode&&(_="Ingestion endpoint could not be reached "+c._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),qt.warn(e.TAG,_,pg.dumpObj(v))}else{var _="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";qt.info(e.TAG,_,pg.dumpObj(v))}c._onErrorHelper(v),typeof r=="function"&&r(v?pg.dumpObj(v):"Error sending telemetry"),c._enableDiskRetryMode&&c._storeToDisk(t)}),m.write(d),m.end()})),[2]})})},e.prototype.saveOnCrash=function(t){this._enableDiskRetryMode&&this._storeToDiskSync(this._stringify(t))},e.prototype._isRetriable=function(t){return t===206||t===408||t===429||t===439||t===500||t===503},e.prototype._runICACLS=function(t,r){var n=hu.spawn(e.ICACLS_PATH,t,{windowsHide:!0});n.on("error",function(i){return r(i)}),n.on("close",function(i,o){return r(i===0?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+i+")"))})},e.prototype._runICACLSSync=function(t){if(hu.spawnSync){var r=hu.spawnSync(e.ICACLS_PATH,t,{windowsHide:!0});if(r.error)throw r.error;if(r.status!==0)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+r.status+")")}else throw new Error("Could not synchronously call ICACLS under current version of Node.js")},e.prototype._getACLIdentity=function(t){if(e.ACL_IDENTITY)return t(null,e.ACL_IDENTITY);var r=hu.spawn(e.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),n="";r.stdout.on("data",function(i){return n+=i}),r.on("error",function(i){return t(i,null)}),r.on("close",function(i,o){return e.ACL_IDENTITY=n&&n.trim(),t(i===0?null:new Error("Getting ACL identity did not succeed (PS returned code "+i+")"),e.ACL_IDENTITY)})},e.prototype._getACLIdentitySync=function(){if(e.ACL_IDENTITY)return e.ACL_IDENTITY;if(hu.spawnSync){var t=hu.spawnSync(e.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(t.error)throw t.error;if(t.status!==0)throw new Error("Getting ACL identity did not succeed (PS returned code "+t.status+")");return e.ACL_IDENTITY=t.stdout&&t.stdout.toString().trim(),e.ACL_IDENTITY}else throw new Error("Could not synchronously get ACL identity under current version of Node.js")},e.prototype._getACLArguments=function(t,r){return[t,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",r+":(OI)(CI)F","/inheritance:r"]},e.prototype._applyACLRules=function(t,r){var n=this;if(!e.USE_ICACLS)return r(null);if(e.ACLED_DIRECTORIES[t]===void 0)e.ACLED_DIRECTORIES[t]=!1,this._getACLIdentity(function(i,o){if(i)return e.ACLED_DIRECTORIES[t]=!1,r(i);n._runICACLS(n._getACLArguments(t,o),function(s){return e.ACLED_DIRECTORIES[t]=!s,r(s)})});else return r(e.ACLED_DIRECTORIES[t]?null:new Error("Setting ACL restrictions did not succeed (cached result)"))},e.prototype._applyACLRulesSync=function(t){if(e.USE_ICACLS){if(e.ACLED_DIRECTORIES[t]===void 0){this._runICACLSSync(this._getACLArguments(t,this._getACLIdentitySync())),e.ACLED_DIRECTORIES[t]=!0;return}else if(!e.ACLED_DIRECTORIES[t])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},e.prototype._confirmDirExists=function(t,r){var n=this;Mt.lstat(t,function(i,o){i&&i.code==="ENOENT"?Mt.mkdir(t,function(s){s&&s.code!=="EEXIST"?r(s):n._applyACLRules(t,r)}):!i&&o.isDirectory()?n._applyACLRules(t,r):r(i||new Error("Path existed but was not a directory"))})},e.prototype._getShallowDirectorySize=function(t,r){Mt.readdir(t,function(n,i){if(n)return r(n,-1);var o=null,s=0,a=0;if(i.length===0){r(null,0);return}for(var c=0;c<i.length;c++)Mt.stat(Fi.join(t,i[c]),function(u,l){a++,u?o=u:l.isFile()&&(s+=l.size),a===i.length&&(o?r(o,-1):r(o,s))})})},e.prototype._getShallowDirectorySizeSync=function(t){for(var r=Mt.readdirSync(t),n=0,i=0;i<r.length;i++)n+=Mt.statSync(Fi.join(t,r[i])).size;return n},e.prototype._storeToDisk=function(t){var r=this;qt.info(e.TAG,"Checking existence of data storage directory: "+this._tempDir),this._confirmDirExists(this._tempDir,function(n){if(n){qt.warn(e.TAG,"Error while checking/creating directory: "+(n&&n.message)),r._onErrorHelper(n);return}r._getShallowDirectorySize(r._tempDir,function(i,o){if(i||o<0){qt.warn(e.TAG,"Error while checking directory size: "+(i&&i.message)),r._onErrorHelper(i);return}else if(o>r._maxBytesOnDisk){qt.warn(e.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+o);return}var s=new Date().getTime()+".ai.json",a=Fi.join(r._tempDir,s);qt.info(e.TAG,"saving data to disk at: "+a),Mt.writeFile(a,r._stringify(t),{mode:384},function(c){return r._onErrorHelper(c)})})})},e.prototype._storeToDiskSync=function(t){try{qt.info(e.TAG,"Checking existence of data storage directory: "+this._tempDir),Mt.existsSync(this._tempDir)||Mt.mkdirSync(this._tempDir),this._applyACLRulesSync(this._tempDir);var r=this._getShallowDirectorySizeSync(this._tempDir);if(r>this._maxBytesOnDisk){qt.info(e.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+r);return}var n=new Date().getTime()+".ai.json",i=Fi.join(this._tempDir,n);qt.info(e.TAG,"saving data before crash to disk at: "+i),Mt.writeFileSync(i,t,{mode:384})}catch(o){qt.warn(e.TAG,"Error while saving data to disk: "+(o&&o.message)),this._onErrorHelper(o)}},e.prototype._sendFirstFileOnDisk=function(){var t=this;Mt.exists(this._tempDir,function(r){r&&Mt.readdir(t._tempDir,function(n,i){if(n)t._onErrorHelper(n);else if(i=i.filter(function(a){return Fi.basename(a).indexOf(".ai.json")>-1}),i.length>0){var o=i[0],s=Fi.join(t._tempDir,o);Mt.readFile(s,function(a,c){a?t._onErrorHelper(a):Mt.unlink(s,function(u){if(u)t._onErrorHelper(u);else try{var l=JSON.parse(c.toString());t.send(l)}catch(f){qt.warn("Failed to read persisted file",f)}})})}})})},e.prototype._onErrorHelper=function(t){typeof this._onError=="function"&&this._onError(t)},e.prototype._stringify=function(t){try{return JSON.stringify(t)}catch(r){qt.warn("Failed to serialize payload",r,t)}},e.prototype._fileCleanupTask=function(){var t=this;Mt.exists(this._tempDir,function(r){r&&Mt.readdir(t._tempDir,function(n,i){n?t._onErrorHelper(n):(i=i.filter(function(o){return Fi.basename(o).indexOf(".ai.json")>-1}),i.length>0&&i.forEach(function(o){var s=new Date(parseInt(o.split(".ai.json")[0])),a=new Date(+new Date-e.FILE_RETEMPTION_PERIOD)>s;if(a){var c=Fi.join(t._tempDir,o);Mt.unlink(c,function(u){u&&t._onErrorHelper(u)})}}))})})},e.TAG="Sender",e.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",e.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",e.ACLED_DIRECTORIES={},e.ACL_IDENTITY=null,e.WAIT_BETWEEN_RESEND=60*1e3,e.MAX_BYTES_ON_DISK=50*1024*1024,e.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,e.CLEANUP_TIMEOUT=60*60*1e3,e.FILE_RETEMPTION_PERIOD=7*24*60*60*1e3,e.TEMPDIR_PREFIX="appInsights-node",e.OS_PROVIDES_FILE_PROTECTION=!1,e.USE_ICACLS=qB.type()==="Windows_NT",e}();$B.exports=Cie});var jB=g(hg=>{"use strict";Object.defineProperty(hg,"__esModule",{value:!0});hg.NetworkStatsbeat=void 0;var wie=function(){function e(t,r){this.endpoint=t,this.host=r,this.totalRequestCount=0,this.totalSuccesfulRequestCount=0,this.totalFailedRequestCount=0,this.retryCount=0,this.exceptionCount=0,this.throttleCount=0,this.intervalRequestExecutionTime=0,this.lastIntervalRequestExecutionTime=0,this.lastTime=+new Date,this.lastRequestCount=0}return e}();hg.NetworkStatsbeat=wie});var HB=g((Mf,UB)=>{"use strict";var kf=Mf&&Mf.__awaiter||function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(f){s(f)}}function c(l){try{u(n.throw(l))}catch(f){s(f)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(e,t||[])).next())})},Ff=Mf&&Mf.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Sie=require("os"),bie=mb(),vb=Tt(),xie=gb(),pt=Rt(),Tie=Zt(),Aie=ob(),Iie=ag(),Rie=lu(),Pie=jB(),Oie="node",Die=function(){function e(t){this._attach=pt.StatsbeatAttach.sdk,this._feature=pt.StatsbeatFeature.NONE,this._instrumentation=pt.StatsbeatInstrumentation.NONE,this._isInitialized=!1,this._statbeatMetrics=[],this._networkStatsbeatCollection=[],this._config=t,this._statsbeatConfig=new Iie(e.CONNECTION_STRING),this._sender=new xie(this._statsbeatConfig)}return e.prototype.enable=function(t){var r=this;this._isEnabled=t,this._isEnabled&&!this._isInitialized&&(this._getCustomProperties(),this._isInitialized=!0),t?(this._handle||(this._handle=setInterval(function(){r.trackShortIntervalStatsbeats().catch(function(n){vb.info(e.TAG,n)})},e.STATS_COLLECTION_SHORT_INTERVAL),this._handle.unref()),this._longHandle||(this.trackLongIntervalStatsbeats().catch(function(n){vb.info(e.TAG,n)}),this._longHandle=setInterval(function(){r.trackLongIntervalStatsbeats().catch(function(n){vb.info(e.TAG,n)})},e.STATS_COLLECTION_LONG_INTERVAL),this._longHandle.unref())):(this._handle&&(clearInterval(this._handle),this._handle=null),this._longHandle&&(clearInterval(this._longHandle),this._longHandle=null))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.isEnabled=function(){return this._isEnabled},e.prototype.setCodelessAttach=function(){this._attach=pt.StatsbeatAttach.codeless},e.prototype.addFeature=function(t){this._feature|=t},e.prototype.removeFeature=function(t){this._feature&=~t},e.prototype.addInstrumentation=function(t){this._instrumentation|=t},e.prototype.removeInstrumentation=function(t){this._instrumentation&=~t},e.prototype.countRequest=function(t,r,n,i){if(!!this.isEnabled()){var o=this._getNetworkStatsbeatCounter(t,r);o.totalRequestCount++,o.intervalRequestExecutionTime+=n,i===!1?o.totalFailedRequestCount++:o.totalSuccesfulRequestCount++}},e.prototype.countException=function(t,r){if(!!this.isEnabled()){var n=this._getNetworkStatsbeatCounter(t,r);n.exceptionCount++}},e.prototype.countThrottle=function(t,r){if(!!this.isEnabled()){var n=this._getNetworkStatsbeatCounter(t,r);n.throttleCount++}},e.prototype.countRetry=function(t,r){if(!!this.isEnabled()){var n=this._getNetworkStatsbeatCounter(t,r);n.retryCount++}},e.prototype.trackShortIntervalStatsbeats=function(){return kf(this,void 0,void 0,function(){var t=this;return Ff(this,function(r){return this._getResourceProvider(function(){return kf(t,void 0,void 0,function(){var n;return Ff(this,function(i){switch(i.label){case 0:return n={os:this._os,rp:this._resourceProvider,cikey:this._cikey,runtimeVersion:this._runtimeVersion,language:this._language,version:this._sdkVersion,attach:this._attach},this._trackRequestDuration(n),this._trackRequestsCount(n),[4,this._sendStatsbeats()];case 1:return i.sent(),[2]}})})}),[2]})})},e.prototype.trackLongIntervalStatsbeats=function(){return kf(this,void 0,void 0,function(){var t=this;return Ff(this,function(r){return this._getResourceProvider(function(){return kf(t,void 0,void 0,function(){var n,i,o,s;return Ff(this,function(a){switch(a.label){case 0:return n={os:this._os,rp:this._resourceProvider,cikey:this._cikey,runtimeVersion:this._runtimeVersion,language:this._language,version:this._sdkVersion,attach:this._attach},i=Object.assign({rpId:this._resourceIdentifier},n),this._statbeatMetrics.push({name:pt.StatsbeatCounter.ATTACH,value:1,properties:i}),o=Object.assign({feature:this._feature,type:pt.StatsbeatFeatureType.Feature},n),s=Object.assign({feature:this._instrumentation,type:pt.StatsbeatFeatureType.Instrumentation},n),this._statbeatMetrics.push({name:pt.StatsbeatCounter.FEATURE,value:1,properties:s}),this._statbeatMetrics.push({name:pt.StatsbeatCounter.FEATURE,value:1,properties:o}),[4,this._sendStatsbeats()];case 1:return a.sent(),[2]}})})}),[2]})})},e.prototype._getNetworkStatsbeatCounter=function(t,r){for(var n=0;n<this._networkStatsbeatCollection.length;n++)if(t===this._networkStatsbeatCollection[n].endpoint&&r===this._networkStatsbeatCollection[n].host)return this._networkStatsbeatCollection[n];var i=new Pie.NetworkStatsbeat(t,r);return this._networkStatsbeatCollection.push(i),i},e.prototype._trackRequestDuration=function(t){for(var r=0;r<this._networkStatsbeatCollection.length;r++){var n=this._networkStatsbeatCollection[r];n.time=+new Date;var i=n.totalRequestCount-n.lastRequestCount||0,o=n.time-n.lastTime,s=(n.intervalRequestExecutionTime-n.lastIntervalRequestExecutionTime)/i||0;if(n.lastIntervalRequestExecutionTime=n.intervalRequestExecutionTime,o>0&&i>0){var a=Object.assign({endpoint:this._networkStatsbeatCollection[r].endpoint,host:this._networkStatsbeatCollection[r].host},t);this._statbeatMetrics.push({name:pt.StatsbeatCounter.REQUEST_DURATION,value:s,properties:a})}n.lastRequestCount=n.totalRequestCount,n.lastTime=n.time}},e.prototype._trackRequestsCount=function(t){for(var r=0;r<this._networkStatsbeatCollection.length;r++){var n=this._networkStatsbeatCollection[r],i=Object.assign({endpoint:n.endpoint,host:n.host},t);n.totalSuccesfulRequestCount>0&&(this._statbeatMetrics.push({name:pt.StatsbeatCounter.REQUEST_SUCCESS,value:n.totalSuccesfulRequestCount,properties:i}),n.totalSuccesfulRequestCount=0),n.totalFailedRequestCount>0&&(this._statbeatMetrics.push({name:pt.StatsbeatCounter.REQUEST_FAILURE,value:n.totalFailedRequestCount,properties:i}),n.totalFailedRequestCount=0),n.retryCount>0&&(this._statbeatMetrics.push({name:pt.StatsbeatCounter.RETRY_COUNT,value:n.retryCount,properties:i}),n.retryCount=0),n.throttleCount>0&&(this._statbeatMetrics.push({name:pt.StatsbeatCounter.THROTTLE_COUNT,value:n.throttleCount,properties:i}),n.throttleCount=0),n.exceptionCount>0&&(this._statbeatMetrics.push({name:pt.StatsbeatCounter.EXCEPTION_COUNT,value:n.exceptionCount,properties:i}),n.exceptionCount=0)}},e.prototype._sendStatsbeats=function(){return kf(this,void 0,void 0,function(){var t,r,n,i;return Ff(this,function(o){switch(o.label){case 0:for(t=[],r=0;r<this._statbeatMetrics.length;r++)n={name:this._statbeatMetrics[r].name,value:this._statbeatMetrics[r].value,properties:this._statbeatMetrics[r].properties},i=bie.createEnvelope(n,Tie.TelemetryType.Metric,null,null,this._statsbeatConfig),i.name=pt.StatsbeatTelemetryName,t.push(i);return this._statbeatMetrics=[],[4,this._sender.send(t)];case 1:return o.sent(),[2]}})})},e.prototype._getCustomProperties=function(){this._language=Oie,this._cikey=this._config.instrumentationKey,this._sdkVersion=Rie.sdkVersion,this._os=Sie.type(),this._runtimeVersion=process.version},e.prototype._getResourceProvider=function(t){var r=this,n=!1;this._resourceProvider=pt.StatsbeatResourceProvider.unknown,this._resourceIdentifier=pt.StatsbeatResourceProvider.unknown,process.env.WEBSITE_SITE_NAME?(this._resourceProvider=pt.StatsbeatResourceProvider.appsvc,this._resourceIdentifier=process.env.WEBSITE_SITE_NAME,process.env.WEBSITE_HOME_STAMPNAME&&(this._resourceIdentifier+="/"+process.env.WEBSITE_HOME_STAMPNAME)):process.env.FUNCTIONS_WORKER_RUNTIME?(this._resourceProvider=pt.StatsbeatResourceProvider.functions,process.env.WEBSITE_HOSTNAME&&(this._resourceIdentifier=process.env.WEBSITE_HOSTNAME)):this._config&&(this._isVM===void 0||this._isVM==!0?(n=!0,Aie.AzureVirtualMachine.getAzureComputeMetadata(this._config,function(i){r._isVM=i.isVM,r._isVM&&(r._resourceProvider=pt.StatsbeatResourceProvider.vm,r._resourceIdentifier=i.id+"/"+i.subscriptionId,i.osType&&(r._os=i.osType)),t()})):this._resourceProvider=pt.StatsbeatResourceProvider.unknown),n||t()},e.CONNECTION_STRING="InstrumentationKey=c4a29126-a7cb-47e5-b348-11414998b11e;IngestionEndpoint=https://dc.services.visualstudio.com/",e.STATS_COLLECTION_SHORT_INTERVAL=9e5,e.STATS_COLLECTION_LONG_INTERVAL=144e4,e.TAG="Statsbeat",e}();UB.exports=Die});var WB=g((a0e,GB)=>{"use strict";var Nie=require("url"),Lie=ag(),kie=lu(),Mi=Zt(),Fie=IB(),mg=kB(),BB=Ns(),Mie=HB(),qie=gb(),yb=Hr(),Eb=Tt(),$ie=mb(),jie=function(){function e(t){this._telemetryProcessors=[],this._enableAzureProperties=!1;var r=new Lie(t);this.config=r,this.context=new kie,this.commonProperties={},process.env.APPLICATION_INSIGHTS_NO_STATSBEAT||(this._statsbeat=new Mie(this.config),this._statsbeat.enable(!0));var n=new qie(this.config,null,null,this._statsbeat);this.channel=new Fie(function(){return r.disableAppInsights},function(){return r.maxBatchSize},function(){return r.maxBatchIntervalMs},n)}return e.prototype.trackAvailability=function(t){this.track(t,Mi.TelemetryType.Availability)},e.prototype.trackPageView=function(t){this.track(t,Mi.TelemetryType.PageView)},e.prototype.trackTrace=function(t){this.track(t,Mi.TelemetryType.Trace)},e.prototype.trackMetric=function(t){this.track(t,Mi.TelemetryType.Metric)},e.prototype.trackException=function(t){t&&t.exception&&!yb.isError(t.exception)&&(t.exception=new Error(t.exception.toString())),this.track(t,Mi.TelemetryType.Exception)},e.prototype.trackEvent=function(t){this.track(t,Mi.TelemetryType.Event)},e.prototype.trackRequest=function(t){this.track(t,Mi.TelemetryType.Request)},e.prototype.trackDependency=function(t){if(t&&!t.target&&t.data)try{t.target=new Nie.URL(t.data).host}catch(r){t.target=null,Eb.warn("The URL object is failed to create.",r)}this.track(t,Mi.TelemetryType.Dependency)},e.prototype.flush=function(t){this.channel.triggerSend(t?!!t.isAppCrashing:!1,t?t.callback:void 0)},e.prototype.track=function(t,r){if(t&&Mi.telemetryTypeToBaseType(r)){var n=$ie.createEnvelope(t,r,this.commonProperties,this.context,this.config);t.time&&(n.time=t.time.toISOString()),this._enableAzureProperties&&mg.azureRoleEnvironmentTelemetryProcessor(n,this.context);var i=this.runTelemetryProcessors(n,t.contextObjects);i=i&&mg.samplingTelemetryProcessor(n,{correlationContext:BB.CorrelationContextManager.getCurrentContext()}),mg.preAggregatedMetricsTelemetryProcessor(n,this.context),i&&(mg.performanceMetricsTelemetryProcessor(n,this.quickPulseClient),this.channel.send(n))}else Eb.warn("track() requires telemetry object and telemetryType to be specified.")},e.prototype.setAutoPopulateAzureProperties=function(t){this._enableAzureProperties=t},e.prototype.addTelemetryProcessor=function(t){this._telemetryProcessors.push(t)},e.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},e.prototype.runTelemetryProcessors=function(t,r){var n=!0,i=this._telemetryProcessors.length;if(i===0)return n;r=r||{},r.correlationContext=BB.CorrelationContextManager.getCurrentContext();for(var o=0;o<i;++o)try{var s=this._telemetryProcessors[o];if(s&&s.apply(null,[t,r])===!1){n=!1;break}}catch(a){n=!0,Eb.warn("One of telemetry processors failed, telemetry item will be sent.",a,t)}return n&&(t&&t.tags&&(t.tags=yb.validateStringMap(t.tags)),t&&t.data&&t.data.baseData&&t.data.baseData.properties&&(t.data.baseData.properties=yb.validateStringMap(t.data.baseData.properties))),n},e.prototype.getStatsbeat=function(){return this._statsbeat},e}();GB.exports=jie});var KB=g((_b,zB)=>{"use strict";var Uie=_b&&_b.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Hie=WB(),VB=ab(),Bie=uu(),gg=Tt(),Gie=function(e){Uie(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.trackNodeHttpRequestSync=function(r){r&&r.request&&r.response&&r.duration?VB.trackRequestSync(this,r):gg.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},t.prototype.trackNodeHttpRequest=function(r){(r.duration||r.error)&&gg.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),r&&r.request&&r.response?VB.trackRequest(this,r):gg.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},t.prototype.trackNodeHttpDependency=function(r){r&&r.request?Bie.trackRequest(this,r):gg.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},t}(Hie);zB.exports=Gie});var XB=g(YB=>{"use strict";Object.defineProperty(YB,"__esModule",{value:!0})});var v2=g(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});te.dispose=te.Configuration=te.wrapWithCorrelationContext=te.startOperation=te.getCorrelationContext=te.start=te.setup=te.liveMetricsClient=te.defaultClient=te.DistributedTracingModes=void 0;var Cb=Ns(),Wie=hH(),Vie=gH(),QB=Jm(),zie=QS(),Kie=JH(),Yie=uu(),Xie=ab(),JB=Ys(),qf=Tt(),Qie=yB(),ZB=TB();te.TelemetryClient=KB();te.Contracts=Zt();te.azureFunctionsTypes=XB();var e2;(function(e){e[e.AI=0]="AI",e[e.AI_AND_W3C=1]="AI_AND_W3C"})(e2=te.DistributedTracingModes||(te.DistributedTracingModes={}));var t2=!0,r2=!1,n2=!0,i2=!0,o2=!0,s2=!1,a2=!0,c2=!0,u2=!0,wb=!0,l2,vg=!1,f2=!0,d2,p2=void 0,h2=void 0,$f,jf,Uf,Hf,Bf,mu,ca,Gf,ri=!1,m2;function Jie(e){return te.defaultClient?qf.info("The default client is already setup"):(te.defaultClient=new te.TelemetryClient(e),$f=new Wie(te.defaultClient),jf=new Vie(te.defaultClient),Uf=new QB(te.defaultClient),Hf=new zie(te.defaultClient),Bf=new Kie(te.defaultClient),ca=new Xie(te.defaultClient),Gf=new Yie(te.defaultClient),mu||(mu=new ZB.AutoCollectNativePerformance(te.defaultClient))),te.defaultClient&&te.defaultClient.channel&&te.defaultClient.channel.setUseDiskRetryCaching(u2,p2,h2),Sb}te.setup=Jie;function g2(){return te.defaultClient?(ri=!0,$f.enable(t2,r2),jf.enable(n2),Uf.enable(i2),Hf.enable(o2),Bf.enable(s2,te.defaultClient.config),mu.enable(f2,d2),ca.useAutoCorrelation(wb,l2),ca.enable(a2),Gf.enable(c2),te.liveMetricsClient&&vg&&te.liveMetricsClient.enable(vg)):qf.warn("Start cannot be called before setup"),Sb}te.start=g2;function Zie(){return wb?Cb.CorrelationContextManager.getCurrentContext():null}te.getCorrelationContext=Zie;function eoe(e,t){return Cb.CorrelationContextManager.startOperation(e,t)}te.startOperation=eoe;function toe(e,t){return Cb.CorrelationContextManager.wrapCallback(e,t)}te.wrapWithCorrelationContext=toe;var Sb=function(){function e(){}return e.setDistributedTracingMode=function(t){return JB.w3cEnabled=t===e2.AI_AND_W3C,e},e.setAutoCollectConsole=function(t,r){return r===void 0&&(r=!1),t2=t,r2=r,ri&&$f.enable(t,r),e},e.setAutoCollectExceptions=function(t){return n2=t,ri&&jf.enable(t),e},e.setAutoCollectPerformance=function(t,r){r===void 0&&(r=!0),i2=t;var n=ZB.AutoCollectNativePerformance.parseEnabled(r);return f2=n.isEnabled,d2=n.disabledMetrics,ri&&(Uf.enable(t),mu.enable(n.isEnabled,n.disabledMetrics)),e},e.setAutoCollectPreAggregatedMetrics=function(t){return o2=t,ri&&Hf.enable(t),e},e.setAutoCollectHeartbeat=function(t){return s2=t,ri&&Bf.enable(t,te.defaultClient.config),e},e.setAutoCollectRequests=function(t){return a2=t,ri&&ca.enable(t),e},e.setAutoCollectDependencies=function(t){return c2=t,ri&&Gf.enable(t),e},e.setAutoDependencyCorrelation=function(t,r){return wb=t,l2=r,ri&&ca.useAutoCorrelation(t,r),e},e.setUseDiskRetryCaching=function(t,r,n){return u2=t,p2=r,h2=n,te.defaultClient&&te.defaultClient.channel&&te.defaultClient.channel.setUseDiskRetryCaching(t,r,n),e},e.setInternalLogging=function(t,r){return t===void 0&&(t=!1),r===void 0&&(r=!0),qf.enableDebug=t,qf.disableWarnings=!r,e},e.setSendLiveMetrics=function(t){return t===void 0&&(t=!1),te.defaultClient?(!te.liveMetricsClient&&t?(te.liveMetricsClient=new Qie(te.defaultClient.config,te.defaultClient.context),m2=new QB(te.liveMetricsClient,1e3,!0),te.liveMetricsClient.addCollector(m2),te.defaultClient.quickPulseClient=te.liveMetricsClient):te.liveMetricsClient&&te.liveMetricsClient.enable(t),vg=t,e):(qf.warn("Live metrics client cannot be setup without the default client"),e)},e.start=g2,e}();te.Configuration=Sb;function roe(){JB.w3cEnabled=!0,te.defaultClient=null,ri=!1,$f&&$f.dispose(),jf&&jf.dispose(),Uf&&Uf.dispose(),Hf&&Hf.dispose(),Bf&&Bf.dispose(),mu&&mu.dispose(),ca&&ca.dispose(),Gf&&Gf.dispose(),te.liveMetricsClient&&(te.liveMetricsClient.enable(!1),vg=!1,te.liveMetricsClient=void 0)}te.dispose=roe});ua(exports,{runHandler:()=>b2});var _g=M(require("crypto")),C2=M(require("fs"));"use strict";function Vf(e,t){t===void 0&&(t=!1);var r=e.length,n=0,i="",o=0,s=16,a=0,c=0,u=0,l=0,f=0;function d(w,T){for(var N=0,P=0;N<w||!T;){var z=e.charCodeAt(n);if(z>=48&&z<=57)P=P*16+z-48;else if(z>=65&&z<=70)P=P*16+z-65+10;else if(z>=97&&z<=102)P=P*16+z-97+10;else break;n++,N++}return N<w&&(P=-1),P}function p(w){n=w,i="",o=0,s=16,f=0}function h(){var w=n;if(e.charCodeAt(n)===48)n++;else for(n++;n<e.length&&la(e.charCodeAt(n));)n++;if(n<e.length&&e.charCodeAt(n)===46)if(n++,n<e.length&&la(e.charCodeAt(n)))for(n++;n<e.length&&la(e.charCodeAt(n));)n++;else return f=3,e.substring(w,n);var T=n;if(n<e.length&&(e.charCodeAt(n)===69||e.charCodeAt(n)===101))if(n++,(n<e.length&&e.charCodeAt(n)===43||e.charCodeAt(n)===45)&&n++,n<e.length&&la(e.charCodeAt(n))){for(n++;n<e.length&&la(e.charCodeAt(n));)n++;T=n}else f=3;return e.substring(w,T)}function m(){for(var w="",T=n;;){if(n>=r){w+=e.substring(T,n),f=2;break}var N=e.charCodeAt(n);if(N===34){w+=e.substring(T,n),n++;break}if(N===92){if(w+=e.substring(T,n),n++,n>=r){f=2;break}var P=e.charCodeAt(n++);switch(P){case 34:w+='"';break;case 92:w+="\\";break;case 47:w+="/";break;case 98:w+="\b";break;case 102:w+="\f";break;case 110:w+=`
`;break;case 114:w+="\r";break;case 116:w+="	";break;case 117:var z=d(4,!0);z>=0?w+=String.fromCharCode(z):f=4;break;default:f=5}T=n;continue}if(N>=0&&N<=31)if(yu(N)){w+=e.substring(T,n),f=2;break}else f=6;n++}return w}function v(){if(i="",f=0,o=n,c=a,l=u,n>=r)return o=r,s=17;var w=e.charCodeAt(n);if(Sg(w)){do n++,i+=String.fromCharCode(w),w=e.charCodeAt(n);while(Sg(w));return s=15}if(yu(w))return n++,i+=String.fromCharCode(w),w===13&&e.charCodeAt(n)===10&&(n++,i+=`
`),a++,u=n,s=14;switch(w){case 123:return n++,s=1;case 125:return n++,s=2;case 91:return n++,s=3;case 93:return n++,s=4;case 58:return n++,s=6;case 44:return n++,s=5;case 34:return n++,i=m(),s=10;case 47:var T=n-1;if(e.charCodeAt(n+1)===47){for(n+=2;n<r&&!yu(e.charCodeAt(n));)n++;return i=e.substring(T,n),s=12}if(e.charCodeAt(n+1)===42){n+=2;for(var N=r-1,P=!1;n<N;){var z=e.charCodeAt(n);if(z===42&&e.charCodeAt(n+1)===47){n+=2,P=!0;break}n++,yu(z)&&(z===13&&e.charCodeAt(n)===10&&n++,a++,u=n)}return P||(n++,f=1),i=e.substring(T,n),s=13}return i+=String.fromCharCode(w),n++,s=16;case 45:if(i+=String.fromCharCode(w),n++,n===r||!la(e.charCodeAt(n)))return s=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return i+=h(),s=11;default:for(;n<r&&_(w);)n++,w=e.charCodeAt(n);if(o!==n){switch(i=e.substring(o,n),i){case"true":return s=8;case"false":return s=9;case"null":return s=7}return s=16}return i+=String.fromCharCode(w),n++,s=16}}function _(w){if(Sg(w)||yu(w))return!1;switch(w){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function E(){var w;do w=v();while(w>=12&&w<=15);return w}return{setPosition:p,getPosition:function(){return n},scan:t?E:v,getToken:function(){return s},getTokenValue:function(){return i},getTokenOffset:function(){return o},getTokenLength:function(){return n-o},getTokenStartLine:function(){return c},getTokenStartCharacter:function(){return o-l},getTokenError:function(){return f}}}function Sg(e){return e===32||e===9||e===11||e===12||e===160||e===5760||e>=8192&&e<=8203||e===8239||e===8287||e===12288||e===65279}function yu(e){return e===10||e===13||e===8232||e===8233}function la(e){return e>=48&&e<=57}"use strict";"use strict";var zf;(function(e){e.DEFAULT={allowTrailingComma:!1}})(zf||(zf={}));function Lb(e,t,r){t===void 0&&(t=[]),r===void 0&&(r=zf.DEFAULT);var n=null,i=[],o=[];function s(c){Array.isArray(i)?i.push(c):n!==null&&(i[n]=c)}var a={onObjectBegin:function(){var c={};s(c),o.push(i),i=c,n=null},onObjectProperty:function(c){n=c},onObjectEnd:function(){i=o.pop()},onArrayBegin:function(){var c=[];s(c),o.push(i),i=c,n=null},onArrayEnd:function(){i=o.pop()},onLiteralValue:s,onError:function(c,u,l){t.push({error:c,offset:u,length:l})}};return kb(e,a,r),i[0]}function kb(e,t,r){r===void 0&&(r=zf.DEFAULT);var n=Vf(e,!1);function i(R){return R?function(){return R(n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter())}:function(){return!0}}function o(R){return R?function(Y){return R(Y,n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter())}:function(){return!0}}var s=i(t.onObjectBegin),a=o(t.onObjectProperty),c=i(t.onObjectEnd),u=i(t.onArrayBegin),l=i(t.onArrayEnd),f=o(t.onLiteralValue),d=o(t.onSeparator),p=i(t.onComment),h=o(t.onError),m=r&&r.disallowComments,v=r&&r.allowTrailingComma;function _(){for(;;){var R=n.scan();switch(n.getTokenError()){case 4:E(14);break;case 5:E(15);break;case 3:E(13);break;case 1:m||E(11);break;case 2:E(12);break;case 6:E(16);break}switch(R){case 12:case 13:m?E(10):p();break;case 16:E(1);break;case 15:case 14:break;default:return R}}}function E(R,Y,U){if(Y===void 0&&(Y=[]),U===void 0&&(U=[]),h(R),Y.length+U.length>0)for(var j=n.getToken();j!==17;){if(Y.indexOf(j)!==-1){_();break}else if(U.indexOf(j)!==-1)break;j=_()}}function w(R){var Y=n.getTokenValue();return R?f(Y):a(Y),_(),!0}function T(){switch(n.getToken()){case 11:var R=n.getTokenValue(),Y=Number(R);isNaN(Y)&&(E(2),Y=0),f(Y);break;case 7:f(null);break;case 8:f(!0);break;case 9:f(!1);break;default:return!1}return _(),!0}function N(){return n.getToken()!==10?(E(3,[],[2,5]),!1):(w(!1),n.getToken()===6?(d(":"),_(),H()||E(4,[],[2,5])):E(5,[],[2,5]),!0)}function P(){s(),_();for(var R=!1;n.getToken()!==2&&n.getToken()!==17;){if(n.getToken()===5){if(R||E(4,[],[]),d(","),_(),n.getToken()===2&&v)break}else R&&E(6,[],[]);N()||E(4,[],[2,5]),R=!0}return c(),n.getToken()!==2?E(7,[2],[]):_(),!0}function z(){u(),_();for(var R=!1;n.getToken()!==4&&n.getToken()!==17;){if(n.getToken()===5){if(R||E(4,[],[]),d(","),_(),n.getToken()===4&&v)break}else R&&E(6,[],[]);H()||E(4,[],[4,5]),R=!0}return l(),n.getToken()!==4?E(8,[4],[]):_(),!0}function H(){switch(n.getToken()){case 3:return z();case 1:return P();case 10:return w(!0);default:return T()}}return _(),n.getToken()===17?r.allowEmptyContent?!0:(E(4,[],[]),!1):H()?(n.getToken()!==17&&E(9,[],[]),!0):(E(4,[],[]),!1)}"use strict";function Fb(e,t){return e.substring(0,t.offset)+t.content+e.substring(t.offset+t.length)}"use strict";var Cn=Lb;function Kf(e,t){for(var r=t.length-1;r>=0;r--)e=Fb(e,t[r]);return e}var bb=M(require("os")),et=M(require("path"));var td=M(require("assert"));"use strict";var H2={right:z2,center:K2},B2=0,Yf=1,G2=2,Xf=3,Mb=class{constructor(t){var r;this.width=t.width,this.wrap=(r=t.wrap)!==null&&r!==void 0?r:!0,this.rows=[]}span(...t){let r=this.div(...t);r.span=!0}resetOutput(){this.rows=[]}div(...t){if(t.length===0&&this.div(""),this.wrap&&this.shouldApplyLayoutDSL(...t)&&typeof t[0]=="string")return this.applyLayoutDSL(t[0]);let r=t.map(n=>typeof n=="string"?this.colFromString(n):n);return this.rows.push(r),r}shouldApplyLayoutDSL(...t){return t.length===1&&typeof t[0]=="string"&&/[\t\n]/.test(t[0])}applyLayoutDSL(t){let r=t.split(`
`).map(i=>i.split("	")),n=0;return r.forEach(i=>{i.length>1&&xr.stringWidth(i[0])>n&&(n=Math.min(Math.floor(this.width*.5),xr.stringWidth(i[0])))}),r.forEach(i=>{this.div(...i.map((o,s)=>({text:o.trim(),padding:this.measurePadding(o),width:s===0&&i.length>1?n:void 0})))}),this.rows[this.rows.length-1]}colFromString(t){return{text:t,padding:this.measurePadding(t)}}measurePadding(t){let r=xr.stripAnsi(t);return[0,r.match(/\s*$/)[0].length,0,r.match(/^\s*/)[0].length]}toString(){let t=[];return this.rows.forEach(r=>{this.rowToString(r,t)}),t.filter(r=>!r.hidden).map(r=>r.text).join(`
`)}rowToString(t,r){return this.rasterize(t).forEach((n,i)=>{let o="";n.forEach((s,a)=>{let{width:c}=t[a],u=this.negatePadding(t[a]),l=s;u>xr.stringWidth(s)&&(l+=" ".repeat(u-xr.stringWidth(s))),t[a].align&&t[a].align!=="left"&&this.wrap&&(l=H2[t[a].align](l,u),xr.stringWidth(l)<u&&(l+=" ".repeat((c||0)-xr.stringWidth(l)-1)));let f=t[a].padding||[0,0,0,0];f[Xf]&&(o+=" ".repeat(f[Xf])),o+=qb(t[a],l,"| "),o+=l,o+=qb(t[a],l," |"),f[Yf]&&(o+=" ".repeat(f[Yf])),i===0&&r.length>0&&(o=this.renderInline(o,r[r.length-1]))}),r.push({text:o.replace(/ +$/,""),span:t.span})}),r}renderInline(t,r){let n=t.match(/^ */),i=n?n[0].length:0,o=r.text,s=xr.stringWidth(o.trimRight());return r.span?this.wrap?i<s?t:(r.hidden=!0,o.trimRight()+" ".repeat(i-s)+t.trimLeft()):(r.hidden=!0,o+t):t}rasterize(t){let r=[],n=this.columnWidths(t),i;return t.forEach((o,s)=>{o.width=n[s],this.wrap?i=xr.wrap(o.text,this.negatePadding(o),{hard:!0}).split(`
`):i=o.text.split(`
`),o.border&&(i.unshift("."+"-".repeat(this.negatePadding(o)+2)+"."),i.push("'"+"-".repeat(this.negatePadding(o)+2)+"'")),o.padding&&(i.unshift(...new Array(o.padding[B2]||0).fill("")),i.push(...new Array(o.padding[G2]||0).fill(""))),i.forEach((a,c)=>{r[c]||r.push([]);let u=r[c];for(let l=0;l<s;l++)u[l]===void 0&&u.push("");u.push(a)})}),r}negatePadding(t){let r=t.width||0;return t.padding&&(r-=(t.padding[Xf]||0)+(t.padding[Yf]||0)),t.border&&(r-=4),r}columnWidths(t){if(!this.wrap)return t.map(s=>s.width||xr.stringWidth(s.text));let r=t.length,n=this.width,i=t.map(s=>{if(s.width)return r--,n-=s.width,s.width}),o=r?Math.floor(n/r):0;return i.map((s,a)=>s===void 0?Math.max(o,W2(t[a])):s)}};function qb(e,t,r){return e.border?/[.']-+[.']/.test(t)?"":t.trim().length!==0?r:"  ":""}function W2(e){let t=e.padding||[],r=1+(t[Xf]||0)+(t[Yf]||0);return e.border?r+4:r}function V2(){return typeof process=="object"&&process.stdout&&process.stdout.columns?process.stdout.columns:80}function z2(e,t){e=e.trim();let r=xr.stringWidth(e);return r<t?" ".repeat(t-r)+e:e}function K2(e,t){e=e.trim();let r=xr.stringWidth(e);return r>=t?e:" ".repeat(t-r>>1)+e}var xr;function $b(e,t){return xr=t,new Mb({width:(e==null?void 0:e.width)||V2(),wrap:e==null?void 0:e.wrap})}var jb=new RegExp("(?:\\[(?:\\d+[ABCDEFGJKSTm]|\\d+;\\d+[Hfm]|\\d+;\\d+;\\d+m|6n|s|u|\\?25[lh])|\\w)","g");function bg(e){return e.replace(jb,"")}function Ub(e,t){let[r,n]=e.match(jb)||["",""];e=bg(e);let i="";for(let o=0;o<e.length;o++)o!==0&&o%t==0&&(i+=`
`),i+=e.charAt(o);return r&&n&&(i=`${r}${i}${n}`),i}function xg(e){return $b(e,{stringWidth:t=>[...t].length,stripAnsi:bg,wrap:Ub})}var fa=M(require("path")),Qf=M(require("fs"));function Hb(e,t){let r=(0,fa.resolve)(".",e),n;for((0,Qf.statSync)(r).isDirectory()||(r=(0,fa.dirname)(r));;){if(n=t(r,(0,Qf.readdirSync)(r)),n)return(0,fa.resolve)(r,n);if(r=(0,fa.dirname)(n=r),n===r)break}}var n0=M(require("util")),i0=M(require("fs")),Ig=M(require("url"));var Wb=M(require("util")),Vb=M(require("fs")),ed=M(require("path"));function Uo(e){if(e!==e.toLowerCase()&&e!==e.toUpperCase()||(e=e.toLocaleLowerCase()),e.indexOf("-")===-1&&e.indexOf("_")===-1)return e;{let r="",n=!1,i=e.match(/^-+/);for(let o=i?i[0].length:0;o<e.length;o++){let s=e.charAt(o);n&&(n=!1,s=s.toLocaleUpperCase()),o!==0&&(s==="-"||s==="_")?n=!0:s!=="-"&&s!=="_"&&(r+=s)}return r}}function Jf(e,t){let r=e.toLocaleLowerCase();t=t||"-";let n="";for(let i=0;i<e.length;i++){let o=r.charAt(i),s=e.charAt(i);o!==s&&i>0?n+=`${t}${r.charAt(i)}`:n+=s}return n}function Zf(e){return e==null?!1:typeof e=="number"||/^0x[0-9a-f]+$/i.test(e)?!0:e.length>1&&e[0]==="0"?!1:/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(e)}function Bb(e){if(Array.isArray(e))return e.map(s=>typeof s!="string"?s+"":s);e=e.trim();let t=0,r=null,n=null,i=null,o=[];for(let s=0;s<e.length;s++){if(r=n,n=e.charAt(s),n===" "&&!i){r!==" "&&t++;continue}n===i?i=null:(n==="'"||n==='"')&&!i&&(i=n),o[t]||(o[t]=""),o[t]+=n}return o}var ni,Tg=class{constructor(t){ni=t}parse(t,r){let n=Object.assign({alias:void 0,array:void 0,boolean:void 0,config:void 0,configObjects:void 0,configuration:void 0,coerce:void 0,count:void 0,default:void 0,envPrefix:void 0,narg:void 0,normalize:void 0,string:void 0,number:void 0,__:void 0,key:void 0},r),i=Bb(t),o=Y2(Object.assign(Object.create(null),n.alias)),s=Object.assign({"boolean-negation":!0,"camel-case-expansion":!0,"combine-arrays":!1,"dot-notation":!0,"duplicate-arguments-array":!0,"flatten-duplicate-arrays":!0,"greedy-arrays":!0,"halt-at-non-option":!1,"nargs-eats-options":!1,"negation-prefix":"no-","parse-numbers":!0,"parse-positional-numbers":!0,"populate--":!1,"set-placeholder-key":!1,"short-option-groups":!0,"strip-aliased":!1,"strip-dashed":!1,"unknown-options-as-args":!1},n.configuration),a=Object.assign(Object.create(null),n.default),c=n.configObjects||[],u=n.envPrefix,l=s["populate--"],f=l?"--":"_",d=Object.create(null),p=Object.create(null),h=n.__||ni.format,m={aliases:Object.create(null),arrays:Object.create(null),bools:Object.create(null),strings:Object.create(null),numbers:Object.create(null),counts:Object.create(null),normalize:Object.create(null),configs:Object.create(null),nargs:Object.create(null),coercions:Object.create(null),keys:[]},v=/^-([0-9]+(\.[0-9]+)?|\.[0-9]+)$/,_=new RegExp("^--"+s["negation-prefix"]+"(.+)");[].concat(n.array||[]).filter(Boolean).forEach(function(C){let S=typeof C=="object"?C.key:C,q=Object.keys(C).map(function(b){return{boolean:"bools",string:"strings",number:"numbers"}[b]}).filter(Boolean).pop();q&&(m[q][S]=!0),m.arrays[S]=!0,m.keys.push(S)}),[].concat(n.boolean||[]).filter(Boolean).forEach(function(C){m.bools[C]=!0,m.keys.push(C)}),[].concat(n.string||[]).filter(Boolean).forEach(function(C){m.strings[C]=!0,m.keys.push(C)}),[].concat(n.number||[]).filter(Boolean).forEach(function(C){m.numbers[C]=!0,m.keys.push(C)}),[].concat(n.count||[]).filter(Boolean).forEach(function(C){m.counts[C]=!0,m.keys.push(C)}),[].concat(n.normalize||[]).filter(Boolean).forEach(function(C){m.normalize[C]=!0,m.keys.push(C)}),typeof n.narg=="object"&&Object.entries(n.narg).forEach(([C,S])=>{typeof S=="number"&&(m.nargs[C]=S,m.keys.push(C))}),typeof n.coerce=="object"&&Object.entries(n.coerce).forEach(([C,S])=>{typeof S=="function"&&(m.coercions[C]=S,m.keys.push(C))}),typeof n.config!="undefined"&&(Array.isArray(n.config)||typeof n.config=="string"?[].concat(n.config).filter(Boolean).forEach(function(C){m.configs[C]=!0}):typeof n.config=="object"&&Object.entries(n.config).forEach(([C,S])=>{(typeof S=="boolean"||typeof S=="function")&&(m.configs[C]=S)})),ye(n.key,o,n.default,m.arrays),Object.keys(a).forEach(function(C){(m.aliases[C]||[]).forEach(function(S){a[S]=a[C]})});let E=null;wg();let w=[],T=Object.assign(Object.create(null),{_:[]}),N={};for(let C=0;C<i.length;C++){let S=i[C],q,b,A,W,ie,je;if(S!=="--"&&Te(S))P(S);else if(S.match(/---+(=|$)/)){P(S);continue}else if(S.match(/^--.+=/)||!s["short-option-groups"]&&S.match(/^-.+=/))W=S.match(/^--?([^=]+)=([\s\S]*)$/),W!==null&&Array.isArray(W)&&W.length>=3&&(K(W[1],m.arrays)?C=H(C,W[1],i,W[2]):K(W[1],m.nargs)!==!1?C=z(C,W[1],i,W[2]):R(W[1],W[2]));else if(S.match(_)&&s["boolean-negation"])W=S.match(_),W!==null&&Array.isArray(W)&&W.length>=2&&(b=W[1],R(b,K(b,m.arrays)?[!1]:!1));else if(S.match(/^--.+/)||!s["short-option-groups"]&&S.match(/^-[^-]+/))W=S.match(/^--?(.+)/),W!==null&&Array.isArray(W)&&W.length>=2&&(b=W[1],K(b,m.arrays)?C=H(C,b,i):K(b,m.nargs)!==!1?C=z(C,b,i):(ie=i[C+1],ie!==void 0&&(!ie.match(/^-/)||ie.match(v))&&!K(b,m.bools)&&!K(b,m.counts)||/^(true|false)$/.test(ie)?(R(b,ie),C++):R(b,Ie(b))));else if(S.match(/^-.\..+=/))W=S.match(/^-([^=]+)=([\s\S]*)$/),W!==null&&Array.isArray(W)&&W.length>=3&&R(W[1],W[2]);else if(S.match(/^-.\..+/)&&!S.match(v))ie=i[C+1],W=S.match(/^-(.\..+)/),W!==null&&Array.isArray(W)&&W.length>=2&&(b=W[1],ie!==void 0&&!ie.match(/^-/)&&!K(b,m.bools)&&!K(b,m.counts)?(R(b,ie),C++):R(b,Ie(b)));else if(S.match(/^-[^-]+/)&&!S.match(v)){A=S.slice(1,-1).split(""),q=!1;for(let Fe=0;Fe<A.length;Fe++){if(ie=S.slice(Fe+2),A[Fe+1]&&A[Fe+1]==="="){je=S.slice(Fe+3),b=A[Fe],K(b,m.arrays)?C=H(C,b,i,je):K(b,m.nargs)!==!1?C=z(C,b,i,je):R(b,je),q=!0;break}if(ie==="-"){R(A[Fe],ie);continue}if(/[A-Za-z]/.test(A[Fe])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(ie)&&K(ie,m.bools)===!1){R(A[Fe],ie),q=!0;break}if(A[Fe+1]&&A[Fe+1].match(/\W/)){R(A[Fe],ie),q=!0;break}else R(A[Fe],Ie(A[Fe]))}b=S.slice(-1)[0],!q&&b!=="-"&&(K(b,m.arrays)?C=H(C,b,i):K(b,m.nargs)!==!1?C=z(C,b,i):(ie=i[C+1],ie!==void 0&&(!/^(-|--)[^-]/.test(ie)||ie.match(v))&&!K(b,m.bools)&&!K(b,m.counts)||/^(true|false)$/.test(ie)?(R(b,ie),C++):R(b,Ie(b))))}else if(S.match(/^-[0-9]$/)&&S.match(v)&&K(S.slice(1),m.bools))b=S.slice(1),R(b,Ie(b));else if(S==="--"){w=i.slice(C+1);break}else if(s["halt-at-non-option"]){w=i.slice(C);break}else P(S)}O(T,!0),O(T,!1),X(T),B(),G(T,m.aliases,a,!0),x(T),s["set-placeholder-key"]&&D(T),Object.keys(m.counts).forEach(function(C){re(T,C.split("."))||R(C,0)}),l&&w.length&&(T[f]=[]),w.forEach(function(C){T[f].push(C)}),s["camel-case-expansion"]&&s["strip-dashed"]&&Object.keys(T).filter(C=>C!=="--"&&C.includes("-")).forEach(C=>{delete T[C]}),s["strip-aliased"]&&[].concat(...Object.keys(o).map(C=>o[C])).forEach(C=>{s["camel-case-expansion"]&&C.includes("-")&&delete T[C.split(".").map(S=>Uo(S)).join(".")],delete T[C]});function P(C){let S=j("_",C);(typeof S=="string"||typeof S=="number")&&T._.push(S)}function z(C,S,q,b){let A,W=K(S,m.nargs);if(W=typeof W!="number"||isNaN(W)?1:W,W===0)return Pt(b)||(E=Error(h("Argument unexpected for: %s",S))),R(S,Ie(S)),C;let ie=Pt(b)?0:1;if(s["nargs-eats-options"])q.length-(C+1)+ie<W&&(E=Error(h("Not enough arguments following: %s",S))),ie=W;else{for(A=C+1;A<q.length&&(!q[A].match(/^-[^0-9]/)||q[A].match(v)||Te(q[A]));A++)ie++;ie<W&&(E=Error(h("Not enough arguments following: %s",S)))}let je=Math.min(ie,W);for(!Pt(b)&&je>0&&(R(S,b),je--),A=C+1;A<je+C+1;A++)R(S,q[A]);return C+je}function H(C,S,q,b){let A=[],W=b||q[C+1],ie=K(S,m.nargs);if(K(S,m.bools)&&!/^(true|false)$/.test(W))A.push(!0);else if(Pt(W)||Pt(b)&&/^-/.test(W)&&!v.test(W)&&!Te(W)){if(a[S]!==void 0){let je=a[S];A=Array.isArray(je)?je:[je]}}else{Pt(b)||A.push(U(S,b));for(let je=C+1;je<q.length&&!(!s["greedy-arrays"]&&A.length>0||ie&&typeof ie=="number"&&A.length>=ie||(W=q[je],/^-/.test(W)&&!v.test(W)&&!Te(W)));je++)C=je,A.push(U(S,W))}return typeof ie=="number"&&(ie&&A.length<ie||isNaN(ie)&&A.length===0)&&(E=Error(h("Not enough arguments following: %s",S))),R(S,A),C}function R(C,S){if(/-/.test(C)&&s["camel-case-expansion"]){let A=C.split(".").map(function(W){return Uo(W)}).join(".");Y(C,A)}let q=U(C,S),b=C.split(".");ue(T,b,q),m.aliases[C]&&m.aliases[C].forEach(function(A){let W=A.split(".");ue(T,W,q)}),b.length>1&&s["dot-notation"]&&(m.aliases[b[0]]||[]).forEach(function(A){let W=A.split("."),ie=[].concat(b);ie.shift(),W=W.concat(ie),(m.aliases[C]||[]).includes(W.join("."))||ue(T,W,q)}),K(C,m.normalize)&&!K(C,m.arrays)&&[C].concat(m.aliases[C]||[]).forEach(function(W){Object.defineProperty(N,W,{enumerable:!0,get(){return S},set(ie){S=typeof ie=="string"?ni.normalize(ie):ie}})})}function Y(C,S){m.aliases[C]&&m.aliases[C].length||(m.aliases[C]=[S],d[S]=!0),m.aliases[S]&&m.aliases[S].length||Y(S,C)}function U(C,S){typeof S=="string"&&(S[0]==="'"||S[0]==='"')&&S[S.length-1]===S[0]&&(S=S.substring(1,S.length-1)),(K(C,m.bools)||K(C,m.counts))&&typeof S=="string"&&(S=S==="true");let q=Array.isArray(S)?S.map(function(b){return j(C,b)}):j(C,S);return K(C,m.counts)&&(Pt(q)||typeof q=="boolean")&&(q=Ag()),K(C,m.normalize)&&K(C,m.arrays)&&(Array.isArray(S)?q=S.map(b=>ni.normalize(b)):q=ni.normalize(S)),q}function j(C,S){return!s["parse-positional-numbers"]&&C==="_"||!K(C,m.strings)&&!K(C,m.bools)&&!Array.isArray(S)&&(Zf(S)&&s["parse-numbers"]&&Number.isSafeInteger(Math.floor(parseFloat(`${S}`)))||!Pt(S)&&K(C,m.numbers))&&(S=Number(S)),S}function X(C){let S=Object.create(null);G(S,m.aliases,a),Object.keys(m.configs).forEach(function(q){let b=C[q]||S[q];if(b)try{let A=null,W=ni.resolve(ni.cwd(),b),ie=m.configs[q];if(typeof ie=="function"){try{A=ie(W)}catch(je){A=je}if(A instanceof Error){E=A;return}}else A=ni.require(W);ae(A)}catch(A){A.name==="PermissionDenied"?E=A:C[q]&&(E=Error(h("Invalid JSON config file: %s",b)))}})}function ae(C,S){Object.keys(C).forEach(function(q){let b=C[q],A=S?S+"."+q:q;typeof b=="object"&&b!==null&&!Array.isArray(b)&&s["dot-notation"]?ae(b,A):(!re(T,A.split("."))||K(A,m.arrays)&&s["combine-arrays"])&&R(A,b)})}function B(){typeof c!="undefined"&&c.forEach(function(C){ae(C)})}function O(C,S){if(typeof u=="undefined")return;let q=typeof u=="string"?u:"",b=ni.env();Object.keys(b).forEach(function(A){if(q===""||A.lastIndexOf(q,0)===0){let W=A.split("__").map(function(ie,je){return je===0&&(ie=ie.substring(q.length)),Uo(ie)});(S&&m.configs[W.join(".")]||!S)&&!re(C,W)&&R(W.join("."),b[A])}})}function x(C){let S,q=new Set;Object.keys(C).forEach(function(b){if(!q.has(b)&&(S=K(b,m.coercions),typeof S=="function"))try{let A=j(b,S(C[b]));[].concat(m.aliases[b]||[],b).forEach(W=>{q.add(W),C[W]=A})}catch(A){E=A}})}function D(C){return m.keys.forEach(S=>{~S.indexOf(".")||typeof C[S]=="undefined"&&(C[S]=void 0)}),C}function G(C,S,q,b=!1){Object.keys(q).forEach(function(A){re(C,A.split("."))||(ue(C,A.split("."),q[A]),b&&(p[A]=!0),(S[A]||[]).forEach(function(W){re(C,W.split("."))||ue(C,W.split("."),q[A])}))})}function re(C,S){let q=C;s["dot-notation"]||(S=[S.join(".")]),S.slice(0,-1).forEach(function(A){q=q[A]||{}});let b=S[S.length-1];return typeof q!="object"?!1:b in q}function ue(C,S,q){let b=C;s["dot-notation"]||(S=[S.join(".")]),S.slice(0,-1).forEach(function(Fe){Fe=Gb(Fe),typeof b=="object"&&b[Fe]===void 0&&(b[Fe]={}),typeof b[Fe]!="object"||Array.isArray(b[Fe])?(Array.isArray(b[Fe])?b[Fe].push({}):b[Fe]=[b[Fe],{}],b=b[Fe][b[Fe].length-1]):b=b[Fe]});let A=Gb(S[S.length-1]),W=K(S.join("."),m.arrays),ie=Array.isArray(q),je=s["duplicate-arguments-array"];!je&&K(A,m.nargs)&&(je=!0,(!Pt(b[A])&&m.nargs[A]===1||Array.isArray(b[A])&&b[A].length===m.nargs[A])&&(b[A]=void 0)),q===Ag()?b[A]=Ag(b[A]):Array.isArray(b[A])?je&&W&&ie?b[A]=s["flatten-duplicate-arrays"]?b[A].concat(q):(Array.isArray(b[A][0])?b[A]:[b[A]]).concat([q]):!je&&Boolean(W)===Boolean(ie)?b[A]=q:b[A]=b[A].concat([q]):b[A]===void 0&&W?b[A]=ie?q:[q]:je&&!(b[A]===void 0||K(A,m.counts)||K(A,m.bools))?b[A]=[b[A],q]:b[A]=q}function ye(...C){C.forEach(function(S){Object.keys(S||{}).forEach(function(q){m.aliases[q]||(m.aliases[q]=[].concat(o[q]||[]),m.aliases[q].concat(q).forEach(function(b){if(/-/.test(b)&&s["camel-case-expansion"]){let A=Uo(b);A!==q&&m.aliases[q].indexOf(A)===-1&&(m.aliases[q].push(A),d[A]=!0)}}),m.aliases[q].concat(q).forEach(function(b){if(b.length>1&&/[A-Z]/.test(b)&&s["camel-case-expansion"]){let A=Jf(b,"-");A!==q&&m.aliases[q].indexOf(A)===-1&&(m.aliases[q].push(A),d[A]=!0)}}),m.aliases[q].forEach(function(b){m.aliases[b]=[q].concat(m.aliases[q].filter(function(A){return b!==A}))}))})})}function K(C,S){let q=[].concat(m.aliases[C]||[],C),b=Object.keys(S),A=q.find(W=>b.includes(W));return A?S[A]:!1}function ht(C){let S=Object.keys(m);return[].concat(S.map(b=>m[b])).some(function(b){return Array.isArray(b)?b.includes(C):b[C]})}function Vr(C,...S){return[].concat(...S).some(function(b){let A=C.match(b);return A&&ht(A[1])})}function se(C){if(C.match(v)||!C.match(/^-[^-]+/))return!1;let S=!0,q,b=C.slice(1).split("");for(let A=0;A<b.length;A++){if(q=C.slice(A+2),!ht(b[A])){S=!1;break}if(b[A+1]&&b[A+1]==="="||q==="-"||/[A-Za-z]/.test(b[A])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(q)||b[A+1]&&b[A+1].match(/\W/))break}return S}function Te(C){return s["unknown-options-as-args"]&&ke(C)}function ke(C){return C.match(v)||se(C)?!1:!Vr(C,/^-+([^=]+?)=[\s\S]*$/,_,/^-+([^=]+?)$/,/^-+([^=]+?)-$/,/^-+([^=]+?\d+)$/,/^-+([^=]+?)\W+.*$/)}function Ie(C){return!K(C,m.bools)&&!K(C,m.counts)&&`${C}`in a?a[C]:wt(dr(C))}function wt(C){return{boolean:!0,string:"",number:void 0,array:[]}[C]}function dr(C){let S="boolean";return K(C,m.strings)?S="string":K(C,m.numbers)?S="number":K(C,m.bools)?S="boolean":K(C,m.arrays)&&(S="array"),S}function Pt(C){return C===void 0}function wg(){Object.keys(m.counts).find(C=>K(C,m.arrays)?(E=Error(h("Invalid configuration: %s, opts.count excludes opts.array.",C)),!0):K(C,m.nargs)?(E=Error(h("Invalid configuration: %s, opts.count excludes opts.narg.",C)),!0):!1)}return{aliases:Object.assign({},m.aliases),argv:Object.assign(N,T),configuration:s,defaulted:Object.assign({},p),error:E,newAliases:Object.assign({},d)}}};function Y2(e){let t=[],r=Object.create(null),n=!0;for(Object.keys(e).forEach(function(i){t.push([].concat(e[i],i))});n;){n=!1;for(let i=0;i<t.length;i++)for(let o=i+1;o<t.length;o++)if(t[i].filter(function(a){return t[o].indexOf(a)!==-1}).length){t[i]=t[i].concat(t[o]),t.splice(o,1),n=!0;break}}return t.forEach(function(i){i=i.filter(function(s,a,c){return c.indexOf(s)===a});let o=i.pop();o!==void 0&&typeof o=="string"&&(r[o]=i)}),r}function Ag(e){return e!==void 0?e+1:1}function Gb(e){return e==="__proto__"?"___proto___":e}var zb=process&&process.env&&process.env.YARGS_MIN_NODE_VERSION?Number(process.env.YARGS_MIN_NODE_VERSION):10;if(process&&process.version&&Number(process.version.match(/v([^.]+)/)[1])<zb)throw Error(`yargs parser supports a minimum Node.js version of ${zb}. Read our version support policy: https://github.com/yargs/yargs-parser#supported-nodejs-versions`);var X2=process?process.env:{},Kb=new Tg({cwd:process.cwd,env:()=>X2,format:Wb.format,normalize:ed.normalize,resolve:ed.resolve,require:e=>{if(typeof require!="undefined")return require(e);if(e.match(/\.json$/))return(0,Vb.readFileSync)(e,"utf8");throw Error("only .json config files are supported in ESM")}}),Eu=function(t,r){return Kb.parse(t.slice(),r).argv};Eu.detailed=function(e,t){return Kb.parse(e.slice(),t)};Eu.camelCase=Uo;Eu.decamelize=Jf;Eu.looksLikeNumber=Zf;var Yb=Eu;var Sn=M(require("path"));function Q2(){return J2()?0:1}function J2(){return Z2()&&!process.defaultApp}function Z2(){return!!process.versions.electron}function Xb(){return process.argv[Q2()]}var Ve=class extends Error{constructor(t){super(t||"yargs error");this.name="YError",Error.captureStackTrace(this,Ve)}};var da=M(require("fs")),Qb=M(require("util")),Jb=M(require("path")),Zb={fs:{readFileSync:da.readFileSync,writeFile:da.writeFile},format:Qb.format,resolve:Jb.resolve,exists:e=>{try{return(0,da.statSync)(e).isFile()}catch(t){return!1}}};var wn,e0=class{constructor(t){t=t||{},this.directory=t.directory||"./locales",this.updateFiles=typeof t.updateFiles=="boolean"?t.updateFiles:!0,this.locale=t.locale||"en",this.fallbackToLanguage=typeof t.fallbackToLanguage=="boolean"?t.fallbackToLanguage:!0,this.cache=Object.create(null),this.writeQueue=[]}__(...t){if(typeof arguments[0]!="string")return this._taggedLiteral(arguments[0],...arguments);let r=t.shift(),n=function(){};return typeof t[t.length-1]=="function"&&(n=t.pop()),n=n||function(){},this.cache[this.locale]||this._readLocaleFile(),!this.cache[this.locale][r]&&this.updateFiles?(this.cache[this.locale][r]=r,this._enqueueWrite({directory:this.directory,locale:this.locale,cb:n})):n(),wn.format.apply(wn.format,[this.cache[this.locale][r]||r].concat(t))}__n(){let t=Array.prototype.slice.call(arguments),r=t.shift(),n=t.shift(),i=t.shift(),o=function(){};typeof t[t.length-1]=="function"&&(o=t.pop()),this.cache[this.locale]||this._readLocaleFile();let s=i===1?r:n;this.cache[this.locale][r]&&(s=this.cache[this.locale][r][i===1?"one":"other"]),!this.cache[this.locale][r]&&this.updateFiles?(this.cache[this.locale][r]={one:r,other:n},this._enqueueWrite({directory:this.directory,locale:this.locale,cb:o})):o();let a=[s];return~s.indexOf("%d")&&a.push(i),wn.format.apply(wn.format,a.concat(t))}setLocale(t){this.locale=t}getLocale(){return this.locale}updateLocale(t){this.cache[this.locale]||this._readLocaleFile();for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&(this.cache[this.locale][r]=t[r])}_taggedLiteral(t,...r){let n="";return t.forEach(function(i,o){let s=r[o+1];n+=i,typeof s!="undefined"&&(n+="%s")}),this.__.apply(this,[n].concat([].slice.call(r,1)))}_enqueueWrite(t){this.writeQueue.push(t),this.writeQueue.length===1&&this._processWriteQueue()}_processWriteQueue(){let t=this,r=this.writeQueue[0],n=r.directory,i=r.locale,o=r.cb,s=this._resolveLocaleFile(n,i),a=JSON.stringify(this.cache[i],null,2);wn.fs.writeFile(s,a,"utf-8",function(c){t.writeQueue.shift(),t.writeQueue.length>0&&t._processWriteQueue(),o(c)})}_readLocaleFile(){let t={},r=this._resolveLocaleFile(this.directory,this.locale);try{wn.fs.readFileSync&&(t=JSON.parse(wn.fs.readFileSync(r,"utf-8")))}catch(n){if(n instanceof SyntaxError&&(n.message="syntax error in "+r),n.code==="ENOENT")t={};else throw n}this.cache[this.locale]=t}_resolveLocaleFile(t,r){let n=wn.resolve(t,"./",r+".json");if(this.fallbackToLanguage&&!this._fileExistsSync(n)&&~r.lastIndexOf("_")){let i=wn.resolve(t,"./",r.split("_")[0]+".json");this._fileExistsSync(i)&&(n=i)}return n}_fileExistsSync(t){return wn.exists(t)}};function t0(e,t){wn=t;let r=new e0(e);return{__:r.__.bind(r),__n:r.__n.bind(r),setLocale:r.setLocale.bind(r),getLocale:r.getLocale.bind(r),updateLocale:r.updateLocale.bind(r),locale:r.locale}}var eG=e=>t0(e,Zb),r0=eG;"use strict";var tG="require is not supported by ESM",o0="loading a directory of commands is not supported yet for ESM",rG=(0,Ig.fileURLToPath)("file:///c%3A/home/runner/work/vscode-remote-containers/vscode-remote-containers/node_modules/yargs/lib/platform-shims/esm.mjs").split("node_modules")[0],nG=(0,Ig.fileURLToPath)("file:///c%3A/home/runner/work/vscode-remote-containers/vscode-remote-containers/node_modules/yargs/lib/platform-shims/esm.mjs"),s0={assert:{notStrictEqual:td.notStrictEqual,strictEqual:td.strictEqual},cliui:xg,findUp:Hb,getEnv:e=>process.env[e],inspect:n0.inspect,getCallerFile:()=>{throw new Ve(o0)},getProcessArgvBin:Xb,mainFilename:rG||process.cwd(),Parser:Yb,path:{basename:Sn.basename,dirname:Sn.dirname,extname:Sn.extname,relative:Sn.relative,resolve:Sn.resolve},process:{argv:()=>process.argv,cwd:process.cwd,execPath:()=>process.execPath,exit:process.exit,nextTick:process.nextTick,stdColumns:typeof process.stdout.columns!="undefined"?process.stdout.columns:null},readFileSync:i0.readFileSync,require:()=>{throw new Ve(tG)},requireDirectory:()=>{throw new Ve(o0)},stringWidth:e=>[...e].length,y18n:r0({directory:(0,Sn.resolve)(nG,"../../../locales"),updateFiles:!1})};function nr(e,t,r,n){r.assert.notStrictEqual(e,t,n)}function Rg(e,t){t.assert.strictEqual(typeof e,"string")}function pa(e){return Object.keys(e)}function tt(e){return!!e&&!!e.then&&typeof e.then=="function"}function qi(e){let r=e.replace(/\s{2,}/g," ").split(/\s+(?![^[]*]|[^<]*>)/),n=/\.*[\][<>]/g,i=r.shift();if(!i)throw new Error(`No command found in: ${e}`);let o={cmd:i.replace(n,""),demanded:[],optional:[]};return r.forEach((s,a)=>{let c=!1;s=s.replace(/\s/g,""),/\.+[\]>]/.test(s)&&a===r.length-1&&(c=!0),/^\[/.test(s)?o.optional.push({cmd:s.replace(n,"").split("|"),variadic:c}):o.demanded.push({cmd:s.replace(n,"").split("|"),variadic:c})}),o}var iG=["first","second","third","fourth","fifth","sixth"];function Q(e,t,r){function n(){return typeof e=="object"?[{demanded:[],optional:[]},e,t]:[qi(`cmd ${e}`),t,r]}try{let i=0,[o,s,a]=n(),c=[].slice.call(s);for(;c.length&&c[c.length-1]===void 0;)c.pop();let u=a||c.length;if(u<o.demanded.length)throw new Ve(`Not enough arguments provided. Expected ${o.demanded.length} but received ${c.length}.`);let l=o.demanded.length+o.optional.length;if(u>l)throw new Ve(`Too many arguments provided. Expected max ${l} but received ${u}.`);o.demanded.forEach(f=>{let d=c.shift(),p=a0(d);f.cmd.filter(m=>m===p||m==="*").length===0&&c0(p,f.cmd,i),i+=1}),o.optional.forEach(f=>{if(c.length===0)return;let d=c.shift(),p=a0(d);f.cmd.filter(m=>m===p||m==="*").length===0&&c0(p,f.cmd,i),i+=1})}catch(i){console.warn(i.stack)}}function a0(e){return Array.isArray(e)?"array":e===null?"null":typeof e}function c0(e,t,r){throw new Ve(`Invalid ${iG[r]||"manyith"} argument. Expected ${t.join(" or ")} but received ${e}.`)}var Pg=class{constructor(t){this.globalMiddleware=[],this.frozens=[],this.yargs=t}addMiddleware(t,r,n=!0){if(Q("<array|function> [boolean] [boolean]",[t,r,n],arguments.length),Array.isArray(t)){for(let i=0;i<t.length;i++){if(typeof t[i]!="function")throw Error("middleware must be a function");let o=t[i];o.applyBeforeValidation=r,o.global=n}Array.prototype.push.apply(this.globalMiddleware,t)}else if(typeof t=="function"){let i=t;i.applyBeforeValidation=r,i.global=n,this.globalMiddleware.push(t)}return this.yargs}addCoerceMiddleware(t,r){let n=this.yargs.getAliases();return this.globalMiddleware=this.globalMiddleware.filter(i=>{let o=[...n[r]||[],r];return i.option?!o.includes(i.option):!0}),t.option=r,this.addMiddleware(t,!0,!0)}getMiddleware(){return this.globalMiddleware}freeze(){this.frozens.push([...this.globalMiddleware])}unfreeze(){let t=this.frozens.pop();t!==void 0&&(this.globalMiddleware=t)}reset(){this.globalMiddleware=this.globalMiddleware.filter(t=>t.global)}};function u0(e){return e?e.map(t=>(t.applyBeforeValidation=!1,t)):[]}function Ho(e,t,r,n){return r.reduce((i,o)=>{if(o.applyBeforeValidation!==n)return i;if(tt(i))return i.then(s=>Promise.all([s,o(s,t)])).then(([s,a])=>Object.assign(s,a));{let s=o(i,t);return tt(s)?s.then(a=>Object.assign(i,a)):Object.assign(i,s)}},e)}function Bo(e,t,r=n=>{throw n}){try{let n=oG(e)?e():e;return tt(n)?n.then(i=>t(i)):t(n)}catch(n){return r(n)}}function oG(e){return typeof e=="function"}function Og(e){if(typeof require=="undefined")return null;for(let t=0,r=Object.keys(require.cache),n;t<r.length;t++)if(n=require.cache[r[t]],n.exports===e)return n;return null}var ha=/(^\*)|(^\$0)/,l0=class{constructor(t,r,n,i){this.requireCache=new Set,this.handlers={},this.aliasMap={},this.frozens=[],this.shim=i,this.usage=t,this.globalMiddleware=n,this.validation=r}addDirectory(t,r,n,i){i=i||{},typeof i.recurse!="boolean"&&(i.recurse=!1),Array.isArray(i.extensions)||(i.extensions=["js"]);let o=typeof i.visit=="function"?i.visit:s=>s;i.visit=(s,a,c)=>{let u=o(s,a,c);if(u){if(this.requireCache.has(a))return u;this.requireCache.add(a),this.addHandler(u)}return u},this.shim.requireDirectory({require:r,filename:n},t,i)}addHandler(t,r,n,i,o,s){let a=[],c=u0(o);if(i=i||(()=>{}),Array.isArray(t))if(sG(t))[t,...a]=t;else for(let u of t)this.addHandler(u);else if(cG(t)){let u=Array.isArray(t.command)||typeof t.command=="string"?t.command:this.moduleName(t);t.aliases&&(u=[].concat(u).concat(t.aliases)),this.addHandler(u,this.extractDesc(t),t.builder,t.handler,t.middlewares,t.deprecated);return}else if(d0(n)){this.addHandler([t].concat(a),r,n.builder,n.handler,n.middlewares,n.deprecated);return}if(typeof t=="string"){let u=qi(t);a=a.map(d=>qi(d).cmd);let l=!1,f=[u.cmd].concat(a).filter(d=>ha.test(d)?(l=!0,!1):!0);f.length===0&&l&&f.push("$0"),l&&(u.cmd=f[0],a=f.slice(1),t=t.replace(ha,u.cmd)),a.forEach(d=>{this.aliasMap[d]=u.cmd}),r!==!1&&this.usage.command(t,r,l,a,s),this.handlers[u.cmd]={original:t,description:r,handler:i,builder:n||{},middlewares:c,deprecated:s,demanded:u.demanded,optional:u.optional},l&&(this.defaultCommand=this.handlers[u.cmd])}}getCommandHandlers(){return this.handlers}getCommands(){return Object.keys(this.handlers).concat(Object.keys(this.aliasMap))}hasDefaultCommand(){return!!this.defaultCommand}runCommand(t,r,n,i,o,s){let a=this.handlers[t]||this.handlers[this.aliasMap[t]]||this.defaultCommand,c=r.getInternalMethods().getContext(),u=c.commands.slice(),l=!t;t&&(c.commands.push(t),c.fullCommands.push(a.original));let f=this.applyBuilderUpdateUsageAndParse(l,a,r,n.aliases,u,i,o,s);return tt(f)?f.then(d=>this.applyMiddlewareAndGetResult(l,a,d.innerArgv,c,o,d.aliases,r)):this.applyMiddlewareAndGetResult(l,a,f.innerArgv,c,o,f.aliases,r)}applyBuilderUpdateUsageAndParse(t,r,n,i,o,s,a,c){let u=r.builder,l=n;if(rd(u)){let f=u(n.getInternalMethods().reset(i),c);if(tt(f))return f.then(d=>(l=p0(d)?d:n,this.parseAndUpdateUsage(t,r,l,o,s,a)))}else aG(u)&&(l=n.getInternalMethods().reset(i),Object.keys(r.builder).forEach(f=>{l.option(f,u[f])}));return this.parseAndUpdateUsage(t,r,l,o,s,a)}parseAndUpdateUsage(t,r,n,i,o,s){t&&n.getInternalMethods().getUsageInstance().unfreeze(),this.shouldUpdateUsage(n)&&n.getInternalMethods().getUsageInstance().usage(this.usageFromParentCommandsCommandHandler(i,r),r.description);let a=n.getInternalMethods().runYargsParserAndExecuteCommands(null,void 0,!0,o,s);return tt(a)?a.then(c=>({aliases:n.parsed.aliases,innerArgv:c})):{aliases:n.parsed.aliases,innerArgv:a}}shouldUpdateUsage(t){return!t.getInternalMethods().getUsageInstance().getUsageDisabled()&&t.getInternalMethods().getUsageInstance().getUsage().length===0}usageFromParentCommandsCommandHandler(t,r){let n=ha.test(r.original)?r.original.replace(ha,"").trim():r.original,i=t.filter(o=>!ha.test(o));return i.push(n),`$0 ${i.join(" ")}`}applyMiddlewareAndGetResult(t,r,n,i,o,s,a){let c={};if(o)return n;a.getInternalMethods().getHasOutput()||(c=this.populatePositionals(r,n,i,a));let u=this.globalMiddleware.getMiddleware().slice(0).concat(r.middlewares);if(n=Ho(n,a,u,!0),!a.getInternalMethods().getHasOutput()){let l=a.getInternalMethods().runValidation(s,c,a.parsed.error,t);n=Bo(n,f=>(l(f),f))}if(r.handler&&!a.getInternalMethods().getHasOutput()){a.getInternalMethods().setHasOutput();let l=!!a.getOptions().configuration["populate--"];a.getInternalMethods().postProcess(n,l,!1,!1),n=Ho(n,a,u,!1),n=Bo(n,f=>{let d=r.handler(f);return tt(d)?d.then(()=>f):f}),t||a.getInternalMethods().getUsageInstance().cacheHelpMessage(),tt(n)&&!a.getInternalMethods().hasParseCallback()&&n.catch(f=>{try{a.getInternalMethods().getUsageInstance().fail(null,f)}catch(d){}})}return t||(i.commands.pop(),i.fullCommands.pop()),n}populatePositionals(t,r,n,i){r._=r._.slice(n.commands.length);let o=t.demanded.slice(0),s=t.optional.slice(0),a={};for(this.validation.positionalCount(o.length,r._.length);o.length;){let c=o.shift();this.populatePositional(c,r,a)}for(;s.length;){let c=s.shift();this.populatePositional(c,r,a)}return r._=n.commands.concat(r._.map(c=>""+c)),this.postProcessPositionals(r,a,this.cmdToParseOptions(t.original),i),a}populatePositional(t,r,n){let i=t.cmd[0];t.variadic?n[i]=r._.splice(0).map(String):r._.length&&(n[i]=[String(r._.shift())])}cmdToParseOptions(t){let r={array:[],default:{},alias:{},demand:{}},n=qi(t);return n.demanded.forEach(i=>{let[o,...s]=i.cmd;i.variadic&&(r.array.push(o),r.default[o]=[]),r.alias[o]=s,r.demand[o]=!0}),n.optional.forEach(i=>{let[o,...s]=i.cmd;i.variadic&&(r.array.push(o),r.default[o]=[]),r.alias[o]=s}),r}postProcessPositionals(t,r,n,i){let o=Object.assign({},i.getOptions());o.default=Object.assign(n.default,o.default);for(let u of Object.keys(n.alias))o.alias[u]=(o.alias[u]||[]).concat(n.alias[u]);o.array=o.array.concat(n.array),o.config={};let s=[];if(Object.keys(r).forEach(u=>{r[u].map(l=>{o.configuration["unknown-options-as-args"]&&(o.key[u]=!0),s.push(`--${u}`),s.push(l)})}),!s.length)return;let a=Object.assign({},o.configuration,{"populate--":!1}),c=this.shim.Parser.detailed(s,Object.assign({},o,{configuration:a}));if(c.error)i.getInternalMethods().getUsageInstance().fail(c.error.message,c.error);else{let u=Object.keys(r);Object.keys(r).forEach(l=>{u.push(...c.aliases[l])}),Object.keys(c.argv).forEach(l=>{u.indexOf(l)!==-1&&(r[l]||(r[l]=c.argv[l]),t[l]=c.argv[l])})}}runDefaultBuilderOn(t){if(!this.defaultCommand)return;if(this.shouldUpdateUsage(t)){let n=ha.test(this.defaultCommand.original)?this.defaultCommand.original:this.defaultCommand.original.replace(/^[^[\]<>]*/,"$0 ");t.getInternalMethods().getUsageInstance().usage(n,this.defaultCommand.description)}let r=this.defaultCommand.builder;if(rd(r))return r(t,!0);d0(r)||Object.keys(r).forEach(n=>{t.option(n,r[n])})}moduleName(t){let r=Og(t);if(!r)throw new Error(`No command name given for module: ${this.shim.inspect(t)}`);return this.commandFromFilename(r.filename)}commandFromFilename(t){return this.shim.path.basename(t,this.shim.path.extname(t))}extractDesc({describe:t,description:r,desc:n}){for(let i of[t,r,n]){if(typeof i=="string"||i===!1)return i;nr(i,!0,this.shim)}return!1}freeze(){this.frozens.push({handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand})}unfreeze(){let t=this.frozens.pop();nr(t,void 0,this.shim),{handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand}=t}reset(){return this.handlers={},this.aliasMap={},this.defaultCommand=void 0,this.requireCache=new Set,this}};function f0(e,t,r,n){return new l0(e,t,r,n)}function d0(e){return typeof e=="object"&&!!e.builder&&typeof e.handler=="function"}function sG(e){return e.every(t=>typeof t=="string")}function rd(e){return typeof e=="function"}function aG(e){return typeof e=="object"}function cG(e){return typeof e=="object"&&!Array.isArray(e)}function $i(e={},t=()=>!0){let r={};return pa(e).forEach(n=>{t(n,e[n])&&(r[n]=e[n])}),r}function ji(e){typeof process!="undefined"&&[process.stdout,process.stderr].forEach(t=>{let r=t;r._handle&&r.isTTY&&typeof r._handle.setBlocking=="function"&&r._handle.setBlocking(e)})}function uG(e){return typeof e=="boolean"}function h0(e,t){let r=t.y18n.__,n={},i=[];n.failFn=function(j){i.push(j)};let o=null,s=!0;n.showHelpOnFail=function(j=!0,X){function ae(){return typeof j=="string"?[!0,j]:[j,X]}let[B,O]=ae();return o=O,s=B,n};let a=!1;n.fail=function(j,X){let ae=e.getInternalMethods().getLoggerInstance();if(i.length)for(let B=i.length-1;B>=0;--B){let O=i[B];if(uG(O)){if(X)throw X;if(j)throw Error(j)}else O(j,X,n)}else{if(e.getExitProcess()&&ji(!0),a||(a=!0,s&&(e.showHelp("error"),ae.error()),(j||X)&&ae.error(j||X),o&&((j||X)&&ae.error(""),ae.error(o))),X=X||new Ve(j),e.getExitProcess())return e.exit(1);if(e.getInternalMethods().hasParseCallback())return e.exit(1,X);throw X}};let c=[],u=!1;n.usage=(U,j)=>U===null?(u=!0,c=[],n):(u=!1,c.push([U,j||""]),n),n.getUsage=()=>c,n.getUsageDisabled=()=>u,n.getPositionalGroupName=()=>r("Positionals:");let l=[];n.example=(U,j)=>{l.push([U,j||""])};let f=[];n.command=function(j,X,ae,B,O=!1){ae&&(f=f.map(x=>(x[2]=!1,x))),f.push([j,X||"",ae,B,O])},n.getCommands=()=>f;let d={};n.describe=function(j,X){Array.isArray(j)?j.forEach(ae=>{n.describe(ae,X)}):typeof j=="object"?Object.keys(j).forEach(ae=>{n.describe(ae,j[ae])}):d[j]=X},n.getDescriptions=()=>d;let p=[];n.epilog=U=>{p.push(U)};let h=!1,m;n.wrap=U=>{h=!0,m=U};function v(){return h||(m=H(),h=!0),m}let _="__yargsString__:";n.deferY18nLookup=U=>_+U,n.help=function(){if(T)return T;w();let j=e.customScriptName?e.$0:t.path.basename(e.$0),X=e.getDemandedOptions(),ae=e.getDemandedCommands(),B=e.getDeprecatedOptions(),O=e.getGroups(),x=e.getOptions(),D=[];D=D.concat(Object.keys(d)),D=D.concat(Object.keys(X)),D=D.concat(Object.keys(ae)),D=D.concat(Object.keys(x.default)),D=D.filter(P),D=Object.keys(D.reduce((se,Te)=>(Te!=="_"&&(se[Te]=!0),se),{}));let G=v(),re=t.cliui({width:G,wrap:!!G});if(!u){if(c.length)c.forEach(se=>{re.div(`${se[0].replace(/\$0/g,j)}`),se[1]&&re.div({text:`${se[1]}`,padding:[1,0,0,0]})}),re.div();else if(f.length){let se=null;ae._?se=`${j} <${r("command")}>
`:se=`${j} [${r("command")}]
`,re.div(`${se}`)}}if(f.length>1||f.length===1&&!f[0][2]){re.div(r("Commands:"));let se=e.getInternalMethods().getContext(),Te=se.commands.length?`${se.commands.join(" ")} `:"";e.getInternalMethods().getParserConfiguration()["sort-commands"]===!0&&(f=f.sort((ke,Ie)=>ke[0].localeCompare(Ie[0]))),f.forEach(ke=>{let Ie=`${j} ${Te}${ke[0].replace(/^\$0 ?/,"")}`;re.span({text:Ie,padding:[0,2,0,2],width:E(f,G,`${j}${Te}`)+4},{text:ke[1]});let wt=[];ke[2]&&wt.push(`[${r("default")}]`),ke[3]&&ke[3].length&&wt.push(`[${r("aliases:")} ${ke[3].join(", ")}]`),ke[4]&&(typeof ke[4]=="string"?wt.push(`[${r("deprecated: %s",ke[4])}]`):wt.push(`[${r("deprecated")}]`)),wt.length?re.div({text:wt.join(" "),padding:[0,0,0,2],align:"right"}):re.div()}),re.div()}let ue=(Object.keys(x.alias)||[]).concat(Object.keys(e.parsed.newAliases)||[]);D=D.filter(se=>!e.parsed.newAliases[se]&&ue.every(Te=>(x.alias[Te]||[]).indexOf(se)===-1));let ye=r("Options:");O[ye]||(O[ye]=[]),N(D,x.alias,O,ye);let K=se=>/^--/.test(nd(se)),ht=Object.keys(O).filter(se=>O[se].length>0).map(se=>{let Te=O[se].filter(P).map(ke=>{if(~ue.indexOf(ke))return ke;for(let Ie=0,wt;(wt=ue[Ie])!==void 0;Ie++)if(~(x.alias[wt]||[]).indexOf(ke))return wt;return ke});return{groupName:se,normalizedKeys:Te}}).filter(({normalizedKeys:se})=>se.length>0).map(({groupName:se,normalizedKeys:Te})=>{let ke=Te.reduce((Ie,wt)=>(Ie[wt]=[wt].concat(x.alias[wt]||[]).map(dr=>se===n.getPositionalGroupName()?dr:(/^[0-9]$/.test(dr)?~x.boolean.indexOf(wt)?"-":"--":dr.length>1?"--":"-")+dr).sort((dr,Pt)=>K(dr)===K(Pt)?0:K(dr)?1:-1).join(", "),Ie),{});return{groupName:se,normalizedKeys:Te,switches:ke}});if(ht.filter(({groupName:se})=>se!==n.getPositionalGroupName()).some(({normalizedKeys:se,switches:Te})=>!se.every(ke=>K(Te[ke])))&&ht.filter(({groupName:se})=>se!==n.getPositionalGroupName()).forEach(({normalizedKeys:se,switches:Te})=>{se.forEach(ke=>{K(Te[ke])&&(Te[ke]=lG(Te[ke],"-x, ".length))})}),ht.forEach(({groupName:se,normalizedKeys:Te,switches:ke})=>{re.div(se),Te.forEach(Ie=>{let wt=ke[Ie],dr=d[Ie]||"",Pt=null;~dr.lastIndexOf(_)&&(dr=r(dr.substring(_.length))),~x.boolean.indexOf(Ie)&&(Pt=`[${r("boolean")}]`),~x.count.indexOf(Ie)&&(Pt=`[${r("count")}]`),~x.string.indexOf(Ie)&&(Pt=`[${r("string")}]`),~x.normalize.indexOf(Ie)&&(Pt=`[${r("string")}]`),~x.array.indexOf(Ie)&&(Pt=`[${r("array")}]`),~x.number.indexOf(Ie)&&(Pt=`[${r("number")}]`);let wg=S=>typeof S=="string"?`[${r("deprecated: %s",S)}]`:`[${r("deprecated")}]`,C=[Ie in B?wg(B[Ie]):null,Pt,Ie in X?`[${r("required")}]`:null,x.choices&&x.choices[Ie]?`[${r("choices:")} ${n.stringifiedValues(x.choices[Ie])}]`:null,z(x.default[Ie],x.defaultDescription[Ie])].filter(Boolean).join(" ");re.span({text:nd(wt),padding:[0,2,0,2+m0(wt)],width:E(ke,G)+4},dr),C?re.div({text:C,padding:[0,0,0,2],align:"right"}):re.div()}),re.div()}),l.length&&(re.div(r("Examples:")),l.forEach(se=>{se[0]=se[0].replace(/\$0/g,j)}),l.forEach(se=>{se[1]===""?re.div({text:se[0],padding:[0,2,0,2]}):re.div({text:se[0],padding:[0,2,0,2],width:E(l,G)+4},{text:se[1]})}),re.div()),p.length>0){let se=p.map(Te=>Te.replace(/\$0/g,j)).join(`
`);re.div(`${se}
`)}return re.toString().replace(/\s*$/,"")};function E(U,j,X){let ae=0;return Array.isArray(U)||(U=Object.values(U).map(B=>[B])),U.forEach(B=>{ae=Math.max(t.stringWidth(X?`${X} ${nd(B[0])}`:nd(B[0]))+m0(B[0]),ae)}),j&&(ae=Math.min(ae,parseInt((j*.5).toString(),10))),ae}function w(){let U=e.getDemandedOptions(),j=e.getOptions();(Object.keys(j.alias)||[]).forEach(X=>{j.alias[X].forEach(ae=>{d[ae]&&n.describe(X,d[ae]),ae in U&&e.demandOption(X,U[ae]),~j.boolean.indexOf(ae)&&e.boolean(X),~j.count.indexOf(ae)&&e.count(X),~j.string.indexOf(ae)&&e.string(X),~j.normalize.indexOf(ae)&&e.normalize(X),~j.array.indexOf(ae)&&e.array(X),~j.number.indexOf(ae)&&e.number(X)})})}let T;n.cacheHelpMessage=function(){T=this.help()},n.clearCachedHelpMessage=function(){T=void 0},n.hasCachedHelpMessage=function(){return!!T};function N(U,j,X,ae){let B=[],O=null;return Object.keys(X).forEach(x=>{B=B.concat(X[x])}),U.forEach(x=>{O=[x].concat(j[x]),O.some(D=>B.indexOf(D)!==-1)||X[ae].push(x)}),B}function P(U){return e.getOptions().hiddenOptions.indexOf(U)<0||e.parsed.argv[e.getOptions().showHiddenOpt]}n.showHelp=U=>{let j=e.getInternalMethods().getLoggerInstance();U||(U="error"),(typeof U=="function"?U:j[U])(n.help())},n.functionDescription=U=>{let j=U.name?t.Parser.decamelize(U.name,"-"):r("generated-value");return["(",j,")"].join("")},n.stringifiedValues=function(j,X){let ae="",B=X||", ",O=[].concat(j);return!j||!O.length||O.forEach(x=>{ae.length&&(ae+=B),ae+=JSON.stringify(x)}),ae};function z(U,j){let X=`[${r("default:")} `;if(U===void 0&&!j)return null;if(j)X+=j;else switch(typeof U){case"string":X+=`"${U}"`;break;case"object":X+=JSON.stringify(U);break;default:X+=U}return`${X}]`}function H(){let U=80;return t.process.stdColumns?Math.min(U,t.process.stdColumns):U}let R=null;n.version=U=>{R=U},n.showVersion=U=>{let j=e.getInternalMethods().getLoggerInstance();U||(U="error"),(typeof U=="function"?U:j[U])(R)},n.reset=function(j){return o=null,a=!1,c=[],u=!1,p=[],l=[],f=[],d=$i(d,X=>!j[X]),n};let Y=[];return n.freeze=function(){Y.push({failMessage:o,failureOutput:a,usages:c,usageDisabled:u,epilogs:p,examples:l,commands:f,descriptions:d})},n.unfreeze=function(){let j=Y.pop();!j||({failMessage:o,failureOutput:a,usages:c,usageDisabled:u,epilogs:p,examples:l,commands:f,descriptions:d}=j)},n}function Dg(e){return typeof e=="object"}function lG(e,t){return Dg(e)?{text:e.text,indentation:e.indentation+t}:{text:e,indentation:t}}function m0(e){return Dg(e)?e.indentation:0}function nd(e){return Dg(e)?e.text:e}var g0=`###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.bashrc
#    or {{app_path}} {{completion_command}} >> ~/.bash_profile on OSX.
#
_{{app_name}}_yargs_completions()
{
    local cur_word args type_list

    cur_word="\${COMP_WORDS[COMP_CWORD]}"
    args=("\${COMP_WORDS[@]}")

    # ask yargs to generate completions.
    type_list=$({{app_path}} --get-yargs-completions "\${args[@]}")

    COMPREPLY=( $(compgen -W "\${type_list}" -- \${cur_word}) )

    # if no match was found, fall back to filename completion
    if [ \${#COMPREPLY[@]} -eq 0 ]; then
      COMPREPLY=()
    fi

    return 0
}
complete -o default -F _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`,v0=`#compdef {{app_name}}
###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.zshrc
#    or {{app_path}} {{completion_command}} >> ~/.zsh_profile on OSX.
#
_{{app_name}}_yargs_completions()
{
  local reply
  local si=$IFS
  IFS=$'
' reply=($(COMP_CWORD="$((CURRENT-1))" COMP_LINE="$BUFFER" COMP_POINT="$CURSOR" {{app_path}} --get-yargs-completions "\${words[@]}"))
  IFS=$si
  _describe 'values' reply
}
compdef _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`;var y0=class{constructor(t,r,n,i){var o,s,a;this.yargs=t,this.usage=r,this.command=n,this.shim=i,this.completionKey="get-yargs-completions",this.aliases=null,this.customCompletionFunction=null,this.zshShell=(a=((o=this.shim.getEnv("SHELL"))===null||o===void 0?void 0:o.includes("zsh"))||((s=this.shim.getEnv("ZSH_NAME"))===null||s===void 0?void 0:s.includes("zsh")))!==null&&a!==void 0?a:!1}defaultCompletion(t,r,n,i){let o=this.command.getCommandHandlers();for(let a=0,c=t.length;a<c;++a)if(o[t[a]]&&o[t[a]].builder){let u=o[t[a]].builder;if(rd(u)){let l=this.yargs.getInternalMethods().reset();return u(l,!0),l.argv}}let s=[];this.commandCompletions(s,t,n),this.optionCompletions(s,t,r,n),i(null,s)}commandCompletions(t,r,n){let i=this.yargs.getInternalMethods().getContext().commands;!n.match(/^-/)&&i[i.length-1]!==n&&this.usage.getCommands().forEach(o=>{let s=qi(o[0]).cmd;if(r.indexOf(s)===-1)if(!this.zshShell)t.push(s);else{let a=o[1]||"";t.push(s.replace(/:/g,"\\:")+":"+a)}})}optionCompletions(t,r,n,i){if(i.match(/^-/)||i===""&&t.length===0){let o=this.yargs.getOptions(),s=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[];Object.keys(o.key).forEach(a=>{let c=!!o.configuration["boolean-negation"]&&o.boolean.includes(a);!s.includes(a)&&!this.argsContainKey(r,n,a,c)&&(this.completeOptionKey(a,t,i),c&&!!o.default[a]&&this.completeOptionKey(`no-${a}`,t,i))})}}argsContainKey(t,r,n,i){if(t.indexOf(`--${n}`)!==-1||i&&t.indexOf(`--no-${n}`)!==-1)return!0;if(this.aliases){for(let o of this.aliases[n])if(r[o]!==void 0)return!0}return!1}completeOptionKey(t,r,n){let i=this.usage.getDescriptions(),o=c=>/^--/.test(c),s=c=>/^[^0-9]$/.test(c),a=!o(n)&&s(t)?"-":"--";if(!this.zshShell)r.push(a+t);else{let c=i[t]||"";r.push(a+`${t.replace(/:/g,"\\:")}:${c.replace("__yargsString__:","")}`)}}customCompletion(t,r,n,i){if(nr(this.customCompletionFunction,null,this.shim),fG(this.customCompletionFunction)){let o=this.customCompletionFunction(n,r);return tt(o)?o.then(s=>{this.shim.process.nextTick(()=>{i(null,s)})}).catch(s=>{this.shim.process.nextTick(()=>{i(s,void 0)})}):i(null,o)}else return dG(this.customCompletionFunction)?this.customCompletionFunction(n,r,(o=i)=>this.defaultCompletion(t,r,n,o),o=>{i(null,o)}):this.customCompletionFunction(n,r,o=>{i(null,o)})}getCompletion(t,r){let n=t.length?t[t.length-1]:"",i=this.yargs.parse(t,!0),o=this.customCompletionFunction?s=>this.customCompletion(t,s,n,r):s=>this.defaultCompletion(t,s,n,r);return tt(i)?i.then(o):o(i)}generateCompletionScript(t,r){let n=this.zshShell?v0:g0,i=this.shim.path.basename(t);return t.match(/\.js$/)&&(t=`./${t}`),n=n.replace(/{{app_name}}/g,i),n=n.replace(/{{completion_command}}/g,r),n.replace(/{{app_path}}/g,t)}registerFunction(t){this.customCompletionFunction=t}setParsed(t){this.aliases=t.aliases}};function E0(e,t,r,n){return new y0(e,t,r,n)}function fG(e){return e.length<3}function dG(e){return e.length>3}function _0(e,t){if(e.length===0)return t.length;if(t.length===0)return e.length;let r=[],n;for(n=0;n<=t.length;n++)r[n]=[n];let i;for(i=0;i<=e.length;i++)r[0][i]=i;for(n=1;n<=t.length;n++)for(i=1;i<=e.length;i++)t.charAt(n-1)===e.charAt(i-1)?r[n][i]=r[n-1][i-1]:r[n][i]=Math.min(r[n-1][i-1]+1,Math.min(r[n][i-1]+1,r[n-1][i]+1));return r[t.length][e.length]}var C0=["$0","--","_"];function w0(e,t,r){let n=r.y18n.__,i=r.y18n.__n,o={};o.nonOptionCount=function(f){let d=e.getDemandedCommands(),h=f._.length+(f["--"]?f["--"].length:0)-e.getInternalMethods().getContext().commands.length;d._&&(h<d._.min||h>d._.max)&&(h<d._.min?d._.minMsg!==void 0?t.fail(d._.minMsg?d._.minMsg.replace(/\$0/g,h.toString()).replace(/\$1/,d._.min.toString()):null):t.fail(i("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",h,h.toString(),d._.min.toString())):h>d._.max&&(d._.maxMsg!==void 0?t.fail(d._.maxMsg?d._.maxMsg.replace(/\$0/g,h.toString()).replace(/\$1/,d._.max.toString()):null):t.fail(i("Too many non-option arguments: got %s, maximum of %s","Too many non-option arguments: got %s, maximum of %s",h,h.toString(),d._.max.toString()))))},o.positionalCount=function(f,d){d<f&&t.fail(i("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",d,d+"",f+""))},o.requiredArguments=function(f,d){let p=null;for(let h of Object.keys(d))(!Object.prototype.hasOwnProperty.call(f,h)||typeof f[h]=="undefined")&&(p=p||{},p[h]=d[h]);if(p){let h=[];for(let v of Object.keys(p)){let _=p[v];_&&h.indexOf(_)<0&&h.push(_)}let m=h.length?`
${h.join(`
`)}`:"";t.fail(i("Missing required argument: %s","Missing required arguments: %s",Object.keys(p).length,Object.keys(p).join(", ")+m))}},o.unknownArguments=function(f,d,p,h,m=!0){let v=e.getInternalMethods().getCommandInstance().getCommands(),_=[],E=e.getInternalMethods().getContext();Object.keys(f).forEach(w=>{C0.indexOf(w)===-1&&!Object.prototype.hasOwnProperty.call(p,w)&&!Object.prototype.hasOwnProperty.call(e.getInternalMethods().getParseContext(),w)&&!o.isValidAndSomeAliasIsNotNew(w,d)&&_.push(w)}),m&&(E.commands.length>0||v.length>0||h)&&f._.slice(E.commands.length).forEach(w=>{v.indexOf(""+w)===-1&&_.push(""+w)}),_.length>0&&t.fail(i("Unknown argument: %s","Unknown arguments: %s",_.length,_.join(", ")))},o.unknownCommands=function(f){let d=e.getInternalMethods().getCommandInstance().getCommands(),p=[],h=e.getInternalMethods().getContext();return(h.commands.length>0||d.length>0)&&f._.slice(h.commands.length).forEach(m=>{d.indexOf(""+m)===-1&&p.push(""+m)}),p.length>0?(t.fail(i("Unknown command: %s","Unknown commands: %s",p.length,p.join(", "))),!0):!1},o.isValidAndSomeAliasIsNotNew=function(f,d){if(!Object.prototype.hasOwnProperty.call(d,f))return!1;let p=e.parsed.newAliases;return[f,...d[f]].some(h=>!Object.prototype.hasOwnProperty.call(p,h)||!p[f])},o.limitedChoices=function(f){let d=e.getOptions(),p={};if(!Object.keys(d.choices).length)return;Object.keys(f).forEach(v=>{C0.indexOf(v)===-1&&Object.prototype.hasOwnProperty.call(d.choices,v)&&[].concat(f[v]).forEach(_=>{d.choices[v].indexOf(_)===-1&&_!==void 0&&(p[v]=(p[v]||[]).concat(_))})});let h=Object.keys(p);if(!h.length)return;let m=n("Invalid values:");h.forEach(v=>{m+=`
  ${n("Argument: %s, Given: %s, Choices: %s",v,t.stringifiedValues(p[v]),t.stringifiedValues(d.choices[v]))}`}),t.fail(m)};let s={};o.implies=function(f,d){Q("<string|object> [array|number|string]",[f,d],arguments.length),typeof f=="object"?Object.keys(f).forEach(p=>{o.implies(p,f[p])}):(e.global(f),s[f]||(s[f]=[]),Array.isArray(d)?d.forEach(p=>o.implies(f,p)):(nr(d,void 0,r),s[f].push(d)))},o.getImplied=function(){return s};function a(l,f){let d=Number(f);return f=isNaN(d)?f:d,typeof f=="number"?f=l._.length>=f:f.match(/^--no-.+/)?(f=f.match(/^--no-(.+)/)[1],f=!l[f]):f=l[f],f}o.implications=function(f){let d=[];if(Object.keys(s).forEach(p=>{let h=p;(s[p]||[]).forEach(m=>{let v=h,_=m;v=a(f,v),m=a(f,m),v&&!m&&d.push(` ${h} -> ${_}`)})}),d.length){let p=`${n("Implications failed:")}
`;d.forEach(h=>{p+=h}),t.fail(p)}};let c={};o.conflicts=function(f,d){Q("<string|object> [array|string]",[f,d],arguments.length),typeof f=="object"?Object.keys(f).forEach(p=>{o.conflicts(p,f[p])}):(e.global(f),c[f]||(c[f]=[]),Array.isArray(d)?d.forEach(p=>o.conflicts(f,p)):c[f].push(d))},o.getConflicting=()=>c,o.conflicting=function(f){Object.keys(f).forEach(d=>{c[d]&&c[d].forEach(p=>{p&&f[d]!==void 0&&f[p]!==void 0&&t.fail(n("Arguments %s and %s are mutually exclusive",d,p))})})},o.recommendCommands=function(f,d){let p=3;d=d.sort((v,_)=>_.length-v.length);let h=null,m=1/0;for(let v=0,_;(_=d[v])!==void 0;v++){let E=_0(f,_);E<=p&&E<m&&(m=E,h=_)}h&&t.fail(n("Did you mean %s?",h))},o.reset=function(f){return s=$i(s,d=>!f[d]),c=$i(c,d=>!f[d]),o};let u=[];return o.freeze=function(){u.push({implied:s,conflicting:c})},o.unfreeze=function(){let f=u.pop();nr(f,void 0,r),{implied:s,conflicting:c}=f},o}var Ng=[],_u;function id(e,t,r,n){_u=n;let i={};if(Object.prototype.hasOwnProperty.call(e,"extends")){if(typeof e.extends!="string")return i;let o=/\.json|\..*rc$/.test(e.extends),s=null;if(o)s=hG(t,e.extends);else try{s=require.resolve(e.extends)}catch(a){return e}pG(s),Ng.push(s),i=o?JSON.parse(_u.readFileSync(s,"utf8")):require(e.extends),delete e.extends,i=id(i,_u.path.dirname(s),r,_u)}return Ng=[],r?S0(i,e):Object.assign({},i,e)}function pG(e){if(Ng.indexOf(e)>-1)throw new Ve(`Circular extended configurations: '${e}'.`)}function hG(e,t){return _u.path.resolve(e,t)}function S0(e,t){let r={};function n(i){return i&&typeof i=="object"&&!Array.isArray(i)}Object.assign(r,e);for(let i of Object.keys(t))n(t[i])&&n(r[i])?r[i]=S0(e[i],t[i]):r[i]=t[i];return r}var ee=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r},y=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},mt,Go,Cu,zr,Tr,od,Ui,Wo,Kr,sd,Yr,qn,Ar,Xr,ma,Lt,ne,ad,cd,Ir,Vo,ga,zo,Hi,ud,de,Ko,Yo,Xo,he,ii,ft;function b0(e){return(t=[],r=e.process.cwd(),n)=>{let i=new U0(t,r,n,e);return Object.defineProperty(i,"argv",{get:()=>i.parse(),enumerable:!0}),i.help(),i.version(),i}}var x0=Symbol("copyDoubleDash"),T0=Symbol("copyDoubleDash"),Lg=Symbol("deleteFromParserHintObject"),A0=Symbol("freeze"),I0=Symbol("getDollarZero"),Qo=Symbol("getParserConfiguration"),kg=Symbol("guessLocale"),R0=Symbol("guessVersion"),P0=Symbol("parsePositionalNumbers"),Fg=Symbol("pkgUp"),Bi=Symbol("populateParserHintArray"),va=Symbol("populateParserHintSingleValueDictionary"),Mg=Symbol("populateParserHintArrayDictionary"),qg=Symbol("populateParserHintDictionary"),$g=Symbol("sanitizeKey"),jg=Symbol("setKey"),Ug=Symbol("unfreeze"),O0=Symbol("validateAsync"),D0=Symbol("getCommandInstance"),N0=Symbol("getContext"),L0=Symbol("getHasOutput"),k0=Symbol("getLoggerInstance"),F0=Symbol("getParseContext"),M0=Symbol("getUsageInstance"),q0=Symbol("getValidationInstance"),ld=Symbol("hasParseCallback"),Jo=Symbol("postProcess"),$0=Symbol("rebase"),Hg=Symbol("reset"),wu=Symbol("runYargsParserAndExecuteCommands"),Bg=Symbol("runValidation"),j0=Symbol("setHasOutput"),U0=class{constructor(t=[],r,n,i){this.customScriptName=!1,this.parsed=!1,mt.set(this,void 0),Go.set(this,void 0),Cu.set(this,{commands:[],fullCommands:[]}),zr.set(this,null),Tr.set(this,null),od.set(this,"show-hidden"),Ui.set(this,null),Wo.set(this,!0),Kr.set(this,!0),sd.set(this,[]),Yr.set(this,void 0),qn.set(this,{}),Ar.set(this,!1),Xr.set(this,null),ma.set(this,void 0),Lt.set(this,""),ne.set(this,void 0),ad.set(this,void 0),cd.set(this,{}),Ir.set(this,null),Vo.set(this,null),ga.set(this,{}),zo.set(this,{}),Hi.set(this,void 0),ud.set(this,!1),de.set(this,void 0),Ko.set(this,!1),Yo.set(this,!1),Xo.set(this,!1),he.set(this,void 0),ii.set(this,null),ft.set(this,void 0),ee(this,de,i),ee(this,Hi,t),ee(this,Go,r),ee(this,ad,n),ee(this,Yr,new Pg(this)),this.$0=this[I0](),this[Hg](),ee(this,mt,y(this,mt)),ee(this,he,y(this,he)),ee(this,ft,y(this,ft)),ee(this,ne,y(this,ne)),y(this,ne).showHiddenOpt=y(this,od),ee(this,ma,this[T0]())}addHelpOpt(t,r){let n="help";return Q("[string|boolean] [string]",[t,r],arguments.length),y(this,Xr)&&(this[Lg](y(this,Xr)),ee(this,Xr,null)),t===!1&&r===void 0?this:(ee(this,Xr,typeof t=="string"?t:n),this.boolean(y(this,Xr)),this.describe(y(this,Xr),r||y(this,he).deferY18nLookup("Show help")),this)}help(t,r){return this.addHelpOpt(t,r)}addShowHiddenOpt(t,r){if(Q("[string|boolean] [string]",[t,r],arguments.length),t===!1&&r===void 0)return this;let n=typeof t=="string"?t:y(this,od);return this.boolean(n),this.describe(n,r||y(this,he).deferY18nLookup("Show hidden options")),y(this,ne).showHiddenOpt=n,this}showHidden(t,r){return this.addShowHiddenOpt(t,r)}alias(t,r){return Q("<object|string|array> [string|array]",[t,r],arguments.length),this[Mg](this.alias.bind(this),"alias",t,r),this}array(t){return Q("<array|string>",[t],arguments.length),this[Bi]("array",t),this}boolean(t){return Q("<array|string>",[t],arguments.length),this[Bi]("boolean",t),this}check(t,r){return Q("<function> [boolean]",[t,r],arguments.length),this.middleware((n,i)=>Bo(()=>t(n),o=>(o?(typeof o=="string"||o instanceof Error)&&y(this,he).fail(o.toString(),o):y(this,he).fail(y(this,de).y18n.__("Argument check failed: %s",t.toString())),n),o=>(y(this,he).fail(o.message?o.message:o.toString(),o),n)),!1,r),this}choices(t,r){return Q("<object|string|array> [string|array]",[t,r],arguments.length),this[Mg](this.choices.bind(this),"choices",t,r),this}coerce(t,r){if(Q("<object|string|array> [function]",[t,r],arguments.length),Array.isArray(t)){if(!r)throw new Ve("coerce callback must be provided");for(let n of t)this.coerce(n,r);return this}else if(typeof t=="object"){for(let n of Object.keys(t))this.coerce(n,t[n]);return this}if(!r)throw new Ve("coerce callback must be provided");return y(this,ne).key[t]=!0,y(this,Yr).addCoerceMiddleware((n,i)=>{let o;return Bo(()=>(o=i.getAliases(),r(n[t])),s=>{if(n[t]=s,o[t])for(let a of o[t])n[a]=s;return n},s=>{throw new Ve(s.message)})},t),this}conflicts(t,r){return Q("<string|object> [string|array]",[t,r],arguments.length),y(this,ft).conflicts(t,r),this}config(t="config",r,n){return Q("[object|string] [string|function] [function]",[t,r,n],arguments.length),typeof t=="object"&&!Array.isArray(t)?(t=id(t,y(this,Go),this[Qo]()["deep-merge-config"]||!1,y(this,de)),y(this,ne).configObjects=(y(this,ne).configObjects||[]).concat(t),this):(typeof r=="function"&&(n=r,r=void 0),this.describe(t,r||y(this,he).deferY18nLookup("Path to JSON config file")),(Array.isArray(t)?t:[t]).forEach(i=>{y(this,ne).config[i]=n||!0}),this)}completion(t,r,n){return Q("[string] [string|boolean|function] [function]",[t,r,n],arguments.length),typeof r=="function"&&(n=r,r=void 0),ee(this,Tr,t||y(this,Tr)||"completion"),!r&&r!==!1&&(r="generate completion script"),this.command(y(this,Tr),r),n&&y(this,zr).registerFunction(n),this}command(t,r,n,i,o,s){return Q("<string|array|object> [string|boolean] [function|object] [function] [array] [boolean|string]",[t,r,n,i,o,s],arguments.length),y(this,mt).addHandler(t,r,n,i,o,s),this}commands(t,r,n,i,o,s){return this.command(t,r,n,i,o,s)}commandDir(t,r){Q("<string> [object]",[t,r],arguments.length);let n=y(this,ad)||y(this,de).require;return y(this,mt).addDirectory(t,n,y(this,de).getCallerFile(),r),this}count(t){return Q("<array|string>",[t],arguments.length),this[Bi]("count",t),this}default(t,r,n){return Q("<object|string|array> [*] [string]",[t,r,n],arguments.length),n&&(Rg(t,y(this,de)),y(this,ne).defaultDescription[t]=n),typeof r=="function"&&(Rg(t,y(this,de)),y(this,ne).defaultDescription[t]||(y(this,ne).defaultDescription[t]=y(this,he).functionDescription(r)),r=r.call()),this[va](this.default.bind(this),"default",t,r),this}defaults(t,r,n){return this.default(t,r,n)}demandCommand(t=1,r,n,i){return Q("[number] [number|string] [string|null|undefined] [string|null|undefined]",[t,r,n,i],arguments.length),typeof r!="number"&&(n=r,r=1/0),this.global("_",!1),y(this,ne).demandedCommands._={min:t,max:r,minMsg:n,maxMsg:i},this}demand(t,r,n){return Array.isArray(r)?(r.forEach(i=>{nr(n,!0,y(this,de)),this.demandOption(i,n)}),r=1/0):typeof r!="number"&&(n=r,r=1/0),typeof t=="number"?(nr(n,!0,y(this,de)),this.demandCommand(t,r,n,n)):Array.isArray(t)?t.forEach(i=>{nr(n,!0,y(this,de)),this.demandOption(i,n)}):typeof n=="string"?this.demandOption(t,n):(n===!0||typeof n=="undefined")&&this.demandOption(t),this}demandOption(t,r){return Q("<object|string|array> [string]",[t,r],arguments.length),this[va](this.demandOption.bind(this),"demandedOptions",t,r),this}deprecateOption(t,r){return Q("<string> [string|boolean]",[t,r],arguments.length),y(this,ne).deprecatedOptions[t]=r,this}describe(t,r){return Q("<object|string|array> [string]",[t,r],arguments.length),this[jg](t,!0),y(this,he).describe(t,r),this}detectLocale(t){return Q("<boolean>",[t],arguments.length),ee(this,Wo,t),this}env(t){return Q("[string|boolean]",[t],arguments.length),t===!1?delete y(this,ne).envPrefix:y(this,ne).envPrefix=t||"",this}epilogue(t){return Q("<string>",[t],arguments.length),y(this,he).epilog(t),this}epilog(t){return this.epilogue(t)}example(t,r){return Q("<string|array> [string]",[t,r],arguments.length),Array.isArray(t)?t.forEach(n=>this.example(...n)):y(this,he).example(t,r),this}exit(t,r){ee(this,Ar,!0),ee(this,Ui,r),y(this,Kr)&&y(this,de).process.exit(t)}exitProcess(t=!0){return Q("[boolean]",[t],arguments.length),ee(this,Kr,t),this}fail(t){if(Q("<function|boolean>",[t],arguments.length),typeof t=="boolean"&&t!==!1)throw new Ve("Invalid first argument. Expected function or boolean 'false'");return y(this,he).failFn(t),this}getAliases(){return this.parsed?this.parsed.aliases:{}}async getCompletion(t,r){return Q("<array> [function]",[t,r],arguments.length),r?y(this,zr).getCompletion(t,r):new Promise((n,i)=>{y(this,zr).getCompletion(t,(o,s)=>{o?i(o):n(s)})})}getDemandedOptions(){return Q([],0),y(this,ne).demandedOptions}getDemandedCommands(){return Q([],0),y(this,ne).demandedCommands}getDeprecatedOptions(){return Q([],0),y(this,ne).deprecatedOptions}getDetectLocale(){return y(this,Wo)}getExitProcess(){return y(this,Kr)}getGroups(){return Object.assign({},y(this,qn),y(this,zo))}getHelp(){if(ee(this,Ar,!0),!y(this,he).hasCachedHelpMessage()){if(!this.parsed){let r=this[wu](y(this,Hi),void 0,void 0,0,!0);if(tt(r))return r.then(()=>y(this,he).help())}let t=y(this,mt).runDefaultBuilderOn(this);if(tt(t))return t.then(()=>y(this,he).help())}return Promise.resolve(y(this,he).help())}getOptions(){return y(this,ne)}getStrict(){return y(this,Ko)}getStrictCommands(){return y(this,Yo)}getStrictOptions(){return y(this,Xo)}global(t,r){return Q("<string|array> [boolean]",[t,r],arguments.length),t=[].concat(t),r!==!1?y(this,ne).local=y(this,ne).local.filter(n=>t.indexOf(n)===-1):t.forEach(n=>{y(this,ne).local.indexOf(n)===-1&&y(this,ne).local.push(n)}),this}group(t,r){Q("<string|array> <string>",[t,r],arguments.length);let n=y(this,zo)[r]||y(this,qn)[r];y(this,zo)[r]&&delete y(this,zo)[r];let i={};return y(this,qn)[r]=(n||[]).concat(t).filter(o=>i[o]?!1:i[o]=!0),this}hide(t){return Q("<string>",[t],arguments.length),y(this,ne).hiddenOptions.push(t),this}implies(t,r){return Q("<string|object> [number|string|array]",[t,r],arguments.length),y(this,ft).implies(t,r),this}locale(t){return Q("[string]",[t],arguments.length),t?(ee(this,Wo,!1),y(this,de).y18n.setLocale(t),this):(this[kg](),y(this,de).y18n.getLocale())}middleware(t,r,n){return y(this,Yr).addMiddleware(t,!!r,n)}nargs(t,r){return Q("<string|object|array> [number]",[t,r],arguments.length),this[va](this.nargs.bind(this),"narg",t,r),this}normalize(t){return Q("<array|string>",[t],arguments.length),this[Bi]("normalize",t),this}number(t){return Q("<array|string>",[t],arguments.length),this[Bi]("number",t),this}option(t,r){if(Q("<string|object> [object]",[t,r],arguments.length),typeof t=="object")Object.keys(t).forEach(n=>{this.options(n,t[n])});else{typeof r!="object"&&(r={}),y(this,ne).key[t]=!0,r.alias&&this.alias(t,r.alias);let n=r.deprecate||r.deprecated;n&&this.deprecateOption(t,n);let i=r.demand||r.required||r.require;i&&this.demand(t,i),r.demandOption&&this.demandOption(t,typeof r.demandOption=="string"?r.demandOption:void 0),r.conflicts&&this.conflicts(t,r.conflicts),"default"in r&&this.default(t,r.default),r.implies!==void 0&&this.implies(t,r.implies),r.nargs!==void 0&&this.nargs(t,r.nargs),r.config&&this.config(t,r.configParser),r.normalize&&this.normalize(t),r.choices&&this.choices(t,r.choices),r.coerce&&this.coerce(t,r.coerce),r.group&&this.group(t,r.group),(r.boolean||r.type==="boolean")&&(this.boolean(t),r.alias&&this.boolean(r.alias)),(r.array||r.type==="array")&&(this.array(t),r.alias&&this.array(r.alias)),(r.number||r.type==="number")&&(this.number(t),r.alias&&this.number(r.alias)),(r.string||r.type==="string")&&(this.string(t),r.alias&&this.string(r.alias)),(r.count||r.type==="count")&&this.count(t),typeof r.global=="boolean"&&this.global(t,r.global),r.defaultDescription&&(y(this,ne).defaultDescription[t]=r.defaultDescription),r.skipValidation&&this.skipValidation(t);let o=r.describe||r.description||r.desc;this.describe(t,o),r.hidden&&this.hide(t),r.requiresArg&&this.requiresArg(t)}return this}options(t,r){return this.option(t,r)}parse(t,r,n){Q("[string|array] [function|boolean|object] [function]",[t,r,n],arguments.length),this[A0](),typeof t=="undefined"&&(t=y(this,Hi)),typeof r=="object"&&(ee(this,Vo,r),r=n),typeof r=="function"&&(ee(this,Ir,r),r=!1),r||ee(this,Hi,t),y(this,Ir)&&ee(this,Kr,!1);let i=this[wu](t,!!r),o=this.parsed;return y(this,zr).setParsed(this.parsed),tt(i)?i.then(s=>(y(this,Ir)&&y(this,Ir).call(this,y(this,Ui),s,y(this,Lt)),s)).catch(s=>{throw y(this,Ir)&&y(this,Ir)(s,this.parsed.argv,y(this,Lt)),s}).finally(()=>{this[Ug](),this.parsed=o}):(y(this,Ir)&&y(this,Ir).call(this,y(this,Ui),i,y(this,Lt)),this[Ug](),this.parsed=o,i)}parseAsync(t,r,n){let i=this.parse(t,r,n);return tt(i)?i:Promise.resolve(i)}parseSync(t,r,n){let i=this.parse(t,r,n);if(tt(i))throw new Ve(".parseSync() must not be used with asynchronous builders, handlers, or middleware");return i}parserConfiguration(t){return Q("<object>",[t],arguments.length),ee(this,cd,t),this}pkgConf(t,r){Q("<string> [string]",[t,r],arguments.length);let n=null,i=this[Fg](r||y(this,Go));return i[t]&&typeof i[t]=="object"&&(n=id(i[t],r||y(this,Go),this[Qo]()["deep-merge-config"]||!1,y(this,de)),y(this,ne).configObjects=(y(this,ne).configObjects||[]).concat(n)),this}positional(t,r){Q("<string> <object>",[t,r],arguments.length);let n=["default","defaultDescription","implies","normalize","choices","conflicts","coerce","type","describe","desc","description","alias"];r=$i(r,(s,a)=>{let c=n.indexOf(s)!==-1;return s==="type"&&["string","number","boolean"].indexOf(a)===-1&&(c=!1),c});let i=y(this,Cu).fullCommands[y(this,Cu).fullCommands.length-1],o=i?y(this,mt).cmdToParseOptions(i):{array:[],alias:{},default:{},demand:{}};return pa(o).forEach(s=>{let a=o[s];Array.isArray(a)?a.indexOf(t)!==-1&&(r[s]=!0):a[t]&&!(s in r)&&(r[s]=a[t])}),this.group(t,y(this,he).getPositionalGroupName()),this.option(t,r)}recommendCommands(t=!0){return Q("[boolean]",[t],arguments.length),ee(this,ud,t),this}required(t,r,n){return this.demand(t,r,n)}require(t,r,n){return this.demand(t,r,n)}requiresArg(t){return Q("<array|string|object> [number]",[t],arguments.length),typeof t=="string"&&y(this,ne).narg[t]?this:(this[va](this.requiresArg.bind(this),"narg",t,NaN),this)}showCompletionScript(t,r){return Q("[string] [string]",[t,r],arguments.length),t=t||this.$0,y(this,ma).log(y(this,zr).generateCompletionScript(t,r||y(this,Tr)||"completion")),this}showHelp(t){if(Q("[string|function]",[t],arguments.length),ee(this,Ar,!0),!y(this,he).hasCachedHelpMessage()){if(!this.parsed){let n=this[wu](y(this,Hi),void 0,void 0,0,!0);if(tt(n))return n.then(()=>{y(this,he).showHelp(t)}),this}let r=y(this,mt).runDefaultBuilderOn(this);if(tt(r))return r.then(()=>{y(this,he).showHelp(t)}),this}return y(this,he).showHelp(t),this}scriptName(t){return this.customScriptName=!0,this.$0=t,this}showHelpOnFail(t,r){return Q("[boolean|string] [string]",[t,r],arguments.length),y(this,he).showHelpOnFail(t,r),this}showVersion(t){return Q("[string|function]",[t],arguments.length),y(this,he).showVersion(t),this}skipValidation(t){return Q("<array|string>",[t],arguments.length),this[Bi]("skipValidation",t),this}strict(t){return Q("[boolean]",[t],arguments.length),ee(this,Ko,t!==!1),this}strictCommands(t){return Q("[boolean]",[t],arguments.length),ee(this,Yo,t!==!1),this}strictOptions(t){return Q("[boolean]",[t],arguments.length),ee(this,Xo,t!==!1),this}string(t){return Q("<array|string>",[t],arguments.length),this[Bi]("string",t),this}terminalWidth(){return Q([],0),y(this,de).process.stdColumns}updateLocale(t){return this.updateStrings(t)}updateStrings(t){return Q("<object>",[t],arguments.length),ee(this,Wo,!1),y(this,de).y18n.updateLocale(t),this}usage(t,r,n,i){if(Q("<string|null|undefined> [string|boolean] [function|object] [function]",[t,r,n,i],arguments.length),r!==void 0){if(nr(t,null,y(this,de)),(t||"").match(/^\$0( |$)/))return this.command(t,r,n,i);throw new Ve(".usage() description must start with $0 if being used as alias for .command()")}else return y(this,he).usage(t),this}version(t,r,n){let i="version";if(Q("[boolean|string] [string] [string]",[t,r,n],arguments.length),y(this,ii)&&(this[Lg](y(this,ii)),y(this,he).version(void 0),ee(this,ii,null)),arguments.length===0)n=this[R0](),t=i;else if(arguments.length===1){if(t===!1)return this;n=t,t=i}else arguments.length===2&&(n=r,r=void 0);return ee(this,ii,typeof t=="string"?t:i),r=r||y(this,he).deferY18nLookup("Show version number"),y(this,he).version(n||void 0),this.boolean(y(this,ii)),this.describe(y(this,ii),r),this}wrap(t){return Q("<number|null|undefined>",[t],arguments.length),y(this,he).wrap(t),this}[(mt=new WeakMap,Go=new WeakMap,Cu=new WeakMap,zr=new WeakMap,Tr=new WeakMap,od=new WeakMap,Ui=new WeakMap,Wo=new WeakMap,Kr=new WeakMap,sd=new WeakMap,Yr=new WeakMap,qn=new WeakMap,Ar=new WeakMap,Xr=new WeakMap,ma=new WeakMap,Lt=new WeakMap,ne=new WeakMap,ad=new WeakMap,cd=new WeakMap,Ir=new WeakMap,Vo=new WeakMap,ga=new WeakMap,zo=new WeakMap,Hi=new WeakMap,ud=new WeakMap,de=new WeakMap,Ko=new WeakMap,Yo=new WeakMap,Xo=new WeakMap,he=new WeakMap,ii=new WeakMap,ft=new WeakMap,x0)](t){if(!t._||!t["--"])return t;t._.push.apply(t._,t["--"]);try{delete t["--"]}catch(r){}return t}[T0](){return{log:(...t)=>{this[ld]()||console.log(...t),ee(this,Ar,!0),y(this,Lt).length&&ee(this,Lt,y(this,Lt)+`
`),ee(this,Lt,y(this,Lt)+t.join(" "))},error:(...t)=>{this[ld]()||console.error(...t),ee(this,Ar,!0),y(this,Lt).length&&ee(this,Lt,y(this,Lt)+`
`),ee(this,Lt,y(this,Lt)+t.join(" "))}}}[Lg](t){pa(y(this,ne)).forEach(r=>{if((i=>i==="configObjects")(r))return;let n=y(this,ne)[r];Array.isArray(n)?~n.indexOf(t)&&n.splice(n.indexOf(t),1):typeof n=="object"&&delete n[t]}),delete y(this,he).getDescriptions()[t]}[A0](){y(this,sd).push({options:y(this,ne),configObjects:y(this,ne).configObjects.slice(0),exitProcess:y(this,Kr),groups:y(this,qn),strict:y(this,Ko),strictCommands:y(this,Yo),strictOptions:y(this,Xo),completionCommand:y(this,Tr),output:y(this,Lt),exitError:y(this,Ui),hasOutput:y(this,Ar),parsed:this.parsed,parseFn:y(this,Ir),parseContext:y(this,Vo)}),y(this,he).freeze(),y(this,ft).freeze(),y(this,mt).freeze(),y(this,Yr).freeze()}[I0](){let t="",r;return/\b(node|iojs|electron)(\.exe)?$/.test(y(this,de).process.argv()[0])?r=y(this,de).process.argv().slice(1,2):r=y(this,de).process.argv().slice(0,1),t=r.map(n=>{let i=this[$0](y(this,Go),n);return n.match(/^(\/|([a-zA-Z]:)?\\)/)&&i.length<n.length?i:n}).join(" ").trim(),y(this,de).getEnv("_")&&y(this,de).getProcessArgvBin()===y(this,de).getEnv("_")&&(t=y(this,de).getEnv("_").replace(`${y(this,de).path.dirname(y(this,de).process.execPath())}/`,"")),t}[Qo](){return y(this,cd)}[kg](){if(!y(this,Wo))return;let t=y(this,de).getEnv("LC_ALL")||y(this,de).getEnv("LC_MESSAGES")||y(this,de).getEnv("LANG")||y(this,de).getEnv("LANGUAGE")||"en_US";this.locale(t.replace(/[.:].*/,""))}[R0](){return this[Fg]().version||"unknown"}[P0](t){let r=t["--"]?t["--"]:t._;for(let n=0,i;(i=r[n])!==void 0;n++)y(this,de).Parser.looksLikeNumber(i)&&Number.isSafeInteger(Math.floor(parseFloat(`${i}`)))&&(r[n]=Number(i));return t}[Fg](t){let r=t||"*";if(y(this,ga)[r])return y(this,ga)[r];let n={};try{let i=t||y(this,de).mainFilename;!t&&y(this,de).path.extname(i)&&(i=y(this,de).path.dirname(i));let o=y(this,de).findUp(i,(s,a)=>{if(a.includes("package.json"))return"package.json"});nr(o,void 0,y(this,de)),n=JSON.parse(y(this,de).readFileSync(o,"utf8"))}catch(i){}return y(this,ga)[r]=n||{},y(this,ga)[r]}[Bi](t,r){r=[].concat(r),r.forEach(n=>{n=this[$g](n),y(this,ne)[t].push(n)})}[va](t,r,n,i){this[qg](t,r,n,i,(o,s,a)=>{y(this,ne)[o][s]=a})}[Mg](t,r,n,i){this[qg](t,r,n,i,(o,s,a)=>{y(this,ne)[o][s]=(y(this,ne)[o][s]||[]).concat(a)})}[qg](t,r,n,i,o){if(Array.isArray(n))n.forEach(s=>{t(s,i)});else if((s=>typeof s=="object")(n))for(let s of pa(n))t(s,n[s]);else o(r,this[$g](n),i)}[$g](t){return t==="__proto__"?"___proto___":t}[jg](t,r){return this[va](this[jg].bind(this),"key",t,r),this}[Ug](){var t,r,n,i,o,s,a,c,u,l,f,d;let p=y(this,sd).pop();nr(p,void 0,y(this,de));let h;t=this,r=this,n=this,i=this,o=this,s=this,a=this,c=this,u=this,l=this,f=this,d=this,{options:{set value(m){ee(t,ne,m)}}.value,configObjects:h,exitProcess:{set value(m){ee(r,Kr,m)}}.value,groups:{set value(m){ee(n,qn,m)}}.value,output:{set value(m){ee(i,Lt,m)}}.value,exitError:{set value(m){ee(o,Ui,m)}}.value,hasOutput:{set value(m){ee(s,Ar,m)}}.value,parsed:this.parsed,strict:{set value(m){ee(a,Ko,m)}}.value,strictCommands:{set value(m){ee(c,Yo,m)}}.value,strictOptions:{set value(m){ee(u,Xo,m)}}.value,completionCommand:{set value(m){ee(l,Tr,m)}}.value,parseFn:{set value(m){ee(f,Ir,m)}}.value,parseContext:{set value(m){ee(d,Vo,m)}}.value}=p,y(this,ne).configObjects=h,y(this,he).unfreeze(),y(this,ft).unfreeze(),y(this,mt).unfreeze(),y(this,Yr).unfreeze()}[O0](t,r){return Bo(r,n=>(t(n),n))}getInternalMethods(){return{getCommandInstance:this[D0].bind(this),getContext:this[N0].bind(this),getHasOutput:this[L0].bind(this),getLoggerInstance:this[k0].bind(this),getParseContext:this[F0].bind(this),getParserConfiguration:this[Qo].bind(this),getUsageInstance:this[M0].bind(this),getValidationInstance:this[q0].bind(this),hasParseCallback:this[ld].bind(this),postProcess:this[Jo].bind(this),reset:this[Hg].bind(this),runValidation:this[Bg].bind(this),runYargsParserAndExecuteCommands:this[wu].bind(this),setHasOutput:this[j0].bind(this)}}[D0](){return y(this,mt)}[N0](){return y(this,Cu)}[L0](){return y(this,Ar)}[k0](){return y(this,ma)}[F0](){return y(this,Vo)||{}}[M0](){return y(this,he)}[q0](){return y(this,ft)}[ld](){return!!y(this,Ir)}[Jo](t,r,n,i){return n||tt(t)||(r||(t=this[x0](t)),(this[Qo]()["parse-positional-numbers"]||this[Qo]()["parse-positional-numbers"]===void 0)&&(t=this[P0](t)),i&&(t=Ho(t,this,y(this,Yr).getMiddleware(),!1))),t}[Hg](t={}){ee(this,ne,y(this,ne)||{});let r={};r.local=y(this,ne).local?y(this,ne).local:[],r.configObjects=y(this,ne).configObjects?y(this,ne).configObjects:[];let n={};r.local.forEach(s=>{n[s]=!0,(t[s]||[]).forEach(a=>{n[a]=!0})}),Object.assign(y(this,zo),Object.keys(y(this,qn)).reduce((s,a)=>{let c=y(this,qn)[a].filter(u=>!(u in n));return c.length>0&&(s[a]=c),s},{})),ee(this,qn,{});let i=["array","boolean","string","skipValidation","count","normalize","number","hiddenOptions"],o=["narg","key","alias","default","defaultDescription","config","choices","demandedOptions","demandedCommands","deprecatedOptions"];return i.forEach(s=>{r[s]=(y(this,ne)[s]||[]).filter(a=>!n[a])}),o.forEach(s=>{r[s]=$i(y(this,ne)[s],a=>!n[a])}),r.envPrefix=y(this,ne).envPrefix,ee(this,ne,r),ee(this,he,y(this,he)?y(this,he).reset(n):h0(this,y(this,de))),ee(this,ft,y(this,ft)?y(this,ft).reset(n):w0(this,y(this,he),y(this,de))),ee(this,mt,y(this,mt)?y(this,mt).reset():f0(y(this,he),y(this,ft),y(this,Yr),y(this,de))),y(this,zr)||ee(this,zr,E0(this,y(this,he),y(this,mt),y(this,de))),y(this,Yr).reset(),ee(this,Tr,null),ee(this,Lt,""),ee(this,Ui,null),ee(this,Ar,!1),this.parsed=!1,this}[$0](t,r){return y(this,de).path.relative(t,r)}[wu](t,r,n,i=0,o=!1){let s=!!n||o;t=t||y(this,Hi),y(this,ne).__=y(this,de).y18n.__,y(this,ne).configuration=this[Qo]();let a=!!y(this,ne).configuration["populate--"],c=Object.assign({},y(this,ne).configuration,{"populate--":!0}),u=y(this,de).Parser.detailed(t,Object.assign({},y(this,ne),{configuration:$({"parse-positional-numbers":!1},c)})),l=Object.assign(u.argv,y(this,Vo)),f,d=u.aliases,p=!1,h=!1;Object.keys(l).forEach(m=>{m===y(this,Xr)&&l[m]?p=!0:m===y(this,ii)&&l[m]&&(h=!0)}),l.$0=this.$0,this.parsed=u,i===0&&y(this,he).clearCachedHelpMessage();try{if(this[kg](),r)return this[Jo](l,a,!!n,!1);y(this,Xr)&&~[y(this,Xr)].concat(d[y(this,Xr)]||[]).filter(w=>w.length>1).indexOf(""+l._[l._.length-1])&&(l._.pop(),p=!0);let m=y(this,mt).getCommands(),v=y(this,zr).completionKey in l,_=p||v||o;if(l._.length){if(m.length){let E;for(let w=i||0,T;l._[w]!==void 0;w++)if(T=String(l._[w]),~m.indexOf(T)&&T!==y(this,Tr)){let N=y(this,mt).runCommand(T,this,u,w+1,o,p||h||o);return this[Jo](N,a,!!n,!1)}else if(!E&&T!==y(this,Tr)){E=T;break}!y(this,mt).hasDefaultCommand()&&y(this,ud)&&E&&!_&&y(this,ft).recommendCommands(E,m)}y(this,Tr)&&~l._.indexOf(y(this,Tr))&&!v&&(y(this,Kr)&&ji(!0),this.showCompletionScript(),this.exit(0))}if(y(this,mt).hasDefaultCommand()&&!_){let E=y(this,mt).runCommand(null,this,u,0,o,p||h||o);return this[Jo](E,a,!!n,!1)}if(v){y(this,Kr)&&ji(!0),t=[].concat(t);let E=t.slice(t.indexOf(`--${y(this,zr).completionKey}`)+1);return y(this,zr).getCompletion(E,(w,T)=>{if(w)throw new Ve(w.message);(T||[]).forEach(N=>{y(this,ma).log(N)}),this.exit(0)}),this[Jo](l,!a,!!n,!1)}if(y(this,Ar)||(p?(y(this,Kr)&&ji(!0),s=!0,this.showHelp("log"),this.exit(0)):h&&(y(this,Kr)&&ji(!0),s=!0,y(this,he).showVersion("log"),this.exit(0))),!s&&y(this,ne).skipValidation.length>0&&(s=Object.keys(l).some(E=>y(this,ne).skipValidation.indexOf(E)>=0&&l[E]===!0)),!s){if(u.error)throw new Ve(u.error.message);if(!v){let E=this[Bg](d,{},u.error);n||(f=Ho(l,this,y(this,Yr).getMiddleware(),!0)),f=this[O0](E,f!=null?f:l),tt(f)&&!n&&(f=f.then(()=>Ho(l,this,y(this,Yr).getMiddleware(),!1)))}}}catch(m){if(m instanceof Ve)y(this,he).fail(m.message,m);else throw m}return this[Jo](f!=null?f:l,a,!!n,!0)}[Bg](t,r,n,i){t=$({},t),r=$({},r);let o=$({},this.getDemandedOptions());return s=>{if(n)throw new Ve(n.message);y(this,ft).nonOptionCount(s),y(this,ft).requiredArguments(s,o);let a=!1;y(this,Yo)&&(a=y(this,ft).unknownCommands(s)),y(this,Ko)&&!a?y(this,ft).unknownArguments(s,t,r,!!i):y(this,Xo)&&y(this,ft).unknownArguments(s,t,{},!1,!1),y(this,ft).limitedChoices(s),y(this,ft).implications(s),y(this,ft).conflicting(s)}}[j0](){ee(this,Ar,!0)}};function p0(e){return!!e&&typeof e.getInternalMethods=="function"}"use strict";var mG=b0(s0),H0=mG;var w2=M(require("child_process"));var Rl=M(require("path")),e1=M(require("crypto"));var gG=M(require("os")),B0=M(require("fs")),vG=M(require("path"));var le;(function(a){a[a.Trace=1]="Trace",a[a.Debug=2]="Debug",a[a.Info=3]="Info",a[a.Warning=4]="Warning",a[a.Error=5]="Error",a[a.Critical=6]="Critical",a[a.Off=7]="Off"})(le||(le={}));var G0={info:3,debug:2,trace:1},yG=Object.keys(G0).reduce((e,t)=>(e[G0[t]]=t,e),[]);function W0(e){return yG[e]||3}var St={write:()=>{},raw:()=>{},start:()=>Date.now(),stop:()=>{},event:()=>{}},ya=/(\x9B|\x1B\[)[0-?]*[ -\/]*[@-~]/g;function Su(e,t,r){return{event(n){let i=EG(n,t(),r.getTime());i&&e(i)}}}function gt(e,t=2){return{event:e.event,write(r,n=t){e.event({type:"text",level:n,timestamp:Date.now(),text:r})},raw(r,n=t){e.event({type:"raw",level:n,timestamp:Date.now(),text:r})},start(r,n=t){let i=Date.now();return e.event({type:"start",level:n,timestamp:i,text:r}),i},stop(r,n,i=t){e.event({type:"stop",level:i,timestamp:Date.now(),text:r,startTimestamp:n})},get dimensions(){return e.dimensions},onDidChangeDimensions:e.onDidChangeDimensions}}function EG(e,t,r){if(!(!("level"in e)||e.level<t))switch(e.type){case"text":return`[${bu(z0,`${e.timestamp-r} ms`)}] ${fd(e.text)}`;case"raw":return e.text;case"start":return 1>=t?`${bu(bG,`[${e.timestamp-r} ms] Start`)}: ${fd(e.text)}`:`[${bu(z0,`${e.timestamp-r} ms`)}] Start: ${fd(e.text)}`;case"stop":return 1>=t?`${bu(SG,`[${e.timestamp-r} ms] Stop`)} (${e.timestamp-e.startTimestamp} ms): ${fd(e.text)}`:void 0;default:throw _G(e)}}function fd(e){return TG(e).replace(/\r?\n/g,`\r
`).replace(/(\r?\n)?$/,`\r
`)}function _G(e){return new Error(`Unknown log event type: ${e.type}`)}var CG="38;2;143;99;79",V0="38;2;99;143;79",wG="38;2;86;156;214",SG=CG,bG=V0,z0=V0,xG=wG;function bu(e,t){return t.split(`
`).map(r=>`[1m[${e}m${r}[39m[22m`).join(`
`)}function TG(e){let t,r=0,n=[];for(ya.lastIndex=0;t=ya.exec(e);)n.push(K0(e.substring(r,t.index))),n.push(t[0]),r=ya.lastIndex;return n.push(K0(e.substr(r))),n.join("")}function K0(e){let t=/(?<=^|[^A-Za-z0-9_\-\.])[0-9]+(\.[0-9]+)*(?=$|[^A-Za-z0-9_\-\.])/g,r,n=0,i=[];for(;r=t.exec(e);)i.push(e.substring(n,r.index)),i.push(bu(xG,r[0])),n=t.lastIndex;return i.push(e.substr(n)),i.join("")}function rt(e){return e.split(/\r?\n/).map(t=>`[1m[31m${t}[39m[22m`).join(`\r
`)+`\r
`}function Gg(e){return e.split(/\r?\n/).map(t=>`[1m[33m${t}[39m[22m`).join(`\r
`)+`\r
`}var vt=class extends Error{constructor(t){super(t.originalError&&t.originalError.message||t.description);this.manageContainer=!1;this.actions=[];this.data={};var r;Object.assign(this,t),((r=this.originalError)==null?void 0:r.stack)&&(this.stack=this.originalError.stack)}};var Xk=M(require("path"));var ce=M(require("path")),$p=M(require("fs")),yD=M(hx()),rE=M(require("string_decoder")),jp=M(Gu());var ED=M(require("crypto")),_D=M(require("util"));var ot=M(require("fs")),fi=M(require("util"));function no(e){return new Promise(t=>ot.stat(e,(r,n)=>t(!r&&n.isFile())))}function gI(e){return new Promise(t=>ot.stat(e,(r,n)=>t(!r&&n.isDirectory())))}var bt=(0,fi.promisify)(ot.readFile),ps=(0,fi.promisify)(ot.writeFile),DV=(0,fi.promisify)(ot.appendFile),Ga=(0,fi.promisify)(ot.rename),di=(0,fi.promisify)(ot.readdir),vI=(0,fi.promisify)(ot.unlink),kr=e=>new Promise((t,r)=>ot.mkdir(e,{recursive:!0},n=>n?r(n):t())),Ey=(0,fi.promisify)(ot.rmdir),_y=(e,t=!1,r=!1)=>new Promise((n,i)=>ot.rm(e,{recursive:t,force:r},o=>o?i(o):n())),yI=(0,fi.promisify)(ot.copyFile);var EI=M(require("string_decoder")),Wu="\u2404";async function Vu(e,t,r,n){let i=await e({env:r?{VSCODE_REMOTE_CONTAINERS_SESSION:r}:{},cmd:n||"/bin/sh",args:[],output:t}),o=NV(i),s;async function a(u,l){let f=s=(async()=>{try{await s}catch(d){}return c(u,l)})();try{return await Promise.race([f,o.unexpectedExit])}finally{o.disposeStdioListeners(),s===f&&(s=void 0)}}async function c(u,l){let f=`Run in container: ${u.replace(/\n.*/g,"")}`,d;if((l==null?void 0:l.logOutput)!=="silent"&&(d=t.start(f,l==null?void 0:l.logLevel)),i.stdin.destroyed){t.write("Stdin closed!");let{code:T,signal:N}=await i.exit;return Promise.reject({message:`Shell server terminated (code: ${T}, signal: ${N})`,code:T,signal:N})}i.stdin.write(`echo -n ${Wu}; ( ${u} ); echo -n ${Wu}$?${Wu}; echo -n ${Wu} >&2
`);let[p,h]=_I(i.stdout,[1,2],(l==null?void 0:l.logOutput)==="continuous"?(T,N,P)=>{N===1&&P===0&&t.write(T,l==null?void 0:l.logLevel)}:()=>{}),m=_I(i.stderr,[1],(l==null?void 0:l.logOutput)==="continuous"?(T,N,P)=>{N===0&&P===0&&t.write(T,l==null?void 0:l.logLevel)}:()=>{})[0];(l==null?void 0:l.stdin)&&(await p,i.stdin.write(l==null?void 0:l.stdin));let[v,_]=await h,[E]=await m,w=parseInt(_,10)||0;return((l==null?void 0:l.logOutput)===void 0||(l==null?void 0:l.logOutput)===!0)&&(t.write(v,l==null?void 0:l.logLevel),t.write(E,l==null?void 0:l.logLevel),w&&t.write(`Exit code ${w}`,l==null?void 0:l.logLevel)),(l==null?void 0:l.logOutput)==="continuous"&&w&&t.write(`Exit code ${w}`,l==null?void 0:l.logLevel),(l==null?void 0:l.logOutput)!=="silent"&&t.stop(f,d,l==null?void 0:l.logLevel),w?Promise.reject({message:`Command in container failed: ${u}`,code:w,stdout:v,stderr:E}):{stdout:v,stderr:E}}return{exec:a}}function _I(e,t,r){let n=t.map(()=>{let l,f=new Promise((d,p)=>l={resolve:d,reject:p});return $({promise:f},l)}),i=new EI.StringDecoder("utf8"),o=[],s=0,a=[];function c(l){let f=i.write(l);u(f)}function u(l){let f=l.indexOf(Wu);if(f!==-1){let d=l.substr(0,f);o.push(d),r(d,s,a.length),a.push(o.join("")),o.length=0,a.length===t[s]&&(n[s].resolve(a),s++,a=[],s===t.length&&e.off("data",c)),f+1<l.length&&u(l.substr(f+1))}else o.push(l),r(l,s,a.length)}return e.on("data",c),n.map(l=>l.promise)}function NV(e){let t,r=new Promise((c,u)=>t=u),n=[],i=[],o=c=>n.push(c),s=c=>i.push(c);return e.stdout.on("data",o),e.stderr.on("data",s),e.exit.then(({code:c,signal:u})=>{t(`Shell server terminated (code: ${c}, signal: ${u})
${Buffer.concat(n).toString()}
${Buffer.concat(i).toString()}`)},c=>{t(`Shell server failed: ${c&&(c.stack||c.message)}`)}),{unexpectedExit:r,disposeStdioListeners:()=>{e.stdout.off("data",o),e.stderr.off("data",s),n.length=0,i.length=0}}}var CI=M(require("path"));var LV=["install.sh","install","bootstrap.sh","bootstrap","script/bootstrap","setup.sh","setup","script/setup"];async function wI(e,t,r,n,i){let{repository:o,installCommand:s,targetPath:a}=e.dotfilesConfiguration;if(o=i["remote.containers.dotfiles.repository"]||i["dotfiles.repository"]||o,s=i["remote.containers.dotfiles.installCommand"]||i["dotfiles.installCommand"]||s,a=i["remote.containers.dotfiles.targetPath"]||i["dotfiles.targetPath"]||a,!o)return;await n;let c=await r;o.indexOf(":")===-1&&!/^\.{0,2}\//.test(o)&&(o=`https://github.com/${o}.git`);let u=t.shellServer,l=FV(t),f=Object.keys(c).reduce((d,p)=>`${d}${p}=${kV(c[p])} `,"");try{e.output.event({type:"progress",name:"Installing Dotfiles",status:"running"}),s?await u.exec(`# Clone & install dotfiles
${lp(l)} || (echo dotfiles marker found && exit 1) || exit 0
command -v git >/dev/null 2>&1 || (echo git not found && exit 1) || exit 0
[ -e ${a} ] || ${f}git clone ${o} ${a} || exit $?
if [ -x ${s} ]
then
	echo Executing script ${s}
	cd ${a} && ${f}${s}
else
	echo Error: ${s} not executable
	exit 126
fi
`,{logOutput:"continuous",logLevel:le.Info}):await u.exec(`# Clone & install dotfiles
${lp(l)} || (echo dotfiles marker found && exit 1) || exit 0
command -v git >/dev/null 2>&1 || (echo git not found && exit 1) || exit 0
[ -e ${a} ] || ${f}git clone ${o} ${a} || exit $?
cd ${a}
for f in ${LV.join(" ")}
do
	if [ -e $f ]
	then
		installCommand=$f
		break
	fi
done
if [ -z "$installCommand" ]
then
	dotfiles=$(ls -d ${a}/.* 2>/dev/null | grep -v -E '/(.|..|.git)$')
	if [ ! -z "$dotfiles" ]
	then
		echo Linking dotfiles: $dotfiles
		ln -sf $dotfiles ~ 2>/dev/null
	else
		echo No dotfiles found.
	fi
else
	if [ -x "$installCommand" ]
	then
		echo Executing script '${a}'/"$installCommand"
		${f}./"$installCommand"
	else
		echo Error: '${a}'/"$installCommand" not executable
		exit 126
	fi
fi
`,{logOutput:"continuous",logLevel:le.Info}),e.output.event({type:"progress",name:"Installing Dotfiles",status:"succeeded"})}catch(d){e.output.event({type:"progress",name:"Installing Dotfiles",status:"failed"})}}function kV(e){return`'${(e||"").replace(/'+/g,`'"$&"'`)}'`}function FV(e){return CI.posix.join(hs(e),".dotfilesMarker")}var so=M(require("path")),Lp=M(require("net")),WO=M(require("crypto")),VO=M(hp()),zO=M(require("util")),KO=M(require("string_decoder"));var gr=M(require("path")),mp=M(require("os")),AR=M(require("fs")),gp=M(require("child_process")),Ay=M(require("string_decoder"));var xR;xR=(()=>{"use strict";var e={470:n=>{function i(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}function o(a,c){for(var u,l="",f=0,d=-1,p=0,h=0;h<=a.length;++h){if(h<a.length)u=a.charCodeAt(h);else{if(u===47)break;u=47}if(u===47){if(!(d===h-1||p===1))if(d!==h-1&&p===2){if(l.length<2||f!==2||l.charCodeAt(l.length-1)!==46||l.charCodeAt(l.length-2)!==46){if(l.length>2){var m=l.lastIndexOf("/");if(m!==l.length-1){m===-1?(l="",f=0):f=(l=l.slice(0,m)).length-1-l.lastIndexOf("/"),d=h,p=0;continue}}else if(l.length===2||l.length===1){l="",f=0,d=h,p=0;continue}}c&&(l.length>0?l+="/..":l="..",f=2)}else l.length>0?l+="/"+a.slice(d+1,h):l=a.slice(d+1,h),f=h-d-1;d=h,p=0}else u===46&&p!==-1?++p:p=-1}return l}var s={resolve:function(){for(var a,c="",u=!1,l=arguments.length-1;l>=-1&&!u;l--){var f;l>=0?f=arguments[l]:(a===void 0&&(a=process.cwd()),f=a),i(f),f.length!==0&&(c=f+"/"+c,u=f.charCodeAt(0)===47)}return c=o(c,!u),u?c.length>0?"/"+c:"/":c.length>0?c:"."},normalize:function(a){if(i(a),a.length===0)return".";var c=a.charCodeAt(0)===47,u=a.charCodeAt(a.length-1)===47;return(a=o(a,!c)).length!==0||c||(a="."),a.length>0&&u&&(a+="/"),c?"/"+a:a},isAbsolute:function(a){return i(a),a.length>0&&a.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var a,c=0;c<arguments.length;++c){var u=arguments[c];i(u),u.length>0&&(a===void 0?a=u:a+="/"+u)}return a===void 0?".":s.normalize(a)},relative:function(a,c){if(i(a),i(c),a===c||(a=s.resolve(a))===(c=s.resolve(c)))return"";for(var u=1;u<a.length&&a.charCodeAt(u)===47;++u);for(var l=a.length,f=l-u,d=1;d<c.length&&c.charCodeAt(d)===47;++d);for(var p=c.length-d,h=f<p?f:p,m=-1,v=0;v<=h;++v){if(v===h){if(p>h){if(c.charCodeAt(d+v)===47)return c.slice(d+v+1);if(v===0)return c.slice(d+v)}else f>h&&(a.charCodeAt(u+v)===47?m=v:v===0&&(m=0));break}var _=a.charCodeAt(u+v);if(_!==c.charCodeAt(d+v))break;_===47&&(m=v)}var E="";for(v=u+m+1;v<=l;++v)v!==l&&a.charCodeAt(v)!==47||(E.length===0?E+="..":E+="/..");return E.length>0?E+c.slice(d+m):(d+=m,c.charCodeAt(d)===47&&++d,c.slice(d))},_makeLong:function(a){return a},dirname:function(a){if(i(a),a.length===0)return".";for(var c=a.charCodeAt(0),u=c===47,l=-1,f=!0,d=a.length-1;d>=1;--d)if((c=a.charCodeAt(d))===47){if(!f){l=d;break}}else f=!1;return l===-1?u?"/":".":u&&l===1?"//":a.slice(0,l)},basename:function(a,c){if(c!==void 0&&typeof c!="string")throw new TypeError('"ext" argument must be a string');i(a);var u,l=0,f=-1,d=!0;if(c!==void 0&&c.length>0&&c.length<=a.length){if(c.length===a.length&&c===a)return"";var p=c.length-1,h=-1;for(u=a.length-1;u>=0;--u){var m=a.charCodeAt(u);if(m===47){if(!d){l=u+1;break}}else h===-1&&(d=!1,h=u+1),p>=0&&(m===c.charCodeAt(p)?--p==-1&&(f=u):(p=-1,f=h))}return l===f?f=h:f===-1&&(f=a.length),a.slice(l,f)}for(u=a.length-1;u>=0;--u)if(a.charCodeAt(u)===47){if(!d){l=u+1;break}}else f===-1&&(d=!1,f=u+1);return f===-1?"":a.slice(l,f)},extname:function(a){i(a);for(var c=-1,u=0,l=-1,f=!0,d=0,p=a.length-1;p>=0;--p){var h=a.charCodeAt(p);if(h!==47)l===-1&&(f=!1,l=p+1),h===46?c===-1?c=p:d!==1&&(d=1):c!==-1&&(d=-1);else if(!f){u=p+1;break}}return c===-1||l===-1||d===0||d===1&&c===l-1&&c===u+1?"":a.slice(c,l)},format:function(a){if(a===null||typeof a!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof a);return function(c,u){var l=u.dir||u.root,f=u.base||(u.name||"")+(u.ext||"");return l?l===u.root?l+f:l+"/"+f:f}(0,a)},parse:function(a){i(a);var c={root:"",dir:"",base:"",ext:"",name:""};if(a.length===0)return c;var u,l=a.charCodeAt(0),f=l===47;f?(c.root="/",u=1):u=0;for(var d=-1,p=0,h=-1,m=!0,v=a.length-1,_=0;v>=u;--v)if((l=a.charCodeAt(v))!==47)h===-1&&(m=!1,h=v+1),l===46?d===-1?d=v:_!==1&&(_=1):d!==-1&&(_=-1);else if(!m){p=v+1;break}return d===-1||h===-1||_===0||_===1&&d===h-1&&d===p+1?h!==-1&&(c.base=c.name=p===0&&f?a.slice(1,h):a.slice(p,h)):(p===0&&f?(c.name=a.slice(1,d),c.base=a.slice(1,h)):(c.name=a.slice(p,d),c.base=a.slice(p,h)),c.ext=a.slice(d,h)),p>0?c.dir=a.slice(0,p-1):f&&(c.dir="/"),c},sep:"/",delimiter:":",win32:null,posix:null};s.posix=s,n.exports=s},447:(n,i,o)=>{var s;if(o.r(i),o.d(i,{URI:()=>_,Utils:()=>j}),typeof process=="object")s=process.platform==="win32";else if(typeof navigator=="object"){var a=navigator.userAgent;s=a.indexOf("Windows")>=0}var c,u,l=(c=function(O,x){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,G){D.__proto__=G}||function(D,G){for(var re in G)Object.prototype.hasOwnProperty.call(G,re)&&(D[re]=G[re])})(O,x)},function(O,x){function D(){this.constructor=O}c(O,x),O.prototype=x===null?Object.create(x):(D.prototype=x.prototype,new D)}),f=/^\w[\w\d+.-]*$/,d=/^\//,p=/^\/\//,h="",m="/",v=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,_=function(){function O(x,D,G,re,ue,ye){ye===void 0&&(ye=!1),typeof x=="object"?(this.scheme=x.scheme||h,this.authority=x.authority||h,this.path=x.path||h,this.query=x.query||h,this.fragment=x.fragment||h):(this.scheme=function(K,ht){return K||ht?K:"file"}(x,ye),this.authority=D||h,this.path=function(K,ht){switch(K){case"https":case"http":case"file":ht?ht[0]!==m&&(ht=m+ht):ht=m}return ht}(this.scheme,G||h),this.query=re||h,this.fragment=ue||h,function(K,ht){if(!K.scheme&&ht)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'+K.authority+'", path: "'+K.path+'", query: "'+K.query+'", fragment: "'+K.fragment+'"}');if(K.scheme&&!f.test(K.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(K.path){if(K.authority){if(!d.test(K.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(p.test(K.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}(this,ye))}return O.isUri=function(x){return x instanceof O||!!x&&typeof x.authority=="string"&&typeof x.fragment=="string"&&typeof x.path=="string"&&typeof x.query=="string"&&typeof x.scheme=="string"&&typeof x.fsPath=="function"&&typeof x.with=="function"&&typeof x.toString=="function"},Object.defineProperty(O.prototype,"fsPath",{get:function(){return z(this,!1)},enumerable:!1,configurable:!0}),O.prototype.with=function(x){if(!x)return this;var D=x.scheme,G=x.authority,re=x.path,ue=x.query,ye=x.fragment;return D===void 0?D=this.scheme:D===null&&(D=h),G===void 0?G=this.authority:G===null&&(G=h),re===void 0?re=this.path:re===null&&(re=h),ue===void 0?ue=this.query:ue===null&&(ue=h),ye===void 0?ye=this.fragment:ye===null&&(ye=h),D===this.scheme&&G===this.authority&&re===this.path&&ue===this.query&&ye===this.fragment?this:new w(D,G,re,ue,ye)},O.parse=function(x,D){D===void 0&&(D=!1);var G=v.exec(x);return G?new w(G[2]||h,U(G[4]||h),U(G[5]||h),U(G[7]||h),U(G[9]||h),D):new w(h,h,h,h,h)},O.file=function(x){var D=h;if(s&&(x=x.replace(/\\/g,m)),x[0]===m&&x[1]===m){var G=x.indexOf(m,2);G===-1?(D=x.substring(2),x=m):(D=x.substring(2,G),x=x.substring(G)||m)}return new w("file",D,x,h,h)},O.from=function(x){return new w(x.scheme,x.authority,x.path,x.query,x.fragment)},O.prototype.toString=function(x){return x===void 0&&(x=!1),H(this,x)},O.prototype.toJSON=function(){return this},O.revive=function(x){if(x){if(x instanceof O)return x;var D=new w(x);return D._formatted=x.external,D._fsPath=x._sep===E?x.fsPath:null,D}return x},O}(),E=s?1:void 0,w=function(O){function x(){var D=O!==null&&O.apply(this,arguments)||this;return D._formatted=null,D._fsPath=null,D}return l(x,O),Object.defineProperty(x.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=z(this,!1)),this._fsPath},enumerable:!1,configurable:!0}),x.prototype.toString=function(D){return D===void 0&&(D=!1),D?H(this,!0):(this._formatted||(this._formatted=H(this,!1)),this._formatted)},x.prototype.toJSON=function(){var D={$mid:1};return this._fsPath&&(D.fsPath=this._fsPath,D._sep=E),this._formatted&&(D.external=this._formatted),this.path&&(D.path=this.path),this.scheme&&(D.scheme=this.scheme),this.authority&&(D.authority=this.authority),this.query&&(D.query=this.query),this.fragment&&(D.fragment=this.fragment),D},x}(_),T=((u={})[58]="%3A",u[47]="%2F",u[63]="%3F",u[35]="%23",u[91]="%5B",u[93]="%5D",u[64]="%40",u[33]="%21",u[36]="%24",u[38]="%26",u[39]="%27",u[40]="%28",u[41]="%29",u[42]="%2A",u[43]="%2B",u[44]="%2C",u[59]="%3B",u[61]="%3D",u[32]="%20",u);function N(O,x){for(var D=void 0,G=-1,re=0;re<O.length;re++){var ue=O.charCodeAt(re);if(ue>=97&&ue<=122||ue>=65&&ue<=90||ue>=48&&ue<=57||ue===45||ue===46||ue===95||ue===126||x&&ue===47)G!==-1&&(D+=encodeURIComponent(O.substring(G,re)),G=-1),D!==void 0&&(D+=O.charAt(re));else{D===void 0&&(D=O.substr(0,re));var ye=T[ue];ye!==void 0?(G!==-1&&(D+=encodeURIComponent(O.substring(G,re)),G=-1),D+=ye):G===-1&&(G=re)}}return G!==-1&&(D+=encodeURIComponent(O.substring(G))),D!==void 0?D:O}function P(O){for(var x=void 0,D=0;D<O.length;D++){var G=O.charCodeAt(D);G===35||G===63?(x===void 0&&(x=O.substr(0,D)),x+=T[G]):x!==void 0&&(x+=O[D])}return x!==void 0?x:O}function z(O,x){var D;return D=O.authority&&O.path.length>1&&O.scheme==="file"?"//"+O.authority+O.path:O.path.charCodeAt(0)===47&&(O.path.charCodeAt(1)>=65&&O.path.charCodeAt(1)<=90||O.path.charCodeAt(1)>=97&&O.path.charCodeAt(1)<=122)&&O.path.charCodeAt(2)===58?x?O.path.substr(1):O.path[1].toLowerCase()+O.path.substr(2):O.path,s&&(D=D.replace(/\//g,"\\")),D}function H(O,x){var D=x?P:N,G="",re=O.scheme,ue=O.authority,ye=O.path,K=O.query,ht=O.fragment;if(re&&(G+=re,G+=":"),(ue||re==="file")&&(G+=m,G+=m),ue){var Vr=ue.indexOf("@");if(Vr!==-1){var se=ue.substr(0,Vr);ue=ue.substr(Vr+1),(Vr=se.indexOf(":"))===-1?G+=D(se,!1):(G+=D(se.substr(0,Vr),!1),G+=":",G+=D(se.substr(Vr+1),!1)),G+="@"}(Vr=(ue=ue.toLowerCase()).indexOf(":"))===-1?G+=D(ue,!1):(G+=D(ue.substr(0,Vr),!1),G+=ue.substr(Vr))}if(ye){if(ye.length>=3&&ye.charCodeAt(0)===47&&ye.charCodeAt(2)===58)(Te=ye.charCodeAt(1))>=65&&Te<=90&&(ye="/"+String.fromCharCode(Te+32)+":"+ye.substr(3));else if(ye.length>=2&&ye.charCodeAt(1)===58){var Te;(Te=ye.charCodeAt(0))>=65&&Te<=90&&(ye=String.fromCharCode(Te+32)+":"+ye.substr(2))}G+=D(ye,!0)}return K&&(G+="?",G+=D(K,!1)),ht&&(G+="#",G+=x?ht:N(ht,!1)),G}function R(O){try{return decodeURIComponent(O)}catch(x){return O.length>3?O.substr(0,3)+R(O.substr(3)):O}}var Y=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function U(O){return O.match(Y)?O.replace(Y,function(x){return R(x)}):O}var j,X=o(470),ae=function(){for(var O=0,x=0,D=arguments.length;x<D;x++)O+=arguments[x].length;var G=Array(O),re=0;for(x=0;x<D;x++)for(var ue=arguments[x],ye=0,K=ue.length;ye<K;ye++,re++)G[re]=ue[ye];return G},B=X.posix||X;(function(O){O.joinPath=function(x){for(var D=[],G=1;G<arguments.length;G++)D[G-1]=arguments[G];return x.with({path:B.join.apply(B,ae([x.path],D))})},O.resolvePath=function(x){for(var D=[],G=1;G<arguments.length;G++)D[G-1]=arguments[G];var re=x.path||"/";return x.with({path:B.resolve.apply(B,ae([re],D))})},O.dirname=function(x){var D=B.dirname(x.path);return D.length===1&&D.charCodeAt(0)===46?x:x.with({path:D})},O.basename=function(x){return B.basename(x.path)},O.extname=function(x){return B.extname(x.path)}})(j||(j={}))}},t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}return r.d=(n,i)=>{for(var o in i)r.o(i,o)&&!r.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:i[o]})},r.o=(n,i)=>Object.prototype.hasOwnProperty.call(n,i),r.r=n=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r(447)})();var{URI:io,Utils:sue}=xR;var TR=M(require("path"));function gs(e,t){if(Ty(t)){let r=e.dirname(t);return{isWorkspaceFile:!0,workspaceOrFolderPath:t,rootFolderPath:r,configFolderPath:r}}return{isWorkspaceFile:!1,workspaceOrFolderPath:t,rootFolderPath:t,configFolderPath:t}}function Ty(e){return TR.extname(e)===".code-workspace"}async function oo(e){return new Promise(t=>setTimeout(t,e))}var vs;(function(i){i[i.Unknown=0]="Unknown",i[i.File=1]="File",i[i.Directory=2]="Directory",i[i.SymbolicLink=64]="SymbolicLink"})(vs||(vs={}));function IR(e,t,r){return e==="linux"?t===r:t.toLowerCase()===r.toLowerCase()}var Cue=gr.join(__dirname,"..","..","node_modules",".bin","ts-node"),RR=gr.basename(process.argv[0])==="ts-node"||process.argv.indexOf("ts-node/register")!==-1;async function Le(e){let{exec:t,cmd:r,args:n,cwd:i,env:o,stdin:s,output:a,print:c}=e,u=await t({cmd:r,args:n,cwd:i,env:o,output:a});return new Promise((l,f)=>{let d=[],p=[],h=c==="continuous"?new Ay.StringDecoder:void 0;u.stdout.on("data",v=>{d.push(v),c==="continuous"&&a.write(h.write(v))}),u.stdout.on("error",v=>{if((v==null?void 0:v.code)!=="ENOTCONN")throw v});let m=c==="continuous"?new Ay.StringDecoder:void 0;u.stderr.on("data",v=>{p.push(v),c==="continuous"&&a.write(rt(m.write(v)))}),u.stderr.on("error",v=>{if((v==null?void 0:v.code)!=="ENOTCONN")throw v}),u.exit.then(({code:v})=>{try{let _=Buffer.concat(d),E=Buffer.concat(p);(c===!0||v&&c==="onerror")&&(a.write(_.toString().replace(/\r?\n/g,`\r
`)),a.write(rt(E.toString()))),c&&v&&a.write(`Exit code ${v}`),v?f({message:`Command failed: ${r} ${(n||[]).join(" ")}`,stdout:_,stderr:E,code:v}):l({stdout:_,stderr:E})}catch(_){f(_)}},f),s instanceof Buffer?(u.stdin.write(s,v=>{v&&f(v)}),u.stdin.end()):s instanceof AR.ReadStream&&s.pipe(u.stdin)})}async function zu(e){let{ptyExec:t,cmd:r,args:n,cwd:i,env:o,output:s,resolveOn:a,onDidInput:c}=e,u=await t({cmd:r,args:n,cwd:i,env:o,output:s});return new Promise((l,f)=>{let d="",p=[c&&c(h=>u.write(h))];u.onData(h=>{d+=h,s.raw(h),a&&a.exec(d)&&l({cmdOutput:d})}),u.exit.then(({code:h,signal:m})=>{try{p.forEach(v=>v==null?void 0:v.dispose()),h||m?f({message:`Command failed: ${r} ${(n||[]).join(" ")}`,cmdOutput:d,code:h,signal:m}):l({cmdOutput:d})}catch(v){f(v)}},h=>{p.forEach(m=>m==null?void 0:m.dispose()),f(h)})})}function ys(e){return async function(t){let{cmd:r,args:n,output:i}=t,o=`Run: ${r} ${(n||[]).join(" ").replace(/\n.*/g,"")}`,s=i.start(o),a=t.cwd||e,c=t.env?$($({},process.env),t.env):process.env,u=await vp(r,a,c,i),l=gp.spawn(u,n,{cwd:a,env:c,windowsHide:!0});return{stdin:l.stdin,stdout:l.stdout,stderr:l.stderr,exit:new Promise((f,d)=>{l.once("error",p=>{i.stop(o,s),d(p)}),l.once("close",(p,h)=>{i.stop(o,s),f({code:p,signal:h})})}),async terminate(){l.kill("SIGKILL")}}}}async function az(e,t){let r=await t("node-pty");if(!r)throw new Error("Missing node-pty");return async function(n){var m,v;let{cmd:i,args:o,output:s}=n,a=`Run: ${i} ${(o||[]).join(" ").replace(/\n.*/g,"")}`,c=s.start(a),u=!1,l=n.cwd||e,f=n.env?$($({},process.env),n.env):process.env,d=await vp(i,l,f,s),p=r.spawn(d,o||[],{cwd:l,env:f,cols:(m=s.dimensions)==null?void 0:m.columns,rows:(v=s.dimensions)==null?void 0:v.rows,useConpty:u}),h=[s.onDidChangeDimensions&&s.onDidChangeDimensions(_=>p.resize(_.columns,_.rows))];return{onData:p.onData.bind(p),write:p.write.bind(p),resize:p.resize.bind(p),exit:new Promise(_=>{p.onExit(({exitCode:E,signal:w})=>{if(h.forEach(T=>T==null?void 0:T.dispose()),s.stop(a,c),_({code:E,signal:w}),process.platform==="win32")try{p.kill()}catch{}})}),async terminate(){p.kill("SIGKILL")}}}}function cz(e,t,r){return async function(n){let{env:i,cmd:o,args:s,output:a}=n,c=n.cwd||r,u=c?`cd '${c}' && `:"",l=Object.keys(i||{}).map(E=>`${E}='${i[E]}' `).join(""),f=(s||[]).map(E=>` '${E.replace(/'/g,`'"'"'`)}'`).join(""),d=`${u}${l}${o}${f}`,p=[...t,"/bin/sh","-c",d],h=`Run: ${e} ${p.join(" ").replace(/\n.*/g,"")}`,m=a.start(h),v=await vp(e,process.cwd(),process.env,a),_=gp.spawn(v,p,{windowsHide:!0});return{stdin:_.stdin,stdout:_.stdout,stderr:_.stderr,exit:new Promise((E,w)=>{_.once("error",T=>{a.stop(h,m),w(T)}),_.once("close",(T,N)=>{a.stop(h,m),E({code:T,signal:N})})}),async terminate(){_.kill("SIGKILL")}}}}async function uz(e,t,r,n){let i=await n("node-pty");if(!i)throw new Error("Missing node-pty");return async function(o){var P,z;let{env:s,cmd:a,args:c,output:u}=o,l=o.cwd||r,f=l?`cd '${l}' && `:"",d=Object.keys(s||{}).map(H=>`${H}='${s[H]}' `).join(""),p=(c||[]).map(H=>` '${H.replace(/'/g,`'"'"'`)}'`).join(""),h=`${f}${d}${a}${p}`,m=[...t,"/bin/sh","-c",h],v=`Run: ${e} ${m.join(" ").replace(/\n.*/g,"")}`,_=u.start(v),E=!1,w=await vp(e,process.cwd(),process.env,u),T=i.spawn(w,m,{cols:(P=u.dimensions)==null?void 0:P.columns,rows:(z=u.dimensions)==null?void 0:z.rows,useConpty:E}),N=[u.onDidChangeDimensions&&u.onDidChangeDimensions(H=>T.resize(H.columns,H.rows))];return{onData:T.onData.bind(T),write:T.write.bind(T),resize:T.resize.bind(T),exit:new Promise(H=>{T.onExit(({exitCode:R,signal:Y})=>{if(N.forEach(U=>U==null?void 0:U.dispose()),u.stop(v,_),H({code:R,signal:Y}),process.platform==="win32")try{T.kill()}catch{}})}),async terminate(){T.kill("SIGKILL")}}}}async function vp(e,t=process.cwd(),r,n){if(process.platform!=="win32")return e;if(gr.isAbsolute(e))return await Ku(e)||e;if(/[/\\]/.test(e)){let a=gr.join(t,e);return await Ku(a)||a}let i,o;if(r){for(let a of Object.keys(r))if(a.toLowerCase()==="path"){let c=r[a];typeof c=="string"&&(i=c,o=c.split(gr.delimiter).filter(Boolean),o.push(gr.join(r.ProgramW6432||"C:\\Program Files","Docker\\Docker\\resources\\bin")));break}}if(o===void 0||o.length===0){n.write(`findLocalWindowsExecutable: No PATH to look up exectuable '${e}'.`);let a=gr.join(t,e);return await Ku(a)||a}for(let a of o){let c;gr.isAbsolute(a)?c=gr.join(a,e):c=gr.join(t,a,e);let u=await Ku(c);if(u)return u}n.write(`findLocalWindowsExecutable: Exectuable '${e}' not found on PATH '${i}'.`);let s=gr.join(t,e);return await Ku(s)||s}var PR=process.env.PATHEXT,OR=PR?PR.toLowerCase().split(";"):[".com",".exe",".bat",".cmd"];async function Ku(e){if(OR.indexOf(gr.extname(e))!==-1)return await no(e)?e:void 0;for(let t of OR){let r=e+t;if(await no(r))return r}}async function yp(e,t,r,n){if(typeof e!="string"||n==="forWSLPath"&&Yu(e)||n==="always"){let i,o;typeof e!="string"?(i=e.wslDistro,o=e.wslPath):n==="forWSLPath"||Yu(e)?(i=Ep(e),o=await Xu(i,e,r)):(i=await lz(r)||(()=>{throw new Error("No default WSL distro found.")})(),o=await Xu(i,e,r));let s=cz("wsl",["-d",i,"-e"],o),a=await uz("wsl",["-d",i,"-e"],o,t),c=Ry("wsl",o,s,a,r);return c.env=await fz(c,i,r),c.toCommonURI=async u=>{try{return io.file((await Le({exec:s,cmd:"wslpath",args:["-w",u],output:r})).stdout.toString().trim())}catch(l){return}},c}return await Iy(e,t)}async function Iy(e,t){return{type:"local",platform:process.platform,exec:ys(e),ptyExec:await az(e,t),cwd:e,env:process.env,path:gr,homedir:async()=>mp.homedir(),tmpdir:async()=>mp.tmpdir(),isFile:no,isFolder:gI,readFile:bt,writeFile:ps,rename:Ga,mkdirp:async r=>{await kr(r)},readDir:di,getuid:async()=>process.getuid(),getgid:async()=>process.getgid(),toCommonURI:async r=>io.file(r)}}function Ry(e,t,r,n,i){let o;return{type:e,platform:"linux",exec:r,ptyExec:n,cwd:t,env:{},path:gr.posix,async homedir(){var s;return typeof o=="undefined"&&(o=this.env.HOME||((s=Cp((await this.readFile("/etc/passwd")).toString(),(await this.getuid()).toString()))==null?void 0:s.home)||"/"),o},async tmpdir(){return this.env.TMPDIR||"/tmp"},isFile:async s=>{try{return await Le({exec:r,cmd:"test",args:["-f",s],output:St}),!0}catch(a){if((a==null?void 0:a.code)!==1)throw a;return!1}},isFolder:async s=>{try{return await Le({exec:r,cmd:"test",args:["-d",s],output:St}),!0}catch(a){if((a==null?void 0:a.code)!==1)throw a;return!1}},readFile:async s=>{try{return(await Le({exec:r,cmd:"cat",args:[s],output:St})).stdout}catch(a){let c=new Error(`Could not read file: ${s}`);throw c.originalError=a,c.code="ENOENT",c}},writeFile:async(s,a)=>{await Le({exec:r,cmd:"/bin/sh",args:["-c",`cat >'${s}'`],stdin:a,output:St})},rename:async(s,a)=>{await Le({exec:r,cmd:"mv",args:[s,a],output:St})},mkdirp:async s=>{await Le({exec:r,cmd:"mkdir",args:["-p",s],output:St})},readDir:async s=>(await Le({exec:r,cmd:"ls",args:["-a",s],output:St})).stdout.toString().trim().split(`
`).filter(a=>a!=="."&&a!==".."),readDirWithTypes:async s=>{let a={f:1,"*":1,"/":2,"@":64};return(await Le({exec:r,cmd:"ls",args:["-aF",s],output:St})).stdout.toString().trim().split(`
`).map(c=>"/*@=%|>".indexOf(c[c.length-1])!==-1?[c.substr(0,c.length-1),c[c.length-1]]:[c,"f"]).filter(([c])=>c!=="."&&c!=="..").map(([c,u])=>[c,a[u]||0])},getuid:async()=>{let s=await Le({exec:r,cmd:"id",args:["-u"],output:St});return parseInt(s.stdout.toString().trim(),10)},getgid:async()=>{let s=await Le({exec:r,cmd:"id",args:["-g"],output:St});return parseInt(s.stdout.toString().trim(),10)},toCommonURI:()=>Promise.resolve(void 0)}}var DR=/^\\\\wsl(\.localhost|\$)?\\/;function Yu(e){return DR.test(e.toLowerCase())}function Ep(e){let t=e.toLowerCase(),r=DR.exec(t);if(!r)return"";let n=t.indexOf("\\",r[0].length);return e.substring(r[0].length,n)}async function lz(e){let{stdout:t}=await Le({exec:ys(void 0),cmd:"wsl",args:["-l","-v"],output:e}),r=t.toString(t[1]===0?"utf16le":"utf8").trim();return(/^\*\s*(\S+)/m.exec(r)||[])[1]}async function fz(e,t,r){let n="WSL env probe",i=r.start(n),o;try{let a=Le({exec:ys(void 0),cmd:"wsl",args:["-d",t],stdin:Buffer.from(`printenv ; exit
`),output:r,print:"onerror"});if(!await Promise.race([a,oo(2e3)])&&(r.write("WSL env probe is taking longer than 2 seconds."),!await Promise.race([a,oo(8e3)])))throw r.write("WSL env probe is taking longer than 10 seconds. Avoid waiting for user input in your shell's startup scripts. Continuing."),new Error("Continue");let{stdout:c}=await a;o=c.toString()}catch{let{stdout:a}=await Le({exec:e.exec,cmd:"printenv",output:r,print:"onerror"});o=a.toString()}let s=dz(o);return delete s.WSL_INTEROP,delete s.PWD,r.stop(n,i),s}function dz(e){let t={};return e.trim().split(`
`).forEach(r=>{let n=r.indexOf("=");n!==-1&&(t[r.substr(0,n)]=r.substr(n+1))}),t}async function Xu(e,t,r){let{stdout:n}=await Le({exec:ys(void 0),cmd:"wsl",args:["-d",e,"-e","wslpath","-u",t],output:r});return n.toString().trim()}async function Py(e,t){if(Yu(e)){let r=Ep(e);return Xu(r,e,t)}return e}async function NR(e,t,r){let{stdout:n}=await Le({exec:ys(void 0),cmd:"wsl",args:["-d",e,"-e","wslpath","-w",t],output:r});return n.toString().trim()}function Qu(e){let t=/^'?v?(\d+(\.\d+)*)/.exec(e);if(!!t)return t[1].split(".").map(r=>parseInt(r,10))}function _p(e,t){for(let r=0,n=Math.max(e.length,t.length);r<n;r++){let i=e[r]||0,o=t[r]||0;if(i!==o)return i<o}return!1}async function Ju(e,t){if(!t){try{return require(e)}catch(r){}return}try{return require(`${t}/node_modules.asar/${e}`)}catch(r){}try{return require(`${t}/node_modules/${e}`)}catch(r){}}var wp=M(require("path"));async function LR(e,t){let r=await kR(e.cliHost,"agent-extra-socket",e.output);if(!r)return;let n=await Oy(t,"agent-socket");if(!n)return;let i=await Oy(t,"homedir");try{let{stdout:s}=await t.exec(`ls '${i}/private-keys-v1.d' 2>/dev/null`);if(s.trim())return}catch{}let o=(async()=>{await t.exec(`mkdir -p -m 700 '${wp.posix.dirname(n)}'`);let s=await kR(e.cliHost,"homedir",e.output),a=await Oy(t,"homedir");s&&a&&(await Zu(e,{shellServer:t},e.cliHost.path.join(s,"pubring.kbx"),wp.posix.join(a,"pubring.kbx"),"gpg"),await Zu(e,{shellServer:t},e.cliHost.path.join(s,"trustdb.gpg"),wp.posix.join(a,"trustdb.gpg"),"gpg")),await pz(e.cliHost,e.output)})();return{remoteGpgSocket:n,localGpgSocket:r,ready:o}}async function kR(e,t,r){try{let{stdout:n}=await Le({exec:e.exec,cmd:"gpgconf",args:["--list-dir",t],output:r,print:!0}),i=n.toString().trim();if(i.indexOf(`
`)!==-1){let o=new RegExp(`^${t}:(.*)$`,"m").exec(i);o&&(i=o[1])}return e.platform==="win32"&&/^\/.\//.test(i)&&(i=`${i.charAt(1)}:${i.substr(2).replace(/\//g,"\\")}`),i}catch(n){return}}async function Oy(e,t){try{let{stdout:r}=await e.exec(`gpgconf --list-dir ${t}`),n=r.trim();if(n.indexOf(`
`)!==-1){let i=new RegExp(`^${t}:(.*)$`,"m").exec(n);if(i)return i[1]}return n}catch(r){return}}async function pz(e,t){try{await Le({exec:e.exec,cmd:"gpg-connect-agent",args:["updatestartuptty","/bye"],output:t})}catch(r){}}async function FR(e,t,r){try{let{stdout:n}=await Le({exec:e.exec,cmd:"git",args:["rev-parse","--show-cdup"],cwd:t,output:r}),i=n.toString().trim();return e.path.resolve(t,i)}catch{return}}async function MR({exec:e},t,r){try{let{stdout:n,stderr:i}=await Le({exec:e,cmd:"git",args:["credential",t],env:{GIT_TERMINAL_PROMPT:"0"},stdin:Buffer.from(r),output:St});return{stdout:n.toString(),stderr:i.toString(),code:0}}catch(n){if(!(n&&n.stdout&&n.stderr))throw n;let{stdout:i,stderr:o,code:s}=n;return{stdout:i.toString(),stderr:o.toString(),code:s||0}}}async function qR(e,t,r){let n;try{let{stdout:i}=await Le({exec:e.exec,cmd:"git",args:["remote","-v"],cwd:t.rootFolderPath,output:r});n=i.toString()}catch{return}return Array.from(new Set(hz(/^[^\s]+\s+([^\s]+)/gm,n,1)))}function hz(e,t,r){return{[Symbol.iterator]:function*(){let n;for(;n=e.exec(t);)yield n[r],e.lastIndex===n.index&&e.lastIndex++}}}var ao=M(require("stream"));async function $R(e,t){let{stdout:r}=await e.exec(`cat /proc/${t}/environ`,{logOutput:!1});return r.split("\0").map(n=>{let i=n.indexOf("=");return i!==-1?[n.slice(0,i),n.slice(i+1)]:[]}).reduce((n,[i,o])=>(i&&(n[i]=o),n),{})}async function Dy(e){let t='for pid in `cd /proc && ls -d [0-9]*`; do { echo $pid ; readlink /proc/$pid/cwd ; readlink /proc/$pid/ns/mnt ; cat /proc/$pid/stat | tr "\n" " " ; echo ; xargs -0 < /proc/$pid/environ ; xargs -0 < /proc/$pid/cmdline ; } ; echo --- ; done ; readlink /proc/self/ns/mnt 2>/dev/null',{stdout:r}=await e.exec(t,{logOutput:!1}),n=6,i=r.split(`
---
`),o=i.pop().trim();return{processes:i.map(a=>a.split(`
`)).filter(a=>a.length>=n).map(([a,c,u,l,f,d])=>{let p=/.*\) [^ ]* ([^ ]*) ([^ ]*)/.exec(l)||[];return{pid:a,ppid:p[1],pgrp:p[2],cwd:c,mntNS:u,cmd:d,env:f.split(" ").reduce((h,m)=>{let v=m.indexOf("=");return v!==-1&&(h[m.substr(0,v)]=m.substr(v+1)),h},{})}}),mntNS:o}}function jR(e){let t={};return e.forEach(r=>t[r.pid]={process:r,childProcesses:[]}),e.filter(r=>r.ppid).forEach(r=>{var n;return(n=t[r.ppid])==null?void 0:n.childProcesses.push(t[r.pid])}),t}function Ny(e,t="  ",r="  "){return`${r}${e.process.pid}: ${e.process.cmd}
${e.childProcesses.map(n=>Ny(n,t,r+t))}`}var C4=qO(),Xa=HO(),zy=GO();async function Ky(e,t){var E,w,T,N;let{output:r}=e,n="Launching Remote-Containers helper.",i=r.start(n);if(RR)return r.stop(n,i),{remoteEnv:{},ready:Promise.resolve()};let s=(await(0,zO.promisify)(WO.randomBytes)(20)).toString("hex"),a={},c=A4(e.cliHost),u=c?so.posix.join(((E=t.env)==null?void 0:E.TMPDIR)||"/tmp",`vscode-ssh-auth-${s}.sock`):void 0;c?(a[u]=c,r.write(`ssh-agent: SSH_AUTH_SOCK in container (${u}) forwarded to host (${c}).`)):r.write("ssh-agent: SSH_AUTH_SOCK not set on host.");let l=await LR(e,t.shellServer);l&&(a[l.remoteGpgSocket]=l.localGpgSocket);let f=so.posix.join(((w=t.env)==null?void 0:w.TMPDIR)||"/tmp",`vscode-remote-containers-ipc-${s}.sock`),d=so.posix.join(((T=t.env)==null?void 0:T.TMPDIR)||"/tmp",`vscode-remote-containers-server-${s}.js`),p=so.posix.join(((N=t.env)==null?void 0:N.TMPDIR)||"/tmp",`vscode-remote-containers-${s}.js`),h=w4(e,t,d,p,a,f),m=h.then(P=>P.ready),v=h.then(P=>P.mrpcExec),_=h.then(P=>P.mrpcExecToEnd);return m.catch(console.error),e.onAdoptProcess(P=>I4(t.shellServer,f,u,P).catch(console.error)),r.stop(n,i),{remoteContainersCLI:p,remoteEnv:u?{SSH_AUTH_SOCK:u,REMOTE_CONTAINERS_IPC:f}:{REMOTE_CONTAINERS_IPC:f},mrpcExec:v,mrpcExecToEnd:_,ready:m}}async function w4(e,{remoteExec:t,nodeExecutable:r,shellServer:n},i,o,s,a){let{cliHost:c,output:u}=e,l=Object.keys(s),f=pe($({},l.reduce((H,R)=>(H[R]="duplex",H),{})),{rpc:"async",ready:"async"}),d={exec:"async",stdin:"sink",stdout:"source",stderr:"source",exit:"async",terminate:"async",dispose:"async",execToEnd:"async"},p={REMOTE_CONTAINERS_SOCKETS:JSON.stringify(l),REMOTE_CONTAINERS_IPC:a},h=bt(so.join(e.extensionPath,"dist","common","remoteContainersCLI.js"),{encoding:"utf8"}),m=bt(so.join(e.extensionPath,"dist","common","remoteContainersServer.js"),{encoding:"utf8"}),v=`EOF-${o}`;await n.exec(`cat <<'${v}' >${o}
${await h}
${v}
`);let _=[],E=`EOF-${i}`;await n.exec(`cat <<'${E}' >${i}
${await m}
${E}
`),_.push(i);let w=await t({env:p,cmd:r,args:_,output:u}),T=new KO.StringDecoder;w.stderr.on("data",H=>{let R=T.write(H).replace(/^.*DeprecationWarning: Buffer\(\) is deprecated.*$\r?\n?/mg,"").trim();R&&u.write(rt(`Remote-Containers server: ${R}`))}),w.exit.then(({code:H,signal:R})=>{u.write(`Remote-Containers server terminated (code: ${H}, signal: ${R}).`)},H=>{u.write(rt(`Remote-Containers did not launch: ${H&&(H.stack||H.message)||String(H)}`))});let N,P=new Promise(H=>N=H),z=C4(d,f)(pe($({},l.reduce((H,R)=>{let Y=s[R];return H[R]=()=>x4(e,Y),H},{})),{rpc:async(H,R)=>{try{let Y=JSON.parse(H),U=await MR(c,Y.command,Y.stdin);R(void 0,JSON.stringify(U))}catch(Y){console.error(Y),R(Y)}},ready:H=>{N(),H()}}));return(0,VO.default)(Xa.source(w.stdout),z.createStream(),Xa.sink(w.stdin)),{ready:P,mrpcExec:S4(z),mrpcExecToEnd:b4(z)}}function S4(e){return async t=>{let{cmd:r,args:n,cwd:i,env:o,output:s}=t,a=`Run in container: ${r} ${(n||[]).join(" ").replace(/\n.*/g,"")}`,c=s.start(a),u=await new Promise((l,f)=>{e.exec({cmd:r,args:n,cwd:i,env:o},(d,p)=>{d?f(d):l(p)})});return{stdin:zy.sink(e.stdin(u,l=>{l&&l.message!=="unexpected end of parent stream"&&console.error(l)})),stdout:zy.source(e.stdout(u)),stderr:zy.source(e.stderr(u)),exit:new Promise((l,f)=>{e.exit(u,(d,p)=>{s.stop(a,c),d?f(d):l(p)})}),terminate:async()=>new Promise((l,f)=>{e.terminate(u,d=>{d?f(d):l()})})}}}function b4(e){return async t=>{let{cmd:r,args:n,cwd:i,env:o,output:s}=t,a=`Run in container: ${r} ${(n||[]).join(" ").replace(/\n.*/g,"")}`,c=s.start(a);return new Promise((u,l)=>{e.execToEnd({cmd:r,args:n,cwd:i,env:o},(f,d)=>{if(s.stop(a,c),f||!d)l({stdin:new ao.Writable,stdout:ao.Readable.from([]),stderr:ao.Readable.from([]),exit:Promise.reject(f),terminate:async()=>{}});else{let p=ao.Readable.from([Buffer.from(d.stdout.data)]),h=new Promise(_=>p.on("end",_)),m=ao.Readable.from([Buffer.from(d.stderr.data)]),v=new Promise(_=>m.on("end",_));u({stdin:new ao.Writable,stdout:p,stderr:m,exit:Promise.all([h,v]).then(()=>({code:d.code,signal:d.signal})),terminate:async()=>{}})}})})}}function x4(e,t){let{cliHost:r}=e;if(r.type!=="local")return T4(e,t);if(r.platform!=="win32"||t.startsWith("\\\\.\\pipe\\"))return Xa.duplex(Lp.connect(t));let n=new Lp.Socket;return(async()=>{let i=await r.readFile(t),o=i.indexOf(10),s=parseInt(i.slice(0,o).toString(),10),a=i.slice(o+1);n.connect(s,"127.0.0.1",()=>{n.write(a,c=>{c&&(console.error(c),n.destroy())})})})().catch(i=>{console.error(i),n.destroy()}),Xa.duplex(n)}function T4({cliHost:e,fireEvent:t,output:r},n){let i=e.exec({cmd:"socat",args:["-",`UNIX-CONNECT:${n}`],output:r});i.then(u=>u.exit.then(({code:l,signal:f})=>{(l||f)&&(r.write(rt(`socat terminated (code: ${l}, signal: ${f}).`)),l===127&&t({type:"socatNotFound"}))})).catch(u=>{r.write(rt(`socat did not launch: ${u&&(u.stack||u.message)||String(u)}`))});let o=i.then(u=>Xa.sink(u.stdin)),s=i.then(u=>Xa.source(u.stdout));return{sink:u=>{o.then(l=>l(u))},source:(u,l)=>{s.then(f=>f(u,l))}}}var Yy="\\\\.\\pipe\\openssh-ssh-agent";function A4(e){if(e.env.SSH_AUTH_SOCK)return e.env.SSH_AUTH_SOCK;if(e.platform==="win32")return Yy}var kp=new Set;async function I4(e,t,r,n){let i=await n.processId;if(i&&i>0){let o=await $R(e,i),s=o.REMOTE_CONTAINERS_IPC;s&&s!==t&&!kp.has(s)&&s.indexOf("vscode-remote-containers-ipc")!==-1&&(kp.add(s),await e.exec(`rm '${s}' && ln -s '${t}' '${s}'`));let a=o.SSH_AUTH_SOCK;a&&r&&a!==r&&!kp.has(a)&&a.indexOf("vscode-ssh-auth")!==-1&&(kp.add(a),await e.exec(`rm '${a}' && ln -s '${r}' '${a}'`))}}var uD=M(require("net")),lD=M(cD());async function fD({forwardedPorts:e,output:t,getLogLevel:r},n,i,o){t.write(`Port forwarding for container port ${i} starts listening on local port.`,le.Debug);let s=o?{VSCODE_REMOTE_CONTAINERS_SESSION:o}:void 0;return new Promise((a,c)=>{let u=new Set,l=uD.createServer({pauseOnConnect:!0},f=>{let d=f.remotePort,p=l.address().port;t.write(`Port forwarding connection from ${d} > ${p} > ${i} in the container.`),r()===le.Trace&&(async()=>{let h=await(0,lD.default)("port",d);t.write(`Port forwarding process for ${d} > ${p} > ${i} in the container:
${JSON.stringify(h,void 0,"  ")}`)})().catch(console.error),F4(t,n,[n.nodeExecutable,"-e",`
				const net = require('net');
				process.stdin.pause();
				const client = net.createConnection({ port: ${i} }, () => {
					client.pipe(process.stdout);
					process.stdin.pipe(client);
				});
				client.on('close', function (hadError) {
					console.error(hadError ? 'Remote close with error' : 'Remote close');
					process.exit(hadError ? 1 : 0);
				});
				client.on('error', function (err) {
					process.stderr.write(err && (err.stack || err.message) || String(err));
				});
			`],s).then(h=>{let m=!1;h.exit.then(({code:v,signal:_})=>{m||(u.delete(f),f.end()),t.write(`Port forwarding ${d} > ${p} > ${i} terminated${m?" by extension":""} with code ${v} and signal ${_}.`)}),h.stderr.on("data",v=>{t.write(`Port forwarding ${d} > ${p} > ${i} stderr: ${v.toString("utf8")}`,le.Debug)}),f.on("close",v=>{t.write(`Port forwarding ${d} > ${p} > ${i}: Local close${v?" with error":""}`,le.Debug),m=!0,u.delete(f),h.terminate().catch(console.error)}),h.stdout.pipe(f),f.pipe(h.stdin),u.add(f)}).catch(console.error)});l.on("listening",()=>{let f={targetPort:i,server:l,connections:u};l.on("close",()=>{e.delete(f)}),e.add(f),t.write(`Port forwarding local port ${l.address().port} to container port ${i}`),a(l)}),l.on("error",f=>{if(f&&(f.code==="EADDRINUSE"||f.code==="EACCES")){l.listen(0,"127.0.0.1");return}c(f)}),l.on("close",()=>{c(new Error("Closed"))}),l.listen(i,"127.0.0.1")})}async function F4(e,t,r,n){return t.remoteExec({env:n,cmd:r[0],args:r.slice(1),output:e})}var dD=M(require("events")),Qa=class{constructor(){this.nodeEmitter=new dD.EventEmitter;this.event=t=>(this.nodeEmitter.on("event",t),{dispose:()=>{this.nodeEmitter.off("event",t)}})}fire(t){this.nodeEmitter.emit("event",t)}dispose(){this.nodeEmitter.removeAllListeners()}};var pD=M(require("path"));var M4=M(require("http")),q4=M(require("https"));function ol(e,t={}){return new Promise((r,n)=>{let i=e.startsWith("https:")?q4:M4,o;if(Object.keys(t).length>0){let a=new URL(e);o={headers:t,host:a.host,path:a.pathname}}i.get(o!=null?o:e,a=>{var c;if(a.statusCode<200||a.statusCode>299){if(a.statusCode===302){let u=(c=a.headers)==null?void 0:c.location;u&&r(ol(u,t))}n(new Error(`HTTP ${a.statusCode}: ${a.statusMessage}`))}else{a.on("error",n);let u=[];a.on("data",l=>u.push(l)),a.on("end",()=>r(Buffer.concat(u)))}}).on("error",n)})}async function sl(e){let t=await bt(pD.join(e,"package.json"),"utf8");return JSON.parse(t)}var vr=!0;var Ja=M(require("path"));function tE(e,t){let r,n=e.platform==="win32",i=pe($({},e),{get env(){return r||(r=mD(n,e.env))}}),o=U4.bind(void 0,n,i);return e.containerWorkspaceFolder&&(i.containerWorkspaceFolder=gD(o,e.containerWorkspaceFolder)),qp(o,t)}function hD(e,t,r,n){let i=e==="win32";return qp(H4.bind(void 0,i,t,mD(i,r)),n)}function qp(e,t){if(typeof t=="string")return gD(e,t);if(Array.isArray(t))return t.map(r=>qp(e,r));if(t&&typeof t=="object"){let r=Object.create(null);return Object.keys(t).forEach(n=>{r[n]=qp(e,t[n])}),r}return t}var $4=/\$\{(.*?)\}/g;function mD(e,t){if(e){let r=Object.create(null);return Object.keys(t).forEach(n=>{r[n.toLowerCase()]=t[n]}),r}return t}function gD(e,t){return t.replace($4,j4.bind(void 0,e))}function j4(e,t,r){let n,i=r.split(":");return i.length>1&&(r=i[0],n=i[1]),e(t,r,n)}function U4(e,t,r,n,i){switch(n){case"env":case"localEnv":return vD(e,t.env,i,r,t.configFile);case"localWorkspaceFolder":return t.localWorkspaceFolder!==void 0?t.localWorkspaceFolder:r;case"localWorkspaceFolderBasename":return t.localWorkspaceFolder!==void 0?(e?Ja.win32:Ja.posix).basename(t.localWorkspaceFolder):r;case"containerWorkspaceFolder":return t.containerWorkspaceFolder!==void 0?t.containerWorkspaceFolder:r;case"containerWorkspaceFolderBasename":return t.containerWorkspaceFolder!==void 0?Ja.posix.basename(t.containerWorkspaceFolder):r;default:return r}}function H4(e,t,r,n,i,o){switch(i){case"containerEnv":return vD(e,r,o,n,t);default:return n}}function vD(e,t,r,n,i){if(r){e&&(r=r.toLowerCase());let o=t[r];return typeof o=="string"?o:""}throw new vt({description:`'${n}'${i?` in ${Ja.posix.basename(i.path)}`:""} can not be resolved because no environment variable name is given.`})}var Za=0,CD=/Extension host agent listening on (\d+)/;var uo;(function(a){a[a.Begin=0]="Begin",a[a.CloningRepository=1]="CloningRepository",a[a.BuildingImage=2]="BuildingImage",a[a.StartingContainer=3]="StartingContainer",a[a.InstallingServer=4]="InstallingServer",a[a.StartingServer=5]="StartingServer",a[a.End=6]="End"})(uo||(uo={}));function nE(e,t,r){return{enabled:e,skipNonBlocking:t,output:r,onDidInput:new Qa().event,done:()=>{}}}var wD="updateContentCommand";async function SD(e){let{params:t,startedAt:r,sharedDataFolder:n,sharedDataFolderIsLocalCacheFolder:i,remoteWorkspaceFolder:o,containerUser:s,containerGroup:a,containerEnv:c,remoteExec:u,remotePtyExec:l,remoteExecAsRoot:f,rootShellServer:d}=e,p;d&&s==="root"?p=d:p=await Vu(u,t.output,t.sessionId),s||(s=await B4(p)),!f&&s==="root"&&(f=u);let h=await h6(p),m=await W4(p,s);m||t.output.write(Gg(`User ${s} not found in /etc/passwd.`));let v=await G4(c,m),_=await bD(c,m),E=await Y4(_,t.product),{commit:w,quality:T}=t.product,N=w&&await V4(E,w,T||"insider",t.web),P=p6(h,T==="stable"),z=w&&n&&await xD(ce.posix,n,P,w,T||"insider",t.web),H=N&&await X4(N),R;d?R=Promise.resolve(d):s==="root"&&(R=Promise.resolve(p));let Y={startedAt:r,osRelease:h,build:P,user:s,gid:a||(m==null?void 0:m.gid),env:c,shell:v,homeFolder:_,userDataFolder:E,sharedDataFolderIsLocalCacheFolder:i,sharedDataFolder:n,installFolder:N,sharedInstallFolder:z,remoteWorkspaceFolder:o,nodeExecutable:H,remoteExec:u,remotePtyExec:l,remoteExecAsRoot:f,shellServer:p};return(R||f)&&(Y.launchRootShellServer=()=>R||(R=Vu(f,t.output))),Y}async function B4(e){return(await e.exec("id -un")).stdout.trim()}async function bD(e,t){return e.HOME||t&&t.home||"/root"}async function G4(e,t){return e.SHELL||t&&t.shell||"/bin/sh"}async function W4(e,t){let{stdout:r}=await e.exec("cat /etc/passwd",{logOutput:!1});return Cp(r,t)}function Cp(e,t){return e.split(/\r?\n/).map(n=>n.split(":")).map(n=>({name:n[0],uid:n[2],gid:n[3],home:n[5],shell:n[6]})).find(n=>n.name===t||n.uid===t)}async function V4(e,t,r,n){return ce.posix.join(e,"bin",`${t}${r==="stable"?"":`-${r}`}${n?"-web":""}`)}async function xD(e,t,r,n,i,o){return e.join(t,"bin",r.id,`${n}${i==="stable"?"":`-${i}`}${o?"-web":""}`)}function hs(e){return ce.posix.join(e.userDataFolder,"data/Machine")}function z4(e){return ce.posix.join(e.userDataFolder,"data/Machine/settings.json")}function K4(e){return ce.posix.join(e,".vscode-remote")}async function Y4(e,t){return ce.posix.join(e,t.serverDataFolderName)}function TD(e){return ce.posix.join("/var",/^\.*(.*)$/.exec(e.serverDataFolderName)[1])}async function X4(e){return ce.posix.join(e,"node")}async function Up(e,t,r,n,i,o=Za){var _;await Q4(e,t),await x6(e,t),await T6(e,t);let s=await J4(e,t,r,n),{serverDownloaded:a}=await r6(e,t),c,u,l=Promise.resolve(),f;if(!e.cliMode&&t.nodeExecutable){let E=await Ky(e,t);c=E.remoteContainersCLI,u=E.remoteEnv,l=E.ready,f=E.mrpcExec}let p=e.computeExtensionHostEnv||t.installFolder&&e.cliMode||e.postCreate.enabled?A6(e,t,r,f).then(E=>$($($($({},E),u),e.cliMode?{}:{REMOTE_CONTAINERS:"true"}),r.remoteEnv?hD(e.cliHost.platform,r.configFilePath,t.env,r.remoteEnv):{})):Promise.resolve({}),h=(_=s["remote.containers.gitCredentialHelperConfigLocation"])!=null?_:e.credentialHelperConfigLocation;!e.cliMode&&t.nodeExecutable&&(await oE(e,t,[".ssh","known_hosts"],"ssh"),h!=="none"&&await iE(t,c,e.output,"system"));let m,v;if(t.installFolder){let E=Array.from(new Set([...r.extensions||[],...(n==null?void 0:n.features.filter(N=>(vr||N.included)&&N.value).reduce((N,P)=>N.concat(P.extensions||[]),[]))||[]])),w=await i6(e,t,E),T=await E6(e,t,o,f,w,p);m=T,e.forwardServerPort&&t.nodeExecutable&&(v=await fD(e,t,T,e.sessionId),m=v.address().port,e.backgroundTasks.push(async()=>b6(e,t,r)))}if(e.postCreate.enabled){let E,w=!1,T=new Promise(P=>E=()=>{w=!0,P()}),N=(async()=>{var P;if((r.waitFor||wD)==="initializeCommand"&&E(),!(e.postCreate.skipNonBlocking&&w)&&(await cE(e,t,r,"onCreateCommand",p,l,i,!1,E),!(e.postCreate.skipNonBlocking&&w)&&(await cE(e,t,r,"updateContentCommand",p,l,i,!!e.prebuild,E),!(e.postCreate.skipNonBlocking&&w)))){if(!e.prebuild){if(await cE(e,t,r,"postCreateCommand",p,l,i,!1,E),e.postCreate.skipNonBlocking&&w||(await wI(e,t,p,l,s),!e.cliMode&&t.nodeExecutable&&(((P=s["remote.containers.copyGitConfig"])!=null?P:e.isCopyGitConfigEnabled)&&(await oE(e,t,[".gitconfig"],"git"),await AD(e,t,p.then(z=>$($({},t.env),z)))),await iE(t,c,e.output,h)),await m6(e,t,r,p,l,i,E),e.postCreate.skipNonBlocking&&w))return;await v6(e,t,r,p,l,i,E)}e.postCreate.done()}})();e.backgroundTasks.push(N),await Promise.race([T,N])}return{hostOrContainerPort:m,hostPortServer:v,remoteEnv:e.computeExtensionHostEnv?await p:{},serverDownloaded:a}}async function Q4(e,t){let r=K4(t.homeFolder);!await Hp(t.shellServer,t.userDataFolder)&&await Hp(t.shellServer,r)&&await dE(e,t,["/bin/sh","-c",`cp -r '${r}' '${t.userDataFolder}'`])}async function J4(e,t,r,n){let i=hs(t),o=ce.posix.join(i,".writeMachineSettingsMarker"),s=z4(t);if(await al(t.shellServer,o)){let a=Object.assign({},...(n==null?void 0:n.features.filter(c=>(vr||c.included)&&c.value&&c.settings).map(c=>c.settings))||[],r.settings);if(Z4(a,r.portsAttributes),e6(a,r.otherPortsAttributes),Object.keys(a).length)return await t.shellServer.exec(`mkdir -p '${ce.posix.dirname(s)}' && cat >'${s}' <<'settingsJSON'
${JSON.stringify(a,null,"	")}
settingsJSON
`),a}try{let{stdout:a}=await t.shellServer.exec(`cat ${s}`);return Cn(a)||{}}catch{return{}}}function Z4(e,t){if(!e||!t)return;let r="remote.portsAttributes";if(!e[r]){e[r]=t;return}for(let n in t)e[r][n]||(e[r][n]=t[n])}function e6(e,t){if(!e||!t)return;let r="remote.otherPortsAttributes";e[r]||(e[r]=t)}async function iE(e,t,r,n){if(t&&n!=="none"){let i=n==="system"?e.launchRootShellServer&&await e.launchRootShellServer():e.shellServer;i?await i.exec(`command -v git >/dev/null 2>&1 && git config --${n} --replace-all credential.helper '!f() { ${e.nodeExecutable} ${t} $*; }; f' || true`):r.write("Cannot configure system wide Git credential helper without root access.")}}async function oE(e,t,r,n){let{cliHost:i}=e,o=i.path.join(await i.homedir(),...r),s=ce.posix.join(t.homeFolder,...r);await Zu(e,t,o,s,n)}async function AD(e,t,r){let{cliHost:n}=e,{env:i}=n,o=["git","config"],s=i.XDG_CONFIG_HOME?[i.XDG_CONFIG_HOME]:[await n.homedir(),".config"],a=n.path.join(...s,...o),c=(async()=>{let u=await r,l=u.XDG_CONFIG_HOME?[u.XDG_CONFIG_HOME]:[t.homeFolder,".config"];return ce.posix.join(...l,...o)})();await Zu(e,t,a,c,"git")}async function Zu(e,t,r,n,i){let o=await t6(e.cliHost,r);if(o)try{let s=await n;await t.shellServer.exec(`# Test for ${s} and ${i}
[ -e ${s} ] && echo ${s} exists && exit 1
command -v ${i} >/dev/null 2>&1 || (echo ${i} not found && exit 1) || exit 1
mkdir -p ${ce.posix.dirname(s)}`),await t.shellServer.exec(`# Copy ${r} to ${s}
${Bp(o.byteLength)} >${s}`,{stdin:o})}catch(s){if(s&&s.code!==1)throw s}}async function t6(e,t){try{return await e.readFile(t)}catch(r){if(r&&(r.code==="ENOENT"||r.code==="EISDIR"))return;throw r}}async function r6(e,t){let{commit:r}=e.product,{installFolder:n,shellServer:i,launchRootShellServer:o,build:s}=t;if(!(r&&n))return{serverDownloaded:void 0};n6(t.osRelease,s),s.preview&&e.output.write(`\r
[1mSupport for ${s.label} is in preview.[22m\r
\r
`);let a=await Hp(i,n),c;a||s===DD[s.arch]&&(o?c=(await o()).exec("apk info | grep -e '^libstdc++$' || (apk update && apk add libstdc++)"):c=i.exec(`apk info | grep -e '^libstdc++$' || (echo "ERROR: libstdc++ not found. Please install." >&2 && exit 1)`));let u=t.sharedInstallFolder;if(u&&await Hp(i,u))return a||await i.exec(`mkdir -p '${ce.posix.dirname(n)}' && ln -snf '${u}' '${n}'`),o&&(async()=>{await(await o()).exec(`touch '${u}'`)})().catch(console.error),await c,{serverDownloaded:!1};if(a)return{serverDownloaded:!1};e.progress(4),e.output.write(`Installing VS Code Server for commit ${r}\r
`);let l=!!(u&&o),f=l?u:n,d=l?await o():i,p={localCacheFolder:e.localCacheFolder,build:s,commit:r,quality:e.product.quality||"insider",web:e.web,output:e.output},h=sE(p),m=await no(h);m||await ID(p);try{t.sharedDataFolderIsLocalCacheFolder?await PD(p):await RD(e,d,h,f)}catch(v){if(v&&v.stderr&&/unexpected end of file|not in gzip format/i.test(v.stderr.toString()))await ID(p),t.sharedDataFolderIsLocalCacheFolder?await PD(p):await RD(e,d,h,f);else throw v}return l&&(await i.exec(`mkdir -p '${ce.posix.dirname(n)}' && ln -snf '${u}' '${n}'`),(async()=>{await d.exec(`cd '${ce.posix.dirname(u)}' && ls -t | tail -n +10 | xargs rm -rf`)})().catch(console.error)),await c,{serverDownloaded:!m}}function n6(e,t){let r=e.version;if(t.minVersion&&r){let n=Qu(r.trim());if(n&&_p(n,t.minVersion)){let i=`${t.label} ${t.minVersion.join(".")} or later required.`;throw new vt({description:i,data:{reload:!1}})}}}async function ID(e){let{build:t,commit:r,quality:n,web:i,output:o}=e,s="Downloading VS Code Server",a=o.start(s);o.write(`${r} ${t.id} ${n} ${i?"web":""}`);let c=sE(e);await kr(ce.dirname(c));try{let u=`${c}_${Date.now()}`;await new Promise((l,f)=>{let d=$p.createWriteStream(u),p=`https://update.code.visualstudio.com/commit:${r}/server-${t.id}${i?"-web":""}/${n}`;yD.https.get(p,m=>{if(m.statusCode<200||m.statusCode>299){f(new vt({description:"Downloading the VS Code Server failed. Please try again later.",originalError:`Failed to download VS Code Server (${p}): HTTP ${m.statusCode} - ${m.statusMessage}`}));return}m.on("error",f),m.pipe(d),m.on("end",l)}).on("error",f)}),await Ga(u,c)}catch(u){throw u||new Error("Failed to download VS Code Server")}finally{o.stop(s,a)}}async function RD(e,t,r,n){let i="Installing VS Code Server",o=e.output.start(i);try{let s=`${n}_${Date.now()}`;await t.exec(`mkdir -p ${s}`);let a=await bt(r);await t.exec(`${Bp(a.byteLength)} | tar --no-same-owner -xz --strip-components 1 -C ${s}`,{stdin:a}),await t.exec(`mv -n ${ce.posix.join(s,".")} ${n}`)}finally{e.output.stop(i,o)}}async function PD(e){let{localCacheFolder:t,build:r,commit:n,quality:i,web:o,output:s}=e,a="Unpacking VS Code Server",c=s.start(a);s.write(`${n} ${r.id} ${i} ${o?"web":""}`);try{let u=await xD(ce,t,r,n,i,o),l=`${u}_${Date.now()}`;await kr(l);let f=sE(e);await(await ys(void 0)({cmd:"tar",args:["--no-same-owner","-xzf",f,"--strip-components","1","-C",l],cwd:process.cwd(),output:s})).exit,await Ey(u,{recursive:!0}),await Ga(l,u)}finally{s.stop(a,c)}}function sE(e){let{localCacheFolder:t,build:r,commit:n,quality:i,web:o}=e,s=ce.join(t,"serverCache",n),a=`vscode-server-${r.id}${i==="stable"?"":`-${i}`}${o?"-web":""}.tar.gz`;return ce.join(s,a)}async function i6(e,t,r){let n="Preparing Extensions",i=e.output.start(n),{sharedDataFolder:o}=t,s=o?l6(o):void 0,a=OD(t),c=await o6(e,t,r);if(t.sharedDataFolderIsLocalCacheFolder)t.shellServer.exec(`mkdir -p '${s}' && ln -s -T '${s}' '${a}' || true`),t.launchRootShellServer&&(await t.launchRootShellServer()).exec(`chown -R ${t.user} ${s}`);else{let u=u6(e.localCacheFolder),l=await s6(e,t,u,s,a,[...c.builtinExtensions,...c.extensions]);a6(e,t,u,s,a,l).catch(console.error)}return e.output.stop(n,i),c}async function o6(e,t,r){let n=hs(t),i=ce.posix.join(n,".installExtensionsMarker"),o=!await al(t.shellServer,i),s=o?[]:e.installBuiltinExtensions||[],a=await e.getExtensionsToInstall(o,r),c=[].concat(...s.map(u=>["--install-builtin-extension",u]),...a.map(u=>["--install-extension",u]));return e.cliMode&&c.length&&c.push("--do-not-sync"),{builtinExtensions:s,extensions:a,args:c}}async function s6(e,t,r,n,i,o){e.output.write(`Extensions cache, install extensions: ${o.join(", ")||"None"}`);let{shellServer:s}=t,a=(await s.exec(`test -d ${i} && ls ${i} || true`)).stdout.trim().split(`
`).filter(c=>!!c);if(n){let c=(await s.exec(`test -d ${n} && ls ${n} || true`)).stdout.trim().split(`
`).filter(l=>!!l),u=c.filter(l=>o.some(f=>l.toLowerCase().startsWith(f.toLowerCase()))&&a.indexOf(l)===-1);if(e.output.write(`Extensions cache, link in container: ${u.join(", ")||"None"}`),u.length){await s.exec(`mkdir -p '${i}' && ln -s '${n}'/* '${i}' || true`);let{launchRootShellServer:l}=t;l&&(async()=>{await(await l()).exec(`cd ${n} && touch ${u.map(d=>`'${d}'`).join(" ")}`)})().catch(console.error)}return{remoteExtensions:[...new Set([...a,...c])],cachedExtensions:c}}else{await kr(r);let c=await di(r),u=c.filter(l=>o.some(f=>l.toLowerCase().startsWith(f.toLowerCase()))&&a.indexOf(l)===-1);if(e.output.write(`Extensions cache, copy to remote: ${u.join(", ")||"None"}`),u.length){let l=ce.basename(r),f=jp.c({cwd:ce.dirname(r)},u.map(h=>ce.join(l,h))),d=ce.posix.join(i,`tmp-${Date.now()}`),p=await new Promise(h=>{let m=[];f.on("data",v=>m.push(v)),f.on("end",()=>h(Buffer.concat(m)))});await s.exec(`# Copy extensions to remote
mkdir -p ${d}
${Bp(p.byteLength)} | tar --no-same-owner -x --strip-components 1 -C ${d}
mv ${d}/* ${i} && rmdir ${d}`,{stdin:p})}return{remoteExtensions:a.concat(u),cachedExtensions:c}}}async function a6(e,t,r,n,i,o){if(n&&!t.launchRootShellServer)return;let s=1e4,a=6e4;for(await oo(s);;)o=await c6(e,t,r,n,i,o),await oo(a)}async function c6(e,t,r,n,i,{remoteExtensions:o,cachedExtensions:s}){let{shellServer:a,launchRootShellServer:c,remoteExec:u}=t,l=(await a.exec(`ls ${i} || true`,{logOutput:"silent"})).stdout.trim().split(`
`).filter(d=>!!d);if(!n){let d=o.filter(p=>l.indexOf(p)===-1);e.output.write(`Extensions cache, remote removals: ${d.join(", ")||"None"}`);for(let p of d)try{await vI(ce.join(r,p))}catch(h){if(!(h&&h.code==="ENOENT"))throw h}}let f=l.filter(d=>o.indexOf(d)===-1&&s.indexOf(d)===-1);if(e.output.write(`Extensions cache, copy to ${n?"shared cache":"local"}: ${f.join(", ")||"None"}`,le.Trace),f.length)if(n){let d=await c();await d.exec(`mkdir -p '${n}' && cd '${i}' && cp ${f.map(p=>`'${p}'`).join(" ")} '${n}'`),await d.exec(`cd '${n}' && ls -t | tail -n +50 | xargs rm -f`)}else{let d=ce.posix.basename(i),p=await u({cmd:"tar",cwd:ce.posix.dirname(i),args:["c",...f.map(_=>ce.posix.join(d,_))],output:e.output}),h=ce.join(ce.dirname(r),`${ce.basename(r)}-${Date.now()}`);await kr(h);let m=jp.x({cwd:h,strip:1}),v=new Promise((_,E)=>{m.on("error",E),m.on("finish",_)});p.stdout.pipe(m),await v;for(let _ of await di(h))await Ga(ce.join(h,_),ce.join(r,_));await Ey(h)}return{remoteExtensions:l,cachedExtensions:s}}var aE="extensionsCache";function u6(e){return ce.join(e,aE)}function l6(e){return ce.posix.join(e,aE)}function OD(e){return ce.posix.join(e.userDataFolder,aE)}var f6={x64:{label:"x86-64",id:"linux-x64",arch:"x64",stable:!0,preview:!1},armhf:{label:"ARM",id:"linux-armhf",arch:"armhf",stable:!0,preview:!0},arm64:{label:"ARM64",id:"linux-arm64",arch:"arm64",stable:!0,preview:!0}},DD={x64:{label:"Alpine Linux",id:"linux-alpine",arch:"x64",stable:!0,preview:!0,minVersion:[3,9]},arm64:{label:"Alpine Linux ARM64",id:"alpine-arm64",arch:"arm64",stable:!0,preview:!0,minVersion:[3,9]}},d6={x86_64:"x64",armv7l:"armhf",arm64:"arm64",aarch64:"arm64"};function p6(e,t){let r=d6[e.hardware];if(e.id==="alpine"){let i=r&&DD[r];if(!i)throw new vt({description:`Alpine Linux is not supported on the hardware architecture '${e.hardware}' of the container.`,data:{learnMoreUrl:"https://aka.ms/vscode-remote/linux",reload:!1}});return i}let n=r&&f6[r];if(!n||t&&!n.stable)throw new vt({description:`The hardware architecture '${e.hardware}' of the container is not supported.`,data:{learnMoreUrl:"https://aka.ms/vscode-remote/linux",reload:!1}});return n}async function h6(e){let t="unknown",r="unknown",n="unknown";try{t=(await e.exec("uname -m")).stdout.trim();let{stdout:i}=await e.exec("(cat /etc/os-release || cat /usr/lib/os-release) 2>/dev/null");r=(i.match(/^ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound",n=(i.match(/^VERSION_ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound"}catch(i){console.error(i)}return{hardware:t,id:r,version:n}}async function cE(e,t,r,n,i,o,s,a,c){let u=ce.posix.join(hs(t),`.${n}Marker`),l=await al(t.shellServer,u)||a;await uE(e,t,r,n,i,o,s,l,c)}async function m6(e,t,r,n,i,o,s){let a=ce.posix.join(hs(t),".postStartCommandMarker"),c=!!t.startedAt&&await g6(t.shellServer,a,t.startedAt);await uE(e,t,r,"postStartCommand",n,i,o,c,s)}async function g6(e,t,r){try{return await e.exec(`mkdir -p '${ce.posix.dirname(t)}' && [ "$(cat '${t}' 2>/dev/null)" != '${r}' ] && echo '${r}' > '${t}'`),!0}catch(n){return!1}}async function v6(e,t,r,n,i,o,s){await uE(e,t,r,"postAttachCommand",n,i,o,!0,s)}async function uE({postCreate:e},t,r,n,i,o,s,a,c){let u=r[n];if(a&&u&&(typeof u=="string"?u.trim():u.length)){await o,s&&await s();let l=`Running ${n}...`,f=typeof u=="string"?u:u.join(" "),d=gt({event(p){e.output.event(p),p.type==="raw"&&p.text.includes("::endstep::")&&e.output.event({type:"progress",name:l,status:"running",stepDetail:""}),p.type==="raw"&&p.text.includes("::step::")&&e.output.event({type:"progress",name:l,status:"running",stepDetail:`${p.text.split("::step::")[1].split(`\r
`)[0]}`})},get dimensions(){return e.output.dimensions},onDidChangeDimensions:e.output.onDidChangeDimensions},le.Info);try{d.event({type:"progress",name:l,status:"running",stepDetail:f});let p=t.remoteWorkspaceFolder||t.homeFolder;d.raw(`[1mRunning the ${n} from devcontainer.json...[0m\r
\r
`),await fE(pe($({},e),{output:d}),t,typeof u=="string"?["/bin/sh","-c",u]:u,p,{remoteEnv:await i,print:"continuous"}),d.raw(`\r
`),d.event({type:"progress",name:l,status:"succeeded"})}catch(p){if(d.event({type:"progress",name:l,status:"failed"}),p&&(p.code===130||p.signal===2))d.raw(`\r
[1m${n} interrupted.[0m\r
\r
`);else throw new vt({description:`The ${n} in the devcontainer.json failed.`,originalError:p})}}n===(r.waitFor||wD)&&c()}async function lE(e,t){try{return await e.exec(`test -f ${t}`),!0}catch(r){return!1}}async function al(e,t){try{return await e.exec(lp(t)),!0}catch(r){return!1}}function lp(e){return`test ! -f '${e}' && set -o noclobber && mkdir -p '${ce.posix.dirname(e)}' && { > '${e}' ; } 2> /dev/null`}async function Hp(e,t){try{return await y6(e,t),!0}catch(r){return!1}}async function y6(e,t){return e.exec(`test -d ${t}`)}async function E6(e,t,r,n,i,o){let{userDataFolder:s,installFolder:a,sharedInstallFolder:c,shellServer:u}=t,{processes:l,mntNS:f}=await Dy(u),d=new RegExp(`${ce.posix.join(ce.posix.dirname(a).replace(".","\\."),"[^/]*","server.sh")}`),p=l.filter(R=>R.mntNS===f&&d.test(R.cmd)),{current:h,others:m}=p.reduce((R,Y)=>(R[(Y.cwd===a||Y.cwd===c)&&d.test(Y.cmd)?"current":"others"].push(Y),R),{current:[],others:[]});if(!e.cliMode&&m.length){e.output.write(`Terminating old extension host agent.\r
`);try{await u.exec(`kill -9 ${m.map(R=>R.pgrp?`-${R.pgrp}`:R.pid).join(" ")}`)}catch(R){}}let{commit:v,quality:_}=e.product,E=ce.posix.join(hs(t),`.devport-${v}${_==="stable"?"":`-${_}`}${e.web?"-web":""}`);if(h.length){e.output.write(`Extension host agent is already running.\r
`);try{let{stdout:R}=await u.exec(`cat '${E}' 2>/dev/null`),Y=R.toString().trim();return parseInt(Y,10)}catch(R){console.error(R),e.output.write(`Agent port not found. Terminating old extension host agent.\r
`);try{await u.exec(`kill -9 ${h.map(Y=>Y.pgrp?`-${Y.pgrp}`:Y.pid).join(" ")}`)}catch(Y){}}}e.progress(5);let w="Starting VS Code Server",T=e.output.start(w),N=[ce.posix.join(a,"server.sh"),"--log",W0(e.getLogLevel()),"--force-disable-user-env",..._6(e),...C6(e.telemetry),"--port",String(r),...e.connectionToken?["--connectionToken",e.connectionToken]:[],"--extensions-download-dir",OD(t),...i.args,"--start-server",...e.isLocalContainer?["--disable-websocket-compression"]:[""],...e.cliMode?["--enable-remote-auto-shutdown"]:[]],z=(await dE(e,{remoteExec:await n||t.remoteExec},N,a,{remoteEnv:$({SHELL:t.shell,VSCODE_AGENT_FOLDER:s},e.cliMode?await o:{}),resolveOn:CD,print:"continuous"})).cmdOutput;e.output.stop(w,T);let H=(CD.exec(z)||[])[1];if(!H)throw new Error("Port not found");return await u.exec(`echo ${H} >'${E}'`),parseInt(H,10)}function _6(e){return e.isLocalContainer?["--use-host-proxy"]:[]}function C6(e){return e?[]:["--disable-telemetry"]}var w6=/^([a-z0-9\-]+):(\d{1,5})$/;function S6(e){let t=e.match(w6);if(!(!t||t.length!==3))return{host:t[1],port:Number(t[2])}}async function b6(e,t,r){let n=await e.getTunnels();await Promise.all((r.forwardPorts||[]).filter(i=>!n.find(o=>o.remoteAddress.port===i)).map(async i=>{let o,s;if(typeof i=="number")o=i;else{let a=S6(i);if(!a)return;s=a.host,o=a.port}return e.openTunnel(t,o,s)}))}async function fE(e,{remotePtyExec:t},r,n,i={}){let o=i.print||(i.silent?"off":"end"),s=await t({env:i.remoteEnv,cwd:n,cmd:r[0],args:r.slice(1),output:i.silent?St:e.output}),a="",c,u=new Promise(d=>{c=d});s.onData(d=>{a+=d,o==="continuous"&&e.output.raw(d),i.resolveOn&&i.resolveOn.exec(a)&&c()});let l=e.onDidInput&&e.onDidInput(d=>s.write(d)),f=await Promise.race([s.exit,u]);return l&&l.dispose(),o==="end"&&e.output.raw(a),f&&(f.code||f.signal)?Promise.reject({message:`Command failed: ${r.join(" ")}`,cmdOutput:a,code:f.code,signal:f.signal}):{cmdOutput:a}}async function dE(e,{remoteExec:t},r,n,i={}){let o=i.print||(i.silent?"off":"end"),s=await t({env:i.remoteEnv,cwd:n,cmd:r[0],args:r.slice(1),output:i.silent?St:e.output}),a=[],c=[],u=new rE.StringDecoder,l=new rE.StringDecoder,f="",d="",p,h,m=new Promise((T,N)=>{p=T,h=N});s.stdout.on("data",T=>{a.push(T);let N=u.write(T);o==="continuous"&&e.output.write(N.replace(/\r?\n/g,`\r
`)),f+=N,i.resolveOn&&i.resolveOn.exec(f)&&p()}),s.stderr.on("data",T=>{c.push(T),d+=l.write(T)}),i.stdin instanceof Buffer?(s.stdin.write(i.stdin,T=>{T&&h(T)}),s.stdin.end()):i.stdin instanceof $p.ReadStream&&i.stdin.pipe(s.stdin);let v=await Promise.race([s.exit,m]),_=Buffer.concat(a),E=Buffer.concat(c);o==="end"&&(e.output.write(f.replace(/\r?\n/g,`\r
`)),e.output.write(rt(d)));let w=`${f}
${d}`;return v&&(v.code||v.signal)?Promise.reject({message:`Command failed: ${r.join(" ")}`,cmdOutput:w,stdout:_,stderr:E,code:v.code,signal:v.signal}):{cmdOutput:w,stdout:_,stderr:E}}function Bp(e){let t=8*1024,r=e%t,n=(e-r)/t;return`(dd iflag=fullblock bs=${t} count=${n} 2>/dev/null; dd iflag=fullblock bs=${r} count=1 2>/dev/null)`}async function x6(e,t){let r=ce.posix.join(TD(e.product),".patchEtcEnvironmentMarker");if(e.allowSystemConfigChange&&t.launchRootShellServer&&!await lE(t.shellServer,r)){let n=await t.launchRootShellServer();await al(n,r)&&await n.exec(`cat >> /etc/environment <<'etcEnvrionmentEOF'
${Object.keys(t.env).map(i=>`
${i}=${t.env[i]}`).join("")}
etcEnvrionmentEOF
`)}}async function T6(e,t){let r=ce.posix.join(TD(e.product),".patchEtcProfileMarker");if(e.allowSystemConfigChange&&t.launchRootShellServer&&!await lE(t.shellServer,r)){let n=await t.launchRootShellServer();await al(n,r)&&await n.exec("sed -i -E 's/((^|\\s)PATH=)([^\\$]*)$/\\1${PATH:-\\3}/g' /etc/profile || true")}}async function A6(e,t,{userEnvProbe:r},n){if(e.output.write(`userEnvProbe: ${r||e.defaultUserEnvProbe}${r?"":" (default)"}`),r||(r=e.defaultUserEnvProbe),r==="none")return{};try{let o=(await(0,_D.promisify)(ED.randomBytes)(16)).toString("hex"),s=new RegExp(o+"(.*)"+o),a=t.shell;e.output.write(`userEnvProbe shell: ${a}`);let c=t.nodeExecutable,u=ce.posix.basename(a),l,f;/^pwsh(-preview)?$/.test(u)?(l=`& '${c}' -p '''${o}'' + JSON.stringify(process.env) + ''${o}'''`,f=r==="loginInteractiveShell"||r==="loginShell"?["-Login","-Command"]:["-Command"]):(l=`'${c}' -p '"${o}" + JSON.stringify(process.env) + "${o}"'`,f=[r==="loginInteractiveShell"?"-lic":r==="loginShell"?"-lc":r==="interactiveShell"?"-ic":"-c"]);let d=gt(e.output,le.Trace),p=dE({output:d},{remoteExec:await n||t.remoteExec},[a,...f,l],t.installFolder);Promise.race([p,oo(2e3)]).then(async P=>{if(!P){let{processes:z}=await Dy(t.shellServer),H=z.find(R=>R.cmd.startsWith(a)&&R.cmd.indexOf(o)!==-1);if(H){let Y=jR(z)[H.pid];e.output.write(`userEnvProbe is taking longer than 2 seconds. Process tree:
${Ny(Y)}`)}else e.output.write("userEnvProbe is taking longer than 2 seconds. Process not found.")}},()=>{}).catch(P=>e.output.write(rt(P&&(P.stack||P.message)||"Error reading process tree.")));let h=await Promise.race([p,oo(1e4)]);if(!h)return e.output.write(rt("userEnvProbe is taking longer than 10 seconds. Avoid waiting for user input in your shell's startup scripts. Continuing.")),{};let m=h.stdout.toString(),v=s.exec(m),_=v?v[1]:"{}",E=JSON.parse(_);e.output.write(`userEnvProbe parsed: ${JSON.stringify(E,void 0,"  ")}`,le.Trace);let w=E.PATH,T=t.env.PATH,N=!(e.allowSystemConfigChange&&t.launchRootShellServer)&&w&&T;if(N){let P=t.user;E.PATH=I6(w,T,P==="root"||P==="0")}return e.output.write(`userEnvProbe PATHs:
Probe:     ${typeof w=="string"?`'${w}'`:"None"}
Container: ${typeof T=="string"?`'${T}'`:"None"}${N?`
Merged:    ${typeof E.PATH=="string"?`'${E.PATH}'`:"None"}`:""}`),E}catch(i){return e.output.write(rt(i&&(i.stack||i.message)||"Error reading shell environment.")),{}}}function I6(e,t,r){let n=e.split(":"),i=0;for(let o of t.split(":")){let s=n.indexOf(o);s===-1?(r||!/\/sbin(\/|$)/.test(o))&&n.splice(i++,0,o):i=s+1}return n.join(":")}async function pE(e){for(let t of e)await(typeof t=="function"?t():t)}var JY=M(require("crypto")),ZY=M(require("path"));function ND(e){return typeof e=="undefined"||e===null}function R6(e){return typeof e=="object"&&e!==null}function P6(e){return Array.isArray(e)?e:ND(e)?[]:[e]}function O6(e,t){var r,n,i,o;if(t)for(o=Object.keys(t),r=0,n=o.length;r<n;r+=1)i=o[r],e[i]=t[i];return e}function D6(e,t){var r="",n;for(n=0;n<t;n+=1)r+=e;return r}function N6(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var L6=ND,k6=R6,F6=P6,M6=D6,q6=N6,$6=O6,Dt={isNothing:L6,isObject:k6,toArray:F6,repeat:M6,isNegativeZero:q6,extend:$6};function LD(e,t){var r="",n=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(r+=`

`+e.mark.snippet),n+" "+r):n}function cl(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=LD(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}cl.prototype=Object.create(Error.prototype);cl.prototype.constructor=cl;cl.prototype.toString=function(t){return this.name+": "+LD(this,t)};var yr=cl;function hE(e,t,r,n,i){var o="",s="",a=Math.floor(i/2)-1;return n-t>a&&(o=" ... ",t=n-a+o.length),r-n>a&&(s=" ...",r=n+a-s.length),{str:o+e.slice(t,r).replace(/\t/g,"\u2192")+s,pos:n-t+o.length}}function mE(e,t){return Dt.repeat(" ",t-e.length)+e}function j6(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,s=-1;o=r.exec(e.buffer);)i.push(o.index),n.push(o.index+o[0].length),e.position<=o.index&&s<0&&(s=n.length-2);s<0&&(s=n.length-1);var a="",c,u,l=Math.min(e.line+t.linesAfter,i.length).toString().length,f=t.maxLength-(t.indent+l+3);for(c=1;c<=t.linesBefore&&!(s-c<0);c++)u=hE(e.buffer,n[s-c],i[s-c],e.position-(n[s]-n[s-c]),f),a=Dt.repeat(" ",t.indent)+mE((e.line-c+1).toString(),l)+" | "+u.str+`
`+a;for(u=hE(e.buffer,n[s],i[s],e.position,f),a+=Dt.repeat(" ",t.indent)+mE((e.line+1).toString(),l)+" | "+u.str+`
`,a+=Dt.repeat("-",t.indent+l+3+u.pos)+`^
`,c=1;c<=t.linesAfter&&!(s+c>=i.length);c++)u=hE(e.buffer,n[s+c],i[s+c],e.position-(n[s]-n[s+c]),f),a+=Dt.repeat(" ",t.indent)+mE((e.line+c+1).toString(),l)+" | "+u.str+`
`;return a.replace(/\n$/,"")}var U6=j6,H6=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],B6=["scalar","sequence","mapping"];function G6(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(n){t[String(n)]=r})}),t}function W6(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(H6.indexOf(r)===-1)throw new yr('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=G6(t.styleAliases||null),B6.indexOf(this.kind)===-1)throw new yr('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var zt=W6;function kD(e,t){var r=[];return e[t].forEach(function(n){var i=r.length;r.forEach(function(o,s){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=s)}),r[i]=n}),r}function V6(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,r;function n(i){i.multi?(e.multi[i.kind].push(i),e.multi.fallback.push(i)):e[i.kind][i.tag]=e.fallback[i.tag]=i}for(t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(n);return e}function gE(e){return this.extend(e)}gE.prototype.extend=function(t){var r=[],n=[];if(t instanceof zt)n.push(t);else if(Array.isArray(t))n=n.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(r=r.concat(t.implicit)),t.explicit&&(n=n.concat(t.explicit));else throw new yr("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof zt))throw new yr("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new yr("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new yr("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof zt))throw new yr("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(gE.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=kD(i,"implicit"),i.compiledExplicit=kD(i,"explicit"),i.compiledTypeMap=V6(i.compiledImplicit,i.compiledExplicit),i};var z6=gE,K6=new zt("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),Y6=new zt("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),X6=new zt("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),Q6=new z6({explicit:[K6,Y6,X6]});function J6(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function Z6(){return null}function eK(e){return e===null}var tK=new zt("tag:yaml.org,2002:null",{kind:"scalar",resolve:J6,construct:Z6,predicate:eK,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function rK(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function nK(e){return e==="true"||e==="True"||e==="TRUE"}function iK(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var oK=new zt("tag:yaml.org,2002:bool",{kind:"scalar",resolve:rK,construct:nK,predicate:iK,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function sK(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function aK(e){return 48<=e&&e<=55}function cK(e){return 48<=e&&e<=57}function uK(e){if(e===null)return!1;var t=e.length,r=0,n=!1,i;if(!t)return!1;if(i=e[r],(i==="-"||i==="+")&&(i=e[++r]),i==="0"){if(r+1===t)return!0;if(i=e[++r],i==="b"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(!sK(e.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(!aK(e.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<t;r++)if(i=e[r],i!=="_"){if(!cK(e.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function lK(e){var t=e,r=1,n;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),n=t[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),t=t.slice(1),n=t[0]),t==="0")return 0;if(n==="0"){if(t[1]==="b")return r*parseInt(t.slice(2),2);if(t[1]==="x")return r*parseInt(t.slice(2),16);if(t[1]==="o")return r*parseInt(t.slice(2),8)}return r*parseInt(t,10)}function fK(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1==0&&!Dt.isNegativeZero(e)}var dK=new zt("tag:yaml.org,2002:int",{kind:"scalar",resolve:uK,construct:lK,predicate:fK,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),pK=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function hK(e){return!(e===null||!pK.test(e)||e[e.length-1]==="_")}function mK(e){var t,r;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:r*parseFloat(t,10)}var gK=/^[-+]?[0-9]+e/;function vK(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Dt.isNegativeZero(e))return"-0.0";return r=e.toString(10),gK.test(r)?r.replace("e",".e"):r}function yK(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!=0||Dt.isNegativeZero(e))}var EK=new zt("tag:yaml.org,2002:float",{kind:"scalar",resolve:hK,construct:mK,predicate:yK,represent:vK,defaultStyle:"lowercase"}),_K=Q6.extend({implicit:[tK,oK,dK,EK]}),CK=_K,FD=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),MD=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function wK(e){return e===null?!1:FD.exec(e)!==null||MD.exec(e)!==null}function SK(e){var t,r,n,i,o,s,a,c=0,u=null,l,f,d;if(t=FD.exec(e),t===null&&(t=MD.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],n=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(r,n,i));if(o=+t[4],s=+t[5],a=+t[6],t[7]){for(c=t[7].slice(0,3);c.length<3;)c+="0";c=+c}return t[9]&&(l=+t[10],f=+(t[11]||0),u=(l*60+f)*6e4,t[9]==="-"&&(u=-u)),d=new Date(Date.UTC(r,n,i,o,s,a,c)),u&&d.setTime(d.getTime()-u),d}function bK(e){return e.toISOString()}var xK=new zt("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:wK,construct:SK,instanceOf:Date,represent:bK});function TK(e){return e==="<<"||e===null}var AK=new zt("tag:yaml.org,2002:merge",{kind:"scalar",resolve:TK}),vE=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function IK(e){if(e===null)return!1;var t,r,n=0,i=e.length,o=vE;for(r=0;r<i;r++)if(t=o.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;n+=6}return n%8==0}function RK(e){var t,r,n=e.replace(/[\r\n=]/g,""),i=n.length,o=vE,s=0,a=[];for(t=0;t<i;t++)t%4==0&&t&&(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)),s=s<<6|o.indexOf(n.charAt(t));return r=i%4*6,r===0?(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)):r===18?(a.push(s>>10&255),a.push(s>>2&255)):r===12&&a.push(s>>4&255),new Uint8Array(a)}function PK(e){var t="",r=0,n,i,o=e.length,s=vE;for(n=0;n<o;n++)n%3==0&&n&&(t+=s[r>>18&63],t+=s[r>>12&63],t+=s[r>>6&63],t+=s[r&63]),r=(r<<8)+e[n];return i=o%3,i===0?(t+=s[r>>18&63],t+=s[r>>12&63],t+=s[r>>6&63],t+=s[r&63]):i===2?(t+=s[r>>10&63],t+=s[r>>4&63],t+=s[r<<2&63],t+=s[64]):i===1&&(t+=s[r>>2&63],t+=s[r<<4&63],t+=s[64],t+=s[64]),t}function OK(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var DK=new zt("tag:yaml.org,2002:binary",{kind:"scalar",resolve:IK,construct:RK,predicate:OK,represent:PK}),NK=Object.prototype.hasOwnProperty,LK=Object.prototype.toString;function kK(e){if(e===null)return!0;var t=[],r,n,i,o,s,a=e;for(r=0,n=a.length;r<n;r+=1){if(i=a[r],s=!1,LK.call(i)!=="[object Object]")return!1;for(o in i)if(NK.call(i,o))if(!s)s=!0;else return!1;if(!s)return!1;if(t.indexOf(o)===-1)t.push(o);else return!1}return!0}function FK(e){return e!==null?e:[]}var MK=new zt("tag:yaml.org,2002:omap",{kind:"sequence",resolve:kK,construct:FK}),qK=Object.prototype.toString;function $K(e){if(e===null)return!0;var t,r,n,i,o,s=e;for(o=new Array(s.length),t=0,r=s.length;t<r;t+=1){if(n=s[t],qK.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[t]=[i[0],n[i[0]]]}return!0}function jK(e){if(e===null)return[];var t,r,n,i,o,s=e;for(o=new Array(s.length),t=0,r=s.length;t<r;t+=1)n=s[t],i=Object.keys(n),o[t]=[i[0],n[i[0]]];return o}var UK=new zt("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:$K,construct:jK}),HK=Object.prototype.hasOwnProperty;function BK(e){if(e===null)return!0;var t,r=e;for(t in r)if(HK.call(r,t)&&r[t]!==null)return!1;return!0}function GK(e){return e!==null?e:{}}var WK=new zt("tag:yaml.org,2002:set",{kind:"mapping",resolve:BK,construct:GK}),qD=CK.extend({implicit:[xK,AK],explicit:[DK,MK,UK,WK]}),lo=Object.prototype.hasOwnProperty,Gp=1,$D=2,jD=3,Wp=4,yE=1,VK=2,UD=3,zK=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,KK=/[\x85\u2028\u2029]/,YK=/[,\[\]\{\}]/,HD=/^(?:!|!!|![a-z\-]+!)$/i,BD=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function GD(e){return Object.prototype.toString.call(e)}function Wn(e){return e===10||e===13}function _s(e){return e===9||e===32}function Er(e){return e===9||e===32||e===10||e===13}function ec(e){return e===44||e===91||e===93||e===123||e===125}function XK(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function QK(e){return e===120?2:e===117?4:e===85?8:0}function JK(e){return 48<=e&&e<=57?e-48:-1}function WD(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"\x85":e===95?"\xA0":e===76?"\u2028":e===80?"\u2029":""}function ZK(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var VD=new Array(256),zD=new Array(256);for(Cs=0;Cs<256;Cs++)VD[Cs]=WD(Cs)?1:0,zD[Cs]=WD(Cs);var Cs;function eY(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||qD,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function KD(e,t){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=U6(r),new yr(t,r)}function oe(e,t){throw KD(e,t)}function Vp(e,t){e.onWarning&&e.onWarning.call(null,KD(e,t))}var YD={YAML:function(t,r,n){var i,o,s;t.version!==null&&oe(t,"duplication of %YAML directive"),n.length!==1&&oe(t,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&oe(t,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),s=parseInt(i[2],10),o!==1&&oe(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=s<2,s!==1&&s!==2&&Vp(t,"unsupported YAML version of the document")},TAG:function(t,r,n){var i,o;n.length!==2&&oe(t,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],HD.test(i)||oe(t,"ill-formed tag handle (first argument) of the TAG directive"),lo.call(t.tagMap,i)&&oe(t,'there is a previously declared suffix for "'+i+'" tag handle'),BD.test(o)||oe(t,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch(s){oe(t,"tag prefix is malformed: "+o)}t.tagMap[i]=o}};function fo(e,t,r,n){var i,o,s,a;if(t<r){if(a=e.input.slice(t,r),n)for(i=0,o=a.length;i<o;i+=1)s=a.charCodeAt(i),s===9||32<=s&&s<=1114111||oe(e,"expected valid JSON character");else zK.test(a)&&oe(e,"the stream contains non-printable characters");e.result+=a}}function XD(e,t,r,n){var i,o,s,a;for(Dt.isObject(r)||oe(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),s=0,a=i.length;s<a;s+=1)o=i[s],lo.call(t,o)||(t[o]=r[o],n[o]=!0)}function tc(e,t,r,n,i,o,s,a,c){var u,l;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,l=i.length;u<l;u+=1)Array.isArray(i[u])&&oe(e,"nested arrays are not supported inside keys"),typeof i=="object"&&GD(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&GD(i)==="[object Object]"&&(i="[object Object]"),i=String(i),t===null&&(t={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(u=0,l=o.length;u<l;u+=1)XD(e,t,o[u],r);else XD(e,t,o,r);else!e.json&&!lo.call(r,i)&&lo.call(t,i)&&(e.line=s||e.line,e.lineStart=a||e.lineStart,e.position=c||e.position,oe(e,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(t,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):t[i]=o,delete r[i];return t}function EE(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):oe(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function xt(e,t,r){for(var n=0,i=e.input.charCodeAt(e.position);i!==0;){for(;_s(i);)i===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(t&&i===35)do i=e.input.charCodeAt(++e.position);while(i!==10&&i!==13&&i!==0);if(Wn(i))for(EE(e),i=e.input.charCodeAt(e.position),n++,e.lineIndent=0;i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);else break}return r!==-1&&n!==0&&e.lineIndent<r&&Vp(e,"deficient indentation"),n}function zp(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||Er(r)))}function _E(e,t){t===1?e.result+=" ":t>1&&(e.result+=Dt.repeat(`
`,t-1))}function tY(e,t,r){var n,i,o,s,a,c,u,l,f=e.kind,d=e.result,p;if(p=e.input.charCodeAt(e.position),Er(p)||ec(p)||p===35||p===38||p===42||p===33||p===124||p===62||p===39||p===34||p===37||p===64||p===96||(p===63||p===45)&&(i=e.input.charCodeAt(e.position+1),Er(i)||r&&ec(i)))return!1;for(e.kind="scalar",e.result="",o=s=e.position,a=!1;p!==0;){if(p===58){if(i=e.input.charCodeAt(e.position+1),Er(i)||r&&ec(i))break}else if(p===35){if(n=e.input.charCodeAt(e.position-1),Er(n))break}else{if(e.position===e.lineStart&&zp(e)||r&&ec(p))break;if(Wn(p))if(c=e.line,u=e.lineStart,l=e.lineIndent,xt(e,!1,-1),e.lineIndent>=t){a=!0,p=e.input.charCodeAt(e.position);continue}else{e.position=s,e.line=c,e.lineStart=u,e.lineIndent=l;break}}a&&(fo(e,o,s,!1),_E(e,e.line-c),o=s=e.position,a=!1),_s(p)||(s=e.position+1),p=e.input.charCodeAt(++e.position)}return fo(e,o,s,!1),e.result?!0:(e.kind=f,e.result=d,!1)}function rY(e,t){var r,n,i;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=i=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(fo(e,n,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)n=e.position,e.position++,i=e.position;else return!0;else Wn(r)?(fo(e,n,i,!0),_E(e,xt(e,!1,t)),n=i=e.position):e.position===e.lineStart&&zp(e)?oe(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);oe(e,"unexpected end of the stream within a single quoted scalar")}function nY(e,t){var r,n,i,o,s,a;if(a=e.input.charCodeAt(e.position),a!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;(a=e.input.charCodeAt(e.position))!==0;){if(a===34)return fo(e,r,e.position,!0),e.position++,!0;if(a===92){if(fo(e,r,e.position,!0),a=e.input.charCodeAt(++e.position),Wn(a))xt(e,!1,t);else if(a<256&&VD[a])e.result+=zD[a],e.position++;else if((s=QK(a))>0){for(i=s,o=0;i>0;i--)a=e.input.charCodeAt(++e.position),(s=XK(a))>=0?o=(o<<4)+s:oe(e,"expected hexadecimal character");e.result+=ZK(o),e.position++}else oe(e,"unknown escape sequence");r=n=e.position}else Wn(a)?(fo(e,r,n,!0),_E(e,xt(e,!1,t)),r=n=e.position):e.position===e.lineStart&&zp(e)?oe(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}oe(e,"unexpected end of the stream within a double quoted scalar")}function iY(e,t){var r=!0,n,i,o,s=e.tag,a,c=e.anchor,u,l,f,d,p,h=Object.create(null),m,v,_,E;if(E=e.input.charCodeAt(e.position),E===91)l=93,p=!1,a=[];else if(E===123)l=125,p=!0,a={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),E=e.input.charCodeAt(++e.position);E!==0;){if(xt(e,!0,t),E=e.input.charCodeAt(e.position),E===l)return e.position++,e.tag=s,e.anchor=c,e.kind=p?"mapping":"sequence",e.result=a,!0;r?E===44&&oe(e,"expected the node content, but found ','"):oe(e,"missed comma between flow collection entries"),v=m=_=null,f=d=!1,E===63&&(u=e.input.charCodeAt(e.position+1),Er(u)&&(f=d=!0,e.position++,xt(e,!0,t))),n=e.line,i=e.lineStart,o=e.position,rc(e,t,Gp,!1,!0),v=e.tag,m=e.result,xt(e,!0,t),E=e.input.charCodeAt(e.position),(d||e.line===n)&&E===58&&(f=!0,E=e.input.charCodeAt(++e.position),xt(e,!0,t),rc(e,t,Gp,!1,!0),_=e.result),p?tc(e,a,h,v,m,_,n,i,o):f?a.push(tc(e,null,h,v,m,_,n,i,o)):a.push(m),xt(e,!0,t),E=e.input.charCodeAt(e.position),E===44?(r=!0,E=e.input.charCodeAt(++e.position)):r=!1}oe(e,"unexpected end of the stream within a flow collection")}function oY(e,t){var r,n,i=yE,o=!1,s=!1,a=t,c=0,u=!1,l,f;if(f=e.input.charCodeAt(e.position),f===124)n=!1;else if(f===62)n=!0;else return!1;for(e.kind="scalar",e.result="";f!==0;)if(f=e.input.charCodeAt(++e.position),f===43||f===45)yE===i?i=f===43?UD:VK:oe(e,"repeat of a chomping mode identifier");else if((l=JK(f))>=0)l===0?oe(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?oe(e,"repeat of an indentation width identifier"):(a=t+l-1,s=!0);else break;if(_s(f)){do f=e.input.charCodeAt(++e.position);while(_s(f));if(f===35)do f=e.input.charCodeAt(++e.position);while(!Wn(f)&&f!==0)}for(;f!==0;){for(EE(e),e.lineIndent=0,f=e.input.charCodeAt(e.position);(!s||e.lineIndent<a)&&f===32;)e.lineIndent++,f=e.input.charCodeAt(++e.position);if(!s&&e.lineIndent>a&&(a=e.lineIndent),Wn(f)){c++;continue}if(e.lineIndent<a){i===UD?e.result+=Dt.repeat(`
`,o?1+c:c):i===yE&&o&&(e.result+=`
`);break}for(n?_s(f)?(u=!0,e.result+=Dt.repeat(`
`,o?1+c:c)):u?(u=!1,e.result+=Dt.repeat(`
`,c+1)):c===0?o&&(e.result+=" "):e.result+=Dt.repeat(`
`,c):e.result+=Dt.repeat(`
`,o?1+c:c),o=!0,s=!0,c=0,r=e.position;!Wn(f)&&f!==0;)f=e.input.charCodeAt(++e.position);fo(e,r,e.position,!1)}return!0}function QD(e,t){var r,n=e.tag,i=e.anchor,o=[],s,a=!1,c;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=o),c=e.input.charCodeAt(e.position);c!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,oe(e,"tab characters must not be used in indentation")),!(c!==45||(s=e.input.charCodeAt(e.position+1),!Er(s))));){if(a=!0,e.position++,xt(e,!0,-1)&&e.lineIndent<=t){o.push(null),c=e.input.charCodeAt(e.position);continue}if(r=e.line,rc(e,t,jD,!1,!0),o.push(e.result),xt(e,!0,-1),c=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&c!==0)oe(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return a?(e.tag=n,e.anchor=i,e.kind="sequence",e.result=o,!0):!1}function sY(e,t,r){var n,i,o,s,a,c,u=e.tag,l=e.anchor,f={},d=Object.create(null),p=null,h=null,m=null,v=!1,_=!1,E;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=f),E=e.input.charCodeAt(e.position);E!==0;){if(!v&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,oe(e,"tab characters must not be used in indentation")),n=e.input.charCodeAt(e.position+1),o=e.line,(E===63||E===58)&&Er(n))E===63?(v&&(tc(e,f,d,p,h,null,s,a,c),p=h=m=null),_=!0,v=!0,i=!0):v?(v=!1,i=!0):oe(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,E=n;else{if(s=e.line,a=e.lineStart,c=e.position,!rc(e,r,$D,!1,!0))break;if(e.line===o){for(E=e.input.charCodeAt(e.position);_s(E);)E=e.input.charCodeAt(++e.position);if(E===58)E=e.input.charCodeAt(++e.position),Er(E)||oe(e,"a whitespace character is expected after the key-value separator within a block mapping"),v&&(tc(e,f,d,p,h,null,s,a,c),p=h=m=null),_=!0,v=!1,i=!1,p=e.tag,h=e.result;else if(_)oe(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=u,e.anchor=l,!0}else if(_)oe(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=u,e.anchor=l,!0}if((e.line===o||e.lineIndent>t)&&(v&&(s=e.line,a=e.lineStart,c=e.position),rc(e,t,Wp,!0,i)&&(v?h=e.result:m=e.result),v||(tc(e,f,d,p,h,m,s,a,c),p=h=m=null),xt(e,!0,-1),E=e.input.charCodeAt(e.position)),(e.line===o||e.lineIndent>t)&&E!==0)oe(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return v&&tc(e,f,d,p,h,null,s,a,c),_&&(e.tag=u,e.anchor=l,e.kind="mapping",e.result=f),_}function aY(e){var t,r=!1,n=!1,i,o,s;if(s=e.input.charCodeAt(e.position),s!==33)return!1;if(e.tag!==null&&oe(e,"duplication of a tag property"),s=e.input.charCodeAt(++e.position),s===60?(r=!0,s=e.input.charCodeAt(++e.position)):s===33?(n=!0,i="!!",s=e.input.charCodeAt(++e.position)):i="!",t=e.position,r){do s=e.input.charCodeAt(++e.position);while(s!==0&&s!==62);e.position<e.length?(o=e.input.slice(t,e.position),s=e.input.charCodeAt(++e.position)):oe(e,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!Er(s);)s===33&&(n?oe(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(t-1,e.position+1),HD.test(i)||oe(e,"named tag handle cannot contain such characters"),n=!0,t=e.position+1)),s=e.input.charCodeAt(++e.position);o=e.input.slice(t,e.position),YK.test(o)&&oe(e,"tag suffix cannot contain flow indicator characters")}o&&!BD.test(o)&&oe(e,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch(a){oe(e,"tag name is malformed: "+o)}return r?e.tag=o:lo.call(e.tagMap,i)?e.tag=e.tagMap[i]+o:i==="!"?e.tag="!"+o:i==="!!"?e.tag="tag:yaml.org,2002:"+o:oe(e,'undeclared tag handle "'+i+'"'),!0}function cY(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&oe(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!Er(r)&&!ec(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&oe(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function uY(e){var t,r,n;if(n=e.input.charCodeAt(e.position),n!==42)return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!Er(n)&&!ec(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&oe(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),lo.call(e.anchorMap,r)||oe(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],xt(e,!0,-1),!0}function rc(e,t,r,n,i){var o,s,a,c=1,u=!1,l=!1,f,d,p,h,m,v;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=s=a=Wp===r||jD===r,n&&xt(e,!0,-1)&&(u=!0,e.lineIndent>t?c=1:e.lineIndent===t?c=0:e.lineIndent<t&&(c=-1)),c===1)for(;aY(e)||cY(e);)xt(e,!0,-1)?(u=!0,a=o,e.lineIndent>t?c=1:e.lineIndent===t?c=0:e.lineIndent<t&&(c=-1)):a=!1;if(a&&(a=u||i),(c===1||Wp===r)&&(Gp===r||$D===r?m=t:m=t+1,v=e.position-e.lineStart,c===1?a&&(QD(e,v)||sY(e,v,m))||iY(e,m)?l=!0:(s&&oY(e,m)||rY(e,m)||nY(e,m)?l=!0:uY(e)?(l=!0,(e.tag!==null||e.anchor!==null)&&oe(e,"alias node should not have any properties")):tY(e,m,Gp===r)&&(l=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):c===0&&(l=a&&QD(e,v))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&oe(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),f=0,d=e.implicitTypes.length;f<d;f+=1)if(h=e.implicitTypes[f],h.resolve(e.result)){e.result=h.construct(e.result),e.tag=h.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(lo.call(e.typeMap[e.kind||"fallback"],e.tag))h=e.typeMap[e.kind||"fallback"][e.tag];else for(h=null,p=e.typeMap.multi[e.kind||"fallback"],f=0,d=p.length;f<d;f+=1)if(e.tag.slice(0,p[f].tag.length)===p[f].tag){h=p[f];break}h||oe(e,"unknown tag !<"+e.tag+">"),e.result!==null&&h.kind!==e.kind&&oe(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+h.kind+'", not "'+e.kind+'"'),h.resolve(e.result,e.tag)?(e.result=h.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):oe(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||l}function lY(e){var t=e.position,r,n,i,o=!1,s;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(s=e.input.charCodeAt(e.position))!==0&&(xt(e,!0,-1),s=e.input.charCodeAt(e.position),!(e.lineIndent>0||s!==37));){for(o=!0,s=e.input.charCodeAt(++e.position),r=e.position;s!==0&&!Er(s);)s=e.input.charCodeAt(++e.position);for(n=e.input.slice(r,e.position),i=[],n.length<1&&oe(e,"directive name must not be less than one character in length");s!==0;){for(;_s(s);)s=e.input.charCodeAt(++e.position);if(s===35){do s=e.input.charCodeAt(++e.position);while(s!==0&&!Wn(s));break}if(Wn(s))break;for(r=e.position;s!==0&&!Er(s);)s=e.input.charCodeAt(++e.position);i.push(e.input.slice(r,e.position))}s!==0&&EE(e),lo.call(YD,n)?YD[n](e,n,i):Vp(e,'unknown document directive "'+n+'"')}if(xt(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,xt(e,!0,-1)):o&&oe(e,"directives end mark is expected"),rc(e,e.lineIndent-1,Wp,!1,!0),xt(e,!0,-1),e.checkLineBreaks&&KK.test(e.input.slice(t,e.position))&&Vp(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&zp(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,xt(e,!0,-1));return}if(e.position<e.length-1)oe(e,"end of the stream or a document separator is expected");else return}function JD(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new eY(e,t),n=e.indexOf("\0");for(n!==-1&&(r.position=n,oe(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)lY(r);return r.documents}function fY(e,t,r){t!==null&&typeof t=="object"&&typeof r=="undefined"&&(r=t,t=null);var n=JD(e,r);if(typeof t!="function")return n;for(var i=0,o=n.length;i<o;i+=1)t(n[i])}function dY(e,t){var r=JD(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new yr("expected a single document in the stream, but found more")}}var pY=fY,hY=dY,ZD={loadAll:pY,load:hY},eN=Object.prototype.toString,tN=Object.prototype.hasOwnProperty,CE=65279,mY=9,ul=10,gY=13,vY=32,yY=33,EY=34,wE=35,_Y=37,CY=38,wY=39,SY=42,rN=44,bY=45,Kp=58,xY=61,TY=62,AY=63,IY=64,nN=91,iN=93,RY=96,oN=123,PY=124,sN=125,Kt={};Kt[0]="\\0";Kt[7]="\\a";Kt[8]="\\b";Kt[9]="\\t";Kt[10]="\\n";Kt[11]="\\v";Kt[12]="\\f";Kt[13]="\\r";Kt[27]="\\e";Kt[34]='\\"';Kt[92]="\\\\";Kt[133]="\\N";Kt[160]="\\_";Kt[8232]="\\L";Kt[8233]="\\P";var OY=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],DY=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function NY(e,t){var r,n,i,o,s,a,c;if(t===null)return{};for(r={},n=Object.keys(t),i=0,o=n.length;i<o;i+=1)s=n[i],a=String(t[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),c=e.compiledTypeMap.fallback[s],c&&tN.call(c.styleAliases,a)&&(a=c.styleAliases[a]),r[s]=a;return r}function LY(e){var t,r,n;if(t=e.toString(16).toUpperCase(),e<=255)r="x",n=2;else if(e<=65535)r="u",n=4;else if(e<=4294967295)r="U",n=8;else throw new yr("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Dt.repeat("0",n-t.length)+t}var kY=1,ll=2;function FY(e){this.schema=e.schema||qD,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Dt.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=NY(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?ll:kY,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function aN(e,t){for(var r=Dt.repeat(" ",t),n=0,i=-1,o="",s,a=e.length;n<a;)i=e.indexOf(`
`,n),i===-1?(s=e.slice(n),n=a):(s=e.slice(n,i+1),n=i+1),s.length&&s!==`
`&&(o+=r),o+=s;return o}function SE(e,t){return`
`+Dt.repeat(" ",e.indent*t)}function MY(e,t){var r,n,i;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(i=e.implicitTypes[r],i.resolve(t))return!0;return!1}function Yp(e){return e===vY||e===mY}function fl(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==CE||65536<=e&&e<=1114111}function cN(e){return fl(e)&&e!==CE&&e!==gY&&e!==ul}function uN(e,t,r){var n=cN(e),i=n&&!Yp(e);return(r?n:n&&e!==rN&&e!==nN&&e!==iN&&e!==oN&&e!==sN)&&e!==wE&&!(t===Kp&&!i)||cN(t)&&!Yp(t)&&e===wE||t===Kp&&i}function qY(e){return fl(e)&&e!==CE&&!Yp(e)&&e!==bY&&e!==AY&&e!==Kp&&e!==rN&&e!==nN&&e!==iN&&e!==oN&&e!==sN&&e!==wE&&e!==CY&&e!==SY&&e!==yY&&e!==PY&&e!==xY&&e!==TY&&e!==wY&&e!==EY&&e!==_Y&&e!==IY&&e!==RY}function $Y(e){return!Yp(e)&&e!==Kp}function dl(e,t){var r=e.charCodeAt(t),n;return r>=55296&&r<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function lN(e){var t=/^\n* /;return t.test(e)}var fN=1,bE=2,dN=3,pN=4,nc=5;function jY(e,t,r,n,i,o,s,a){var c,u=0,l=null,f=!1,d=!1,p=n!==-1,h=-1,m=qY(dl(e,0))&&$Y(dl(e,e.length-1));if(t||s)for(c=0;c<e.length;u>=65536?c+=2:c++){if(u=dl(e,c),!fl(u))return nc;m=m&&uN(u,l,a),l=u}else{for(c=0;c<e.length;u>=65536?c+=2:c++){if(u=dl(e,c),u===ul)f=!0,p&&(d=d||c-h-1>n&&e[h+1]!==" ",h=c);else if(!fl(u))return nc;m=m&&uN(u,l,a),l=u}d=d||p&&c-h-1>n&&e[h+1]!==" "}return!f&&!d?m&&!s&&!i(e)?fN:o===ll?nc:bE:r>9&&lN(e)?nc:s?o===ll?nc:bE:d?pN:dN}function UY(e,t,r,n,i){e.dump=function(){if(t.length===0)return e.quotingType===ll?'""':"''";if(!e.noCompatMode&&(OY.indexOf(t)!==-1||DY.test(t)))return e.quotingType===ll?'"'+t+'"':"'"+t+"'";var o=e.indent*Math.max(1,r),s=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-o),a=n||e.flowLevel>-1&&r>=e.flowLevel;function c(u){return MY(e,u)}switch(jY(t,a,e.indent,s,c,e.quotingType,e.forceQuotes&&!n,i)){case fN:return t;case bE:return"'"+t.replace(/'/g,"''")+"'";case dN:return"|"+hN(t,e.indent)+mN(aN(t,o));case pN:return">"+hN(t,e.indent)+mN(aN(HY(t,s),o));case nc:return'"'+BY(t)+'"';default:throw new yr("impossible error: invalid scalar style")}}()}function hN(e,t){var r=lN(e)?String(t):"",n=e[e.length-1]===`
`,i=n&&(e[e.length-2]===`
`||e===`
`),o=i?"+":n?"":"-";return r+o+`
`}function mN(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function HY(e,t){for(var r=/(\n+)([^\n]*)/g,n=function(){var u=e.indexOf(`
`);return u=u!==-1?u:e.length,r.lastIndex=u,gN(e.slice(0,u),t)}(),i=e[0]===`
`||e[0]===" ",o,s;s=r.exec(e);){var a=s[1],c=s[2];o=c[0]===" ",n+=a+(!i&&!o&&c!==""?`
`:"")+gN(c,t),i=o}return n}function gN(e,t){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,n,i=0,o,s=0,a=0,c="";n=r.exec(e);)a=n.index,a-i>t&&(o=s>i?s:a,c+=`
`+e.slice(i,o),i=o+1),s=a;return c+=`
`,e.length-i>t&&s>i?c+=e.slice(i,s)+`
`+e.slice(s+1):c+=e.slice(i),c.slice(1)}function BY(e){for(var t="",r=0,n,i=0;i<e.length;r>=65536?i+=2:i++)r=dl(e,i),n=Kt[r],!n&&fl(r)?(t+=e[i],r>=65536&&(t+=e[i+1])):t+=n||LY(r);return t}function GY(e,t,r){var n="",i=e.tag,o,s,a;for(o=0,s=r.length;o<s;o+=1)a=r[o],e.replacer&&(a=e.replacer.call(r,String(o),a)),(hi(e,t,a,!1,!1)||typeof a=="undefined"&&hi(e,t,null,!1,!1))&&(n!==""&&(n+=","+(e.condenseFlow?"":" ")),n+=e.dump);e.tag=i,e.dump="["+n+"]"}function vN(e,t,r,n){var i="",o=e.tag,s,a,c;for(s=0,a=r.length;s<a;s+=1)c=r[s],e.replacer&&(c=e.replacer.call(r,String(s),c)),(hi(e,t+1,c,!0,!0,!1,!0)||typeof c=="undefined"&&hi(e,t+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=SE(e,t)),e.dump&&ul===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=o,e.dump=i||"[]"}function WY(e,t,r){var n="",i=e.tag,o=Object.keys(r),s,a,c,u,l;for(s=0,a=o.length;s<a;s+=1)l="",n!==""&&(l+=", "),e.condenseFlow&&(l+='"'),c=o[s],u=r[c],e.replacer&&(u=e.replacer.call(r,c,u)),!!hi(e,t,c,!1,!1)&&(e.dump.length>1024&&(l+="? "),l+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),!!hi(e,t,u,!1,!1)&&(l+=e.dump,n+=l));e.tag=i,e.dump="{"+n+"}"}function VY(e,t,r,n){var i="",o=e.tag,s=Object.keys(r),a,c,u,l,f,d;if(e.sortKeys===!0)s.sort();else if(typeof e.sortKeys=="function")s.sort(e.sortKeys);else if(e.sortKeys)throw new yr("sortKeys must be a boolean or a function");for(a=0,c=s.length;a<c;a+=1)d="",(!n||i!=="")&&(d+=SE(e,t)),u=s[a],l=r[u],e.replacer&&(l=e.replacer.call(r,u,l)),!!hi(e,t+1,u,!0,!0,!0)&&(f=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,f&&(e.dump&&ul===e.dump.charCodeAt(0)?d+="?":d+="? "),d+=e.dump,f&&(d+=SE(e,t)),!!hi(e,t+1,l,!0,f)&&(e.dump&&ul===e.dump.charCodeAt(0)?d+=":":d+=": ",d+=e.dump,i+=d));e.tag=o,e.dump=i||"{}"}function yN(e,t,r){var n,i,o,s,a,c;for(i=r?e.explicitTypes:e.implicitTypes,o=0,s=i.length;o<s;o+=1)if(a=i[o],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof t=="object"&&t instanceof a.instanceOf)&&(!a.predicate||a.predicate(t))){if(r?a.multi&&a.representName?e.tag=a.representName(t):e.tag=a.tag:e.tag="?",a.represent){if(c=e.styleMap[a.tag]||a.defaultStyle,eN.call(a.represent)==="[object Function]")n=a.represent(t,c);else if(tN.call(a.represent,c))n=a.represent[c](t,c);else throw new yr("!<"+a.tag+'> tag resolver accepts not "'+c+'" style');e.dump=n}return!0}return!1}function hi(e,t,r,n,i,o,s){e.tag=null,e.dump=r,yN(e,r,!1)||yN(e,r,!0);var a=eN.call(e.dump),c=n,u;n&&(n=e.flowLevel<0||e.flowLevel>t);var l=a==="[object Object]"||a==="[object Array]",f,d;if(l&&(f=e.duplicates.indexOf(r),d=f!==-1),(e.tag!==null&&e.tag!=="?"||d||e.indent!==2&&t>0)&&(i=!1),d&&e.usedDuplicates[f])e.dump="*ref_"+f;else{if(l&&d&&!e.usedDuplicates[f]&&(e.usedDuplicates[f]=!0),a==="[object Object]")n&&Object.keys(e.dump).length!==0?(VY(e,t,e.dump,i),d&&(e.dump="&ref_"+f+e.dump)):(WY(e,t,e.dump),d&&(e.dump="&ref_"+f+" "+e.dump));else if(a==="[object Array]")n&&e.dump.length!==0?(e.noArrayIndent&&!s&&t>0?vN(e,t-1,e.dump,i):vN(e,t,e.dump,i),d&&(e.dump="&ref_"+f+e.dump)):(GY(e,t,e.dump),d&&(e.dump="&ref_"+f+" "+e.dump));else if(a==="[object String]")e.tag!=="?"&&UY(e,e.dump,t,o,c);else{if(a==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new yr("unacceptable kind of an object to dump "+a)}e.tag!==null&&e.tag!=="?"&&(u=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",e.dump=u+" "+e.dump)}return!0}function zY(e,t){var r=[],n=[],i,o;for(xE(e,r,n),i=0,o=n.length;i<o;i+=1)t.duplicates.push(r[n[i]]);t.usedDuplicates=new Array(o)}function xE(e,t,r){var n,i,o;if(e!==null&&typeof e=="object")if(i=t.indexOf(e),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(t.push(e),Array.isArray(e))for(i=0,o=e.length;i<o;i+=1)xE(e[i],t,r);else for(n=Object.keys(e),i=0,o=n.length;i<o;i+=1)xE(e[n[i]],t,r)}function KY(e,t){t=t||{};var r=new FY(t);r.noRefs||zY(e,r);var n=e;return r.replacer&&(n=r.replacer.call({"":n},"",n)),hi(r,0,n,!0,!0)?r.dump+`
`:""}var YY=KY,XY={dump:YY};function TE(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var pl=ZD.load,Ofe=ZD.loadAll,Dfe=XY.dump;var Nfe=TE("safeLoad","load"),Lfe=TE("safeLoadAll","loadAll"),kfe=TE("safeDump","dump");var Jp=M(require("path"));var SN=M(require("path")),bN=M(require("os"));var EN=M(require("crypto"));var _N=M(require("util"));var CN={async readDocument(e){switch(e.scheme){case"file":try{return(await bt(e.fsPath)).toString()}catch(t){if(t&&t.code==="ENOENT")return;throw t}default:throw new Error(`Unsupported scheme: ${e.toString()}`)}},async applyEdits(e,t,r){switch(e.scheme){case"file":let n=Kf(r,t);await ps(e.fsPath,n);break;default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}},Xp=class{constructor(t){this.fileHost=t}async readDocument(t){switch(t.scheme){case Xp.scheme:try{return(await this.fileHost.readFile(Fr(t,this.fileHost.platform))).toString()}catch(r){return}default:throw new Error(`Unsupported scheme: ${t.toString()}`)}}async applyEdits(t,r,n){switch(t.scheme){case Xp.scheme:let i=Kf(n,r);await this.fileHost.writeFile(Fr(t,this.fileHost.platform),Buffer.from(i));break;default:throw new Error(`Unsupported scheme: ${t.toString()}`)}}},Vn=Xp;Vn.scheme="vscode-fileHost";var Ss=class{constructor(t){this.shellServer=t}async readDocument(t){switch(t.scheme){case Ss.scheme:try{let{stdout:r}=await this.shellServer.exec(`cat ${t.path}`);return r}catch(r){return}default:throw new Error(`Unsupported scheme: ${t.toString()}`)}}async applyEdits(t,r,n){switch(t.scheme){case Ss.scheme:try{if(!Ss.nonce){let s=await(0,_N.promisify)(EN.randomBytes)(20);Ss.nonce=s.toString("hex")}let i=Kf(n,r),o=`EOF-${Ss.nonce}`;await this.shellServer.exec(`cat <<'${o}' >${t.path}
${i}
${o}
`)}catch(i){console.log(i)}break;default:throw new Error(`Unsupported scheme: ${t.toString()}`)}}},ws=Ss;ws.scheme="vscode-remote";var wN=class{constructor(t){this.documents=t}async readDocument(t){let r=this.documents[t.scheme];if(!r)throw new Error(`Unsupported scheme: ${t.toString()}`);return r.readDocument(t)}async applyEdits(t,r,n){let i=this.documents[t.scheme];if(!i)throw new Error(`Unsupported scheme: ${t.toString()}`);return i.applyEdits(t,r,n)}};function ic(e,t){let r={file:CN,[Vn.scheme]:new Vn(e)};return t&&(r[ws.scheme]=new ws(t)),new wN(r)}var Ufe=new Map;var xN;(function(i){i[i.Unknown=0]="Unknown",i[i.File=1]="File",i[i.Directory=2]="Directory",i[i.SymbolicLink=64]="SymbolicLink"})(xN||(xN={}));var po;(function(s){s[s.Slash=47]="Slash",s[s.Colon=58]="Colon",s[s.A=65]="A",s[s.Z=90]="Z",s[s.a=97]="a",s[s.z=122]="z"})(po||(po={}));function Fr(e,t){let r;return e.authority&&e.path.length>1&&(e.scheme==="file"||e.scheme===Vn.scheme)?r=`//${e.authority}${e.path}`:e.path.charCodeAt(0)===47&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&e.path.charCodeAt(2)===58?r=e.path[1].toLowerCase()+e.path.substr(2):r=e.path,t==="win32"&&(r=r.replace(/\//g,"\\")),r}function Qp(e,t){return[e.join(t,".devcontainer","devcontainer.json"),e.join(t,".devcontainer.json")]}function AE(e,t){return io.file(e.path.join(t,".devcontainer","devcontainer.json")).with({scheme:Vn.scheme})}async function TN(e,t){let r=Qp(e.path,t);for(let n of r)if(await e.isFile(n))return io.file(n).with({scheme:Vn.scheme})}async function AN(e){let t=Qp(SN,e);for(let r of t)if(await no(r))return r}var Kfe=`{${bN.EOL}}`;function oc(e){let t=SN.posix.dirname(e.path);return e.with({path:t})}function sc(e,t,r){return IE(e,t.configFilePath,r)}function IE(e,t,r){let n=oc(t);return t.with({path:Jp.posix.resolve(n.path,e.platform==="win32"&&t.scheme!==ws.scheme?(Jp.win32.isAbsolute(r)?"/":"")+r.replace(/\\/g,"/"):r)})}function ho(e){return"dockerFile"in e||"build"in e&&"dockerfile"in e.build}function bs(e,t){return sc(e,t,QY(t))}function QY(e){return"dockerFile"in e?e.dockerFile:e.build.dockerfile}async function Zp(e,t,r,n){if(Array.isArray(t.dockerComposeFile)){if(t.dockerComposeFile.length)return t.dockerComposeFile.map(i=>Fr(sc(e,t,i),e.platform))}else if(typeof t.dockerComposeFile=="string")return[Fr(sc(e,t,t.dockerComposeFile),e.platform)];if(n){let i=r==null?void 0:r.COMPOSE_FILE;if(i)return i.split(e.path.delimiter).map(a=>e.path.resolve(n,a));try{let a=e.path.join(n,".env"),c=await e.readFile(a),u=/^COMPOSE_FILE=(.+)$/m.exec(c.toString()),l=u&&u[1].trim();if(l)return l.split(e.path.delimiter).map(f=>e.path.resolve(n,f))}catch(a){if(!(a&&(a.code==="ENOENT"||a.code==="EISDIR")))throw a}let o=[e.path.resolve(n,"docker-compose.yml")],s=e.path.resolve(n,"docker-compose.override.yml");return await e.isFile(s)&&o.push(s),o}return[]}var Il=M(require("path")),DX=M(require("crypto"));var NX=M(Gu());var gc=M(require("path"));var yX=M(require("path"));var n9=M(require("net")),i9=M(require("path"));var e9=M(require("path")),IN=M(require("http")),t9=M(require("os")),r9=M(require("crypto"));var o9=0;function Rn(e){return e.VSCODE_SSH_ASKPASS_HANDLE?{VSCODE_SSH_ASKPASS_COUNTER:String(++o9)}:{}}async function eh(e,t){return(await RE(e,[t]))[0]}async function RE(e,t){let r=await RN(e,"container",t);for(let n of r){n.Ports=[];let i=n.NetworkSettings.Ports;for(let o in i){let[s,a]=o.split("/");for(let c of i[o]||[]){let{HostIp:u,HostPort:l}=c;n.Ports.push({IP:u,PrivatePort:parseInt(s),PublicPort:parseInt(l),Type:a})}}}return r}async function PE(e,t){return(await RN(e,"image",[t]))[0]}async function RN(e,t,r){if(!r.length)return[];let n=ml(e),i=await Le(pe($({},n),{args:(n.args||[]).concat(["inspect","--type",t,...r])}));try{return JSON.parse(i.stdout.toString())}catch(o){throw console.error({stdout:i.stdout.toString(),stderr:i.stderr.toString()}),o}}async function OE(e,t=!1,r=[]){let n=[];t&&n.push("-a");for(let o of r)n.push("--filter",`label=${o}`);return(await ac(e,"ps","-q",...n)).stdout.toString().split(/\r?\n/).filter(o=>!!o)}async function PN(e,t){let{exec:r,cmd:n,args:i,env:o,output:s}=ml(e),a=[];for(let d in t)for(let p of t[d])a.push("--filter",`${d}=${p}`);let c=await s9(e)?"json":"{{json .}}",u=(i||[]).concat(["events","--format",c,...a]),l=await r({cmd:n,args:u,env:o,output:s}),f=[];return l.stderr.on("data",d=>f.push(d)),l.exit.then(({code:d,signal:p})=>{f.length&&s.write(rt(Buffer.concat(f).toString())),(d||p&&p!=="SIGKILL")&&s.write(rt(`Docker events terminated (code: ${d}, signal: ${p}).`))},d=>{s.write(rt(d&&(d.stack||d.message)))}),l}async function ac(e,...t){let r=ml(e);return Le(pe($({},r),{args:(r.args||[]).concat(t)}))}async function s9(e){if(("cliHost"in e?e.cliHost:e.common.cliHost).platform!=="linux")return!1;try{let{stdout:r}=await ac(e,"-v");return r.toString().toLowerCase().indexOf("podman")!==-1}catch(r){return!1}}async function or(e,...t){let r=mo(e);return zu(pe($({},r),{args:(r.args||[]).concat(t)}))}async function hl(e,...t){let r=ml(e,"dockerComposeCLI"in e?await e.dockerComposeCLI():void 0);return Le(pe($({},r),{args:(r.args||[]).concat(t)}))}async function DE(e,...t){let r=mo(e,"dockerComposeCLI"in e?await e.dockerComposeCLI():void 0);return zu(pe($({},r),{args:(r.args||[]).concat(t)}))}function cc(e,t,r){return async function(n){let{exec:i,cmd:o,args:s,env:a}=ml(e),{argsPrefix:c,args:u}=DN(t,r,n,!1);return i({cmd:o,args:(s||[]).concat(u),env:a,output:ON(n.output,o,c)})}}async function th(e,t,r,n){if(!await n("node-pty"))throw new Error("Missing node-pty");return async function(o){let{ptyExec:s,cmd:a,args:c,env:u}=mo(e),{argsPrefix:l,args:f}=DN(t,r,o,!0);return s({cmd:a,args:(c||[]).concat(f),env:u,output:ON(o.output,a,l)})}}function ON(e,t,r){return a9(e,`Run: ${t} ${(r||[]).join(" ").replace(/\n.*/g,"")}`,"Run in container:")}function a9(e,t,r){let n=new RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g");return gt(pe($({},e),{get dimensions(){return e.dimensions},event:o=>e.event("text"in o?pe($({},o),{text:o.text.replace(n,r)}):o)}))}function DN(e,t,r,n){let{env:i,cwd:o,cmd:s,args:a}=r,c=["exec","-i"];n&&c.push("-t"),t&&c.push("-u",t),i&&Object.keys(i).forEach(l=>c.push("-e",`${l}=${i[l]}`)),o&&c.push("-w",o),c.push(e);let u=c.slice();return c.push(s),a&&c.push(...a),{argsPrefix:u,args:c}}function ml(e,t){return"dockerEnv"in e?{exec:e.common.cliHost.exec,cmd:t?t.cmd:e.dockerCLI,args:t?t.args:[],env:$($({},e.dockerEnv),Rn(e.dockerEnv)),output:e.common.output}:"cliHost"in e?{exec:e.cliHost.exec,cmd:t?t.cmd:e.dockerCLI,args:t?t.args:[],env:$($({},e.env),Rn(e.env)),output:e.output}:pe($({},e),{env:$($({},e.env),Rn(e.env))})}function mo(e,t){return"dockerEnv"in e?{ptyExec:e.common.cliHost.ptyExec,cmd:t?t.cmd:e.dockerCLI,args:t?t.args:[],env:$($({},e.dockerEnv),Rn(e.dockerEnv)),output:e.common.output}:"cliHost"in e?{ptyExec:e.cliHost.ptyExec,cmd:t?t.cmd:e.dockerCLI,args:t?t.args:[],env:$($({},e.env),Rn(e.env)),output:e.output}:pe($({},e),{env:$($({},e.env),Rn(e.env))})}function NE(e){return e.toLowerCase().replace(/[^a-z0-9\._-]+/g,"").replace(/(\.[\._-]|_[\.-]|__[\._-]|-+[\._])[\._-]*/g,(t,r)=>r.substr(0,r.length-1))}var Lk=M(require("path")),KE=M(require("string_decoder")),kk=M(Gu());var un=M(require("path")),Tk=M(xk()),Ak=M(Gu());function VE(e){let t=typeof e=="string"?un.join(e,"dist"):e.distFolder;return un.join(t,"node_modules","vscode-dev-containers","container-features")}var dc="f_microsoft-vscode-dev-container";function Ik(){return`
ARG BASE_IMAGE=mcr.microsoft.com/vscode/devcontainers/base:buster
FROM $BASE_IMAGE

USER root

COPY . /tmp/build-features/

#{featureLayer}

#{containerEnv}

ARG IMAGE_USER=root
USER $IMAGE_USER
`}async function Rk(e){let t="";return e.packageDstFolders.forEach(n=>{t+=`RUN cd /tmp/build-features/${n} \\
&& chmod +x ./install.sh \\
&& ./install.sh

`}),t}function pX(e,t){return pe($({},e),{features:e.features.concat(t.features)})}async function hX(e,t,r){var a;let n={features:[],dstFolder:t,packageDstFolders:new Set},i=e.features;if(!i||!Object.keys(i).length)return;let o=Object.keys(i).filter(c=>c.match(".+@.+"));if(o.length===0){r.write("No remote features declared in user devcontainer");return}r.write(`Remote feature Identifiers detected: ${o.join(`
`)}`);let s=un.join(t,"feature.tar.gz");for await(let c of o)try{r.write(`Fetching ${c}`);let u=c.split("@");u.length!==2&&r.write("Invalid remote feature identifier.",le.Error);let l=u[1],f=await ol(l,{"User-Agent":"remotecontainer"}),d=JSON.parse((a=f.toString())!=null?a:{}).tarball_url,p=un.join(t,"extractPath");if(await kr(p),d!==void 0&&d!==""){let P=await ol(d,{"User-Agent":"remotecontainer"});await ps(s,P),await Ak.x({file:s,cwd:p})}else{r.write("Could not fetch URL for featureId",le.Error);continue}let h=(await di(p))[0];if((await di(un.join(t))).find(P=>P===h)!==void 0){r.write(`Already pulled remote resource feature package from '${l}'. Skipping.`);continue}let v=`f_${h}`,_=un.join(t,v);await kr(_);let E=(await di(un.join(p,h))).filter(P=>!P.startsWith("."));for await(let P of E)await yI(un.join(p,h,P),un.join(_,P));let w=un.join(_,"features.json"),T=(await bt(w)).toString(),N=Cn(T);if(N){let P=N.features.map(z=>pe($({},z),{packageDstFolder:v}));n={features:n.features.concat(P),dstFolder:t,packageDstFolders:n.packageDstFolders.add(v)}}else r.write(`Could not parse features.json when merging remote feature ${c}`,le.Error);await _y(p,!0,!0),await _y(s,!1,!0)}catch(u){r.write(`Could not fetch ${c} due to ${u}`,le.Error)}return n}async function pc(e,t,r,n){let{output:i,remoteContainerFeaturesEnabled:o}=e,s=r.features;if(!s||!Object.keys(s).length)return;o?i.write("Fetching remote container features: Enabled"):i.write("Fetching remote container features: Disabled");let a=VE(e.extensionPath),c=Cn((await bt(un.join(a,"features.json"))).toString());c.features=c.features.map(f=>pe($({},f),{packageDstFolder:dc}));let u=c;if(o){let f=await hX(r,t,i);f&&(u=pX(f,c))}let l=await mX(e,r,u,n);if(!l.features.every(f=>f.value===!1))return l.dstFolder=t,l.packageDstFolders=l.packageDstFolders?l.packageDstFolders.add(dc):new Set().add(dc),l}async function mX(e,t,r,n){let i=await n(),o=i["com.visualstudio.code.devcontainers.id"],s=i.version,a=t.features||{},c={};Object.keys(a).forEach(l=>{let f=l.split("@")[0];c[f]=a[l]});let u={};for(let l of r.features)gX(l),o&&(l.exclude||[]).some(f=>Pk(f,o,s))?l.included=!1:(l.include||[]).length?l.included=!!o&&(l.include||[]).some(f=>Pk(f,o,s)):l.included=!0,u[l.id]=u[l.id]||l.included,l.value=c[l.id]||!1;return e.output.write(`Feature configuration:
`+JSON.stringify(pe($({},r),{imageDetails:void 0}),void 0,"  "),le.Trace),r.features=r.features.filter(l=>l.id in u&&l.included===u[l.id]?(delete u[l.id],!0):!1),r}function gX(e){if(e.values){let t=e.options||(e.options={});t[zE(e)]={type:"string",[e.customValues?"proposals":"enum"]:e.values,default:e.values[0],description:e.hint}}delete e.type,delete e.values,delete e.customValues,delete e.hint}function Pk(e,t,r){let n=e.indexOf("@"),[i,o]=n!==-1?[e.slice(0,n),e.slice(n+1)]:[e,void 0];return t===i&&(!o||!r||Tk.satisfies(r,o))}function zE(e){return"version"}function Ok(e){var r,n;let t=zE(e);if(typeof e.value=="object"){let i=e.value[t];return i===void 0&&e.options?(r=e.options[t])==null?void 0:r.default:i}return e.value===void 0&&e.options?(n=e.options[t])==null?void 0:n.default:e.value}function Dk(e){return typeof e.value=="object"?$($({},Nk(e)),e.value):pe($({},Nk(e)),{[zE(e)]:e.value})}function Nk(e){let t=e.options||{};return Object.keys(t).reduce((r,n)=>("default"in t[n]&&(r[n]=t[n].default),r),{})}async function hc(e,t,r,n){let{common:i}=e,{cliHost:o,output:s}=i;if(!t)return r;let{dstFolder:a}=t;if(!a||a==="")return s.write("dstFolder is undefined or empty in addContainerFeatures",le.Error),r;let c=(await n()).Config.User||"root",u=Ps(i),l=`${r.startsWith(u)?r:u}-features`,f=VE(i.extensionPath);s.write(`local container features stored at: ${f}`),await o.mkdirp(`${a}/${dc}`);let d=kk.c({cwd:f,filter:w=>w!=="./Dockerfile"&&w!=="./features.json"},["."]),p=new Promise((w,T)=>{d.on("error",T),d.on("finish",w)}),h=await o.exec({cmd:"tar",args:["--no-same-owner","-x","-f","-"],cwd:`${a}/${dc}`,output:s}),m=new KE.StringDecoder;h.stdout.on("data",w=>{s.write(m.write(w))});let v=new KE.StringDecoder;h.stderr.on("data",w=>{s.write(rt(v.write(w)))}),d.pipe(h.stdin);let _=Ik();_=_.replace("#{featureLayer}",await Rk(t)),_=_.replace("#{containerEnv}",t.features.filter(w=>(vr||w.included)&&w.value).reduce((w,T)=>w.concat(Object.keys(T.containerEnv||{}).map(N=>`ENV ${N}=${T.containerEnv[N]}`)),[]).join(`
`)),await o.writeFile(o.path.join(a,"Dockerfile"),Buffer.from(_)),await Promise.all([...t.packageDstFolders].map(async w=>{let T=[].concat(...t.features.filter(N=>(vr||N.included)&&N.value&&N.packageDstFolder===w).map(N=>{let P=Dk(N),z=N.id.replace(/[/-]/g,"_").split("@")[0].toUpperCase(),H=[];return P&&(H.push(...Object.keys(P).map(R=>`_BUILD_ARG_${z}_${R.toUpperCase()}=${P[R]}`)),H.push(`_BUILD_ARG_${z}=true`)),N.buildArg&&H.push(`${N.buildArg}=${Ok(N)}`),H})).join(`
`);await o.writeFile(o.path.join(a,w,"features.env"),Buffer.from(T))})),await h.exit,await p;let E=["build","-t",l,"--build-arg",`BASE_IMAGE=${r}`,"--build-arg",`IMAGE_USER=${c}`,a];return await or(e,...E),l}async function Rs(e,t,r,n,i,o){let{common:s}=e,{cliHost:a}=s;if(s.cliMode||!(typeof t.updateRemoteUserUID=="boolean"?t.updateRemoteUserUID:o)||a.platform!=="linux")return r;let c=(await n()).Config.User||"root",u=t.remoteUser||i||c;if(u==="root"||/^\d+$/.test(u))return r;let l=Ps(s),f=`${r.startsWith(l)?r:l}-uid`,d="updateUID.Dockerfile",p=Lk.join(s.extensionPath,"scripts",d),h=s.package.version,m=a.path.join(await a.tmpdir(),"vsch",`${d}-${h}`),v=`${m}-${Date.now()}`;await a.mkdirp(a.path.dirname(v)),await a.writeFile(v,await bt(p)),await a.rename(v,m);let _=["build","-f",m,"-t",f,"--build-arg",`BASE_IMAGE=${r}`,"--build-arg",`REMOTE_USER=${u}`,"--build-arg",`NEW_UID=${await a.getuid()}`,"--build-arg",`NEW_GID=${await a.getgid()}`,"--build-arg",`IMAGE_USER=${c}`,a.path.dirname(m)];return await or(e,..._),f}function Fk(e){return e.workspaceFolder||"/"}async function Mk(e,t,r,n,i,o,s,a){let{cliHost:c}=r,u=["--project-name",t,...i];if(a){let l=c.path.join(await c.tmpdir(),`docker-compose.devcontainer.build-${Date.now()}.yml`),f=`services:
  ${e.service}:
    image: ${a}
`;await c.writeFile(l,Buffer.from(f)),u.push("-f",l)}u.push("build"),s&&u.push("--no-cache","--pull"),o.length&&(u.push(...o),o.indexOf(e.service)===-1&&u.push(e.service));try{await DE(r,...u)}catch(l){throw l instanceof vt?l:new vt({description:"An error occurred building the Docker Compose images.",originalError:l,data:{fileWithError:n[0]}})}}async function qk(e,t,r){if(Yu(e)){let n=Ep(e),i=[];for(let o=0;o<t.length;o++){let s=await Xu(n,t[o],r);i.push(s)}return i}return t}async function $k(e,t,r){try{let n=[].concat(...t.map(o=>["-f",o]));r&&n.push("--env-file",r);let i=await e.dockerComposeCLI();(Qu(i.version)||[])[0]>=2&&n.push("--profile","*");try{let{stdout:o}=await hl(e,...n,"config"),s=o.toString();return e.output.write(s),pl(s)||{}}catch(o){if(!Buffer.isBuffer(o==null?void 0:o.stderr)||(o==null?void 0:o.stderr.toString().indexOf("UnicodeEncodeError"))===-1)throw o;if(e.cliHost.platform==="win32"){let{cmdOutput:c}=await DE(pe($({},e),{output:gt({event:e.output.event,dimensions:{columns:999999,rows:1}},le.Info)}),...n,"config");return pl(c.replace(ya,""))||{}}let{stdout:s}=await hl(pe($({},e),{env:pe($({},e.env),{LANG:"en_US.UTF-8",LC_CTYPE:"en_US.UTF-8"})}),...n,"config"),a=s.toString();return e.output.write(a),pl(a)||{}}}catch(n){throw n instanceof vt?n:new vt({description:"An error occurred retrieving the Docker Compose configuration.",originalError:n,data:{fileWithError:t[0]}})}}async function jk(e,t,r){let{cliHost:n}="cliHost"in e?e:e.common,i=await EX(e),o=mh(n.env.COMPOSE_PROJECT_NAME||"",i);if(o)return o;try{let c=n.path.join(n.cwd,".env"),u=await n.readFile(c),l=/^COMPOSE_PROJECT_NAME=(.+)$/m.exec(u.toString()),f=l&&l[1].trim(),d=mh(f||"",i);if(d)return d}catch(c){if(!(c&&(c.code==="ENOENT"||c.code==="EISDIR")))throw c}let s=t.configFolderPath,a=r[0]?n.path.dirname(r[0]):n.cwd;return IR(n.platform,a,n.path.join(s,".devcontainer"))?mh(`${n.path.basename(s)}_devcontainer`,i):mh(n.path.basename(a),i)}function mh(e,t){return t?e.toLowerCase().replace(/[^-_a-z0-9]/g,""):e.toLowerCase().replace(/[^a-z0-9]/g,"")}async function EX(e){try{let t=Qu((await e.dockerComposeCLI()).version);return t?!_p(t,[1,21,0]):!0}catch(t){return!0}}function gh(e,t,r){let n;return()=>n||(n=(async()=>{let i=!1,o;try{o=(await hl(pe($({},e),{cmd:r}),"version","--short")).stdout}catch(s){if((s==null?void 0:s.code)!=="ENOENT")throw s;o=(await hl(pe($({},e),{cmd:t}),"compose","version","--short")).stdout,i=!0}return{version:o.toString().trim(),cmd:i?t:r,args:i?["compose"]:[]}})())}var bX=M(require("url")),xX=M(require("https"));var Hk;(function(t){t[t.CannotAccessRepository=2]="CannotAccessRepository"})(Hk||(Hk={}));var Gk=gc.join(__dirname,"..","node_modules","vscode-dev-containers","repository-containers");async function Wk(e,t,r,n,i,o,s,a=!1){let u=await ic(e).readDocument(s!=null?s:r);if(!u)return;let l=Cn(u),f=l;if(l&&o&&(l.configFilePath=r,f=o(l),delete f.configFilePath),!f||typeof f!="object"||Array.isArray(f))throw new vt({description:`Dev container config (${Fr(r,e.platform)}) must contain a JSON object literal.`});let d=await Yk(e,t,f,n,i,a),p=tE({platform:e.platform,localWorkspaceFolder:t==null?void 0:t.rootFolderPath,containerWorkspaceFolder:d.workspaceFolder,configFile:r,env:e.env},f);return typeof p.workspaceFolder=="string"&&(d.workspaceFolder=p.workspaceFolder),"workspaceMount"in p&&(d.workspaceMount=p.workspaceMount),p.configFilePath=r,{config:p,workspaceConfig:d}}async function Vk(e,t,r){let n=await IX(e,t,r);return n==null?void 0:n.uri}async function IX(e,t,r){let n=await zk(e,t,r);if(n)return{uri:n,location:"user"};let i=await TN(e,t.configFolderPath);if(i)return{uri:i,location:"workspace"};let o=await zk(e,t,[Gk]);if(o)return{uri:o,location:"builtin"}}async function zk(e,t,r){let n=await qR(e,t,St);return n&&Kk(n,r)}async function Kk(e,t){let r=new Set(e.map(RX).filter(n=>!!n));for(let n of r)for(let i of t){let o=gc.join(i,n),s=await AN(o);if(s)return io.file(s)}}function RX(e){let t;if(e.startsWith("https://"))t=e.substr(8);else{let r=/[^@:]+@([^:]+):(.+)/.exec(e);if(r)t=`${r[1]}/${r[2]}`;else return}return t.endsWith(".git")&&(t=t.substr(0,t.length-4)),t.toLowerCase().startsWith("github.com")&&(t=(/^[^/]+\/[^/]+\/[^/]+/.exec(t)||[])[0]),t}function yh(e=[]){for(let t=e.length-1;t>=0;t--){let r=e[t];if((r==="-u"||r==="--user")&&t+1<e.length)return e[t+1];if(r.startsWith("-u=")||r.startsWith("--user="))return r.substr(r.indexOf("=")+1)}}async function Qk(e,t){let r=await OE(e,!0,t);return(await RE(e,r)).filter(i=>i.State.Status!=="removing")[0]}async function Jk(e,t,r,n){var p,h;let{cliHost:i,output:o}="cliHost"in e?e:e.common,s=ic(i),a=bs(i,t);if(!await s.readDocument(a)){let m=Fr(a,i.platform);throw new vt({description:`Dockerfile (${m}) not found.`})}let u=await JE(a,i),l=["build","-f",u,"-t",r],f=(p=t.build)==null?void 0:p.target;if(f&&l.push("--target",f),n)l.push("--no-cache","--pull");else if(t.build&&t.build.cacheFrom)if(typeof t.build.cacheFrom=="string")l.push("--cache-from",t.build.cacheFrom);else for(let m=0;m<t.build.cacheFrom.length;m++){let v=t.build.cacheFrom[m];l.push("--cache-from",v)}let d=(h=t.build)==null?void 0:h.args;if(d)for(let m in d)l.push("--build-arg",`${m}=${d[m]}`);l.push(await JE(QE(i,t),i));try{let m=pe($({},mo(e)),{output:gt(o,le.Info)});await or(m,...l)}catch(m){throw new vt({description:"An error occurred building the image.",originalError:m,data:{fileWithError:u}})}}async function Zk(e,t,r,n,i,o){let{common:s}=e;s.progress(uo.StartingContainer);let a=t.appPort,c=typeof a=="number"||typeof a=="string"?[a]:a||[],u=[].concat(...c.map(B=>["-p",typeof B=="number"?`127.0.0.1:${B}:${B}`:B])),l=o?["--mount",o]:[],f=t.mounts?[].concat(...t.mounts.map(B=>["--mount",B])):[];if(e.cacheMount==="volume")f.push("--mount","type=volume,src=vscode,dst=/vscode");else if(e.cacheMount==="bind"){await kr(s.localCacheFolder);let B=s.localCacheFolder.indexOf(",")!==-1?'"':"";f.push("--mount",`type=bind,${B}src=${s.localCacheFolder}${B},dst=/vscode`)}let d=t.containerEnv,p=d?Object.keys(d).reduce((B,O)=>(B.push("-e",`${O}=${d[O]}`),B),[]):[],h=t.containerUser?["-u",t.containerUser]:[],m=[];((r==null?void 0:r.features)||[]).some(B=>(vr||B.included)&&B.value&&B.init)&&m.push("--init"),((r==null?void 0:r.features)||[]).some(B=>(vr||B.included)&&B.value&&B.privileged)&&m.push("--privileged");let v=new Set([].concat(...((r==null?void 0:r.features)||[]).filter(B=>(vr||B.included)&&B.value).map(B=>B.capAdd||[])));for(let B of v)m.push("--cap-add",B);let _=new Set([].concat(...((r==null?void 0:r.features)||[]).filter(B=>(vr||B.included)&&B.value).map(B=>B.securityOpt||[])));for(let B of _)m.push("--security-opt",B);let E=[].concat(...[].concat(...((r==null?void 0:r.features)||[]).map(B=>(vr||B.included)&&B.value&&B.mounts).filter(Boolean)).map(B=>["--mount",`type=${B.type},src=${B.source},dst=${B.target}`])),w=((r==null?void 0:r.features)||[]).map(B=>(vr||B.included)&&B.value&&B.entrypoint).filter(Boolean),T=t.overrideCommand!==!1,N=T?["--entrypoint","/bin/sh"]:[],P=T?["-c",`echo Container started
trap "exit 0" 15
${w.join(`
`)}
while sleep 1 & wait $!; do :; done`]:[],z=["run","--sig-proxy=false","-a","STDOUT","-a","STDERR",...u,...l,...f,...E,...kX(i),"-l",`vsch.remote.devPort=${t.devPort||Za}`,...p,...h,...t.runArgs||[],...m,...N,n,...P],H,R=new Promise((B,O)=>H=O),{started:Y}=await YE(e,FX(i),R,s.output,s.getLogLevel()===le.Trace),U="Starting container",j=s.output.start(U),X=pe($({},mo(e)),{output:gt(e.common.output,le.Info)});or(X,...z).then(H,H),await Y,s.output.stop(U,j)}function kX(e){let t=[];return e.forEach(r=>t.push("-l",r)),t}function FX(e){let t={};return e.forEach(r=>{let n=r.split("=");t[n[0]]=n[1]}),t}var MX=M(require("path"));var qX=M(require("util"));var t1=M(require("string_decoder"));async function JE(e,t){if(e.scheme==="file"&&t.type==="wsl"){let{stdout:r}=await Le({exec:t.exec,cmd:"wslpath",args:["-u",e.fsPath],output:St});return r.toString().trim()}return Fr(e,t.platform)}function ZE(e,t){let r=e.platform==="win32"&&!e.env.SSH_AUTH_SOCK?Yy:e.type==="wsl"?e.env.SSH_AUTH_SOCK:void 0,n={DOCKER_CONTEXT:"default"};return t&&("context"in t?n.DOCKER_CONTEXT=t.context:(t.host&&(n.DOCKER_HOST=t.host),t.certPath&&(n.DOCKER_CERT_PATH=t.certPath),t.tlsVerify&&(n.DOCKER_TLS_VERIFY=t.tlsVerify))),r&&(n.SSH_AUTH_SOCK=r),n}async function YE(e,t,r,n,i){let o=await PN(e,{event:["start"]});return{started:new Promise((s,a)=>{r.catch(l=>{o.terminate(),a(l)});let c=new t1.StringDecoder("utf8"),u="";o.stdout.on("data",async l=>{if(l){let f=c.write(l);i&&n.write(`Log: startEventSeen#data ${f.trim().replace(/\r?\n/g,`\r
`)}\r
`);let d=(u+f).split(`
`);u=d.pop();for(let p of d)if(p.trim())try{let h=JSON.parse(p);(h.status||h.Status)==="start"&&await $X(e,h,t)&&(o.terminate(),s())}catch(h){console.error(h),console.error(p)}}})})}}async function $X(e,t,r){var i;let n=((i=t.Actor)==null?void 0:i.Attributes)||(await eh(e,t.id||t.ID)).Config.Labels||{};return Object.keys(r).every(o=>n[o]===r[o])}async function Os(e,t,r){try{return await PE(e,t)}catch(n){if(!r)throw n;try{await or(e,"pull",t)}catch(i){throw n.stdout&&e.common.output.write(n.stdout.toString()),n.stderr&&e.common.output.write(rt(n.stderr.toString())),n}return PE(e,t)}}function e_(e,t,r){let n=r?JSON.stringify({hostPath:e,settings:r}):e;return`vscode-remote://dev-container+${Buffer.from(n,"utf8").toString("hex")}${t}`}async function jX(e,t,r,n=!1){return!n&&await FR(e,t,r)||t}async function Yk(e,t,r,n,i,o=!1){if("dockerComposeFile"in r)return{workspaceFolder:Fk(r),workspaceMount:void 0};let{workspaceFolder:s,workspaceMount:a}=r;if(t&&(!s||!("workspaceMount"in r))){let c=await jX(e,t.rootFolderPath,n,o);if(!s){let u=e.path.relative(e.path.dirname(c),t.rootFolderPath);s=`/workspaces/${e.platform==="win32"?u.replace(/\\/g,"/"):u}`}if(!("workspaceMount"in r)){let u=`/workspaces/${e.path.basename(c)}`,l=e.platform!=="linux"?`,consistency=${i||"consistent"}`:"",f=c.indexOf(",")!==-1?'"':"",d=u.indexOf(",")!==-1?'"':"";a=`type=bind,${f}source=${c}${f},${d}target=${u}${d}${l}`}}return{workspaceFolder:s,workspaceMount:a}}function QE(e,t){let r="dockerFile"in t?t.context:t.build.context;return r?sc(e,t,r):oc(bs(e,t))}async function vh(e,t,r,n,i){let{common:o}=e,s="Inspecting container",a=o.output.start(s),c=await eh(e,t);o.output.stop(s,a);let u=n||c.Config.User||"root",[,l,,f]=/([^:]*)(:(.*))?/.exec(u),d=UX(c.Config.Env),p=cc(e,t,u),h=await th(e,t,u,o.loadNativeModule),m=cc(e,t,"root"),v=c.Mounts.find(w=>w.Type==="volume"&&w.Name==="vscode"),_=c.Mounts.find(w=>w.Type==="bind"&&w.Source===o.localCacheFolder),E=v&&Rl.posix.join(v.Destination,/^\.*(.*)$/.exec(o.product.serverDataFolderName)[1])||(_==null?void 0:_.Destination);return SD({params:o,startedAt:c.State.StartedAt,sharedDataFolder:E,sharedDataFolderIsLocalCacheFolder:!v&&!!_,remoteWorkspaceFolder:r,containerUser:l==="0"?"root":l,containerGroup:f,containerEnv:d,remoteExec:p,remotePtyExec:h,remoteExecAsRoot:m,rootShellServer:i})}function UX(e){return(e||[]).reduce((t,r)=>{let n=r.indexOf("=");return n!==-1&&(t[r.substr(0,n)]=r.substr(n+1)),t},{})}function Ps(e){let{cwd:t}="cwd"in e?e:e.cliHost,r=HX(t),n=Rl.basename(t);return NE(`vsc-${n}-${r}`)}function HX(e){return e1.createHash("md5").update(e).digest("hex")}async function mc(e){let{cliHost:t}=e,{version:r}=e.package,n=t.path.join(await t.tmpdir(),"vsch","container-features",`${r}-${Date.now()}`);return await t.mkdirp(n),n}var Cg=M(require("util"));var noe=M(require("path")),ioe=M(require("crypto")),y2=M(require("os"));var ooe=M(require("util"));var yg=M(require("os")),Wf=M(v2());process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL=!0;var Eg=class{constructor(t){this.config=t;this.firstParty=!!t.firstParty,this.createAppInsightsClient(t.aiKey)}createAppInsightsClient(t){Wf.default.defaultClient?(this.appInsightsClient=new Wf.default.TelemetryClient(t),this.appInsightsClient.channel.setUseDiskRetryCaching(!0)):(Wf.default.setup(t).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setUseDiskRetryCaching(!0).start(),this.appInsightsClient=Wf.default.defaultClient),this.appInsightsClient.commonProperties=$($({},this.getCommonProperties()),this.config.commonProperties),t&&t.indexOf("AIF-")===0&&(this.appInsightsClient.config.endpointUrl="https://vortex.data.microsoft.com/collect/v1",this.firstParty=!0)}getCommonProperties(){let t=Object.create(null);return t["common.os"]=yg.platform(),t["common.platformversion"]=(yg.release()||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),t["common.extname"]=this.config.packageId,t["common.extversion"]=this.config.packageVersion,t}cloneAndChange(t,r){if(t===null||typeof t!="object"||typeof r!="function")return t;let n={};for(let i in t)n[i]=r(i,t[i]);return n}anonymizeFilePaths(t,r){let n;if(t==null)return"";let i=this.config.cleanupPaths.map(s=>new RegExp(s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),o=t;if(r){let s=[];for(let l of i)for(;(n=l.exec(t))&&n;)s.push([n.index,l.lastIndex]);let a=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,c=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g,u=0;for(o="";(n=c.exec(t))&&n;)n[0]&&!a.test(n[0])&&s.every(([l,f])=>n.index<l||n.index>=f)&&(o+=t.substring(u,n.index)+"<REDACTED: user-file-path>",u=c.lastIndex);u<t.length&&(o+=t.substr(u))}for(let s of i)o=o.replace(s,"");return o}removePropertiesWithPossibleUserInfo(t){if(typeof t!="object")return;let r=Object.create(null);for(let n of Object.keys(t)){let i=t[n];if(!i)continue;let o=/@[a-zA-Z0-9-.]+/;/\S*(key|token|sig|password|passwd|pwd)[="':\s]+\S*/.test(i.toLowerCase())?r[n]="<REDACTED: secret>":o.test(i)?r[n]="<REDACTED: email>":r[n]=i}return r}sendTelemetryEvent(t,r,n){if(this.appInsightsClient){let i=this.cloneAndChange(r,(s,a)=>this.anonymizeFilePaths(a,this.firstParty)),o={name:`${this.config.eventPrefix}/${t}`,properties:this.removePropertiesWithPossibleUserInfo(i),measurements:n};this.appInsightsClient.trackEvent(o)}}dispose(){return new Promise(t=>{this.appInsightsClient?this.appInsightsClient.flush({callback:()=>{this.appInsightsClient=void 0,t(void 0)}}):t(void 0)})}};function E2(e){return e.serverDataFolderName?e.serverDataFolderName:e.quality==="stable"?".vscode-server":e.quality==="insider"?".vscode-server-insiders":`.vscode-server-${e.quality}`}var _2={getConfigurationState:()=>{},updateConfigurationState:async()=>{},containerOutdated:async()=>{}};var R2,rr=(R2=process.env.DEVCONTAINER_CLI_PATH)==null?void 0:R2.replace(/"/g,""),soe=rr?et.basename(rr,et.extname(rr)):"devcontainer",xb=process.env.WSL_DISTRO_NAME,P2,Tb=((P2=process.env.IN_WSL)!=null?P2:"false")==="true",S2=!rr;(async()=>{let e=H0(process.argv.slice(2)).parserConfiguration({"boolean-negation":!1}).scriptName(soe).version(!1).demandCommand(1,"Specify a command").help("h").alias("h","help").completion("completion",!1).strict().option("disable-telemetry",{describe:"Disable telemetry",boolean:!0,default:!1});e.wrap(Math.min(120,e.terminalWidth())),S2||e.command("open [path]","Open a dev container in VS Code",aoe,t=>Ab("open",coe,t)),e.command("build [path]","Build a dev container image",uoe,t=>Ab("build",loe,t)),e.command("run [path] [cmds..]",!1,foe,t=>Ab("run",b2,t)),e.fail((t,r,n)=>{r||(console.error(t),n.showHelp(),process.exit(1)),r instanceof Mn?console.error(r.message):console.error(r)}),await e.argv})().catch(e=>{});async function Ab(e,t,r){let n=await doe(),i=r["disable-telemetry"]!==!0&&((n==null?void 0:n["telemetry.telemetryLevel"])||"on")==="on"&&(n==null?void 0:n["telemetry.enableTelemetry"])!==!1,{sendTelemetryEvent:o,dispose:s}=await hoe(i);try{o("userCLI",{command:e}),await t({settings:n,enableTelemetry:i,sendTelemetryEvent:o},r)}finally{await s(),process.exit()}}var Mn=class extends Error{constructor(t){super(t)}};function aoe(e){return e.positional("path",{describe:"path to project folder",default:"."})}async function coe({settings:e},{path:t}){var w;if(!rr)throw new Mn("Failed to determine CLI Path");let r=et.dirname(rr),n=await gu(et.join(r,"vscode-app-root"),"VS Code app root"),i=await gu(et.join(r,"vscode-quality"),"VS Code build"),o=await gu(et.join(r,"vscode-path"),"VS Code path"),s=process.cwd(),c=await Iy(s,T=>Ju(T,n)),u=gt(Su(T=>process.stdout.write(T),()=>le.Info,new Date)),l=await Ib(Tb,xb,s,t,u),f=gs(c.path,l),{workspaceConfig:d}=await Rb(c,f,u,e);if(d.workspaceFolder===void 0)throw new Mn("Failed to get workspace folder");let p=e_(l,d.workspaceFolder,void 0),h="";switch(i){case"stable":break;case"insider":h="-insiders";break;default:h=`${i}`;break}let m=bb.platform()==="win32"?`code${h}.cmd`:`code${h}`,v=et.join(et.dirname(o),"bin",m),_="";try{await(0,Cg.promisify)(C2.stat)(v),_=v}catch{_=m}let E=await(0,Cg.promisify)(w2.exec)(`"${_}" --folder-uri=${p}`,{cwd:(w=process.env.USERPROFILE)!=null?w:s});E.stdout.trim()!==""&&console.log(E.stdout),E.stderr.trim()!==""&&console.log(E.stderr)}function uoe(e){return e.positional("path",{describe:"path to folder containing .devcontainer to build",default:"."}).option("no-cache",{boolean:!0,describe:"disable image cache for the dev container build",default:!1}).option("image-name",{describe:"specify the image name",string:!0}).option("experimental",{describe:"Enable experimental functionality",boolean:!0,default:!1})}async function loe({settings:e,enableTelemetry:t,sendTelemetryEvent:r},{path:n,"no-cache":i,"image-name":o,experimental:s}){let a=process.cwd(),c=gt(Su(H=>process.stdout.write(H),()=>le.Info,new Date)),u=gt(c,le.Info),{loadNativeModule:l,appRoot:f}=await x2(),d=s||I2(e);d&&console.log("WARNING: running in experimental mode. Experimental functionality may change at any time!");let p=await Ib(Tb,xb,a,n,c),h=await yp(p,l,c,(e==null?void 0:e["remote.containers.executeInWSL"])?"always":"forWSLPath"),m=await Py(p,c),v=await T2(),_=gs(h.path,m),{config:E}=await Rb(h,_,c,e),w=(e==null?void 0:e["remote.containers.dockerPath"])||"docker",T=(e==null?void 0:e["remote.containers.dockerComposePath"])||"docker-compose",N={cliHost:h,dockerCLI:w,dockerComposeCLI:gh({exec:h.exec,env:$($({},h.env),Rn(h.env)),output:c},w,T),env:h.env,output:c},P=await A2(h,i,u,v,!0,!1,l,f,t,r,d,e),z=pe($({},P),{common:pe($({},P.common),{output:u})});if(ho(E)){let H=Ps(N);await Jk(P,E,H,i);let R,Y=()=>R||(R=Os(P,H,"image"in E)),U=await pc(P.common,await mc(P.common),E,async()=>(await Y()).Config.Labels||{}),j=await hc(P,U,H,Y),X=await Rs(P,E,j,Y,yh(E.runArgs)||E.containerUser,!0);o&&await or(z,"tag",X,o)}else if("dockerComposeFile"in E){let H=h.path.join(h.cwd,".env"),R=Array.isArray(E.dockerComposeFile)&&E.dockerComposeFile.length===0&&await h.isFile(H)?H:void 0,Y=await Zp(h,E,h.env,m),U=await qk(m,Y,c),j=[].concat(...U.map(K=>["-f",K]));R&&j.push("--env-file",R);let X=await jk(N,_,Y),ae=await $k(N,U,R);if(Object.keys(ae.services||{}).indexOf(E.service)===-1)throw new Mn(`Service '${E.service}' configured in devcontainer.json not found in Docker Compose configuration.`);await Mk(E,X,N,U,j,[E.service],i,void 0);let O=ae.services[E.service],x=O.image||`${X}_${E.service}`,D,G=()=>D||(D=Os(z,x,!O.build)),re=await pc(z.common,await mc(z.common),E,async()=>(await G()).Config.Labels||{}),ue=await hc(z,re,x,G),ye=await Rs(z,E,ue,G,O.user,!0);o&&await or(z,"tag",ye,o)}else{await or(z,"pull",E.image);let H,R=()=>H||(H=Os(P,E.image,"image"in E)),Y=await pc(P.common,await mc(P.common),E,async()=>(await R()).Config.Labels||{}),U=await hc(P,Y,E.image,R),j=await Rs(P,E,U,R,yh(E.runArgs)||E.containerUser,!0);o&&await or(z,"tag",j,o)}}function foe(e){return e.positional("path",{describe:"path to folder containing .devcontainer to run",default:"."}).positional("_",{array:!0,type:"string",demandOption:!0}).option("image-name",{describe:"specify the image name",string:!0}).option("experimental",{describe:"Enable experimental functionality",boolean:!0,default:!1})}async function b2({settings:e,enableTelemetry:t,sendTelemetryEvent:r},{path:n,"image-name":i,experimental:o,_:s}){if(!o)throw console.error("Run is experimental, enable with --experimental."),new Mn("Run is experimental, enable with --experimental.");let a=o||I2(e);a&&console.log("WARNING: running in experimental mode. Experimental functionality may change at any time!");let c=s.slice(1);if(!s||s.length===0)throw console.error("Run requires a command to execute in the running dev container"),new Mn("Run requires a command to execute in the running dev container");let u=process.cwd(),l=gt(Su(H=>process.stdout.write(H),()=>le.Info,new Date)),f=gt(l,le.Info),{loadNativeModule:d,appRoot:p}=await x2(),h=await Ib(Tb,xb,u,n,l),m=await yp(h,d,l,(e==null?void 0:e["remote.containers.executeInWSL"])?"always":"forWSLPath"),v=await Py(h,l),_=await T2(),E=gs(m.path,v),{config:w,workspaceConfig:T}=await Rb(m,E,l,e),P=await A2(m,!1,f,_,!0,!1,d,p,t,r,a,e),z=pe($({},P),{common:pe($({},P.common),{output:f})});if(ho(w)||"image"in w)try{let H=i!=null?i:"image"in w?w.image:Ps(P.common),R=moe(h),Y,j=await Rs(P,w,H,()=>Y||(Y=Os(P,H,"image"in w)),yh(w.runArgs)||w.containerUser,!0),X=[`com.visualstudio.code.devcontainers.cli.runid=${R}`];await Zk(z,w,void 0,j,X,T.workspaceMount);let B=await Qk(P,X);if(!B)throw new Mn("Container failed to start");let O=await vh(P,B.Id,T.workspaceFolder,w.remoteUser),x=await Up(pe($({},P.common),{output:f}),O,w,void 0,void 0,w.devPort||Za);await pE(P.common.backgroundTasks),console.log(`Running command: ${c.join(" ")}`);try{let D=O.remoteWorkspaceFolder||O.homeFolder;await fE(pe($({},P.common),{output:f}),O,c,D,{remoteEnv:x.remoteEnv,print:"continuous"})}catch(D){console.log(`Command execution failed: ${D}`)}console.log("Stopping container"),await or(z,"rm","-f",B.Id),console.log("Stopped.")}catch(H){console.log(`Error: ${H}`)}else"dockerComposeFile"in w&&console.log("TODO - add support for running docker compose dev container")}async function gu(e,t){try{return(await bt(e)).toString()}catch{throw new Mn(`Failed to read ${t} from ${e}`)}}async function doe(){if(!!rr)try{let e=bb.platform()==="win32"?"\\User\\globalStorage":"/User/globalStorage",t=rr.indexOf(e);if(t<0)throw new Error(`Failed to determine user settings path from: ${rr}`);let r=et.join(rr.substring(0,t+"/User".length),"settings.json"),n=await bt(r);return Cn(n.toString())}catch(e){(e==null?void 0:e.code)!=="ENOENT"&&(console.error("Failed to load user settings"),console.error(e));return}}async function Ib(e,t,r,n,i){if(et.isAbsolute(n)){if(e&&n.startsWith("/")){if(!t)throw new Mn("Using absolute paths only supported on WSL builds 18362 or later");return NR(t,n,i)}return n}return et.join(r,n)}async function Rb(e,t,r,n){var f;let i=(f=n==null?void 0:n["remote.containers.repositoryConfigurationPaths"])!=null?f:[],o=await Vk(e,t,i)||AE(e,t.configFolderPath),l=await Wk(e,t,o,r,void 0,void 0,void 0,void 0);if(l===void 0)throw console.error("ERR: Failed to load devcontainer config from provided project folder."),new Mn("Failed to load dev container config");return l}async function x2(){if(rr){let t=et.dirname(rr),r=await gu(et.join(t,"vscode-app-root"),"VS Code app root");return{loadNativeModule:i=>Ju(i,r),appRoot:r}}return{loadNativeModule:t=>Ju(t,void 0),appRoot:void 0}}async function T2(){let e="stable";if(rr){let t=et.dirname(rr);e=await gu(et.join(t,"vscode-quality"),"VS Code build")}return e}async function poe(){if(rr){let e=et.dirname(rr);return gu(et.join(e,"vscode-machine-id"),"VS Code machine id")}}async function hoe(e){let t=await poe(),r=et.join(__dirname,"..",".."),n=await sl(r),i=e&&n.aiKey?new Eg({packageId:n.name,packageVersion:n.version,aiKey:n.aiKey,eventPrefix:"ms-vscode-remote.remote-containers",cleanupPaths:[r],commonProperties:$({"common.cli":"true"},t?{"common.vscodemachineid":t}:{})}):void 0;return{sendTelemetryEvent:(o,s,a)=>i==null?void 0:i.sendTelemetryEvent(o,s,a),dispose:()=>i==null?void 0:i.dispose()}}async function A2(e,t,r,n,i,o,s,a,c,u,l,f){let d=void 0,p,h,m=et.join(__dirname,"..",".."),v=S2?m:et.join(m,".."),_=new Date,E=await sl(m),w=(await(0,Cg.promisify)(_g.randomBytes)(20)).toString("hex"),T=ZE(e,d),N=$($({},e.env),T),P={cliMode:!1,prebuild:!1,computeExtensionHostEnv:!0,product:{commit:void 0,quality:n,serverDataFolderName:E2({serverDataFolderName:void 0,quality:n})},package:E,appRoot:a,localCacheFolder:e.path.join(await e.tmpdir(),"vsch"),extensionPath:v,connectionToken:void 0,sessionId:w,sessionStart:_,authority:h,cliHost:e,env:N,cwd:e.cwd,isLocalContainer:!1,getExtensionsToInstall:async(R,Y)=>R?[]:Y,installBuiltinExtensions:void 0,isCopyGitConfigEnabled:!1,credentialHelperConfigLocation:"none",dotfilesConfiguration:{repository:void 0,installCommand:void 0,targetPath:"~/dotfiles"},progress:()=>{},output:r,logFilePath:void 0,allowSystemConfigChange:!0,defaultUserEnvProbe:"none",postCreate:nE(i,o,r),telemetry:c,getLogLevel:()=>le.Info,onDidChangeLogLevel:()=>({dispose(){}}),forwardServerPort:!1,web:!1,loadNativeModule:s,shutdowns:[],forwardedPorts:new Set,backgroundTasks:[],setWorkspaceName:()=>{},sendTelemetryEvent:u,isCachedFlightEnabled:async R=>!1,async openTunnel(R,Y){},async getTunnels(){return[]},fireEvent:()=>{},onAdoptProcess:new Qa().event,remoteContainerFeaturesEnabled:l},z=(f==null?void 0:f["remote.containers.dockerPath"])||"docker",H=(f==null?void 0:f["remote.containers.dockerComposePath"])||"docker-compose";return{common:P,parsedAuthority:p,gitClone:void 0,dockerCLI:z,dockerComposeCLI:gh({exec:P.cliHost.exec,env:$($({},T),Rn(T)),output:P.output},z,H),dockerEnv:T,workspaceMountConsistencyDefault:void 0,cacheMount:"bind",configurationTracking:_2,removeOnStartup:!1,buildNoCache:t,expectExistingContainer:!1,userRepositoryConfigurationPaths:[]}}function moe(e){return _g.createHash("md5").update(e).update(new Date().getMilliseconds().toString()).digest("hex")}function I2(e){return(e==null?void 0:e["remote.containers.experimentalContainerFeaturesFetchRemote"])||!1}0&&(module.exports={runHandler});
/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */
//# sourceMappingURL=devContainersUserCLI.js.map
