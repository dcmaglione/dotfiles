/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------------------------------------------*/

var KH=Object.create;var _c=Object.defineProperty,YH=Object.defineProperties,QH=Object.getOwnPropertyDescriptor,XH=Object.getOwnPropertyDescriptors,JH=Object.getOwnPropertyNames,M_=Object.getOwnPropertySymbols,ZH=Object.getPrototypeOf,q_=Object.prototype.hasOwnProperty,eV=Object.prototype.propertyIsEnumerable;var $_=(t,e,r)=>e in t?_c(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,U=(t,e)=>{for(var r in e||(e={}))q_.call(e,r)&&$_(t,r,e[r]);if(M_)for(var r of M_(e))eV.call(e,r)&&$_(t,r,e[r]);return t},Z=(t,e)=>YH(t,XH(e)),j_=t=>_c(t,"__esModule",{value:!0});var _=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),tV=(t,e)=>{j_(t);for(var r in e)_c(t,r,{get:e[r],enumerable:!0})},rV=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of JH(e))!q_.call(t,n)&&n!=="default"&&_c(t,n,{get:()=>e[n],enumerable:!(r=QH(e,n))||r.enumerable});return t},V=t=>rV(j_(_c(t!=null?KH(ZH(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var r0=_((mce,t0)=>{var Ms=1e3,qs=Ms*60,$s=qs*60,Ro=$s*24,pV=Ro*7,hV=Ro*365.25;t0.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return mV(t);if(r==="number"&&isFinite(t))return e.long?vV(t):gV(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function mV(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!!e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*hV;case"weeks":case"week":case"w":return r*pV;case"days":case"day":case"d":return r*Ro;case"hours":case"hour":case"hrs":case"hr":case"h":return r*$s;case"minutes":case"minute":case"mins":case"min":case"m":return r*qs;case"seconds":case"second":case"secs":case"sec":case"s":return r*Ms;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function gV(t){var e=Math.abs(t);return e>=Ro?Math.round(t/Ro)+"d":e>=$s?Math.round(t/$s)+"h":e>=qs?Math.round(t/qs)+"m":e>=Ms?Math.round(t/Ms)+"s":t+"ms"}function vV(t){var e=Math.abs(t);return e>=Ro?ld(t,e,Ro,"day"):e>=$s?ld(t,e,$s,"hour"):e>=qs?ld(t,e,qs,"minute"):e>=Ms?ld(t,e,Ms,"second"):t+" ms"}function ld(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var kg=_((gce,n0)=>{function yV(t){r.debug=r,r.default=r,r.coerce=c,r.disable=o,r.enable=i,r.enabled=s,r.humanize=r0(),r.destroy=l,Object.keys(t).forEach(u=>{r[u]=t[u]}),r.names=[],r.skips=[],r.formatters={};function e(u){let d=0;for(let f=0;f<u.length;f++)d=(d<<5)-d+u.charCodeAt(f),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=e;function r(u){let d,f=null;function p(...h){if(!p.enabled)return;let m=p,g=Number(new Date),v=g-(d||g);m.diff=v,m.prev=d,m.curr=g,d=g,h[0]=r.coerce(h[0]),typeof h[0]!="string"&&h.unshift("%O");let y=0;h[0]=h[0].replace(/%([a-zA-Z%])/g,(w,b)=>{if(w==="%%")return"%";y++;let E=r.formatters[b];if(typeof E=="function"){let S=h[y];w=E.call(m,S),h.splice(y,1),y--}return w}),r.formatArgs.call(m,h),(m.log||r.log).apply(m,h)}return p.namespace=u,p.useColors=r.useColors(),p.color=r.selectColor(u),p.extend=n,p.destroy=r.destroy,Object.defineProperty(p,"enabled",{enumerable:!0,configurable:!1,get:()=>f===null?r.enabled(u):f,set:h=>{f=h}}),typeof r.init=="function"&&r.init(p),p}function n(u,d){let f=r(this.namespace+(typeof d=="undefined"?":":d)+u);return f.log=this.log,f}function i(u){r.save(u),r.names=[],r.skips=[];let d,f=(typeof u=="string"?u:"").split(/[\s,]+/),p=f.length;for(d=0;d<p;d++)!f[d]||(u=f[d].replace(/\*/g,".*?"),u[0]==="-"?r.skips.push(new RegExp("^"+u.substr(1)+"$")):r.names.push(new RegExp("^"+u+"$")))}function o(){let u=[...r.names.map(a),...r.skips.map(a).map(d=>"-"+d)].join(",");return r.enable(""),u}function s(u){if(u[u.length-1]==="*")return!0;let d,f;for(d=0,f=r.skips.length;d<f;d++)if(r.skips[d].test(u))return!1;for(d=0,f=r.names.length;d<f;d++)if(r.names[d].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function c(u){return u instanceof Error?u.stack||u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}n0.exports=yV});var i0=_((wr,ud)=>{wr.formatArgs=CV;wr.save=bV;wr.load=EV;wr.useColors=wV;wr.storage=_V();wr.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();wr.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function wV(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function CV(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+ud.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}wr.log=console.debug||console.log||(()=>{});function bV(t){try{t?wr.storage.setItem("debug",t):wr.storage.removeItem("debug")}catch(e){}}function EV(){let t;try{t=wr.storage.getItem("debug")}catch(e){}return!t&&typeof process!="undefined"&&"env"in process&&(t=process.env.DEBUG),t}function _V(){try{return localStorage}catch(t){}}ud.exports=kg()(wr);var{formatters:SV}=ud.exports;SV.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var s0=_((vce,o0)=>{"use strict";o0.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var l0=_((yce,c0)=>{"use strict";var xV=require("os"),a0=require("tty"),Dr=s0(),{env:bt}=process,dd;Dr("no-color")||Dr("no-colors")||Dr("color=false")||Dr("color=never")?dd=0:(Dr("color")||Dr("colors")||Dr("color=true")||Dr("color=always"))&&(dd=1);function kV(){if("FORCE_COLOR"in bt)return bt.FORCE_COLOR==="true"?1:bt.FORCE_COLOR==="false"?0:bt.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(bt.FORCE_COLOR,10),3)}function PV(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function IV(t,{streamIsTTY:e,sniffFlags:r=!0}={}){let n=kV();n!==void 0&&(dd=n);let i=r?dd:n;if(i===0)return 0;if(r){if(Dr("color=16m")||Dr("color=full")||Dr("color=truecolor"))return 3;if(Dr("color=256"))return 2}if(t&&!e&&i===void 0)return 0;let o=i||0;if(bt.TERM==="dumb")return o;if(process.platform==="win32"){let s=xV.release().split(".");return Number(s[0])>=10&&Number(s[2])>=10586?Number(s[2])>=14931?3:2:1}if("CI"in bt)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(s=>s in bt)||bt.CI_NAME==="codeship"?1:o;if("TEAMCITY_VERSION"in bt)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(bt.TEAMCITY_VERSION)?1:0;if(bt.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in bt){let s=Number.parseInt((bt.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(bt.TERM_PROGRAM){case"iTerm.app":return s>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(bt.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(bt.TERM)||"COLORTERM"in bt?1:o}function Pg(t,e={}){let r=IV(t,U({streamIsTTY:t&&t.isTTY},e));return PV(r)}c0.exports={supportsColor:Pg,stdout:Pg({isTTY:a0.isatty(1)}),stderr:Pg({isTTY:a0.isatty(2)})}});var d0=_((Tt,pd)=>{var AV=require("tty"),fd=require("util");Tt.init=FV;Tt.log=OV;Tt.formatArgs=RV;Tt.save=NV;Tt.load=LV;Tt.useColors=TV;Tt.destroy=fd.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Tt.colors=[6,2,3,4,5,1];try{let t=l0();t&&(t.stderr||t).level>=2&&(Tt.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(t){}Tt.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,o)=>o.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function TV(){return"colors"in Tt.inspectOpts?Boolean(Tt.inspectOpts.colors):AV.isatty(process.stderr.fd)}function RV(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="[3"+(n<8?n:"8;5;"+n),o=`  ${i};1m${e} [0m`;t[0]=o+t[0].split(`
`).join(`
`+o),t.push(i+"m+"+pd.exports.humanize(this.diff)+"[0m")}else t[0]=DV()+e+" "+t[0]}function DV(){return Tt.inspectOpts.hideDate?"":new Date().toISOString()+" "}function OV(...t){return process.stderr.write(fd.format(...t)+`
`)}function NV(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function LV(){return process.env.DEBUG}function FV(t){t.inspectOpts={};let e=Object.keys(Tt.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=Tt.inspectOpts[e[r]]}pd.exports=kg()(Tt);var{formatters:u0}=pd.exports;u0.o=function(t){return this.inspectOpts.colors=this.useColors,fd.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};u0.O=function(t){return this.inspectOpts.colors=this.useColors,fd.inspect(t,this.inspectOpts)}});var Ag=_((wce,Ig)=>{typeof process=="undefined"||process.type==="renderer"||process.browser===!0||process.__nwjs?Ig.exports=i0():Ig.exports=d0()});var p0=_((Cce,f0)=>{var Pc;f0.exports=function(){if(!Pc){try{Pc=Ag()("follow-redirects")}catch(t){}typeof Pc!="function"&&(Pc=function(){})}Pc.apply(null,arguments)}});var Ng=_((bce,Og)=>{var js=require("url"),Tg=js.URL,MV=require("http"),qV=require("https"),h0=require("stream").Writable,$V=require("assert"),m0=p0(),Do=["abort","aborted","connect","error","socket","timeout"],Rg=Object.create(null);Do.forEach(function(t){Rg[t]=function(e,r,n){this._redirectable.emit(t,e,r,n)}});var jV=hd("ERR_FR_REDIRECTION_FAILURE",""),UV=hd("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),BV=hd("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),HV=hd("ERR_STREAM_WRITE_AFTER_END","write after end");function Cr(t,e){h0.call(this),this._sanitizeOptions(t),this._options=t,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],e&&this.on("response",e);var r=this;this._onNativeResponse=function(n){r._processResponse(n)},this._performRequest()}Cr.prototype=Object.create(h0.prototype);Cr.prototype.abort=function(){y0(this._currentRequest),this.emit("abort")};Cr.prototype.write=function(t,e,r){if(this._ending)throw new HV;if(!(typeof t=="string"||typeof t=="object"&&"length"in t))throw new TypeError("data should be a string, Buffer or Uint8Array");if(typeof e=="function"&&(r=e,e=null),t.length===0){r&&r();return}this._requestBodyLength+t.length<=this._options.maxBodyLength?(this._requestBodyLength+=t.length,this._requestBodyBuffers.push({data:t,encoding:e}),this._currentRequest.write(t,e,r)):(this.emit("error",new BV),this.abort())};Cr.prototype.end=function(t,e,r){if(typeof t=="function"?(r=t,t=e=null):typeof e=="function"&&(r=e,e=null),!t)this._ended=this._ending=!0,this._currentRequest.end(null,null,r);else{var n=this,i=this._currentRequest;this.write(t,e,function(){n._ended=!0,i.end(null,null,r)}),this._ending=!0}};Cr.prototype.setHeader=function(t,e){this._options.headers[t]=e,this._currentRequest.setHeader(t,e)};Cr.prototype.removeHeader=function(t){delete this._options.headers[t],this._currentRequest.removeHeader(t)};Cr.prototype.setTimeout=function(t,e){var r=this;function n(s){s.setTimeout(t),s.removeListener("timeout",s.destroy),s.addListener("timeout",s.destroy)}function i(s){r._timeout&&clearTimeout(r._timeout),r._timeout=setTimeout(function(){r.emit("timeout"),o()},t),n(s)}function o(){r._timeout&&(clearTimeout(r._timeout),r._timeout=null),e&&r.removeListener("timeout",e),r.socket||r._currentRequest.removeListener("socket",i)}return e&&this.on("timeout",e),this.socket?i(this.socket):this._currentRequest.once("socket",i),this.on("socket",n),this.once("response",o),this.once("error",o),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(t){Cr.prototype[t]=function(e,r){return this._currentRequest[t](e,r)}});["aborted","connection","socket"].forEach(function(t){Object.defineProperty(Cr.prototype,t,{get:function(){return this._currentRequest[t]}})});Cr.prototype._sanitizeOptions=function(t){if(t.headers||(t.headers={}),t.host&&(t.hostname||(t.hostname=t.host),delete t.host),!t.pathname&&t.path){var e=t.path.indexOf("?");e<0?t.pathname=t.path:(t.pathname=t.path.substring(0,e),t.search=t.path.substring(e))}};Cr.prototype._performRequest=function(){var t=this._options.protocol,e=this._options.nativeProtocols[t];if(!e){this.emit("error",new TypeError("Unsupported protocol "+t));return}if(this._options.agents){var r=t.substr(0,t.length-1);this._options.agent=this._options.agents[r]}var n=this._currentRequest=e.request(this._options,this._onNativeResponse);this._currentUrl=js.format(this._options),n._redirectable=this;for(var i=0;i<Do.length;i++)n.on(Do[i],Rg[Do[i]]);if(this._isRedirect){var o=0,s=this,a=this._requestBodyBuffers;(function c(l){if(n===s._currentRequest)if(l)s.emit("error",l);else if(o<a.length){var u=a[o++];n.finished||n.write(u.data,u.encoding,c)}else s._ended&&n.end()})()}};Cr.prototype._processResponse=function(t){var e=t.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:t.headers,statusCode:e});var r=t.headers.location;if(r&&this._options.followRedirects!==!1&&e>=300&&e<400){if(y0(this._currentRequest),t.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new UV);return}((e===301||e===302)&&this._options.method==="POST"||e===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],Dg(/^content-/i,this._options.headers));var n=Dg(/^host$/i,this._options.headers)||js.parse(this._currentUrl).hostname,i=js.resolve(this._currentUrl,r);m0("redirecting to",i),this._isRedirect=!0;var o=js.parse(i);if(Object.assign(this._options,o),o.hostname!==n&&Dg(/^authorization$/i,this._options.headers),typeof this._options.beforeRedirect=="function"){var s={headers:t.headers};try{this._options.beforeRedirect.call(null,this._options,s)}catch(c){this.emit("error",c);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(c){var a=new jV("Redirected request failed: "+c.message);a.cause=c,this.emit("error",a)}}else t.responseUrl=this._currentUrl,t.redirects=this._redirects,this.emit("response",t),this._requestBodyBuffers=[]};function g0(t){var e={maxRedirects:21,maxBodyLength:10*1024*1024},r={};return Object.keys(t).forEach(function(n){var i=n+":",o=r[i]=t[n],s=e[n]=Object.create(o);function a(l,u,d){if(typeof l=="string"){var f=l;try{l=v0(new Tg(f))}catch(p){l=js.parse(f)}}else Tg&&l instanceof Tg?l=v0(l):(d=u,u=l,l={protocol:i});return typeof u=="function"&&(d=u,u=null),u=Object.assign({maxRedirects:e.maxRedirects,maxBodyLength:e.maxBodyLength},l,u),u.nativeProtocols=r,$V.equal(u.protocol,i,"protocol mismatch"),m0("options",u),new Cr(u,d)}function c(l,u,d){var f=s.request(l,u,d);return f.end(),f}Object.defineProperties(s,{request:{value:a,configurable:!0,enumerable:!0,writable:!0},get:{value:c,configurable:!0,enumerable:!0,writable:!0}})}),e}function VV(){}function v0(t){var e={protocol:t.protocol,hostname:t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,hash:t.hash,search:t.search,pathname:t.pathname,path:t.pathname+t.search,href:t.href};return t.port!==""&&(e.port=Number(t.port)),e}function Dg(t,e){var r;for(var n in e)t.test(n)&&(r=e[n],delete e[n]);return r}function hd(t,e){function r(n){Error.captureStackTrace(this,this.constructor),this.message=n||e}return r.prototype=new Error,r.prototype.constructor=r,r.prototype.name="Error ["+t+"]",r.prototype.code=t,r}function y0(t){for(var e=0;e<Do.length;e++)t.removeListener(Do[e],Rg[Do[e]]);t.on("error",VV),t.abort()}Og.exports=g0({http:MV,https:qV});Og.exports.wrap=g0});var Us=_((Ece,C0)=>{"use strict";var w0=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"]]);C0.exports=t=>t?Object.keys(t).map(e=>[w0.has(e)?w0.get(e):e,t[e]]).reduce((e,r)=>(e[r[0]]=r[1],e),Object.create(null)):{}});var E0=_((_ce,b0)=>{"use strict";b0.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var Ic=_((Sce,_0)=>{"use strict";_0.exports=Te;Te.Node=Oo;Te.create=Te;function Te(t){var e=this;if(e instanceof Te||(e=new Te),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)e.push(arguments[r]);return e}Te.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e};Te.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};Te.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};Te.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)WV(this,arguments[t]);return this.length};Te.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)zV(this,arguments[t]);return this.length};Te.prototype.pop=function(){if(!!this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};Te.prototype.shift=function(){if(!!this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};Te.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,n=0;r!==null;n++)t.call(e,r.value,n,this),r=r.next};Te.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,n=this.length-1;r!==null;n--)t.call(e,r.value,n,this),r=r.prev};Te.prototype.get=function(t){for(var e=0,r=this.head;r!==null&&e<t;e++)r=r.next;if(e===t&&r!==null)return r.value};Te.prototype.getReverse=function(t){for(var e=0,r=this.tail;r!==null&&e<t;e++)r=r.prev;if(e===t&&r!==null)return r.value};Te.prototype.map=function(t,e){e=e||this;for(var r=new Te,n=this.head;n!==null;)r.push(t.call(e,n.value,this)),n=n.next;return r};Te.prototype.mapReverse=function(t,e){e=e||this;for(var r=new Te,n=this.tail;n!==null;)r.push(t.call(e,n.value,this)),n=n.prev;return r};Te.prototype.reduce=function(t,e){var r,n=this.head;if(arguments.length>1)r=e;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)r=t(r,n.value,i),n=n.next;return r};Te.prototype.reduceReverse=function(t,e){var r,n=this.tail;if(arguments.length>1)r=e;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)r=t(r,n.value,i),n=n.prev;return r};Te.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;r!==null;e++)t[e]=r.value,r=r.next;return t};Te.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;r!==null;e++)t[e]=r.value,r=r.prev;return t};Te.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new Te;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(;i!==null&&n<e;n++,i=i.next)r.push(i.value);return r};Te.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new Te;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=this.length,i=this.tail;i!==null&&n>e;n--)i=i.prev;for(;i!==null&&n>t;n--,i=i.prev)r.push(i.value);return r};Te.prototype.splice=function(t,e,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(var o=[],n=0;i&&n<e;n++)o.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<r.length;n++)i=GV(this,i,r[n]);return o};Te.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=e,this.tail=t,this};function GV(t,e,r){var n=e===t.head?new Oo(r,null,e,t):new Oo(r,e,e.next,t);return n.next===null&&(t.tail=n),n.prev===null&&(t.head=n),t.length++,n}function WV(t,e){t.tail=new Oo(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function zV(t,e){t.head=new Oo(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function Oo(t,e,r,n){if(!(this instanceof Oo))return new Oo(t,e,r,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{E0()(Te)}catch(t){}});var Bs=_((xce,D0)=>{"use strict";var KV=require("events"),S0=require("stream"),Ac=Ic(),x0=require("string_decoder").StringDecoder,ei=Symbol("EOF"),Tc=Symbol("maybeEmitEnd"),Ri=Symbol("emittedEnd"),md=Symbol("emittingEnd"),gd=Symbol("closed"),k0=Symbol("read"),Lg=Symbol("flush"),P0=Symbol("flushChunk"),ir=Symbol("encoding"),ti=Symbol("decoder"),vd=Symbol("flowing"),Rc=Symbol("paused"),Dc=Symbol("resume"),Xt=Symbol("bufferLength"),I0=Symbol("bufferPush"),Fg=Symbol("bufferShift"),Ft=Symbol("objectMode"),Mt=Symbol("destroyed"),A0=global._MP_NO_ITERATOR_SYMBOLS_!=="1",YV=A0&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),QV=A0&&Symbol.iterator||Symbol("iterator not implemented"),T0=t=>t==="end"||t==="finish"||t==="prefinish",XV=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,JV=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t);D0.exports=class R0 extends S0{constructor(e){super();this[vd]=!1,this[Rc]=!1,this.pipes=new Ac,this.buffer=new Ac,this[Ft]=e&&e.objectMode||!1,this[Ft]?this[ir]=null:this[ir]=e&&e.encoding||null,this[ir]==="buffer"&&(this[ir]=null),this[ti]=this[ir]?new x0(this[ir]):null,this[ei]=!1,this[Ri]=!1,this[md]=!1,this[gd]=!1,this.writable=!0,this.readable=!0,this[Xt]=0,this[Mt]=!1}get bufferLength(){return this[Xt]}get encoding(){return this[ir]}set encoding(e){if(this[Ft])throw new Error("cannot set encoding in objectMode");if(this[ir]&&e!==this[ir]&&(this[ti]&&this[ti].lastNeed||this[Xt]))throw new Error("cannot change encoding");this[ir]!==e&&(this[ti]=e?new x0(e):null,this.buffer.length&&(this.buffer=this.buffer.map(r=>this[ti].write(r)))),this[ir]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[Ft]}set objectMode(e){this[Ft]=this[Ft]||!!e}write(e,r,n){if(this[ei])throw new Error("write after end");return this[Mt]?(this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0):(typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8"),!this[Ft]&&!Buffer.isBuffer(e)&&(JV(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):XV(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),!this.objectMode&&!e.length?(this[Xt]!==0&&this.emit("readable"),n&&n(),this.flowing):(typeof e=="string"&&!this[Ft]&&!(r===this[ir]&&!this[ti].lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[ir]&&(e=this[ti].write(e)),this.flowing?(this[Xt]!==0&&this[Lg](!0),this.emit("data",e)):this[I0](e),this[Xt]!==0&&this.emit("readable"),n&&n(),this.flowing))}read(e){if(this[Mt])return null;try{return this[Xt]===0||e===0||e>this[Xt]?null:(this[Ft]&&(e=null),this.buffer.length>1&&!this[Ft]&&(this.encoding?this.buffer=new Ac([Array.from(this.buffer).join("")]):this.buffer=new Ac([Buffer.concat(Array.from(this.buffer),this[Xt])])),this[k0](e||null,this.buffer.head.value))}finally{this[Tc]()}}[k0](e,r){return e===r.length||e===null?this[Fg]():(this.buffer.head.value=r.slice(e),r=r.slice(0,e),this[Xt]-=e),this.emit("data",r),!this.buffer.length&&!this[ei]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=null),typeof r=="function"&&(n=r,r="utf8"),e&&this.write(e,r),n&&this.once("end",n),this[ei]=!0,this.writable=!1,(this.flowing||!this[Rc])&&this[Tc](),this}[Dc](){this[Mt]||(this[Rc]=!1,this[vd]=!0,this.emit("resume"),this.buffer.length?this[Lg]():this[ei]?this[Tc]():this.emit("drain"))}resume(){return this[Dc]()}pause(){this[vd]=!1,this[Rc]=!0}get destroyed(){return this[Mt]}get flowing(){return this[vd]}get paused(){return this[Rc]}[I0](e){return this[Ft]?this[Xt]+=1:this[Xt]+=e.length,this.buffer.push(e)}[Fg](){return this.buffer.length&&(this[Ft]?this[Xt]-=1:this[Xt]-=this.buffer.head.value.length),this.buffer.shift()}[Lg](e){do;while(this[P0](this[Fg]()));!e&&!this.buffer.length&&!this[ei]&&this.emit("drain")}[P0](e){return e?(this.emit("data",e),this.flowing):!1}pipe(e,r){if(this[Mt])return;let n=this[Ri];r=r||{},e===process.stdout||e===process.stderr?r.end=!1:r.end=r.end!==!1;let i={dest:e,opts:r,ondrain:o=>this[Dc]()};return this.pipes.push(i),e.on("drain",i.ondrain),this[Dc](),n&&i.opts.end&&i.dest.end(),e}addListener(e,r){return this.on(e,r)}on(e,r){try{return super.on(e,r)}finally{e==="data"&&!this.pipes.length&&!this.flowing?this[Dc]():T0(e)&&this[Ri]&&(super.emit(e),this.removeAllListeners(e))}}get emittedEnd(){return this[Ri]}[Tc](){!this[md]&&!this[Ri]&&!this[Mt]&&this.buffer.length===0&&this[ei]&&(this[md]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[gd]&&this.emit("close"),this[md]=!1)}emit(e,r){if(e!=="error"&&e!=="close"&&e!==Mt&&this[Mt])return;if(e==="data"){if(!r)return;this.pipes.length&&this.pipes.forEach(i=>i.dest.write(r)===!1&&this.pause())}else if(e==="end"){if(this[Ri]===!0)return;this[Ri]=!0,this.readable=!1,this[ti]&&(r=this[ti].end(),r&&(this.pipes.forEach(i=>i.dest.write(r)),super.emit("data",r))),this.pipes.forEach(i=>{i.dest.removeListener("drain",i.ondrain),i.opts.end&&i.dest.end()})}else if(e==="close"&&(this[gd]=!0,!this[Ri]&&!this[Mt]))return;let n=new Array(arguments.length);if(n[0]=e,n[1]=r,arguments.length>2)for(let i=2;i<arguments.length;i++)n[i]=arguments[i];try{return super.emit.apply(this,n)}finally{T0(e)?this.removeAllListeners(e):this[Tc]()}}collect(){let e=[];this[Ft]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[Ft]||(e.dataLength+=n.length)}),r.then(()=>e)}concat(){return this[Ft]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[Ft]?Promise.reject(new Error("cannot concat in objectMode")):this[ir]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,r)=>{this.on(Mt,()=>r(new Error("stream destroyed"))),this.on("end",()=>e()),this.on("error",n=>r(n))})}[YV](){return{next:()=>{let r=this.read();if(r!==null)return Promise.resolve({done:!1,value:r});if(this[ei])return Promise.resolve({done:!0});let n=null,i=null,o=l=>{this.removeListener("data",s),this.removeListener("end",a),i(l)},s=l=>{this.removeListener("error",o),this.removeListener("end",a),this.pause(),n({value:l,done:!!this[ei]})},a=()=>{this.removeListener("error",o),this.removeListener("data",s),n({done:!0})},c=()=>o(new Error("stream destroyed"));return new Promise((l,u)=>{i=u,n=l,this.once(Mt,c),this.once("error",o),this.once("end",a),this.once("data",s)})}}}[QV](){return{next:()=>{let r=this.read();return{value:r,done:r===null}}}}destroy(e){return this[Mt]?(e?this.emit("error",e):this.emit(Mt),this):(this[Mt]=!0,this.buffer=new Ac,this[Xt]=0,typeof this.close=="function"&&!this[gd]&&this.close(),e?this.emit("error",e):this.emit(Mt),this)}static isStream(e){return!!e&&(e instanceof R0||e instanceof S0||e instanceof KV&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}}});var N0=_((kce,O0)=>{var ZV=require("zlib").constants||{ZLIB_VERNUM:4736};O0.exports=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:1/0,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},ZV))});var Gg=_(br=>{"use strict";var Mg=require("assert"),Di=require("buffer").Buffer,L0=require("zlib"),No=br.constants=N0(),e3=Bs(),F0=Di.concat,Lo=Symbol("_superWrite"),Oc=class extends Error{constructor(e){super("zlib: "+e.message);this.code=e.code,this.errno=e.errno,this.code||(this.code="ZLIB_ERROR"),this.message="zlib: "+e.message,Error.captureStackTrace(this,this.constructor)}get name(){return"ZlibError"}},t3=Symbol("opts"),Nc=Symbol("flushFlag"),M0=Symbol("finishFlushFlag"),qg=Symbol("fullFlushFlag"),We=Symbol("handle"),yd=Symbol("onError"),Hs=Symbol("sawError"),$g=Symbol("level"),jg=Symbol("strategy"),Ug=Symbol("ended"),Pce=Symbol("_defaultFullFlush"),Bg=class extends e3{constructor(e,r){if(!e||typeof e!="object")throw new TypeError("invalid options for ZlibBase constructor");super(e);this[Hs]=!1,this[Ug]=!1,this[t3]=e,this[Nc]=e.flush,this[M0]=e.finishFlush;try{this[We]=new L0[r](e)}catch(n){throw new Oc(n)}this[yd]=n=>{this[Hs]||(this[Hs]=!0,this.close(),this.emit("error",n))},this[We].on("error",n=>this[yd](new Oc(n))),this.once("end",()=>this.close)}close(){this[We]&&(this[We].close(),this[We]=null,this.emit("close"))}reset(){if(!this[Hs])return Mg(this[We],"zlib binding closed"),this[We].reset()}flush(e){this.ended||(typeof e!="number"&&(e=this[qg]),this.write(Object.assign(Di.alloc(0),{[Nc]:e})))}end(e,r,n){return e&&this.write(e,r),this.flush(this[M0]),this[Ug]=!0,super.end(null,null,n)}get ended(){return this[Ug]}write(e,r,n){if(typeof r=="function"&&(n=r,r="utf8"),typeof e=="string"&&(e=Di.from(e,r)),this[Hs])return;Mg(this[We],"zlib binding closed");let i=this[We]._handle,o=i.close;i.close=()=>{};let s=this[We].close;this[We].close=()=>{},Di.concat=l=>l;let a;try{let l=typeof e[Nc]=="number"?e[Nc]:this[Nc];a=this[We]._processChunk(e,l),Di.concat=F0}catch(l){Di.concat=F0,this[yd](new Oc(l))}finally{this[We]&&(this[We]._handle=i,i.close=o,this[We].close=s,this[We].removeAllListeners("error"))}this[We]&&this[We].on("error",l=>this[yd](new Oc(l)));let c;if(a)if(Array.isArray(a)&&a.length>0){c=this[Lo](Di.from(a[0]));for(let l=1;l<a.length;l++)c=this[Lo](a[l])}else c=this[Lo](Di.from(a));return n&&n(),c}[Lo](e){return super.write(e)}},Oi=class extends Bg{constructor(e,r){e=e||{},e.flush=e.flush||No.Z_NO_FLUSH,e.finishFlush=e.finishFlush||No.Z_FINISH;super(e,r);this[qg]=No.Z_FULL_FLUSH,this[$g]=e.level,this[jg]=e.strategy}params(e,r){if(!this[Hs]){if(!this[We])throw new Error("cannot switch params when binding is closed");if(!this[We].params)throw new Error("not supported in this implementation");if(this[$g]!==e||this[jg]!==r){this.flush(No.Z_SYNC_FLUSH),Mg(this[We],"zlib binding closed");let n=this[We].flush;this[We].flush=(i,o)=>{this.flush(i),o()};try{this[We].params(e,r)}finally{this[We].flush=n}this[We]&&(this[$g]=e,this[jg]=r)}}}},q0=class extends Oi{constructor(e){super(e,"Deflate")}},$0=class extends Oi{constructor(e){super(e,"Inflate")}},Hg=Symbol("_portable"),j0=class extends Oi{constructor(e){super(e,"Gzip");this[Hg]=e&&!!e.portable}[Lo](e){return this[Hg]?(this[Hg]=!1,e[9]=255,super[Lo](e)):super[Lo](e)}},U0=class extends Oi{constructor(e){super(e,"Gunzip")}},B0=class extends Oi{constructor(e){super(e,"DeflateRaw")}},H0=class extends Oi{constructor(e){super(e,"InflateRaw")}},V0=class extends Oi{constructor(e){super(e,"Unzip")}},Vg=class extends Bg{constructor(e,r){e=e||{},e.flush=e.flush||No.BROTLI_OPERATION_PROCESS,e.finishFlush=e.finishFlush||No.BROTLI_OPERATION_FINISH;super(e,r);this[qg]=No.BROTLI_OPERATION_FLUSH}},G0=class extends Vg{constructor(e){super(e,"BrotliCompress")}},W0=class extends Vg{constructor(e){super(e,"BrotliDecompress")}};br.Deflate=q0;br.Inflate=$0;br.Gzip=j0;br.Gunzip=U0;br.DeflateRaw=B0;br.InflateRaw=H0;br.Unzip=V0;typeof L0.BrotliCompress=="function"?(br.BrotliCompress=G0,br.BrotliDecompress=W0):br.BrotliCompress=br.BrotliDecompress=class{constructor(){throw new Error("Brotli is not supported in this version of Node.js")}}});var Vs=_((Ace,z0)=>{var r3=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform;z0.exports=r3!=="win32"?t=>t:t=>t&&t.replace(/\\/g,"/")});var wd=_((Rce,K0)=>{"use strict";var n3=Bs(),Wg=Vs(),zg=Symbol("slurp");K0.exports=class extends n3{constructor(e,r,n){super();switch(this.pause(),this.extended=r,this.globalExtended=n,this.header=e,this.startBlockSize=512*Math.ceil(e.size/512),this.blockRemain=this.startBlockSize,this.remain=e.size,this.type=e.type,this.meta=!1,this.ignore=!1,this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=!0;break;default:this.ignore=!0}this.path=Wg(e.path),this.mode=e.mode,this.mode&&(this.mode=this.mode&4095),this.uid=e.uid,this.gid=e.gid,this.uname=e.uname,this.gname=e.gname,this.size=e.size,this.mtime=e.mtime,this.atime=e.atime,this.ctime=e.ctime,this.linkpath=Wg(e.linkpath),this.uname=e.uname,this.gname=e.gname,r&&this[zg](r),n&&this[zg](n,!0)}write(e){let r=e.length;if(r>this.blockRemain)throw new Error("writing more to entry than is appropriate");let n=this.remain,i=this.blockRemain;return this.remain=Math.max(0,n-r),this.blockRemain=Math.max(0,i-r),this.ignore?!0:n>=r?super.write(e):super.write(e.slice(0,n))}[zg](e,r){for(let n in e)e[n]!==null&&e[n]!==void 0&&!(r&&n==="path")&&(this[n]=n==="path"||n==="linkpath"?Wg(e[n]):e[n])}}});var Kg=_(Cd=>{"use strict";Cd.name=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]);Cd.code=new Map(Array.from(Cd.name).map(t=>[t[1],t[0]]))});var J0=_((Oce,X0)=>{"use strict";var i3=(t,e)=>{if(Number.isSafeInteger(t))t<0?s3(t,e):o3(t,e);else throw Error("cannot encode number outside of javascript safe integer range");return e},o3=(t,e)=>{e[0]=128;for(var r=e.length;r>1;r--)e[r-1]=t&255,t=Math.floor(t/256)},s3=(t,e)=>{e[0]=255;var r=!1;t=t*-1;for(var n=e.length;n>1;n--){var i=t&255;t=Math.floor(t/256),r?e[n-1]=Y0(i):i===0?e[n-1]=0:(r=!0,e[n-1]=Q0(i))}},a3=t=>{let e=t[0],r=e===128?l3(t.slice(1,t.length)):e===255?c3(t):null;if(r===null)throw Error("invalid base256 encoding");if(!Number.isSafeInteger(r))throw Error("parsed number outside of javascript safe integer range");return r},c3=t=>{for(var e=t.length,r=0,n=!1,i=e-1;i>-1;i--){var o=t[i],s;n?s=Y0(o):o===0?s=o:(n=!0,s=Q0(o)),s!==0&&(r-=s*Math.pow(256,e-i-1))}return r},l3=t=>{for(var e=t.length,r=0,n=e-1;n>-1;n--){var i=t[n];i!==0&&(r+=i*Math.pow(256,e-n-1))}return r},Y0=t=>(255^t)&255,Q0=t=>(255^t)+1&255;X0.exports={encode:i3,parse:a3}});var Ws=_((Nce,tS)=>{"use strict";var Yg=Kg(),Gs=require("path").posix,Z0=J0(),Qg=Symbol("slurp"),Er=Symbol("type"),eS=class{constructor(e,r,n,i){this.cksumValid=!1,this.needPax=!1,this.nullBlock=!1,this.block=null,this.path=null,this.mode=null,this.uid=null,this.gid=null,this.size=null,this.mtime=null,this.cksum=null,this[Er]="0",this.linkpath=null,this.uname=null,this.gname=null,this.devmaj=0,this.devmin=0,this.atime=null,this.ctime=null,Buffer.isBuffer(e)?this.decode(e,r||0,n,i):e&&this.set(e)}decode(e,r,n,i){if(r||(r=0),!e||!(e.length>=r+512))throw new Error("need 512 bytes for header");if(this.path=Fo(e,r,100),this.mode=Ni(e,r+100,8),this.uid=Ni(e,r+108,8),this.gid=Ni(e,r+116,8),this.size=Ni(e,r+124,12),this.mtime=Xg(e,r+136,12),this.cksum=Ni(e,r+148,12),this[Qg](n),this[Qg](i,!0),this[Er]=Fo(e,r+156,1),this[Er]===""&&(this[Er]="0"),this[Er]==="0"&&this.path.substr(-1)==="/"&&(this[Er]="5"),this[Er]==="5"&&(this.size=0),this.linkpath=Fo(e,r+157,100),e.slice(r+257,r+265).toString()==="ustar\x0000")if(this.uname=Fo(e,r+265,32),this.gname=Fo(e,r+297,32),this.devmaj=Ni(e,r+329,8),this.devmin=Ni(e,r+337,8),e[r+475]!==0){let s=Fo(e,r+345,155);this.path=s+"/"+this.path}else{let s=Fo(e,r+345,130);s&&(this.path=s+"/"+this.path),this.atime=Xg(e,r+476,12),this.ctime=Xg(e,r+488,12)}let o=8*32;for(let s=r;s<r+148;s++)o+=e[s];for(let s=r+156;s<r+512;s++)o+=e[s];this.cksumValid=o===this.cksum,this.cksum===null&&o===8*32&&(this.nullBlock=!0)}[Qg](e,r){for(let n in e)e[n]!==null&&e[n]!==void 0&&!(r&&n==="path")&&(this[n]=e[n])}encode(e,r){if(e||(e=this.block=Buffer.alloc(512),r=0),r||(r=0),!(e.length>=r+512))throw new Error("need 512 bytes for header");let n=this.ctime||this.atime?130:155,i=u3(this.path||"",n),o=i[0],s=i[1];this.needPax=i[2],this.needPax=Mo(e,r,100,o)||this.needPax,this.needPax=Li(e,r+100,8,this.mode)||this.needPax,this.needPax=Li(e,r+108,8,this.uid)||this.needPax,this.needPax=Li(e,r+116,8,this.gid)||this.needPax,this.needPax=Li(e,r+124,12,this.size)||this.needPax,this.needPax=Jg(e,r+136,12,this.mtime)||this.needPax,e[r+156]=this[Er].charCodeAt(0),this.needPax=Mo(e,r+157,100,this.linkpath)||this.needPax,e.write("ustar\x0000",r+257,8),this.needPax=Mo(e,r+265,32,this.uname)||this.needPax,this.needPax=Mo(e,r+297,32,this.gname)||this.needPax,this.needPax=Li(e,r+329,8,this.devmaj)||this.needPax,this.needPax=Li(e,r+337,8,this.devmin)||this.needPax,this.needPax=Mo(e,r+345,n,s)||this.needPax,e[r+475]!==0?this.needPax=Mo(e,r+345,155,s)||this.needPax:(this.needPax=Mo(e,r+345,130,s)||this.needPax,this.needPax=Jg(e,r+476,12,this.atime)||this.needPax,this.needPax=Jg(e,r+488,12,this.ctime)||this.needPax);let a=8*32;for(let c=r;c<r+148;c++)a+=e[c];for(let c=r+156;c<r+512;c++)a+=e[c];return this.cksum=a,Li(e,r+148,8,this.cksum),this.cksumValid=!0,this.needPax}set(e){for(let r in e)e[r]!==null&&e[r]!==void 0&&(this[r]=e[r])}get type(){return Yg.name.get(this[Er])||this[Er]}get typeKey(){return this[Er]}set type(e){Yg.code.has(e)?this[Er]=Yg.code.get(e):this[Er]=e}},u3=(t,e)=>{let r=100,n=t,i="",o,s=Gs.parse(t).root||".";if(Buffer.byteLength(n)<r)o=[n,i,!1];else{i=Gs.dirname(n),n=Gs.basename(n);do Buffer.byteLength(n)<=r&&Buffer.byteLength(i)<=e?o=[n,i,!1]:Buffer.byteLength(n)>r&&Buffer.byteLength(i)<=e?o=[n.substr(0,r-1),i,!0]:(n=Gs.join(Gs.basename(i),n),i=Gs.dirname(i));while(i!==s&&!o);o||(o=[t.substr(0,r-1),"",!0])}return o},Fo=(t,e,r)=>t.slice(e,e+r).toString("utf8").replace(/\0.*/,""),Xg=(t,e,r)=>d3(Ni(t,e,r)),d3=t=>t===null?null:new Date(t*1e3),Ni=(t,e,r)=>t[e]&128?Z0.parse(t.slice(e,e+r)):p3(t,e,r),f3=t=>isNaN(t)?null:t,p3=(t,e,r)=>f3(parseInt(t.slice(e,e+r).toString("utf8").replace(/\0.*$/,"").trim(),8)),h3={12:8589934591,8:2097151},Li=(t,e,r,n)=>n===null?!1:n>h3[r]||n<0?(Z0.encode(n,t.slice(e,e+r)),!0):(m3(t,e,r,n),!1),m3=(t,e,r,n)=>t.write(g3(n,r),e,r,"ascii"),g3=(t,e)=>v3(Math.floor(t).toString(8),e),v3=(t,e)=>(t.length===e-1?t:new Array(e-t.length-1).join("0")+t+" ")+"\0",Jg=(t,e,r,n)=>n===null?!1:Li(t,e,r,n.getTime()/1e3),y3=new Array(156).join("\0"),Mo=(t,e,r,n)=>n===null?!1:(t.write(n+y3,e,r,"utf8"),n.length!==Buffer.byteLength(n)||n.length>r);tS.exports=eS});var Ed=_((Lce,rS)=>{"use strict";var w3=Ws(),C3=require("path"),bd=class{constructor(e,r){this.atime=e.atime||null,this.charset=e.charset||null,this.comment=e.comment||null,this.ctime=e.ctime||null,this.gid=e.gid||null,this.gname=e.gname||null,this.linkpath=e.linkpath||null,this.mtime=e.mtime||null,this.path=e.path||null,this.size=e.size||null,this.uid=e.uid||null,this.uname=e.uname||null,this.dev=e.dev||null,this.ino=e.ino||null,this.nlink=e.nlink||null,this.global=r||!1}encode(){let e=this.encodeBody();if(e==="")return null;let r=Buffer.byteLength(e),n=512*Math.ceil(1+r/512),i=Buffer.allocUnsafe(n);for(let o=0;o<512;o++)i[o]=0;new w3({path:("PaxHeader/"+C3.basename(this.path)).slice(0,99),mode:this.mode||420,uid:this.uid||null,gid:this.gid||null,size:r,mtime:this.mtime||null,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime||null,ctime:this.ctime||null}).encode(i),i.write(e,512,r,"utf8");for(let o=r+512;o<i.length;o++)i[o]=0;return i}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(e){if(this[e]===null||this[e]===void 0)return"";let r=this[e]instanceof Date?this[e].getTime()/1e3:this[e],n=" "+(e==="dev"||e==="ino"||e==="nlink"?"SCHILY.":"")+e+"="+r+`
`,i=Buffer.byteLength(n),o=Math.floor(Math.log(i)/Math.log(10))+1;return i+o>=Math.pow(10,o)&&(o+=1),o+i+n}};bd.parse=(t,e,r)=>new bd(b3(E3(t),e),r);var b3=(t,e)=>e?Object.keys(t).reduce((r,n)=>(r[n]=t[n],r),e):t,E3=t=>t.replace(/\n$/,"").split(`
`).reduce(_3,Object.create(null)),_3=(t,e)=>{let r=parseInt(e,10);if(r!==Buffer.byteLength(e)+1)return t;e=e.substr((r+" ").length);let n=e.split("="),i=n.shift().replace(/^SCHILY\.(dev|ino|nlink)/,"$1");if(!i)return t;let o=n.join("=");return t[i]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(i)?new Date(o*1e3):/^[0-9]+$/.test(o)?+o:o,t};rS.exports=bd});var zs=_((Fce,nS)=>{nS.exports=t=>{let e=t.length-1,r=-1;for(;e>-1&&t.charAt(e)==="/";)r=e,e--;return r===-1?t:t.slice(0,r)}});var _d=_((Mce,iS)=>{"use strict";iS.exports=t=>class extends t{warn(e,r,n={}){this.file&&(n.file=this.file),this.cwd&&(n.cwd=this.cwd),n.code=r instanceof Error&&r.code||e,n.tarCode=e,!this.strict&&n.recoverable!==!1?(r instanceof Error&&(n=Object.assign(r,n),r=r.message),this.emit("warn",n.tarCode,r,n)):r instanceof Error?this.emit("error",Object.assign(r,n)):this.emit("error",Object.assign(new Error(`${e}: ${r}`),n))}}});var ev=_((qce,oS)=>{"use strict";var Sd=["|","<",">","?",":"],Zg=Sd.map(t=>String.fromCharCode(61440+t.charCodeAt(0))),S3=new Map(Sd.map((t,e)=>[t,Zg[e]])),x3=new Map(Zg.map((t,e)=>[t,Sd[e]]));oS.exports={encode:t=>Sd.reduce((e,r)=>e.split(r).join(S3.get(r)),t),decode:t=>Zg.reduce((e,r)=>e.split(r).join(x3.get(r)),t)}});var tv=_(($ce,aS)=>{var{isAbsolute:k3,parse:sS}=require("path").win32;aS.exports=t=>{let e="",r=sS(t);for(;k3(t)||r.root;){let n=t.charAt(0)==="/"&&t.slice(0,4)!=="//?/"?"/":r.root;t=t.substr(n.length),e+=n,r=sS(t)}return[e,t]}});var lS=_((jce,cS)=>{"use strict";cS.exports=(t,e,r)=>(t&=4095,r&&(t=(t|384)&~18),e&&(t&256&&(t|=64),t&32&&(t|=8),t&4&&(t|=1)),t)});var uv=_((Hce,SS)=>{"use strict";var uS=Bs(),dS=Ed(),fS=Ws(),In=require("fs"),pS=require("path"),An=Vs(),P3=zs(),hS=(t,e)=>e?(t=An(t).replace(/^\.(\/|$)/,""),P3(e)+"/"+t):An(t),I3=16*1024*1024,mS=Symbol("process"),gS=Symbol("file"),vS=Symbol("directory"),rv=Symbol("symlink"),yS=Symbol("hardlink"),Lc=Symbol("header"),xd=Symbol("read"),nv=Symbol("lstat"),kd=Symbol("onlstat"),iv=Symbol("onread"),ov=Symbol("onreadlink"),sv=Symbol("openfile"),av=Symbol("onopenfile"),Fi=Symbol("close"),Pd=Symbol("mode"),cv=Symbol("awaitDrain"),lv=Symbol("ondrain"),Tn=Symbol("prefix"),wS=Symbol("hadError"),CS=_d(),A3=ev(),bS=tv(),ES=lS(),Id=CS(class extends uS{constructor(e,r){r=r||{};super(r);if(typeof e!="string")throw new TypeError("path is required");this.path=An(e),this.portable=!!r.portable,this.myuid=process.getuid&&process.getuid()||0,this.myuser=process.env.USER||"",this.maxReadSize=r.maxReadSize||I3,this.linkCache=r.linkCache||new Map,this.statCache=r.statCache||new Map,this.preservePaths=!!r.preservePaths,this.cwd=An(r.cwd||process.cwd()),this.strict=!!r.strict,this.noPax=!!r.noPax,this.noMtime=!!r.noMtime,this.mtime=r.mtime||null,this.prefix=r.prefix?An(r.prefix):null,this.fd=null,this.blockLen=null,this.blockRemain=null,this.buf=null,this.offset=null,this.length=null,this.pos=null,this.remain=null,typeof r.onwarn=="function"&&this.on("warn",r.onwarn);let n=!1;if(!this.preservePaths){let[i,o]=bS(this.path);i&&(this.path=o,n=i)}this.win32=!!r.win32||process.platform==="win32",this.win32&&(this.path=A3.decode(this.path.replace(/\\/g,"/")),e=e.replace(/\\/g,"/")),this.absolute=An(r.absolute||pS.resolve(this.cwd,e)),this.path===""&&(this.path="./"),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path}),this.statCache.has(this.absolute)?this[kd](this.statCache.get(this.absolute)):this[nv]()}emit(e,...r){return e==="error"&&(this[wS]=!0),super.emit(e,...r)}[nv](){In.lstat(this.absolute,(e,r)=>{if(e)return this.emit("error",e);this[kd](r)})}[kd](e){this.statCache.set(this.absolute,e),this.stat=e,e.isFile()||(e.size=0),this.type=R3(e),this.emit("stat",e),this[mS]()}[mS](){switch(this.type){case"File":return this[gS]();case"Directory":return this[vS]();case"SymbolicLink":return this[rv]();default:return this.end()}}[Pd](e){return ES(e,this.type==="Directory",this.portable)}[Tn](e){return hS(e,this.prefix)}[Lc](){this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.header=new fS({path:this[Tn](this.path),linkpath:this.type==="Link"?this[Tn](this.linkpath):this.linkpath,mode:this[Pd](this.stat.mode),uid:this.portable?null:this.stat.uid,gid:this.portable?null:this.stat.gid,size:this.stat.size,mtime:this.noMtime?null:this.mtime||this.stat.mtime,type:this.type,uname:this.portable?null:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?null:this.stat.atime,ctime:this.portable?null:this.stat.ctime}),this.header.encode()&&!this.noPax&&super.write(new dS({atime:this.portable?null:this.header.atime,ctime:this.portable?null:this.header.ctime,gid:this.portable?null:this.header.gid,mtime:this.noMtime?null:this.mtime||this.header.mtime,path:this[Tn](this.path),linkpath:this.type==="Link"?this[Tn](this.linkpath):this.linkpath,size:this.header.size,uid:this.portable?null:this.header.uid,uname:this.portable?null:this.header.uname,dev:this.portable?null:this.stat.dev,ino:this.portable?null:this.stat.ino,nlink:this.portable?null:this.stat.nlink}).encode()),super.write(this.header.block)}[vS](){this.path.substr(-1)!=="/"&&(this.path+="/"),this.stat.size=0,this[Lc](),this.end()}[rv](){In.readlink(this.absolute,(e,r)=>{if(e)return this.emit("error",e);this[ov](r)})}[ov](e){this.linkpath=An(e),this[Lc](),this.end()}[yS](e){this.type="Link",this.linkpath=An(pS.relative(this.cwd,e)),this.stat.size=0,this[Lc](),this.end()}[gS](){if(this.stat.nlink>1){let e=this.stat.dev+":"+this.stat.ino;if(this.linkCache.has(e)){let r=this.linkCache.get(e);if(r.indexOf(this.cwd)===0)return this[yS](r)}this.linkCache.set(e,this.absolute)}if(this[Lc](),this.stat.size===0)return this.end();this[sv]()}[sv](){In.open(this.absolute,"r",(e,r)=>{if(e)return this.emit("error",e);this[av](r)})}[av](e){if(this.fd=e,this[wS])return this[Fi]();this.blockLen=512*Math.ceil(this.stat.size/512),this.blockRemain=this.blockLen;let r=Math.min(this.blockLen,this.maxReadSize);this.buf=Buffer.allocUnsafe(r),this.offset=0,this.pos=0,this.remain=this.stat.size,this.length=this.buf.length,this[xd]()}[xd](){let{fd:e,buf:r,offset:n,length:i,pos:o}=this;In.read(e,r,n,i,o,(s,a)=>{if(s)return this[Fi](()=>this.emit("error",s));this[iv](a)})}[Fi](e){In.close(this.fd,e)}[iv](e){if(e<=0&&this.remain>0){let i=new Error("encountered unexpected EOF");return i.path=this.absolute,i.syscall="read",i.code="EOF",this[Fi](()=>this.emit("error",i))}if(e>this.remain){let i=new Error("did not encounter expected EOF");return i.path=this.absolute,i.syscall="read",i.code="EOF",this[Fi](()=>this.emit("error",i))}if(e===this.remain)for(let i=e;i<this.length&&e<this.blockRemain;i++)this.buf[i+this.offset]=0,e++,this.remain++;let r=this.offset===0&&e===this.buf.length?this.buf:this.buf.slice(this.offset,this.offset+e);this.write(r)?this[lv]():this[cv](()=>this[lv]())}[cv](e){this.once("drain",e)}write(e){if(this.blockRemain<e.length){let r=new Error("writing more data than expected");return r.path=this.absolute,this.emit("error",r)}return this.remain-=e.length,this.blockRemain-=e.length,this.pos+=e.length,this.offset+=e.length,super.write(e)}[lv](){if(!this.remain)return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),this[Fi](e=>e?this.emit("error",e):this.end());this.offset>=this.length&&(this.buf=Buffer.allocUnsafe(Math.min(this.blockRemain,this.buf.length)),this.offset=0),this.length=this.buf.length-this.offset,this[xd]()}}),_S=class extends Id{[nv](){this[kd](In.lstatSync(this.absolute))}[rv](){this[ov](In.readlinkSync(this.absolute))}[sv](){this[av](In.openSync(this.absolute,"r"))}[xd](){let e=!0;try{let{fd:r,buf:n,offset:i,length:o,pos:s}=this,a=In.readSync(r,n,i,o,s);this[iv](a),e=!1}finally{if(e)try{this[Fi](()=>{})}catch(r){}}}[cv](e){e()}[Fi](e){In.closeSync(this.fd),e()}},T3=CS(class extends uS{constructor(e,r){r=r||{};super(r);this.preservePaths=!!r.preservePaths,this.portable=!!r.portable,this.strict=!!r.strict,this.noPax=!!r.noPax,this.noMtime=!!r.noMtime,this.readEntry=e,this.type=e.type,this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.prefix=r.prefix||null,this.path=An(e.path),this.mode=this[Pd](e.mode),this.uid=this.portable?null:e.uid,this.gid=this.portable?null:e.gid,this.uname=this.portable?null:e.uname,this.gname=this.portable?null:e.gname,this.size=e.size,this.mtime=this.noMtime?null:r.mtime||e.mtime,this.atime=this.portable?null:e.atime,this.ctime=this.portable?null:e.ctime,this.linkpath=An(e.linkpath),typeof r.onwarn=="function"&&this.on("warn",r.onwarn);let n=!1;if(!this.preservePaths){let[i,o]=bS(this.path);i&&(this.path=o,n=i)}this.remain=e.size,this.blockRemain=e.startBlockSize,this.header=new fS({path:this[Tn](this.path),linkpath:this.type==="Link"?this[Tn](this.linkpath):this.linkpath,mode:this.mode,uid:this.portable?null:this.uid,gid:this.portable?null:this.gid,size:this.size,mtime:this.noMtime?null:this.mtime,type:this.type,uname:this.portable?null:this.uname,atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime}),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path}),this.header.encode()&&!this.noPax&&super.write(new dS({atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime,gid:this.portable?null:this.gid,mtime:this.noMtime?null:this.mtime,path:this[Tn](this.path),linkpath:this.type==="Link"?this[Tn](this.linkpath):this.linkpath,size:this.size,uid:this.portable?null:this.uid,uname:this.portable?null:this.uname,dev:this.portable?null:this.readEntry.dev,ino:this.portable?null:this.readEntry.ino,nlink:this.portable?null:this.readEntry.nlink}).encode()),super.write(this.header.block),e.pipe(this)}[Tn](e){return hS(e,this.prefix)}[Pd](e){return ES(e,this.type==="Directory",this.portable)}write(e){let r=e.length;if(r>this.blockRemain)throw new Error("writing more to entry than is appropriate");return this.blockRemain-=r,super.write(e)}end(){return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),super.end()}});Id.Sync=_S;Id.Tar=T3;var R3=t=>t.isFile()?"File":t.isDirectory()?"Directory":t.isSymbolicLink()?"SymbolicLink":"Unsupported";SS.exports=Id});var Fd=_((Gce,DS)=>{"use strict";var dv=class{constructor(e,r){this.path=e||"./",this.absolute=r,this.entry=null,this.stat=null,this.readdir=null,this.pending=!1,this.ignore=!1,this.piped=!1}},D3=Bs(),O3=Gg(),N3=wd(),fv=uv(),L3=fv.Sync,F3=fv.Tar,M3=Ic(),xS=Buffer.alloc(1024),Ad=Symbol("onStat"),Td=Symbol("ended"),Rn=Symbol("queue"),Ks=Symbol("current"),qo=Symbol("process"),Rd=Symbol("processing"),kS=Symbol("processJob"),Dn=Symbol("jobs"),pv=Symbol("jobDone"),Dd=Symbol("addFSEntry"),PS=Symbol("addTarEntry"),hv=Symbol("stat"),mv=Symbol("readdir"),Od=Symbol("onreaddir"),Nd=Symbol("pipe"),IS=Symbol("entry"),gv=Symbol("entryOpt"),vv=Symbol("writeEntryClass"),AS=Symbol("write"),yv=Symbol("ondrain"),Ld=require("fs"),TS=require("path"),q3=_d(),wv=Vs(),Cv=q3(class extends D3{constructor(e){super(e);e=e||Object.create(null),this.opt=e,this.file=e.file||"",this.cwd=e.cwd||process.cwd(),this.maxReadSize=e.maxReadSize,this.preservePaths=!!e.preservePaths,this.strict=!!e.strict,this.noPax=!!e.noPax,this.prefix=wv(e.prefix||""),this.linkCache=e.linkCache||new Map,this.statCache=e.statCache||new Map,this.readdirCache=e.readdirCache||new Map,this[vv]=fv,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),this.portable=!!e.portable,this.zip=null,e.gzip?(typeof e.gzip!="object"&&(e.gzip={}),this.portable&&(e.gzip.portable=!0),this.zip=new O3.Gzip(e.gzip),this.zip.on("data",r=>super.write(r)),this.zip.on("end",r=>super.end()),this.zip.on("drain",r=>this[yv]()),this.on("resume",r=>this.zip.resume())):this.on("drain",this[yv]),this.noDirRecurse=!!e.noDirRecurse,this.follow=!!e.follow,this.noMtime=!!e.noMtime,this.mtime=e.mtime||null,this.filter=typeof e.filter=="function"?e.filter:r=>!0,this[Rn]=new M3,this[Dn]=0,this.jobs=+e.jobs||4,this[Rd]=!1,this[Td]=!1}[AS](e){return super.write(e)}add(e){return this.write(e),this}end(e){return e&&this.write(e),this[Td]=!0,this[qo](),this}write(e){if(this[Td])throw new Error("write after end");return e instanceof N3?this[PS](e):this[Dd](e),this.flowing}[PS](e){let r=wv(TS.resolve(this.cwd,e.path));if(!this.filter(e.path,e))e.resume();else{let n=new dv(e.path,r,!1);n.entry=new F3(e,this[gv](n)),n.entry.on("end",i=>this[pv](n)),this[Dn]+=1,this[Rn].push(n)}this[qo]()}[Dd](e){let r=wv(TS.resolve(this.cwd,e));this[Rn].push(new dv(e,r)),this[qo]()}[hv](e){e.pending=!0,this[Dn]+=1;let r=this.follow?"stat":"lstat";Ld[r](e.absolute,(n,i)=>{e.pending=!1,this[Dn]-=1,n?this.emit("error",n):this[Ad](e,i)})}[Ad](e,r){this.statCache.set(e.absolute,r),e.stat=r,this.filter(e.path,r)||(e.ignore=!0),this[qo]()}[mv](e){e.pending=!0,this[Dn]+=1,Ld.readdir(e.absolute,(r,n)=>{if(e.pending=!1,this[Dn]-=1,r)return this.emit("error",r);this[Od](e,n)})}[Od](e,r){this.readdirCache.set(e.absolute,r),e.readdir=r,this[qo]()}[qo](){if(!this[Rd]){this[Rd]=!0;for(let e=this[Rn].head;e!==null&&this[Dn]<this.jobs;e=e.next)if(this[kS](e.value),e.value.ignore){let r=e.next;this[Rn].removeNode(e),e.next=r}this[Rd]=!1,this[Td]&&!this[Rn].length&&this[Dn]===0&&(this.zip?this.zip.end(xS):(super.write(xS),super.end()))}}get[Ks](){return this[Rn]&&this[Rn].head&&this[Rn].head.value}[pv](e){this[Rn].shift(),this[Dn]-=1,this[qo]()}[kS](e){if(!e.pending){if(e.entry){e===this[Ks]&&!e.piped&&this[Nd](e);return}if(e.stat||(this.statCache.has(e.absolute)?this[Ad](e,this.statCache.get(e.absolute)):this[hv](e)),!!e.stat&&!e.ignore&&!(!this.noDirRecurse&&e.stat.isDirectory()&&!e.readdir&&(this.readdirCache.has(e.absolute)?this[Od](e,this.readdirCache.get(e.absolute)):this[mv](e),!e.readdir))){if(e.entry=this[IS](e),!e.entry){e.ignore=!0;return}e===this[Ks]&&!e.piped&&this[Nd](e)}}}[gv](e){return{onwarn:(r,n,i)=>this.warn(r,n,i),noPax:this.noPax,cwd:this.cwd,absolute:e.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime,prefix:this.prefix}}[IS](e){this[Dn]+=1;try{return new this[vv](e.path,this[gv](e)).on("end",()=>this[pv](e)).on("error",r=>this.emit("error",r))}catch(r){this.emit("error",r)}}[yv](){this[Ks]&&this[Ks].entry&&this[Ks].entry.resume()}[Nd](e){e.piped=!0,e.readdir&&e.readdir.forEach(i=>{let o=e.path,s=o==="./"?"":o.replace(/\/*$/,"/");this[Dd](s+i)});let r=e.entry,n=this.zip;n?r.on("data",i=>{n.write(i)||r.pause()}):r.on("data",i=>{super.write(i)||r.pause()})}pause(){return this.zip&&this.zip.pause(),super.pause()}}),RS=class extends Cv{constructor(e){super(e);this[vv]=L3}pause(){}resume(){}[hv](e){let r=this.follow?"statSync":"lstatSync";this[Ad](e,Ld[r](e.absolute))}[mv](e,r){this[Od](e,Ld.readdirSync(e.absolute))}[Nd](e){let r=e.entry,n=this.zip;e.readdir&&e.readdir.forEach(i=>{let o=e.path,s=o==="./"?"":o.replace(/\/*$/,"/");this[Dd](s+i)}),n?r.on("data",i=>{n.write(i)}):r.on("data",i=>{super[AS](i)})}};Cv.Sync=RS;DS.exports=Cv});var ra=_(Mc=>{"use strict";var $3=Bs(),j3=require("events").EventEmitter,or=require("fs"),bv=or.writev;if(!bv){let t=process.binding("fs"),e=t.FSReqWrap||t.FSReqCallback;bv=(r,n,i,o)=>{let s=(c,l)=>o(c,l,n),a=new e;a.oncomplete=s,t.writeBuffers(r,n,i,a)}}var Ys=Symbol("_autoClose"),an=Symbol("_close"),Fc=Symbol("_ended"),$e=Symbol("_fd"),OS=Symbol("_finished"),Mi=Symbol("_flags"),Ev=Symbol("_flush"),_v=Symbol("_handleChunk"),Sv=Symbol("_makeBuf"),Md=Symbol("_mode"),qd=Symbol("_needDrain"),Qs=Symbol("_onerror"),Xs=Symbol("_onopen"),xv=Symbol("_onread"),Js=Symbol("_onwrite"),qi=Symbol("_open"),ri=Symbol("_path"),$o=Symbol("_pos"),On=Symbol("_queue"),Zs=Symbol("_read"),NS=Symbol("_readSize"),$i=Symbol("_reading"),$d=Symbol("_remain"),LS=Symbol("_size"),jd=Symbol("_write"),ea=Symbol("_writing"),Ud=Symbol("_defaultFlag"),ta=Symbol("_errored"),kv=class extends $3{constructor(e,r){r=r||{};super(r);if(this.readable=!0,this.writable=!1,typeof e!="string")throw new TypeError("path must be a string");this[ta]=!1,this[$e]=typeof r.fd=="number"?r.fd:null,this[ri]=e,this[NS]=r.readSize||16*1024*1024,this[$i]=!1,this[LS]=typeof r.size=="number"?r.size:1/0,this[$d]=this[LS],this[Ys]=typeof r.autoClose=="boolean"?r.autoClose:!0,typeof this[$e]=="number"?this[Zs]():this[qi]()}get fd(){return this[$e]}get path(){return this[ri]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[qi](){or.open(this[ri],"r",(e,r)=>this[Xs](e,r))}[Xs](e,r){e?this[Qs](e):(this[$e]=r,this.emit("open",r),this[Zs]())}[Sv](){return Buffer.allocUnsafe(Math.min(this[NS],this[$d]))}[Zs](){if(!this[$i]){this[$i]=!0;let e=this[Sv]();if(e.length===0)return process.nextTick(()=>this[xv](null,0,e));or.read(this[$e],e,0,e.length,null,(r,n,i)=>this[xv](r,n,i))}}[xv](e,r,n){this[$i]=!1,e?this[Qs](e):this[_v](r,n)&&this[Zs]()}[an](){if(this[Ys]&&typeof this[$e]=="number"){let e=this[$e];this[$e]=null,or.close(e,r=>r?this.emit("error",r):this.emit("close"))}}[Qs](e){this[$i]=!0,this[an](),this.emit("error",e)}[_v](e,r){let n=!1;return this[$d]-=e,e>0&&(n=super.write(e<r.length?r.slice(0,e):r)),(e===0||this[$d]<=0)&&(n=!1,this[an](),super.end()),n}emit(e,r){switch(e){case"prefinish":case"finish":break;case"drain":typeof this[$e]=="number"&&this[Zs]();break;case"error":return this[ta]?void 0:(this[ta]=!0,super.emit(e,r));default:return super.emit(e,r)}}},FS=class extends kv{[qi](){let e=!0;try{this[Xs](null,or.openSync(this[ri],"r")),e=!1}finally{e&&this[an]()}}[Zs](){let e=!0;try{if(!this[$i]){this[$i]=!0;do{let r=this[Sv](),n=r.length===0?0:or.readSync(this[$e],r,0,r.length,null);if(!this[_v](n,r))break}while(!0);this[$i]=!1}e=!1}finally{e&&this[an]()}}[an](){if(this[Ys]&&typeof this[$e]=="number"){let e=this[$e];this[$e]=null,or.closeSync(e),this.emit("close")}}},Pv=class extends j3{constructor(e,r){r=r||{};super(r);this.readable=!1,this.writable=!0,this[ta]=!1,this[ea]=!1,this[Fc]=!1,this[qd]=!1,this[On]=[],this[ri]=e,this[$e]=typeof r.fd=="number"?r.fd:null,this[Md]=r.mode===void 0?438:r.mode,this[$o]=typeof r.start=="number"?r.start:null,this[Ys]=typeof r.autoClose=="boolean"?r.autoClose:!0;let n=this[$o]!==null?"r+":"w";this[Ud]=r.flags===void 0,this[Mi]=this[Ud]?n:r.flags,this[$e]===null&&this[qi]()}emit(e,r){if(e==="error"){if(this[ta])return;this[ta]=!0}return super.emit(e,r)}get fd(){return this[$e]}get path(){return this[ri]}[Qs](e){this[an](),this[ea]=!0,this.emit("error",e)}[qi](){or.open(this[ri],this[Mi],this[Md],(e,r)=>this[Xs](e,r))}[Xs](e,r){this[Ud]&&this[Mi]==="r+"&&e&&e.code==="ENOENT"?(this[Mi]="w",this[qi]()):e?this[Qs](e):(this[$e]=r,this.emit("open",r),this[Ev]())}end(e,r){return e&&this.write(e,r),this[Fc]=!0,!this[ea]&&!this[On].length&&typeof this[$e]=="number"&&this[Js](null,0),this}write(e,r){return typeof e=="string"&&(e=Buffer.from(e,r)),this[Fc]?(this.emit("error",new Error("write() after end()")),!1):this[$e]===null||this[ea]||this[On].length?(this[On].push(e),this[qd]=!0,!1):(this[ea]=!0,this[jd](e),!0)}[jd](e){or.write(this[$e],e,0,e.length,this[$o],(r,n)=>this[Js](r,n))}[Js](e,r){e?this[Qs](e):(this[$o]!==null&&(this[$o]+=r),this[On].length?this[Ev]():(this[ea]=!1,this[Fc]&&!this[OS]?(this[OS]=!0,this[an](),this.emit("finish")):this[qd]&&(this[qd]=!1,this.emit("drain"))))}[Ev](){if(this[On].length===0)this[Fc]&&this[Js](null,0);else if(this[On].length===1)this[jd](this[On].pop());else{let e=this[On];this[On]=[],bv(this[$e],e,this[$o],(r,n)=>this[Js](r,n))}}[an](){if(this[Ys]&&typeof this[$e]=="number"){let e=this[$e];this[$e]=null,or.close(e,r=>r?this.emit("error",r):this.emit("close"))}}},MS=class extends Pv{[qi](){let e;if(this[Ud]&&this[Mi]==="r+")try{e=or.openSync(this[ri],this[Mi],this[Md])}catch(r){if(r.code==="ENOENT")return this[Mi]="w",this[qi]();throw r}else e=or.openSync(this[ri],this[Mi],this[Md]);this[Xs](null,e)}[an](){if(this[Ys]&&typeof this[$e]=="number"){let e=this[$e];this[$e]=null,or.closeSync(e),this.emit("close")}}[jd](e){let r=!0;try{this[Js](null,or.writeSync(this[$e],e,0,e.length,this[$o])),r=!1}finally{if(r)try{this[an]()}catch(n){}}}};Mc.ReadStream=kv;Mc.ReadStreamSync=FS;Mc.WriteStream=Pv;Mc.WriteStreamSync=MS});var Kd=_((Kce,VS)=>{"use strict";var U3=_d(),B3=Ws(),H3=require("events"),V3=Ic(),G3=1024*1024,W3=wd(),qS=Ed(),z3=Gg(),Iv=Buffer.from([31,139]),Or=Symbol("state"),jo=Symbol("writeEntry"),ni=Symbol("readEntry"),Av=Symbol("nextEntry"),$S=Symbol("processEntry"),Nr=Symbol("extendedHeader"),qc=Symbol("globalExtendedHeader"),ji=Symbol("meta"),jS=Symbol("emitMeta"),Qe=Symbol("buffer"),ii=Symbol("queue"),Uo=Symbol("ended"),US=Symbol("emittedEnd"),Bo=Symbol("emit"),sr=Symbol("unzip"),Bd=Symbol("consumeChunk"),Hd=Symbol("consumeChunkSub"),Tv=Symbol("consumeBody"),BS=Symbol("consumeMeta"),HS=Symbol("consumeHeader"),Vd=Symbol("consuming"),Rv=Symbol("bufferConcat"),Dv=Symbol("maybeEnd"),$c=Symbol("writing"),Ui=Symbol("aborted"),Gd=Symbol("onDone"),Ho=Symbol("sawValidEntry"),Wd=Symbol("sawNullBlock"),zd=Symbol("sawEOF"),K3=t=>!0;VS.exports=U3(class extends H3{constructor(e){e=e||{};super(e);this.file=e.file||"",this[Ho]=null,this.on(Gd,r=>{(this[Or]==="begin"||this[Ho]===!1)&&this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")}),e.ondone?this.on(Gd,e.ondone):this.on(Gd,r=>{this.emit("prefinish"),this.emit("finish"),this.emit("end"),this.emit("close")}),this.strict=!!e.strict,this.maxMetaEntrySize=e.maxMetaEntrySize||G3,this.filter=typeof e.filter=="function"?e.filter:K3,this.writable=!0,this.readable=!1,this[ii]=new V3,this[Qe]=null,this[ni]=null,this[jo]=null,this[Or]="begin",this[ji]="",this[Nr]=null,this[qc]=null,this[Uo]=!1,this[sr]=null,this[Ui]=!1,this[Wd]=!1,this[zd]=!1,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),typeof e.onentry=="function"&&this.on("entry",e.onentry)}[HS](e,r){this[Ho]===null&&(this[Ho]=!1);let n;try{n=new B3(e,r,this[Nr],this[qc])}catch(i){return this.warn("TAR_ENTRY_INVALID",i)}if(n.nullBlock)this[Wd]?(this[zd]=!0,this[Or]==="begin"&&(this[Or]="header"),this[Bo]("eof")):(this[Wd]=!0,this[Bo]("nullBlock"));else if(this[Wd]=!1,!n.cksumValid)this.warn("TAR_ENTRY_INVALID","checksum failure",{header:n});else if(!n.path)this.warn("TAR_ENTRY_INVALID","path is required",{header:n});else{let i=n.type;if(/^(Symbolic)?Link$/.test(i)&&!n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:n});else if(!/^(Symbolic)?Link$/.test(i)&&n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:n});else{let o=this[jo]=new W3(n,this[Nr],this[qc]);if(!this[Ho])if(o.remain){let s=()=>{o.invalid||(this[Ho]=!0)};o.on("end",s)}else this[Ho]=!0;o.meta?o.size>this.maxMetaEntrySize?(o.ignore=!0,this[Bo]("ignoredEntry",o),this[Or]="ignore",o.resume()):o.size>0&&(this[ji]="",o.on("data",s=>this[ji]+=s),this[Or]="meta"):(this[Nr]=null,o.ignore=o.ignore||!this.filter(o.path,o),o.ignore?(this[Bo]("ignoredEntry",o),this[Or]=o.remain?"ignore":"header",o.resume()):(o.remain?this[Or]="body":(this[Or]="header",o.end()),this[ni]?this[ii].push(o):(this[ii].push(o),this[Av]())))}}}[$S](e){let r=!0;return e?Array.isArray(e)?this.emit.apply(this,e):(this[ni]=e,this.emit("entry",e),e.emittedEnd||(e.on("end",n=>this[Av]()),r=!1)):(this[ni]=null,r=!1),r}[Av](){do;while(this[$S](this[ii].shift()));if(!this[ii].length){let e=this[ni];!e||e.flowing||e.size===e.remain?this[$c]||this.emit("drain"):e.once("drain",n=>this.emit("drain"))}}[Tv](e,r){let n=this[jo],i=n.blockRemain,o=i>=e.length&&r===0?e:e.slice(r,r+i);return n.write(o),n.blockRemain||(this[Or]="header",this[jo]=null,n.end()),o.length}[BS](e,r){let n=this[jo],i=this[Tv](e,r);return this[jo]||this[jS](n),i}[Bo](e,r,n){!this[ii].length&&!this[ni]?this.emit(e,r,n):this[ii].push([e,r,n])}[jS](e){switch(this[Bo]("meta",this[ji]),e.type){case"ExtendedHeader":case"OldExtendedHeader":this[Nr]=qS.parse(this[ji],this[Nr],!1);break;case"GlobalExtendedHeader":this[qc]=qS.parse(this[ji],this[qc],!0);break;case"NextFileHasLongPath":case"OldGnuLongPath":this[Nr]=this[Nr]||Object.create(null),this[Nr].path=this[ji].replace(/\0.*/,"");break;case"NextFileHasLongLinkpath":this[Nr]=this[Nr]||Object.create(null),this[Nr].linkpath=this[ji].replace(/\0.*/,"");break;default:throw new Error("unknown meta: "+e.type)}}abort(e){this[Ui]=!0,this.emit("abort",e),this.warn("TAR_ABORT",e,{recoverable:!1})}write(e){if(this[Ui])return;if(this[sr]===null&&e){if(this[Qe]&&(e=Buffer.concat([this[Qe],e]),this[Qe]=null),e.length<Iv.length)return this[Qe]=e,!0;for(let n=0;this[sr]===null&&n<Iv.length;n++)e[n]!==Iv[n]&&(this[sr]=!1);if(this[sr]===null){let n=this[Uo];this[Uo]=!1,this[sr]=new z3.Unzip,this[sr].on("data",o=>this[Bd](o)),this[sr].on("error",o=>this.abort(o)),this[sr].on("end",o=>{this[Uo]=!0,this[Bd]()}),this[$c]=!0;let i=this[sr][n?"end":"write"](e);return this[$c]=!1,i}}this[$c]=!0,this[sr]?this[sr].write(e):this[Bd](e),this[$c]=!1;let r=this[ii].length?!1:this[ni]?this[ni].flowing:!0;return!r&&!this[ii].length&&this[ni].once("drain",n=>this.emit("drain")),r}[Rv](e){e&&!this[Ui]&&(this[Qe]=this[Qe]?Buffer.concat([this[Qe],e]):e)}[Dv](){if(this[Uo]&&!this[US]&&!this[Ui]&&!this[Vd]){this[US]=!0;let e=this[jo];if(e&&e.blockRemain){let r=this[Qe]?this[Qe].length:0;this.warn("TAR_BAD_ARCHIVE",`Truncated input (needed ${e.blockRemain} more bytes, only ${r} available)`,{entry:e}),this[Qe]&&e.write(this[Qe]),e.end()}this[Bo](Gd)}}[Bd](e){if(this[Vd])this[Rv](e);else if(!e&&!this[Qe])this[Dv]();else{if(this[Vd]=!0,this[Qe]){this[Rv](e);let r=this[Qe];this[Qe]=null,this[Hd](r)}else this[Hd](e);for(;this[Qe]&&this[Qe].length>=512&&!this[Ui]&&!this[zd];){let r=this[Qe];this[Qe]=null,this[Hd](r)}this[Vd]=!1}(!this[Qe]||this[Uo])&&this[Dv]()}[Hd](e){let r=0,n=e.length;for(;r+512<=n&&!this[Ui]&&!this[zd];)switch(this[Or]){case"begin":case"header":this[HS](e,r),r+=512;break;case"ignore":case"body":r+=this[Tv](e,r);break;case"meta":r+=this[BS](e,r);break;default:throw new Error("invalid state: "+this[Or])}r<n&&(this[Qe]?this[Qe]=Buffer.concat([e.slice(r),this[Qe]]):this[Qe]=e.slice(r))}end(e){this[Ui]||(this[sr]?this[sr].end(e):(this[Uo]=!0,this.write(e)))}})});var Yd=_((Yce,KS)=>{"use strict";var Y3=Us(),GS=Kd(),na=require("fs"),Q3=ra(),WS=require("path"),Ov=zs();KS.exports=(t,e,r)=>{typeof t=="function"?(r=t,e=null,t={}):Array.isArray(t)&&(e=t,t={}),typeof e=="function"&&(r=e,e=null),e?e=Array.from(e):e=[];let n=Y3(t);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return e.length&&J3(n,e),n.noResume||X3(n),n.file&&n.sync?Z3(n):n.file?eG(n,r):zS(n)};var X3=t=>{let e=t.onentry;t.onentry=e?r=>{e(r),r.resume()}:r=>r.resume()},J3=(t,e)=>{let r=new Map(e.map(o=>[Ov(o),!0])),n=t.filter,i=(o,s)=>{let a=s||WS.parse(o).root||".",c=o===a?!1:r.has(o)?r.get(o):i(WS.dirname(o),a);return r.set(o,c),c};t.filter=n?(o,s)=>n(o,s)&&i(Ov(o)):o=>i(Ov(o))},Z3=t=>{let e=zS(t),r=t.file,n=!0,i;try{let o=na.statSync(r),s=t.maxReadSize||16*1024*1024;if(o.size<s)e.end(na.readFileSync(r));else{let a=0,c=Buffer.allocUnsafe(s);for(i=na.openSync(r,"r");a<o.size;){let l=na.readSync(i,c,0,s,a);a+=l,e.write(c.slice(0,l))}e.end()}n=!1}finally{if(n&&i)try{na.closeSync(i)}catch(o){}}},eG=(t,e)=>{let r=new GS(t),n=t.maxReadSize||16*1024*1024,i=t.file,o=new Promise((s,a)=>{r.on("error",a),r.on("end",s),na.stat(i,(c,l)=>{if(c)a(c);else{let u=new Q3.ReadStream(i,{readSize:n,size:l.size});u.on("error",a),u.pipe(r)}})});return e?o.then(e,e):o},zS=t=>new GS(t)});var ex=_((Qce,ZS)=>{"use strict";var tG=Us(),Qd=Fd(),YS=ra(),QS=Yd(),XS=require("path");ZS.exports=(t,e,r)=>{if(typeof e=="function"&&(r=e),Array.isArray(t)&&(e=t,t={}),!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");e=Array.from(e);let n=tG(t);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return n.file&&n.sync?rG(n,e):n.file?nG(n,e,r):n.sync?iG(n,e):oG(n,e)};var rG=(t,e)=>{let r=new Qd.Sync(t),n=new YS.WriteStreamSync(t.file,{mode:t.mode||438});r.pipe(n),JS(r,e)},nG=(t,e,r)=>{let n=new Qd(t),i=new YS.WriteStream(t.file,{mode:t.mode||438});n.pipe(i);let o=new Promise((s,a)=>{i.on("error",a),i.on("close",s),n.on("error",a)});return Nv(n,e),r?o.then(r,r):o},JS=(t,e)=>{e.forEach(r=>{r.charAt(0)==="@"?QS({file:XS.resolve(t.cwd,r.substr(1)),sync:!0,noResume:!0,onentry:n=>t.add(n)}):t.add(r)}),t.end()},Nv=(t,e)=>{for(;e.length;){let r=e.shift();if(r.charAt(0)==="@")return QS({file:XS.resolve(t.cwd,r.substr(1)),noResume:!0,onentry:n=>t.add(n)}).then(n=>Nv(t,e));t.add(r)}t.end()},iG=(t,e)=>{let r=new Qd.Sync(t);return JS(r,e),r},oG=(t,e)=>{let r=new Qd(t);return Nv(r,e),r}});var Lv=_((Xce,ax)=>{"use strict";var sG=Us(),tx=Fd(),_r=require("fs"),rx=ra(),nx=Yd(),ix=require("path"),ox=Ws();ax.exports=(t,e,r)=>{let n=sG(t);if(!n.file)throw new TypeError("file is required");if(n.gzip)throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),n.sync?aG(n,e):lG(n,e,r)};var aG=(t,e)=>{let r=new tx.Sync(t),n=!0,i,o;try{try{i=_r.openSync(t.file,"r+")}catch(c){if(c.code==="ENOENT")i=_r.openSync(t.file,"w+");else throw c}let s=_r.fstatSync(i),a=Buffer.alloc(512);e:for(o=0;o<s.size;o+=512){for(let u=0,d=0;u<512;u+=d){if(d=_r.readSync(i,a,u,a.length-u,o+u),o===0&&a[0]===31&&a[1]===139)throw new Error("cannot append to compressed archives");if(!d)break e}let c=new ox(a);if(!c.cksumValid)break;let l=512*Math.ceil(c.size/512);if(o+l+512>s.size)break;o+=l,t.mtimeCache&&t.mtimeCache.set(c.path,c.mtime)}n=!1,cG(t,r,o,i,e)}finally{if(n)try{_r.closeSync(i)}catch(s){}}},cG=(t,e,r,n,i)=>{let o=new rx.WriteStreamSync(t.file,{fd:n,start:r});e.pipe(o),uG(e,i)},lG=(t,e,r)=>{e=Array.from(e);let n=new tx(t),i=(s,a,c)=>{let l=(h,m)=>{h?_r.close(s,g=>c(h)):c(null,m)},u=0;if(a===0)return l(null,0);let d=0,f=Buffer.alloc(512),p=(h,m)=>{if(h)return l(h);if(d+=m,d<512&&m)return _r.read(s,f,d,f.length-d,u+d,p);if(u===0&&f[0]===31&&f[1]===139)return l(new Error("cannot append to compressed archives"));if(d<512)return l(null,u);let g=new ox(f);if(!g.cksumValid)return l(null,u);let v=512*Math.ceil(g.size/512);if(u+v+512>a||(u+=v+512,u>=a))return l(null,u);t.mtimeCache&&t.mtimeCache.set(g.path,g.mtime),d=0,_r.read(s,f,0,512,u,p)};_r.read(s,f,0,512,u,p)},o=new Promise((s,a)=>{n.on("error",a);let c="r+",l=(u,d)=>{if(u&&u.code==="ENOENT"&&c==="r+")return c="w+",_r.open(t.file,c,l);if(u)return a(u);_r.fstat(d,(f,p)=>{if(f)return _r.close(d,()=>a(f));i(d,p.size,(h,m)=>{if(h)return a(h);let g=new rx.WriteStream(t.file,{fd:d,start:m});n.pipe(g),g.on("error",a),g.on("close",s),sx(n,e)})})};_r.open(t.file,c,l)});return r?o.then(r,r):o},uG=(t,e)=>{e.forEach(r=>{r.charAt(0)==="@"?nx({file:ix.resolve(t.cwd,r.substr(1)),sync:!0,noResume:!0,onentry:n=>t.add(n)}):t.add(r)}),t.end()},sx=(t,e)=>{for(;e.length;){let r=e.shift();if(r.charAt(0)==="@")return nx({file:ix.resolve(t.cwd,r.substr(1)),noResume:!0,onentry:n=>t.add(n)}).then(n=>sx(t,e));t.add(r)}t.end()}});var lx=_((Jce,cx)=>{"use strict";var dG=Us(),fG=Lv();cx.exports=(t,e,r)=>{let n=dG(t);if(!n.file)throw new TypeError("file is required");if(n.gzip)throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),pG(n),fG(n,e,r)};var pG=t=>{let e=t.filter;t.mtimeCache||(t.mtimeCache=new Map),t.filter=e?(r,n)=>e(r,n)&&!(t.mtimeCache.get(r)>n.mtime):(r,n)=>!(t.mtimeCache.get(r)>n.mtime)}});var fx=_((Zce,dx)=>{var{promisify:ux}=require("util"),Bi=require("fs"),hG=t=>{if(!t)t={mode:511,fs:Bi};else if(typeof t=="object")t=U({mode:511,fs:Bi},t);else if(typeof t=="number")t={mode:t,fs:Bi};else if(typeof t=="string")t={mode:parseInt(t,8),fs:Bi};else throw new TypeError("invalid options argument");return t.mkdir=t.mkdir||t.fs.mkdir||Bi.mkdir,t.mkdirAsync=ux(t.mkdir),t.stat=t.stat||t.fs.stat||Bi.stat,t.statAsync=ux(t.stat),t.statSync=t.statSync||t.fs.statSync||Bi.statSync,t.mkdirSync=t.mkdirSync||t.fs.mkdirSync||Bi.mkdirSync,t};dx.exports=hG});var hx=_((ele,px)=>{var mG=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:gG,parse:vG}=require("path"),yG=t=>{if(/\0/.test(t))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:t,code:"ERR_INVALID_ARG_VALUE"});if(t=gG(t),mG==="win32"){let e=/[*|"<>?:]/,{root:r}=vG(t);if(e.test(t.substr(r.length)))throw Object.assign(new Error("Illegal characters in path."),{path:t,code:"EINVAL"})}return t};px.exports=yG});var wx=_((tle,yx)=>{var{dirname:mx}=require("path"),gx=(t,e,r=void 0)=>r===e?Promise.resolve():t.statAsync(e).then(n=>n.isDirectory()?r:void 0,n=>n.code==="ENOENT"?gx(t,mx(e),e):void 0),vx=(t,e,r=void 0)=>{if(r!==e)try{return t.statSync(e).isDirectory()?r:void 0}catch(n){return n.code==="ENOENT"?vx(t,mx(e),e):void 0}};yx.exports={findMade:gx,findMadeSync:vx}});var qv=_((rle,bx)=>{var{dirname:Cx}=require("path"),Fv=(t,e,r)=>{e.recursive=!1;let n=Cx(t);return n===t?e.mkdirAsync(t,e).catch(i=>{if(i.code!=="EISDIR")throw i}):e.mkdirAsync(t,e).then(()=>r||t,i=>{if(i.code==="ENOENT")return Fv(n,e).then(o=>Fv(t,e,o));if(i.code!=="EEXIST"&&i.code!=="EROFS")throw i;return e.statAsync(t).then(o=>{if(o.isDirectory())return r;throw i},()=>{throw i})})},Mv=(t,e,r)=>{let n=Cx(t);if(e.recursive=!1,n===t)try{return e.mkdirSync(t,e)}catch(i){if(i.code!=="EISDIR")throw i;return}try{return e.mkdirSync(t,e),r||t}catch(i){if(i.code==="ENOENT")return Mv(t,e,Mv(n,e,r));if(i.code!=="EEXIST"&&i.code!=="EROFS")throw i;try{if(!e.statSync(t).isDirectory())throw i}catch(o){throw i}}};bx.exports={mkdirpManual:Fv,mkdirpManualSync:Mv}});var Sx=_((nle,_x)=>{var{dirname:Ex}=require("path"),{findMade:wG,findMadeSync:CG}=wx(),{mkdirpManual:bG,mkdirpManualSync:EG}=qv(),_G=(t,e)=>(e.recursive=!0,Ex(t)===t?e.mkdirAsync(t,e):wG(e,t).then(n=>e.mkdirAsync(t,e).then(()=>n).catch(i=>{if(i.code==="ENOENT")return bG(t,e);throw i}))),SG=(t,e)=>{if(e.recursive=!0,Ex(t)===t)return e.mkdirSync(t,e);let n=CG(e,t);try{return e.mkdirSync(t,e),n}catch(i){if(i.code==="ENOENT")return EG(t,e);throw i}};_x.exports={mkdirpNative:_G,mkdirpNativeSync:SG}});var Ix=_((ile,Px)=>{var xx=require("fs"),xG=process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version,$v=xG.replace(/^v/,"").split("."),kx=+$v[0]>10||+$v[0]==10&&+$v[1]>=12,kG=kx?t=>t.mkdir===xx.mkdir:()=>!1,PG=kx?t=>t.mkdirSync===xx.mkdirSync:()=>!1;Px.exports={useNative:kG,useNativeSync:PG}});var Nx=_((ole,Ox)=>{var ia=fx(),oa=hx(),{mkdirpNative:Ax,mkdirpNativeSync:Tx}=Sx(),{mkdirpManual:Rx,mkdirpManualSync:Dx}=qv(),{useNative:IG,useNativeSync:AG}=Ix(),sa=(t,e)=>(t=oa(t),e=ia(e),IG(e)?Ax(t,e):Rx(t,e)),TG=(t,e)=>(t=oa(t),e=ia(e),AG(e)?Tx(t,e):Dx(t,e));sa.sync=TG;sa.native=(t,e)=>Ax(oa(t),ia(e));sa.manual=(t,e)=>Rx(oa(t),ia(e));sa.nativeSync=(t,e)=>Tx(oa(t),ia(e));sa.manualSync=(t,e)=>Dx(oa(t),ia(e));Ox.exports=sa});var Ux=_((sle,jx)=>{"use strict";var Lr=require("fs"),Vo=require("path"),RG=Lr.lchown?"lchown":"chown",DG=Lr.lchownSync?"lchownSync":"chownSync",Lx=Lr.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/),Fx=(t,e,r)=>{try{return Lr[DG](t,e,r)}catch(n){if(n.code!=="ENOENT")throw n}},OG=(t,e,r)=>{try{return Lr.chownSync(t,e,r)}catch(n){if(n.code!=="ENOENT")throw n}},NG=Lx?(t,e,r,n)=>i=>{!i||i.code!=="EISDIR"?n(i):Lr.chown(t,e,r,n)}:(t,e,r,n)=>n,jv=Lx?(t,e,r)=>{try{return Fx(t,e,r)}catch(n){if(n.code!=="EISDIR")throw n;OG(t,e,r)}}:(t,e,r)=>Fx(t,e,r),LG=process.version,Mx=(t,e,r)=>Lr.readdir(t,e,r),FG=(t,e)=>Lr.readdirSync(t,e);/^v4\./.test(LG)&&(Mx=(t,e,r)=>Lr.readdir(t,r));var Xd=(t,e,r,n)=>{Lr[RG](t,e,r,NG(t,e,r,i=>{n(i&&i.code!=="ENOENT"?i:null)}))},qx=(t,e,r,n,i)=>{if(typeof e=="string")return Lr.lstat(Vo.resolve(t,e),(o,s)=>{if(o)return i(o.code!=="ENOENT"?o:null);s.name=e,qx(t,s,r,n,i)});if(e.isDirectory())Uv(Vo.resolve(t,e.name),r,n,o=>{if(o)return i(o);let s=Vo.resolve(t,e.name);Xd(s,r,n,i)});else{let o=Vo.resolve(t,e.name);Xd(o,r,n,i)}},Uv=(t,e,r,n)=>{Mx(t,{withFileTypes:!0},(i,o)=>{if(i){if(i.code==="ENOENT")return n();if(i.code!=="ENOTDIR"&&i.code!=="ENOTSUP")return n(i)}if(i||!o.length)return Xd(t,e,r,n);let s=o.length,a=null,c=l=>{if(!a){if(l)return n(a=l);if(--s==0)return Xd(t,e,r,n)}};o.forEach(l=>qx(t,l,e,r,c))})},MG=(t,e,r,n)=>{if(typeof e=="string")try{let i=Lr.lstatSync(Vo.resolve(t,e));i.name=e,e=i}catch(i){if(i.code==="ENOENT")return;throw i}e.isDirectory()&&$x(Vo.resolve(t,e.name),r,n),jv(Vo.resolve(t,e.name),r,n)},$x=(t,e,r)=>{let n;try{n=FG(t,{withFileTypes:!0})}catch(i){if(i.code==="ENOENT")return;if(i.code==="ENOTDIR"||i.code==="ENOTSUP")return jv(t,e,r);throw i}return n&&n.length&&n.forEach(i=>MG(t,i,e,r)),jv(t,e,r)};jx.exports=Uv;Uv.sync=$x});var Gx=_((ale,Vv)=>{"use strict";var Bx=Nx(),Fr=require("fs"),Jd=require("path"),Hx=Ux(),cn=Vs(),Bv=class extends Error{constructor(e,r){super("Cannot extract through symbolic link");this.path=r,this.symlink=e}get name(){return"SylinkError"}},Hv=class extends Error{constructor(e,r){super(r+": Cannot cd into '"+e+"'");this.path=e,this.code=r}get name(){return"CwdError"}},Zd=(t,e)=>t.get(cn(e)),jc=(t,e,r)=>t.set(cn(e),r),qG=(t,e)=>{Fr.stat(t,(r,n)=>{(r||!n.isDirectory())&&(r=new Hv(t,r&&r.code||"ENOTDIR")),e(r)})};Vv.exports=(t,e,r)=>{t=cn(t);let n=e.umask,i=e.mode|448,o=(i&n)!=0,s=e.uid,a=e.gid,c=typeof s=="number"&&typeof a=="number"&&(s!==e.processUid||a!==e.processGid),l=e.preserve,u=e.unlink,d=e.cache,f=cn(e.cwd),p=(g,v)=>{g?r(g):(jc(d,t,!0),v&&c?Hx(v,s,a,y=>p(y)):o?Fr.chmod(t,i,r):r())};if(d&&Zd(d,t)===!0)return p();if(t===f)return qG(t,p);if(l)return Bx(t,{mode:i}).then(g=>p(null,g),p);let m=cn(Jd.relative(f,t)).split("/");ef(f,m,i,d,u,f,null,p)};var ef=(t,e,r,n,i,o,s,a)=>{if(!e.length)return a(null,s);let c=e.shift(),l=cn(Jd.resolve(t+"/"+c));if(Zd(n,l))return ef(l,e,r,n,i,o,s,a);Fr.mkdir(l,r,Vx(l,e,r,n,i,o,s,a))},Vx=(t,e,r,n,i,o,s,a)=>c=>{c?Fr.lstat(t,(l,u)=>{if(l)l.path=l.path&&cn(l.path),a(l);else if(u.isDirectory())ef(t,e,r,n,i,o,s,a);else if(i)Fr.unlink(t,d=>{if(d)return a(d);Fr.mkdir(t,r,Vx(t,e,r,n,i,o,s,a))});else{if(u.isSymbolicLink())return a(new Bv(t,t+"/"+e.join("/")));a(c)}}):(s=s||t,ef(t,e,r,n,i,o,s,a))},$G=t=>{let e=!1,r="ENOTDIR";try{e=Fr.statSync(t).isDirectory()}catch(n){r=n.code}finally{if(!e)throw new Hv(t,r)}};Vv.exports.sync=(t,e)=>{t=cn(t);let r=e.umask,n=e.mode|448,i=(n&r)!=0,o=e.uid,s=e.gid,a=typeof o=="number"&&typeof s=="number"&&(o!==e.processUid||s!==e.processGid),c=e.preserve,l=e.unlink,u=e.cache,d=cn(e.cwd),f=g=>{jc(u,t,!0),g&&a&&Hx.sync(g,o,s),i&&Fr.chmodSync(t,n)};if(u&&Zd(u,t)===!0)return f();if(t===d)return $G(d),f();if(c)return f(Bx.sync(t,n));let h=cn(Jd.relative(d,t)).split("/"),m=null;for(let g=h.shift(),v=d;g&&(v+="/"+g);g=h.shift())if(v=cn(Jd.resolve(v)),!Zd(u,v))try{Fr.mkdirSync(v,n),m=m||v,jc(u,v,!0)}catch(y){let C=Fr.lstatSync(v);if(C.isDirectory()){jc(u,v,!0);continue}else if(l){Fr.unlinkSync(v),Fr.mkdirSync(v,n),m=m||v,jc(u,v,!0);continue}else if(C.isSymbolicLink())return new Bv(v,v+"/"+h.join("/"))}return f(m)}});var Wv=_((cle,Wx)=>{var Gv=Object.create(null),{hasOwnProperty:jG}=Object.prototype;Wx.exports=t=>(jG.call(Gv,t)||(Gv[t]=t.normalize("NFKD")),Gv[t])});var Qx=_((lle,Yx)=>{var zx=require("assert"),UG=Wv(),BG=zs(),{join:Kx}=require("path"),HG=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,VG=HG==="win32";Yx.exports=()=>{let t=new Map,e=new Map,r=l=>l.split("/").slice(0,-1).reduce((d,f)=>(d.length&&(f=Kx(d[d.length-1],f)),d.push(f||"/"),d),[]),n=new Set,i=l=>{let u=e.get(l);if(!u)throw new Error("function does not have any path reservations");return{paths:u.paths.map(d=>t.get(d)),dirs:[...u.dirs].map(d=>t.get(d))}},o=l=>{let{paths:u,dirs:d}=i(l);return u.every(f=>f[0]===l)&&d.every(f=>f[0]instanceof Set&&f[0].has(l))},s=l=>n.has(l)||!o(l)?!1:(n.add(l),l(()=>a(l)),!0),a=l=>{if(!n.has(l))return!1;let{paths:u,dirs:d}=e.get(l),f=new Set;return u.forEach(p=>{let h=t.get(p);zx.equal(h[0],l),h.length===1?t.delete(p):(h.shift(),typeof h[0]=="function"?f.add(h[0]):h[0].forEach(m=>f.add(m)))}),d.forEach(p=>{let h=t.get(p);zx(h[0]instanceof Set),h[0].size===1&&h.length===1?t.delete(p):h[0].size===1?(h.shift(),f.add(h[0])):h[0].delete(l)}),n.delete(l),f.forEach(p=>s(p)),!0};return{check:o,reserve:(l,u)=>{l=VG?["win32 parallelization disabled"]:l.map(f=>UG(BG(Kx(f))).toLowerCase());let d=new Set(l.map(f=>r(f)).reduce((f,p)=>f.concat(p)));return e.set(u,{dirs:d,paths:l}),l.forEach(f=>{let p=t.get(f);p?p.push(u):t.set(f,[u])}),d.forEach(f=>{let p=t.get(f);p?p[p.length-1]instanceof Set?p[p.length-1].add(u):p.push(new Set([u])):t.set(f,[new Set([u])])}),s(u)}}}});var Zx=_((ule,Jx)=>{var GG=process.env.__FAKE_PLATFORM__||process.platform,WG=GG==="win32",zG=global.__FAKE_TESTING_FS__||require("fs"),{O_CREAT:KG,O_TRUNC:YG,O_WRONLY:QG,UV_FS_O_FILEMAP:Xx=0}=zG.constants,XG=WG&&!!Xx,JG=512*1024,ZG=Xx|YG|KG|QG;Jx.exports=XG?t=>t<JG?ZG:"w":()=>"w"});var ey=_((dle,hk)=>{"use strict";var eW=require("assert"),tW=Kd(),Re=require("fs"),rW=ra(),oi=require("path"),ek=Gx(),tk=ev(),nW=Qx(),iW=tv(),Sr=Vs(),oW=zs(),sW=Wv(),rk=Symbol("onEntry"),zv=Symbol("checkFs"),nk=Symbol("checkFs2"),tf=Symbol("pruneCache"),Kv=Symbol("isReusable"),Mr=Symbol("makeFs"),Yv=Symbol("file"),Qv=Symbol("directory"),rf=Symbol("link"),ik=Symbol("symlink"),ok=Symbol("hardlink"),sk=Symbol("unsupported"),ak=Symbol("checkPath"),Hi=Symbol("mkdir"),qt=Symbol("onError"),nf=Symbol("pending"),ck=Symbol("pend"),aa=Symbol("unpend"),Xv=Symbol("ended"),Jv=Symbol("maybeClose"),Zv=Symbol("skip"),Uc=Symbol("doChown"),Bc=Symbol("uid"),Hc=Symbol("gid"),Vc=Symbol("checkedCwd"),lk=require("crypto"),uk=Zx(),aW=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,Gc=aW==="win32",cW=(t,e)=>{if(!Gc)return Re.unlink(t,e);let r=t+".DELETE."+lk.randomBytes(16).toString("hex");Re.rename(t,r,n=>{if(n)return e(n);Re.unlink(r,e)})},lW=t=>{if(!Gc)return Re.unlinkSync(t);let e=t+".DELETE."+lk.randomBytes(16).toString("hex");Re.renameSync(t,e),Re.unlinkSync(e)},dk=(t,e,r)=>t===t>>>0?t:e===e>>>0?e:r,fk=t=>sW(oW(Sr(t))).toLowerCase(),uW=(t,e)=>{e=fk(e);for(let r of t.keys()){let n=fk(r);(n===e||n.indexOf(e+"/")===0)&&t.delete(r)}},dW=t=>{for(let e of t.keys())t.delete(e)},of=class extends tW{constructor(e){e||(e={}),e.ondone=r=>{this[Xv]=!0,this[Jv]()};super(e);if(this[Vc]=!1,this.reservations=nW(),this.transform=typeof e.transform=="function"?e.transform:null,this.writable=!0,this.readable=!1,this[nf]=0,this[Xv]=!1,this.dirCache=e.dirCache||new Map,typeof e.uid=="number"||typeof e.gid=="number"){if(typeof e.uid!="number"||typeof e.gid!="number")throw new TypeError("cannot set owner without number uid and gid");if(e.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=e.uid,this.gid=e.gid,this.setOwner=!0}else this.uid=null,this.gid=null,this.setOwner=!1;e.preserveOwner===void 0&&typeof e.uid!="number"?this.preserveOwner=process.getuid&&process.getuid()===0:this.preserveOwner=!!e.preserveOwner,this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():null,this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():null,this.forceChown=e.forceChown===!0,this.win32=!!e.win32||Gc,this.newer=!!e.newer,this.keep=!!e.keep,this.noMtime=!!e.noMtime,this.preservePaths=!!e.preservePaths,this.unlink=!!e.unlink,this.cwd=Sr(oi.resolve(e.cwd||process.cwd())),this.strip=+e.strip||0,this.processUmask=e.noChmod?0:process.umask(),this.umask=typeof e.umask=="number"?e.umask:this.processUmask,this.dmode=e.dmode||511&~this.umask,this.fmode=e.fmode||438&~this.umask,this.on("entry",r=>this[rk](r))}warn(e,r,n={}){return(e==="TAR_BAD_ARCHIVE"||e==="TAR_ABORT")&&(n.recoverable=!1),super.warn(e,r,n)}[Jv](){this[Xv]&&this[nf]===0&&(this.emit("prefinish"),this.emit("finish"),this.emit("end"),this.emit("close"))}[ak](e){if(this.strip){let r=Sr(e.path).split("/");if(r.length<this.strip)return!1;if(e.path=r.slice(this.strip).join("/"),e.type==="Link"){let n=Sr(e.linkpath).split("/");if(n.length>=this.strip)e.linkpath=n.slice(this.strip).join("/");else return!1}}if(!this.preservePaths){let r=Sr(e.path),n=r.split("/");if(n.includes("..")||Gc&&/^[a-z]:\.\.$/i.test(n[0]))return this.warn("TAR_ENTRY_ERROR","path contains '..'",{entry:e,path:r}),!1;let[i,o]=iW(r);i&&(e.path=o,this.warn("TAR_ENTRY_INFO",`stripping ${i} from absolute path`,{entry:e,path:r}))}if(oi.isAbsolute(e.path)?e.absolute=Sr(oi.resolve(e.path)):e.absolute=Sr(oi.resolve(this.cwd,e.path)),!this.preservePaths&&e.absolute.indexOf(this.cwd+"/")!==0&&e.absolute!==this.cwd)return this.warn("TAR_ENTRY_ERROR","path escaped extraction target",{entry:e,path:Sr(e.path),resolvedPath:e.absolute,cwd:this.cwd}),!1;if(e.absolute===this.cwd&&e.type!=="Directory"&&e.type!=="GNUDumpDir")return!1;if(this.win32){let{root:r}=oi.win32.parse(e.absolute);e.absolute=r+tk.encode(e.absolute.substr(r.length));let{root:n}=oi.win32.parse(e.path);e.path=n+tk.encode(e.path.substr(n.length))}return!0}[rk](e){if(!this[ak](e))return e.resume();switch(eW.equal(typeof e.absolute,"string"),e.type){case"Directory":case"GNUDumpDir":e.mode&&(e.mode=e.mode|448);case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[zv](e);case"CharacterDevice":case"BlockDevice":case"FIFO":default:return this[sk](e)}}[qt](e,r){e.name==="CwdError"?this.emit("error",e):(this.warn("TAR_ENTRY_ERROR",e,{entry:r}),this[aa](),r.resume())}[Hi](e,r,n){ek(Sr(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:r,noChmod:this.noChmod},n)}[Uc](e){return this.forceChown||this.preserveOwner&&(typeof e.uid=="number"&&e.uid!==this.processUid||typeof e.gid=="number"&&e.gid!==this.processGid)||typeof this.uid=="number"&&this.uid!==this.processUid||typeof this.gid=="number"&&this.gid!==this.processGid}[Bc](e){return dk(this.uid,e.uid,this.processUid)}[Hc](e){return dk(this.gid,e.gid,this.processGid)}[Yv](e,r){let n=e.mode&4095||this.fmode,i=new rW.WriteStream(e.absolute,{flags:uk(e.size),mode:n,autoClose:!1});i.on("error",c=>{i.fd&&Re.close(i.fd,()=>{}),i.write=()=>!0,this[qt](c,e),r()});let o=1,s=c=>{if(c){i.fd&&Re.close(i.fd,()=>{}),this[qt](c,e),r();return}--o==0&&Re.close(i.fd,l=>{l?this[qt](l,e):this[aa](),r()})};i.on("finish",c=>{let l=e.absolute,u=i.fd;if(e.mtime&&!this.noMtime){o++;let d=e.atime||new Date,f=e.mtime;Re.futimes(u,d,f,p=>p?Re.utimes(l,d,f,h=>s(h&&p)):s())}if(this[Uc](e)){o++;let d=this[Bc](e),f=this[Hc](e);Re.fchown(u,d,f,p=>p?Re.chown(l,d,f,h=>s(h&&p)):s())}s()});let a=this.transform&&this.transform(e)||e;a!==e&&(a.on("error",c=>{this[qt](c,e),r()}),e.pipe(a)),a.pipe(i)}[Qv](e,r){let n=e.mode&4095||this.dmode;this[Hi](e.absolute,n,i=>{if(i){this[qt](i,e),r();return}let o=1,s=a=>{--o==0&&(r(),this[aa](),e.resume())};e.mtime&&!this.noMtime&&(o++,Re.utimes(e.absolute,e.atime||new Date,e.mtime,s)),this[Uc](e)&&(o++,Re.chown(e.absolute,this[Bc](e),this[Hc](e),s)),s()})}[sk](e){e.unsupported=!0,this.warn("TAR_ENTRY_UNSUPPORTED",`unsupported entry type: ${e.type}`,{entry:e}),e.resume()}[ik](e,r){this[rf](e,e.linkpath,"symlink",r)}[ok](e,r){let n=Sr(oi.resolve(this.cwd,e.linkpath));this[rf](e,n,"link",r)}[ck](){this[nf]++}[aa](){this[nf]--,this[Jv]()}[Zv](e){this[aa](),e.resume()}[Kv](e,r){return e.type==="File"&&!this.unlink&&r.isFile()&&r.nlink<=1&&!Gc}[zv](e){this[ck]();let r=[e.path];e.linkpath&&r.push(e.linkpath),this.reservations.reserve(r,n=>this[nk](e,n))}[tf](e){e.type==="SymbolicLink"?dW(this.dirCache):e.type!=="Directory"&&uW(this.dirCache,e.absolute)}[nk](e,r){this[tf](e);let n=a=>{this[tf](e),r(a)},i=()=>{this[Hi](this.cwd,this.dmode,a=>{if(a){this[qt](a,e),n();return}this[Vc]=!0,o()})},o=()=>{if(e.absolute!==this.cwd){let a=Sr(oi.dirname(e.absolute));if(a!==this.cwd)return this[Hi](a,this.dmode,c=>{if(c){this[qt](c,e),n();return}s()})}s()},s=()=>{Re.lstat(e.absolute,(a,c)=>{if(c&&(this.keep||this.newer&&c.mtime>e.mtime)){this[Zv](e),n();return}if(a||this[Kv](e,c))return this[Mr](null,e,n);if(c.isDirectory()){if(e.type==="Directory"){let l=!this.noChmod&&e.mode&&(c.mode&4095)!==e.mode,u=d=>this[Mr](d,e,n);return l?Re.chmod(e.absolute,e.mode,u):u()}if(e.absolute!==this.cwd)return Re.rmdir(e.absolute,l=>this[Mr](l,e,n))}if(e.absolute===this.cwd)return this[Mr](null,e,n);cW(e.absolute,l=>this[Mr](l,e,n))})};this[Vc]?o():i()}[Mr](e,r,n){if(e){this[qt](e,r),n();return}switch(r.type){case"File":case"OldFile":case"ContiguousFile":return this[Yv](r,n);case"Link":return this[ok](r,n);case"SymbolicLink":return this[ik](r,n);case"Directory":case"GNUDumpDir":return this[Qv](r,n)}}[rf](e,r,n,i){Re[n](r,e.absolute,o=>{o?this[qt](o,e):(this[aa](),e.resume()),i()})}},sf=t=>{try{return[null,t()]}catch(e){return[e,null]}},pk=class extends of{[Mr](e,r){return super[Mr](e,r,()=>{})}[zv](e){if(this[tf](e),!this[Vc]){let o=this[Hi](this.cwd,this.dmode);if(o)return this[qt](o,e);this[Vc]=!0}if(e.absolute!==this.cwd){let o=Sr(oi.dirname(e.absolute));if(o!==this.cwd){let s=this[Hi](o,this.dmode);if(s)return this[qt](s,e)}}let[r,n]=sf(()=>Re.lstatSync(e.absolute));if(n&&(this.keep||this.newer&&n.mtime>e.mtime))return this[Zv](e);if(r||this[Kv](e,n))return this[Mr](null,e);if(n.isDirectory()){if(e.type==="Directory"){let s=!this.noChmod&&e.mode&&(n.mode&4095)!==e.mode,[a]=s?sf(()=>{Re.chmodSync(e.absolute,e.mode)}):[];return this[Mr](a,e)}let[o]=sf(()=>Re.rmdirSync(e.absolute));this[Mr](o,e)}let[i]=e.absolute===this.cwd?[]:sf(()=>lW(e.absolute));this[Mr](i,e)}[Yv](e,r){let n=e.mode&4095||this.fmode,i=a=>{let c;try{Re.closeSync(o)}catch(l){c=l}(a||c)&&this[qt](a||c,e),r()},o;try{o=Re.openSync(e.absolute,uk(e.size),n)}catch(a){return i(a)}let s=this.transform&&this.transform(e)||e;s!==e&&(s.on("error",a=>this[qt](a,e)),e.pipe(s)),s.on("data",a=>{try{Re.writeSync(o,a,0,a.length)}catch(c){i(c)}}),s.on("end",a=>{let c=null;if(e.mtime&&!this.noMtime){let l=e.atime||new Date,u=e.mtime;try{Re.futimesSync(o,l,u)}catch(d){try{Re.utimesSync(e.absolute,l,u)}catch(f){c=d}}}if(this[Uc](e)){let l=this[Bc](e),u=this[Hc](e);try{Re.fchownSync(o,l,u)}catch(d){try{Re.chownSync(e.absolute,l,u)}catch(f){c=c||d}}}i(c)})}[Qv](e,r){let n=e.mode&4095||this.dmode,i=this[Hi](e.absolute,n);if(i){this[qt](i,e),r();return}if(e.mtime&&!this.noMtime)try{Re.utimesSync(e.absolute,e.atime||new Date,e.mtime)}catch(o){}if(this[Uc](e))try{Re.chownSync(e.absolute,this[Bc](e),this[Hc](e))}catch(o){}r(),e.resume()}[Hi](e,r){try{return ek.sync(Sr(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:r})}catch(n){return n}}[rf](e,r,n,i){try{Re[n+"Sync"](r,e.absolute),i(),e.resume()}catch(o){return this[qt](o,e)}}};of.Sync=pk;hk.exports=of});var wk=_((fle,yk)=>{"use strict";var fW=Us(),af=ey(),mk=require("fs"),gk=ra(),vk=require("path"),ty=zs();yk.exports=(t,e,r)=>{typeof t=="function"?(r=t,e=null,t={}):Array.isArray(t)&&(e=t,t={}),typeof e=="function"&&(r=e,e=null),e?e=Array.from(e):e=[];let n=fW(t);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return e.length&&pW(n,e),n.file&&n.sync?hW(n):n.file?mW(n,r):n.sync?gW(n):vW(n)};var pW=(t,e)=>{let r=new Map(e.map(o=>[ty(o),!0])),n=t.filter,i=(o,s)=>{let a=s||vk.parse(o).root||".",c=o===a?!1:r.has(o)?r.get(o):i(vk.dirname(o),a);return r.set(o,c),c};t.filter=n?(o,s)=>n(o,s)&&i(ty(o)):o=>i(ty(o))},hW=t=>{let e=new af.Sync(t),r=t.file,n=mk.statSync(r),i=t.maxReadSize||16*1024*1024;new gk.ReadStreamSync(r,{readSize:i,size:n.size}).pipe(e)},mW=(t,e)=>{let r=new af(t),n=t.maxReadSize||16*1024*1024,i=t.file,o=new Promise((s,a)=>{r.on("error",a),r.on("close",s),mk.stat(i,(c,l)=>{if(c)a(c);else{let u=new gk.ReadStream(i,{readSize:n,size:l.size});u.on("error",a),u.pipe(r)}})});return e?o.then(e,e):o},gW=t=>new af.Sync(t),vW=t=>new af(t)});var Wc=_(gt=>{"use strict";gt.c=gt.create=ex();gt.r=gt.replace=Lv();gt.t=gt.list=Yd();gt.u=gt.update=lx();gt.x=gt.extract=wk();gt.Pack=Fd();gt.Unpack=ey();gt.Parse=Kd();gt.ReadEntry=wd();gt.WriteEntry=uv();gt.Header=Ws();gt.Pax=Ed();gt.types=Kg()});var oy=_((Fle,Rk)=>{Rk.exports=function(e,r,n){e(r),n&&n(r===!0?null:r)}});var hf=_((Mle,Ok)=>{"use strict";var Dk=oy();Ok.exports=function(e,r){if(!e)return function(i,o){return i?Dk(o,i,r):o(!0)};Array.isArray(e)||(e=Object.keys(e).map(function(i){return e[i]}));var n=0;return function(i,o){if(i)return Dk(o,i,r);n>=e.length?o(!0):o(null,e[n++])}}});var Lk=_((qle,Nk)=>{"use strict";var SW=hf();Nk.exports=function(t){return SW(Object.keys(t))}});var sy=_(($le,Fk)=>{"use strict";var xW=oy();Fk.exports=function(e,r){return function(n,i){if(n)return xW(i,n,r);if(e!=null){var o=e;e=null,i(null,o)}else i(!0)}}});var qk=_((jle,Mk)=>{"use strict";Mk.exports=function(e){var r=0;return e=e||1/0,function(n,i){if(n)return i&&i(n);if(r>e)return i(!0);i(null,r++)}}});var jk=_((Ule,$k)=>{"use strict";$k.exports=function(e){return e=e||Math.random,function(r,n){return r?n&&n(r):n(null,e())}}});var Bk=_((Ble,Uk)=>{"use strict";Uk.exports=function(){return function(e,r){r(!0)}}});var Vk=_((Hle,Hk)=>{"use strict";Hk.exports=function(e){return function(r,n){n(e)}}});var Wk=_((Vle,Gk)=>{"use strict";Gk.exports={keys:Lk(),once:sy(),values:hf(),count:qk(),infinite:jk(),empty:Bk(),error:Vk()}});var la=_((Gle,zk)=>{"use strict";zk.exports=function(e,r){var n,i;function o(s){if(n=s,i)return o.abort();(function a(){for(var c=!0,l=!1;c;)if(l=!1,n(null,function(u,d){if(l=!0,u=u||i){if(c=!1,r)r(u===!0?null:u);else if(u&&u!==!0)throw u}else e&&e(d)===!1||i?(c=!1,n(i||!0,r||function(){})):c||a()}),!l){c=!1;return}})()}return o.abort=function(s,a){if(typeof s=="function"&&(a=s,s=!0),i=s||!0,n)return n(i,a||function(){})},o}});var Yk=_((Wle,Kk)=>{"use strict";var kW=la();Kk.exports=function(e){return kW(null,e)}});var Xk=_((zle,Qk)=>{"use strict";var PW=la();Qk.exports=function(e){return PW(function(r){console.log(r)},e)}});var ua=_((Kle,Jk)=>{Jk.exports=function(e){return e&&(typeof e=="string"?function(r){return r[e]}:typeof e=="object"&&typeof e.exec=="function"?function(r){var n=e.exec(r);return n&&n[0]}:e)}});var tP=_((Yle,eP)=>{"use strict";function Zk(t){return t}var IW=ua(),AW=la();eP.exports=function(e,r){var n=!1;return r?e=IW(e)||Zk:(r=e,e=Zk),AW(function(i){if(e(i))return n=!0,r(null,i),!1},function(i){n||r(i===!0?null:i,null)})}});var mf=_((Qle,rP)=>{"use strict";var TW=la();rP.exports=function(e,r,n){n||(n=r,r=null);var i=TW(function(o){r=e(r,o)},function(o){n(o,r)});return arguments.length===2?function(o){o(null,function(s,a){if(s)return n(s===!0?null:s);r=a,i(o)})}:i}});var iP=_((Xle,nP)=>{"use strict";var RW=mf();nP.exports=function(e){return RW(function(r,n){return r.push(n),r},[],e)}});var sP=_((Jle,oP)=>{"use strict";var DW=mf();oP.exports=function(e){return DW(function(r,n){return r+n},"",e)}});var cP=_((Zle,aP)=>{"use strict";aP.exports={drain:la(),onEnd:Yk(),log:Xk(),find:tP(),reduce:mf(),collect:iP(),concat:sP()}});var uP=_((eue,lP)=>{"use strict";function OW(t){return t}var NW=ua();lP.exports=function(e){return e?(e=NW(e),function(r){return function(n,i){r(n,function(o,s){try{s=o?null:e(s)}catch(a){return r(a,function(){return i(a)})}i(o,s)})}}):OW}});var fP=_((tue,dP)=>{"use strict";function LW(t){return t}var FW=ua();dP.exports=function(e){if(!e)return LW;e=FW(e);var r=!1,n,i;return function(o){return function s(a,c){if(i)return c(i);a?(i=a,r?o(a,function(l){r?n=c:c(a)}):o(a,function(l){c(a)})):o(null,function(l,u){l?c(l):i?c(i):(r=!0,e(u,function(d,f){r=!1,i?(c(i),n&&n(i)):d?s(d,c):c(null,f)}))})}}}});var ay=_((rue,pP)=>{var MW=ua();function qW(t){return t}pP.exports=function(e){return typeof e=="object"&&typeof e.test=="function"?function(r){return e.test(r)}:MW(e)||qW}});var gf=_((nue,hP)=>{"use strict";var $W=ay();hP.exports=function(e){return e=$W(e),function(r){return function n(i,o){for(var s,a=!0;a;)a=!1,s=!0,r(i,function(c,l){if(!c&&!e(l))return s?a=!0:n(c,o);o(c,l)}),s=!1}}}});var gP=_((iue,mP)=>{"use strict";var jW=ay(),UW=gf();mP.exports=function(e){return e=jW(e),UW(function(r){return!e(r)})}});var yP=_((oue,vP)=>{"use strict";vP.exports=function(e,r){var n=!1;function i(o){n||!r||(n=!0,r(o===!0?null:o))}return function(o){return function(s,a){return s&&i(s),o(s,function(c,l){c?i(c):e&&e(l),a(c,l)})}}}});var CP=_((sue,wP)=>{"use strict";wP.exports=function(e,r){r=r||{};var n=r.last||!1,i=!1;if(typeof e=="number"){n=!0;var o=e;e=function(){return--o}}return function(s){function a(c){s(!0,function(l){n=!1,c(l||!0)})}return function(c,l){i&&!c?n?a(l):l(i):(i=c)?s(i,l):s(null,function(u,d){(i=i||u)?l(i):e(d)?l(null,d):(i=!0,n?l(null,d):a(l))})}}}});var cy=_((aue,bP)=>{"use strict";function BW(t){return t}var HW=ua(),VW=gf();bP.exports=function(e,r){e=HW(e)||BW;var n={};return VW(function(i){var o=e(i);return n[o]?!!r:(n[o]=!0,!r)})}});var _P=_((cue,EP)=>{"use strict";var GW=cy();EP.exports=function(e){return GW(e,!0)}});var xP=_((lue,SP)=>{"use strict";var WW=hf(),zW=sy();SP.exports=function(){return function(e){var r;return function(n,i){n?r?r(n,function(a){e(a||n,i)}):e(n,i):r?o():s();function o(){r(null,function(a,c){a===!0?s():a?e(!0,function(l){i(a)}):i(null,c)})}function s(){r=null,e(null,function(a,c){if(a)return i(a);Array.isArray(c)||c&&typeof c=="object"?c=WW(c):typeof c!="function"&&(c=zW(c)),r=c,o()})}}}}});var PP=_((uue,kP)=>{"use strict";kP.exports={map:uP(),asyncMap:fP(),filter:gf(),filterNot:gP(),through:yP(),take:CP(),unique:cy(),nonUnique:_P(),flatten:xP()}});var ly=_((due,IP)=>{"use strict";IP.exports=function t(e){var r=arguments.length;if(typeof e=="function"&&e.length===1){for(var n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return function(a){if(n==null)throw new TypeError("partial sink should only be called once!");var c=n;switch(n=null,r){case 1:return t(a,c[0]);case 2:return t(a,c[0],c[1]);case 3:return t(a,c[0],c[1],c[2]);case 4:return t(a,c[0],c[1],c[2],c[3]);default:return c.unshift(a),t.apply(null,c)}}}var o=e;o&&typeof o.source=="function"&&(o=o.source);for(var i=1;i<r;i++){var s=arguments[i];typeof s=="function"?o=s(o):s&&typeof s=="object"&&(s.sink(o),o=s.source)}return o}});var vf=_((Ko,DP)=>{"use strict";var AP=Wk(),TP=cP(),RP=PP();Ko=DP.exports=ly();Ko.pull=Ko;for(ln in AP)Ko[ln]=AP[ln];var ln;for(ln in RP)Ko[ln]=RP[ln];var ln;for(ln in TP)Ko[ln]=TP[ln];var ln});var by=_((jue,JP)=>{var $ue=JP.exports=function(t){(function e(){var r=!0,n=!1,i=!1;do i=!0,r=!1,t.call(this,function(){i?r=!0:e()}),i=!1;while(r)})()}});var eI=_((Uue,ZP)=>{var sz=by();ZP.exports=function(t,e){return function(r){var n=[],i,o;function s(l){n.push(l)}t=t||function(l){this.queue(l)},e=e||function(){this.queue(null)};var a={emit:function(l,u){l=="data"&&s(u),l=="end"&&(i=!0,s(null)),l=="error"&&(o=u)},queue:s},c;return function(l,u){if(i=i||l,l)return r(l,function(){if(c){var d=c;c=null,d(l)}u(l)});c=u,sz(function d(f){if(!!c)if(u=c,o)c=null,u(o);else if(n.length){var p=n.shift();c=null,u(p===null,p)}else r(i,function(h,m){if(h&&h!==!0)return o=h,f();if(i=i||h)e.call(a);else if(m!==null&&(t.call(a,m),o||i))return r(o||i,function(){c=null,u(o||i)});f(d)})})}}}});var rI=_((Bue,tI)=>{tI.exports=function(){var t=[],e=0;function r(){return t.reduce(function(n,i){return n+i.length},0)}return{length:e,data:this,add:function(n){if(!Buffer.isBuffer(n))throw new Error("data must be a buffer, was: "+JSON.stringify(n));return this.length=e=e+n.length,t.push(n),this},has:function(n){return n==null?e>0:e>=n},get:function(n){var i;if(n==null||n===e){e=0;var o=t;return t=[],o.length==1?o[0]:Buffer.concat(o)}else if(t.length>1&&n<=(i=t[0].length)){var s=t[0].slice(0,n);return n===i?t.shift():t[0]=t[0].slice(n,i),e-=n,s}else if(n<e){for(var a=[],c=0;c+t[0].length<n;){var l=t.shift();c+=l.length,a.push(l)}return c<n&&(a.push(t[0].slice(0,n-c)),t[0]=t[0].slice(n-c,t[0].length),this.length=e=e-n),Buffer.concat(a)}else throw new Error("could not get "+n+" bytes")}}}});var sI=_((Hue,oI)=>{"use strict";var az=rI();function cz(t){return Number.isFinite(t)}function nI(t){return typeof t=="function"}function iI(t,e){return e?function(r,n){var i=setTimeout(function(){t(new Error("pull-reader: read exceeded timeout"),n)},e);t(r,function(o,s){clearTimeout(i),n(o,s)})}:t}oI.exports=function(t){var e=[],r,n,i=!1,o=az(),s,a,c;function l(){for(;e.length;)if(e[0].length==null&&o.has(1))e.shift().cb(null,o.get());else if(o.has(e[0].length)){var f=e.shift();f.cb(null,o.get(f.length))}else if(s==!0&&e[0].length&&o.length<e[0].length){var p="stream ended with:"+o.length+" but wanted:"+e[0].length;e.shift().cb(new Error(p))}else if(s)e.shift().cb(s);else return!!e.length;return e.length||!o.has(1)||c}function u(){var f=l();f&&!i&&r&&!i&&!a&&(i=!0,n(null,function(p,h){if(i=!1,p)return s=p,l();o.add(h),u()}))}function d(f){if(c){for(;e.length;)e.shift().cb(c);return cb&&cb(c)}n=iI(f,t),r=f,u()}return d.abort=function(f,p){c=f||!0,r?(i=!0,r(c,function(){for(;e.length;)e.shift().cb(c);p&&p(c)})):p()},d.read=function(f,p,h){if(nI(p)&&(h=p,p=t),nI(h))e.push({length:cz(f)?f:null,cb:h}),u();else return a=!0,function(m,g){if(i||o.has(1)){if(m)return r(m,g);e.push({length:null,cb:g}),u()}else iI(r,p)(m,function(v,y){g(v,y)})}},d}});var yI=_((Jo,vI)=>{var lz=eI(),uz=sI(),aI=0,cI=1,lI=2,uI="GOODBYE",dz=Buffer.isBuffer;function dI(t){return typeof t=="string"}function fI(t){var e=Buffer.alloc(9),r=0,n=t.value!==void 0?t.value:t.end;return dI(t)&&t===uI?(e.fill(0),[e,null]):(dI(n)?(r=cI,n=Buffer.from(n,"utf-8")):dz(n)?r=aI:(r=lI,n=Buffer.from(JSON.stringify(n),"utf-8")),r=t.stream<<3|t.end<<2|r,e[0]=r,e.writeUInt32BE(n.length,1),e.writeInt32BE(t.req||0,5),[e,n])}function pI(t){if(t.length!=9)throw new Error("expected header to be 9 bytes long");var e=t[0],r=t.readUInt32BE(1),n=t.readInt32BE(5);return{req:n,stream:!!(e&8),end:!!(e&4),value:null,length:r,type:e&3}}function hI(t,e){if(t.length!==e.length)throw new Error("incorrect length, expected:"+e.length+" found:"+t.length);if(aI===e.type)e.value=t;else if(cI===e.type)e.value=t.toString();else if(lI===e.type)e.value=JSON.parse(t.toString());else throw new Error("unknown message type");return e}function mI(){return lz(function(t){var e=fI(t);this.queue(e[0]),e[1]!==null&&this.queue(e[1])})}function gI(){var t=uz(),e=!1;return function(r){return t(r),function(n,i){if(e)return i(!0);if(n)return t.abort(n,i);t.read(9,function(o,s){if(o)return i(o);var a=pI(s);if(a.length===0)return e=!0,i(null,uI);t.read(a.length,function(c,l){if(c)return i(c);try{hI(l,a)}catch(u){return i(u)}i(null,a)})})}}}Jo=vI.exports=function(t){return{source:mI()(t.source),sink:function(e){return t.sink(gI()(e))}}};Jo.encodePair=fI;Jo.decodeHead=pI;Jo.decodeBody=hI;Jo.encode=mI;Jo.decode=gI});var bI=_((Vue,CI)=>{function sl(t){return t&&(t===!0?!0:{message:t.message,name:t.name,stack:t.stack})}CI.exports=function(t){return new jr(t)};function jr(t){this.ended=!1,this.opts=t,this._req_counter=1,this._requests={},this._instreams={},this._outstreams={},this._closecbs=[],this._closing=!1,this._closed=!1,t.close&&this._closecbs.push(t.close)}jr.prototype.message=function(t){this.read({req:0,stream:!1,end:!1,value:t})};jr.prototype.request=function(t,e){if(this._closing)return e(new Error("parent stream is closing"));var r=this._req_counter++,n=this;this._requests[r]=function(i,o){delete n._requests[r],e(i,o),n._maybedone(i)},this.read({req:r,stream:!1,end:!1,value:t})};jr.prototype.stream=function(){if(this._closing)throw new Error("parent stream is closing");var t=this._req_counter++,e=this;return this._outstreams[t]=new al(t,this,function(){delete e._outstreams[t]}),this._outstreams[t]};jr.prototype.close=function(t){if(!t)throw new Error("packet-stream.close *must* have callback");if(this._closed)return t();this._closecbs.push(t),this._closing=!0,this._maybedone()};jr.prototype.destroy=function(t){t=t||sl(t),this.ended=t,this._closing=!0;var e=t===!0?new Error("unexpected end of parent stream"):t,r=0;for(var n in this._requests)r++,this._requests[n](e);for(var n in this._instreams)r++,this._instreams[n].writeEnd=!0,this._instreams[n].destroy(e);for(var n in this._outstreams)r++,this._outstreams[n].writeEnd=!0,this._outstreams[n].destroy(e);r===0&&t===!0&&(e=null),this._maybedone(e)};jr.prototype._maybedone=function(t){this._closed||!this._closing||Object.keys(this._requests).length!==0||Object.keys(this._instreams).length!==0||Object.keys(this._outstreams).length!==0||(this._closed=!0,this._closecbs.forEach(function(e){e(t)}),this.read(null,t||!0),this.opts=null,this._closecbs.length=0,this.read=wI)};function wI(t){console.error("packet-stream asked to read after closed",t)}jr.prototype.read=function(t){console.error("please overwrite read method to do IO",t)};jr.prototype.write=function(t,e){this.ended||(e?this.destroy(e):t.req&&!t.stream?this._onrequest(t):t.req&&t.stream?this._onstream(t):this._onmessage(t))};jr.prototype._onmessage=function(t){this.opts&&typeof this.opts.message=="function"&&this.opts.message(t.value)};jr.prototype._onrequest=function(t){var e=t.req*-1;if(t.req<0)typeof this._requests[e]=="function"&&this._requests[e](t.end?t.value:null,t.end?null:t.value);else if(this.opts&&typeof this.opts.request=="function"){var r=!1,n=this;this.opts.request(t.value,function(o,s){if(r)throw new Error("cb called twice from local api");r=!0,o?n.read({value:sl(o),end:!0,req:e}):n.read({value:s,end:!1,req:e}),n._maybedone()})}else{if(this.ended){var i=this.ended===!0?new Error("unexpected end of parent stream"):this.ended;this.read({value:sl(i),end:!0,stream:!1,req:e})}else this.read({value:{message:"Unable to handle requests",name:"NO_REQUEST_HANDLER",stack:null},end:!0,stream:!1,req:e});this._maybedone()}};jr.prototype._onstream=function(t){if(t.req<0){var e=t.req*-1,r=this._outstreams[e];if(!r)return console.error("no stream for incoming msg",t);t.end?(r.writeEnd&&delete this._outstreams[e],r.readEnd=!0,r.read(null,t.value),this._maybedone()):r.read(t.value)}else{var e=t.req,n=this._instreams[e];if(!n){var i=this;n=this._instreams[e]=new al(e*-1,this,function(){delete i._instreams[e]}),this.opts&&typeof this.opts.stream=="function"&&this.opts.stream(n)}t.end?(n.writeEnd&&delete this._instreams[e],n.readEnd=!0,n.read&&n.read(null,t.value),this._maybedone()):n.read?n.read(t.value):console.error("no .read for stream:",n.id,"dropped:",t)}};function al(t,e,r){this.id=t,this.read=null,this.writeEnd=null,this.readEnd=null,this._ps=e,this._remove=r,this._seq_counter=1}al.prototype.write=function(t,e){if(e){this.writeEnd=e;var r=this._ps;r&&(r.read({req:this.id,stream:!0,end:!0,value:sl(e)}),this.readEnd&&this.destroy(e),r._maybedone(e))}else this._ps&&this._ps.read({req:this.id,stream:!0,end:!1,value:t})};al.prototype.end=function(t){this.write(null,sl(t||!0))};al.prototype.destroy=function(t){if(this.writeEnd){if(!this.readEnd){this.readEnd=!0;try{this.read&&this.read(null,t)}catch(e){console.error("Exception thrown by PacketStream substream end handler",e),console.error(e.stack)}}}else{if(this.writeEnd=!0,!this.readEnd){this.readEnd=!0;try{this.read(null,t)}catch(e){console.error("Exception thrown by PacketStream substream end handler",e),console.error(e.stack)}}this.write(null,t)}this._ps&&(this._remove(),this._remove=null,this.read=wI,this._ps=null)}});var _I=_((Gue,cl)=>{"use strict";var fz=vf();function pz(t){let e=!1;return(r,n)=>{e||(e=!0,t(r,n))}}function Ey(t,e){let r=[],n=!1,i,o,s=pz((a,c)=>{e&&e(a,c),t=null,e=null,i=null,o&&o(a||!0,()=>{})});return t.read=function(a,c){if(n=n||c,i){let l=i;i=null,l(n,a)}else n||r.push(a);n&&s(n!==!0?n:null)},{source(a,c){a?(t&&t.write(null,a),c(a),s(a!==!0?a:null)):r.length?c(null,r.shift()):n?c(n):i=c},sink(a){if(n)return o=null,a(n,()=>{});o=a,fz.drain(c=>{if(n)return!1;t.write(c)},c=>{t&&!t.writeEnd&&t.write(null,c||!0),s&&s(c)})(a)}}}function EI(t,e){return Ey(t,r=>{t.writeEnd||t.write(null,r||!0),e&&e(r)})}function hz(t){return EI(t).source}function mz(t,e){return EI(t,e).sink}cl.exports=Ey;cl.exports.source=hz;cl.exports.sink=mz;cl.exports.duplex=Ey});var xI=_((Wue,SI)=>{SI.exports=function(e){var r,n,i;function o(s){return function(a,c){s(a,function(l,u){if(l&&!i)return i=!0,c(null,e);l&&r?c(l):l?n=c:c(null,u)})}}return o.end=function(){return r=!0,n&&n(r),o},o}});var _y=_((zue,kI)=>{kI.exports=function(e,r,n){e(r),n&&n(r===!0?null:r)}});var xf=_((Kue,II)=>{"use strict";var PI=_y();II.exports=function(e,r){if(!e)return function(i,o){return i?PI(o,i,r):o(!0)};Array.isArray(e)||(e=Object.keys(e).map(function(i){return e[i]}));var n=0;return function(i,o){if(i)return PI(o,i,r);n>=e.length?o(!0):o(null,e[n++])}}});var TI=_((Yue,AI)=>{"use strict";var gz=xf();AI.exports=function(t){return gz(Object.keys(t))}});var Sy=_((Que,RI)=>{"use strict";var vz=_y();RI.exports=function(e,r){return function(n,i){if(n)return vz(i,n,r);if(e!=null){var o=e;e=null,i(null,o)}else i(!0)}}});var OI=_((Xue,DI)=>{"use strict";DI.exports=function(e){var r=0;return e=e||1/0,function(n,i){if(n)return i&&i(n);if(r>e)return i(!0);i(null,r++)}}});var LI=_((Jue,NI)=>{"use strict";NI.exports=function(e){return e=e||Math.random,function(r,n){return r?n&&n(r):n(null,e())}}});var MI=_((Zue,FI)=>{"use strict";FI.exports=function(){return function(e,r){r(!0)}}});var $I=_((ede,qI)=>{"use strict";qI.exports=function(e){return function(r,n){n(e)}}});var UI=_((tde,jI)=>{"use strict";jI.exports={keys:TI(),once:Sy(),values:xf(),count:OI(),infinite:LI(),empty:MI(),error:$I()}});var ma=_((rde,BI)=>{"use strict";BI.exports=function(e,r){var n,i;function o(s){if(n=s,i)return o.abort();(function a(){for(var c=!0,l=!1;c;)if(l=!1,n(null,function(u,d){if(l=!0,u=u||i){if(c=!1,r)r(u===!0?null:u);else if(u&&u!==!0)throw u}else e&&e(d)===!1||i?(c=!1,n(i||!0,r||function(){})):c||a()}),!l){c=!1;return}})()}return o.abort=function(s,a){if(typeof s=="function"&&(a=s,s=!0),i=s||!0,n)return n(i,a||function(){})},o}});var VI=_((nde,HI)=>{"use strict";var yz=ma();HI.exports=function(e){return yz(null,e)}});var WI=_((ide,GI)=>{"use strict";var wz=ma();GI.exports=function(e){return wz(function(r){console.log(r)},e)}});var ga=_((ode,zI)=>{zI.exports=function(e){return e&&(typeof e=="string"?function(r){return r[e]}:typeof e=="object"&&typeof e.exec=="function"?function(r){var n=e.exec(r);return n&&n[0]}:e)}});var QI=_((sde,YI)=>{"use strict";function KI(t){return t}var Cz=ga(),bz=ma();YI.exports=function(e,r){var n=!1;return r?e=Cz(e)||KI:(r=e,e=KI),bz(function(i){if(e(i))return n=!0,r(null,i),!1},function(i){n||r(i===!0?null:i,null)})}});var kf=_((ade,XI)=>{"use strict";var Ez=ma();XI.exports=function(e,r,n){n||(n=r,r=null);var i=Ez(function(o){r=e(r,o)},function(o){n(o,r)});return arguments.length===2?function(o){o(null,function(s,a){if(s)return n(s===!0?null:s);r=a,i(o)})}:i}});var ZI=_((cde,JI)=>{"use strict";var _z=kf();JI.exports=function(e){return _z(function(r,n){return r.push(n),r},[],e)}});var tA=_((lde,eA)=>{"use strict";var Sz=kf();eA.exports=function(e){return Sz(function(r,n){return r+n},"",e)}});var nA=_((ude,rA)=>{"use strict";rA.exports={drain:ma(),onEnd:VI(),log:WI(),find:QI(),reduce:kf(),collect:ZI(),concat:tA()}});var oA=_((dde,iA)=>{"use strict";function xz(t){return t}var kz=ga();iA.exports=function(e){return e?(e=kz(e),function(r){return function(n,i){r(n,function(o,s){try{s=o?null:e(s)}catch(a){return r(a,function(){return i(a)})}i(o,s)})}}):xz}});var aA=_((fde,sA)=>{"use strict";function Pz(t){return t}var Iz=ga();sA.exports=function(e){if(!e)return Pz;e=Iz(e);var r=!1,n,i;return function(o){return function s(a,c){if(i)return c(i);a?(i=a,r?o(a,function(){r?n=c:c(a)}):o(a,c)):o(null,function(l,u){l?c(l):i?c(i):(r=!0,e(u,function(d,f){r=!1,i?(c(i),n(i)):d?s(d,c):c(null,f)}))})}}}});var xy=_((pde,cA)=>{var Az=ga();function Tz(t){return t}cA.exports=function(e){return typeof e=="object"&&typeof e.test=="function"?function(r){return e.test(r)}:Az(e)||Tz}});var Pf=_((hde,lA)=>{"use strict";var Rz=xy();lA.exports=function(e){return e=Rz(e),function(r){return function n(i,o){for(var s,a=!0;a;)a=!1,s=!0,r(i,function(c,l){if(!c&&!e(l))return s?a=!0:n(c,o);o(c,l)}),s=!1}}}});var dA=_((mde,uA)=>{"use strict";var Dz=xy(),Oz=Pf();uA.exports=function(e){return e=Dz(e),Oz(function(r){return!e(r)})}});var pA=_((gde,fA)=>{"use strict";fA.exports=function(e,r){var n=!1;function i(o){n||!r||(n=!0,r(o===!0?null:o))}return function(o){return function(s,a){return s&&i(s),o(s,function(c,l){c?i(c):e&&e(l),a(c,l)})}}}});var mA=_((vde,hA)=>{"use strict";hA.exports=function(e,r){r=r||{};var n=r.last||!1,i=!1;if(typeof e=="number"){n=!0;var o=e;e=function(){return--o}}return function(s){function a(c){s(!0,function(l){n=!1,c(l||!0)})}return function(c,l){i?n?a(l):l(i):(i=c)?s(i,l):s(null,function(u,d){(i=i||u)?l(i):e(d)?l(null,d):(i=!0,n?l(null,d):a(l))})}}}});var ky=_((yde,gA)=>{"use strict";function Nz(t){return t}var Lz=ga(),Fz=Pf();gA.exports=function(e,r){e=Lz(e)||Nz;var n={};return Fz(function(i){var o=e(i);return n[o]?!!r:(n[o]=!0,!r)})}});var yA=_((wde,vA)=>{"use strict";var Mz=ky();vA.exports=function(e){return Mz(e,!0)}});var CA=_((Cde,wA)=>{"use strict";var qz=xf(),$z=Sy();wA.exports=function(){return function(e){var r;return function(n,i){n?r?r(n,function(a){e(a||n,i)}):e(n,i):r?o():s();function o(){r(null,function(a,c){a===!0?s():a?e(!0,function(l){i(a)}):i(null,c)})}function s(){r=null,e(null,function(a,c){if(a)return i(a);Array.isArray(c)||c&&typeof c=="object"?c=qz(c):typeof c!="function"&&(c=$z(c)),r=c,o()})}}}}});var EA=_((bde,bA)=>{"use strict";bA.exports={map:oA(),asyncMap:aA(),filter:Pf(),filterNot:dA(),through:pA(),take:mA(),unique:ky(),nonUnique:yA(),flatten:CA()}});var SA=_((Ede,_A)=>{"use strict";_A.exports=function t(e){var r=arguments.length;if(typeof e=="function"&&e.length===1){for(var n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return function(a){if(n==null)throw new TypeError("partial sink should only be called once!");var c=n;switch(n=null,r){case 1:return t(a,c[0]);case 2:return t(a,c[0],c[1]);case 3:return t(a,c[0],c[1],c[2]);case 4:return t(a,c[0],c[1],c[2],c[3]);default:return c.unshift(a),t.apply(null,c)}}}var o=e;o&&typeof o.source=="function"&&(o=o.source);for(var i=1;i<r;i++){var s=arguments[i];typeof s=="function"?o=s(o):s&&typeof s=="object"&&(s.sink(o),o=s.source)}return o}});var AA=_((ll,IA)=>{"use strict";var xA=UI(),kA=nA(),PA=EA();ll=IA.exports=SA();for(un in xA)ll[un]=xA[un];var un;for(un in PA)ll[un]=PA[un];var un;for(un in kA)ll[un]=kA[un];var un});var RA=_((_de,TA)=>{var jz=xI(),Py=AA();TA.exports=function(t,e){e=e||"GOODBYE";var r=jz(e);return{source:Py(t.source,r),sink:Py(Py.filter(function(n){if(n!==e)return!0;r.end()}),t.sink)}}});var ul=_(dn=>{"use strict";var If=vf();function Uz(t){return t?Object.keys(t).length===0:!0}dn.set=function(e,r,n){let i,o;for(let s=0;s<r.length;s++){let a=r[s];e[a]=e[a]||{},i=e,o=a,e=e[a]}i[o]=n};dn.get=function(e,r){if(typeof r=="string")return e[r];let n;for(let i=0;i<r.length;i++){let o=r[i];if(n=e=e[o],e==null)return e}return n};dn.prefix=function(e,r){let n;for(let i=0;i<r.length;i++){let o=r[i];if(n=e=e[o],typeof e!="object")return e}return typeof n!="object"?!!n:!1};function Bz(t,e){for(let r in e){let n=e[r];t[n]||(t[n]={}),t=t[n]}return t}function Hz(t,e){(function r(n,i){let o=e[i];if(n)e.length-1===i?delete n[o]:i<e.length&&r(n[o],i+1);else return;Uz(n[o])&&delete n[o]})(t,0)}function Vz(t,e){for(let r in e)t[r]=e[r];return t}dn.mount=function(e,r,n){if(!Array.isArray(r))throw new Error("path must be array of strings");return Vz(Bz(e,r),n)};dn.unmount=function(e,r){return Hz(e,r)};var Af=t=>t==="source",Tf=t=>t==="sink",DA=t=>t==="duplex",Gz=t=>t==="sync",Wz=t=>t==="async",OA=t=>Gz(t)||Wz(t),zz=t=>Af(t)||Tf(t)||DA(t);dn.isRequest=OA;dn.isStream=zz;function Iy(t){return function(e){e(t||!0,()=>{})}}function NA(t){return{source:If.error(t),sink:Iy(t)}}dn.errorAsStream=function(e,r){return Af(e)?If.error(r):Tf(e)?Iy(r):NA(r)};dn.errorAsStreamOrCb=function(e,r,n){return OA(e)?n(r):Af(e)?If.error(r):Tf(e)?Iy(r):n(r),NA(r)};dn.pipeToStream=function(e,r,n){Af(e)?r(n):Tf(e)?n(r):DA(e)&&If(r,n,r)}});var Ay=_((kde,FA)=>{function LA(t){if(t.stack&&t.name&&t.message)return t.stack.substring(t.name.length+3+t.message.length).split(`
`);if(t.stack)return t.stack.split(`
`)}function Kz(t,e){return t.filter(function(r){return!~e.indexOf(r)})}var xde=FA.exports=function(t,e){if(!(t.stack&&t.name&&t.message))return console.error(new Error("stackless error")),t;var r=new Error(e),n=Kz(LA(r).slice(1),LA(t)).join(`
`);return r.__proto__=t,r.stack=r.name+": "+r.message+`
`+n+`
  `+t.stack,r}});var $A=_((Pde,qA)=>{"use strict";var Yz=bI(),Ty=_I(),Qz=RA(),va=ul(),MA=Ay();qA.exports=function(e,r,n){let i=Yz({message(){},request(s,a){if(!Array.isArray(s.args))return a(new Error(`invalid request, args should be array, was: ${JSON.stringify(s)}`));let c=s.name,l=s.args,u=!1,d=!1;l.push((f,p)=>{d=!0,u=!0,a(f,p)});try{e("async",c,l)}catch(f){if(u||d)throw MA(f,"no callback provided to muxrpc async funtion");a(f)}},stream(s){s.read=function(c,l){if(l)return s.write(null,l);let{name:u,type:d,args:f}=c,p,h;if(s.read=null,!va.isStream(d))return s.write(null,new Error(`unsupported stream type: ${d}`));try{h=e(d,u,f)}catch(v){p=v}let g=Ty[d==="source"?"sink":d==="sink"?"source":"duplex"](s);return va.pipeToStream(d,g,p?va.errorAsStream(d,p):h)}},close(s){if(i=null,o.ended=!0,!o.closed&&(o.closed=!0,n)){let a=n;n=null,a(s)}}}),o=Qz(Ty(i,()=>{}));return o=r?r(o):o,o.remoteCall=function(s,a,c,l){if(a==="emit")return i.message(c);if(!(va.isRequest(s)||va.isStream(s)))throw new Error(`unsupported type: ${JSON.stringify(s)}`);if(va.isRequest(s))return i.request({name:a,args:c},l);let u=i.stream(),d=Ty[s](u,l);return u.write({name:a,args:c,type:s}),d},o.isOpen=function(){return!i.ended},o.close=function(s,a){if(typeof s=="function"&&(a=s,s=!1),!i){a&&a();return}if(s){i.destroy(s),a&&a();return}return i.close(c=>{if(a)a(c);else if(c)throw MA(c,"no callback provided for muxrpc close")}),this},o.closed=!1,o}});var UA=_((Ide,jA)=>{"use strict";var Xz=Ay(),Jz=ul();function Ry(t,e,r,n){for(let i in e){let o=e[i],s=r?r.concat(i):[i];if(o&&typeof o=="object"){let a=o;t[i]=Ry({},a,s,n)}else{let a=o;t[i]=(...c)=>n(a,s,c)}}return t}function Zz(t){if(t)throw Xz(t,"callback not provided")}function e4(t,e,r,n){t=t||{};function i(o,s,a){let c=typeof a[a.length-1]=="function"?a.pop():o==="sync"||o==="async"?null:Zz;if(typeof c=="function"){let l;try{l=r(o,s,a,c)}catch(u){return Jz.errorAsStreamOrCb(o,u,c)}return l}else return new Promise((l,u)=>{r(o,s,a,(d,f)=>{d?u(d):l(f)})})}return n?i("async","manifest",[function(o,s){if(o)return n(o);Ry(t,s,null,i),n(null,s,t)}]):Ry(t,e,null,i),t}jA.exports=e4});var VA=_((Ade,HA)=>{"use strict";var Rf=ul();function BA(t){return Array.isArray(t)?t:t.split(".")}function t4(t){return t&&typeof t.pre=="function"&&typeof t.test=="function"&&typeof t.post=="function"}HA.exports=function(e){if(t4(e))return e;if(typeof e=="function")return{pre:e};let r=null,n={};function i(o){if(o.allow){r={};for(let s of o.allow)Rf.set(r,BA(s),!0)}else r=null;if(o.deny)for(let s of o.deny)Rf.set(n,BA(s),!0);else n={};return this}return e&&i(e),i.pre=o=>{if(o=Array.isArray(o)?o:[o],r&&!Rf.prefix(r,o))return new Error(`method:${o} is not in list of allowed methods`);if(n&&Rf.prefix(n,o))return new Error(`method:${o} is on list of disallowed methods`)},i.post=()=>{},i.test=o=>i.pre(o),i.get=()=>({allow:r,deny:n}),i}});var WA=_((Tde,GA)=>{"use strict";var r4=VA(),Dy=ul();GA.exports=function(e,r,n){n=r4(n);function i(s,a){return s===Dy.get(r,a)}function o(s,a,c){if(a==="emit")throw new Error("emit has been removed");if(s==="async"&&i("sync",a)){let l=c.pop(),u;try{u=Dy.get(e,a).apply(this,c)}catch(d){return l(d)}return l(null,u)}if(!i(s,a))throw new Error(`no ${s}:${a}`);return Dy.get(e,a).apply(this,c)}return function(a,c,l){let u=n.pre(c,l);if(u)throw u;return o.call(this,a,c,l)}}});var YA=_((Rde,KA)=>{"use strict";var n4=yI(),i4=require("events").EventEmitter,o4=$A(),s4=UA(),a4=WA();function zA(t,e,r,n,i,o,s){let a;typeof t=="function"&&(a=t,t={}),e=e||{},t=t||{};let c=new i4;o||(o=n4);let l,u={_emit(f,p){return c&&c._emit(f,p),u},id:n},d=o4(a4(r,e,i).bind(u),o,f=>{if(!c.closed&&(c.closed=!0,c.emit("closed"),l)){let p=l;l=null,p(f)}});if(s4(c,t,(f,p,h,m)=>{if(d.closed)throw new Error("stream is closed");return d.remoteCall(f,p,h,m)},a),c._emit=c.emit,s){Object.__defineGetter__.call(c,"id",()=>u.id),Object.__defineSetter__.call(c,"id",p=>{u.id=p});let f=!0;c.createStream=p=>{if(l=p,f)return f=!1,d;throw new Error("one stream per rpc")}}else c.stream=d;return c.closed=!1,c.close=function(f,p){return d.close(f,p),this},c}KA.exports=function(t,e,r){return arguments.length>3?zA.apply(this,arguments):function(n,i,o){return zA(t,e,n,o,i,r,!0)}}});var ZA=_((ai,JA)=>{var Dde=ly(),c4=by();function QA(t){t.destroy?t.destroy():console.error("warning, stream-to-pull-stream: \nthe wrapped node-stream does not implement `destroy`, \nthis may cause resource leaks.")}function XA(t,e,r){var n,i=!1,o;function s(){o||(o=!0,r&&r(n===!0?null:n))}function a(){i||(i=!0,l(),n?s():t(n=!0,s))}function c(u){l(),n||t(n=u,s)}function l(){e.on("finish",a),e.removeListener("close",a),e.removeListener("error",c)}e.on("close",a),e.on("finish",a),e.on("error",c),process.nextTick(function(){c4(function(u){t(null,function(d,f){if(n=n||d,d===!0)return e._isStdio?s():e.end();if(n=n||d)return QA(e),s(n);if(e._isStdio)e.write(f,function(){u()});else{var p=e.write(f);p===!1?e.once("drain",u):u()}})})})}function l4(t){var e=!1,r=!1,n;function i(){var o=t.read();if(o!==null&&n){var s=n;n=null,s(null,o)}}return t.on("readable",function(){r=!0,n&&i()}).on("end",function(){e=!0,n&&n(e)}).on("error",function(o){e=o,n&&n(e)}),function(o,s){n=s,e?s(e):r&&i()}}function Df(t){var e=[],r=[],n,i=!1,o;function s(){for(;(e.length||n)&&r.length;)r.shift()(e.length?null:n,e.shift());!e.length&&i&&(i=!1,t.resume())}return t.on("data",function(a){e.push(a),s(),e.length&&t.pause&&(i=!0,t.pause())}),t.on("end",function(){n=!0,s()}),t.on("close",function(){n=!0,s()}),t.on("error",function(a){n=a,s()}),function(a,c){if(!c)throw new Error("*must* provide cb");if(a){let u=function(){for(;r.length;)r.shift()(a);c(a)};var l=u;if(n)return u();t.once("close",u),QA(t)}else r.push(c),s()}}var u4=Df,Of=function(t,e){return function(r){return XA(r,t,e)}},Nf=function(t){return Df(t)};ai=JA.exports=function(t,e){return t.writable&&t.write?t.readable?function(r){return XA(r,t,e),Df(t)}:Of(t,e):Nf(t)};ai.sink=Of;ai.source=Nf;ai.read=u4;ai.read1=Df;ai.read2=l4;ai.duplex=function(t,e){return{source:Nf(t),sink:Of(t,e)}};ai.transform=function(t){return function(e){var r=Nf(t);return Of(t)(e),r}}});var tT=_((Ode,Lf)=>{var d4=require("stream");Lf.exports=Oy;Lf.exports.source=function(t){return Oy(null,t)};Lf.exports.sink=function(t){return Oy(t,null)};var eT=typeof setImmediate=="undefined"?process.nextTick:setImmediate;function Oy(t,e){t&&typeof t=="object"&&(e=t.source,t=t.sink);var r=[],n=[],i,o,s=new d4;s.writable=s.readable=!0,s.write=function(g){return r.length?r.shift()(null,g):n.push(g),r.length||(o=!0),!!r.length},s.end=function(){e?n.length?m():e(i=!0,r.length?r.shift():function(){}):r.length&&r.shift()(!0)},s.source=function(g,v){n.length?(v(null,n.shift()),n.length||s.emit("drain")):((i=i||g)?v(i):r.push(v),o&&(o=!1,s.emit("drain")))};var a;t&&(a=t(s.source)),a&&!e&&(e=a);var c=[],l=[],u=!1,d=!1,f=!1;if(s.sink=function(g){e=g,eT(m)},e){s.sink(e),s.paused=!0;var p=s.on.bind(s);s.on=(g,v)=>{var y=p(g,v);return g==="data"&&s.paused&&eT(s.resume.bind(s)),y};var h=s.pipe.bind(s);s.pipe=function(g,v){var y=h(g,v);return s.paused&&s.resume(),y}}function m(){if(d=!1,!(!e||f)){for(;c.length&&!s.paused;)s.emit("data",c.shift());if(!s.paused){if(u)return s.emit("end");f=!0,e(null,function g(v,y){f=!1,s.paused?(v===!0?u=v:v?s.emit("error",v):c.push(y),d=!0):v&&(i=v)!==!0?s.emit("error",v):(i=i||v)?s.emit("end"):(s.emit("data",y),f=!0,e(null,g))})}}}return s.pause=function(){return s.paused=!0,s},s.resume=function(){return s.paused=!1,m(),s},s.destroy=function(){!i&&e&&e(i=!0,function(){}),i=!0,r.length&&r.shift()(!0),s.emit("close")},s}});var Fy=_((Gde,cT)=>{"use strict";var sT=require("child_process"),C4=1024*1024,aT={exec(t,e){sT.exec(t,{maxBuffer:2*C4,windowsHide:!0},e)},spawn(t,e,r){return sT.spawn(t,e,r)},stripLine(t,e){let r=0;for(;e-- >0;){let n=t.indexOf(`
`,r);n>=0&&(r=n+1)}return r>0?t.substring(r):t},split(t,e){let r=t.trim().split(/\s+/);return r.length>e&&(r[e-1]=r.slice(e-1).join(" ")),r},extractColumns(t,e,r){let n=t.split(/(\r\n|\n|\r)/),i=[];return r||(r=Math.max.apply(null,e)+1),n.forEach(o=>{let s=aT.split(o,r),a=[];e.forEach(c=>{a.push(s[c]||"")}),i.push(a)}),i},parseTable(t){let e=t.split(/(\r\n|\n|\r)/).filter(o=>o.trim().length>0),r=e.shift().trim().match(/(\w+\s*)/g);if(!r)return[];let n=[],i=r.map((o,s)=>{let a=[];return s===0?(a[0]=0,a[1]=o.length):(a[0]=n[s-1][1],a[1]=a[0]+o.length),n.push(a),o.trim()});return n[n.length-1][1]=1/0,e.map(o=>{let s={};return n.forEach((a,c)=>{let l=i[c],u=o.substring(a[0],a[1]).trim();s[l]=u}),s})}};cT.exports=aT});var uT=_((Wde,lT)=>{"use strict";var b4=require("os"),$f=require("fs"),Ur=Fy(),E4=t=>new Promise((e,r)=>{$f.existsSync(t)?e():$f.mkdir(t,n=>{n?r(n):e()})}),My={darwin(t){return new Promise((e,r)=>{Ur.exec("netstat -anv -p TCP && netstat -anv -p UDP",function(n,i,o){if(n)r(n);else{if(n=o.toString().trim(),n){r(n);return}let s=Ur.stripLine(i.toString(),2),a=Ur.extractColumns(s,[0,3,8],10).filter(c=>!!String(c[0]).match(/^(udp|tcp)/)).find(c=>{let l=String(c[1]).match(/\.(\d+)$/);if(l&&l[1]===String(t))return!0});a&&a[2].length?e(parseInt(a[2],10)):r(new Error(`pid of port (${t}) not found`))}})})},freebsd:"darwin",sunos:"darwin",linux(t){return new Promise((e,r)=>{let n="netstat -tunlp";Ur.exec(n,function(i,o,s){if(i)r(i);else{let a=s.toString().trim();a&&console.warn(a);let c=Ur.stripLine(o.toString(),2),l=Ur.extractColumns(c,[3,6],7).find(u=>{let d=String(u[0]).match(/:(\d+)$/);if(d&&d[1]===String(t))return!0});if(l&&l[1]){let u=l[1].split("/",1)[0];u.length?e(parseInt(u,10)):r(new Error(`pid of port (${t}) not found`))}else r(new Error(`pid of port (${t}) not found`))}})})},win32(t){return new Promise((e,r)=>{Ur.exec("netstat -ano",function(n,i,o){if(n)r(n);else{if(n=o.toString().trim(),n){r(n);return}let s=Ur.stripLine(i.toString(),4),a=Ur.extractColumns(s,[1,4],5).find(c=>{let l=String(c[0]).match(/:(\d+)$/);if(l&&l[1]===String(t))return!0});a&&a[1].length&&parseInt(a[1],10)>0?e(parseInt(a[1],10)):r(new Error(`pid of port (${t}) not found`))}})})},android(t){return new Promise((e,r)=>{let n=b4.tmpdir()+"/.find-process",i=n+"/"+process.pid,o='netstat -tunp >> "'+i+'"';E4(n).then(()=>{Ur.exec(o,()=>{$f.readFile(i,"utf8",(s,a)=>{if($f.unlink(i,()=>{}),s)r(s);else{a=Ur.stripLine(a,2);let c=Ur.extractColumns(a,[3,6],7).find(l=>{let u=String(l[0]).match(/:(\d+)$/);if(u&&u[1]===String(t))return!0});if(c&&c[1]){let l=c[1].split("/",1)[0];l.length?e(parseInt(l,10)):r(new Error(`pid of port (${t}) not found`))}else r(new Error(`pid of port (${t}) not found`))}})})})})}};function _4(t){let e=process.platform;return new Promise((r,n)=>{if(!(e in My))return n(new Error(`platform ${e} is unsupported`));let i=My[e];typeof i=="string"&&(i=My[i]),i(t).then(r,n)})}lT.exports=_4});var hT=_((zde,pT)=>{"use strict";var jf=require("path"),Wi=Fy();function qy(t,e){return e?t&&t.match?t.match(e):!1:!0}function dT(t){let e=t.split(jf.sep),r=e[e.length-1];r&&(e[e.length-1]=r.split(" ")[0]);let n=[];for(let i of e){let o=i.indexOf(" -");if(o>=0){n.push(i.substring(0,o).trim());break}else if(i.endsWith(" ")){n.push(i.trim());break}n.push(i)}return n.join(jf.sep)}function fT(t){if(process.platform==="darwin"){let e=t.indexOf(".app/");if(e>=0)return jf.basename(t.substring(0,e))}return jf.basename(t)}var $y={darwin(t){return new Promise((e,r)=>{let n;"pid"in t?n=`ps -p ${t.pid} -ww -o pid,ppid,uid,gid,args`:n="ps ax -ww -o pid,ppid,uid,gid,args",Wi.exec(n,function(i,o,s){if(i)"pid"in t?e([]):r(i);else{if(i=s.toString().trim(),i){r(i);return}let a=Wi.stripLine(o.toString(),1),l=Wi.extractColumns(a,[0,1,2,3,4],5).filter(u=>u[0]&&t.pid?u[0]===String(t.pid):u[4]&&t.name?qy(u[4],t.name):!!u[0]).map(u=>{let d=String(u[4]),f=dT(d);return{pid:parseInt(u[0],10),ppid:parseInt(u[1],10),uid:parseInt(u[2],10),gid:parseInt(u[3],10),name:fT(f),bin:f,cmd:u[4]}});t.strict&&t.name&&(l=l.filter(u=>u.name===t.name)),e(l)}})})},linux:"darwin",sunos:"darwin",freebsd:"darwin",win32(t){return new Promise((e,r)=>{let n="WMIC path win32_process get Name,Processid,ParentProcessId,Commandline,ExecutablePath",i=[],o=Wi.spawn("cmd",["/c",n],{detached:!1,windowsHide:!0});o.stdout.on("data",s=>{i.push(s.toString())}),o.on("close",s=>{if(s!==0)return r(new Error("Command '"+n+"' terminated with code: "+s));let a=Wi.parseTable(i.join(`
`)).filter(c=>"pid"in t?c.ProcessId===String(t.pid):t.name?t.strict?c.Name===t.name||c.Name.endsWith(".exe")&&c.Name.slice(0,-4)===t.name:qy(c.CommandLine||c.Name,t.name):!0).map(c=>({pid:parseInt(c.ProcessId,10),ppid:parseInt(c.ParentProcessId,10),bin:c.ExecutablePath,name:c.Name,cmd:c.CommandLine}));e(a)})})},android(t){return new Promise((e,r)=>{let n="ps";Wi.exec(n,function(i,o,s){if(i)"pid"in t?e([]):r(i);else{if(i=s.toString().trim(),i){r(i);return}let a=Wi.stripLine(o.toString(),1),l=Wi.extractColumns(a,[0,3],4).filter(u=>u[0]&&t.pid?u[0]===String(t.pid):u[1]&&t.name?qy(u[1],t.name):!!u[0]).map(u=>{let d=String(u[1]),f=dT(d);return{pid:parseInt(u[0],10),name:fT(f),bin:f,cmd:d}});t.strict&&t.name&&(l=l.filter(u=>u.name===t.name)),e(l)}})})}};function S4(t){let e=process.platform;return new Promise((r,n)=>{if(!(e in $y))return n(new Error(`platform ${e} is unsupported`));let i=$y[e];typeof i=="string"&&(i=$y[i]),i(t).then(r,n)})}pT.exports=S4});var vT=_((Kde,gT)=>{"use strict";var x4=uT(),mT=hT(),jy={port(t,e){return x4(t,e).then(r=>jy.pid(r,e),()=>[])},pid(t,e){return mT({pid:t,strict:e})},name(t,e){return mT({name:t,strict:e})}};function k4(t,e,r){return new Promise((n,i)=>{t in jy?t==="pid"&&typeof e!="number"?i(new Error("pid must be a number")):t==="port"&&typeof e!="number"?i(new Error("port must be a number")):jy[t](e,r).then(n,i):i(new Error(`do not support find by "${t}"`))})}gT.exports=k4});var wT=_((Yde,yT)=>{"use strict";yT.exports=vT()});var _l=_((Ipe,QR)=>{var z9="2.0.0",K9=256,Y9=Number.MAX_SAFE_INTEGER||9007199254740991,Q9=16;QR.exports={SEMVER_SPEC_VERSION:z9,MAX_LENGTH:K9,MAX_SAFE_INTEGER:Y9,MAX_SAFE_COMPONENT_LENGTH:Q9}});var Sl=_((Ape,XR)=>{var X9=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};XR.exports=X9});var os=_((ro,JR)=>{var{MAX_SAFE_COMPONENT_LENGTH:Sw}=_l(),J9=Sl();ro=JR.exports={};var Z9=ro.re=[],oe=ro.src=[],se=ro.t={},e8=0,ve=(t,e,r)=>{let n=e8++;J9(n,e),se[t]=n,oe[n]=e,Z9[n]=new RegExp(e,r?"g":void 0)};ve("NUMERICIDENTIFIER","0|[1-9]\\d*");ve("NUMERICIDENTIFIERLOOSE","[0-9]+");ve("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");ve("MAINVERSION",`(${oe[se.NUMERICIDENTIFIER]})\\.(${oe[se.NUMERICIDENTIFIER]})\\.(${oe[se.NUMERICIDENTIFIER]})`);ve("MAINVERSIONLOOSE",`(${oe[se.NUMERICIDENTIFIERLOOSE]})\\.(${oe[se.NUMERICIDENTIFIERLOOSE]})\\.(${oe[se.NUMERICIDENTIFIERLOOSE]})`);ve("PRERELEASEIDENTIFIER",`(?:${oe[se.NUMERICIDENTIFIER]}|${oe[se.NONNUMERICIDENTIFIER]})`);ve("PRERELEASEIDENTIFIERLOOSE",`(?:${oe[se.NUMERICIDENTIFIERLOOSE]}|${oe[se.NONNUMERICIDENTIFIER]})`);ve("PRERELEASE",`(?:-(${oe[se.PRERELEASEIDENTIFIER]}(?:\\.${oe[se.PRERELEASEIDENTIFIER]})*))`);ve("PRERELEASELOOSE",`(?:-?(${oe[se.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${oe[se.PRERELEASEIDENTIFIERLOOSE]})*))`);ve("BUILDIDENTIFIER","[0-9A-Za-z-]+");ve("BUILD",`(?:\\+(${oe[se.BUILDIDENTIFIER]}(?:\\.${oe[se.BUILDIDENTIFIER]})*))`);ve("FULLPLAIN",`v?${oe[se.MAINVERSION]}${oe[se.PRERELEASE]}?${oe[se.BUILD]}?`);ve("FULL",`^${oe[se.FULLPLAIN]}$`);ve("LOOSEPLAIN",`[v=\\s]*${oe[se.MAINVERSIONLOOSE]}${oe[se.PRERELEASELOOSE]}?${oe[se.BUILD]}?`);ve("LOOSE",`^${oe[se.LOOSEPLAIN]}$`);ve("GTLT","((?:<|>)?=?)");ve("XRANGEIDENTIFIERLOOSE",`${oe[se.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);ve("XRANGEIDENTIFIER",`${oe[se.NUMERICIDENTIFIER]}|x|X|\\*`);ve("XRANGEPLAIN",`[v=\\s]*(${oe[se.XRANGEIDENTIFIER]})(?:\\.(${oe[se.XRANGEIDENTIFIER]})(?:\\.(${oe[se.XRANGEIDENTIFIER]})(?:${oe[se.PRERELEASE]})?${oe[se.BUILD]}?)?)?`);ve("XRANGEPLAINLOOSE",`[v=\\s]*(${oe[se.XRANGEIDENTIFIERLOOSE]})(?:\\.(${oe[se.XRANGEIDENTIFIERLOOSE]})(?:\\.(${oe[se.XRANGEIDENTIFIERLOOSE]})(?:${oe[se.PRERELEASELOOSE]})?${oe[se.BUILD]}?)?)?`);ve("XRANGE",`^${oe[se.GTLT]}\\s*${oe[se.XRANGEPLAIN]}$`);ve("XRANGELOOSE",`^${oe[se.GTLT]}\\s*${oe[se.XRANGEPLAINLOOSE]}$`);ve("COERCE",`(^|[^\\d])(\\d{1,${Sw}})(?:\\.(\\d{1,${Sw}}))?(?:\\.(\\d{1,${Sw}}))?(?:$|[^\\d])`);ve("COERCERTL",oe[se.COERCE],!0);ve("LONETILDE","(?:~>?)");ve("TILDETRIM",`(\\s*)${oe[se.LONETILDE]}\\s+`,!0);ro.tildeTrimReplace="$1~";ve("TILDE",`^${oe[se.LONETILDE]}${oe[se.XRANGEPLAIN]}$`);ve("TILDELOOSE",`^${oe[se.LONETILDE]}${oe[se.XRANGEPLAINLOOSE]}$`);ve("LONECARET","(?:\\^)");ve("CARETTRIM",`(\\s*)${oe[se.LONECARET]}\\s+`,!0);ro.caretTrimReplace="$1^";ve("CARET",`^${oe[se.LONECARET]}${oe[se.XRANGEPLAIN]}$`);ve("CARETLOOSE",`^${oe[se.LONECARET]}${oe[se.XRANGEPLAINLOOSE]}$`);ve("COMPARATORLOOSE",`^${oe[se.GTLT]}\\s*(${oe[se.LOOSEPLAIN]})$|^$`);ve("COMPARATOR",`^${oe[se.GTLT]}\\s*(${oe[se.FULLPLAIN]})$|^$`);ve("COMPARATORTRIM",`(\\s*)${oe[se.GTLT]}\\s*(${oe[se.LOOSEPLAIN]}|${oe[se.XRANGEPLAIN]})`,!0);ro.comparatorTrimReplace="$1$2$3";ve("HYPHENRANGE",`^\\s*(${oe[se.XRANGEPLAIN]})\\s+-\\s+(${oe[se.XRANGEPLAIN]})\\s*$`);ve("HYPHENRANGELOOSE",`^\\s*(${oe[se.XRANGEPLAINLOOSE]})\\s+-\\s+(${oe[se.XRANGEPLAINLOOSE]})\\s*$`);ve("STAR","(<|>)?=?\\s*\\*");ve("GTE0","^\\s*>=\\s*0.0.0\\s*$");ve("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")});var xl=_((Tpe,ZR)=>{var t8=["includePrerelease","loose","rtl"],r8=t=>t?typeof t!="object"?{loose:!0}:t8.filter(e=>t[e]).reduce((e,r)=>(e[r]=!0,e),{}):{};ZR.exports=r8});var fp=_((Rpe,rD)=>{var eD=/^[0-9]+$/,tD=(t,e)=>{let r=eD.test(t),n=eD.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},n8=(t,e)=>tD(e,t);rD.exports={compareIdentifiers:tD,rcompareIdentifiers:n8}});var Vt=_((Dpe,sD)=>{var pp=Sl(),{MAX_LENGTH:nD,MAX_SAFE_INTEGER:hp}=_l(),{re:iD,t:oD}=os(),i8=xl(),{compareIdentifiers:kl}=fp(),Hr=class{constructor(e,r){if(r=i8(r),e instanceof Hr){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>nD)throw new TypeError(`version is longer than ${nD} characters`);pp("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?iD[oD.LOOSE]:iD[oD.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>hp||this.major<0)throw new TypeError("Invalid major version");if(this.minor>hp||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>hp||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<hp)return o}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(pp("SemVer.compare",this.version,this.options,e),!(e instanceof Hr)){if(typeof e=="string"&&e===this.version)return 0;e=new Hr(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof Hr||(e=new Hr(e,this.options)),kl(this.major,e.major)||kl(this.minor,e.minor)||kl(this.patch,e.patch)}comparePre(e){if(e instanceof Hr||(e=new Hr(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=e.prerelease[r];if(pp("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return kl(n,i)}while(++r)}compareBuild(e){e instanceof Hr||(e=new Hr(e,this.options));let r=0;do{let n=this.build[r],i=e.build[r];if(pp("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return kl(n,i)}while(++r)}inc(e,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r),this.inc("pre",r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r),this.inc("pre",r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let n=this.prerelease.length;for(;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}r&&(this.prerelease[0]===r?isNaN(this.prerelease[1])&&(this.prerelease=[r,0]):this.prerelease=[r,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}};sD.exports=Hr});var ss=_((Ope,uD)=>{var{MAX_LENGTH:o8}=_l(),{re:aD,t:cD}=os(),lD=Vt(),s8=xl(),a8=(t,e)=>{if(e=s8(e),t instanceof lD)return t;if(typeof t!="string"||t.length>o8||!(e.loose?aD[cD.LOOSE]:aD[cD.FULL]).test(t))return null;try{return new lD(t,e)}catch(n){return null}};uD.exports=a8});var fD=_((Npe,dD)=>{var c8=ss(),l8=(t,e)=>{let r=c8(t,e);return r?r.version:null};dD.exports=l8});var hD=_((Lpe,pD)=>{var u8=ss(),d8=(t,e)=>{let r=u8(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};pD.exports=d8});var gD=_((Fpe,mD)=>{var f8=Vt(),p8=(t,e,r,n)=>{typeof r=="string"&&(n=r,r=void 0);try{return new f8(t,r).inc(e,n).version}catch(i){return null}};mD.exports=p8});var Vr=_((Mpe,yD)=>{var vD=Vt(),h8=(t,e,r)=>new vD(t,r).compare(new vD(e,r));yD.exports=h8});var mp=_((qpe,wD)=>{var m8=Vr(),g8=(t,e,r)=>m8(t,e,r)===0;wD.exports=g8});var ED=_(($pe,bD)=>{var CD=ss(),v8=mp(),y8=(t,e)=>{if(v8(t,e))return null;{let r=CD(t),n=CD(e),i=r.prerelease.length||n.prerelease.length,o=i?"pre":"",s=i?"prerelease":"";for(let a in r)if((a==="major"||a==="minor"||a==="patch")&&r[a]!==n[a])return o+a;return s}};bD.exports=y8});var SD=_((jpe,_D)=>{var w8=Vt(),C8=(t,e)=>new w8(t,e).major;_D.exports=C8});var kD=_((Upe,xD)=>{var b8=Vt(),E8=(t,e)=>new b8(t,e).minor;xD.exports=E8});var ID=_((Bpe,PD)=>{var _8=Vt(),S8=(t,e)=>new _8(t,e).patch;PD.exports=S8});var TD=_((Hpe,AD)=>{var x8=ss(),k8=(t,e)=>{let r=x8(t,e);return r&&r.prerelease.length?r.prerelease:null};AD.exports=k8});var DD=_((Vpe,RD)=>{var P8=Vr(),I8=(t,e,r)=>P8(e,t,r);RD.exports=I8});var ND=_((Gpe,OD)=>{var A8=Vr(),T8=(t,e)=>A8(t,e,!0);OD.exports=T8});var gp=_((Wpe,FD)=>{var LD=Vt(),R8=(t,e,r)=>{let n=new LD(t,r),i=new LD(e,r);return n.compare(i)||n.compareBuild(i)};FD.exports=R8});var qD=_((zpe,MD)=>{var D8=gp(),O8=(t,e)=>t.sort((r,n)=>D8(r,n,e));MD.exports=O8});var jD=_((Kpe,$D)=>{var N8=gp(),L8=(t,e)=>t.sort((r,n)=>N8(n,r,e));$D.exports=L8});var Pl=_((Ype,UD)=>{var F8=Vr(),M8=(t,e,r)=>F8(t,e,r)>0;UD.exports=M8});var vp=_((Qpe,BD)=>{var q8=Vr(),$8=(t,e,r)=>q8(t,e,r)<0;BD.exports=$8});var xw=_((Xpe,HD)=>{var j8=Vr(),U8=(t,e,r)=>j8(t,e,r)!==0;HD.exports=U8});var yp=_((Jpe,VD)=>{var B8=Vr(),H8=(t,e,r)=>B8(t,e,r)>=0;VD.exports=H8});var wp=_((Zpe,GD)=>{var V8=Vr(),G8=(t,e,r)=>V8(t,e,r)<=0;GD.exports=G8});var kw=_((ehe,WD)=>{var W8=mp(),z8=xw(),K8=Pl(),Y8=yp(),Q8=vp(),X8=wp(),J8=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return W8(t,r,n);case"!=":return z8(t,r,n);case">":return K8(t,r,n);case">=":return Y8(t,r,n);case"<":return Q8(t,r,n);case"<=":return X8(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};WD.exports=J8});var KD=_((the,zD)=>{var Z8=Vt(),e5=ss(),{re:Cp,t:bp}=os(),t5=(t,e)=>{if(t instanceof Z8)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(Cp[bp.COERCE]);else{let n;for(;(n=Cp[bp.COERCERTL].exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),Cp[bp.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;Cp[bp.COERCERTL].lastIndex=-1}return r===null?null:e5(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,e)};zD.exports=t5});var tO=_((rhe,eO)=>{"use strict";var r5=Ic(),as=Symbol("max"),hi=Symbol("length"),Aa=Symbol("lengthCalculator"),Il=Symbol("allowStale"),cs=Symbol("maxAge"),mi=Symbol("dispose"),YD=Symbol("noDisposeOnSet"),St=Symbol("lruList"),hn=Symbol("cache"),QD=Symbol("updateAgeOnGet"),Pw=()=>1,XD=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let r=this[as]=e.max||1/0,n=e.length||Pw;if(this[Aa]=typeof n!="function"?Pw:n,this[Il]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[cs]=e.maxAge||0,this[mi]=e.dispose,this[YD]=e.noDisposeOnSet||!1,this[QD]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[as]=e||1/0,Al(this)}get max(){return this[as]}set allowStale(e){this[Il]=!!e}get allowStale(){return this[Il]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[cs]=e,Al(this)}get maxAge(){return this[cs]}set lengthCalculator(e){typeof e!="function"&&(e=Pw),e!==this[Aa]&&(this[Aa]=e,this[hi]=0,this[St].forEach(r=>{r.length=this[Aa](r.value,r.key),this[hi]+=r.length})),Al(this)}get lengthCalculator(){return this[Aa]}get length(){return this[hi]}get itemCount(){return this[St].length}rforEach(e,r){r=r||this;for(let n=this[St].tail;n!==null;){let i=n.prev;ZD(this,e,n,r),n=i}}forEach(e,r){r=r||this;for(let n=this[St].head;n!==null;){let i=n.next;ZD(this,e,n,r),n=i}}keys(){return this[St].toArray().map(e=>e.key)}values(){return this[St].toArray().map(e=>e.value)}reset(){this[mi]&&this[St]&&this[St].length&&this[St].forEach(e=>this[mi](e.key,e.value)),this[hn]=new Map,this[St]=new r5,this[hi]=0}dump(){return this[St].map(e=>Ep(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[St]}set(e,r,n){if(n=n||this[cs],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let i=n?Date.now():0,o=this[Aa](r,e);if(this[hn].has(e)){if(o>this[as])return Ta(this,this[hn].get(e)),!1;let c=this[hn].get(e).value;return this[mi]&&(this[YD]||this[mi](e,c.value)),c.now=i,c.maxAge=n,c.value=r,this[hi]+=o-c.length,c.length=o,this.get(e),Al(this),!0}let s=new JD(e,r,o,i,n);return s.length>this[as]?(this[mi]&&this[mi](e,r),!1):(this[hi]+=s.length,this[St].unshift(s),this[hn].set(e,this[St].head),Al(this),!0)}has(e){if(!this[hn].has(e))return!1;let r=this[hn].get(e).value;return!Ep(this,r)}get(e){return Iw(this,e,!0)}peek(e){return Iw(this,e,!1)}pop(){let e=this[St].tail;return e?(Ta(this,e),e.value):null}del(e){Ta(this,this[hn].get(e))}load(e){this.reset();let r=Date.now();for(let n=e.length-1;n>=0;n--){let i=e[n],o=i.e||0;if(o===0)this.set(i.k,i.v);else{let s=o-r;s>0&&this.set(i.k,i.v,s)}}}prune(){this[hn].forEach((e,r)=>Iw(this,r,!1))}},Iw=(t,e,r)=>{let n=t[hn].get(e);if(n){let i=n.value;if(Ep(t,i)){if(Ta(t,n),!t[Il])return}else r&&(t[QD]&&(n.value.now=Date.now()),t[St].unshiftNode(n));return i.value}},Ep=(t,e)=>{if(!e||!e.maxAge&&!t[cs])return!1;let r=Date.now()-e.now;return e.maxAge?r>e.maxAge:t[cs]&&r>t[cs]},Al=t=>{if(t[hi]>t[as])for(let e=t[St].tail;t[hi]>t[as]&&e!==null;){let r=e.prev;Ta(t,e),e=r}},Ta=(t,e)=>{if(e){let r=e.value;t[mi]&&t[mi](r.key,r.value),t[hi]-=r.length,t[hn].delete(r.key),t[St].removeNode(e)}},JD=class{constructor(e,r,n,i,o){this.key=e,this.value=r,this.length=n,this.now=i,this.maxAge=o||0}},ZD=(t,e,r,n)=>{let i=r.value;Ep(t,i)&&(Ta(t,r),t[Il]||(i=void 0)),i&&e.call(n,i.value,i.key,t)};eO.exports=XD});var Gr=_((nhe,oO)=>{var Ra=class{constructor(e,r){if(r=i5(r),e instanceof Ra)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new Ra(e.raw,r);if(e instanceof Aw)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!nO(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&l5(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();let n=`parseRange:${Object.keys(this.options).join(",")}:${e}`,i=rO.get(n);if(i)return i;let o=this.options.loose,s=o?Gt[Rt.HYPHENRANGELOOSE]:Gt[Rt.HYPHENRANGE];e=e.replace(s,w5(this.options.includePrerelease)),at("hyphen replace",e),e=e.replace(Gt[Rt.COMPARATORTRIM],s5),at("comparator trim",e,Gt[Rt.COMPARATORTRIM]),e=e.replace(Gt[Rt.TILDETRIM],a5),e=e.replace(Gt[Rt.CARETTRIM],c5),e=e.split(/\s+/).join(" ");let a=o?Gt[Rt.COMPARATORLOOSE]:Gt[Rt.COMPARATOR],c=e.split(" ").map(f=>u5(f,this.options)).join(" ").split(/\s+/).map(f=>y5(f,this.options)).filter(this.options.loose?f=>!!f.match(a):()=>!0).map(f=>new Aw(f,this.options)),l=c.length,u=new Map;for(let f of c){if(nO(f))return[f];u.set(f.value,f)}u.size>1&&u.has("")&&u.delete("");let d=[...u.values()];return rO.set(n,d),d}intersects(e,r){if(!(e instanceof Ra))throw new TypeError("a Range is required");return this.set.some(n=>iO(n,r)&&e.set.some(i=>iO(i,r)&&n.every(o=>i.every(s=>o.intersects(s,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new o5(e,this.options)}catch(r){return!1}for(let r=0;r<this.set.length;r++)if(C5(this.set[r],e,this.options))return!0;return!1}};oO.exports=Ra;var n5=tO(),rO=new n5({max:1e3}),i5=xl(),Aw=Tl(),at=Sl(),o5=Vt(),{re:Gt,t:Rt,comparatorTrimReplace:s5,tildeTrimReplace:a5,caretTrimReplace:c5}=os(),nO=t=>t.value==="<0.0.0-0",l5=t=>t.value==="",iO=(t,e)=>{let r=!0,n=t.slice(),i=n.pop();for(;r&&n.length;)r=n.every(o=>i.intersects(o,e)),i=n.pop();return r},u5=(t,e)=>(at("comp",t,e),t=p5(t,e),at("caret",t),t=d5(t,e),at("tildes",t),t=m5(t,e),at("xrange",t),t=v5(t,e),at("stars",t),t),Zt=t=>!t||t.toLowerCase()==="x"||t==="*",d5=(t,e)=>t.trim().split(/\s+/).map(r=>f5(r,e)).join(" "),f5=(t,e)=>{let r=e.loose?Gt[Rt.TILDELOOSE]:Gt[Rt.TILDE];return t.replace(r,(n,i,o,s,a)=>{at("tilde",t,n,i,o,s,a);let c;return Zt(i)?c="":Zt(o)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:Zt(s)?c=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:a?(at("replaceTilde pr",a),c=`>=${i}.${o}.${s}-${a} <${i}.${+o+1}.0-0`):c=`>=${i}.${o}.${s} <${i}.${+o+1}.0-0`,at("tilde return",c),c})},p5=(t,e)=>t.trim().split(/\s+/).map(r=>h5(r,e)).join(" "),h5=(t,e)=>{at("caret",t,e);let r=e.loose?Gt[Rt.CARETLOOSE]:Gt[Rt.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(i,o,s,a,c)=>{at("caret",t,i,o,s,a,c);let l;return Zt(o)?l="":Zt(s)?l=`>=${o}.0.0${n} <${+o+1}.0.0-0`:Zt(a)?o==="0"?l=`>=${o}.${s}.0${n} <${o}.${+s+1}.0-0`:l=`>=${o}.${s}.0${n} <${+o+1}.0.0-0`:c?(at("replaceCaret pr",c),o==="0"?s==="0"?l=`>=${o}.${s}.${a}-${c} <${o}.${s}.${+a+1}-0`:l=`>=${o}.${s}.${a}-${c} <${o}.${+s+1}.0-0`:l=`>=${o}.${s}.${a}-${c} <${+o+1}.0.0-0`):(at("no pr"),o==="0"?s==="0"?l=`>=${o}.${s}.${a}${n} <${o}.${s}.${+a+1}-0`:l=`>=${o}.${s}.${a}${n} <${o}.${+s+1}.0-0`:l=`>=${o}.${s}.${a} <${+o+1}.0.0-0`),at("caret return",l),l})},m5=(t,e)=>(at("replaceXRanges",t,e),t.split(/\s+/).map(r=>g5(r,e)).join(" ")),g5=(t,e)=>{t=t.trim();let r=e.loose?Gt[Rt.XRANGELOOSE]:Gt[Rt.XRANGE];return t.replace(r,(n,i,o,s,a,c)=>{at("xRange",t,n,i,o,s,a,c);let l=Zt(o),u=l||Zt(s),d=u||Zt(a),f=d;return i==="="&&f&&(i=""),c=e.includePrerelease?"-0":"",l?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&f?(u&&(s=0),a=0,i===">"?(i=">=",u?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",u?o=+o+1:s=+s+1),i==="<"&&(c="-0"),n=`${i+o}.${s}.${a}${c}`):u?n=`>=${o}.0.0${c} <${+o+1}.0.0-0`:d&&(n=`>=${o}.${s}.0${c} <${o}.${+s+1}.0-0`),at("xRange return",n),n})},v5=(t,e)=>(at("replaceStars",t,e),t.trim().replace(Gt[Rt.STAR],"")),y5=(t,e)=>(at("replaceGTE0",t,e),t.trim().replace(Gt[e.includePrerelease?Rt.GTE0PRE:Rt.GTE0],"")),w5=t=>(e,r,n,i,o,s,a,c,l,u,d,f,p)=>(Zt(n)?r="":Zt(i)?r=`>=${n}.0.0${t?"-0":""}`:Zt(o)?r=`>=${n}.${i}.0${t?"-0":""}`:s?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,Zt(l)?c="":Zt(u)?c=`<${+l+1}.0.0-0`:Zt(d)?c=`<${l}.${+u+1}.0-0`:f?c=`<=${l}.${u}.${d}-${f}`:t?c=`<${l}.${u}.${+d+1}-0`:c=`<=${c}`,`${r} ${c}`.trim()),C5=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(at(t[n].semver),t[n].semver!==Aw.ANY&&t[n].semver.prerelease.length>0){let i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var Tl=_((ihe,uO)=>{var Rl=Symbol("SemVer ANY"),Dl=class{static get ANY(){return Rl}constructor(e,r){if(r=b5(r),e instanceof Dl){if(e.loose===!!r.loose)return e;e=e.value}Rw("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===Rl?this.value="":this.value=this.operator+this.semver.version,Rw("comp",this)}parse(e){let r=this.options.loose?sO[aO.COMPARATORLOOSE]:sO[aO.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new cO(n[2],this.options.loose):this.semver=Rl}toString(){return this.value}test(e){if(Rw("Comparator.test",e,this.options.loose),this.semver===Rl||e===Rl)return!0;if(typeof e=="string")try{e=new cO(e,this.options)}catch(r){return!1}return Tw(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof Dl))throw new TypeError("a Comparator is required");if((!r||typeof r!="object")&&(r={loose:!!r,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new lO(e.value,r).test(this.value);if(e.operator==="")return e.value===""?!0:new lO(this.value,r).test(e.semver);let n=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),o=this.semver.version===e.semver.version,s=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),a=Tw(this.semver,"<",e.semver,r)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),c=Tw(this.semver,">",e.semver,r)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return n||i||o&&s||a||c}};uO.exports=Dl;var b5=xl(),{re:sO,t:aO}=os(),Tw=kw(),Rw=Sl(),cO=Vt(),lO=Gr()});var Ol=_((ohe,dO)=>{var E5=Gr(),_5=(t,e,r)=>{try{e=new E5(e,r)}catch(n){return!1}return e.test(t)};dO.exports=_5});var pO=_((she,fO)=>{var S5=Gr(),x5=(t,e)=>new S5(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));fO.exports=x5});var mO=_((ahe,hO)=>{var k5=Vt(),P5=Gr(),I5=(t,e,r)=>{let n=null,i=null,o=null;try{o=new P5(e,r)}catch(s){return null}return t.forEach(s=>{o.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new k5(n,r))}),n};hO.exports=I5});var vO=_((che,gO)=>{var A5=Vt(),T5=Gr(),R5=(t,e,r)=>{let n=null,i=null,o=null;try{o=new T5(e,r)}catch(s){return null}return t.forEach(s=>{o.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new A5(n,r))}),n};gO.exports=R5});var CO=_((lhe,wO)=>{var Dw=Vt(),D5=Gr(),yO=Pl(),O5=(t,e)=>{t=new D5(t,e);let r=new Dw("0.0.0");if(t.test(r)||(r=new Dw("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let i=t.set[n],o=null;i.forEach(s=>{let a=new Dw(s.semver.version);switch(s.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!o||yO(a,o))&&(o=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),o&&(!r||yO(r,o))&&(r=o)}return r&&t.test(r)?r:null};wO.exports=O5});var EO=_((uhe,bO)=>{var N5=Gr(),L5=(t,e)=>{try{return new N5(t,e).range||"*"}catch(r){return null}};bO.exports=L5});var _p=_((dhe,kO)=>{var F5=Vt(),_O=Tl(),{ANY:M5}=_O,q5=Gr(),$5=Ol(),SO=Pl(),xO=vp(),j5=wp(),U5=yp(),B5=(t,e,r,n)=>{t=new F5(t,n),e=new q5(e,n);let i,o,s,a,c;switch(r){case">":i=SO,o=j5,s=xO,a=">",c=">=";break;case"<":i=xO,o=U5,s=SO,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if($5(t,e,n))return!1;for(let l=0;l<e.set.length;++l){let u=e.set[l],d=null,f=null;if(u.forEach(p=>{p.semver===M5&&(p=new _O(">=0.0.0")),d=d||p,f=f||p,i(p.semver,d.semver,n)?d=p:s(p.semver,f.semver,n)&&(f=p)}),d.operator===a||d.operator===c||(!f.operator||f.operator===a)&&o(t,f.semver))return!1;if(f.operator===c&&s(t,f.semver))return!1}return!0};kO.exports=B5});var IO=_((fhe,PO)=>{var H5=_p(),V5=(t,e,r)=>H5(t,e,">",r);PO.exports=V5});var TO=_((phe,AO)=>{var G5=_p(),W5=(t,e,r)=>G5(t,e,"<",r);AO.exports=W5});var OO=_((hhe,DO)=>{var RO=Gr(),z5=(t,e,r)=>(t=new RO(t,r),e=new RO(e,r),t.intersects(e));DO.exports=z5});var LO=_((mhe,NO)=>{var K5=Ol(),Y5=Vr();NO.exports=(t,e,r)=>{let n=[],i=null,o=null,s=t.sort((u,d)=>Y5(u,d,r));for(let u of s)K5(u,e,r)?(o=u,i||(i=u)):(o&&n.push([i,o]),o=null,i=null);i&&n.push([i,null]);let a=[];for(let[u,d]of n)u===d?a.push(u):!d&&u===s[0]?a.push("*"):d?u===s[0]?a.push(`<=${d}`):a.push(`${u} - ${d}`):a.push(`>=${u}`);let c=a.join(" || "),l=typeof e.raw=="string"?e.raw:String(e);return c.length<l.length?c:e}});var jO=_((ghe,$O)=>{var FO=Gr(),Sp=Tl(),{ANY:Ow}=Sp,Nl=Ol(),Nw=Vr(),Q5=(t,e,r={})=>{if(t===e)return!0;t=new FO(t,r),e=new FO(e,r);let n=!1;e:for(let i of t.set){for(let o of e.set){let s=X5(i,o,r);if(n=n||s!==null,s)continue e}if(n)return!1}return!0},X5=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===Ow){if(e.length===1&&e[0].semver===Ow)return!0;r.includePrerelease?t=[new Sp(">=0.0.0-0")]:t=[new Sp(">=0.0.0")]}if(e.length===1&&e[0].semver===Ow){if(r.includePrerelease)return!0;e=[new Sp(">=0.0.0")]}let n=new Set,i,o;for(let p of t)p.operator===">"||p.operator===">="?i=MO(i,p,r):p.operator==="<"||p.operator==="<="?o=qO(o,p,r):n.add(p.semver);if(n.size>1)return null;let s;if(i&&o){if(s=Nw(i.semver,o.semver,r),s>0)return null;if(s===0&&(i.operator!==">="||o.operator!=="<="))return null}for(let p of n){if(i&&!Nl(p,String(i),r)||o&&!Nl(p,String(o),r))return null;for(let h of e)if(!Nl(p,String(h),r))return!1;return!0}let a,c,l,u,d=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1,f=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;d&&d.prerelease.length===1&&o.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let p of e){if(u=u||p.operator===">"||p.operator===">=",l=l||p.operator==="<"||p.operator==="<=",i){if(f&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===f.major&&p.semver.minor===f.minor&&p.semver.patch===f.patch&&(f=!1),p.operator===">"||p.operator===">="){if(a=MO(i,p,r),a===p&&a!==i)return!1}else if(i.operator===">="&&!Nl(i.semver,String(p),r))return!1}if(o){if(d&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===d.major&&p.semver.minor===d.minor&&p.semver.patch===d.patch&&(d=!1),p.operator==="<"||p.operator==="<="){if(c=qO(o,p,r),c===p&&c!==o)return!1}else if(o.operator==="<="&&!Nl(o.semver,String(p),r))return!1}if(!p.operator&&(o||i)&&s!==0)return!1}return!(i&&l&&!o&&s!==0||o&&u&&!i&&s!==0||f||d)},MO=(t,e,r)=>{if(!t)return e;let n=Nw(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},qO=(t,e,r)=>{if(!t)return e;let n=Nw(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};$O.exports=Q5});var BO=_((vhe,UO)=>{var Lw=os();UO.exports={re:Lw.re,src:Lw.src,tokens:Lw.t,SEMVER_SPEC_VERSION:_l().SEMVER_SPEC_VERSION,SemVer:Vt(),compareIdentifiers:fp().compareIdentifiers,rcompareIdentifiers:fp().rcompareIdentifiers,parse:ss(),valid:fD(),clean:hD(),inc:gD(),diff:ED(),major:SD(),minor:kD(),patch:ID(),prerelease:TD(),compare:Vr(),rcompare:DD(),compareLoose:ND(),compareBuild:gp(),sort:qD(),rsort:jD(),gt:Pl(),lt:vp(),eq:mp(),neq:xw(),gte:yp(),lte:wp(),cmp:kw(),coerce:KD(),Comparator:Tl(),Range:Gr(),satisfies:Ol(),toComparators:pO(),maxSatisfying:mO(),minSatisfying:vO(),minVersion:CO(),validRange:EO(),outside:_p(),gtr:IO(),ltr:TO(),intersects:OO(),simplifyRange:LO(),subset:jO()}});var NL=_(OL=>{var $Y=Object.create,Vl=Object.defineProperty,jY=Object.getOwnPropertyDescriptor,UY=Object.getOwnPropertyNames,UN=Object.getOwnPropertySymbols,BY=Object.getPrototypeOf,BN=Object.prototype.hasOwnProperty,HY=Object.prototype.propertyIsEnumerable,HN=(t,e,r)=>e in t?Vl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ha=(t,e)=>{for(var r in e||(e={}))BN.call(e,r)&&HN(t,r,e[r]);if(UN)for(var r of UN(e))HY.call(e,r)&&HN(t,r,e[r]);return t},VN=t=>Vl(t,"__esModule",{value:!0}),I=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),VY=(t,e)=>{VN(t);for(var r in e)Vl(t,r,{get:e[r],enumerable:!0})},GY=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of UY(e))!BN.call(t,n)&&n!=="default"&&Vl(t,n,{get:()=>e[n],enumerable:!(r=jY(e,n))||r.enumerable});return t},Gl=t=>GY(VN(Vl(t!=null?$Y(BY(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t),Dt=I((t,e)=>{"use strict";var r=function(){function n(){}return n.info=function(i){for(var o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];n.enableDebug&&console.info(n.TAG+i,o)},n.warn=function(i){for(var o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];n.disableWarnings||console.warn(n.TAG+i,o)},n.enableDebug=!1,n.disableWarnings=!1,n.disableErrors=!1,n.TAG="ApplicationInsights:",n}();e.exports=r}),GN=I(t=>{"use strict";var e=t&&t.__assign||function(){return e=Object.assign||function(o){for(var s,a=1,c=arguments.length;a<c;a++){s=arguments[a];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(o[l]=s[l])}return o},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncScopeManager=t.OpenTelemetryScopeManagerWrapper=void 0;var r=Ga(),n=require("events"),i=function(){function o(){}return o.prototype.active=function(){var s=this,a=r.CorrelationContextManager.getCurrentContext();return e(e({},a),{getValue:function(c){return s._activeSymbol?c===s._activeSymbol?a:!1:(s._activeSymbol=c,a)},setValue:function(){}})},o.prototype.with=function(s,a){var c=s.parentSpanId,l=s.name,u=o._spanToContext(s,c,l);return r.CorrelationContextManager.runWithContext(u,a)()},o.prototype.bind=function(s){return typeof s=="function"?r.CorrelationContextManager.wrapCallback(s):(s instanceof n.EventEmitter&&r.CorrelationContextManager.wrapEmitter(s),s)},o.prototype.enable=function(){return r.CorrelationContextManager.enable(),this},o.prototype.disable=function(){return r.CorrelationContextManager.disable(),this},o._spanToContext=function(s,a,c){var l=a?"|"+s.spanContext().traceId+"."+a+".":s.spanContext().traceId,u=e(e({},s.spanContext()),{traceFlags:s.spanContext().traceFlags}),d=r.CorrelationContextManager.spanToContextObject(u,l,c);return d},o}();t.OpenTelemetryScopeManagerWrapper=i,t.AsyncScopeManager=new i}),cC=I((t,e)=>{t=e.exports=be;var r;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?r=function(){var k=Array.prototype.slice.call(arguments,0);k.unshift("SEMVER"),console.log.apply(console,k)}:r=function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,o=16,s=t.re=[],a=t.src=[],c=0,l=c++;a[l]="0|[1-9]\\d*";var u=c++;a[u]="[0-9]+";var d=c++;a[d]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var f=c++;a[f]="("+a[l]+")\\.("+a[l]+")\\.("+a[l]+")";var p=c++;a[p]="("+a[u]+")\\.("+a[u]+")\\.("+a[u]+")";var h=c++;a[h]="(?:"+a[l]+"|"+a[d]+")";var m=c++;a[m]="(?:"+a[u]+"|"+a[d]+")";var g=c++;a[g]="(?:-("+a[h]+"(?:\\."+a[h]+")*))";var v=c++;a[v]="(?:-?("+a[m]+"(?:\\."+a[m]+")*))";var y=c++;a[y]="[0-9A-Za-z-]+";var C=c++;a[C]="(?:\\+("+a[y]+"(?:\\."+a[y]+")*))";var w=c++,b="v?"+a[f]+a[g]+"?"+a[C]+"?";a[w]="^"+b+"$";var E="[v=\\s]*"+a[p]+a[v]+"?"+a[C]+"?",S=c++;a[S]="^"+E+"$";var x=c++;a[x]="((?:<|>)?=?)";var T=c++;a[T]=a[u]+"|x|X|\\*";var R=c++;a[R]=a[l]+"|x|X|\\*";var q=c++;a[q]="[v=\\s]*("+a[R]+")(?:\\.("+a[R]+")(?:\\.("+a[R]+")(?:"+a[g]+")?"+a[C]+"?)?)?";var B=c++;a[B]="[v=\\s]*("+a[T]+")(?:\\.("+a[T]+")(?:\\.("+a[T]+")(?:"+a[v]+")?"+a[C]+"?)?)?";var te=c++;a[te]="^"+a[x]+"\\s*"+a[q]+"$";var ee=c++;a[ee]="^"+a[x]+"\\s*"+a[B]+"$";var H=c++;a[H]="(?:^|[^\\d])(\\d{1,"+o+"})(?:\\.(\\d{1,"+o+"}))?(?:\\.(\\d{1,"+o+"}))?(?:$|[^\\d])";var $=c++;a[$]="(?:~>?)";var A=c++;a[A]="(\\s*)"+a[$]+"\\s+",s[A]=new RegExp(a[A],"g");var D="$1~",F=c++;a[F]="^"+a[$]+a[q]+"$";var G=c++;a[G]="^"+a[$]+a[B]+"$";var K=c++;a[K]="(?:\\^)";var z=c++;a[z]="(\\s*)"+a[K]+"\\s+",s[z]=new RegExp(a[z],"g");var J="$1^",he=c++;a[he]="^"+a[K]+a[q]+"$";var me=c++;a[me]="^"+a[K]+a[B]+"$";var He=c++;a[He]="^"+a[x]+"\\s*("+E+")$|^$";var Ne=c++;a[Ne]="^"+a[x]+"\\s*("+b+")$|^$";var Ve=c++;a[Ve]="(\\s*)"+a[x]+"\\s*("+E+"|"+a[q]+")",s[Ve]=new RegExp(a[Ve],"g");var Pt="$1$2$3",vr=c++;a[vr]="^\\s*("+a[q]+")\\s+-\\s+("+a[q]+")\\s*$";var fe=c++;a[fe]="^\\s*("+a[B]+")\\s+-\\s+("+a[B]+")\\s*$";var ue=c++;for(a[ue]="(<|>)?=?\\s*\\*",Me=0;Me<c;Me++)r(Me,a[Me]),s[Me]||(s[Me]=new RegExp(a[Me]));var Me;t.parse=It;function It(k,O){if((!O||typeof O!="object")&&(O={loose:!!O,includePrerelease:!1}),k instanceof be)return k;if(typeof k!="string"||k.length>n)return null;var M=O.loose?s[S]:s[w];if(!M.test(k))return null;try{return new be(k,O)}catch(Y){return null}}t.valid=Km;function Km(k,O){var M=It(k,O);return M?M.version:null}t.clean=Ym;function Ym(k,O){var M=It(k.trim().replace(/^[=v]+/,""),O);return M?M.version:null}t.SemVer=be;function be(k,O){if((!O||typeof O!="object")&&(O={loose:!!O,includePrerelease:!1}),k instanceof be){if(k.loose===O.loose)return k;k=k.version}else if(typeof k!="string")throw new TypeError("Invalid Version: "+k);if(k.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof be))return new be(k,O);r("SemVer",k,O),this.options=O,this.loose=!!O.loose;var M=k.trim().match(O.loose?s[S]:s[w]);if(!M)throw new TypeError("Invalid Version: "+k);if(this.raw=k,this.major=+M[1],this.minor=+M[2],this.patch=+M[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");M[4]?this.prerelease=M[4].split(".").map(function(Y){if(/^[0-9]+$/.test(Y)){var X=+Y;if(X>=0&&X<i)return X}return Y}):this.prerelease=[],this.build=M[5]?M[5].split("."):[],this.format()}be.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},be.prototype.toString=function(){return this.version},be.prototype.compare=function(k){return r("SemVer.compare",this.version,this.options,k),k instanceof be||(k=new be(k,this.options)),this.compareMain(k)||this.comparePre(k)},be.prototype.compareMain=function(k){return k instanceof be||(k=new be(k,this.options)),kn(this.major,k.major)||kn(this.minor,k.minor)||kn(this.patch,k.patch)},be.prototype.comparePre=function(k){if(k instanceof be||(k=new be(k,this.options)),this.prerelease.length&&!k.prerelease.length)return-1;if(!this.prerelease.length&&k.prerelease.length)return 1;if(!this.prerelease.length&&!k.prerelease.length)return 0;var O=0;do{var M=this.prerelease[O],Y=k.prerelease[O];if(r("prerelease compare",O,M,Y),M===void 0&&Y===void 0)return 0;if(Y===void 0)return 1;if(M===void 0)return-1;if(M!==Y)return kn(M,Y)}while(++O)},be.prototype.inc=function(k,O){switch(k){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",O);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",O);break;case"prepatch":this.prerelease.length=0,this.inc("patch",O),this.inc("pre",O);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",O),this.inc("pre",O);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var M=this.prerelease.length;--M>=0;)typeof this.prerelease[M]=="number"&&(this.prerelease[M]++,M=-2);M===-1&&this.prerelease.push(0)}O&&(this.prerelease[0]===O?isNaN(this.prerelease[1])&&(this.prerelease=[O,0]):this.prerelease=[O,0]);break;default:throw new Error("invalid increment argument: "+k)}return this.format(),this.raw=this.version,this},t.inc=Qm;function Qm(k,O,M,Y){typeof M=="string"&&(Y=M,M=void 0);try{return new be(k,M).inc(O,Y).version}catch(X){return null}}t.diff=Xm;function Xm(k,O){if(Os(k,O))return null;var M=It(k),Y=It(O),X="";if(M.prerelease.length||Y.prerelease.length){X="pre";var re="prerelease"}for(var ae in M)if((ae==="major"||ae==="minor"||ae==="patch")&&M[ae]!==Y[ae])return X+ae;return re}t.compareIdentifiers=kn;var Po=/^[0-9]+$/;function kn(k,O){var M=Po.test(k),Y=Po.test(O);return M&&Y&&(k=+k,O=+O),k===O?0:M&&!Y?-1:Y&&!M?1:k<O?-1:1}t.rcompareIdentifiers=Rs;function Rs(k,O){return kn(O,k)}t.major=rn;function rn(k,O){return new be(k,O).major}t.minor=ed;function ed(k,O){return new be(k,O).minor}t.patch=td;function td(k,O){return new be(k,O).patch}t.compare=nn;function nn(k,O,M){return new be(k,M).compare(new be(O,M))}t.compareLoose=Jm;function Jm(k,O){return nn(k,O,!0)}t.rcompare=Ds;function Ds(k,O,M){return nn(O,k,M)}t.sort=rd;function rd(k,O){return k.sort(function(M,Y){return t.compare(M,Y,O)})}t.rsort=nd;function nd(k,O){return k.sort(function(M,Y){return t.rcompare(M,Y,O)})}t.gt=ki;function ki(k,O,M){return nn(k,O,M)>0}t.lt=Io;function Io(k,O,M){return nn(k,O,M)<0}t.eq=Os;function Os(k,O,M){return nn(k,O,M)===0}t.neq=id;function id(k,O,M){return nn(k,O,M)!==0}t.gte=wc;function wc(k,O,M){return nn(k,O,M)>=0}t.lte=on;function on(k,O,M){return nn(k,O,M)<=0}t.cmp=Xn;function Xn(k,O,M,Y){switch(O){case"===":return typeof k=="object"&&(k=k.version),typeof M=="object"&&(M=M.version),k===M;case"!==":return typeof k=="object"&&(k=k.version),typeof M=="object"&&(M=M.version),k!==M;case"":case"=":case"==":return Os(k,M,Y);case"!=":return id(k,M,Y);case">":return ki(k,M,Y);case">=":return wc(k,M,Y);case"<":return Io(k,M,Y);case"<=":return on(k,M,Y);default:throw new TypeError("Invalid operator: "+O)}}t.Comparator=rr;function rr(k,O){if((!O||typeof O!="object")&&(O={loose:!!O,includePrerelease:!1}),k instanceof rr){if(k.loose===!!O.loose)return k;k=k.value}if(!(this instanceof rr))return new rr(k,O);r("comparator",k,O),this.options=O,this.loose=!!O.loose,this.parse(k),this.semver===Pi?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}var Pi={};rr.prototype.parse=function(k){var O=this.options.loose?s[He]:s[Ne],M=k.match(O);if(!M)throw new TypeError("Invalid comparator: "+k);this.operator=M[1],this.operator==="="&&(this.operator=""),M[2]?this.semver=new be(M[2],this.options.loose):this.semver=Pi},rr.prototype.toString=function(){return this.value},rr.prototype.test=function(k){return r("Comparator.test",k,this.options.loose),this.semver===Pi?!0:(typeof k=="string"&&(k=new be(k,this.options)),Xn(k,this.operator,this.semver,this.options))},rr.prototype.intersects=function(k,O){if(!(k instanceof rr))throw new TypeError("a Comparator is required");(!O||typeof O!="object")&&(O={loose:!!O,includePrerelease:!1});var M;if(this.operator==="")return M=new Ye(k.value,O),Ns(this.value,M,O);if(k.operator==="")return M=new Ye(this.value,O),Ns(k.semver,M,O);var Y=(this.operator===">="||this.operator===">")&&(k.operator===">="||k.operator===">"),X=(this.operator==="<="||this.operator==="<")&&(k.operator==="<="||k.operator==="<"),re=this.semver.version===k.semver.version,ae=(this.operator===">="||this.operator==="<=")&&(k.operator===">="||k.operator==="<="),ye=Xn(this.semver,"<",k.semver,O)&&(this.operator===">="||this.operator===">")&&(k.operator==="<="||k.operator==="<"),we=Xn(this.semver,">",k.semver,O)&&(this.operator==="<="||this.operator==="<")&&(k.operator===">="||k.operator===">");return Y||X||re&&ae||ye||we},t.Range=Ye;function Ye(k,O){if((!O||typeof O!="object")&&(O={loose:!!O,includePrerelease:!1}),k instanceof Ye)return k.loose===!!O.loose&&k.includePrerelease===!!O.includePrerelease?k:new Ye(k.raw,O);if(k instanceof rr)return new Ye(k.value,O);if(!(this instanceof Ye))return new Ye(k,O);if(this.options=O,this.loose=!!O.loose,this.includePrerelease=!!O.includePrerelease,this.raw=k,this.set=k.split(/\s*\|\|\s*/).map(function(M){return this.parseRange(M.trim())},this).filter(function(M){return M.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+k);this.format()}Ye.prototype.format=function(){return this.range=this.set.map(function(k){return k.join(" ").trim()}).join("||").trim(),this.range},Ye.prototype.toString=function(){return this.range},Ye.prototype.parseRange=function(k){var O=this.options.loose;k=k.trim();var M=O?s[fe]:s[vr];k=k.replace(M,ig),r("hyphen replace",k),k=k.replace(s[Ve],Pt),r("comparator trim",k,s[Ve]),k=k.replace(s[A],D),k=k.replace(s[z],J),k=k.split(/\s+/).join(" ");var Y=O?s[He]:s[Ne],X=k.split(" ").map(function(re){return Ao(re,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(X=X.filter(function(re){return!!re.match(Y)})),X=X.map(function(re){return new rr(re,this.options)},this),X},Ye.prototype.intersects=function(k,O){if(!(k instanceof Ye))throw new TypeError("a Range is required");return this.set.some(function(M){return M.every(function(Y){return k.set.some(function(X){return X.every(function(re){return Y.intersects(re,O)})})})})},t.toComparators=od;function od(k,O){return new Ye(k,O).set.map(function(M){return M.map(function(Y){return Y.value}).join(" ").trim().split(" ")})}function Ao(k,O){return r("comp",k,O),k=eg(k,O),r("caret",k),k=Jn(k,O),r("tildes",k),k=rg(k,O),r("xrange",k),k=sn(k,O),r("stars",k),k}function At(k){return!k||k.toLowerCase()==="x"||k==="*"}function Jn(k,O){return k.trim().split(/\s+/).map(function(M){return Zm(M,O)}).join(" ")}function Zm(k,O){var M=O.loose?s[G]:s[F];return k.replace(M,function(Y,X,re,ae,ye){r("tilde",k,Y,X,re,ae,ye);var we;return At(X)?we="":At(re)?we=">="+X+".0.0 <"+(+X+1)+".0.0":At(ae)?we=">="+X+"."+re+".0 <"+X+"."+(+re+1)+".0":ye?(r("replaceTilde pr",ye),we=">="+X+"."+re+"."+ae+"-"+ye+" <"+X+"."+(+re+1)+".0"):we=">="+X+"."+re+"."+ae+" <"+X+"."+(+re+1)+".0",r("tilde return",we),we})}function eg(k,O){return k.trim().split(/\s+/).map(function(M){return tg(M,O)}).join(" ")}function tg(k,O){r("caret",k,O);var M=O.loose?s[me]:s[he];return k.replace(M,function(Y,X,re,ae,ye){r("caret",k,Y,X,re,ae,ye);var we;return At(X)?we="":At(re)?we=">="+X+".0.0 <"+(+X+1)+".0.0":At(ae)?X==="0"?we=">="+X+"."+re+".0 <"+X+"."+(+re+1)+".0":we=">="+X+"."+re+".0 <"+(+X+1)+".0.0":ye?(r("replaceCaret pr",ye),X==="0"?re==="0"?we=">="+X+"."+re+"."+ae+"-"+ye+" <"+X+"."+re+"."+(+ae+1):we=">="+X+"."+re+"."+ae+"-"+ye+" <"+X+"."+(+re+1)+".0":we=">="+X+"."+re+"."+ae+"-"+ye+" <"+(+X+1)+".0.0"):(r("no pr"),X==="0"?re==="0"?we=">="+X+"."+re+"."+ae+" <"+X+"."+re+"."+(+ae+1):we=">="+X+"."+re+"."+ae+" <"+X+"."+(+re+1)+".0":we=">="+X+"."+re+"."+ae+" <"+(+X+1)+".0.0"),r("caret return",we),we})}function rg(k,O){return r("replaceXRanges",k,O),k.split(/\s+/).map(function(M){return ng(M,O)}).join(" ")}function ng(k,O){k=k.trim();var M=O.loose?s[ee]:s[te];return k.replace(M,function(Y,X,re,ae,ye,we){r("xRange",k,Y,X,re,ae,ye,we);var Tr=At(re),Kt=Tr||At(ae),Yt=Kt||At(ye),Qt=Yt;return X==="="&&Qt&&(X=""),Tr?X===">"||X==="<"?Y="<0.0.0":Y="*":X&&Qt?(Kt&&(ae=0),ye=0,X===">"?(X=">=",Kt?(re=+re+1,ae=0,ye=0):(ae=+ae+1,ye=0)):X==="<="&&(X="<",Kt?re=+re+1:ae=+ae+1),Y=X+re+"."+ae+"."+ye):Kt?Y=">="+re+".0.0 <"+(+re+1)+".0.0":Yt&&(Y=">="+re+"."+ae+".0 <"+re+"."+(+ae+1)+".0"),r("xRange return",Y),Y})}function sn(k,O){return r("replaceStars",k,O),k.trim().replace(s[ue],"")}function ig(k,O,M,Y,X,re,ae,ye,we,Tr,Kt,Yt,Qt){return At(M)?O="":At(Y)?O=">="+M+".0.0":At(X)?O=">="+M+"."+Y+".0":O=">="+O,At(we)?ye="":At(Tr)?ye="<"+(+we+1)+".0.0":At(Kt)?ye="<"+we+"."+(+Tr+1)+".0":Yt?ye="<="+we+"."+Tr+"."+Kt+"-"+Yt:ye="<="+ye,(O+" "+ye).trim()}Ye.prototype.test=function(k){if(!k)return!1;typeof k=="string"&&(k=new be(k,this.options));for(var O=0;O<this.set.length;O++)if(og(this.set[O],k,this.options))return!0;return!1};function og(k,O,M){for(var Y=0;Y<k.length;Y++)if(!k[Y].test(O))return!1;if(O.prerelease.length&&!M.includePrerelease){for(Y=0;Y<k.length;Y++)if(r(k[Y].semver),k[Y].semver!==Pi&&k[Y].semver.prerelease.length>0){var X=k[Y].semver;if(X.major===O.major&&X.minor===O.minor&&X.patch===O.patch)return!0}return!1}return!0}t.satisfies=Ns;function Ns(k,O,M){try{O=new Ye(O,M)}catch(Y){return!1}return O.test(k)}t.maxSatisfying=sg;function sg(k,O,M){var Y=null,X=null;try{var re=new Ye(O,M)}catch(ae){return null}return k.forEach(function(ae){re.test(ae)&&(!Y||X.compare(ae)===-1)&&(Y=ae,X=new be(Y,M))}),Y}t.minSatisfying=ag;function ag(k,O,M){var Y=null,X=null;try{var re=new Ye(O,M)}catch(ae){return null}return k.forEach(function(ae){re.test(ae)&&(!Y||X.compare(ae)===1)&&(Y=ae,X=new be(Y,M))}),Y}t.minVersion=Ii;function Ii(k,O){k=new Ye(k,O);var M=new be("0.0.0");if(k.test(M)||(M=new be("0.0.0-0"),k.test(M)))return M;M=null;for(var Y=0;Y<k.set.length;++Y){var X=k.set[Y];X.forEach(function(re){var ae=new be(re.semver.version);switch(re.operator){case">":ae.prerelease.length===0?ae.patch++:ae.prerelease.push(0),ae.raw=ae.format();case"":case">=":(!M||ki(M,ae))&&(M=ae);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+re.operator)}})}return M&&k.test(M)?M:null}t.validRange=cg;function cg(k,O){try{return new Ye(k,O).range||"*"}catch(M){return null}}t.ltr=lg;function lg(k,O,M){return Cc(k,O,"<",M)}t.gtr=ug;function ug(k,O,M){return Cc(k,O,">",M)}t.outside=Cc;function Cc(k,O,M,Y){k=new be(k,Y),O=new Ye(O,Y);var X,re,ae,ye,we;switch(M){case">":X=ki,re=on,ae=Io,ye=">",we=">=";break;case"<":X=Io,re=wc,ae=ki,ye="<",we="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Ns(k,O,Y))return!1;for(var Tr=0;Tr<O.set.length;++Tr){var Kt=O.set[Tr],Yt=null,Qt=null;if(Kt.forEach(function(Pn){Pn.semver===Pi&&(Pn=new rr(">=0.0.0")),Yt=Yt||Pn,Qt=Qt||Pn,X(Pn.semver,Yt.semver,Y)?Yt=Pn:ae(Pn.semver,Qt.semver,Y)&&(Qt=Pn)}),Yt.operator===ye||Yt.operator===we||(!Qt.operator||Qt.operator===ye)&&re(k,Qt.semver)||Qt.operator===we&&ae(k,Qt.semver))return!1}return!0}t.prerelease=dg;function dg(k,O){var M=It(k,O);return M&&M.prerelease.length?M.prerelease:null}t.intersects=Ai;function Ai(k,O,M){return k=new Ye(k,M),O=new Ye(O,M),k.intersects(O)}t.coerce=fg;function fg(k){if(k instanceof be)return k;if(typeof k!="string")return null;var O=k.match(s[H]);return O==null?null:It(O[1]+"."+(O[2]||"0")+"."+(O[3]||"0"))}}),WN=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makePatchingRequire=void 0;var e=require("path"),r=cC(),n=require("module"),i=Object.keys(process.binding("natives")),o=n.prototype.require;function s(a){var c={};return function(l){var u=o.apply(this,arguments);if(a[l]){var d=n._resolveFilename(l,this);if(c.hasOwnProperty(d))return c[d];var f=void 0;if(i.indexOf(l)<0)try{f=o.call(this,e.join(l,"package.json")).version}catch(y){return u}else f=process.version.substring(1);var p=f.indexOf("-");p>=0&&(f=f.substring(0,p));for(var h=u,m=0,g=a[l];m<g.length;m++){var v=g[m];r.satisfies(f,v.versionSpecifier)&&(h=v.patch(h,d))}return c[d]=h}return u}}t.makePatchingRequire=s}),WY=I((t,e)=>{e.exports={name:"diagnostic-channel",version:"1.0.0",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"tslint -c tslint.json -p tsconfig.json",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^5.3.0"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"~8.0.0",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"4.1.2"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT"}}),pt=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.channel=t.makePatchingRequire=void 0;var e=WN(),r=WN();Object.defineProperty(t,"makePatchingRequire",{enumerable:!0,get:function(){return r.makePatchingRequire}});var n=function(s){return!0},i=function(){function s(){this.version=WY().version,this.subscribers={},this.contextPreservationFunction=function(a){return a},this.knownPatches={},this.currentlyPublishing=!1}return s.prototype.shouldPublish=function(a){var c=this.subscribers[a];return c?c.some(function(l){var u=l.filter;return!u||u(!1)}):!1},s.prototype.publish=function(a,c){if(!this.currentlyPublishing){var l=this.subscribers[a];if(l){var u={timestamp:Date.now(),data:c};this.currentlyPublishing=!0,l.forEach(function(d){var f=d.listener,p=d.filter;try{p&&p(!0)&&f(u)}catch(h){}}),this.currentlyPublishing=!1}}},s.prototype.subscribe=function(a,c,l){l===void 0&&(l=n),this.subscribers[a]||(this.subscribers[a]=[]),this.subscribers[a].push({listener:c,filter:l})},s.prototype.unsubscribe=function(a,c,l){l===void 0&&(l=n);var u=this.subscribers[a];if(u){for(var d=0;d<u.length;++d)if(u[d].listener===c&&u[d].filter===l)return u.splice(d,1),!0}return!1},s.prototype.reset=function(){var a=this;this.subscribers={},this.contextPreservationFunction=function(c){return c},Object.getOwnPropertyNames(this.knownPatches).forEach(function(c){return delete a.knownPatches[c]})},s.prototype.bindToContext=function(a){return this.contextPreservationFunction(a)},s.prototype.addContextPreservation=function(a){var c=this.contextPreservationFunction;this.contextPreservationFunction=function(l){return a(c(l))}},s.prototype.registerMonkeyPatch=function(a,c){this.knownPatches[a]||(this.knownPatches[a]=[]),this.knownPatches[a].push(c)},s.prototype.getPatchesObject=function(){return this.knownPatches},s}();global.diagnosticsSource||(global.diagnosticsSource=new i,o=require("module"),o.prototype.require=e.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));var o;t.channel=global.diagnosticsSource}),zY=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),KY=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaggageImpl=void 0;var e=function(){function r(n){this._entries=n?new Map(n):new Map}return r.prototype.getEntry=function(n){var i=this._entries.get(n);if(i)return Object.assign({},i)},r.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(n){var i=n[0],o=n[1];return[i,o]})},r.prototype.setEntry=function(n,i){var o=new r(this._entries);return o._entries.set(n,i),o},r.prototype.removeEntry=function(n){var i=new r(this._entries);return i._entries.delete(n),i},r.prototype.removeEntries=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];for(var o=new r(this._entries),s=0,a=n;s<a.length;s++){var c=a[s];o._entries.delete(c)}return o},r.prototype.clear=function(){return new r},r}();t.BaggageImpl=e}),YY=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataSymbol=void 0,t.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")}),zN=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataFromString=t.createBaggage=void 0;var e=Ke(),r=KY(),n=YY();function i(s){return s===void 0&&(s={}),new r.BaggageImpl(new Map(Object.entries(s)))}t.createBaggage=i;function o(s){return typeof s!="string"&&(e.diag.error("Cannot create baggage metadata from unknown type: "+typeof s),s=""),{__TYPE__:n.baggageEntryMetadataSymbol,toString:function(){return s}}}t.baggageEntryMetadataFromString=o}),QY=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),XY=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),JY=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagConsoleLogger=void 0;var e=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],r=function(){function n(){function i(s){return function(){var a=arguments;if(console){var c=console[s];if(typeof c!="function"&&(c=console.log),typeof c=="function")return c.apply(console,a)}}}for(var o=0;o<e.length;o++)this[e[o].n]=i(e[o].c)}return n}();t.DiagConsoleLogger=r}),lC=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagLogLevel=void 0;var e;(function(r){r[r.NONE=0]="NONE",r[r.ERROR=30]="ERROR",r[r.WARN=50]="WARN",r[r.INFO=60]="INFO",r[r.DEBUG=70]="DEBUG",r[r.VERBOSE=80]="VERBOSE",r[r.ALL=9999]="ALL"})(e=t.DiagLogLevel||(t.DiagLogLevel={}))}),ZY=I(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(JY(),t),r(lC(),t)}),KN=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultTextMapSetter=t.defaultTextMapGetter=void 0,t.defaultTextMapGetter={get:function(e,r){if(e!=null)return e[r]},keys:function(e){return e==null?[]:Object.keys(e)}},t.defaultTextMapSetter={set:function(e,r,n){e!=null&&(e[r]=n)}}}),e7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),t7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),Yp=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ROOT_CONTEXT=t.createContextKey=void 0;function e(n){return Symbol.for(n)}t.createContextKey=e;var r=function(){function n(i){var o=this;o._currentContext=i?new Map(i):new Map,o.getValue=function(s){return o._currentContext.get(s)},o.setValue=function(s,a){var c=new n(o._currentContext);return c._currentContext.set(s,a),c},o.deleteValue=function(s){var a=new n(o._currentContext);return a._currentContext.delete(s),a}}return n}();t.ROOT_CONTEXT=new r}),YN=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TraceFlags=void 0;var e;(function(r){r[r.NONE=0]="NONE",r[r.SAMPLED=1]="SAMPLED"})(e=t.TraceFlags||(t.TraceFlags={}))}),Qp=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wrapSpanContext=t.isSpanContextValid=t.isValidSpanId=t.isValidTraceId=t.INVALID_SPAN_CONTEXT=t.INVALID_TRACEID=t.INVALID_SPANID=void 0;var e=uC(),r=YN(),n=/^([0-9a-f]{32})$/i,i=/^[0-9a-f]{16}$/i;t.INVALID_SPANID="0000000000000000",t.INVALID_TRACEID="00000000000000000000000000000000",t.INVALID_SPAN_CONTEXT={traceId:t.INVALID_TRACEID,spanId:t.INVALID_SPANID,traceFlags:r.TraceFlags.NONE};function o(l){return n.test(l)&&l!==t.INVALID_TRACEID}t.isValidTraceId=o;function s(l){return i.test(l)&&l!==t.INVALID_SPANID}t.isValidSpanId=s;function a(l){return o(l.traceId)&&s(l.spanId)}t.isSpanContextValid=a;function c(l){return new e.NonRecordingSpan(l)}t.wrapSpanContext=c}),uC=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NonRecordingSpan=void 0;var e=Qp(),r=function(){function n(i){i===void 0&&(i=e.INVALID_SPAN_CONTEXT),this._spanContext=i}return n.prototype.spanContext=function(){return this._spanContext},n.prototype.setAttribute=function(i,o){return this},n.prototype.setAttributes=function(i){return this},n.prototype.addEvent=function(i,o){return this},n.prototype.setStatus=function(i){return this},n.prototype.updateName=function(i){return this},n.prototype.end=function(i){},n.prototype.isRecording=function(){return!1},n.prototype.recordException=function(i,o){},n}();t.NonRecordingSpan=r}),QN=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSpanContext=t.setSpanContext=t.deleteSpan=t.setSpan=t.getSpan=void 0;var e=Yp(),r=uC(),n=e.createContextKey("OpenTelemetry Context Key SPAN");function i(l){return l.getValue(n)||void 0}t.getSpan=i;function o(l,u){return l.setValue(n,u)}t.setSpan=o;function s(l){return l.deleteValue(n)}t.deleteSpan=s;function a(l,u){return o(l,new r.NonRecordingSpan(u))}t.setSpanContext=a;function c(l){var u;return(u=i(l))===null||u===void 0?void 0:u.spanContext()}t.getSpanContext=c}),XN=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracer=void 0;var e=Ke(),r=QN(),n=uC(),i=Qp(),o=function(){function a(){}return a.prototype.startSpan=function(c,l,u){var d=Boolean(l==null?void 0:l.root);if(d)return new n.NonRecordingSpan;var f=u&&r.getSpanContext(u);return s(f)&&i.isSpanContextValid(f)?new n.NonRecordingSpan(f):new n.NonRecordingSpan},a.prototype.startActiveSpan=function(c,l,u,d){var f,p,h;if(!(arguments.length<2)){arguments.length===2?h=l:arguments.length===3?(f=l,h=u):(f=l,p=u,h=d);var m=p!=null?p:e.context.active(),g=this.startSpan(c,f,m),v=r.setSpan(m,g);return e.context.with(v,h,void 0,g)}},a}();t.NoopTracer=o;function s(a){return typeof a=="object"&&typeof a.spanId=="string"&&typeof a.traceId=="string"&&typeof a.traceFlags=="number"}}),JN=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracer=void 0;var e=XN(),r=function(){function n(i,o,s){this._provider=i,this.name=o,this.version=s}return n.prototype.startSpan=function(i,o,s){return this._getTracer().startSpan(i,o,s)},n.prototype.startActiveSpan=function(i,o,s,a){var c=this._getTracer();return Reflect.apply(c.startActiveSpan,c,arguments)},n.prototype._getTracer=function(){if(this._delegate)return this._delegate;var i=this._provider.getDelegateTracer(this.name,this.version);return i?(this._delegate=i,this._delegate):new e.NoopTracer},n}();t.ProxyTracer=r}),r7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracerProvider=void 0;var e=XN(),r=function(){function n(){}return n.prototype.getTracer=function(i,o){return new e.NoopTracer},n}();t.NoopTracerProvider=r}),ZN=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracerProvider=void 0;var e=JN(),r=r7(),n=new r.NoopTracerProvider,i=function(){function o(){}return o.prototype.getTracer=function(s,a){var c;return(c=this.getDelegateTracer(s,a))!==null&&c!==void 0?c:new e.ProxyTracer(this,s,a)},o.prototype.getDelegate=function(){var s;return(s=this._delegate)!==null&&s!==void 0?s:n},o.prototype.setDelegate=function(s){this._delegate=s},o.prototype.getDelegateTracer=function(s,a){var c;return(c=this._delegate)===null||c===void 0?void 0:c.getTracer(s,a)},o}();t.ProxyTracerProvider=i}),n7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),i7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SamplingDecision=void 0;var e;(function(r){r[r.NOT_RECORD=0]="NOT_RECORD",r[r.RECORD=1]="RECORD",r[r.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(e=t.SamplingDecision||(t.SamplingDecision={}))}),o7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),s7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpanKind=void 0;var e;(function(r){r[r.INTERNAL=0]="INTERNAL",r[r.SERVER=1]="SERVER",r[r.CLIENT=2]="CLIENT",r[r.PRODUCER=3]="PRODUCER",r[r.CONSUMER=4]="CONSUMER"})(e=t.SpanKind||(t.SpanKind={}))}),a7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),c7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),l7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpanStatusCode=void 0;var e;(function(r){r[r.UNSET=0]="UNSET",r[r.OK=1]="OK",r[r.ERROR=2]="ERROR"})(e=t.SpanStatusCode||(t.SpanStatusCode={}))}),u7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),d7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),f7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),p7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),h7=I(t=>{"use strict";var e=t&&t.__spreadArray||function(i,o){for(var s=0,a=o.length,c=i.length;s<a;s++,c++)i[c]=o[s];return i};Object.defineProperty(t,"__esModule",{value:!0}),t.NoopContextManager=void 0;var r=Yp(),n=function(){function i(){}return i.prototype.active=function(){return r.ROOT_CONTEXT},i.prototype.with=function(o,s,a){for(var c=[],l=3;l<arguments.length;l++)c[l-3]=arguments[l];return s.call.apply(s,e([a],c))},i.prototype.bind=function(o,s){return s},i.prototype.enable=function(){return this},i.prototype.disable=function(){return this},i}();t.NoopContextManager=n}),m7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._globalThis=void 0,t._globalThis=typeof globalThis=="object"?globalThis:global}),g7=I(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(m7(),t)}),v7=I(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(g7(),t)}),eL=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="1.0.1"}),y7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCompatible=t._makeCompatibilityCheck=void 0;var e=eL(),r=/^(\d+)\.(\d+)\.(\d+)(?:-(.*))?$/;function n(i){var o=new Set([i]),s=new Set,a=i.match(r);if(!a)return function(){return!1};var c={major:+a[1],minor:+a[2],patch:+a[3]};function l(d){return s.add(d),!1}function u(d){return o.add(d),!0}return function(d){if(o.has(d))return!0;if(s.has(d))return!1;var f=d.match(r);if(!f)return l(d);var p={major:+f[1],minor:+f[2],patch:+f[3]};return c.major!==p.major?l(d):c.major===0?c.minor===p.minor&&c.patch<=p.patch?u(d):l(d):c.minor<=p.minor?u(d):l(d)}}t._makeCompatibilityCheck=n,t.isCompatible=n(e.VERSION)}),Wl=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unregisterGlobal=t.getGlobal=t.registerGlobal=void 0;var e=v7(),r=eL(),n=y7(),i=r.VERSION.split(".")[0],o=Symbol.for("opentelemetry.js.api."+i),s=e._globalThis;function a(u,d,f,p){var h;p===void 0&&(p=!1);var m=s[o]=(h=s[o])!==null&&h!==void 0?h:{version:r.VERSION};if(!p&&m[u]){var g=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+u);return f.error(g.stack||g.message),!1}if(m.version!==r.VERSION){var g=new Error("@opentelemetry/api: All API registration versions must match");return f.error(g.stack||g.message),!1}return m[u]=d,f.debug("@opentelemetry/api: Registered a global for "+u+" v"+r.VERSION+"."),!0}t.registerGlobal=a;function c(u){var d,f,p=(d=s[o])===null||d===void 0?void 0:d.version;if(!(!p||!n.isCompatible(p)))return(f=s[o])===null||f===void 0?void 0:f[u]}t.getGlobal=c;function l(u,d){d.debug("@opentelemetry/api: Unregistering a global for "+u+" v"+r.VERSION+".");var f=s[o];f&&delete f[u]}t.unregisterGlobal=l}),w7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagComponentLogger=void 0;var e=Wl(),r=function(){function i(o){this._namespace=o.namespace||"DiagComponentLogger"}return i.prototype.debug=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return n("debug",this._namespace,o)},i.prototype.error=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return n("error",this._namespace,o)},i.prototype.info=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return n("info",this._namespace,o)},i.prototype.warn=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return n("warn",this._namespace,o)},i.prototype.verbose=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return n("verbose",this._namespace,o)},i}();t.DiagComponentLogger=r;function n(i,o,s){var a=e.getGlobal("diag");if(a)return s.unshift(o),a[i].apply(a,s)}}),C7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createLogLevelDiagLogger=void 0;var e=lC();function r(n,i){n<e.DiagLogLevel.NONE?n=e.DiagLogLevel.NONE:n>e.DiagLogLevel.ALL&&(n=e.DiagLogLevel.ALL),i=i||{};function o(s,a){var c=i[s];return typeof c=="function"&&n>=a?c.bind(i):function(){}}return{error:o("error",e.DiagLogLevel.ERROR),warn:o("warn",e.DiagLogLevel.WARN),info:o("info",e.DiagLogLevel.INFO),debug:o("debug",e.DiagLogLevel.DEBUG),verbose:o("verbose",e.DiagLogLevel.VERBOSE)}}t.createLogLevelDiagLogger=r}),Xp=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagAPI=void 0;var e=w7(),r=C7(),n=lC(),i=Wl(),o="diag",s=function(){function a(){function c(u){return function(){var d=i.getGlobal("diag");if(d)return d[u].apply(d,arguments)}}var l=this;l.setLogger=function(u,d){var f,p;if(d===void 0&&(d=n.DiagLogLevel.INFO),u===l){var h=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return l.error((f=h.stack)!==null&&f!==void 0?f:h.message),!1}var m=i.getGlobal("diag"),g=r.createLogLevelDiagLogger(d,u);if(m){var v=(p=new Error().stack)!==null&&p!==void 0?p:"<failed to generate stacktrace>";m.warn("Current logger will be overwritten from "+v),g.warn("Current logger will overwrite one already registered from "+v)}return i.registerGlobal("diag",g,l,!0)},l.disable=function(){i.unregisterGlobal(o,l)},l.createComponentLogger=function(u){return new e.DiagComponentLogger(u)},l.verbose=c("verbose"),l.debug=c("debug"),l.info=c("info"),l.warn=c("warn"),l.error=c("error")}return a.instance=function(){return this._instance||(this._instance=new a),this._instance},a}();t.DiagAPI=s}),b7=I(t=>{"use strict";var e=t&&t.__spreadArray||function(c,l){for(var u=0,d=l.length,f=c.length;u<d;u++,f++)c[f]=l[u];return c};Object.defineProperty(t,"__esModule",{value:!0}),t.ContextAPI=void 0;var r=h7(),n=Wl(),i=Xp(),o="context",s=new r.NoopContextManager,a=function(){function c(){}return c.getInstance=function(){return this._instance||(this._instance=new c),this._instance},c.prototype.setGlobalContextManager=function(l){return n.registerGlobal(o,l,i.DiagAPI.instance())},c.prototype.active=function(){return this._getContextManager().active()},c.prototype.with=function(l,u,d){for(var f,p=[],h=3;h<arguments.length;h++)p[h-3]=arguments[h];return(f=this._getContextManager()).with.apply(f,e([l,u,d],p))},c.prototype.bind=function(l,u){return this._getContextManager().bind(l,u)},c.prototype._getContextManager=function(){return n.getGlobal(o)||s},c.prototype.disable=function(){this._getContextManager().disable(),n.unregisterGlobal(o,i.DiagAPI.instance())},c}();t.ContextAPI=a}),E7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TraceAPI=void 0;var e=Wl(),r=ZN(),n=Qp(),i=QN(),o=Xp(),s="trace",a=function(){function c(){this._proxyTracerProvider=new r.ProxyTracerProvider,this.wrapSpanContext=n.wrapSpanContext,this.isSpanContextValid=n.isSpanContextValid,this.deleteSpan=i.deleteSpan,this.getSpan=i.getSpan,this.getSpanContext=i.getSpanContext,this.setSpan=i.setSpan,this.setSpanContext=i.setSpanContext}return c.getInstance=function(){return this._instance||(this._instance=new c),this._instance},c.prototype.setGlobalTracerProvider=function(l){return this._proxyTracerProvider.setDelegate(l),e.registerGlobal(s,this._proxyTracerProvider,o.DiagAPI.instance())},c.prototype.getTracerProvider=function(){return e.getGlobal(s)||this._proxyTracerProvider},c.prototype.getTracer=function(l,u){return this.getTracerProvider().getTracer(l,u)},c.prototype.disable=function(){e.unregisterGlobal(s,o.DiagAPI.instance()),this._proxyTracerProvider=new r.ProxyTracerProvider},c}();t.TraceAPI=a}),_7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTextMapPropagator=void 0;var e=function(){function r(){}return r.prototype.inject=function(n,i){},r.prototype.extract=function(n,i){return n},r.prototype.fields=function(){return[]},r}();t.NoopTextMapPropagator=e}),S7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteBaggage=t.setBaggage=t.getBaggage=void 0;var e=Yp(),r=e.createContextKey("OpenTelemetry Baggage Key");function n(s){return s.getValue(r)||void 0}t.getBaggage=n;function i(s,a){return s.setValue(r,a)}t.setBaggage=i;function o(s){return s.deleteValue(r)}t.deleteBaggage=o}),x7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PropagationAPI=void 0;var e=Wl(),r=_7(),n=KN(),i=S7(),o=zN(),s=Xp(),a="propagation",c=new r.NoopTextMapPropagator,l=function(){function u(){this.createBaggage=o.createBaggage,this.getBaggage=i.getBaggage,this.setBaggage=i.setBaggage,this.deleteBaggage=i.deleteBaggage}return u.getInstance=function(){return this._instance||(this._instance=new u),this._instance},u.prototype.setGlobalPropagator=function(d){return e.registerGlobal(a,d,s.DiagAPI.instance())},u.prototype.inject=function(d,f,p){return p===void 0&&(p=n.defaultTextMapSetter),this._getGlobalPropagator().inject(d,f,p)},u.prototype.extract=function(d,f,p){return p===void 0&&(p=n.defaultTextMapGetter),this._getGlobalPropagator().extract(d,f,p)},u.prototype.fields=function(){return this._getGlobalPropagator().fields()},u.prototype.disable=function(){e.unregisterGlobal(a,s.DiagAPI.instance())},u.prototype._getGlobalPropagator=function(){return e.getGlobal(a)||c},u}();t.PropagationAPI=l}),Ke=I(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(l,u,d,f){f===void 0&&(f=d),Object.defineProperty(l,f,{enumerable:!0,get:function(){return u[d]}})}:function(l,u,d,f){f===void 0&&(f=d),l[f]=u[d]}),r=t&&t.__exportStar||function(l,u){for(var d in l)d!=="default"&&!Object.prototype.hasOwnProperty.call(u,d)&&e(u,l,d)};Object.defineProperty(t,"__esModule",{value:!0}),t.diag=t.propagation=t.trace=t.context=t.isValidSpanId=t.isValidTraceId=t.isSpanContextValid=t.INVALID_SPAN_CONTEXT=t.INVALID_TRACEID=t.INVALID_SPANID=t.baggageEntryMetadataFromString=void 0,r(zY(),t);var n=zN();Object.defineProperty(t,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return n.baggageEntryMetadataFromString}}),r(QY(),t),r(XY(),t),r(ZY(),t),r(KN(),t),r(e7(),t),r(t7(),t),r(JN(),t),r(ZN(),t),r(n7(),t),r(i7(),t),r(o7(),t),r(s7(),t),r(a7(),t),r(c7(),t),r(l7(),t),r(YN(),t),r(u7(),t),r(d7(),t),r(f7(),t);var i=Qp();Object.defineProperty(t,"INVALID_SPANID",{enumerable:!0,get:function(){return i.INVALID_SPANID}}),Object.defineProperty(t,"INVALID_TRACEID",{enumerable:!0,get:function(){return i.INVALID_TRACEID}}),Object.defineProperty(t,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return i.INVALID_SPAN_CONTEXT}}),Object.defineProperty(t,"isSpanContextValid",{enumerable:!0,get:function(){return i.isSpanContextValid}}),Object.defineProperty(t,"isValidTraceId",{enumerable:!0,get:function(){return i.isValidTraceId}}),Object.defineProperty(t,"isValidSpanId",{enumerable:!0,get:function(){return i.isValidSpanId}}),r(Yp(),t),r(p7(),t);var o=b7();t.context=o.ContextAPI.getInstance();var s=E7();t.trace=s.TraceAPI.getInstance();var a=x7();t.propagation=a.PropagationAPI.getInstance();var c=Xp();t.diag=c.DiagAPI.instance(),t.default={trace:t.trace,context:t.context,propagation:t.propagation,diag:t.diag}}),dC=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTracingSuppressed=t.unsuppressTracing=t.suppressTracing=void 0;var e=Ke(),r=e.createContextKey("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function n(s){return s.setValue(r,!0)}t.suppressTracing=n;function i(s){return s.deleteValue(r)}t.unsuppressTracing=i;function o(s){return s.getValue(r)===!0}t.isTracingSuppressed=o}),tL=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BAGGAGE_MAX_TOTAL_LENGTH=t.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=t.BAGGAGE_MAX_NAME_VALUE_PAIRS=t.BAGGAGE_HEADER=t.BAGGAGE_ITEMS_SEPARATOR=t.BAGGAGE_PROPERTIES_SEPARATOR=t.BAGGAGE_KEY_PAIR_SEPARATOR=void 0,t.BAGGAGE_KEY_PAIR_SEPARATOR="=",t.BAGGAGE_PROPERTIES_SEPARATOR=";",t.BAGGAGE_ITEMS_SEPARATOR=",",t.BAGGAGE_HEADER="baggage",t.BAGGAGE_MAX_NAME_VALUE_PAIRS=180,t.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096,t.BAGGAGE_MAX_TOTAL_LENGTH=8192}),rL=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseKeyPairsIntoRecord=t.parsePairKeyValue=t.getKeyPairs=t.serializeKeyPairs=void 0;var e=Ke(),r=tL(),n=a=>a.reduce((c,l)=>{let u=`${c}${c!==""?r.BAGGAGE_ITEMS_SEPARATOR:""}${l}`;return u.length>r.BAGGAGE_MAX_TOTAL_LENGTH?c:u},"");t.serializeKeyPairs=n;var i=a=>a.getAllEntries().map(([c,l])=>`${encodeURIComponent(c)}=${encodeURIComponent(l.value)}`);t.getKeyPairs=i;var o=a=>{let c=a.split(r.BAGGAGE_PROPERTIES_SEPARATOR);if(c.length<=0)return;let l=c.shift();if(!l)return;let u=l.split(r.BAGGAGE_KEY_PAIR_SEPARATOR);if(u.length!==2)return;let d=decodeURIComponent(u[0].trim()),f=decodeURIComponent(u[1].trim()),p;return c.length>0&&(p=e.baggageEntryMetadataFromString(c.join(r.BAGGAGE_PROPERTIES_SEPARATOR))),{key:d,value:f,metadata:p}};t.parsePairKeyValue=o;var s=a=>typeof a!="string"||a.length===0?{}:a.split(r.BAGGAGE_ITEMS_SEPARATOR).map(c=>t.parsePairKeyValue(c)).filter(c=>c!==void 0&&c.value.length>0).reduce((c,l)=>(c[l.key]=l.value,c),{});t.parseKeyPairsIntoRecord=s}),k7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HttpBaggagePropagator=void 0;var e=Ke(),r=dC(),n=tL(),i=rL(),o=class{inject(s,a,c){let l=e.propagation.getBaggage(s);if(!l||r.isTracingSuppressed(s))return;let u=i.getKeyPairs(l).filter(f=>f.length<=n.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS).slice(0,n.BAGGAGE_MAX_NAME_VALUE_PAIRS),d=i.serializeKeyPairs(u);d.length>0&&c.set(a,n.BAGGAGE_HEADER,d)}extract(s,a,c){let l=c.get(a,n.BAGGAGE_HEADER);if(!l)return s;let u={};return l.length===0||(l.split(n.BAGGAGE_ITEMS_SEPARATOR).forEach(d=>{let f=i.parsePairKeyValue(d);if(f){let p={value:f.value};f.metadata&&(p.metadata=f.metadata),u[f.key]=p}}),Object.entries(u).length===0)?s:e.propagation.setBaggage(s,e.propagation.createBaggage(u))}fields(){return[n.BAGGAGE_HEADER]}};t.HttpBaggagePropagator=o}),P7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAttributeValue=t.sanitizeAttributes=void 0;function e(o){let s={};if(o==null||typeof o!="object")return s;for(let[a,c]of Object.entries(o))r(c)&&(Array.isArray(c)?s[a]=c.slice():s[a]=c);return s}t.sanitizeAttributes=e;function r(o){return o==null?!0:Array.isArray(o)?n(o):i(o)}t.isAttributeValue=r;function n(o){let s;for(let a of o)if(a!=null){if(!s){if(i(a)){s=typeof a;continue}return!1}if(typeof a!==s)return!1}return!0}function i(o){switch(typeof o){case"number":return!0;case"boolean":return!0;case"string":return!0}return!1}}),nL=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loggingErrorHandler=void 0;var e=Ke();function r(){return o=>{e.diag.error(n(o))}}t.loggingErrorHandler=r;function n(o){return typeof o=="string"?o:JSON.stringify(i(o))}function i(o){let s={},a=o;for(;a!==null;)Object.getOwnPropertyNames(a).forEach(c=>{if(s[c])return;let l=a[c];l&&(s[c]=String(l))}),a=Object.getPrototypeOf(a);return s}}),iL=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.globalErrorHandler=t.setGlobalErrorHandler=void 0;var e=nL(),r=e.loggingErrorHandler();function n(o){r=o}t.setGlobalErrorHandler=n;var i=o=>{try{r(o)}catch(s){}};t.globalErrorHandler=i}),oL=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TracesSamplerValues=void 0;var e;(function(r){r.AlwaysOff="always_off",r.AlwaysOn="always_on",r.ParentBasedAlwaysOff="parentbased_always_off",r.ParentBasedAlwaysOn="parentbased_always_on",r.ParentBasedTraceIdRatio="parentbased_traceidratio",r.TraceIdRatio="traceidratio"})(e=t.TracesSamplerValues||(t.TracesSamplerValues={}))}),sL=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseEnvironment=t.DEFAULT_ENVIRONMENT=void 0;var e=Ke(),r=oL(),n=",",i=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT"];function o(p){return i.indexOf(p)>-1}var s=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function a(p){return s.indexOf(p)>-1}t.DEFAULT_ENVIRONMENT={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:e.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"none",OTEL_TRACES_SAMPLER:r.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:""};function c(p,h,m,g=-1/0,v=1/0){if(typeof m[p]!="undefined"){let y=Number(m[p]);isNaN(y)||(y<g?h[p]=g:y>v?h[p]=v:h[p]=y)}}function l(p,h,m,g=n){let v=m[p];typeof v=="string"&&(h[p]=v.split(g).map(y=>y.trim()))}var u={ALL:e.DiagLogLevel.ALL,VERBOSE:e.DiagLogLevel.VERBOSE,DEBUG:e.DiagLogLevel.DEBUG,INFO:e.DiagLogLevel.INFO,WARN:e.DiagLogLevel.WARN,ERROR:e.DiagLogLevel.ERROR,NONE:e.DiagLogLevel.NONE};function d(p,h,m){let g=m[p];if(typeof g=="string"){let v=u[g.toUpperCase()];v!=null&&(h[p]=v)}}function f(p){let h={};for(let m in t.DEFAULT_ENVIRONMENT){let g=m;switch(g){case"OTEL_LOG_LEVEL":d(g,h,p);break;default:if(o(g))c(g,h,p);else if(a(g))l(g,h,p);else{let v=p[g];typeof v!="undefined"&&v!==null&&(h[g]=String(v))}}}return h}t.parseEnvironment=f}),I7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEnv=void 0;var e=require("os"),r=sL();function n(){let i=r.parseEnvironment(process.env);return Object.assign({HOSTNAME:e.hostname()},r.DEFAULT_ENVIRONMENT,i)}t.getEnv=n}),A7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hexToBase64=void 0;function e(r){let n=r.length,i="";for(let o=0;o<n;o+=2){let s=r.substring(o,o+2),a=parseInt(s,16);i+=String.fromCharCode(a)}return Buffer.from(i,"ascii").toString("base64")}t.hexToBase64=e}),T7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RandomIdGenerator=void 0;var e=8,r=16,n=class{constructor(){this.generateTraceId=o(r),this.generateSpanId=o(e)}};t.RandomIdGenerator=n;var i=Buffer.allocUnsafe(r);function o(s){return function(){for(let a=0;a<s/4;a++)i.writeUInt32BE(Math.random()*2**32>>>0,a*4);for(let a=0;a<s&&!(i[a]>0);a++)a===s-1&&(i[s-1]=1);return i.toString("hex",0,s)}}}),R7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.otperformance=void 0;var e=require("perf_hooks");t.otperformance=e.performance}),fC=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="0.23.0"}),D7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RpcGrpcStatusCodeValues=t.MessagingOperationValues=t.MessagingDestinationKindValues=t.HttpFlavorValues=t.NetTransportValues=t.FaasInvokedProviderValues=t.FaasDocumentOperationValues=t.FaasTriggerValues=t.DbCassandraConsistencyLevelValues=t.DbSystemValues=t.SemanticAttributes=void 0,t.SemanticAttributes={DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_METHOD:"rpc.jsonrpc.method",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message"};var e;(function(d){d.OTHER_SQL="other_sql",d.MSSQL="mssql",d.MYSQL="mysql",d.ORACLE="oracle",d.DB2="db2",d.POSTGRESQL="postgresql",d.REDSHIFT="redshift",d.HIVE="hive",d.CLOUDSCAPE="cloudscape",d.HSQLDB="hsqldb",d.PROGRESS="progress",d.MAXDB="maxdb",d.HANADB="hanadb",d.INGRES="ingres",d.FIRSTSQL="firstsql",d.EDB="edb",d.CACHE="cache",d.ADABAS="adabas",d.FIREBIRD="firebird",d.DERBY="derby",d.FILEMAKER="filemaker",d.INFORMIX="informix",d.INSTANTDB="instantdb",d.INTERBASE="interbase",d.MARIADB="mariadb",d.NETEZZA="netezza",d.PERVASIVE="pervasive",d.POINTBASE="pointbase",d.SQLITE="sqlite",d.SYBASE="sybase",d.TERADATA="teradata",d.VERTICA="vertica",d.H2="h2",d.COLDFUSION="coldfusion",d.CASSANDRA="cassandra",d.HBASE="hbase",d.MONGODB="mongodb",d.REDIS="redis",d.COUCHBASE="couchbase",d.COUCHDB="couchdb",d.COSMOSDB="cosmosdb",d.DYNAMODB="dynamodb",d.NEO4J="neo4j",d.GEODE="geode",d.ELASTICSEARCH="elasticsearch",d.MEMCACHED="memcached",d.COCKROACHDB="cockroachdb"})(e=t.DbSystemValues||(t.DbSystemValues={}));var r;(function(d){d.ALL="all",d.EACH_QUORUM="each_quorum",d.QUORUM="quorum",d.LOCAL_QUORUM="local_quorum",d.ONE="one",d.TWO="two",d.THREE="three",d.LOCAL_ONE="local_one",d.ANY="any",d.SERIAL="serial",d.LOCAL_SERIAL="local_serial"})(r=t.DbCassandraConsistencyLevelValues||(t.DbCassandraConsistencyLevelValues={}));var n;(function(d){d.DATASOURCE="datasource",d.HTTP="http",d.PUBSUB="pubsub",d.TIMER="timer",d.OTHER="other"})(n=t.FaasTriggerValues||(t.FaasTriggerValues={}));var i;(function(d){d.INSERT="insert",d.EDIT="edit",d.DELETE="delete"})(i=t.FaasDocumentOperationValues||(t.FaasDocumentOperationValues={}));var o;(function(d){d.AWS="aws",d.AZURE="azure",d.GCP="gcp"})(o=t.FaasInvokedProviderValues||(t.FaasInvokedProviderValues={}));var s;(function(d){d.IP_TCP="ip_tcp",d.IP_UDP="ip_udp",d.IP="ip",d.UNIX="unix",d.PIPE="pipe",d.INPROC="inproc",d.OTHER="other"})(s=t.NetTransportValues||(t.NetTransportValues={}));var a;(function(d){d.HTTP_1_0="1.0",d.HTTP_1_1="1.1",d.HTTP_2_0="2.0",d.SPDY="SPDY",d.QUIC="QUIC"})(a=t.HttpFlavorValues||(t.HttpFlavorValues={}));var c;(function(d){d.QUEUE="queue",d.TOPIC="topic"})(c=t.MessagingDestinationKindValues||(t.MessagingDestinationKindValues={}));var l;(function(d){d.RECEIVE="receive",d.PROCESS="process"})(l=t.MessagingOperationValues||(t.MessagingOperationValues={}));var u;(function(d){d[d.OK=0]="OK",d[d.CANCELLED=1]="CANCELLED",d[d.UNKNOWN=2]="UNKNOWN",d[d.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",d[d.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",d[d.NOT_FOUND=5]="NOT_FOUND",d[d.ALREADY_EXISTS=6]="ALREADY_EXISTS",d[d.PERMISSION_DENIED=7]="PERMISSION_DENIED",d[d.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",d[d.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",d[d.ABORTED=10]="ABORTED",d[d.OUT_OF_RANGE=11]="OUT_OF_RANGE",d[d.UNIMPLEMENTED=12]="UNIMPLEMENTED",d[d.INTERNAL=13]="INTERNAL",d[d.UNAVAILABLE=14]="UNAVAILABLE",d[d.DATA_LOSS=15]="DATA_LOSS",d[d.UNAUTHENTICATED=16]="UNAUTHENTICATED"})(u=t.RpcGrpcStatusCodeValues||(t.RpcGrpcStatusCodeValues={}))}),O7=I(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(D7(),t)}),N7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetrySdkLanguageValues=t.OsTypeValues=t.HostArchValues=t.AwsEcsLaunchtypeValues=t.CloudPlatformValues=t.CloudProviderValues=t.ResourceAttributes=void 0,t.ResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"};var e;(function(a){a.AWS="aws",a.AZURE="azure",a.GCP="gcp"})(e=t.CloudProviderValues||(t.CloudProviderValues={}));var r;(function(a){a.AWS_EC2="aws_ec2",a.AWS_ECS="aws_ecs",a.AWS_EKS="aws_eks",a.AWS_LAMBDA="aws_lambda",a.AWS_ELASTIC_BEANSTALK="aws_elastic_beanstalk",a.AZURE_VM="azure_vm",a.AZURE_CONTAINER_INSTANCES="azure_container_instances",a.AZURE_AKS="azure_aks",a.AZURE_FUNCTIONS="azure_functions",a.AZURE_APP_SERVICE="azure_app_service",a.GCP_COMPUTE_ENGINE="gcp_compute_engine",a.GCP_CLOUD_RUN="gcp_cloud_run",a.GCP_KUBERNETES_ENGINE="gcp_kubernetes_engine",a.GCP_CLOUD_FUNCTIONS="gcp_cloud_functions",a.GCP_APP_ENGINE="gcp_app_engine"})(r=t.CloudPlatformValues||(t.CloudPlatformValues={}));var n;(function(a){a.EC2="ec2",a.FARGATE="fargate"})(n=t.AwsEcsLaunchtypeValues||(t.AwsEcsLaunchtypeValues={}));var i;(function(a){a.AMD64="amd64",a.ARM32="arm32",a.ARM64="arm64",a.IA64="ia64",a.PPC32="ppc32",a.PPC64="ppc64",a.X86="x86"})(i=t.HostArchValues||(t.HostArchValues={}));var o;(function(a){a.WINDOWS="windows",a.LINUX="linux",a.DARWIN="darwin",a.FREEBSD="freebsd",a.NETBSD="netbsd",a.OPENBSD="openbsd",a.DRAGONFLYBSD="dragonflybsd",a.HPUX="hpux",a.AIX="aix",a.SOLARIS="solaris",a.Z_OS="z_os"})(o=t.OsTypeValues||(t.OsTypeValues={}));var s;(function(a){a.CPP="cpp",a.DOTNET="dotnet",a.ERLANG="erlang",a.GO="go",a.JAVA="java",a.NODEJS="nodejs",a.PHP="php",a.PYTHON="python",a.RUBY="ruby",a.WEBJS="webjs"})(s=t.TelemetrySdkLanguageValues||(t.TelemetrySdkLanguageValues={}))}),L7=I(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(N7(),t)}),zl=I(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(O7(),t),r(L7(),t)}),F7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SDK_INFO=void 0;var e=fC(),r=zl();t.SDK_INFO={[r.ResourceAttributes.TELEMETRY_SDK_NAME]:"opentelemetry",[r.ResourceAttributes.PROCESS_RUNTIME_NAME]:"node",[r.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:r.TelemetrySdkLanguageValues.NODEJS,[r.ResourceAttributes.TELEMETRY_SDK_VERSION]:e.VERSION}}),M7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unrefTimer=void 0;function e(r){r.unref()}t.unrefTimer=e}),q7=I(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(I7(),t),r(A7(),t),r(T7(),t),r(R7(),t),r(F7(),t),r(M7(),t)}),aL=I(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(q7(),t)}),$7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTimeInput=t.isTimeInputHrTime=t.hrTimeToMicroseconds=t.hrTimeToMilliseconds=t.hrTimeToNanoseconds=t.hrTimeToTimeStamp=t.hrTimeDuration=t.timeInputToHrTime=t.hrTime=void 0;var e=aL(),r=9,n=Math.pow(10,r);function i(m){let g=m/1e3,v=Math.trunc(g),y=Number((g-v).toFixed(r))*n;return[v,y]}function o(){let m=e.otperformance.timeOrigin;if(typeof m!="number"){let g=e.otperformance;m=g.timing&&g.timing.fetchStart}return m}function s(m){let g=i(o()),v=i(typeof m=="number"?m:e.otperformance.now()),y=g[0]+v[0],C=g[1]+v[1];return C>n&&(C-=n,y+=1),[y,C]}t.hrTime=s;function a(m){if(p(m))return m;if(typeof m=="number")return m<o()?s(m):i(m);if(m instanceof Date)return i(m.getTime());throw TypeError("Invalid input type")}t.timeInputToHrTime=a;function c(m,g){let v=g[0]-m[0],y=g[1]-m[1];return y<0&&(v-=1,y+=n),[v,y]}t.hrTimeDuration=c;function l(m){let g=r,v=`${"0".repeat(g)}${m[1]}Z`,y=v.substr(v.length-g-1);return new Date(m[0]*1e3).toISOString().replace("000Z",y)}t.hrTimeToTimeStamp=l;function u(m){return m[0]*n+m[1]}t.hrTimeToNanoseconds=u;function d(m){return Math.round(m[0]*1e3+m[1]/1e6)}t.hrTimeToMilliseconds=d;function f(m){return Math.round(m[0]*1e6+m[1]/1e3)}t.hrTimeToMicroseconds=f;function p(m){return Array.isArray(m)&&m.length===2&&typeof m[0]=="number"&&typeof m[1]=="number"}t.isTimeInputHrTime=p;function h(m){return p(m)||typeof m=="number"||m instanceof Date}t.isTimeInput=h}),j7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),U7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExportResultCode=void 0;var e;(function(r){r[r.SUCCESS=0]="SUCCESS",r[r.FAILED=1]="FAILED"})(e=t.ExportResultCode||(t.ExportResultCode={}))}),B7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompositePropagator=void 0;var e=Ke(),r=class{constructor(n={}){var i;this._propagators=(i=n.propagators)!==null&&i!==void 0?i:[],this._fields=Array.from(new Set(this._propagators.map(o=>typeof o.fields=="function"?o.fields():[]).reduce((o,s)=>o.concat(s),[])))}inject(n,i,o){for(let s of this._propagators)try{s.inject(n,i,o)}catch(a){e.diag.warn(`Failed to inject with ${s.constructor.name}. Err: ${a.message}`)}}extract(n,i,o){return this._propagators.reduce((s,a)=>{try{return a.extract(s,i,o)}catch(c){e.diag.warn(`Failed to inject with ${a.constructor.name}. Err: ${c.message}`)}return s},n)}fields(){return this._fields.slice()}};t.CompositePropagator=r}),H7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateValue=t.validateKey=void 0;var e="[_0-9a-z-*/]",r=`[a-z]${e}{0,255}`,n=`[a-z0-9]${e}{0,240}@[a-z]${e}{0,13}`,i=new RegExp(`^(?:${r}|${n})$`),o=/^[ -~]{0,255}[!-~]$/,s=/,|=/;function a(l){return i.test(l)}t.validateKey=a;function c(l){return o.test(l)&&!s.test(l)}t.validateValue=c}),cL=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TraceState=void 0;var e=H7(),r=32,n=512,i=",",o="=",s=class{constructor(a){this._internalState=new Map,a&&this._parse(a)}set(a,c){let l=this._clone();return l._internalState.has(a)&&l._internalState.delete(a),l._internalState.set(a,c),l}unset(a){let c=this._clone();return c._internalState.delete(a),c}get(a){return this._internalState.get(a)}serialize(){return this._keys().reduce((a,c)=>(a.push(c+o+this.get(c)),a),[]).join(i)}_parse(a){a.length>n||(this._internalState=a.split(i).reverse().reduce((c,l)=>{let u=l.trim(),d=u.indexOf(o);if(d!==-1){let f=u.slice(0,d),p=u.slice(d+1,l.length);e.validateKey(f)&&e.validateValue(p)&&c.set(f,p)}return c},new Map),this._internalState.size>r&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,r))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let a=new s;return a._internalState=new Map(this._internalState),a}};t.TraceState=s}),V7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HttpTraceContextPropagator=t.parseTraceParent=t.TRACE_STATE_HEADER=t.TRACE_PARENT_HEADER=void 0;var e=Ke(),r=dC(),n=cL();t.TRACE_PARENT_HEADER="traceparent",t.TRACE_STATE_HEADER="tracestate";var i="00",o="(?!ff)[\\da-f]{2}",s="(?![0]{32})[\\da-f]{32}",a="(?![0]{16})[\\da-f]{16}",c="[\\da-f]{2}",l=new RegExp(`^\\s?(${o})-(${s})-(${a})-(${c})(-.*)?\\s?$`);function u(f){let p=l.exec(f);return!p||p[1]==="00"&&p[5]?null:{traceId:p[2],spanId:p[3],traceFlags:parseInt(p[4],16)}}t.parseTraceParent=u;var d=class{inject(f,p,h){let m=e.trace.getSpanContext(f);if(!m||r.isTracingSuppressed(f)||!e.isSpanContextValid(m))return;let g=`${i}-${m.traceId}-${m.spanId}-0${Number(m.traceFlags||e.TraceFlags.NONE).toString(16)}`;h.set(p,t.TRACE_PARENT_HEADER,g),m.traceState&&h.set(p,t.TRACE_STATE_HEADER,m.traceState.serialize())}extract(f,p,h){let m=h.get(p,t.TRACE_PARENT_HEADER);if(!m)return f;let g=Array.isArray(m)?m[0]:m;if(typeof g!="string")return f;let v=u(g);if(!v)return f;v.isRemote=!0;let y=h.get(p,t.TRACE_STATE_HEADER);if(y){let C=Array.isArray(y)?y.join(","):y;v.traceState=new n.TraceState(typeof C=="string"?C:void 0)}return e.trace.setSpanContext(f,v)}fields(){return[t.TRACE_PARENT_HEADER,t.TRACE_STATE_HEADER]}};t.HttpTraceContextPropagator=d}),G7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),W7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRPCMetadata=t.deleteRPCMetadata=t.setRPCMetadata=t.RPCType=void 0;var e=Ke(),r=e.createContextKey("OpenTelemetry SDK Context Key RPC_METADATA"),n;(function(a){a.HTTP="http"})(n=t.RPCType||(t.RPCType={}));function i(a,c){return a.setValue(r,c)}t.setRPCMetadata=i;function o(a){return a.deleteValue(r)}t.deleteRPCMetadata=o;function s(a){return a.getValue(r)}t.getRPCMetadata=s}),lL=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlwaysOffSampler=void 0;var e=Ke(),r=class{shouldSample(){return{decision:e.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}};t.AlwaysOffSampler=r}),uL=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlwaysOnSampler=void 0;var e=Ke(),r=class{shouldSample(){return{decision:e.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}};t.AlwaysOnSampler=r}),z7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParentBasedSampler=void 0;var e=Ke(),r=iL(),n=lL(),i=uL(),o=class{constructor(s){var a,c,l,u;this._root=s.root,this._root||(r.globalErrorHandler(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new i.AlwaysOnSampler),this._remoteParentSampled=(a=s.remoteParentSampled)!==null&&a!==void 0?a:new i.AlwaysOnSampler,this._remoteParentNotSampled=(c=s.remoteParentNotSampled)!==null&&c!==void 0?c:new n.AlwaysOffSampler,this._localParentSampled=(l=s.localParentSampled)!==null&&l!==void 0?l:new i.AlwaysOnSampler,this._localParentNotSampled=(u=s.localParentNotSampled)!==null&&u!==void 0?u:new n.AlwaysOffSampler}shouldSample(s,a,c,l,u,d){let f=e.trace.getSpanContext(s);return!f||!e.isSpanContextValid(f)?this._root.shouldSample(s,a,c,l,u,d):f.isRemote?f.traceFlags&e.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(s,a,c,l,u,d):this._remoteParentNotSampled.shouldSample(s,a,c,l,u,d):f.traceFlags&e.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(s,a,c,l,u,d):this._localParentNotSampled.shouldSample(s,a,c,l,u,d)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}};t.ParentBasedSampler=o}),K7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TraceIdRatioBasedSampler=void 0;var e=Ke(),r=class{constructor(n=0){this._ratio=n,this._ratio=this._normalize(n),this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(n,i){return{decision:e.isValidTraceId(i)&&this._accumulate(i)<this._upperBound?e.SamplingDecision.RECORD_AND_SAMPLED:e.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(n){return typeof n!="number"||isNaN(n)?0:n>=1?1:n<=0?0:n}_accumulate(n){let i=0;for(let o=0;o<n.length/8;o++){let s=o*8,a=parseInt(n.slice(s,s+8),16);i=(i^a)>>>0}return i}};t.TraceIdRatioBasedSampler=r}),Y7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isUrlIgnored=t.urlMatches=void 0;function e(n,i){return typeof i=="string"?n===i:i.test(n)}t.urlMatches=e;function r(n,i){if(!i)return!1;for(let o of i)if(e(n,o))return!0;return!1}t.isUrlIgnored=r}),Q7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isWrapped=void 0;function e(r){return typeof r=="function"&&typeof r.__original=="function"&&typeof r.__unwrap=="function"&&r.__wrapped===!0}t.isWrapped=e}),vn=I(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),t.baggageUtils=void 0,r(k7(),t),r(P7(),t),r(iL(),t),r(nL(),t),r($7(),t),r(j7(),t),r(U7(),t),r(fC(),t),t.baggageUtils=rL(),r(aL(),t),r(B7(),t),r(V7(),t),r(G7(),t),r(W7(),t),r(lL(),t),r(uL(),t),r(z7(),t),r(K7(),t),r(dC(),t),r(cL(),t),r(sL(),t),r(oL(),t),r(Y7(),t),r(Q7(),t),r(fC(),t)}),X7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExceptionEventName=void 0,t.ExceptionEventName="exception"}),dL=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Span=void 0;var e=Ke(),r=vn(),n=zl(),i=X7(),o=class{constructor(s,a,c,l,u,d,f=[],p=r.hrTime()){this.attributes={},this.links=[],this.events=[],this.status={code:e.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=c,this._spanContext=l,this.parentSpanId=d,this.kind=u,this.links=f,this.startTime=r.timeInputToHrTime(p),this.resource=s.resource,this.instrumentationLibrary=s.instrumentationLibrary,this._spanLimits=s.getSpanLimits(),this._spanProcessor=s.getActiveSpanProcessor(),this._spanProcessor.onStart(this,a)}spanContext(){return this._spanContext}setAttribute(s,a){return a==null||this._isSpanEnded()?this:s.length===0?(e.diag.warn(`Invalid attribute key: ${s}`),this):r.isAttributeValue(a)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,s)?this:(this.attributes[s]=a,this):(e.diag.warn(`Invalid attribute value set for key: ${s}`),this)}setAttributes(s){for(let[a,c]of Object.entries(s))this.setAttribute(a,c);return this}addEvent(s,a,c){return this._isSpanEnded()?this:(this.events.length>=this._spanLimits.eventCountLimit&&(e.diag.warn("Dropping extra events."),this.events.shift()),r.isTimeInput(a)&&(typeof c=="undefined"&&(c=a),a=void 0),typeof c=="undefined"&&(c=r.hrTime()),this.events.push({name:s,attributes:a,time:r.timeInputToHrTime(c)}),this)}setStatus(s){return this._isSpanEnded()?this:(this.status=s,this)}updateName(s){return this._isSpanEnded()?this:(this.name=s,this)}end(s=r.hrTime()){if(this._isSpanEnded()){e.diag.error("You can only call end() on a span once.");return}this._ended=!0,this.endTime=r.timeInputToHrTime(s),this._duration=r.hrTimeDuration(this.startTime,this.endTime),this._duration[0]<0&&e.diag.warn("Inconsistent start and end time, startTime > endTime",this.startTime,this.endTime),this._spanProcessor.onEnd(this)}isRecording(){return this._ended===!1}recordException(s,a=r.hrTime()){let c={};typeof s=="string"?c[n.SemanticAttributes.EXCEPTION_MESSAGE]=s:s&&(s.code?c[n.SemanticAttributes.EXCEPTION_TYPE]=s.code.toString():s.name&&(c[n.SemanticAttributes.EXCEPTION_TYPE]=s.name),s.message&&(c[n.SemanticAttributes.EXCEPTION_MESSAGE]=s.message),s.stack&&(c[n.SemanticAttributes.EXCEPTION_STACKTRACE]=s.stack)),c[n.SemanticAttributes.EXCEPTION_TYPE]||c[n.SemanticAttributes.EXCEPTION_MESSAGE]?this.addEvent(i.ExceptionEventName,c,a):e.diag.warn(`Failed to record an exception ${s}`)}get duration(){return this._duration}get ended(){return this._ended}_isSpanEnded(){return this._ended&&e.diag.warn("Can not execute the operation on ended Span {traceId: %s, spanId: %s}",this._spanContext.traceId,this._spanContext.spanId),this._ended}};t.Span=o}),fL=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildSamplerFromEnv=t.DEFAULT_CONFIG=void 0;var e=Ke(),r=vn(),n=r.getEnv(),i=r.TracesSamplerValues.AlwaysOn;t.DEFAULT_CONFIG={sampler:o(n),forceFlushTimeoutMillis:3e4,spanLimits:{attributeCountLimit:r.getEnv().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:r.getEnv().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:r.getEnv().OTEL_SPAN_EVENT_COUNT_LIMIT}};function o(c=r.getEnv()){switch(c.OTEL_TRACES_SAMPLER){case r.TracesSamplerValues.AlwaysOn:return new r.AlwaysOnSampler;case r.TracesSamplerValues.AlwaysOff:return new r.AlwaysOffSampler;case r.TracesSamplerValues.ParentBasedAlwaysOn:return new r.ParentBasedSampler({root:new r.AlwaysOnSampler});case r.TracesSamplerValues.ParentBasedAlwaysOff:return new r.ParentBasedSampler({root:new r.AlwaysOffSampler});case r.TracesSamplerValues.TraceIdRatio:return new r.TraceIdRatioBasedSampler(a(c));case r.TracesSamplerValues.ParentBasedTraceIdRatio:return new r.ParentBasedSampler({root:new r.TraceIdRatioBasedSampler(a(c))});default:return e.diag.error(`OTEL_TRACES_SAMPLER value "${c.OTEL_TRACES_SAMPLER} invalid, defaulting to ${i}".`),new r.AlwaysOnSampler}}t.buildSamplerFromEnv=o;var s=1;function a(c){if(c.OTEL_TRACES_SAMPLER_ARG===void 0||c.OTEL_TRACES_SAMPLER_ARG==="")return e.diag.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${s}.`),s;let l=Number(c.OTEL_TRACES_SAMPLER_ARG);return isNaN(l)?(e.diag.error(`OTEL_TRACES_SAMPLER_ARG=${c.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to ${s}.`),s):l<0||l>1?(e.diag.error(`OTEL_TRACES_SAMPLER_ARG=${c.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to ${s}.`),s):l}}),J7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeConfig=void 0;var e=fL();function r(n){let i={sampler:e.buildSamplerFromEnv()},o=Object.assign({},e.DEFAULT_CONFIG,i,n);return o.spanLimits=Object.assign({},e.DEFAULT_CONFIG.spanLimits,n.spanLimits||{}),o}t.mergeConfig=r}),Z7=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tracer=void 0;var e=Ke(),r=vn(),n=dL(),i=J7(),o=class{constructor(a,c,l){this._tracerProvider=l;let u=i.mergeConfig(c);this._sampler=u.sampler,this._spanLimits=u.spanLimits,this._idGenerator=c.idGenerator||new r.RandomIdGenerator,this.resource=l.resource,this.instrumentationLibrary=a}startSpan(a,c={},l=e.context.active()){var u,d;if(r.isTracingSuppressed(l))return e.diag.debug("Instrumentation suppressed, returning Noop Span"),e.trace.wrapSpanContext(e.INVALID_SPAN_CONTEXT);let f=s(c,l),p=this._idGenerator.generateSpanId(),h,m,g;!f||!e.trace.isSpanContextValid(f)?h=this._idGenerator.generateTraceId():(h=f.traceId,m=f.traceState,g=f.spanId);let v=(u=c.kind)!==null&&u!==void 0?u:e.SpanKind.INTERNAL,y=(d=c.links)!==null&&d!==void 0?d:[],C=r.sanitizeAttributes(c.attributes),w=this._sampler.shouldSample(c.root?e.trace.setSpanContext(l,e.INVALID_SPAN_CONTEXT):l,h,a,v,C,y),b=w.decision===e.SamplingDecision.RECORD_AND_SAMPLED?e.TraceFlags.SAMPLED:e.TraceFlags.NONE,E={traceId:h,spanId:p,traceFlags:b,traceState:m};if(w.decision===e.SamplingDecision.NOT_RECORD)return e.diag.debug("Recording is off, propagating context in a non-recording span"),e.trace.wrapSpanContext(E);let S=new n.Span(this,l,a,E,v,g,y,c.startTime);return S.setAttributes(Object.assign(C,w.attributes)),S}startActiveSpan(a,c,l,u){let d,f,p;if(arguments.length<2)return;arguments.length===2?p=c:arguments.length===3?(d=c,p=l):(d=c,f=l,p=u);let h=f!=null?f:e.context.active(),m=this.startSpan(a,d,h),g=e.trace.setSpan(h,m);return e.context.with(g,p,void 0,m)}getSpanLimits(){return this._spanLimits}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}};t.Tracer=o;function s(a,c){if(!a.root)return e.trace.getSpanContext(c)}}),eQ=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultServiceName=void 0;function e(){return`unknown_service:${process.argv0}`}t.defaultServiceName=e}),tQ=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.detectResources=void 0;var e=hL(),r=Ke(),n=require("util"),i=async(s={})=>{let a=Object.assign(s),c=await Promise.all((a.detectors||[]).map(async l=>{try{let u=await l.detect(a);return r.diag.debug(`${l.constructor.name} found resource.`,u),u}catch(u){return r.diag.debug(`${l.constructor.name} failed: ${u.message}`),e.Resource.empty()}}));return o(c),c.reduce((l,u)=>l.merge(u),e.Resource.empty())};t.detectResources=i;var o=s=>{s.forEach(a=>{if(Object.keys(a.attributes).length>0){let c=n.inspect(a.attributes,{depth:2,breakLength:1/0,sorted:!0,compact:!1});r.diag.verbose(c)}})}}),rQ=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.envDetector=void 0;var e=Ke(),r=vn(),n=zl(),i=pC(),o=class{constructor(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}async detect(s){let a={},c=r.getEnv(),l=c.OTEL_RESOURCE_ATTRIBUTES,u=c.OTEL_SERVICE_NAME;if(l)try{let d=this._parseResourceAttributes(l);Object.assign(a,d)}catch(d){e.diag.debug(`EnvDetector failed: ${d.message}`)}return u&&(a[n.ResourceAttributes.SERVICE_NAME]=u),new i.Resource(a)}_parseResourceAttributes(s){if(!s)return{};let a={},c=s.split(this._COMMA_SEPARATOR,-1);for(let l of c){let u=l.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(u.length!==2)continue;let[d,f]=u;if(d=d.trim(),f=f.trim().split('^"|"$').join(""),!this._isValidAndNotEmpty(d))throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`);if(!this._isValid(f))throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`);a[d]=f}return a}_isValid(s){return s.length<=this._MAX_LENGTH&&this._isPrintableString(s)}_isPrintableString(s){for(let a=0;a<s.length;a++){let c=s.charAt(a);if(c<=" "||c>="~")return!1}return!0}_isValidAndNotEmpty(s){return s.length>0&&this._isValid(s)}};t.envDetector=new o}),nQ=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processDetector=void 0;var e=Ke(),r=zl(),n=pC(),i=class{async detect(o){let s={[r.ResourceAttributes.PROCESS_PID]:process.pid,[r.ResourceAttributes.PROCESS_EXECUTABLE_NAME]:process.title||"",[r.ResourceAttributes.PROCESS_COMMAND]:process.argv[1]||"",[r.ResourceAttributes.PROCESS_COMMAND_LINE]:process.argv.join(" ")||""};return this._getResourceAttributes(s,o)}_getResourceAttributes(o,s){return o[r.ResourceAttributes.PROCESS_EXECUTABLE_NAME]===""||o[r.ResourceAttributes.PROCESS_EXECUTABLE_PATH]===""||o[r.ResourceAttributes.PROCESS_COMMAND]===""||o[r.ResourceAttributes.PROCESS_COMMAND_LINE]===""?(e.diag.debug("ProcessDetector failed: Unable to find required process resources. "),n.Resource.empty()):new n.Resource(Object.assign({},o))}};t.processDetector=new i}),iQ=I(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(rQ(),t),r(nQ(),t)}),oQ=I(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(eQ(),t),r(tQ(),t),r(iQ(),t)}),pL=I(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(oQ(),t)}),hL=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Resource=void 0;var e=zl(),r=vn(),n=pL(),i=class{constructor(o){this.attributes=o}static empty(){return i.EMPTY}static default(){return new i({[e.ResourceAttributes.SERVICE_NAME]:n.defaultServiceName(),[e.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:r.SDK_INFO[e.ResourceAttributes.TELEMETRY_SDK_LANGUAGE],[e.ResourceAttributes.TELEMETRY_SDK_NAME]:r.SDK_INFO[e.ResourceAttributes.TELEMETRY_SDK_NAME],[e.ResourceAttributes.TELEMETRY_SDK_VERSION]:r.SDK_INFO[e.ResourceAttributes.TELEMETRY_SDK_VERSION]})}merge(o){if(!o||!Object.keys(o.attributes).length)return this;let s=Object.assign({},this.attributes,o.attributes);return new i(s)}};t.Resource=i,i.EMPTY=new i({})}),sQ=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),aQ=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),pC=I(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(hL(),t),r(pL(),t),r(sQ(),t),r(aQ(),t)}),cQ=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultiSpanProcessor=void 0;var e=vn(),r=class{constructor(n){this._spanProcessors=n}forceFlush(){let n=[];for(let i of this._spanProcessors)n.push(i.forceFlush());return new Promise(i=>{Promise.all(n).then(()=>{i()}).catch(o=>{e.globalErrorHandler(o||new Error("MultiSpanProcessor: forceFlush failed")),i()})})}onStart(n,i){for(let o of this._spanProcessors)o.onStart(n,i)}onEnd(n){for(let i of this._spanProcessors)i.onEnd(n)}shutdown(){let n=[];for(let i of this._spanProcessors)n.push(i.shutdown());return new Promise((i,o)=>{Promise.all(n).then(()=>{i()},o)})}};t.MultiSpanProcessor=r}),mL=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoopSpanProcessor=void 0;var e=class{onStart(r,n){}onEnd(r){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}};t.NoopSpanProcessor=e}),lQ=I((t,e)=>{var r=200,n="__lodash_hash_undefined__",i=800,o=16,s=9007199254740991,a="[object Arguments]",c="[object Array]",l="[object AsyncFunction]",u="[object Boolean]",d="[object Date]",f="[object Error]",p="[object Function]",h="[object GeneratorFunction]",m="[object Map]",g="[object Number]",v="[object Null]",y="[object Object]",C="[object Proxy]",w="[object RegExp]",b="[object Set]",E="[object String]",S="[object Undefined]",x="[object WeakMap]",T="[object ArrayBuffer]",R="[object DataView]",q="[object Float32Array]",B="[object Float64Array]",te="[object Int8Array]",ee="[object Int16Array]",H="[object Int32Array]",$="[object Uint8Array]",A="[object Uint8ClampedArray]",D="[object Uint16Array]",F="[object Uint32Array]",G=/[\\^$.*+?()[\]{}|]/g,K=/^\[object .+?Constructor\]$/,z=/^(?:0|[1-9]\d*)$/,J={};J[q]=J[B]=J[te]=J[ee]=J[H]=J[$]=J[A]=J[D]=J[F]=!0,J[a]=J[c]=J[T]=J[u]=J[R]=J[d]=J[f]=J[p]=J[m]=J[g]=J[y]=J[w]=J[b]=J[E]=J[x]=!1;var he=typeof global=="object"&&global&&global.Object===Object&&global,me=typeof self=="object"&&self&&self.Object===Object&&self,He=he||me||Function("return this")(),Ne=typeof t=="object"&&t&&!t.nodeType&&t,Ve=Ne&&typeof e=="object"&&e&&!e.nodeType&&e,Pt=Ve&&Ve.exports===Ne,vr=Pt&&he.process,fe=function(){try{var P=Ve&&Ve.require&&Ve.require("util").types;return P||vr&&vr.binding&&vr.binding("util")}catch(N){}}(),ue=fe&&fe.isTypedArray;function Me(P,N,j){switch(j.length){case 0:return P.call(N);case 1:return P.call(N,j[0]);case 2:return P.call(N,j[0],j[1]);case 3:return P.call(N,j[0],j[1],j[2])}return P.apply(N,j)}function It(P,N){for(var j=-1,ie=Array(P);++j<P;)ie[j]=N(j);return ie}function Km(P){return function(N){return P(N)}}function Ym(P,N){return P==null?void 0:P[N]}function be(P,N){return function(j){return P(N(j))}}var Qm=Array.prototype,Xm=Function.prototype,Po=Object.prototype,kn=He["__core-js_shared__"],Rs=Xm.toString,rn=Po.hasOwnProperty,ed=function(){var P=/[^.]+$/.exec(kn&&kn.keys&&kn.keys.IE_PROTO||"");return P?"Symbol(src)_1."+P:""}(),td=Po.toString,nn=Rs.call(Object),Jm=RegExp("^"+Rs.call(rn).replace(G,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ds=Pt?He.Buffer:void 0,rd=He.Symbol,nd=He.Uint8Array,ki=Ds?Ds.allocUnsafe:void 0,Io=be(Object.getPrototypeOf,Object),Os=Object.create,id=Po.propertyIsEnumerable,wc=Qm.splice,on=rd?rd.toStringTag:void 0,Xn=function(){try{var P=pg(Object,"defineProperty");return P({},"",{}),P}catch(N){}}(),rr=Ds?Ds.isBuffer:void 0,Pi=Math.max,Ye=Date.now,od=pg(He,"Map"),Ao=pg(Object,"create"),At=function(){function P(){}return function(N){if(!To(N))return{};if(Os)return Os(N);P.prototype=N;var j=new P;return P.prototype=void 0,j}}();function Jn(P){var N=-1,j=P==null?0:P.length;for(this.clear();++N<j;){var ie=P[N];this.set(ie[0],ie[1])}}function Zm(){this.__data__=Ao?Ao(null):{},this.size=0}function eg(P){var N=this.has(P)&&delete this.__data__[P];return this.size-=N?1:0,N}function tg(P){var N=this.__data__;if(Ao){var j=N[P];return j===n?void 0:j}return rn.call(N,P)?N[P]:void 0}function rg(P){var N=this.__data__;return Ao?N[P]!==void 0:rn.call(N,P)}function ng(P,N){var j=this.__data__;return this.size+=this.has(P)?0:1,j[P]=Ao&&N===void 0?n:N,this}Jn.prototype.clear=Zm,Jn.prototype.delete=eg,Jn.prototype.get=tg,Jn.prototype.has=rg,Jn.prototype.set=ng;function sn(P){var N=-1,j=P==null?0:P.length;for(this.clear();++N<j;){var ie=P[N];this.set(ie[0],ie[1])}}function ig(){this.__data__=[],this.size=0}function og(P){var N=this.__data__,j=ye(N,P);if(j<0)return!1;var ie=N.length-1;return j==ie?N.pop():wc.call(N,j,1),--this.size,!0}function Ns(P){var N=this.__data__,j=ye(N,P);return j<0?void 0:N[j][1]}function sg(P){return ye(this.__data__,P)>-1}function ag(P,N){var j=this.__data__,ie=ye(j,P);return ie<0?(++this.size,j.push([P,N])):j[ie][1]=N,this}sn.prototype.clear=ig,sn.prototype.delete=og,sn.prototype.get=Ns,sn.prototype.has=sg,sn.prototype.set=ag;function Ii(P){var N=-1,j=P==null?0:P.length;for(this.clear();++N<j;){var ie=P[N];this.set(ie[0],ie[1])}}function cg(){this.size=0,this.__data__={hash:new Jn,map:new(od||sn),string:new Jn}}function lg(P){var N=sd(this,P).delete(P);return this.size-=N?1:0,N}function ug(P){return sd(this,P).get(P)}function Cc(P){return sd(this,P).has(P)}function dg(P,N){var j=sd(this,P),ie=j.size;return j.set(P,N),this.size+=j.size==ie?0:1,this}Ii.prototype.clear=cg,Ii.prototype.delete=lg,Ii.prototype.get=ug,Ii.prototype.has=Cc,Ii.prototype.set=dg;function Ai(P){var N=this.__data__=new sn(P);this.size=N.size}function fg(){this.__data__=new sn,this.size=0}function k(P){var N=this.__data__,j=N.delete(P);return this.size=N.size,j}function O(P){return this.__data__.get(P)}function M(P){return this.__data__.has(P)}function Y(P,N){var j=this.__data__;if(j instanceof sn){var ie=j.__data__;if(!od||ie.length<r-1)return ie.push([P,N]),this.size=++j.size,this;j=this.__data__=new Ii(ie)}return j.set(P,N),this.size=j.size,this}Ai.prototype.clear=fg,Ai.prototype.delete=k,Ai.prototype.get=O,Ai.prototype.has=M,Ai.prototype.set=Y;function X(P,N){var j=gg(P),ie=!j&&mg(P),ke=!j&&!ie&&R_(P),je=!j&&!ie&&!ke&&O_(P),Xe=j||ie||ke||je,Se=Xe?It(P.length,String):[],Je=Se.length;for(var Rr in P)(N||rn.call(P,Rr))&&!(Xe&&(Rr=="length"||ke&&(Rr=="offset"||Rr=="parent")||je&&(Rr=="buffer"||Rr=="byteLength"||Rr=="byteOffset")||A_(Rr,Je)))&&Se.push(Rr);return Se}function re(P,N,j){(j!==void 0&&!ad(P[N],j)||j===void 0&&!(N in P))&&we(P,N,j)}function ae(P,N,j){var ie=P[N];(!(rn.call(P,N)&&ad(ie,j))||j===void 0&&!(N in P))&&we(P,N,j)}function ye(P,N){for(var j=P.length;j--;)if(ad(P[j][0],N))return j;return-1}function we(P,N,j){N=="__proto__"&&Xn?Xn(P,N,{configurable:!0,enumerable:!0,value:j,writable:!0}):P[N]=j}var Tr=TH();function Kt(P){return P==null?P===void 0?S:v:on&&on in Object(P)?RH(P):MH(P)}function Yt(P){return bc(P)&&Kt(P)==a}function Qt(P){if(!To(P)||LH(P))return!1;var N=yg(P)?Jm:K;return N.test(UH(P))}function Pn(P){return bc(P)&&D_(P.length)&&!!J[Kt(P)]}function CH(P){if(!To(P))return FH(P);var N=T_(P),j=[];for(var ie in P)ie=="constructor"&&(N||!rn.call(P,ie))||j.push(ie);return j}function I_(P,N,j,ie,ke){P!==N&&Tr(N,function(je,Xe){if(ke||(ke=new Ai),To(je))bH(P,N,Xe,j,I_,ie,ke);else{var Se=ie?ie(hg(P,Xe),je,Xe+"",P,N,ke):void 0;Se===void 0&&(Se=je),re(P,Xe,Se)}},N_)}function bH(P,N,j,ie,ke,je,Xe){var Se=hg(P,j),Je=hg(N,j),Rr=Xe.get(Je);if(Rr){re(P,j,Rr);return}var yr=je?je(Se,Je,j+"",P,N,Xe):void 0,Ec=yr===void 0;if(Ec){var wg=gg(Je),Cg=!wg&&R_(Je),F_=!wg&&!Cg&&O_(Je);yr=Je,wg||Cg||F_?gg(Se)?yr=Se:BH(Se)?yr=PH(Se):Cg?(Ec=!1,yr=SH(Je,!0)):F_?(Ec=!1,yr=kH(Je,!0)):yr=[]:HH(Je)||mg(Je)?(yr=Se,mg(Se)?yr=VH(Se):(!To(Se)||yg(Se))&&(yr=DH(Je))):Ec=!1}Ec&&(Xe.set(Je,yr),ke(yr,Je,ie,je,Xe),Xe.delete(Je)),re(P,j,yr)}function EH(P,N){return $H(qH(P,N,L_),P+"")}var _H=Xn?function(P,N){return Xn(P,"toString",{configurable:!0,enumerable:!1,value:WH(N),writable:!0})}:L_;function SH(P,N){if(N)return P.slice();var j=P.length,ie=ki?ki(j):new P.constructor(j);return P.copy(ie),ie}function xH(P){var N=new P.constructor(P.byteLength);return new nd(N).set(new nd(P)),N}function kH(P,N){var j=N?xH(P.buffer):P.buffer;return new P.constructor(j,P.byteOffset,P.length)}function PH(P,N){var j=-1,ie=P.length;for(N||(N=Array(ie));++j<ie;)N[j]=P[j];return N}function IH(P,N,j,ie){var ke=!j;j||(j={});for(var je=-1,Xe=N.length;++je<Xe;){var Se=N[je],Je=ie?ie(j[Se],P[Se],Se,j,P):void 0;Je===void 0&&(Je=P[Se]),ke?we(j,Se,Je):ae(j,Se,Je)}return j}function AH(P){return EH(function(N,j){var ie=-1,ke=j.length,je=ke>1?j[ke-1]:void 0,Xe=ke>2?j[2]:void 0;for(je=P.length>3&&typeof je=="function"?(ke--,je):void 0,Xe&&OH(j[0],j[1],Xe)&&(je=ke<3?void 0:je,ke=1),N=Object(N);++ie<ke;){var Se=j[ie];Se&&P(N,Se,ie,je)}return N})}function TH(P){return function(N,j,ie){for(var ke=-1,je=Object(N),Xe=ie(N),Se=Xe.length;Se--;){var Je=Xe[P?Se:++ke];if(j(je[Je],Je,je)===!1)break}return N}}function sd(P,N){var j=P.__data__;return NH(N)?j[typeof N=="string"?"string":"hash"]:j.map}function pg(P,N){var j=Ym(P,N);return Qt(j)?j:void 0}function RH(P){var N=rn.call(P,on),j=P[on];try{P[on]=void 0;var ie=!0}catch(je){}var ke=td.call(P);return ie&&(N?P[on]=j:delete P[on]),ke}function DH(P){return typeof P.constructor=="function"&&!T_(P)?At(Io(P)):{}}function A_(P,N){var j=typeof P;return N=N==null?s:N,!!N&&(j=="number"||j!="symbol"&&z.test(P))&&P>-1&&P%1==0&&P<N}function OH(P,N,j){if(!To(j))return!1;var ie=typeof N;return(ie=="number"?vg(j)&&A_(N,j.length):ie=="string"&&N in j)?ad(j[N],P):!1}function NH(P){var N=typeof P;return N=="string"||N=="number"||N=="symbol"||N=="boolean"?P!=="__proto__":P===null}function LH(P){return!!ed&&ed in P}function T_(P){var N=P&&P.constructor,j=typeof N=="function"&&N.prototype||Po;return P===j}function FH(P){var N=[];if(P!=null)for(var j in Object(P))N.push(j);return N}function MH(P){return td.call(P)}function qH(P,N,j){return N=Pi(N===void 0?P.length-1:N,0),function(){for(var ie=arguments,ke=-1,je=Pi(ie.length-N,0),Xe=Array(je);++ke<je;)Xe[ke]=ie[N+ke];ke=-1;for(var Se=Array(N+1);++ke<N;)Se[ke]=ie[ke];return Se[N]=j(Xe),Me(P,this,Se)}}function hg(P,N){if(!(N==="constructor"&&typeof P[N]=="function")&&N!="__proto__")return P[N]}var $H=jH(_H);function jH(P){var N=0,j=0;return function(){var ie=Ye(),ke=o-(ie-j);if(j=ie,ke>0){if(++N>=i)return arguments[0]}else N=0;return P.apply(void 0,arguments)}}function UH(P){if(P!=null){try{return Rs.call(P)}catch(N){}try{return P+""}catch(N){}}return""}function ad(P,N){return P===N||P!==P&&N!==N}var mg=Yt(function(){return arguments}())?Yt:function(P){return bc(P)&&rn.call(P,"callee")&&!id.call(P,"callee")},gg=Array.isArray;function vg(P){return P!=null&&D_(P.length)&&!yg(P)}function BH(P){return bc(P)&&vg(P)}var R_=rr||zH;function yg(P){if(!To(P))return!1;var N=Kt(P);return N==p||N==h||N==l||N==C}function D_(P){return typeof P=="number"&&P>-1&&P%1==0&&P<=s}function To(P){var N=typeof P;return P!=null&&(N=="object"||N=="function")}function bc(P){return P!=null&&typeof P=="object"}function HH(P){if(!bc(P)||Kt(P)!=y)return!1;var N=Io(P);if(N===null)return!0;var j=rn.call(N,"constructor")&&N.constructor;return typeof j=="function"&&j instanceof j&&Rs.call(j)==nn}var O_=ue?Km(ue):Pn;function VH(P){return IH(P,N_(P))}function N_(P){return vg(P)?X(P,!0):CH(P)}var GH=AH(function(P,N,j){I_(P,N,j)});function WH(P){return function(){return P}}function L_(P){return P}function zH(){return!1}e.exports=GH}),uQ=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BatchSpanProcessorBase=void 0;var e=Ke(),r=vn(),n=class{constructor(i,o){this._exporter=i,this._finishedSpans=[],this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve();let s=r.getEnv();this._maxExportBatchSize=typeof(o==null?void 0:o.maxExportBatchSize)=="number"?o.maxExportBatchSize:s.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof(o==null?void 0:o.maxQueueSize)=="number"?o.maxQueueSize:s.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof(o==null?void 0:o.scheduledDelayMillis)=="number"?o.scheduledDelayMillis:s.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof(o==null?void 0:o.exportTimeoutMillis)=="number"?o.exportTimeoutMillis:s.OTEL_BSP_EXPORT_TIMEOUT}forceFlush(){return this._isShutdown?this._shuttingDownPromise:this._flushAll()}onStart(i){}onEnd(i){this._isShutdown||this._addToBuffer(i)}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((i,o)=>{Promise.resolve().then(()=>this.onShutdown()).then(()=>this._flushAll()).then(()=>this._exporter.shutdown()).then(i).catch(s=>{o(s)})}),this._shuttingDownPromise)}_addToBuffer(i){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(i),this._maybeStartTimer())}_flushAll(){return new Promise((i,o)=>{let s=[],a=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);for(let c=0,l=a;c<l;c++)s.push(this._flushOneBatch());Promise.all(s).then(()=>{i()}).catch(o)})}_flushOneBatch(){return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise((i,o)=>{let s=setTimeout(()=>{o(new Error("Timeout"))},this._exportTimeoutMillis);e.context.with(r.suppressTracing(e.context.active()),()=>{this._exporter.export(this._finishedSpans.splice(0,this._maxExportBatchSize),a=>{var c;clearTimeout(s),a.code===r.ExportResultCode.SUCCESS?i():o((c=a.error)!==null&&c!==void 0?c:new Error("BatchSpanProcessor: span export failed"))})})})}_maybeStartTimer(){this._timer===void 0&&(this._timer=setTimeout(()=>{this._flushOneBatch().then(()=>{this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())}).catch(i=>{r.globalErrorHandler(i)})},this._scheduledDelayMillis),r.unrefTimer(this._timer))}_clearTimer(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)}};t.BatchSpanProcessorBase=n}),dQ=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BatchSpanProcessor=void 0;var e=uQ(),r=class extends e.BatchSpanProcessorBase{onShutdown(){}};t.BatchSpanProcessor=r}),fQ=I(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(dQ(),t)}),gL=I(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(fQ(),t)}),pQ=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BasicTracerProvider=t.ForceFlushState=void 0;var e=Ke(),r=vn(),n=pC(),i=vL(),o=fL(),s=cQ(),a=mL(),c=lQ(),l=gL(),u;(function(f){f[f.resolved=0]="resolved",f[f.timeout=1]="timeout",f[f.error=2]="error",f[f.unresolved=3]="unresolved"})(u=t.ForceFlushState||(t.ForceFlushState={}));var d=class{constructor(f={}){var p;this._registeredSpanProcessors=[],this._tracers=new Map;let h=c({},o.DEFAULT_CONFIG,f);this.resource=(p=h.resource)!==null&&p!==void 0?p:n.Resource.empty(),this.resource=n.Resource.default().merge(this.resource),this._config=Object.assign({},h,{resource:this.resource});let m=this._buildExporterFromEnv();if(m!==void 0){let g=new l.BatchSpanProcessor(m);this.activeSpanProcessor=g}else this.activeSpanProcessor=new a.NoopSpanProcessor}getTracer(f,p){let h=`${f}@${p||""}`;return this._tracers.has(h)||this._tracers.set(h,new i.Tracer({name:f,version:p},this._config,this)),this._tracers.get(h)}addSpanProcessor(f){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(p=>e.diag.error("Error while trying to shutdown current span processor",p)),this._registeredSpanProcessors.push(f),this.activeSpanProcessor=new s.MultiSpanProcessor(this._registeredSpanProcessors)}getActiveSpanProcessor(){return this.activeSpanProcessor}register(f={}){e.trace.setGlobalTracerProvider(this),f.propagator===void 0&&(f.propagator=this._buildPropagatorFromEnv()),f.contextManager&&e.context.setGlobalContextManager(f.contextManager),f.propagator&&e.propagation.setGlobalPropagator(f.propagator)}forceFlush(){let f=this._config.forceFlushTimeoutMillis,p=this._registeredSpanProcessors.map(h=>new Promise(m=>{let g,v=setTimeout(()=>{m(new Error(`Span processor did not completed within timeout period of ${f} ms`)),g=u.timeout},f);h.forceFlush().then(()=>{clearTimeout(v),g!==u.timeout&&(g=u.resolved,m(g))}).catch(y=>{clearTimeout(v),g=u.error,m(y)})}));return new Promise((h,m)=>{Promise.all(p).then(g=>{let v=g.filter(y=>y!==u.resolved);v.length>0?m(v):h()}).catch(g=>m([g]))})}shutdown(){return this.activeSpanProcessor.shutdown()}_getPropagator(f){var p;return(p=d._registeredPropagators.get(f))===null||p===void 0?void 0:p()}_getSpanExporter(f){var p;return(p=d._registeredExporters.get(f))===null||p===void 0?void 0:p()}_buildPropagatorFromEnv(){let f=Array.from(new Set(r.getEnv().OTEL_PROPAGATORS)),p=f.map(h=>{let m=this._getPropagator(h);return m||e.diag.warn(`Propagator "${h}" requested through environment variable is unavailable.`),m}).reduce((h,m)=>(m&&h.push(m),h),[]);if(p.length!==0)return f.length===1?p[0]:new r.CompositePropagator({propagators:p})}_buildExporterFromEnv(){let f=r.getEnv().OTEL_TRACES_EXPORTER;if(f==="none")return;let p=this._getSpanExporter(f);return p||e.diag.error(`Exporter "${f}" requested through environment variable is unavailable.`),p}};t.BasicTracerProvider=d,d._registeredPropagators=new Map([["tracecontext",()=>new r.HttpTraceContextPropagator],["baggage",()=>new r.HttpBaggagePropagator]]),d._registeredExporters=new Map}),hQ=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleSpanExporter=void 0;var e=vn(),r=class{export(n,i){return this._sendSpans(n,i)}shutdown(){return this._sendSpans([]),Promise.resolve()}_exportInfo(n){return{traceId:n.spanContext().traceId,parentId:n.parentSpanId,name:n.name,id:n.spanContext().spanId,kind:n.kind,timestamp:e.hrTimeToMicroseconds(n.startTime),duration:e.hrTimeToMicroseconds(n.duration),attributes:n.attributes,status:n.status,events:n.events}}_sendSpans(n,i){for(let o of n)console.log(this._exportInfo(o));if(i)return i({code:e.ExportResultCode.SUCCESS})}};t.ConsoleSpanExporter=r}),mQ=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InMemorySpanExporter=void 0;var e=vn(),r=class{constructor(){this._finishedSpans=[],this._stopped=!1}export(n,i){if(this._stopped)return i({code:e.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...n),setTimeout(()=>i({code:e.ExportResultCode.SUCCESS}),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}};t.InMemorySpanExporter=r}),gQ=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),vQ=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleSpanProcessor=void 0;var e=Ke(),r=vn(),n=class{constructor(i){this._exporter=i,this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve()}forceFlush(){return Promise.resolve()}onStart(i){}onEnd(i){this._isShutdown||e.context.with(r.suppressTracing(e.context.active()),()=>{this._exporter.export([i],o=>{var s;o.code!==r.ExportResultCode.SUCCESS&&r.globalErrorHandler((s=o.error)!==null&&s!==void 0?s:new Error(`SimpleSpanProcessor: span export failed (status ${o})`))})})}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((i,o)=>{Promise.resolve().then(()=>this._exporter.shutdown()).then(i).catch(s=>{o(s)})}),this._shuttingDownPromise)}};t.SimpleSpanProcessor=n}),yQ=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),wQ=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),CQ=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),bQ=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),vL=I(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(Z7(),t),r(pQ(),t),r(gL(),t),r(hQ(),t),r(mQ(),t),r(gQ(),t),r(vQ(),t),r(yQ(),t),r(mL(),t),r(dL(),t),r(wQ(),t),r(CQ(),t),r(bQ(),t)}),EQ=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.azureCoreTracing=t.AzureMonitorSymbol=void 0;var e=pt();t.AzureMonitorSymbol="Azure_Monitor_Tracer";var r=!1,n=function(o){if(r)return o;try{var s=vL(),a=Ke(),c=new s.BasicTracerProvider,l=c.getTracer("applicationinsights tracer"),u=o.setTracer;o.setTracer=function(d){var f=d.startSpan;d.startSpan=function(p,h,m){var g=f.call(this,p,h,m),v=g.end;return g.end=function(){var y=v.apply(this,arguments);return e.channel.publish("azure-coretracing",g),y},g},d[t.AzureMonitorSymbol]=!0,u.call(this,d)},a.trace.getSpan(a.context.active()),o.setTracer(l),r=!0}catch(d){}return o};t.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:n};function i(){e.channel.registerMonkeyPatch("@azure/core-tracing",t.azureCoreTracing)}t.enable=i}),_Q=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.bunyan=void 0;var e=pt(),r=function(i){var o=i.prototype._emit;return i.prototype._emit=function(s,a){var c=o.apply(this,arguments);if(!a){var l=c;l||(l=o.call(this,s,!0)),e.channel.publish("bunyan",{level:s.level,result:l})}return c},i};t.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:r};function n(){e.channel.registerMonkeyPatch("bunyan",t.bunyan)}t.enable=n}),SQ=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.console=void 0;var e=pt(),r=require("stream"),n=function(o){var s=new r.Writable,a=new r.Writable;s.write=function(h){if(!h)return!0;var m=h.toString();return e.channel.publish("console",{message:m}),!0},a.write=function(h){if(!h)return!0;var m=h.toString();return e.channel.publish("console",{message:m,stderr:!0}),!0};for(var c=new o.Console(s,a),l=["log","info","warn","error","dir","time","timeEnd","trace","assert"],u=function(h){var m=o[h];m&&(o[h]=function(){if(c[h])try{c[h].apply(c,arguments)}catch(g){}return m.apply(o,arguments)})},d=0,f=l;d<f.length;d++){var p=f[d];u(p)}return o};t.console={versionSpecifier:">= 4.0.0",patch:n};function i(){e.channel.registerMonkeyPatch("console",t.console),require("console")}t.enable=i}),xQ=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.mongoCore=void 0;var e=pt(),r=function(i){var o=i.Server.prototype.connect;return i.Server.prototype.connect=function(){var s=o.apply(this,arguments),a=this.s.pool.write;this.s.pool.write=function(){var l=typeof arguments[1]=="function"?1:2;return typeof arguments[l]=="function"&&(arguments[l]=e.channel.bindToContext(arguments[l])),a.apply(this,arguments)};var c=this.s.pool.logout;return this.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=e.channel.bindToContext(arguments[1])),c.apply(this,arguments)},s},i};t.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:r};function n(){e.channel.registerMonkeyPatch("mongodb-core",t.mongoCore)}t.enable=n}),kQ=I(t=>{"use strict";var e=t&&t.__assign||function(){return e=Object.assign||function(c){for(var l,u=1,d=arguments.length;u<d;u++){l=arguments[u];for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(c[f]=l[f])}return c},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.mongo330=t.mongo3=t.mongo2=void 0;var r=pt(),n=function(c){var l=c.instrument({operationIdGenerator:{next:function(){return r.channel.bindToContext(function(d){return d()})}}}),u={};return l.on("started",function(d){u[d.requestId]||(u[d.requestId]=e(e({},d),{time:new Date}))}),l.on("succeeded",function(d){var f=u[d.requestId];f&&delete u[d.requestId],typeof d.operationId=="function"?d.operationId(function(){return r.channel.publish("mongodb",{startedData:f,event:d,succeeded:!0})}):r.channel.publish("mongodb",{startedData:f,event:d,succeeded:!0})}),l.on("failed",function(d){var f=u[d.requestId];f&&delete u[d.requestId],typeof d.operationId=="function"?d.operationId(function(){return r.channel.publish("mongodb",{startedData:f,event:d,succeeded:!1})}):r.channel.publish("mongodb",{startedData:f,event:d,succeeded:!1})}),c},i=function(c){var l=c.instrument(),u={},d={};return l.on("started",function(f){u[f.requestId]||(d[f.requestId]=r.channel.bindToContext(function(p){return p()}),u[f.requestId]=e(e({},f),{time:new Date}))}),l.on("succeeded",function(f){var p=u[f.requestId];p&&delete u[f.requestId],typeof f=="object"&&typeof d[f.requestId]=="function"&&(d[f.requestId](function(){return r.channel.publish("mongodb",{startedData:p,event:f,succeeded:!0})}),delete d[f.requestId])}),l.on("failed",function(f){var p=u[f.requestId];p&&delete u[f.requestId],typeof f=="object"&&typeof d[f.requestId]=="function"&&(d[f.requestId](function(){return r.channel.publish("mongodb",{startedData:p,event:f,succeeded:!1})}),delete d[f.requestId])}),c},o=function(c){var l=c.Server.prototype.connect;return c.Server.prototype.connect=function(){var u=l.apply(this,arguments),d=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var p=typeof arguments[1]=="function"?1:2;return typeof arguments[p]=="function"&&(arguments[p]=r.channel.bindToContext(arguments[p])),d.apply(this,arguments)};var f=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=r.channel.bindToContext(arguments[1])),f.apply(this,arguments)},u},c},s=function(c){o(c);var l=c.instrument(),u={},d={};return l.on("started",function(f){u[f.requestId]||(d[f.requestId]=r.channel.bindToContext(function(p){return p()}),u[f.requestId]=f)}),l.on("succeeded",function(f){var p=u[f.requestId];p&&delete u[f.requestId],typeof f=="object"&&typeof d[f.requestId]=="function"&&(d[f.requestId](function(){return r.channel.publish("mongodb",{startedData:p,event:f,succeeded:!0})}),delete d[f.requestId])}),l.on("failed",function(f){var p=u[f.requestId];p&&delete u[f.requestId],typeof f=="object"&&typeof d[f.requestId]=="function"&&(d[f.requestId](function(){return r.channel.publish("mongodb",{startedData:p,event:f,succeeded:!1})}),delete d[f.requestId])}),c};t.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:n},t.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:i},t.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:s};function a(){r.channel.registerMonkeyPatch("mongodb",t.mongo2),r.channel.registerMonkeyPatch("mongodb",t.mongo3),r.channel.registerMonkeyPatch("mongodb",t.mongo330)}t.enable=a}),PQ=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.mysql=void 0;var e=pt(),r=require("path"),n=function(o,s){var a=function(p,h){return function(m,g){var v=p[m];v&&(p[m]=function(){for(var y=arguments.length-1,C=arguments.length-1;C>=0;--C)if(typeof arguments[C]=="function"){y=C;break}else if(typeof arguments[C]!="undefined")break;var w=arguments[y],b={result:null,startTime:null,startDate:null};typeof w=="function"&&(g?(b.startTime=process.hrtime(),b.startDate=new Date,arguments[y]=e.channel.bindToContext(g(b,w))):arguments[y]=e.channel.bindToContext(w));var E=v.apply(this,arguments);return b.result=E,E})}},c=function(p,h){return a(p.prototype,h+".prototype")},l=["connect","changeUser","ping","statistics","end"],u=require(r.dirname(s)+"/lib/Connection");l.forEach(function(p){return c(u,"Connection")(p)}),a(u,"Connection")("createQuery",function(p,h){return function(m){var g=process.hrtime(p.startTime),v=g[0]*1e3+g[1]/1e6|0;e.channel.publish("mysql",{query:p.result,callbackArgs:arguments,err:m,duration:v,time:p.startDate}),h.apply(this,arguments)}});var d=["_enqueueCallback"],f=require(r.dirname(s)+"/lib/Pool");return d.forEach(function(p){return c(f,"Pool")(p)}),o};t.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:n};function i(){e.channel.registerMonkeyPatch("mysql",t.mysql)}t.enable=i}),IQ=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.postgresPool1=void 0;var e=pt();function r(i){var o=i.prototype.connect;return i.prototype.connect=function(s){return s&&(arguments[0]=e.channel.bindToContext(s)),o.apply(this,arguments)},i}t.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:r};function n(){e.channel.registerMonkeyPatch("pg-pool",t.postgresPool1)}t.enable=n}),AQ=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.postgres7=t.postgres6=void 0;var e=pt(),r=require("events");function n(s,a){var c=s.Client.prototype.query,l="__diagnosticOriginalFunc";return s.Client.prototype.query=function(u,d,f){var p={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},h=process.hrtime(),m;function g(v){v&&v[l]&&(v=v[l]);var y=e.channel.bindToContext(function(C,w){var b=process.hrtime(h);if(p.result=w&&{rowCount:w.rowCount,command:w.command},p.error=C,p.duration=Math.ceil(b[0]*1e3+b[1]/1e6),e.channel.publish("postgres",p),C){if(v)return v.apply(this,arguments);m&&m instanceof r.EventEmitter&&m.emit("error",C)}else v&&v.apply(this,arguments)});try{return Object.defineProperty(y,l,{value:v}),y}catch(C){return v}}try{typeof u=="string"?d instanceof Array?(p.query.preparable={text:u,args:d},f=g(f)):(p.query.text=u,f?f=g(f):d=g(d)):(typeof u.name=="string"?p.query.plan=u.name:u.values instanceof Array?p.query.preparable={text:u.text,args:u.values}:p.query.text=u.text,f?f=g(f):d?d=g(d):u.callback=g(u.callback))}catch(v){return c.apply(this,arguments)}return arguments[0]=u,arguments[1]=d,arguments[2]=f,arguments.length=arguments.length>3?arguments.length:3,m=c.apply(this,arguments),m},s}function i(s,a){var c=s.Client.prototype.query,l="__diagnosticOriginalFunc";return s.Client.prototype.query=function(u,d,f){var p=this,h=!!f,m={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},g=process.hrtime(),v;function y(C){C&&C[l]&&(C=C[l]);var w=e.channel.bindToContext(function(b,E){var S=process.hrtime(g);if(m.result=E&&{rowCount:E.rowCount,command:E.command},m.error=b,m.duration=Math.ceil(S[0]*1e3+S[1]/1e6),e.channel.publish("postgres",m),b){if(C)return C.apply(this,arguments);v&&v instanceof r.EventEmitter&&v.emit("error",b)}else C&&C.apply(this,arguments)});try{return Object.defineProperty(w,l,{value:C}),w}catch(b){return C}}try{typeof u=="string"?d instanceof Array?(m.query.preparable={text:u,args:d},h=typeof f=="function",f=h?y(f):f):(m.query.text=u,f?(h=typeof f=="function",f=h?y(f):f):(h=typeof d=="function",d=h?y(d):d)):(typeof u.name=="string"?m.query.plan=u.name:u.values instanceof Array?m.query.preparable={text:u.text,args:u.values}:m.query.text=u.text,f?(h=typeof f=="function",f=y(f)):d?(h=typeof d=="function",d=h?y(d):d):(h=typeof u.callback=="function",u.callback=h?y(u.callback):u.callback))}catch(C){return c.apply(this,arguments)}return arguments[0]=u,arguments[1]=d,arguments[2]=f,arguments.length=arguments.length>3?arguments.length:3,v=c.apply(this,arguments),h?v:v.then(function(C){return y()(void 0,C),new p._Promise(function(w,b){w(C)})}).catch(function(C){return y()(C,void 0),new p._Promise(function(w,b){b(C)})})},s}t.postgres6={versionSpecifier:"6.*",patch:n},t.postgres7={versionSpecifier:">=7.* <=8.*",patch:i};function o(){e.channel.registerMonkeyPatch("pg",t.postgres6),e.channel.registerMonkeyPatch("pg",t.postgres7)}t.enable=o}),TQ=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.redis=void 0;var e=pt(),r=function(i){var o=i.RedisClient.prototype.internal_send_command;return i.RedisClient.prototype.internal_send_command=function(s){if(s){var a=s.callback;if(!a||!a.pubsubBound){var c=this.address,l=process.hrtime(),u=new Date;s.callback=e.channel.bindToContext(function(d,f){var p=process.hrtime(l),h=p[0]*1e3+p[1]/1e6|0;e.channel.publish("redis",{duration:h,address:c,commandObj:s,err:d,result:f,time:u}),typeof a=="function"&&a.apply(this,arguments)}),s.callback.pubsubBound=!0}}return o.call(this,s)},i};t.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:r};function n(){e.channel.registerMonkeyPatch("redis",t.redis)}t.enable=n}),RQ=I(t=>{"use strict";var e=t&&t.__assign||function(){return e=Object.assign||function(o){for(var s,a=1,c=arguments.length;a<c;a++){s=arguments[a];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(o[l]=s[l])}return o},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.tedious=void 0;var r=pt(),n=function(o){var s=o.Connection.prototype.makeRequest;return o.Connection.prototype.makeRequest=function(){function a(l){var u=process.hrtime(),d={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return r.channel.bindToContext(function(f,p,h){var m=process.hrtime(u);d=e(e({},d),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!f&&{rowCount:p,rows:h},query:{text:this.parametersByName.statement.value},error:f,duration:Math.ceil(m[0]*1e3+m[1]/1e6)}),r.channel.publish("tedious",d),l.call(this,f,p,h)})}var c=arguments[0];arguments[0].callback=a(c.callback),s.apply(this,arguments)},o};t.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:n};function i(){r.channel.registerMonkeyPatch("tedious",t.tedious)}t.enable=i}),DQ=I(t=>{"use strict";var e=t&&t.__extends||function(){var a=function(c,l){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,d){u.__proto__=d}||function(u,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(u[f]=d[f])},a(c,l)};return function(c,l){a(c,l);function u(){this.constructor=c}c.prototype=l===null?Object.create(l):(u.prototype=l.prototype,new u)}}(),r=t&&t.__rest||function(a,c){var l={};for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&c.indexOf(u)<0&&(l[u]=a[u]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,u=Object.getOwnPropertySymbols(a);d<u.length;d++)c.indexOf(u[d])<0&&Object.prototype.propertyIsEnumerable.call(a,u[d])&&(l[u[d]]=a[u[d]]);return l};Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.winston2=t.winston3=void 0;var n=pt(),i=function(a){var c=a.Logger.prototype.log,l,u=function(d,f,p){var h;return l===a.config.npm.levels?h="npm":l===a.config.syslog.levels?h="syslog":h="unknown",n.channel.publish("winston",{level:d,message:f,meta:p,levelKind:h}),f};return a.Logger.prototype.log=function(){return l=this.levels,!this.filters||this.filters.length===0?this.filters=[u]:this.filters[this.filters.length-1]!==u&&(this.filters=this.filters.filter(function(d){return d!==u}),this.filters.push(u)),c.apply(this,arguments)},a},o=function(a){var c=function(p,h){var m;return p.config.npm.levels[h]!=null?m="npm":p.config.syslog.levels[h]!=null?m="syslog":m="unknown",m},l=function(p){e(h,p);function h(m,g){var v=p.call(this,g)||this;return v.winston=m,v}return h.prototype.log=function(m,g){var v=m.message,y=m.level,C=m.meta,w=r(m,["message","level","meta"]);y=typeof Symbol.for=="function"?m[Symbol.for("level")]:y,v=m instanceof Error?m:v;var b=c(this.winston,y);C=C||{};for(var E in w)w.hasOwnProperty(E)&&(C[E]=w[E]);n.channel.publish("winston",{message:v,level:y,levelKind:b,meta:C}),g()},h}(a.Transport);function u(){var p=arguments[0].levels||a.config.npm.levels,h;for(var m in p)p.hasOwnProperty(m)&&(h=h===void 0||p[m]>p[h]?m:h);this.add(new l(a,{level:h}))}var d=a.createLogger;a.createLogger=function(){var p=arguments[0].levels||a.config.npm.levels,h;for(var m in p)p.hasOwnProperty(m)&&(h=h===void 0||p[m]>p[h]?m:h);var g=d.apply(this,arguments);g.add(new l(a,{level:h}));var v=g.configure;return g.configure=function(){v.apply(this,arguments),u.apply(this,arguments)},g};var f=a.configure;return a.configure=function(){f.apply(this,arguments),u.apply(this,arguments)},a.add(new l(a)),a};t.winston3={versionSpecifier:"3.x",patch:o},t.winston2={versionSpecifier:"2.x",patch:i};function s(){n.channel.registerMonkeyPatch("winston",t.winston2),n.channel.registerMonkeyPatch("winston",t.winston3)}t.enable=s}),OQ=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.tedious=t.pgPool=t.pg=t.winston=t.redis=t.mysql=t.mongodb=t.mongodbCore=t.console=t.bunyan=t.azuresdk=void 0;var e=EQ();t.azuresdk=e;var r=_Q();t.bunyan=r;var n=SQ();t.console=n;var i=xQ();t.mongodbCore=i;var o=kQ();t.mongodb=o;var s=PQ();t.mysql=s;var a=IQ();t.pgPool=a;var c=AQ();t.pg=c;var l=TQ();t.redis=l;var u=RQ();t.tedious=u;var d=DQ();t.winston=d;function f(){r.enable(),n.enable(),i.enable(),o.enable(),s.enable(),c.enable(),a.enable(),l.enable(),d.enable(),e.enable(),u.enable()}t.enable=f}),hC=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerContextPreservation=t.IsInitialized=void 0;var e=GN(),r=Dt();t.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;var n="DiagnosticChannel";if(t.IsInitialized){i=OQ(),o=process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"",s=o.split(","),a={bunyan:i.bunyan,console:i.console,mongodb:i.mongodb,mongodbCore:i.mongodbCore,mysql:i.mysql,redis:i.redis,pg:i.pg,pgPool:i.pgPool,winston:i.winston,azuresdk:i.azuresdk};for(c in a)s.indexOf(c)===-1&&(a[c].enable(),r.info(n,"Subscribed to "+c+" events"));s.length>0&&r.info(n,"Some modules will not be patched",s)}else r.info(n,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");var i,o,s,a,c;function l(u){if(t.IsInitialized){var d=pt();d.channel.addContextPreservation(u),d.channel.spanContextPropagator=e.AsyncScopeManager}}t.registerContextPreservation=l}),Kl=I((t,e)=>{"use strict";e.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}}),Yr=I((t,e)=>{"use strict";var r=t&&t.__assign||function(){return r=Object.assign||function(u){for(var d,f=1,p=arguments.length;f<p;f++){d=arguments[f];for(var h in d)Object.prototype.hasOwnProperty.call(d,h)&&(u[h]=d[h])}return u},r.apply(this,arguments)},n=require("http"),i=require("https"),o=require("url"),s=require("constants"),a=Dt(),c=Kl(),l=function(){function u(){}return u.getCookie=function(d,f){var p="";if(d&&d.length&&typeof f=="string")for(var h=d+"=",m=f.split(";"),g=0;g<m.length;g++){var f=m[g];if(f=u.trim(f),f&&f.indexOf(h)===0){p=f.substring(h.length,m[g].length);break}}return p},u.trim=function(d){return typeof d=="string"?d.replace(/^\s+|\s+$/g,""):""},u.int32ArrayToBase64=function(d){var f=function(v,y){return String.fromCharCode(v>>y&255)},p=function(v){return f(v,24)+f(v,16)+f(v,8)+f(v,0)},h=d.map(p).join(""),m=Buffer.from?Buffer.from(h,"binary"):new Buffer(h,"binary"),g=m.toString("base64");return g.substr(0,g.indexOf("="))},u.random32=function(){return 4294967296*Math.random()|0},u.randomu32=function(){return u.random32()+2147483648},u.w3cTraceId=function(){for(var d=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],f="",p,h=0;h<4;h++)p=u.random32(),f+=d[p&15]+d[p>>4&15]+d[p>>8&15]+d[p>>12&15]+d[p>>16&15]+d[p>>20&15]+d[p>>24&15]+d[p>>28&15];var m=d[8+Math.random()*4|0];return f.substr(0,8)+f.substr(9,4)+"4"+f.substr(13,3)+m+f.substr(16,3)+f.substr(19,12)},u.w3cSpanId=function(){return u.w3cTraceId().substring(16)},u.isValidW3CId=function(d){return d.length===32&&d!=="00000000000000000000000000000000"},u.isArray=function(d){return Object.prototype.toString.call(d)==="[object Array]"},u.isError=function(d){return d instanceof Error},u.isPrimitive=function(d){var f=typeof d;return f==="string"||f==="number"||f==="boolean"},u.isDate=function(d){return Object.prototype.toString.call(d)==="[object Date]"},u.msToTimeSpan=function(d){(isNaN(d)||d<0)&&(d=0);var f=(d/1e3%60).toFixed(7).replace(/0{0,4}$/,""),p=""+Math.floor(d/(1e3*60))%60,h=""+Math.floor(d/(1e3*60*60))%24,m=Math.floor(d/(1e3*60*60*24));f=f.indexOf(".")<2?"0"+f:f,p=p.length<2?"0"+p:p,h=h.length<2?"0"+h:h;var g=m>0?m+".":"";return g+h+":"+p+":"+f},u.extractError=function(d){var f=d;return{message:d.message,code:f.code||f.id||""}},u.extractObject=function(d){return d instanceof Error?u.extractError(d):typeof d.toJSON=="function"?d.toJSON():d},u.validateStringMap=function(d){if(typeof d!="object"){a.info("Invalid properties dropped from payload");return}var f={};for(var p in d){var h="",m=d[p],g=typeof m;if(u.isPrimitive(m))h=m.toString();else if(m===null||g==="undefined")h="";else if(g==="function"){a.info("key: "+p+" was function; will not serialize");continue}else{var v=u.isArray(m)?m:u.extractObject(m);try{u.isPrimitive(v)?h=v:h=JSON.stringify(v)}catch(y){h=m.constructor.name.toString()+" (Error: "+y.message+")",a.info("key: "+p+", could not be serialized")}}f[p]=h.substring(0,u.MAX_PROPERTY_LENGTH)}return f},u.canIncludeCorrelationHeader=function(d,f){var p=d&&d.config&&d.config.correlationHeaderExcludedDomains;if(!p||p.length==0||!f)return!0;for(var h=0;h<p.length;h++){var m=new RegExp(p[h].replace(/\./g,".").replace(/\*/g,".*"));if(m.test(o.parse(f).hostname))return!1}return!0},u.getCorrelationContextTarget=function(d,f){var p=d.headers&&d.headers[c.requestContextHeader];if(p)for(var h=p.split(","),m=0;m<h.length;++m){var g=h[m].split("=");if(g.length==2&&g[0]==f)return g[1]}},u.makeRequest=function(d,f,p,h){f&&f.indexOf("//")===0&&(f="https:"+f);var m=o.parse(f),g=r(r({},p),{host:m.hostname,port:m.port,path:m.pathname}),v=void 0;if(m.protocol==="https:"&&(v=d.proxyHttpsUrl||void 0),m.protocol==="http:"&&(v=d.proxyHttpUrl||void 0),v){v.indexOf("//")===0&&(v="http:"+v);var y=o.parse(v);y.protocol==="https:"?(a.info("Proxies that use HTTPS are not supported"),v=void 0):g=r(r({},g),{host:y.hostname,port:y.port||"80",path:f,headers:r(r({},g.headers),{Host:m.hostname})})}var C=m.protocol==="https:"&&!v;return C&&d.httpsAgent!==void 0?g.agent=d.httpsAgent:!C&&d.httpAgent!==void 0?g.agent=d.httpAgent:C&&(g.agent=u.tlsRestrictedAgent),C?i.request(g,h):n.request(g,h)},u.safeIncludeCorrelationHeader=function(d,f,p){var h;if(typeof p=="string")h=p;else if(p instanceof Array)h=p.join(",");else if(p&&typeof p.toString=="function")try{h=p.toString()}catch(m){a.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",m,p)}h?u.addCorrelationIdHeaderFromString(d,f,h):f.setHeader(c.requestContextHeader,c.requestContextSourceKey+"="+d.config.correlationId)},u.dumpObj=function(d){var f=Object.prototype.toString.call(d),p="";return f==="[object Error]"?p="{ stack: '"+d.stack+"', message: '"+d.message+"', name: '"+d.name+"'":p=JSON.stringify(d),f+p},u.addCorrelationIdHeaderFromString=function(d,f,p){var h=p.split(","),m=c.requestContextSourceKey+"=",g=h.some(function(v){return v.substring(0,m.length)===m});g||f.setHeader(c.requestContextHeader,p+","+c.requestContextSourceKey+"="+d.config.correlationId)},u.MAX_PROPERTY_LENGTH=8192,u.tlsRestrictedAgent=new i.Agent({keepAlive:!0,maxSockets:25,secureOptions:s.SSL_OP_NO_SSLv2|s.SSL_OP_NO_SSLv3|s.SSL_OP_NO_TLSv1|s.SSL_OP_NO_TLSv1_1}),u}();e.exports=l}),Va=I((t,e)=>{"use strict";var r=Yr(),n=Dt(),i=function(){function o(){}return o.queryCorrelationId=function(s,a){var c=s.profileQueryEndpoint+"/api/profiles/"+s.instrumentationKey+"/appId";if(o.completedLookups.hasOwnProperty(c)){a(o.completedLookups[c]);return}else if(o.pendingLookups[c]){o.pendingLookups[c].push(a);return}o.pendingLookups[c]=[a];var l=function(){if(o.pendingLookups[c]){var u={method:"GET",disableAppInsightsAutoCollection:!0};n.info(o.TAG,u);var d=r.makeRequest(s,c,u,function(f){if(f.statusCode===200){var p="";f.setEncoding("utf-8"),f.on("data",function(h){p+=h}),f.on("end",function(){n.info(o.TAG,p);var h=o.correlationIdPrefix+p;o.completedLookups[c]=h,o.pendingLookups[c]&&o.pendingLookups[c].forEach(function(m){return m(h)}),delete o.pendingLookups[c]})}else f.statusCode>=400&&f.statusCode<500?(o.completedLookups[c]=void 0,delete o.pendingLookups[c]):setTimeout(l,s.correlationIdRetryIntervalMs)});d&&(d.on("error",function(f){n.warn(o.TAG,f)}),d.end())}};setTimeout(l,0)},o.cancelCorrelationIdQuery=function(s,a){var c=s.profileQueryEndpoint+"/api/profiles/"+s.instrumentationKey+"/appId",l=o.pendingLookups[c];l&&(o.pendingLookups[c]=l.filter(function(u){return u!=a}),o.pendingLookups[c].length==0&&delete o.pendingLookups[c])},o.generateRequestId=function(s){if(s){s=s[0]=="|"?s:"|"+s,s[s.length-1]!=="."&&(s+=".");var a=(o.currentRootId++).toString(16);return o.appendSuffix(s,a,"_")}else return o.generateRootId()},o.getRootId=function(s){var a=s.indexOf(".");a<0&&(a=s.length);var c=s[0]==="|"?1:0;return s.substring(c,a)},o.generateRootId=function(){return"|"+r.w3cTraceId()+"."},o.appendSuffix=function(s,a,c){if(s.length+a.length<o.requestIdMaxLength)return s+a+c;var l=o.requestIdMaxLength-9;if(s.length>l)for(;l>1;--l){var u=s[l-1];if(u==="."||u==="_")break}if(l<=1)return o.generateRootId();for(a=r.randomu32().toString(16);a.length<8;)a="0"+a;return s.substring(0,l)+a+"#"},o.TAG="CorrelationIdManager",o.correlationIdPrefix="cid-v1:",o.w3cEnabled=!0,o.pendingLookups={},o.completedLookups={},o.requestIdMaxLength=1024,o.currentRootId=r.randomu32(),o}();e.exports=i}),Jp=I((t,e)=>{"use strict";var r=Yr(),n=Va(),i=function(){function o(s,a){if(this.traceFlag=o.DEFAULT_TRACE_FLAG,this.version=o.DEFAULT_VERSION,s&&typeof s=="string")if(s.split(",").length>1)this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16);else{var c=s.trim().split("-"),l=c.length;l>=4?(this.version=c[0],this.traceId=c[1],this.spanId=c[2],this.traceFlag=c[3]):(this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=o.DEFAULT_VERSION,this.traceId=r.w3cTraceId()),this.version==="00"&&l!==4&&(this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version==="ff"&&(this.version=o.DEFAULT_VERSION,this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=o.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=o.DEFAULT_TRACE_FLAG,this.traceId=r.w3cTraceId()),o.isValidTraceId(this.traceId)||(this.traceId=r.w3cTraceId()),o.isValidSpanId(this.spanId)||(this.spanId=r.w3cTraceId().substr(0,16),this.traceId=r.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(a){this.parentId=a.slice();var u=n.getRootId(a);o.isValidTraceId(u)||(this.legacyRootId=u,u=r.w3cTraceId()),a.indexOf("|")!==-1&&(a=a.substring(1+a.substring(0,a.length-1).lastIndexOf("."),a.length-1)),this.traceId=u,this.spanId=a}else this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)}return o.isValidTraceId=function(s){return s.match(/^[0-9a-f]{32}$/)&&s!=="00000000000000000000000000000000"},o.isValidSpanId=function(s){return s.match(/^[0-9a-f]{16}$/)&&s!=="0000000000000000"},o.formatOpenTelemetryTraceFlags=function(s){var a="0"+s.toString(16);return a.substring(a.length-2)},o.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},o.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},o.prototype.updateSpanId=function(){this.spanId=r.w3cTraceId().substr(0,16)},o.DEFAULT_TRACE_FLAG="01",o.DEFAULT_VERSION="00",o}();e.exports=i}),yL=I((t,e)=>{"use strict";var r=function(){function n(i){this.fieldmap=[],!!i&&(this.fieldmap=this.parseHeader(i))}return n.prototype.toString=function(){var i=this.fieldmap;return!i||i.length==0?null:i.join(", ")},n.validateKeyChars=function(i){var o=i.split("@");if(o.length==2){var s=o[0].trim(),a=o[1].trim(),c=Boolean(s.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),l=Boolean(a.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return c&&l}else if(o.length==1)return Boolean(i.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/));return!1},n.prototype.parseHeader=function(i){var o=[],s={},a=i.split(",");if(a.length>32)return null;for(var c=0,l=a;c<l.length;c++){var u=l[c],d=u.trim();if(d.length!==0){var f=d.split("=");if(f.length!==2||!n.validateKeyChars(f[0])||s[f[0]])return null;s[f[0]]=!0,o.push(d)}}return o},n.strict=!0,n}();e.exports=r}),fo=I((t,e)=>{"use strict";var r=function(){function n(){}return n}();e.exports=r}),NQ=I((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=fo(),i=function(o){r(s,o);function s(){var a=o.call(this)||this;return a.ver=2,a.properties={},a.measurements={},a}return s}(n);e.exports=i}),wL=I((t,e)=>{"use strict";var r=function(){function n(){}return n}();e.exports=r}),LQ=I((t,e)=>{"use strict";var r=function(){function n(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}return n}();e.exports=r}),FQ=I((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=wL(),i=function(o){r(s,o);function s(){return o.call(this)||this}return s}(n);e.exports=i}),CL=I((t,e)=>{"use strict";var r;(function(n){n[n.Measurement=0]="Measurement",n[n.Aggregation=1]="Aggregation"})(r||(r={})),e.exports=r}),MQ=I((t,e)=>{"use strict";var r=CL(),n=function(){function i(){this.kind=r.Measurement}return i}();e.exports=n}),qQ=I((t,e)=>{"use strict";var r=function(){function n(){this.ver=1,this.sampleRate=100,this.tags={}}return n}();e.exports=r}),bL=I((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=fo(),i=function(o){r(s,o);function s(){var a=o.call(this)||this;return a.ver=2,a.properties={},a.measurements={},a}return s}(n);e.exports=i}),$Q=I((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=fo(),i=function(o){r(s,o);function s(){var a=o.call(this)||this;return a.ver=2,a.exceptions=[],a.properties={},a.measurements={},a}return s}(n);e.exports=i}),jQ=I((t,e)=>{"use strict";var r=function(){function n(){this.hasFullStack=!0,this.parsedStack=[]}return n}();e.exports=r}),UQ=I((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=fo(),i=function(o){r(s,o);function s(){var a=o.call(this)||this;return a.ver=2,a.properties={},a}return s}(n);e.exports=i}),BQ=I((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=fo(),i=function(o){r(s,o);function s(){var a=o.call(this)||this;return a.ver=2,a.metrics=[],a.properties={},a}return s}(n);e.exports=i}),HQ=I((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=bL(),i=function(o){r(s,o);function s(){var a=o.call(this)||this;return a.ver=2,a.properties={},a.measurements={},a}return s}(n);e.exports=i}),VQ=I((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=fo(),i=function(o){r(s,o);function s(){var a=o.call(this)||this;return a.ver=2,a.success=!0,a.properties={},a.measurements={},a}return s}(n);e.exports=i}),GQ=I((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=fo(),i=function(o){r(s,o);function s(){var a=o.call(this)||this;return a.ver=2,a.properties={},a.measurements={},a}return s}(n);e.exports=i}),WQ=I((t,e)=>{"use strict";var r;(function(n){n[n.Verbose=0]="Verbose",n[n.Information=1]="Information",n[n.Warning=2]="Warning",n[n.Error=3]="Error",n[n.Critical=4]="Critical"})(r||(r={})),e.exports=r}),zQ=I((t,e)=>{"use strict";var r=function(){function n(){}return n}();e.exports=r}),EL=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AvailabilityData=NQ(),t.Base=wL(),t.ContextTagKeys=LQ(),t.Data=FQ(),t.DataPoint=MQ(),t.DataPointType=CL(),t.Domain=fo(),t.Envelope=qQ(),t.EventData=bL(),t.ExceptionData=$Q(),t.ExceptionDetails=jQ(),t.MessageData=UQ(),t.MetricData=BQ(),t.PageViewData=HQ(),t.RemoteDependencyData=VQ(),t.RequestData=GQ(),t.SeverityLevel=WQ(),t.StackFrame=zQ()}),KQ=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.domainSupportsProperties=t.RemoteDependencyDataConstants=void 0;var e=EL(),r=function(){function i(){}return i.TYPE_HTTP="Http",i.TYPE_AI="Http (tracked component)",i}();t.RemoteDependencyDataConstants=r;function n(i){return"properties"in i||i instanceof e.EventData||i instanceof e.ExceptionData||i instanceof e.MessageData||i instanceof e.MetricData||i instanceof e.PageViewData||i instanceof e.RemoteDependencyData||i instanceof e.RequestData}t.domainSupportsProperties=n}),YQ=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),QQ=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),XQ=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),JQ=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),ZQ=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),eX=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),tX=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),rX=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),nX=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),iX=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),oX=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),sX=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),aX=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryType=t.TelemetryTypeString=t.baseTypeToTelemetryType=t.telemetryTypeToBaseType=void 0;function e(i){switch(i){case n.Event:return"EventData";case n.Exception:return"ExceptionData";case n.Trace:return"MessageData";case n.Metric:return"MetricData";case n.Request:return"RequestData";case n.Dependency:return"RemoteDependencyData";case n.Availability:return"AvailabilityData";case n.PageView:return"PageViewData"}}t.telemetryTypeToBaseType=e;function r(i){switch(i){case"EventData":return n.Event;case"ExceptionData":return n.Exception;case"MessageData":return n.Trace;case"MetricData":return n.Metric;case"RequestData":return n.Request;case"RemoteDependencyData":return n.Dependency;case"AvailabilityData":return n.Availability;case"PageViewData":return n.PageView}}t.baseTypeToTelemetryType=r,t.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"};var n;(function(i){i[i.Event=0]="Event",i[i.Exception=1]="Exception",i[i.Trace=2]="Trace",i[i.Metric=3]="Metric",i[i.Request=4]="Request",i[i.Dependency=5]="Dependency",i[i.Availability=6]="Availability",i[i.PageView=7]="PageView"})(n=t.TelemetryType||(t.TelemetryType={}))}),cX=I(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(YQ(),t),r(QQ(),t),r(XQ(),t),r(JQ(),t),r(ZQ(),t),r(eX(),t),r(tX(),t),r(rX(),t),r(nX(),t),r(iX(),t),r(oX(),t),r(sX(),t),r(aX(),t)}),lX=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),uX=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),dX=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),fX=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),pX=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),hX=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),mX=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),gX=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),vX=I(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(lX(),t),r(uX(),t),r(dX(),t),r(fX(),t),r(pX(),t),r(hX(),t),r(mX(),t),r(gX(),t)}),fr=I(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(KQ(),t),r(EL(),t),r(cX(),t),r(vX(),t)}),_L=I((t,e)=>{"use strict";var r=function(){function n(){}return n.prototype.getUrl=function(){return this.url},n.prototype.RequestParser=function(){this.startTime=+new Date},n.prototype._setStatus=function(i,o){var s=+new Date;this.duration=s-this.startTime,this.statusCode=i;var a=this.properties||{};if(o){if(typeof o=="string")a.error=o;else if(o instanceof Error)a.error=o.message;else if(typeof o=="object")for(var c in o)a[c]=o[c]&&o[c].toString&&o[c].toString()}this.properties=a},n.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},n}();e.exports=r}),SL=I((t,e)=>{"use strict";var r=t&&t.__extends||function(){var f=function(p,h){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,g){m.__proto__=g}||function(m,g){for(var v in g)Object.prototype.hasOwnProperty.call(g,v)&&(m[v]=g[v])},f(p,h)};return function(p,h){f(p,h);function m(){this.constructor=p}p.prototype=h===null?Object.create(h):(m.prototype=h.prototype,new m)}}(),n=require("url"),i=fr(),o=Yr(),s=Kl(),a=_L(),c=Va(),l=yL(),u=Jp(),d=function(f){r(p,f);function p(h,m){var g=f.call(this)||this;return h&&(g.method=h.method,g.url=g._getAbsoluteUrl(h),g.startTime=+new Date,g.socketRemoteAddress=h.socket&&h.socket.remoteAddress,g.parseHeaders(h,m),h.connection&&(g.connectionRemoteAddress=h.connection.remoteAddress,g.legacySocketRemoteAddress=h.connection.socket&&h.connection.socket.remoteAddress)),g}return p.prototype.onError=function(h,m){this._setStatus(void 0,h),m&&(this.duration=m)},p.prototype.onResponse=function(h,m){this._setStatus(h.statusCode,void 0),m&&(this.duration=m)},p.prototype.getRequestTelemetry=function(h){var m={id:this.requestId,name:this.method+" "+n.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(h&&h.time?m.time=h.time:this.startTime&&(m.time=new Date(this.startTime)),h){for(var g in h)m[g]||(m[g]=h[g]);if(h.properties)for(var g in h.properties)m.properties[g]=h.properties[g]}return m},p.prototype.getRequestTags=function(h){var m={};for(var g in h)m[g]=h[g];return m[p.keys.locationIp]=h[p.keys.locationIp]||this._getIp(),m[p.keys.sessionId]=h[p.keys.sessionId]||this._getId("ai_session"),m[p.keys.userId]=h[p.keys.userId]||this._getId("ai_user"),m[p.keys.userAuthUserId]=h[p.keys.userAuthUserId]||this._getId("ai_authUser"),m[p.keys.operationName]=this.getOperationName(h),m[p.keys.operationParentId]=this.getOperationParentId(h),m[p.keys.operationId]=this.getOperationId(h),m},p.prototype.getOperationId=function(h){return h[p.keys.operationId]||this.operationId},p.prototype.getOperationParentId=function(h){return h[p.keys.operationParentId]||this.parentId||this.getOperationId(h)},p.prototype.getOperationName=function(h){return h[p.keys.operationName]||this.method+" "+n.parse(this.url).pathname},p.prototype.getRequestId=function(){return this.requestId},p.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},p.prototype.getTraceparent=function(){return this.traceparent},p.prototype.getTracestate=function(){return this.tracestate},p.prototype.getLegacyRootId=function(){return this.legacyRootId},p.prototype._getAbsoluteUrl=function(h){if(!h.headers)return h.url;var m=h.connection?h.connection.encrypted:null,g=n.parse(h.url),v=g.pathname,y=g.search,C=m||h.headers["x-forwarded-proto"]=="https"?"https":"http",w=n.format({protocol:C,host:h.headers.host,pathname:v,search:y});return w},p.prototype._getIp=function(){var h=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,m=function(v){var y=h.exec(v);if(y)return y[0]},g=m(this.rawHeaders["x-forwarded-for"])||m(this.rawHeaders["x-client-ip"])||m(this.rawHeaders["x-real-ip"])||m(this.connectionRemoteAddress)||m(this.socketRemoteAddress)||m(this.legacySocketRemoteAddress);return!g&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&this.connectionRemoteAddress.substr(0,2)==="::"&&(g="127.0.0.1"),g},p.prototype._getId=function(h){var m=this.rawHeaders&&this.rawHeaders.cookie&&typeof this.rawHeaders.cookie=="string"&&this.rawHeaders.cookie||"",g=p.parseId(o.getCookie(h,m));return g},p.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},p.prototype.parseHeaders=function(h,m){if(this.rawHeaders=h.headers||h.rawHeaders,this.userAgent=h.headers&&h.headers["user-agent"],this.sourceCorrelationId=o.getCorrelationContextTarget(h,s.requestContextSourceKey),h.headers){var g=h.headers[s.traceStateHeader]?h.headers[s.traceStateHeader].toString():null,v=h.headers[s.traceparentHeader]?h.headers[s.traceparentHeader].toString():null,y=h.headers[s.requestIdHeader]?h.headers[s.requestIdHeader].toString():null,C=h.headers[s.parentIdHeader]?h.headers[s.parentIdHeader].toString():null,w=h.headers[s.rootIdHeader]?h.headers[s.rootIdHeader].toString():null;this.correlationContextHeader=h.headers[s.correlationContextHeader]?h.headers[s.correlationContextHeader].toString():null,c.w3cEnabled&&(v||g)?(this.traceparent=new u(v?v.toString():null),this.tracestate=v&&g&&new l(g?g.toString():null),this.setBackCompatFromThisTraceContext()):y?c.w3cEnabled?(this.traceparent=new u(null,y),this.setBackCompatFromThisTraceContext()):(this.parentId=y,this.requestId=c.generateRequestId(this.parentId),this.operationId=c.getRootId(this.requestId)):c.w3cEnabled?(this.traceparent=new u,this.traceparent.parentId=C,this.traceparent.legacyRootId=w||C,this.setBackCompatFromThisTraceContext()):(this.parentId=C,this.requestId=c.generateRequestId(w||this.parentId),this.correlationContextHeader=null,this.operationId=c.getRootId(this.requestId)),m&&(this.requestId=m,this.operationId=c.getRootId(this.requestId))}},p.parseId=function(h){var m=h.split("|");return m.length>0?m[0]:""},p.keys=new i.ContextTagKeys,p}(a);e.exports=d}),mC=I((t,e)=>{"use strict";function r(u){return typeof u=="function"}var n=console.error.bind(console);function i(u,d,f){var p=!!u[d]&&u.propertyIsEnumerable(d);Object.defineProperty(u,d,{configurable:!0,enumerable:p,writable:!0,value:f})}function o(u){u&&u.logger&&(r(u.logger)?n=u.logger:n("new logger isn't a function, not replacing"))}function s(u,d,f){if(!u||!u[d]){n("no original function "+d+" to wrap");return}if(!f){n("no wrapper function"),n(new Error().stack);return}if(!r(u[d])||!r(f)){n("original object and wrapper must be functions");return}var p=u[d],h=f(p,d);return i(h,"__original",p),i(h,"__unwrap",function(){u[d]===h&&i(u,d,p)}),i(h,"__wrapped",!0),i(u,d,h),h}function a(u,d,f){if(u)Array.isArray(u)||(u=[u]);else{n("must provide one or more modules to patch"),n(new Error().stack);return}if(!(d&&Array.isArray(d))){n("must provide one or more functions to wrap on modules");return}u.forEach(function(p){d.forEach(function(h){s(p,h,f)})})}function c(u,d){if(!u||!u[d]){n("no function to unwrap."),n(new Error().stack);return}if(!u[d].__unwrap)n("no original to unwrap to -- has "+d+" already been unwrapped?");else return u[d].__unwrap()}function l(u,d){if(u)Array.isArray(u)||(u=[u]);else{n("must provide one or more modules to patch"),n(new Error().stack);return}if(!(d&&Array.isArray(d))){n("must provide one or more functions to unwrap on modules");return}u.forEach(function(f){d.forEach(function(p){c(f,p)})})}o.wrap=s,o.massWrap=a,o.unwrap=c,o.massUnwrap=l,e.exports=o}),gC=I((t,e)=>{"use strict";var r=mC(),n=r.wrap,i=r.unwrap,o="wrap@before";function s(d,f,p){var h=!!d[f]&&d.propertyIsEnumerable(f);Object.defineProperty(d,f,{configurable:!0,enumerable:h,writable:!0,value:p})}function a(d,f){for(var p=f.length,h=0;h<p;h++){var m=f[h],g=d[o];if(typeof g=="function")g(m);else if(Array.isArray(g))for(var v=g.length,y=0;y<v;y++)g[y](m)}}function c(d,f){var p;return p=d._events&&d._events[f],Array.isArray(p)||(p?p=[p]:p=[]),p}function l(d,f,p){var h=c(d,f),m=h.filter(function(g){return p.indexOf(g)===-1});m.length>0&&a(d,m)}function u(d,f){if(d){var p=d;if(typeof d=="function")p=f(d);else if(Array.isArray(d)){p=[];for(var h=0;h<d.length;h++)p[h]=f(d[h])}return p}}e.exports=function(d,f,p){if(!d||!d.on||!d.addListener||!d.removeListener||!d.emit)throw new Error("can only wrap real EEs");if(!f)throw new Error("must have function to run on listener addition");if(!p)throw new Error("must have function to wrap listeners when emitting");function h(g){return function(v,y){var C=c(this,v).slice();try{var w=g.call(this,v,y);return l(this,v,C),w}finally{this.on.__wrapped||n(this,"on",h),this.addListener.__wrapped||n(this,"addListener",h)}}}function m(g){return function(v){if(!this._events||!this._events[v])return g.apply(this,arguments);var y=this._events[v];function C(w){return function(){this._events[v]=y;try{return w.apply(this,arguments)}finally{y=this._events[v],this._events[v]=u(y,p)}}}n(this,"removeListener",C);try{return this._events[v]=u(y,p),g.apply(this,arguments)}finally{i(this,"removeListener"),this._events[v]=y}}}d[o]?typeof d[o]=="function"?s(d,o,[d[o],f]):Array.isArray(d[o])&&d[o].push(f):s(d,o,f),d.__wrapped||(n(d,"addListener",h),n(d,"on",h),n(d,"emit",m),s(d,"__unwrap",function(){i(d,"addListener"),i(d,"on"),i(d,"emit"),delete d[o],delete d.__wrapped}),s(d,"__wrapped",!0))}}),yX=I((t,e)=>{"use strict";var r=require("util"),n=require("assert"),i=gC(),o=require("async_hooks"),s="cls@contexts",a="error@context",c=process.env.DEBUG_CLS_HOOKED,l=-1;e.exports={getNamespace:d,createNamespace:f,destroyNamespace:p,reset:h,ERROR_SYMBOL:a};function u(g){this.name=g,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}u.prototype.set=function(g,v){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[g]=v,c){let y=" ".repeat(this._indent<0?0:this._indent);m(y+"CONTEXT-SET KEY:"+g+"="+v+" in ns:"+this.name+" currentUid:"+l+" active:"+r.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return v},u.prototype.get=function(g){if(!this.active){if(c){let v=o.currentId(),y=o.triggerAsyncId(),C=" ".repeat(this._indent<0?0:this._indent);m(`${C}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${g}=undefined currentUid:${l} asyncHooksCurrentId:${v} triggerId:${y} len:${this._set.length}`)}return}if(c){let v=o.executionAsyncId(),y=o.triggerAsyncId(),C=" ".repeat(this._indent<0?0:this._indent);m(C+"CONTEXT-GETTING KEY:"+g+"="+this.active[g]+" ("+this.name+") currentUid:"+l+" active:"+r.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),m(`${C}CONTEXT-GETTING KEY: (${this.name}) ${g}=${this.active[g]} currentUid:${l} asyncHooksCurrentId:${v} triggerId:${y} len:${this._set.length} active:${r.inspect(this.active)}`)}return this.active[g]},u.prototype.createContext=function(){let g=Object.create(this.active?this.active:Object.prototype);if(g._ns_name=this.name,g.id=l,c){let v=o.executionAsyncId(),y=o.triggerAsyncId(),C=" ".repeat(this._indent<0?0:this._indent);m(`${C}CONTEXT-CREATED Context: (${this.name}) currentUid:${l} asyncHooksCurrentId:${v} triggerId:${y} len:${this._set.length} context:${r.inspect(g,{showHidden:!0,depth:2,colors:!0})}`)}return g},u.prototype.run=function(g){let v=this.createContext();this.enter(v);try{if(c){let y=o.triggerAsyncId(),C=o.executionAsyncId(),w=" ".repeat(this._indent<0?0:this._indent);m(`${w}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${l} triggerId:${y} asyncHooksCurrentId:${C} len:${this._set.length} context:${r.inspect(v)}`)}return g(v),v}catch(y){throw y&&(y[a]=v),y}finally{if(c){let y=o.triggerAsyncId(),C=o.executionAsyncId(),w=" ".repeat(this._indent<0?0:this._indent);m(`${w}CONTEXT-RUN END: (${this.name}) currentUid:${l} triggerId:${y} asyncHooksCurrentId:${C} len:${this._set.length} ${r.inspect(v)}`)}this.exit(v)}},u.prototype.runAndReturn=function(g){let v;return this.run(function(y){v=g(y)}),v},u.prototype.runPromise=function(g){let v=this.createContext();this.enter(v);let y=g(v);if(!y||!y.then||!y.catch)throw new Error("fn must return a promise.");return c&&m("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+r.inspect(v)),y.then(C=>(c&&m("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+r.inspect(v)),this.exit(v),C)).catch(C=>{throw C[a]=v,c&&m("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+r.inspect(v)),this.exit(v),C})},u.prototype.bind=function(g,v){v||(this.active?v=this.active:v=this.createContext());let y=this;return function(){y.enter(v);try{return g.apply(this,arguments)}catch(C){throw C&&(C[a]=v),C}finally{y.exit(v)}}},u.prototype.enter=function(g){if(n.ok(g,"context must be provided for entering"),c){let v=o.executionAsyncId(),y=o.triggerAsyncId(),C=" ".repeat(this._indent<0?0:this._indent);m(`${C}CONTEXT-ENTER: (${this.name}) currentUid:${l} triggerId:${y} asyncHooksCurrentId:${v} len:${this._set.length} ${r.inspect(g)}`)}this._set.push(this.active),this.active=g},u.prototype.exit=function(g){if(n.ok(g,"context must be provided for exiting"),c){let y=o.executionAsyncId(),C=o.triggerAsyncId(),w=" ".repeat(this._indent<0?0:this._indent);m(`${w}CONTEXT-EXIT: (${this.name}) currentUid:${l} triggerId:${C} asyncHooksCurrentId:${y} len:${this._set.length} ${r.inspect(g)}`)}if(this.active===g){n.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let v=this._set.lastIndexOf(g);v<0?(c&&m("??ERROR?? context exiting but not entered - ignoring: "+r.inspect(g)),n.ok(v>=0,`context not currently entered; can't exit. 
`+r.inspect(this)+`
`+r.inspect(g))):(n.ok(v,"can't remove top context"),this._set.splice(v,1))},u.prototype.bindEmitter=function(g){n.ok(g.on&&g.addListener&&g.emit,"can only bind real EEs");let v=this,y="context@"+this.name;function C(b){!b||(b[s]||(b[s]=Object.create(null)),b[s][y]={namespace:v,context:v.active})}function w(b){if(!(b&&b[s]))return b;let E=b,S=b[s];return Object.keys(S).forEach(function(x){let T=S[x];E=T.namespace.bind(E,T.context)}),E}i(g,C,w)},u.prototype.fromException=function(g){return g[a]};function d(g){return process.namespaces[g]}function f(g){n.ok(g,"namespace must be given a name."),c&&m(`NS-CREATING NAMESPACE (${g})`);let v=new u(g);return v.id=l,o.createHook({init(y,C,w,b){if(l=o.executionAsyncId(),v.active){if(v._contexts.set(y,v.active),c){let E=" ".repeat(v._indent<0?0:v._indent);m(`${E}INIT [${C}] (${g}) asyncId:${y} currentUid:${l} triggerId:${w} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} resource:${b}`)}}else if(l===0){let E=o.triggerAsyncId(),S=v._contexts.get(E);if(S){if(v._contexts.set(y,S),c){let x=" ".repeat(v._indent<0?0:v._indent);m(`${x}INIT USING CONTEXT FROM TRIGGERID [${C}] (${g}) asyncId:${y} currentUid:${l} triggerId:${E} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} resource:${b}`)}}else if(c){let x=" ".repeat(v._indent<0?0:v._indent);m(`${x}INIT MISSING CONTEXT [${C}] (${g}) asyncId:${y} currentUid:${l} triggerId:${E} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} resource:${b}`)}}if(c&&C==="PROMISE"){m(r.inspect(b,{showHidden:!0}));let E=b.parentId,S=" ".repeat(v._indent<0?0:v._indent);m(`${S}INIT RESOURCE-PROMISE [${C}] (${g}) parentId:${E} asyncId:${y} currentUid:${l} triggerId:${w} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} resource:${b}`)}},before(y){l=o.executionAsyncId();let C;if(C=v._contexts.get(y)||v._contexts.get(l),C){if(c){let w=o.triggerAsyncId(),b=" ".repeat(v._indent<0?0:v._indent);m(`${b}BEFORE (${g}) asyncId:${y} currentUid:${l} triggerId:${w} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(C)}`),v._indent+=2}v.enter(C)}else if(c){let w=o.triggerAsyncId(),b=" ".repeat(v._indent<0?0:v._indent);m(`${b}BEFORE MISSING CONTEXT (${g}) asyncId:${y} currentUid:${l} triggerId:${w} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${r.inspect(v._contexts,{showHidden:!0,depth:2,colors:!0})}`),v._indent+=2}},after(y){l=o.executionAsyncId();let C;if(C=v._contexts.get(y)||v._contexts.get(l),C){if(c){let w=o.triggerAsyncId();v._indent-=2;let b=" ".repeat(v._indent<0?0:v._indent);m(`${b}AFTER (${g}) asyncId:${y} currentUid:${l} triggerId:${w} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(C)}`)}v.exit(C)}else if(c){let w=o.triggerAsyncId();v._indent-=2;let b=" ".repeat(v._indent<0?0:v._indent);m(`${b}AFTER MISSING CONTEXT (${g}) asyncId:${y} currentUid:${l} triggerId:${w} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(C)}`)}},destroy(y){if(l=o.executionAsyncId(),c){let C=o.triggerAsyncId(),w=" ".repeat(v._indent<0?0:v._indent);m(`${w}DESTROY (${g}) currentUid:${l} asyncId:${y} triggerId:${C} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(v._contexts.get(l))}`)}v._contexts.delete(y)}}).enable(),process.namespaces[g]=v,v}function p(g){let v=d(g);n.ok(v,`can't delete nonexistent namespace! "`+g+'"'),n.ok(v.id,"don't assign to process.namespaces directly! "+r.inspect(v)),process.namespaces[g]=null}function h(){process.namespaces&&Object.keys(process.namespaces).forEach(function(g){p(g)}),process.namespaces=Object.create(null)}process.namespaces={};function m(...g){c&&process._rawDebug(`${r.format(...g)}`)}}),wX=I((t,e)=>{"use strict";function r(){}e.exports=function(){let n=this._hooks,i=this._state,o=process.nextTick;process.nextTick=function(){if(!i.enabled)return o.apply(process,arguments);let s=new Array(arguments.length);for(let u=0;u<arguments.length;u++)s[u]=arguments[u];let a=s[0];if(typeof a!="function")throw new TypeError("callback is not a function");let c=new r,l=--i.counter;return n.init.call(c,l,0,null,null),s[0]=function(){n.pre.call(c,l);let u=!0;try{a.apply(this,arguments),u=!1}finally{u&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){n.post.call(c,l,!0),n.destroy.call(null,l)})}n.post.call(c,l,!1),n.destroy.call(null,l)},o.apply(process,s)}}}),CX=I((t,e)=>{"use strict";function r(){}e.exports=function(){let n=this._hooks,i=this._state,o=global.Promise,s=o.prototype.then;o.prototype.then=u;function a(d,f,p,h){return typeof d!="function"?h?c(p):l(p):function(){n.pre.call(f,p);try{return d.apply(this,arguments)}finally{n.post.call(f,p,!1),n.destroy.call(null,p)}}}function c(d){return function(f){return n.destroy.call(null,d),f}}function l(d){return function(f){throw n.destroy.call(null,d),f}}function u(d,f){if(!i.enabled)return s.call(this,d,f);let p=new r,h=--i.counter;return n.init.call(p,h,0,null,null),s.call(this,a(d,p,h,!0),a(f,p,h,!1))}}}),bX=I((t,e)=>{"use strict";var r=require("timers");function n(){}function i(){}function o(){}var s=new Map,a=new Map,c=new Map,l=null,u=!1;e.exports=function(){d(this._hooks,this._state,"setTimeout","clearTimeout",n,s,!0),d(this._hooks,this._state,"setInterval","clearInterval",i,a,!1),d(this._hooks,this._state,"setImmediate","clearImmediate",o,c,!0),global.setTimeout=r.setTimeout,global.setInterval=r.setInterval,global.setImmediate=r.setImmediate,global.clearTimeout=r.clearTimeout,global.clearInterval=r.clearInterval,global.clearImmediate=r.clearImmediate};function d(f,p,h,m,g,v,y){let C=r[h],w=r[m];r[h]=function(){if(!p.enabled)return C.apply(r,arguments);let b=new Array(arguments.length);for(let R=0;R<arguments.length;R++)b[R]=arguments[R];let E=b[0];if(typeof E!="function")throw new TypeError('"callback" argument must be a function');let S=new g,x=--p.counter,T;return f.init.call(S,x,0,null,null),b[0]=function(){l=T,f.pre.call(S,x);let R=!0;try{E.apply(this,arguments),R=!1}finally{R&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){f.post.call(S,x,!0),v.delete(T),f.destroy.call(null,x)})}f.post.call(S,x,!1),l=null,(y||u)&&(u=!1,v.delete(T),f.destroy.call(null,x))},T=C.apply(r,b),v.set(T,x),T},r[m]=function(b){if(l===b&&b!==null)u=!0;else if(v.has(b)){let E=v.get(b);v.delete(b),f.destroy.call(null,E)}w.apply(r,arguments)}}}),xL=I((t,e)=>{e.exports={name:"async-hook-jl",description:"Inspect the life of handle objects in node",version:"1.7.6",author:"Andreas Madsen <amwebdk@gmail.com>",main:"./index.js",scripts:{test:"node ./test/runner.js && eslint ."},repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},keywords:["async","async hooks","inspect","async wrap"],license:"MIT",dependencies:{"stack-chain":"^1.3.7"},devDependencies:{async:"1.5.x","cli-color":"1.1.x",eslint:"^3.4.0",endpoint:"0.4.x"},engines:{node:"^4.7 || >=6.9 || >=7.3"}}}),EX=I((t,e)=>{"use strict";var r=process.binding("async_wrap"),n=r.Providers.TIMERWRAP,i={nextTick:wX(),promise:CX(),timers:bX()},o=new Set;function s(){this.enabled=!1,this.counter=0}function a(){let u=this.initFns=[],d=this.preFns=[],f=this.postFns=[],p=this.destroyFns=[];this.init=function(h,m,g,v){if(m===n){o.add(h);return}for(let y of u)y(h,this,m,g,v)},this.pre=function(h){if(!o.has(h))for(let m of d)m(h,this)},this.post=function(h,m){if(!o.has(h))for(let g of f)g(h,this,m)},this.destroy=function(h){if(o.has(h)){o.delete(h);return}for(let m of p)m(h)}}a.prototype.add=function(u){u.init&&this.initFns.push(u.init),u.pre&&this.preFns.push(u.pre),u.post&&this.postFns.push(u.post),u.destroy&&this.destroyFns.push(u.destroy)};function c(u,d){let f=u.indexOf(d);f!==-1&&u.splice(f,1)}a.prototype.remove=function(u){u.init&&c(this.initFns,u.init),u.pre&&c(this.preFns,u.pre),u.post&&c(this.postFns,u.post),u.destroy&&c(this.destroyFns,u.destroy)};function l(){this._state=new s,this._hooks=new a,this.version=xL().version,this.providers=r.Providers;for(let u of Object.keys(i))i[u].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),r.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}e.exports=l,l.prototype.addHooks=function(u){this._hooks.add(u)},l.prototype.removeHooks=function(u){this._hooks.remove(u)},l.prototype.enable=function(){this._state.enabled=!0,r.enable()},l.prototype.disable=function(){this._state.enabled=!1,r.disable()}}),kL=I((t,e)=>{e.exports={name:"stack-chain",description:"API for combining call site modifiers",version:"1.3.7",author:"Andreas Madsen <amwebdk@gmail.com>",scripts:{test:"tap ./test/simple"},repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},keywords:["stack","chain","trace","call site","concat","format"],devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},license:"MIT"}}),_X=I((t,e)=>{function r(n){try{return Error.prototype.toString.call(n)}catch(i){try{return"<error: "+i+">"}catch(o){return"<error>"}}}e.exports=function(n,i){var o=[];o.push(r(n));for(var s=0;s<i.length;s++){var a=i[s],c;try{c=a.toString()}catch(l){try{c="<error: "+l+">"}catch(u){c="<error>"}}o.push("    at "+c)}return o.join(`
`)}}),SX=I((t,e)=>{var r=_X();function n(){this.extend=new s,this.filter=new s,this.format=new a,this.version=kL().version}var i=!1;n.prototype.callSite=function d(f){f||(f={}),i=!0;var p={};Error.captureStackTrace(p,d);var h=p.stack;return i=!1,h=h.slice(f.slice||0),f.extend&&(h=this.extend._modify(p,h)),f.filter&&(h=this.filter._modify(p,h)),h};var o=new n;function s(){this._modifiers=[]}s.prototype._modify=function(d,f){for(var p=0,h=this._modifiers.length;p<h;p++)f=this._modifiers[p](d,f);return f},s.prototype.attach=function(d){this._modifiers.push(d)},s.prototype.deattach=function(d){var f=this._modifiers.indexOf(d);return f===-1?!1:(this._modifiers.splice(f,1),!0)};function a(){this._formater=r,this._previous=void 0}a.prototype.replace=function(d){d?this._formater=d:this.restore()},a.prototype.restore=function(){this._formater=r,this._previous=void 0},a.prototype._backup=function(){this._previous=this._formater},a.prototype._roolback=function(){this._previous===r?this.replace(void 0):this.replace(this._previous),this._previous=void 0},Error.prepareStackTrace&&o.format.replace(Error.prepareStackTrace);var c=!1;function l(d,f){if(i)return f;if(c)return r(d,f);var p=f.concat();p=o.extend._modify(d,p),p=o.filter._modify(d,p),p=p.slice(0,Error.stackTraceLimit),Object.isExtensible(d)&&Object.getOwnPropertyDescriptor(d,"callSite")===void 0&&(d.callSite={original:f,mutated:p}),c=!0;var h=o.format._formater(d,p);return c=!1,h}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return l},set:function(d){d===l?o.format._roolback():(o.format._backup(),o.format.replace(d))}});function u(){return this.stack,this.callSite}Object.defineProperty(Error.prototype,"callSite",{get:u,set:function(d){Object.defineProperty(this,"callSite",{value:d,writable:!0,configurable:!0})},configurable:!0}),e.exports=o}),PL=I((t,e)=>{if(global._stackChain)if(global._stackChain.version===kL().version)e.exports=global._stackChain;else throw new Error("Conflicting version of stack-chain found");else e.exports=global._stackChain=SX()}),xX=I((t,e)=>{"use strict";var r=EX();if(global._asyncHook)if(global._asyncHook.version===xL().version)e.exports=global._asyncHook;else throw new Error("Conflicting version of async-hook-jl found");else PL().filter.attach(function(n,i){return i.filter(function(o){let s=o.getFileName();return!(s&&s.slice(0,__dirname.length)===__dirname)})}),e.exports=global._asyncHook=new r}),kX=I((t,e)=>{"use strict";var r=require("util"),n=require("assert"),i=gC(),o=xX(),s="cls@contexts",a="error@context",c=[];for(let w in o.providers)c[o.providers[w]]=w;var l=process.env.DEBUG_CLS_HOOKED,u=-1;e.exports={getNamespace:f,createNamespace:p,destroyNamespace:h,reset:m,ERROR_SYMBOL:a};function d(w){this.name=w,this.active=null,this._set=[],this.id=null,this._contexts=new Map}d.prototype.set=function(w,b){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return l&&g("    SETTING KEY:"+w+"="+b+" in ns:"+this.name+" uid:"+u+" active:"+r.inspect(this.active,!0)),this.active[w]=b,b},d.prototype.get=function(w){if(!this.active){l&&g("    GETTING KEY:"+w+"=undefined "+this.name+" uid:"+u+" active:"+r.inspect(this.active,!0));return}return l&&g("    GETTING KEY:"+w+"="+this.active[w]+" "+this.name+" uid:"+u+" active:"+r.inspect(this.active,!0)),this.active[w]},d.prototype.createContext=function(){l&&g("   CREATING Context: "+this.name+" uid:"+u+" len:"+this._set.length+"  active:"+r.inspect(this.active,!0,2,!0));let w=Object.create(this.active?this.active:Object.prototype);return w._ns_name=this.name,w.id=u,l&&g("   CREATED Context: "+this.name+" uid:"+u+" len:"+this._set.length+"  context:"+r.inspect(w,!0,2,!0)),w},d.prototype.run=function(w){let b=this.createContext();this.enter(b);try{return l&&g(" BEFORE RUN: "+this.name+" uid:"+u+" len:"+this._set.length+" "+r.inspect(b)),w(b),b}catch(E){throw E&&(E[a]=b),E}finally{l&&g(" AFTER RUN: "+this.name+" uid:"+u+" len:"+this._set.length+" "+r.inspect(b)),this.exit(b)}},d.prototype.runAndReturn=function(w){var b;return this.run(function(E){b=w(E)}),b},d.prototype.runPromise=function(w){let b=this.createContext();this.enter(b);let E=w(b);if(!E||!E.then||!E.catch)throw new Error("fn must return a promise.");return l&&g(" BEFORE runPromise: "+this.name+" uid:"+u+" len:"+this._set.length+" "+r.inspect(b)),E.then(S=>(l&&g(" AFTER runPromise: "+this.name+" uid:"+u+" len:"+this._set.length+" "+r.inspect(b)),this.exit(b),S)).catch(S=>{throw S[a]=b,l&&g(" AFTER runPromise: "+this.name+" uid:"+u+" len:"+this._set.length+" "+r.inspect(b)),this.exit(b),S})},d.prototype.bind=function(w,b){b||(this.active?b=this.active:b=this.createContext());let E=this;return function(){E.enter(b);try{return w.apply(this,arguments)}catch(S){throw S&&(S[a]=b),S}finally{E.exit(b)}}},d.prototype.enter=function(w){n.ok(w,"context must be provided for entering"),l&&g("  ENTER "+this.name+" uid:"+u+" len:"+this._set.length+" context: "+r.inspect(w)),this._set.push(this.active),this.active=w},d.prototype.exit=function(w){if(n.ok(w,"context must be provided for exiting"),l&&g("  EXIT "+this.name+" uid:"+u+" len:"+this._set.length+" context: "+r.inspect(w)),this.active===w){n.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let b=this._set.lastIndexOf(w);b<0?(l&&g("??ERROR?? context exiting but not entered - ignoring: "+r.inspect(w)),n.ok(b>=0,`context not currently entered; can't exit. 
`+r.inspect(this)+`
`+r.inspect(w))):(n.ok(b,"can't remove top context"),this._set.splice(b,1))},d.prototype.bindEmitter=function(w){n.ok(w.on&&w.addListener&&w.emit,"can only bind real EEs");let b=this,E="context@"+this.name;function S(T){!T||(T[s]||(T[s]=Object.create(null)),T[s][E]={namespace:b,context:b.active})}function x(T){if(!(T&&T[s]))return T;let R=T,q=T[s];return Object.keys(q).forEach(function(B){let te=q[B];R=te.namespace.bind(R,te.context)}),R}i(w,S,x)},d.prototype.fromException=function(w){return w[a]};function f(w){return process.namespaces[w]}function p(w){n.ok(w,"namespace must be given a name."),l&&g("CREATING NAMESPACE "+w);let b=new d(w);return b.id=u,o.addHooks({init(E,S,x,T,R){u=E,T?(b._contexts.set(E,b._contexts.get(T)),l&&g("PARENTID: "+w+" uid:"+E+" parent:"+T+" provider:"+x)):b._contexts.set(u,b.active),l&&g("INIT "+w+" uid:"+E+" parent:"+T+" provider:"+c[x]+" active:"+r.inspect(b.active,!0))},pre(E,S){u=E;let x=b._contexts.get(E);x?(l&&g(" PRE "+w+" uid:"+E+" handle:"+v(S)+" context:"+r.inspect(x)),b.enter(x)):l&&g(" PRE MISSING CONTEXT "+w+" uid:"+E+" handle:"+v(S))},post(E,S){u=E;let x=b._contexts.get(E);x?(l&&g(" POST "+w+" uid:"+E+" handle:"+v(S)+" context:"+r.inspect(x)),b.exit(x)):l&&g(" POST MISSING CONTEXT "+w+" uid:"+E+" handle:"+v(S))},destroy(E){u=E,l&&g("DESTROY "+w+" uid:"+E+" context:"+r.inspect(b._contexts.get(u))+" active:"+r.inspect(b.active,!0)),b._contexts.delete(E)}}),process.namespaces[w]=b,b}function h(w){let b=f(w);n.ok(b,`can't delete nonexistent namespace! "`+w+'"'),n.ok(b.id,"don't assign to process.namespaces directly! "+r.inspect(b)),process.namespaces[w]=null}function m(){process.namespaces&&Object.keys(process.namespaces).forEach(function(w){h(w)}),process.namespaces=Object.create(null)}process.namespaces={},o._state&&!o._state.enabled&&o.enable();function g(w){process.env.DEBUG&&process._rawDebug(w)}function v(w){if(!w)return w;if(typeof w=="function")return w.name?w.name:(w.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1];if(w.constructor&&w.constructor.name)return w.constructor.name}if(l){y=PL();for(C in y.filter._modifiers)y.filter.deattach(C)}var y,C}),PX=I((t,e)=>{"use strict";var r=cC();process&&r.gte(process.versions.node,"8.0.0")?e.exports=yX():e.exports=kX()}),IX=I((t,e)=>{var r=mC().wrap,n=1<<0,i=1<<1,o=1<<2,s=1<<3,a=[],c=0,l=!1,u=[],d,f;function p(S,x){var T=S.length,R=x.length,q=[];if(T===0&&R===0)return q;for(var B=0;B<T;B++)q[B]=S[B];if(R===0)return q;for(var te=0;te<R;te++){var ee=!0;for(B=0;B<T;B++)if(S[B].uid===x[te].uid){ee=!1;break}ee&&q.push(x[te])}return q}process._fatalException?(h=!1,d=function(S){var x=a.length;if(h||x===0)return!1;var T=!1;h=!0;for(var R=0;R<x;++R){var q=a[R];if((q.flags&s)!=0){var B=m&&m[q.uid];T=q.error(B,S)||T}}return h=!1,u.length>0&&(a=u.pop()),m=void 0,T&&!l},f=function(S,x,T){var R=[];l=!0;for(var q=0;q<T;++q){var B=x[q];if(R[B.uid]=B.data,(B.flags&n)!=0){var te=B.create(B.data);te!==void 0&&(R[B.uid]=te)}}return l=!1,function(){m=R,u.push(a),a=p(x,a),l=!0;for(var ee=0;ee<T;++ee)(x[ee].flags&i)>0&&x[ee].before(this,R[x[ee].uid]);l=!1;var H=S.apply(this,arguments);for(l=!0,ee=0;ee<T;++ee)(x[ee].flags&o)>0&&x[ee].after(this,R[x[ee].uid]);return l=!1,a=u.pop(),m=void 0,H}},r(process,"_fatalException",function(S){return function(x){return d(x)||S(x)}})):(g=!1,d=function(S){if(g)throw S;for(var x=!1,T=a.length,R=0;R<T;++R){var q=a[R];(q.flags&s)!=0&&(x=q.error(null,S)||x)}if(!x&&l)throw S},f=function(S,x,T){var R=[];l=!0;for(var q=0;q<T;++q){var B=x[q];if(R[B.uid]=B.data,(B.flags&n)!=0){var te=B.create(B.data);te!==void 0&&(R[B.uid]=te)}}return l=!1,function(){var ee=!1,H=!1;u.push(a),a=p(x,a),l=!0;for(var $=0;$<T;++$)(x[$].flags&i)>0&&x[$].before(this,R[x[$].uid]);l=!1;var A;try{A=S.apply(this,arguments)}catch(D){ee=!0;for(var $=0;$<T;++$)if((a[$].flags&s)!=0)try{H=a[$].error(R[x[$].uid],D)||H}catch(G){throw g=!0,G}if(!H)throw process.removeListener("uncaughtException",d),process._originalNextTick(function(){process.addListener("uncaughtException",d)}),D}finally{if(!ee||H){for(l=!0,$=0;$<T;++$)(x[$].flags&o)>0&&x[$].after(this,R[x[$].uid]);l=!1}a=u.pop()}return A}},process.addListener("uncaughtException",d));var h,m,g;function v(S,x,T){l=!0;for(var R=0;R<T;++R){var q=x[R];q.create&&q.create(q.data)}return l=!1,function(){u.push(a),a=p(x,a);var B=S.apply(this,arguments);return a=u.pop(),B}}function y(S){var x=a.length;if(x===0)return S;for(var T=a.slice(),R=0;R<x;++R)if(T[R].flags>0)return f(S,T,x);return v(S,T,x)}function C(S,x){typeof S.create=="function"&&(this.create=S.create,this.flags|=n),typeof S.before=="function"&&(this.before=S.before,this.flags|=i),typeof S.after=="function"&&(this.after=S.after,this.flags|=o),typeof S.error=="function"&&(this.error=S.error,this.flags|=s),this.uid=++c,this.data=x===void 0?null:x}C.prototype.create=void 0,C.prototype.before=void 0,C.prototype.after=void 0,C.prototype.error=void 0,C.prototype.data=void 0,C.prototype.uid=0,C.prototype.flags=0;function w(S,x){if(typeof S!="object"||!S)throw new TypeError("callbacks argument must be an object");return S instanceof C?S:new C(S,x)}function b(S,x){var T;S instanceof C?T=S:T=w(S,x);for(var R=!1,q=0;q<a.length;q++)if(T===a[q]){R=!0;break}return R||a.push(T),T}function E(S){for(var x=0;x<a.length;x++)if(S===a[x]){a.splice(x,1);break}}process.createAsyncListener=w,process.addAsyncListener=b,process.removeAsyncListener=E,e.exports=y}),AX=I((t,e)=>{"use strict";e.exports=(r,n)=>class extends r{constructor(i){var o,s;super(c);var a=this;try{i.apply(o,s)}catch(l){s[1](l)}return a;function c(l,u){o=this,s=[d,f];function d(p){return n(a,!1),l(p)}function f(p){return n(a,!1),u(p)}}}}}),TX=I(()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var t=mC(),e=cC(),r=t.wrap,n=t.massWrap,i=IX(),o=require("util"),s=e.gte(process.version,"6.0.0"),a=e.gte(process.version,"7.0.0"),c=e.gte(process.version,"8.0.0"),l=e.gte(process.version,"11.0.0"),u=require("net");a&&!u._normalizeArgs?u._normalizeArgs=function(A){if(A.length===0)return[{},null];var D=A[0],F={};typeof D=="object"&&D!==null?F=D:$(D)?F.path=D:(F.port=D,A.length>1&&typeof A[1]=="string"&&(F.host=A[1]));var G=A[A.length-1];return typeof G!="function"?[F,null]:[F,G]}:!a&&!u._normalizeConnectArgs&&(u._normalizeConnectArgs=function(A){var D={};function F(K){return(K=Number(K))>=0?K:!1}typeof A[0]=="object"&&A[0]!==null?D=A[0]:typeof A[0]=="string"&&F(A[0])===!1?D.path=A[0]:(D.port=A[0],typeof A[1]=="string"&&(D.host=A[1]));var G=A[A.length-1];return typeof G=="function"?[D,G]:[D]}),"_setUpListenHandle"in u.Server.prototype?r(u.Server.prototype,"_setUpListenHandle",d):r(u.Server.prototype,"_listen2",d);function d(A){return function(){this.on("connection",function(D){D._handle&&(D._handle.onread=i(D._handle.onread))});try{return A.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=i(this._handle.onconnection))}}}function f(A){if(A&&A._handle){var D=A._handle;D._originalOnread||(D._originalOnread=D.onread),D.onread=i(D._originalOnread)}}r(u.Socket.prototype,"connect",function(A){return function(){var D;c&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?D=arguments[0]:D=a?u._normalizeArgs(arguments):u._normalizeConnectArgs(arguments),D[1]&&(D[1]=i(D[1]));var F=A.apply(this,D);return f(this),F}});var p=require("http");r(p.Agent.prototype,"addRequest",function(A){return function(D){var F=D.onSocket;return D.onSocket=i(function(G){return f(G),F.apply(this,arguments)}),A.apply(this,arguments)}});var h=require("child_process");function m(A){Array.isArray(A.stdio)&&A.stdio.forEach(function(D){D&&D._handle&&(D._handle.onread=i(D._handle.onread),r(D._handle,"close",ee))}),A._handle&&(A._handle.onexit=i(A._handle.onexit))}h.ChildProcess?r(h.ChildProcess.prototype,"spawn",function(A){return function(){var D=A.apply(this,arguments);return m(this),D}}):n(h,["execFile","fork","spawn"],function(A){return function(){var D=A.apply(this,arguments);return m(D),D}}),process._fatalException||(process._originalNextTick=process.nextTick);var g=[];process._nextDomainTick&&g.push("_nextDomainTick"),process._tickDomainCallback&&g.push("_tickDomainCallback"),n(process,g,te),r(process,"nextTick",ee);var v=["setTimeout","setInterval"];global.setImmediate&&v.push("setImmediate");var y=require("timers"),C=global.setTimeout===y.setTimeout;n(y,v,ee),C&&n(global,v,ee);var w=require("dns");n(w,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],te),w.resolveNaptr&&r(w,"resolveNaptr",te);var b=require("fs");n(b,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],te),b.lchown&&r(b,"lchown",te),b.lchmod&&r(b,"lchmod",te),b.ftruncate&&r(b,"ftruncate",te);var E;try{E=require("zlib")}catch(A){}E&&E.Deflate&&E.Deflate.prototype&&(S=Object.getPrototypeOf(E.Deflate.prototype),S._transform?r(S,"_transform",te):S.write&&S.flush&&S.end&&n(S,["write","flush","end"],te));var S,x;try{x=require("crypto")}catch(A){}x&&(T=["pbkdf2","randomBytes"],l||T.push("pseudoRandomBytes"),n(x,T,te));var T,R=!!global.Promise&&Promise.toString()==="function Promise() { [native code] }"&&Promise.toString.toString()==="function toString() { [native code] }";R&&(q=process.addAsyncListener({create:function(){R=!1}}),global.Promise.resolve(!0).then(function(){R=!1}),process.removeAsyncListener(q));var q;R&&B();function B(){var A=global.Promise;function D(J){if(!(this instanceof D))return A(J);if(typeof J!="function")return new A(J);var he,me,He=new A(Ne);He.__proto__=D.prototype;try{J.apply(he,me)}catch(Ve){me[1](Ve)}return He;function Ne(Ve,Pt){he=this,me=[vr,fe];function vr(ue){return G(He,!1),Ve(ue)}function fe(ue){return G(He,!1),Pt(ue)}}}if(o.inherits(D,A),r(A.prototype,"then",z),A.prototype.chain&&r(A.prototype,"chain",z),s)global.Promise=AX()(A,G);else{var F=["all","race","reject","resolve","accept","defer"];F.forEach(function(J){typeof A[J]=="function"&&(D[J]=A[J])}),global.Promise=D}function G(J,he){(!J.__asl_wrapper||he)&&(J.__asl_wrapper=i(K))}function K(J,he,me,He){var Ne;try{return Ne=he.call(J,me),{returnVal:Ne,error:!1}}catch(Ve){return{errorVal:Ve,error:!0}}finally{Ne instanceof A?He.__asl_wrapper=function(){var Ve=Ne.__asl_wrapper||K;return Ve.apply(this,arguments)}:G(He,!0)}}function z(J){return function(){var he=this,me=J.apply(he,Array.prototype.map.call(arguments,He));return me.__asl_wrapper=function(Ne,Ve,Pt,vr){return he.__asl_wrapper?(he.__asl_wrapper(Ne,function(){},null,me),me.__asl_wrapper(Ne,Ve,Pt,vr)):K(Ne,Ve,Pt,vr)},me;function He(Ne){return typeof Ne!="function"?Ne:i(function(Ve){var Pt=(he.__asl_wrapper||K)(this,Ne,Ve,me);if(Pt.error)throw Pt.errorVal;return Pt.returnVal})}}}}function te(A){var D=function(){var F,G=arguments.length-1;if(typeof arguments[G]=="function"){F=Array(arguments.length);for(var K=0;K<arguments.length-1;K++)F[K]=arguments[K];F[G]=i(arguments[G])}return A.apply(this,F||arguments)};switch(A.length){case 1:return function(F){return arguments.length!==1?D.apply(this,arguments):(typeof F=="function"&&(F=i(F)),A.call(this,F))};case 2:return function(F,G){return arguments.length!==2?D.apply(this,arguments):(typeof G=="function"&&(G=i(G)),A.call(this,F,G))};case 3:return function(F,G,K){return arguments.length!==3?D.apply(this,arguments):(typeof K=="function"&&(K=i(K)),A.call(this,F,G,K))};case 4:return function(F,G,K,z){return arguments.length!==4?D.apply(this,arguments):(typeof z=="function"&&(z=i(z)),A.call(this,F,G,K,z))};case 5:return function(F,G,K,z,J){return arguments.length!==5?D.apply(this,arguments):(typeof J=="function"&&(J=i(J)),A.call(this,F,G,K,z,J))};case 6:return function(F,G,K,z,J,he){return arguments.length!==6?D.apply(this,arguments):(typeof he=="function"&&(he=i(he)),A.call(this,F,G,K,z,J,he))};default:return D}}function ee(A){var D=function(){var F;if(typeof arguments[0]=="function"){F=Array(arguments.length),F[0]=i(arguments[0]);for(var G=1;G<arguments.length;G++)F[G]=arguments[G]}return A.apply(this,F||arguments)};switch(A.length){case 1:return function(F){return arguments.length!==1?D.apply(this,arguments):(typeof F=="function"&&(F=i(F)),A.call(this,F))};case 2:return function(F,G){return arguments.length!==2?D.apply(this,arguments):(typeof F=="function"&&(F=i(F)),A.call(this,F,G))};case 3:return function(F,G,K){return arguments.length!==3?D.apply(this,arguments):(typeof F=="function"&&(F=i(F)),A.call(this,F,G,K))};case 4:return function(F,G,K,z){return arguments.length!==4?D.apply(this,arguments):(typeof F=="function"&&(F=i(F)),A.call(this,F,G,K,z))};case 5:return function(F,G,K,z,J){return arguments.length!==5?D.apply(this,arguments):(typeof F=="function"&&(F=i(F)),A.call(this,F,G,K,z,J))};case 6:return function(F,G,K,z,J,he){return arguments.length!==6?D.apply(this,arguments):(typeof F=="function"&&(F=i(F)),A.call(this,F,G,K,z,J,he))};default:return D}}function H(A){return(A=Number(A))>=0?A:!1}function $(A){return typeof A=="string"&&H(A)===!1}}),RX=I((t,e)=>{"use strict";var r=require("assert"),n=gC(),i="cls@contexts",o="error@context";process.addAsyncListener||TX();function s(d){this.name=d,this.active=null,this._set=[],this.id=null}s.prototype.set=function(d,f){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[d]=f,f},s.prototype.get=function(d){if(this.active)return this.active[d]},s.prototype.createContext=function(){return Object.create(this.active)},s.prototype.run=function(d){var f=this.createContext();this.enter(f);try{return d(f),f}catch(p){throw p&&(p[o]=f),p}finally{this.exit(f)}},s.prototype.runAndReturn=function(d){var f;return this.run(function(p){f=d(p)}),f},s.prototype.bind=function(d,f){f||(this.active?f=this.active:f=this.createContext());var p=this;return function(){p.enter(f);try{return d.apply(this,arguments)}catch(h){throw h&&(h[o]=f),h}finally{p.exit(f)}}},s.prototype.enter=function(d){r.ok(d,"context must be provided for entering"),this._set.push(this.active),this.active=d},s.prototype.exit=function(d){if(r.ok(d,"context must be provided for exiting"),this.active===d){r.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}var f=this._set.lastIndexOf(d);r.ok(f>=0,"context not currently entered; can't exit"),r.ok(f,"can't remove top context"),this._set.splice(f,1)},s.prototype.bindEmitter=function(d){r.ok(d.on&&d.addListener&&d.emit,"can only bind real EEs");var f=this,p="context@"+this.name;function h(g){!g||(g[i]||(g[i]=Object.create(null)),g[i][p]={namespace:f,context:f.active})}function m(g){if(!(g&&g[i]))return g;var v=g,y=g[i];return Object.keys(y).forEach(function(C){var w=y[C];v=w.namespace.bind(v,w.context)}),v}n(d,h,m)},s.prototype.fromException=function(d){return d[o]};function a(d){return process.namespaces[d]}function c(d){r.ok(d,"namespace must be given a name!");var f=new s(d);return f.id=process.addAsyncListener({create:function(){return f.active},before:function(p,h){h&&f.enter(h)},after:function(p,h){h&&f.exit(h)},error:function(p){p&&f.exit(p)}}),process.namespaces[d]=f,f}function l(d){var f=a(d);r.ok(f,"can't delete nonexistent namespace!"),r.ok(f.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(f.id),process.namespaces[d]=null}function u(){process.namespaces&&Object.keys(process.namespaces).forEach(function(d){l(d)}),process.namespaces=Object.create(null)}process.namespaces||u(),e.exports={getNamespace:a,createNamespace:c,destroyNamespace:l,reset:u}}),Ga=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CorrelationContextManager=void 0;var e=Dt(),r=hC(),n=Jp(),i=yL(),o=SL(),s=function(){function c(){}return c.getCurrentContext=function(){if(!c.enabled)return null;var l=c.session.get(c.CONTEXT_NAME);return l===void 0?null:l},c.generateContextObject=function(l,u,d,f,p,h){return u=u||l,this.enabled?{operation:{name:d,id:l,parentId:u,traceparent:p,tracestate:h},customProperties:new a(f)}:null},c.spanToContextObject=function(l,u,d){var f=new n;return f.traceId=l.traceId,f.spanId=l.spanId,f.traceFlag=n.formatOpenTelemetryTraceFlags(l.traceFlags)||n.DEFAULT_TRACE_FLAG,f.parentId=u,c.generateContextObject(f.traceId,f.parentId,d,null,f)},c.runWithContext=function(l,u){var d;return c.enabled?c.session.bind(u,(d={},d[c.CONTEXT_NAME]=l,d))():u()},c.wrapEmitter=function(l){c.enabled&&c.session.bindEmitter(l)},c.wrapCallback=function(l,u){var d;return c.enabled?c.session.bind(l,u?(d={},d[c.CONTEXT_NAME]=u,d):void 0):l},c.enable=function(l){if(!this.enabled){if(!this.isNodeVersionCompatible()){this.enabled=!1;return}c.hasEverEnabled||(this.forceClsHooked=l,this.hasEverEnabled=!0,typeof this.cls=="undefined"&&(c.forceClsHooked===!0||c.forceClsHooked===void 0&&c.shouldUseClsHooked()?this.cls=PX():this.cls=RX()),c.session=this.cls.createNamespace("AI-CLS-Session"),r.registerContextPreservation(function(u){return c.session.bind(u)})),this.enabled=!0}},c.startOperation=function(l,u){var d=l&&l.traceContext||null,f=l&&l.traceId?l:null,p=l&&l.headers;if(f){var h=new n("00-"+f.traceId+"-"+f.spanId+"-01"),m=new i(f.traceState?f.traceState.serialize():null),g=c.generateContextObject(f.traceId,"|"+f.traceId+"."+f.spanId+".",typeof u=="string"?u:"",void 0,h,m);return g}if(d){var h=new n(d.traceparent),m=new i(d.tracestate),v=typeof u=="object"?new o(u):null,g=c.generateContextObject(h.traceId,h.parentId,typeof u=="string"?u:v.getOperationName({}),v&&v.getCorrelationContextHeader()||void 0,h,m);return g}if(p){var h=new n(p.traceparent?p.traceparent.toString():null),m=new i(p.tracestate?p.tracestate.toString():null),v=new o(l),g=c.generateContextObject(h.traceId,h.parentId,v.getOperationName({}),v.getCorrelationContextHeader(),h,m);return g}return e.warn("startOperation was called with invalid arguments",arguments),null},c.disable=function(){this.enabled=!1},c.reset=function(){c.hasEverEnabled&&(c.session=null,c.session=this.cls.createNamespace("AI-CLS-Session"))},c.isNodeVersionCompatible=function(){var l=process.versions.node.split(".");return parseInt(l[0])>3||parseInt(l[0])>2&&parseInt(l[1])>2},c.shouldUseClsHooked=function(){var l=process.versions.node.split(".");return parseInt(l[0])>8||parseInt(l[0])>=8&&parseInt(l[1])>=2},c.canUseClsHooked=function(){var l=process.versions.node.split("."),u=parseInt(l[0])>8||parseInt(l[0])>=8&&parseInt(l[1])>=0,d=parseInt(l[0])<8||parseInt(l[0])<=8&&parseInt(l[1])<2,f=parseInt(l[0])>4||parseInt(l[0])>=4&&parseInt(l[1])>=7;return!(u&&d)&&f},c.enabled=!1,c.hasEverEnabled=!1,c.forceClsHooked=void 0,c.CONTEXT_NAME="ApplicationInsights-Context",c}();t.CorrelationContextManager=s;var a=function(){function c(l){this.props=[],this.addHeaderData(l)}return c.prototype.addHeaderData=function(l){var u=l?l.split(", "):[];this.props=u.map(function(d){var f=d.split("=");return{key:f[0],value:f[1]}}).concat(this.props)},c.prototype.serializeToHeader=function(){return this.props.map(function(l){return l.key+"="+l.value}).join(", ")},c.prototype.getProperty=function(l){for(var u=0;u<this.props.length;++u){var d=this.props[u];if(d.key===l)return d.value}},c.prototype.setProperty=function(l,u){if(c.bannedCharacters.test(l)||c.bannedCharacters.test(u)){e.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+l+" and value: "+u);return}for(var d=0;d<this.props.length;++d){var f=this.props[d];if(f.key===l){f.value=u;return}}this.props.push({key:l,value:u})},c.bannedCharacters=/[,=]/,c}()}),DX=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dispose=t.enable=void 0;var e=fr(),r=pt(),n=[],i=function(a){var c=a.data.message;n.forEach(function(l){c instanceof Error?l.trackException({exception:c}):(c.lastIndexOf(`
`)==c.length-1&&(c=c.substring(0,c.length-1)),l.trackTrace({message:c,severity:a.data.stderr?e.SeverityLevel.Warning:e.SeverityLevel.Information}))})};function o(a,c){a?(n.length===0&&r.channel.subscribe("console",i),n.push(c)):(n=n.filter(function(l){return l!=c}),n.length===0&&r.channel.unsubscribe("console",i))}t.enable=o;function s(){r.channel.unsubscribe("console",i),n=[]}t.dispose=s}),OX=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dispose=t.enable=void 0;var e=fr(),r=pt(),n=[],i={10:e.SeverityLevel.Verbose,20:e.SeverityLevel.Verbose,30:e.SeverityLevel.Information,40:e.SeverityLevel.Warning,50:e.SeverityLevel.Error,60:e.SeverityLevel.Critical},o=function(c){var l=c.data.result;n.forEach(function(u){var d=i[c.data.level];l instanceof Error?u.trackException({exception:l}):u.trackTrace({message:l,severity:d})})};function s(c,l){c?(n.length===0&&r.channel.subscribe("bunyan",o),n.push(l)):(n=n.filter(function(u){return u!=l}),n.length===0&&r.channel.unsubscribe("bunyan",o))}t.enable=s;function a(){r.channel.unsubscribe("bunyan",o),n=[]}t.dispose=a}),NX=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dispose=t.enable=void 0;var e=fr(),r=pt(),n=[],i={syslog:function(c){var l={emerg:e.SeverityLevel.Critical,alert:e.SeverityLevel.Critical,crit:e.SeverityLevel.Critical,error:e.SeverityLevel.Error,warning:e.SeverityLevel.Warning,notice:e.SeverityLevel.Information,info:e.SeverityLevel.Information,debug:e.SeverityLevel.Verbose};return l[c]===void 0?e.SeverityLevel.Information:l[c]},npm:function(c){var l={error:e.SeverityLevel.Error,warn:e.SeverityLevel.Warning,info:e.SeverityLevel.Information,verbose:e.SeverityLevel.Verbose,debug:e.SeverityLevel.Verbose,silly:e.SeverityLevel.Verbose};return l[c]===void 0?e.SeverityLevel.Information:l[c]},unknown:function(c){return e.SeverityLevel.Information}},o=function(c){var l=c.data.message;n.forEach(function(u){if(l instanceof Error)u.trackException({exception:l,properties:c.data.meta});else{var d=i[c.data.levelKind](c.data.level);u.trackTrace({message:l,severity:d,properties:c.data.meta})}})};function s(c,l){c?(n.length===0&&r.channel.subscribe("winston",o),n.push(l)):(n=n.filter(function(u){return u!=l}),n.length===0&&r.channel.unsubscribe("winston",o))}t.enable=s;function a(){r.channel.unsubscribe("winston",o),n=[]}t.dispose=a}),LX=I((t,e)=>{"use strict";var r=hC(),n=function(){function i(o){if(i.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=o,i.INSTANCE=this}return i.prototype.enable=function(o,s){r.IsInitialized&&(DX().enable(o&&s,this._client),OX().enable(o,this._client),NX().enable(o,this._client))},i.prototype.isInitialized=function(){return this._isInitialized},i.prototype.dispose=function(){i.INSTANCE=null,this.enable(!1,!1)},i._methodNames=["debug","info","log","warn","error"],i}();e.exports=n}),FX=I((t,e)=>{"use strict";var r=function(){function n(i){if(n.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");n.INSTANCE=this,this._client=i;var o=process.versions.node.split(".");n._canUseUncaughtExceptionMonitor=parseInt(o[0])>13||parseInt(o[0])===13&&parseInt(o[1])>=7}return n.prototype.isInitialized=function(){return this._isInitialized},n.prototype.enable=function(i){var o=this;if(i){this._isInitialized=!0;var s=this;if(!this._exceptionListenerHandle){var a=function(c,l,u){u===void 0&&(u=new Error(n._FALLBACK_ERROR_MESSAGE)),o._client.trackException({exception:u}),o._client.flush({isAppCrashing:!0}),c&&l&&process.listeners(l).length===1&&(console.error(u),process.exit(1))};n._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=a.bind(this,!1,void 0),process.on(n.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=a.bind(this,!0,n.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=a.bind(this,!1,void 0),process.on(n.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(n.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(n._canUseUncaughtExceptionMonitor?process.removeListener(n.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(n.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(n.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},n.prototype.dispose=function(){n.INSTANCE=null,this.enable(!1),this._isInitialized=!1},n.INSTANCE=null,n.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",n.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",n.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",n._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",n._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",n._canUseUncaughtExceptionMonitor=!1,n}();e.exports=r}),po=I(t=>{"use strict";var e;Object.defineProperty(t,"__esModule",{value:!0}),t.HeartBeatMetricName=t.DependencyTypeName=t.SpanAttribute=t.TelemetryTypeStringToQuickPulseDocumentType=t.TelemetryTypeStringToQuickPulseType=t.QuickPulseType=t.QuickPulseDocumentType=t.PerformanceToQuickPulseCounter=t.MetricId=t.PerformanceCounter=t.QuickPulseCounter=t.DEFAULT_LIVEMETRICS_HOST=t.DEFAULT_LIVEMETRICS_ENDPOINT=t.DEFAULT_BREEZE_ENDPOINT=void 0,t.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com",t.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com",t.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com";var r;(function(o){o.COMMITTED_BYTES="\\Memory\\Committed Bytes",o.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",o.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",o.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",o.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",o.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",o.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",o.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",o.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"})(r=t.QuickPulseCounter||(t.QuickPulseCounter={}));var n;(function(o){o.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",o.AVAILABLE_BYTES="\\Memory\\Available Bytes",o.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",o.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",o.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",o.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"})(n=t.PerformanceCounter||(t.PerformanceCounter={}));var i;(function(o){o.REQUESTS_DURATION="requests/duration",o.DEPENDENCIES_DURATION="dependencies/duration",o.EXCEPTIONS_COUNT="exceptions/count",o.TRACES_COUNT="traces/count"})(i=t.MetricId||(t.MetricId={})),t.PerformanceToQuickPulseCounter=(e={},e[n.PROCESSOR_TIME]=r.PROCESSOR_TIME,e[n.REQUEST_RATE]=r.REQUEST_RATE,e[n.REQUEST_DURATION]=r.REQUEST_DURATION,e[r.COMMITTED_BYTES]=r.COMMITTED_BYTES,e[r.REQUEST_FAILURE_RATE]=r.REQUEST_FAILURE_RATE,e[r.DEPENDENCY_RATE]=r.DEPENDENCY_RATE,e[r.DEPENDENCY_FAILURE_RATE]=r.DEPENDENCY_FAILURE_RATE,e[r.DEPENDENCY_DURATION]=r.DEPENDENCY_DURATION,e[r.EXCEPTION_RATE]=r.EXCEPTION_RATE,e),t.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"},t.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"},t.TelemetryTypeStringToQuickPulseType={EventData:t.QuickPulseType.Event,ExceptionData:t.QuickPulseType.Exception,MessageData:t.QuickPulseType.Trace,MetricData:t.QuickPulseType.Metric,RequestData:t.QuickPulseType.Request,RemoteDependencyData:t.QuickPulseType.Dependency,AvailabilityData:t.QuickPulseType.Availability,PageViewData:t.QuickPulseType.PageView},t.TelemetryTypeStringToQuickPulseDocumentType={EventData:t.QuickPulseDocumentType.Event,ExceptionData:t.QuickPulseDocumentType.Exception,MessageData:t.QuickPulseDocumentType.Trace,MetricData:t.QuickPulseDocumentType.Metric,RequestData:t.QuickPulseDocumentType.Request,RemoteDependencyData:t.QuickPulseDocumentType.Dependency,AvailabilityData:t.QuickPulseDocumentType.Availability,PageViewData:t.QuickPulseDocumentType.PageView},t.SpanAttribute={HttpHost:"http.host",HttpMethod:"http.method",HttpPort:"http.port",HttpStatusCode:"http.status_code",HttpUrl:"http.url",HttpUserAgent:"http.user_agent",GrpcMethod:"grpc.method",GrpcService:"rpc.service"},t.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc"},t.HeartBeatMetricName="HeartBeat"}),vC=I((t,e)=>{"use strict";var r=require("os"),n=po(),i=function(){function o(s,a,c){a===void 0&&(a=6e4),c===void 0&&(c=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,o.INSTANCE||(o.INSTANCE=this),this._isInitialized=!1,this._client=s,this._collectionInterval=a,this._enableLiveMetricsCounters=c}return o.prototype.enable=function(s,a){var c=this;this._isEnabled=s,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),s?this._handle||(this._lastCpus=r.cpus(),this._lastRequests={totalRequestCount:o._totalRequestCount,totalFailedRequestCount:o._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:o._totalDependencyCount,totalFailedDependencyCount:o._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:o._totalExceptionCount,time:+new Date},typeof process.cpuUsage=="function"&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=a||this._collectionInterval,this._handle=setInterval(function(){return c.trackPerformance()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},o.countRequest=function(s,a){var c;if(o.isEnabled()){if(typeof s=="string")c=+new Date("1970-01-01T"+s+"Z");else if(typeof s=="number")c=s;else return;o._intervalRequestExecutionTime+=c,a===!1&&o._totalFailedRequestCount++,o._totalRequestCount++}},o.countException=function(){o._totalExceptionCount++},o.countDependency=function(s,a){var c;if(o.isEnabled()){if(typeof s=="string")c=+new Date("1970-01-01T"+s+"Z");else if(typeof s=="number")c=s;else return;o._intervalDependencyExecutionTime+=c,a===!1&&o._totalFailedDependencyCount++,o._totalDependencyCount++}},o.prototype.isInitialized=function(){return this._isInitialized},o.isEnabled=function(){return o.INSTANCE&&o.INSTANCE._isEnabled},o.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},o.prototype._trackCpu=function(){var s=r.cpus();if(s&&s.length&&this._lastCpus&&s.length===this._lastCpus.length){for(var a=0,c=0,l=0,u=0,d=0,f=0;!!s&&f<s.length;f++){var p=s[f],h=this._lastCpus[f],m="% cpu("+f+") ",g=p.model,v=p.speed,y=p.times,C=h.times,w=y.user-C.user||0;a+=w;var b=y.sys-C.sys||0;c+=b;var E=y.nice-C.nice||0;l+=E;var S=y.idle-C.idle||0;u+=S;var x=y.irq-C.irq||0;d+=x}var T=void 0;if(typeof process.cpuUsage=="function"){var R=process.cpuUsage(),q=process.hrtime(),B=R.user-this._lastAppCpuUsage.user+(R.system-this._lastAppCpuUsage.system)||0;if(typeof this._lastHrtime!="undefined"&&this._lastHrtime.length===2){var te=(q[0]-this._lastHrtime[0])*1e6+(q[1]-this._lastHrtime[1])/1e3||0;T=100*B/(te*s.length)}this._lastAppCpuUsage=R,this._lastHrtime=q}var ee=a+c+l+u+d||1;this._client.trackMetric({name:n.PerformanceCounter.PROCESSOR_TIME,value:(ee-u)/ee*100}),this._client.trackMetric({name:n.PerformanceCounter.PROCESS_TIME,value:T||a/ee*100})}this._lastCpus=s},o.prototype._trackMemory=function(){var s=r.freemem(),a=process.memoryUsage().rss,c=r.totalmem()-s;this._client.trackMetric({name:n.PerformanceCounter.PRIVATE_BYTES,value:a}),this._client.trackMetric({name:n.PerformanceCounter.AVAILABLE_BYTES,value:s}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:n.QuickPulseCounter.COMMITTED_BYTES,value:c})},o.prototype._trackNetwork=function(){var s=this._lastRequests,a={totalRequestCount:o._totalRequestCount,totalFailedRequestCount:o._totalFailedRequestCount,time:+new Date},c=a.totalRequestCount-s.totalRequestCount||0,l=a.totalFailedRequestCount-s.totalFailedRequestCount||0,u=a.time-s.time,d=u/1e3,f=(o._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/c||0;if(this._lastIntervalRequestExecutionTime=o._intervalRequestExecutionTime,u>0){var p=c/d,h=l/d;this._client.trackMetric({name:n.PerformanceCounter.REQUEST_RATE,value:p}),(!this._enableLiveMetricsCounters||c>0)&&this._client.trackMetric({name:n.PerformanceCounter.REQUEST_DURATION,value:f}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:n.QuickPulseCounter.REQUEST_FAILURE_RATE,value:h})}this._lastRequests=a},o.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var s=this._lastDependencies,a={totalDependencyCount:o._totalDependencyCount,totalFailedDependencyCount:o._totalFailedDependencyCount,time:+new Date},c=a.totalDependencyCount-s.totalDependencyCount||0,l=a.totalFailedDependencyCount-s.totalFailedDependencyCount||0,u=a.time-s.time,d=u/1e3,f=(o._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/c||0;if(this._lastIntervalDependencyExecutionTime=o._intervalDependencyExecutionTime,u>0){var p=c/d,h=l/d;this._client.trackMetric({name:n.QuickPulseCounter.DEPENDENCY_RATE,value:p}),this._client.trackMetric({name:n.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:h}),(!this._enableLiveMetricsCounters||c>0)&&this._client.trackMetric({name:n.QuickPulseCounter.DEPENDENCY_DURATION,value:f})}this._lastDependencies=a}},o.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var s=this._lastExceptions,a={totalExceptionCount:o._totalExceptionCount,time:+new Date},c=a.totalExceptionCount-s.totalExceptionCount||0,l=a.time-s.time,u=l/1e3;if(l>0){var d=c/u;this._client.trackMetric({name:n.QuickPulseCounter.EXCEPTION_RATE,value:d})}this._lastExceptions=a}},o.prototype.dispose=function(){o.INSTANCE=null,this.enable(!1),this._isInitialized=!1},o._totalRequestCount=0,o._totalFailedRequestCount=0,o._totalDependencyCount=0,o._totalFailedDependencyCount=0,o._totalExceptionCount=0,o._intervalDependencyExecutionTime=0,o._intervalRequestExecutionTime=0,o}();e.exports=i}),MX=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AggregatedMetricCounter=void 0;var e=function(){function r(n){this.dimensions=n,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0}return r}();t.AggregatedMetricCounter=e}),qX=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreaggregatedMetricPropertyNames=void 0,t.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}}),IL=I((t,e)=>{"use strict";var r=t&&t.__assign||function(){return r=Object.assign||function(a){for(var c,l=1,u=arguments.length;l<u;l++){c=arguments[l];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},r.apply(this,arguments)},n=po(),i=MX(),o=qX(),s=function(){function a(c,l){l===void 0&&(l=6e4),a.INSTANCE||(a.INSTANCE=this),this._isInitialized=!1,a._dependencyCountersCollection=[],a._requestCountersCollection=[],a._exceptionCountersCollection=[],a._traceCountersCollection=[],this._client=c,this._collectionInterval=l}return a.prototype.enable=function(c,l){var u=this;this._isEnabled=c,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),c?this._handle||(this._collectionInterval=l||this._collectionInterval,this._handle=setInterval(function(){return u.trackPreAggregatedMetrics()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},a.countException=function(c){if(a.isEnabled()){var l=a._getAggregatedCounter(c,this._exceptionCountersCollection);l.totalCount++}},a.countTrace=function(c){if(a.isEnabled()){var l=a._getAggregatedCounter(c,this._traceCountersCollection);l.totalCount++}},a.countRequest=function(c,l){if(a.isEnabled()){var u,d=a._getAggregatedCounter(l,this._requestCountersCollection);if(typeof c=="string")u=+new Date("1970-01-01T"+c+"Z");else if(typeof c=="number")u=c;else return;d.intervalExecutionTime+=u,d.totalCount++}},a.countDependency=function(c,l){if(a.isEnabled()){var u=a._getAggregatedCounter(l,this._dependencyCountersCollection),d;if(typeof c=="string")d=+new Date("1970-01-01T"+c+"Z");else if(typeof c=="number")d=c;else return;u.intervalExecutionTime+=d,u.totalCount++}},a.prototype.isInitialized=function(){return this._isInitialized},a.isEnabled=function(){return a.INSTANCE&&a.INSTANCE._isEnabled},a.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},a._getAggregatedCounter=function(c,l){for(var u=!1,d=0;d<l.length;d++){if(c===l[d].dimensions)return l[d];if(Object.keys(c).length===Object.keys(l[d].dimensions).length){for(var f in c)if(c[f]!=l[d].dimensions[f]){u=!0;break}if(!u)return l[d];u=!1}}var p=new i.AggregatedMetricCounter(c);return l.push(p),p},a.prototype._trackRequestMetrics=function(){for(var c=0;c<a._requestCountersCollection.length;c++){var l=a._requestCountersCollection[c];l.time=+new Date;var u=l.totalCount-l.lastTotalCount||0,d=l.time-l.lastTime,f=(l.intervalExecutionTime-l.lastIntervalExecutionTime)/u||0;l.lastIntervalExecutionTime=l.intervalExecutionTime,d>0&&u>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:l.dimensions,value:f,count:u,aggregationInterval:d,metricType:n.MetricId.REQUESTS_DURATION}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},a.prototype._trackDependencyMetrics=function(){for(var c=0;c<a._dependencyCountersCollection.length;c++){var l=a._dependencyCountersCollection[c];l.time=+new Date;var u=l.totalCount-l.lastTotalCount||0,d=l.time-l.lastTime,f=(l.intervalExecutionTime-l.lastIntervalExecutionTime)/u||0;l.lastIntervalExecutionTime=l.intervalExecutionTime,d>0&&u>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:l.dimensions,value:f,count:u,aggregationInterval:d,metricType:n.MetricId.DEPENDENCIES_DURATION}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},a.prototype._trackExceptionMetrics=function(){for(var c=0;c<a._exceptionCountersCollection.length;c++){var l=a._exceptionCountersCollection[c],u=l.totalCount-l.lastTotalCount||0,d=l.time-l.lastTime;this._trackPreAggregatedMetric({name:"Exceptions",dimensions:l.dimensions,value:u,count:u,aggregationInterval:d,metricType:n.MetricId.EXCEPTIONS_COUNT}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},a.prototype._trackTraceMetrics=function(){for(var c=0;c<a._traceCountersCollection.length;c++){var l=a._traceCountersCollection[c],u=l.totalCount-l.lastTotalCount||0,d=l.time-l.lastTime;this._trackPreAggregatedMetric({name:"Traces",dimensions:l.dimensions,value:u,count:u,aggregationInterval:d,metricType:n.MetricId.TRACES_COUNT}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},a.prototype._trackPreAggregatedMetric=function(c){var l={};for(var u in c.dimensions)l[o.PreaggregatedMetricPropertyNames[u]]=c.dimensions[u];l=r(r({},l),{"_MS.MetricId":c.metricType,"_MS.AggregationIntervalMs":String(c.aggregationInterval),"_MS.IsAutocollected":"True"});var d={name:c.name,value:c.value,count:c.count,properties:l,kind:"Aggregation"};this._client.trackMetric(d)},a.prototype.dispose=function(){a.INSTANCE=null,this.enable(!1),this._isInitialized=!1},a}();e.exports=s}),Zp=I((t,e)=>{"use strict";var r=require("os"),n=require("fs"),i=require("path"),o=fr(),s=Dt(),a=function(){function c(l){this.keys=new o.ContextTagKeys,this.tags={},this._loadApplicationContext(l),this._loadDeviceContext(),this._loadInternalContext()}return c.prototype._loadApplicationContext=function(l){if(l=l||i.resolve(__dirname,"../../../../package.json"),!c.appVersion[l]){c.appVersion[l]="unknown";try{var u=JSON.parse(n.readFileSync(l,"utf8"));u&&typeof u.version=="string"&&(c.appVersion[l]=u.version)}catch(d){s.info("unable to read app version: ",d)}}this.tags[this.keys.applicationVersion]=c.appVersion[l]},c.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=r&&r.hostname(),this.tags[this.keys.deviceOSVersion]=r&&r.type()+" "+r.release(),this.tags[this.keys.cloudRole]=c.DefaultRoleName,this.tags["ai.device.osArchitecture"]=r&&r.arch(),this.tags["ai.device.osPlatform"]=r&&r.platform()},c.prototype._loadInternalContext=function(){var l=i.resolve(__dirname,"../../package.json");if(!c.sdkVersion){c.sdkVersion="unknown";try{var u=JSON.parse(n.readFileSync(l,"utf8"));u&&typeof u.version=="string"&&(c.sdkVersion=u.version)}catch(d){s.info("unable to read app version: ",d)}}this.tags[this.keys.internalSdkVersion]="node:"+c.sdkVersion},c.DefaultRoleName="Web",c.appVersion={},c.sdkVersion=null,c}();e.exports=a}),$X=I((t,e)=>{"use strict";var r=t&&t.__extends||function(){var u=function(d,f){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)Object.prototype.hasOwnProperty.call(h,m)&&(p[m]=h[m])},u(d,f)};return function(d,f){u(d,f);function p(){this.constructor=d}d.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}}(),n=require("url"),i=fr(),o=Yr(),s=Kl(),a=_L(),c=Va(),l=function(u){r(d,u);function d(f,p){var h=u.call(this)||this;return p&&p.method&&f&&(h.method=p.method,h.url=d._getUrlFromRequestOptions(f,p),h.startTime=+new Date),h}return d.prototype.onError=function(f){this._setStatus(void 0,f)},d.prototype.onResponse=function(f){this._setStatus(f.statusCode,void 0),this.correlationId=o.getCorrelationContextTarget(f,s.requestContextTargetKey)},d.prototype.getDependencyTelemetry=function(f,p){var h=n.parse(this.url);h.search=void 0,h.hash=void 0;var m=this.method.toUpperCase()+" "+h.pathname,g=i.RemoteDependencyDataConstants.TYPE_HTTP,v=h.hostname;h.port&&(v+=":"+h.port),this.correlationId?(g=i.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==c.correlationIdPrefix&&(v+=" | "+this.correlationId)):g=i.RemoteDependencyDataConstants.TYPE_HTTP;var y={id:p,name:m,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:g,target:v};if(f&&f.time?y.time=f.time:this.startTime&&(y.time=new Date(this.startTime)),f){for(var C in f)y[C]||(y[C]=f[C]);if(f.properties)for(var C in f.properties)y.properties[C]=f.properties[C]}return y},d._getUrlFromRequestOptions=function(f,p){if(typeof f=="string")if(f.indexOf("http://")===0||f.indexOf("https://")===0)f=n.parse(f);else{var h=n.parse(f);h.host==="443"?f=n.parse("https://"+f):f=n.parse("http://"+f)}else{if(f&&typeof n.URL=="function"&&f instanceof n.URL)return n.format(f);var m=f;f={},m&&Object.keys(m).forEach(function(y){f[y]=m[y]})}if(f.path){var g=n.parse(f.path);f.pathname=g.pathname,f.search=g.search}if(f.host&&f.port){var v=n.parse("http://"+f.host);!v.port&&f.port&&(f.hostname=f.host,delete f.host)}return f.protocol=f.protocol||p.agent&&p.agent.protocol||p.protocol||void 0,f.hostname=f.hostname||"localhost",n.format(f)},d}(a);e.exports=l}),jX=I(t=>{"use strict";var e=t&&t.__assign||function(){return e=Object.assign||function(s){for(var a,c=1,l=arguments.length;c<l;c++){a=arguments[c];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(s[u]=a[u])}return s},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.spanToTelemetryContract=void 0;var r=Ke(),n=po();function i(s){var a=e({},s);return Object.keys(n.SpanAttribute).forEach(function(c){delete a[c]}),a}function o(s){var a="|"+s.spanContext().traceId+"."+s.spanContext().spanId+".",c=Math.round(s._duration[0]*1e3+s._duration[1]/1e6),l=s.attributes["peer.address"]?s.attributes["peer.address"].toString():"",u=s.attributes.component?s.attributes.component.toString():"",d=u.toUpperCase()===n.DependencyTypeName.Http||!!s.attributes[n.SpanAttribute.HttpUrl],f=u.toLowerCase()===n.DependencyTypeName.Grpc;if(d){var p=s.attributes[n.SpanAttribute.HttpMethod]||"GET",h=new URL(s.attributes[n.SpanAttribute.HttpUrl].toString()),m=s.attributes[n.SpanAttribute.HttpHost]||h.host,g=s.attributes[n.SpanAttribute.HttpPort]||h.port||null,v=h.pathname||"/",y=p+" "+v,C=n.DependencyTypeName.Http,w=g?(m+":"+g).toString():m.toString(),b=h.toString(),E=s.attributes[n.SpanAttribute.HttpStatusCode]||s.status.code||0,S=E<400;return{id:a,name:y,dependencyTypeName:C,target:w,data:b,success:S,duration:c,url:b,resultCode:String(E),properties:i(s.attributes)}}else if(f){var p=s.attributes[n.SpanAttribute.GrpcMethod]||"rpc",x=s.attributes[n.SpanAttribute.GrpcService],T=x?p+" "+x:s.name;return{id:a,duration:c,name:T,target:x.toString(),data:x.toString()||T,url:x.toString()||T,dependencyTypeName:n.DependencyTypeName.Grpc,resultCode:String(s.status.code||0),success:s.status.code===0,properties:i(s.attributes)}}else{var R=s.name,q=s.links&&s.links.map(function(B){return{operation_Id:B.context.traceId,id:B.context.spanId}});return{id:a,duration:c,name:R,target:l,data:l||R,url:l||R,dependencyTypeName:s.kind===r.SpanKind.INTERNAL?n.DependencyTypeName.InProc:u||s.name,resultCode:String(s.status.code||0),success:s.status.code===0,properties:e(e({},i(s.attributes)),{"_MS.links":q||void 0})}}}t.spanToTelemetryContract=o}),UX=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.subscriber=void 0;var e=Ke(),r=pt(),n=Jp(),i=jX(),o=GN(),s=[],a=function(l){var u=l.data,d=i.spanToTelemetryContract(u),f=u.spanContext(),p=new n;p.traceId=f.traceId,p.spanId=f.spanId,p.traceFlag=n.formatOpenTelemetryTraceFlags(f.traceFlags),p.parentId=u.parentSpanId?"|"+f.traceId+"."+u.parentSpanId+".":null,o.AsyncScopeManager.with(u,function(){s.forEach(function(h){u.kind===e.SpanKind.SERVER?h.trackRequest(d):(u.kind===e.SpanKind.CLIENT||u.kind===e.SpanKind.INTERNAL)&&h.trackDependency(d)})})};t.subscriber=a;function c(l,u){l?(s.length===0&&r.channel.subscribe("azure-coretracing",t.subscriber),s.push(u)):(s=s.filter(function(d){return d!=u}),s.length===0&&r.channel.unsubscribe("azure-coretracing",t.subscriber))}t.enable=c}),BX=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.subscriber=void 0;var e=pt(),r=[],n=function(o){o.data.event.commandName!=="ismaster"&&r.forEach(function(s){var a=o.data.startedData&&o.data.startedData.databaseName||"Unknown database";s.trackDependency({target:a,data:o.data.event.commandName,name:o.data.event.commandName,duration:o.data.event.duration,success:o.data.succeeded,resultCode:o.data.succeeded?"0":"1",time:o.data.startedData.time,dependencyTypeName:"mongodb"})})};t.subscriber=n;function i(o,s){o?(r.length===0&&e.channel.subscribe("mongodb",t.subscriber),r.push(s)):(r=r.filter(function(a){return a!=s}),r.length===0&&e.channel.unsubscribe("mongodb",t.subscriber))}t.enable=i}),HX=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.subscriber=void 0;var e=pt(),r=[],n=function(o){r.forEach(function(s){var a=o.data.query||{},c=a.sql||"Unknown query",l=!o.data.err,u=a._connection||{},d=u.config||{},f=d.socketPath?d.socketPath:(d.host||"localhost")+":"+d.port;s.trackDependency({target:f,data:c,name:c,duration:o.data.duration,success:l,resultCode:l?"0":"1",time:o.data.time,dependencyTypeName:"mysql"})})};t.subscriber=n;function i(o,s){o?(r.length===0&&e.channel.subscribe("mysql",t.subscriber),r.push(s)):(r=r.filter(function(a){return a!=s}),r.length===0&&e.channel.unsubscribe("mysql",t.subscriber))}t.enable=i}),VX=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.subscriber=void 0;var e=pt(),r=[],n=function(o){r.forEach(function(s){o.data.commandObj.command!=="info"&&s.trackDependency({target:o.data.address,name:o.data.commandObj.command,data:o.data.commandObj.command,duration:o.data.duration,success:!o.data.err,resultCode:o.data.err?"1":"0",time:o.data.time,dependencyTypeName:"redis"})})};t.subscriber=n;function i(o,s){o?(r.length===0&&e.channel.subscribe("redis",t.subscriber),r.push(s)):(r=r.filter(function(a){return a!=s}),r.length===0&&e.channel.unsubscribe("redis",t.subscriber))}t.enable=i}),GX=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.subscriber=void 0;var e=pt(),r=[],n=function(o){r.forEach(function(s){var a=o.data.query,c=a.preparable&&a.preparable.text||a.plan||a.text||"unknown query",l=!o.data.error,u=o.data.database.host+":"+o.data.database.port;s.trackDependency({target:u,data:c,name:c,duration:o.data.duration,success:l,resultCode:l?"0":"1",time:o.data.time,dependencyTypeName:"postgres"})})};t.subscriber=n;function i(o,s){o?(r.length===0&&e.channel.subscribe("postgres",t.subscriber),r.push(s)):(r=r.filter(function(a){return a!=s}),r.length===0&&e.channel.unsubscribe("postgres",t.subscriber))}t.enable=i}),Yl=I((t,e)=>{"use strict";var r=t&&t.__spreadArrays||function(){for(var h=0,m=0,g=arguments.length;m<g;m++)h+=arguments[m].length;for(var v=Array(h),y=0,m=0;m<g;m++)for(var C=arguments[m],w=0,b=C.length;w<b;w++,y++)v[y]=C[w];return v},n=require("http"),i=require("https"),o=Dt(),s=Yr(),a=Kl(),c=$X(),l=Ga(),u=Va(),d=Jp(),f=hC(),p=function(){function h(m){if(h.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");h.INSTANCE=this,this._client=m}return h.prototype.enable=function(m){this._isEnabled=m,this._isEnabled&&!this._isInitialized&&this._initialize(),f.IsInitialized&&(UX().enable(!0,this._client),BX().enable(m,this._client),HX().enable(m,this._client),VX().enable(m,this._client),GX().enable(m,this._client))},h.prototype.isInitialized=function(){return this._isInitialized},h.prototype._initialize=function(){var m=this;this._isInitialized=!0;var g=n.request,v=i.request,y=function(C,w){var b=!w[h.disableCollectionRequestOption]&&!C[h.alreadyAutoCollectedFlag];w.headers&&w.headers["user-agent"]&&w.headers["user-agent"].toString().indexOf("azsdk-js")!==-1&&(b=!1),C[h.alreadyAutoCollectedFlag]=!0,C&&w&&b&&(l.CorrelationContextManager.wrapEmitter(C),h.trackRequest(m._client,{options:w,request:C}))};n.request=function(C){for(var w=[],b=1;b<arguments.length;b++)w[b-1]=arguments[b];var E=g.call.apply(g,r([n,C],w));return y(E,C),E},i.request=function(C){for(var w=[],b=1;b<arguments.length;b++)w[b-1]=arguments[b];var E=v.call.apply(v,r([i,C],w));return y(E,C),E},n.get=function(C){for(var w,b=[],E=1;E<arguments.length;E++)b[E-1]=arguments[E];var S=(w=n.request).call.apply(w,r([n,C],b));return S.end(),S},i.get=function(C){for(var w,b=[],E=1;E<arguments.length;E++)b[E-1]=arguments[E];var S=(w=i.request).call.apply(w,r([i,C],b));return S.end(),S}},h.trackRequest=function(m,g){if(!g.options||!g.request||!m){o.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!g.options,!g.request,!m);return}var v=new c(g.options,g.request),y=l.CorrelationContextManager.getCurrentContext(),C,w;if(y&&y.operation&&y.operation.traceparent&&d.isValidTraceId(y.operation.traceparent.traceId))y.operation.traceparent.updateSpanId(),C=y.operation.traceparent.getBackCompatRequestId();else if(u.w3cEnabled){var b=new d;w=b.toString(),C=b.getBackCompatRequestId()}else C=y&&y.operation&&y.operation.parentId+h.requestNumber+++".";if(s.canIncludeCorrelationHeader(m,v.getUrl())&&g.request.getHeader&&g.request.setHeader&&m.config&&m.config.correlationId){var E=g.request.getHeader(a.requestContextHeader);try{s.safeIncludeCorrelationHeader(m,g.request,E)}catch(T){o.warn("Request-Context header could not be set. Correlation of requests may be lost",T)}if(y&&y.operation)try{if(g.request.setHeader(a.requestIdHeader,C),m.config.ignoreLegacyHeaders||(g.request.setHeader(a.parentIdHeader,y.operation.id),g.request.setHeader(a.rootIdHeader,C)),w||y.operation.traceparent)g.request.setHeader(a.traceparentHeader,w||y.operation.traceparent.toString());else if(u.w3cEnabled){var b=new d().toString();g.request.setHeader(a.traceparentHeader,b)}if(y.operation.tracestate){var S=y.operation.tracestate.toString();S&&g.request.setHeader(a.traceStateHeader,S)}var x=y.customProperties.serializeToHeader();x&&g.request.setHeader(a.correlationContextHeader,x)}catch(T){o.warn("Correlation headers could not be set. Correlation of requests may be lost.",T)}}g.request.on&&(g.request.on("response",function(T){v.onResponse(T);var R=v.getDependencyTelemetry(g,C);R.contextObjects=R.contextObjects||{},R.contextObjects["http.RequestOptions"]=g.options,R.contextObjects["http.ClientRequest"]=g.request,R.contextObjects["http.ClientResponse"]=T,m.trackDependency(R)}),g.request.on("error",function(T){v.onError(T);var R=v.getDependencyTelemetry(g,C);R.contextObjects=R.contextObjects||{},R.contextObjects["http.RequestOptions"]=g.options,R.contextObjects["http.ClientRequest"]=g.request,R.contextObjects.Error=T,m.trackDependency(R)}),g.request.on("abort",function(){v.onError(new Error);var T=v.getDependencyTelemetry(g,C);T.contextObjects=T.contextObjects||{},T.contextObjects["http.RequestOptions"]=g.options,T.contextObjects["http.ClientRequest"]=g.request,m.trackDependency(T)}))},h.prototype.dispose=function(){h.INSTANCE=null,this.enable(!1),this._isInitialized=!1},h.disableCollectionRequestOption="disableAppInsightsAutoCollection",h.requestNumber=1,h.alreadyAutoCollectedFlag="_appInsightsAutoCollected",h}();e.exports=p}),WX=I((t,e)=>{"use strict";var r=require("os"),n=po(),i=Yr(),o=Zp(),s=Yl(),a="http://169.254.169.254/metadata/instance/compute",c="api-version=2017-12-01",l="format=json",u="ENETUNREACH",d=function(){function f(p){this._collectionInterval=9e5,this._vmData={},this._azInst_vmId="",this._azInst_subscriptionId="",this._azInst_osType="",f.INSTANCE||(f.INSTANCE=this),this._isInitialized=!1,this._client=p}return f.prototype.enable=function(p,h){var m=this;this._isEnabled=p,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),p?this._handle||(this._handle=setInterval(function(){return m.trackHeartBeat(h,function(){})},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},f.prototype.isInitialized=function(){return this._isInitialized},f.isEnabled=function(){return f.INSTANCE&&f.INSTANCE._isEnabled},f.prototype.trackHeartBeat=function(p,h){var m=this,g=!1,v={},y=o.sdkVersion;v.sdk=y,v.osType=r.type(),process.env.WEBSITE_SITE_NAME?(v.appSrv_SiteName=process.env.WEBSITE_SITE_NAME||"",v.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME||"",v.appSrv_wsHost=process.env.WEBSITE_HOSTNAME||""):process.env.FUNCTIONS_WORKER_RUNTIME?v.azfunction_appId=process.env.WEBSITE_HOSTNAME:p&&(this._isVM===void 0?(g=!0,this._getAzureComputeMetadata(p,function(){m._isVM&&Object.keys(m._vmData).length>0&&(v.azInst_vmId=m._vmData.vmId||"",v.azInst_subscriptionId=m._vmData.subscriptionId||"",v.azInst_osType=m._vmData.osType||"",m._azInst_vmId=m._vmData.vmId||"",m._azInst_subscriptionId=m._vmData.subscriptionId||"",m._azInst_osType=m._vmData.osType||""),m._client.trackMetric({name:n.HeartBeatMetricName,value:0,properties:v}),h()})):this._isVM&&(v.azInst_vmId=this._azInst_vmId,v.azInst_subscriptionId=this._azInst_subscriptionId,v.azInst_osType=this._azInst_osType)),g||(this._client.trackMetric({name:n.HeartBeatMetricName,value:0,properties:v}),h())},f.prototype.dispose=function(){f.INSTANCE=null,this.enable(!1),this._isInitialized=!1},f.prototype._getAzureComputeMetadata=function(p,h){var m,g=this,v=a+"?"+c+"&"+l,y=(m={method:"GET"},m[s.disableCollectionRequestOption]=!0,m.headers={Metadata:"True"},m),C=i.makeRequest(p,v,y,function(w){if(w.statusCode===200){g._isVM=!0;var b="";w.on("data",function(E){b+=E}),w.on("end",function(){g._vmData=g._isJSON(b)?JSON.parse(b):{},h()})}else h()});C&&(C.on("error",function(w){w&&w.message&&w.message.indexOf(u)>-1&&(g._isVM=!1),h()}),C.end())},f.prototype._isJSON=function(p){try{return JSON.parse(p)&&!!p}catch(h){return!1}},f}();e.exports=d}),AL=I((t,e)=>{"use strict";var r=require("http"),n=require("https"),i=Dt(),o=Yr(),s=Kl(),a=SL(),c=Ga(),l=vC(),u=function(){function d(f){if(d.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");d.INSTANCE=this,this._client=f}return d.prototype.enable=function(f){this._isEnabled=f,(this._isAutoCorrelating||this._isEnabled||l.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},d.prototype.useAutoCorrelation=function(f,p){f&&!this._isAutoCorrelating?c.CorrelationContextManager.enable(p):!f&&this._isAutoCorrelating&&c.CorrelationContextManager.disable(),this._isAutoCorrelating=f},d.prototype.isInitialized=function(){return this._isInitialized},d.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},d.prototype._generateCorrelationContext=function(f){if(this._isAutoCorrelating)return c.CorrelationContextManager.generateContextObject(f.getOperationId(this._client.context.tags),f.getRequestId(),f.getOperationName(this._client.context.tags),f.getCorrelationContextHeader(),f.getTraceparent(),f.getTracestate())},d.prototype._initialize=function(){var f=this;this._isInitialized=!0;var p=function(v){if(v){if(typeof v!="function")throw new Error("onRequest handler must be a function");return function(y,C){c.CorrelationContextManager.wrapEmitter(y),c.CorrelationContextManager.wrapEmitter(C);var w=y&&!y[d.alreadyAutoCollectedFlag];if(y&&w){var b=new a(y),E=f._generateCorrelationContext(b);c.CorrelationContextManager.runWithContext(E,function(){f._isEnabled&&(y[d.alreadyAutoCollectedFlag]=!0,d.trackRequest(f._client,{request:y,response:C},b)),typeof v=="function"&&v(y,C)})}else typeof v=="function"&&v(y,C)}}},h=function(v){var y=v.addListener.bind(v);v.addListener=function(C,w){switch(C){case"request":case"checkContinue":return y(C,p(w));default:return y(C,w)}},v.on=v.addListener},m=r.createServer;r.createServer=function(v,y){if(y&&typeof y=="function"){var C=m(v,p(y));return h(C),C}else{var C=m(p(v));return h(C),C}};var g=n.createServer;n.createServer=function(v,y){var C=g(v,p(y));return h(C),C}},d.trackRequestSync=function(f,p){if(!p.request||!p.response||!f){i.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!p.request,!p.response,!f);return}d.addResponseCorrelationIdHeader(f,p.response);var h=c.CorrelationContextManager.getCurrentContext(),m=new a(p.request,h&&h.operation.parentId);h&&(h.operation.id=m.getOperationId(f.context.tags)||h.operation.id,h.operation.name=m.getOperationName(f.context.tags)||h.operation.name,h.operation.parentId=m.getRequestId()||h.operation.parentId,h.customProperties.addHeaderData(m.getCorrelationContextHeader())),d.endRequest(f,m,p,p.duration,p.error)},d.trackRequest=function(f,p,h){if(!p.request||!p.response||!f){i.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!p.request,!p.response,!f);return}var m=c.CorrelationContextManager.getCurrentContext(),g=h||new a(p.request,m&&m.operation.parentId);o.canIncludeCorrelationHeader(f,g.getUrl())&&d.addResponseCorrelationIdHeader(f,p.response),m&&!h&&(m.operation.id=g.getOperationId(f.context.tags)||m.operation.id,m.operation.name=g.getOperationName(f.context.tags)||m.operation.name,m.operation.parentId=g.getOperationParentId(f.context.tags)||m.operation.parentId,m.customProperties.addHeaderData(g.getCorrelationContextHeader())),p.response.once&&p.response.once("finish",function(){d.endRequest(f,g,p,null,null)}),p.request.on&&p.request.on("error",function(v){d.endRequest(f,g,p,null,v)}),p.request.on&&p.request.on("aborted",function(){var v="The request has been aborted and the network socket has closed.";d.endRequest(f,g,p,null,v)})},d.addResponseCorrelationIdHeader=function(f,p){if(f.config&&f.config.correlationId&&p.getHeader&&p.setHeader&&!p.headersSent){var h=p.getHeader(s.requestContextHeader);o.safeIncludeCorrelationHeader(f,p,h)}},d.endRequest=function(f,p,h,m,g){g?p.onError(g,m):p.onResponse(h.response,m);var v=p.getRequestTelemetry(h);if(v.tagOverrides=p.getRequestTags(f.context.tags),h.tagOverrides)for(var y in h.tagOverrides)v.tagOverrides[y]=h.tagOverrides[y];var C=p.getLegacyRootId();C&&(v.properties.ai_legacyRootId=C),v.contextObjects=v.contextObjects||{},v.contextObjects["http.ServerRequest"]=h.request,v.contextObjects["http.ServerResponse"]=h.response,f.trackRequest(v)},d.prototype.dispose=function(){d.INSTANCE=null,this.enable(!1),this._isInitialized=!1,c.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},d.alreadyAutoCollectedFlag="_appInsightsAutoCollected",d}();e.exports=u}),zX=I((t,e)=>{"use strict";var r=t&&t.__assign||function(){return r=Object.assign||function(u){for(var d,f=1,p=arguments.length;f<p;f++){d=arguments[f];for(var h in d)Object.prototype.hasOwnProperty.call(d,h)&&(u[h]=d[h])}return u},r.apply(this,arguments)},n=require("os"),i=fr(),o=po(),s=Yr(),a=Dt(),c=s.w3cTraceId(),l=function(){function u(){}return u.createQuickPulseEnvelope=function(d,f,p,h){var m=n&&typeof n.hostname=="function"&&n.hostname()||"Unknown",g=h.tags&&h.keys&&h.keys.cloudRoleInstance&&h.tags[h.keys.cloudRoleInstance]||m,v=h.tags&&h.keys&&h.keys.cloudRole&&h.tags[h.keys.cloudRole]||null,y={Documents:f.length>0?f:null,InstrumentationKey:p.instrumentationKey||"",Metrics:d.length>0?d:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:h.tags[h.keys.internalSdkVersion],StreamId:c,MachineName:m,Instance:g,RoleName:v};return y},u.createQuickPulseMetric=function(d){var f;return f={Name:d.name,Value:d.value,Weight:d.count||1},f},u.telemetryEnvelopeToQuickPulseDocument=function(d){switch(d.data.baseType){case i.TelemetryTypeString.Event:return u.createQuickPulseEventDocument(d);case i.TelemetryTypeString.Exception:return u.createQuickPulseExceptionDocument(d);case i.TelemetryTypeString.Trace:return u.createQuickPulseTraceDocument(d);case i.TelemetryTypeString.Dependency:return u.createQuickPulseDependencyDocument(d);case i.TelemetryTypeString.Request:return u.createQuickPulseRequestDocument(d)}return null},u.createQuickPulseEventDocument=function(d){var f=u.createQuickPulseDocument(d),p=d.data.baseData.name,h=r(r({},f),{Name:p});return h},u.createQuickPulseTraceDocument=function(d){var f=u.createQuickPulseDocument(d),p=d.data.baseData.severityLevel||0,h=r(r({},f),{Message:d.data.baseData.message,SeverityLevel:i.SeverityLevel[p]});return h},u.createQuickPulseExceptionDocument=function(d){var f=u.createQuickPulseDocument(d),p=d.data.baseData.exceptions,h="",m="",g="";p&&p.length>0&&(p[0].parsedStack&&p[0].parsedStack.length>0?p[0].parsedStack.forEach(function(y){h+=y.assembly+`
`}):p[0].stack&&p[0].stack.length>0&&(h=p[0].stack),m=p[0].message,g=p[0].typeName);var v=r(r({},f),{Exception:h,ExceptionMessage:m,ExceptionType:g});return v},u.createQuickPulseRequestDocument=function(d){var f=u.createQuickPulseDocument(d),p=d.data.baseData,h=r(r({},f),{Name:p.name,Success:p.success,Duration:p.duration,ResponseCode:p.responseCode,OperationName:p.name});return h},u.createQuickPulseDependencyDocument=function(d){var f=u.createQuickPulseDocument(d),p=d.data.baseData,h=r(r({},f),{Name:p.name,Target:p.target,Success:p.success,Duration:p.duration,ResultCode:p.resultCode,CommandName:p.data,OperationName:f.OperationId,DependencyTypeName:p.type});return h},u.createQuickPulseDocument=function(d){var f,p,h,m;d.data.baseType?(p=o.TelemetryTypeStringToQuickPulseType[d.data.baseType],f=o.TelemetryTypeStringToQuickPulseDocumentType[d.data.baseType]):a.warn("Document type invalid; not sending live metric document",d.data.baseType),h=d.tags[u.keys.operationId],m=u.aggregateProperties(d);var g={DocumentType:f,__type:p,OperationId:h,Version:"1.0",Properties:m};return g},u.aggregateProperties=function(d){var f=[],p=d.data.baseData.measurements||{};for(var h in p)if(p.hasOwnProperty(h)){var m=p[h],g={key:h,value:m};f.push(g)}var v=d.data.baseData.properties||{};for(var h in v)if(v.hasOwnProperty(h)){var m=v[h],g={key:h,value:m};f.push(g)}return f},u.keys=new i.ContextTagKeys,u}();e.exports=l}),KX=I((t,e)=>{"use strict";var r=function(){return(Date.now()+621355968e5)*1e4};e.exports={getTransmissionTime:r}}),YX=I((t,e)=>{"use strict";var r=t&&t.__awaiter||function(d,f,p,h){function m(g){return g instanceof p?g:new p(function(v){v(g)})}return new(p||(p=Promise))(function(g,v){function y(b){try{w(h.next(b))}catch(E){v(E)}}function C(b){try{w(h.throw(b))}catch(E){v(E)}}function w(b){b.done?g(b.value):m(b.value).then(y,C)}w((h=h.apply(d,f||[])).next())})},n=t&&t.__generator||function(d,f){var p={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},h,m,g,v;return v={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function y(w){return function(b){return C([w,b])}}function C(w){if(h)throw new TypeError("Generator is already executing.");for(;p;)try{if(h=1,m&&(g=w[0]&2?m.return:w[0]?m.throw||((g=m.return)&&g.call(m),0):m.next)&&!(g=g.call(m,w[1])).done)return g;switch(m=0,g&&(w=[w[0]&2,g.value]),w[0]){case 0:case 1:g=w;break;case 4:return p.label++,{value:w[1],done:!1};case 5:p.label++,m=w[1],w=[0];continue;case 7:w=p.ops.pop(),p.trys.pop();continue;default:if(g=p.trys,!(g=g.length>0&&g[g.length-1])&&(w[0]===6||w[0]===2)){p=0;continue}if(w[0]===3&&(!g||w[1]>g[0]&&w[1]<g[3])){p.label=w[1];break}if(w[0]===6&&p.label<g[1]){p.label=g[1],g=w;break}if(g&&p.label<g[2]){p.label=g[2],p.ops.push(w);break}g[2]&&p.ops.pop(),p.trys.pop();continue}w=f.call(d,p)}catch(b){w=[6,b],m=0}finally{h=g=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},i=require("https"),o=Yl(),s=Dt(),a=KX(),c=Yr(),l={method:"POST",time:"x-ms-qps-transmission-time",pollingIntervalHint:"x-ms-qps-service-polling-interval-hint",endpointRedirect:"x-ms-qps-service-endpoint-redirect",instanceName:"x-ms-qps-instance-name",streamId:"x-ms-qps-stream-id",machineName:"x-ms-qps-machine-name",roleName:"x-ms-qps-role-name",streamid:"x-ms-qps-stream-id",invariantVersion:"x-ms-qps-invariant-version",subscribed:"x-ms-qps-subscribed"},u=function(){function d(f){this._config=f,this._consecutiveErrors=0}return d.prototype.ping=function(f,p,h){var m=[{name:l.streamId,value:f.StreamId},{name:l.machineName,value:f.MachineName},{name:l.roleName,value:f.RoleName},{name:l.instanceName,value:f.Instance},{name:l.invariantVersion,value:f.InvariantVersion.toString()}];this._submitData(f,p,h,"ping",m)},d.prototype.post=function(f,p,h){return r(this,void 0,void 0,function(){return n(this,function(m){switch(m.label){case 0:return[4,this._submitData([f],p,h,"post")];case 1:return m.sent(),[2]}})})},d.prototype._submitData=function(f,p,h,m,g){return r(this,void 0,void 0,function(){var v,y,C,w,b,E=this;return n(this,function(S){return v=JSON.stringify(f),y=(w={},w[o.disableCollectionRequestOption]=!0,w.host=p&&p.length>0?p:this._config.quickPulseHost,w.method=l.method,w.path="/QuickPulseService.svc/"+m+"?ikey="+this._config.instrumentationKey,w.headers=(b={Expect:"100-continue"},b[l.time]=a.getTransmissionTime(),b["Content-Type"]="application/json",b["Content-Length"]=Buffer.byteLength(v),b),w),g&&g.length>0&&g.forEach(function(x){return y.headers[x.name]=x.value}),this._config.httpsAgent?y.agent=this._config.httpsAgent:y.agent=c.tlsRestrictedAgent,C=i.request(y,function(x){if(x.statusCode==200){var T=x.headers[l.subscribed]==="true",R=x.headers[l.endpointRedirect]?x.headers[l.endpointRedirect].toString():null,q=x.headers[l.pollingIntervalHint]?parseInt(x.headers[l.pollingIntervalHint].toString()):null;E._consecutiveErrors=0,h(T,x,R,q)}else E._onError("StatusCode:"+x.statusCode+" StatusMessage:"+x.statusMessage),h()}),C.on("error",function(x){E._onError(x),h()}),C.write(v),C.end(),[2]})})},d.prototype._onError=function(f){this._consecutiveErrors++;var p="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%d.MAX_QPS_FAILURES_BEFORE_WARN==0?(p="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",s.warn(d.TAG,p,f)):s.info(d.TAG,p,f)},d.TAG="QuickPulseSender",d.MAX_QPS_FAILURES_BEFORE_WARN=25,d}();e.exports=u}),QX=I((t,e)=>{"use strict";var r=t&&t.__awaiter||function(u,d,f,p){function h(m){return m instanceof f?m:new f(function(g){g(m)})}return new(f||(f=Promise))(function(m,g){function v(w){try{C(p.next(w))}catch(b){g(b)}}function y(w){try{C(p.throw(w))}catch(b){g(b)}}function C(w){w.done?m(w.value):h(w.value).then(v,y)}C((p=p.apply(u,d||[])).next())})},n=t&&t.__generator||function(u,d){var f={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},p,h,m,g;return g={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function v(C){return function(w){return y([C,w])}}function y(C){if(p)throw new TypeError("Generator is already executing.");for(;f;)try{if(p=1,h&&(m=C[0]&2?h.return:C[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,C[1])).done)return m;switch(h=0,m&&(C=[C[0]&2,m.value]),C[0]){case 0:case 1:m=C;break;case 4:return f.label++,{value:C[1],done:!1};case 5:f.label++,h=C[1],C=[0];continue;case 7:C=f.ops.pop(),f.trys.pop();continue;default:if(m=f.trys,!(m=m.length>0&&m[m.length-1])&&(C[0]===6||C[0]===2)){f=0;continue}if(C[0]===3&&(!m||C[1]>m[0]&&C[1]<m[3])){f.label=C[1];break}if(C[0]===6&&f.label<m[1]){f.label=m[1],m=C;break}if(m&&f.label<m[2]){f.label=m[2],f.ops.push(C);break}m[2]&&f.ops.pop(),f.trys.pop();continue}C=d.call(u,f)}catch(w){C=[6,w],h=0}finally{p=m=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},i=Dt(),o=zX(),s=YX(),a=po(),c=Zp(),l=function(){function u(d,f){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=d,this.context=f||new c,this._sender=new s(this.config),this._isEnabled=!1}return u.prototype.addCollector=function(d){this._collectors.push(d)},u.prototype.trackMetric=function(d){this._addMetric(d)},u.prototype.addDocument=function(d){var f=o.telemetryEnvelopeToQuickPulseDocument(d);f&&this._documents.push(f)},u.prototype.enable=function(d){d&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!d&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},u.prototype.enableCollectors=function(d){this._collectors.forEach(function(f){f.enable(d)})},u.prototype._addMetric=function(d){var f=d.value,p=d.count||1,h=a.PerformanceToQuickPulseCounter[d.name];h&&(this._metrics[h]?(this._metrics[h].Value=(this._metrics[h].Value*this._metrics[h].Weight+f*p)/(this._metrics[h].Weight+p),this._metrics[h].Weight+=p):(this._metrics[h]=o.createQuickPulseMetric(d),this._metrics[h].Name=h,this._metrics[h].Weight=1))},u.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},u.prototype._goQuickPulse=function(){return r(this,void 0,void 0,function(){var d,f,p,h,m=this;return n(this,function(g){switch(g.label){case 0:return d=Object.keys(this._metrics).map(function(v){return m._metrics[v]}),f=o.createQuickPulseEnvelope(d,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(f)]:[3,2];case 1:return g.sent(),[3,3];case 2:this._ping(f),g.label=3;case 3:return p=this._pollingIntervalHint>0?this._pollingIntervalHint:u.PING_INTERVAL,h=this._isCollectingData?u.POST_INTERVAL:p,this._isCollectingData&&Date.now()-this._lastSuccessTime>=u.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,h=u.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=u.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(h=u.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),h),this._handle.unref(),[2]}})})},u.prototype._ping=function(d){this._sender.ping(d,this._redirectedHost,this._quickPulseDone.bind(this))},u.prototype._post=function(d){return r(this,void 0,void 0,function(){return n(this,function(f){switch(f.label){case 0:return[4,this._sender.post(d,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return f.sent(),[2]}})})},u.prototype._quickPulseDone=function(d,f,p,h){d!=null?(this._isCollectingData!==d&&(i.info("Live Metrics sending data",d),this.enableCollectors(d)),this._isCollectingData=d,p&&p.length>0&&(this._redirectedHost=p,i.info("Redirecting endpoint to: ",p)),h&&h>0&&(this._pollingIntervalHint=h),f&&f.statusCode<300&&f.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},u.MAX_POST_WAIT_TIME=2e4,u.MAX_PING_WAIT_TIME=6e4,u.FALLBACK_INTERVAL=6e4,u.PING_INTERVAL=5e3,u.POST_INTERVAL=1e3,u}();e.exports=l}),XX=I((t,e)=>{"use strict";var r=po(),n=function(){function i(){}return i.parse=function(o){if(!o)return{};var s=o.split(i._FIELDS_SEPARATOR),a=s.reduce(function(l,u){var d=u.split(i._FIELD_KEY_VALUE_SEPARATOR);if(d.length===2){var f=d[0].toLowerCase(),p=d[1];l[f]=p}return l},{});if(Object.keys(a).length>0){if(a.endpointsuffix){var c=a.location?a.location+".":"";a.ingestionendpoint=a.ingestionendpoint||"https://"+c+"dc."+a.endpointsuffix,a.liveendpoint=a.liveendpoint||"https://"+c+"live."+a.endpointsuffix}a.ingestionendpoint=a.ingestionendpoint||r.DEFAULT_BREEZE_ENDPOINT,a.liveendpoint=a.liveendpoint||r.DEFAULT_LIVEMETRICS_ENDPOINT}return a},i._FIELDS_SEPARATOR=";",i._FIELD_KEY_VALUE_SEPARATOR="=",i}();e.exports=n}),TL=I((t,e)=>{"use strict";var r=Va(),n=XX(),i=Dt(),o=po(),s=require("url"),a=function(){function c(l){var u=this;this.endpointBase=o.DEFAULT_BREEZE_ENDPOINT;var d=process.env[c.ENV_connectionString],f=n.parse(l),p=n.parse(d),h=!f.instrumentationkey&&Object.keys(f).length>0?null:l;this.instrumentationKey=f.instrumentationkey||h||p.instrumentationkey||c._getInstrumentationKey(),c._validateInstrumentationKey(this.instrumentationKey),this.endpointUrl=(f.ingestionendpoint||p.ingestionendpoint||this.endpointBase)+"/v2.1/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=30*1e3,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.setCorrelationId=function(m){return u.correlationId=m},this.proxyHttpUrl=process.env[c.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[c.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this.profileQueryEndpoint=f.ingestionendpoint||p.ingestionendpoint||process.env[c.ENV_profileQueryEndpoint]||this.endpointBase,this._quickPulseHost=f.liveendpoint||p.liveendpoint||process.env[c.ENV_quickPulseHost]||o.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=s.parse(this._quickPulseHost).host)}return Object.defineProperty(c.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(l){r.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=l,this.correlationId=r.correlationIdPrefix,r.queryCorrelationId(this,this.setCorrelationId)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(l){this._quickPulseHost=l},enumerable:!1,configurable:!0}),c._getInstrumentationKey=function(){var l=process.env[c.ENV_iKey]||process.env[c.ENV_azurePrefix+c.ENV_iKey]||process.env[c.legacy_ENV_iKey]||process.env[c.ENV_azurePrefix+c.legacy_ENV_iKey];if(!l||l=="")throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return l},c._validateInstrumentationKey=function(l){var u="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",d=new RegExp(u);return d.test(l)},c.ENV_azurePrefix="APPSETTING_",c.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",c.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",c.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",c.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",c.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",c.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",c.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",c.ENV_http_proxy="http_proxy",c.ENV_https_proxy="https_proxy",c}();e.exports=a}),JX=I(t=>{"use strict";var e=t&&t.__assign||function(){return e=Object.assign||function(s){for(var a,c=1,l=arguments.length;c<l;c++){a=arguments[c];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(s[u]=a[u])}return s},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.AutoCollectNativePerformance=void 0;var r=TL(),n=Zp(),i=Dt(),o=function(){function s(a){this._disabledMetrics={},s.INSTANCE&&s.INSTANCE.dispose(),s.INSTANCE=this,this._client=a}return s.isNodeVersionCompatible=function(){var a=process.versions.node.split(".");return parseInt(a[0])>=6},s.prototype.enable=function(a,c,l){var u=this;if(c===void 0&&(c={}),l===void 0&&(l=6e4),!!s.isNodeVersionCompatible()){if(s._metricsAvailable==null&&a&&!this._isInitialized)try{var d=require("applicationinsights-native-metrics");s._emitter=new d,s._metricsAvailable=!0,i.info("Native metrics module successfully loaded!")}catch(f){s._metricsAvailable=!1;return}this._isEnabled=a,this._disabledMetrics=c,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&s._emitter?(s._emitter.enable(!0,l),this._handle||(this._handle=setInterval(function(){return u._trackNativeMetrics()},l),this._handle.unref())):s._emitter&&(s._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))}},s.prototype.dispose=function(){this.enable(!1)},s.parseEnabled=function(a){var c=process.env[r.ENV_nativeMetricsDisableAll],l=process.env[r.ENV_nativeMetricsDisablers];if(c)return{isEnabled:!1,disabledMetrics:{}};if(l){var u=l.split(","),d={};if(u.length>0)for(var f=0,p=u;f<p.length;f++){var h=p[f];d[h]=!0}return typeof a=="object"?{isEnabled:!0,disabledMetrics:e(e({},a),d)}:{isEnabled:a,disabledMetrics:d}}return typeof a=="boolean"?{isEnabled:a,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:a}},s.prototype._trackNativeMetrics=function(){var a=!0;typeof this._isEnabled!="object"&&(a=this._isEnabled),a&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},s.prototype._trackGarbageCollection=function(){var a;if(!this._disabledMetrics.gc){var c=s._emitter.getGCData();for(var l in c){var u=c[l].metrics,d=l+" Garbage Collection Duration",f=Math.sqrt(u.sumSquares/u.count-Math.pow(u.total/u.count,2))||0;this._client.trackMetric({name:d,value:u.total,count:u.count,max:u.max,min:u.min,stdDev:f,tagOverrides:(a={},a[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,a)})}}},s.prototype._trackEventLoop=function(){var a;if(!this._disabledMetrics.loop){var c=s._emitter.getLoopData(),l=c.loopUsage;if(l.count!=0){var u="Event Loop CPU Time",d=Math.sqrt(l.sumSquares/l.count-Math.pow(l.total/l.count,2))||0;this._client.trackMetric({name:u,value:l.total,count:l.count,min:l.min,max:l.max,stdDev:d,tagOverrides:(a={},a[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,a)})}}},s.prototype._trackHeapUsage=function(){var a,c,l;if(!this._disabledMetrics.heap){var u=process.memoryUsage(),d=u.heapUsed,f=u.heapTotal,p=u.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:d,count:1,tagOverrides:(a={},a[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,a)}),this._client.trackMetric({name:"Memory Total (Heap)",value:f,count:1,tagOverrides:(c={},c[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,c)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:p-f,count:1,tagOverrides:(l={},l[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,l)})}},s}();t.AutoCollectNativePerformance=o}),ZX=I((t,e)=>{"use strict";var r=Dt(),n=function(){function i(o,s,a,c){this._buffer=[],this._lastSend=0,this._isDisabled=o,this._getBatchSize=s,this._getBatchIntervalMs=a,this._sender=c}return i.prototype.setUseDiskRetryCaching=function(o,s,a){this._sender.setDiskRetryMode(o,s,a)},i.prototype.send=function(o){var s=this;if(!this._isDisabled()){if(!o){r.warn("Cannot send null/undefined telemetry");return}if(this._buffer.push(o),this._buffer.length>=this._getBatchSize()){this.triggerSend(!1);return}!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){s._timeoutHandle=null,s.triggerSend(!1)},this._getBatchIntervalMs()))}},i.prototype.triggerSend=function(o,s){var a=this._buffer.length<1;a||(o?(this._sender.saveOnCrash(this._buffer),typeof s=="function"&&s("data saved on crash")):this._sender.send(this._buffer,s)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,a&&typeof s=="function"&&s("no data to send")},i}();e.exports=n}),eJ=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.azureRoleEnvironmentTelemetryProcessor=void 0;function e(r,n){process.env.WEBSITE_SITE_NAME&&(r.tags[n.keys.cloudRole]=process.env.WEBSITE_SITE_NAME)}t.azureRoleEnvironmentTelemetryProcessor=e}),tJ=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSamplingHashCode=t.samplingTelemetryProcessor=void 0;var e=fr();function r(i,o){var s=i.sampleRate,a=!1;return s==null||s>=100||i.data&&e.TelemetryType.Metric===e.baseTypeToTelemetryType(i.data.baseType)?!0:(o.correlationContext&&o.correlationContext.operation?a=n(o.correlationContext.operation.id)<s:a=Math.random()*100<s,a)}t.samplingTelemetryProcessor=r;function n(i){var o=-2147483648,s=2147483647,a=5381;if(!i)return 0;for(;i.length<8;)i=i+i;for(var c=0;c<i.length;c++)a=((a<<5)+a|0)+i.charCodeAt(c)|0;return a=a<=o?s:Math.abs(a),a/s*100}t.getSamplingHashCode=n}),rJ=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.performanceMetricsTelemetryProcessor=void 0;var e=vC(),r=fr();function n(i,o){switch(o&&o.addDocument(i),i.data.baseType){case r.TelemetryTypeString.Exception:e.countException();break;case r.TelemetryTypeString.Request:var s=i.data.baseData;e.countRequest(s.duration,s.success);break;case r.TelemetryTypeString.Dependency:var a=i.data.baseData;e.countDependency(a.duration,a.success);break}return!0}t.performanceMetricsTelemetryProcessor=n}),nJ=I(t=>{"use strict";var e=t&&t.__assign||function(){return e=Object.assign||function(s){for(var a,c=1,l=arguments.length;c<l;c++){a=arguments[c];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(s[u]=a[u])}return s},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.preAggregatedMetricsTelemetryProcessor=void 0;var r=fr(),n=IL(),i=fr();function o(s,a){if(n.isEnabled())switch(s.data.baseType){case i.TelemetryTypeString.Exception:var c=s.data.baseData;c.properties=e(e({},c.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var l={cloudRoleInstance:s.tags[a.keys.cloudRoleInstance],cloudRoleName:s.tags[a.keys.cloudRole]};n.countException(l);break;case i.TelemetryTypeString.Trace:var u=s.data.baseData;u.properties=e(e({},u.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var d={cloudRoleInstance:s.tags[a.keys.cloudRoleInstance],cloudRoleName:s.tags[a.keys.cloudRole],traceSeverityLevel:r.SeverityLevel[u.severity]};n.countTrace(d);break;case i.TelemetryTypeString.Request:var f=s.data.baseData;f.properties=e(e({},f.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var p={cloudRoleInstance:s.tags[a.keys.cloudRoleInstance],cloudRoleName:s.tags[a.keys.cloudRole],operationSynthetic:s.tags[a.keys.operationSyntheticSource],requestSuccess:f.success,requestResultCode:f.responseCode};n.countRequest(f.duration,p);break;case i.TelemetryTypeString.Dependency:var h=s.data.baseData;h.properties=e(e({},h.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var m={cloudRoleInstance:s.tags[a.keys.cloudRoleInstance],cloudRoleName:s.tags[a.keys.cloudRole],operationSynthetic:s.tags[a.keys.operationSyntheticSource],dependencySuccess:h.success,dependencyType:h.type,dependencyTarget:h.target,dependencyResultCode:h.resultCode};n.countDependency(h.duration,m);break}return!0}t.preAggregatedMetricsTelemetryProcessor=o}),iJ=I(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(eJ(),t),r(tJ(),t),r(rJ(),t),r(nJ(),t)}),oJ=I((t,e)=>{"use strict";var r=t&&t.__awaiter||function(p,h,m,g){function v(y){return y instanceof m?y:new m(function(C){C(y)})}return new(m||(m=Promise))(function(y,C){function w(S){try{E(g.next(S))}catch(x){C(x)}}function b(S){try{E(g.throw(S))}catch(x){C(x)}}function E(S){S.done?y(S.value):v(S.value).then(w,b)}E((g=g.apply(p,h||[])).next())})},n=t&&t.__generator||function(p,h){var m={label:0,sent:function(){if(y[0]&1)throw y[1];return y[1]},trys:[],ops:[]},g,v,y,C;return C={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function w(E){return function(S){return b([E,S])}}function b(E){if(g)throw new TypeError("Generator is already executing.");for(;m;)try{if(g=1,v&&(y=E[0]&2?v.return:E[0]?v.throw||((y=v.return)&&y.call(v),0):v.next)&&!(y=y.call(v,E[1])).done)return y;switch(v=0,y&&(E=[E[0]&2,y.value]),E[0]){case 0:case 1:y=E;break;case 4:return m.label++,{value:E[1],done:!1};case 5:m.label++,v=E[1],E=[0];continue;case 7:E=m.ops.pop(),m.trys.pop();continue;default:if(y=m.trys,!(y=y.length>0&&y[y.length-1])&&(E[0]===6||E[0]===2)){m=0;continue}if(E[0]===3&&(!y||E[1]>y[0]&&E[1]<y[3])){m.label=E[1];break}if(E[0]===6&&m.label<y[1]){m.label=y[1],y=E;break}if(y&&m.label<y[2]){m.label=y[2],m.ops.push(E);break}y[2]&&m.ops.pop(),m.trys.pop();continue}E=h.call(p,m)}catch(S){E=[6,S],v=0}finally{g=y=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},i=require("fs"),o=require("os"),s=require("path"),a=require("zlib"),c=require("child_process"),l=Dt(),u=Yl(),d=Yr(),f=function(){function p(h,m,g){if(this._redirectedHost=null,this._config=h,this._onSuccess=m,this._onError=g,this._enableDiskRetryMode=!1,this._resendInterval=p.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=p.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._fileCleanupTimer=null,this._tempDir=s.join(o.tmpdir(),p.TEMPDIR_PREFIX+this._config.instrumentationKey),!p.OS_PROVIDES_FILE_PROTECTION)if(p.USE_ICACLS){try{p.OS_PROVIDES_FILE_PROTECTION=i.existsSync(p.ICACLS_PATH)}catch(v){}p.OS_PROVIDES_FILE_PROTECTION||l.warn(p.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else p.OS_PROVIDES_FILE_PROTECTION=!0}return p.prototype.setDiskRetryMode=function(h,m,g){var v=this;this._enableDiskRetryMode=p.OS_PROVIDES_FILE_PROTECTION&&h,typeof m=="number"&&m>=0&&(this._resendInterval=Math.floor(m)),typeof g=="number"&&g>=0&&(this._maxBytesOnDisk=Math.floor(g)),h&&!p.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,l.warn(p.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout(function(){v._fileCleanupTask()},p.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref()):this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer)},p.prototype.send=function(h,m){return r(this,void 0,void 0,function(){var g,v,y,C,w=this;return n(this,function(b){return h&&(g=this._redirectedHost||this._config.endpointUrl,v={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},y="",h.forEach(function(E){var S=w._stringify(E);typeof S=="string"&&(y+=S+`
`)}),y.length>0&&(y=y.substring(0,y.length-1)),C=Buffer.from?Buffer.from(y):new Buffer(y),a.gzip(C,function(E,S){var x=S;E?(l.warn(E),x=C,v.headers["Content-Length"]=C.length.toString()):(v.headers["Content-Encoding"]="gzip",v.headers["Content-Length"]=S.length.toString()),l.info(p.TAG,v),v[u.disableCollectionRequestOption]=!0;var T=function(q){q.setEncoding("utf-8");var B="";q.on("data",function(te){B+=te}),q.on("end",function(){if(w._numConsecutiveFailures=0,w._enableDiskRetryMode){if(q.statusCode===200)w._resendTimer||(w._resendTimer=setTimeout(function(){w._resendTimer=null,w._sendFirstFileOnDisk()},w._resendInterval),w._resendTimer.unref());else if(w._isRetriable(q.statusCode))try{var te=JSON.parse(B),ee=[];te.errors.forEach(function($){w._isRetriable($.statusCode)&&ee.push(h[$.index])}),ee.length>0&&w._storeToDisk(ee)}catch($){w._storeToDisk(h)}}if(q.statusCode===307||q.statusCode===308)if(w._numConsecutiveRedirects++,w._numConsecutiveRedirects<10){var H=q.headers.location?q.headers.location.toString():null;H&&(w._redirectedHost=H,w.send(h,m))}else typeof m=="function"&&m("Error sending telemetry because of circular redirects.");else w._numConsecutiveRedirects=0,typeof m=="function"&&m(B),l.info(p.TAG,B),typeof w._onSuccess=="function"&&w._onSuccess(B)})},R=d.makeRequest(w._config,g,v,T);R.on("error",function(q){if(w._numConsecutiveFailures++,!w._enableDiskRetryMode||w._numConsecutiveFailures>0&&w._numConsecutiveFailures%p.MAX_CONNECTION_FAILURES_BEFORE_WARN==0){var B="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";w._enableDiskRetryMode&&(B="Ingestion endpoint could not be reached "+w._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),l.warn(p.TAG,B,d.dumpObj(q))}else{var B="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";l.info(p.TAG,B,d.dumpObj(q))}w._onErrorHelper(q),typeof m=="function"&&(q&&m(d.dumpObj(q)),m("Error sending telemetry")),w._enableDiskRetryMode&&w._storeToDisk(h)}),R.write(x),R.end()})),[2]})})},p.prototype.saveOnCrash=function(h){this._enableDiskRetryMode&&this._storeToDiskSync(this._stringify(h))},p.prototype._isRetriable=function(h){return h===206||h===408||h===429||h===439||h===500||h===503},p.prototype._runICACLS=function(h,m){var g=c.spawn(p.ICACLS_PATH,h,{windowsHide:!0});g.on("error",function(v){return m(v)}),g.on("close",function(v,y){return m(v===0?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+v+")"))})},p.prototype._runICACLSSync=function(h){if(c.spawnSync){var m=c.spawnSync(p.ICACLS_PATH,h,{windowsHide:!0});if(m.error)throw m.error;if(m.status!==0)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+m.status+")")}else throw new Error("Could not synchronously call ICACLS under current version of Node.js")},p.prototype._getACLIdentity=function(h){if(p.ACL_IDENTITY)return h(null,p.ACL_IDENTITY);var m=c.spawn(p.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),g="";m.stdout.on("data",function(v){return g+=v}),m.on("error",function(v){return h(v,null)}),m.on("close",function(v,y){return p.ACL_IDENTITY=g&&g.trim(),h(v===0?null:new Error("Getting ACL identity did not succeed (PS returned code "+v+")"),p.ACL_IDENTITY)})},p.prototype._getACLIdentitySync=function(){if(p.ACL_IDENTITY)return p.ACL_IDENTITY;if(c.spawnSync){var h=c.spawnSync(p.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(h.error)throw h.error;if(h.status!==0)throw new Error("Getting ACL identity did not succeed (PS returned code "+h.status+")");return p.ACL_IDENTITY=h.stdout&&h.stdout.toString().trim(),p.ACL_IDENTITY}else throw new Error("Could not synchronously get ACL identity under current version of Node.js")},p.prototype._getACLArguments=function(h,m){return[h,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",m+":(OI)(CI)F","/inheritance:r"]},p.prototype._applyACLRules=function(h,m){var g=this;if(!p.USE_ICACLS)return m(null);if(p.ACLED_DIRECTORIES[h]===void 0)p.ACLED_DIRECTORIES[h]=!1,this._getACLIdentity(function(v,y){if(v)return p.ACLED_DIRECTORIES[h]=!1,m(v);g._runICACLS(g._getACLArguments(h,y),function(C){return p.ACLED_DIRECTORIES[h]=!C,m(C)})});else return m(p.ACLED_DIRECTORIES[h]?null:new Error("Setting ACL restrictions did not succeed (cached result)"))},p.prototype._applyACLRulesSync=function(h){if(p.USE_ICACLS){if(p.ACLED_DIRECTORIES[h]===void 0){this._runICACLSSync(this._getACLArguments(h,this._getACLIdentitySync())),p.ACLED_DIRECTORIES[h]=!0;return}else if(!p.ACLED_DIRECTORIES[h])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},p.prototype._confirmDirExists=function(h,m){var g=this;i.lstat(h,function(v,y){v&&v.code==="ENOENT"?i.mkdir(h,function(C){C&&C.code!=="EEXIST"?m(C):g._applyACLRules(h,m)}):!v&&y.isDirectory()?g._applyACLRules(h,m):m(v||new Error("Path existed but was not a directory"))})},p.prototype._getShallowDirectorySize=function(h,m){i.readdir(h,function(g,v){if(g)return m(g,-1);var y=null,C=0,w=0;if(v.length===0){m(null,0);return}for(var b=0;b<v.length;b++)i.stat(s.join(h,v[b]),function(E,S){w++,E?y=E:S.isFile()&&(C+=S.size),w===v.length&&(y?m(y,-1):m(y,C))})})},p.prototype._getShallowDirectorySizeSync=function(h){for(var m=i.readdirSync(h),g=0,v=0;v<m.length;v++)g+=i.statSync(s.join(h,m[v])).size;return g},p.prototype._storeToDisk=function(h){var m=this;l.info(p.TAG,"Checking existence of data storage directory: "+this._tempDir),this._confirmDirExists(this._tempDir,function(g){if(g){l.warn(p.TAG,"Error while checking/creating directory: "+(g&&g.message)),m._onErrorHelper(g);return}m._getShallowDirectorySize(m._tempDir,function(v,y){if(v||y<0){l.warn(p.TAG,"Error while checking directory size: "+(v&&v.message)),m._onErrorHelper(v);return}else if(y>m._maxBytesOnDisk){l.warn(p.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+y);return}var C=new Date().getTime()+".ai.json",w=s.join(m._tempDir,C);l.info(p.TAG,"saving data to disk at: "+w),i.writeFile(w,m._stringify(h),{mode:384},function(b){return m._onErrorHelper(b)})})})},p.prototype._storeToDiskSync=function(h){try{l.info(p.TAG,"Checking existence of data storage directory: "+this._tempDir),i.existsSync(this._tempDir)||i.mkdirSync(this._tempDir),this._applyACLRulesSync(this._tempDir);var m=this._getShallowDirectorySizeSync(this._tempDir);if(m>this._maxBytesOnDisk){l.info(p.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+m);return}var g=new Date().getTime()+".ai.json",v=s.join(this._tempDir,g);l.info(p.TAG,"saving data before crash to disk at: "+v),i.writeFileSync(v,h,{mode:384})}catch(y){l.warn(p.TAG,"Error while saving data to disk: "+(y&&y.message)),this._onErrorHelper(y)}},p.prototype._sendFirstFileOnDisk=function(){var h=this;i.exists(this._tempDir,function(m){m&&i.readdir(h._tempDir,function(g,v){if(g)h._onErrorHelper(g);else if(v=v.filter(function(w){return s.basename(w).indexOf(".ai.json")>-1}),v.length>0){var y=v[0],C=s.join(h._tempDir,y);i.readFile(C,function(w,b){w?h._onErrorHelper(w):i.unlink(C,function(E){if(E)h._onErrorHelper(E);else try{var S=JSON.parse(b.toString());h.send(S)}catch(x){l.warn("Failed to read persisted file",x)}})})}})})},p.prototype._onErrorHelper=function(h){typeof this._onError=="function"&&this._onError(h)},p.prototype._stringify=function(h){try{return JSON.stringify(h)}catch(m){l.warn("Failed to serialize payload",m,h)}},p.prototype._fileCleanupTask=function(){var h=this;i.exists(this._tempDir,function(m){m&&i.readdir(h._tempDir,function(g,v){g?h._onErrorHelper(g):(v=v.filter(function(y){return s.basename(y).indexOf(".ai.json")>-1}),v.length>0&&v.forEach(function(y){var C=new Date(parseInt(y.split(".ai.json")[0])),w=new Date(+new Date-p.FILE_RETEMPTION_PERIOD)>C;if(w){var b=s.join(h._tempDir,y);i.unlink(b,function(E){E&&h._onErrorHelper(E)})}}))})})},p.TAG="Sender",p.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",p.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",p.ACLED_DIRECTORIES={},p.ACL_IDENTITY=null,p.WAIT_BETWEEN_RESEND=60*1e3,p.MAX_BYTES_ON_DISK=50*1024*1024,p.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,p.CLEANUP_TIMEOUT=60*60*1e3,p.FILE_RETEMPTION_PERIOD=7*24*60*60*1e3,p.TEMPDIR_PREFIX="appInsights-node",p.OS_PROVIDES_FILE_PROTECTION=!1,p.USE_ICACLS=o.type()==="Windows_NT",p}();e.exports=f}),sJ=I((t,e)=>{"use strict";var r=fr(),n=Yr(),i=Ga(),o=function(){function a(){}return a.createEnvelope=function(c,l,u,d,f){var p=null;switch(l){case r.TelemetryType.Trace:p=a.createTraceData(c);break;case r.TelemetryType.Dependency:p=a.createDependencyData(c);break;case r.TelemetryType.Event:p=a.createEventData(c);break;case r.TelemetryType.Exception:p=a.createExceptionData(c);break;case r.TelemetryType.Request:p=a.createRequestData(c);break;case r.TelemetryType.Metric:p=a.createMetricData(c);break;case r.TelemetryType.Availability:p=a.createAvailabilityData(c);break;case r.TelemetryType.PageView:p=a.createPageViewData(c);break}if(u&&r.domainSupportsProperties(p.baseData)){if(p&&p.baseData)if(!p.baseData.properties)p.baseData.properties=u;else for(var h in u)p.baseData.properties[h]||(p.baseData.properties[h]=u[h]);p.baseData.properties=n.validateStringMap(p.baseData.properties)}var m=f&&f.instrumentationKey||"",g=new r.Envelope;return g.data=p,g.iKey=m,g.name="Microsoft.ApplicationInsights."+m.replace(/-/g,"")+"."+p.baseType.substr(0,p.baseType.length-4),g.tags=this.getTags(d,c.tagOverrides),g.time=new Date().toISOString(),g.ver=1,g.sampleRate=f?f.samplingPercentage:100,l===r.TelemetryType.Metric&&(g.sampleRate=100),g},a.createTraceData=function(c){var l=new r.MessageData;l.message=c.message,l.properties=c.properties,isNaN(c.severity)?l.severityLevel=r.SeverityLevel.Information:l.severityLevel=c.severity;var u=new r.Data;return u.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Trace),u.baseData=l,u},a.createDependencyData=function(c){var l=new r.RemoteDependencyData;typeof c.name=="string"&&(l.name=c.name.length>1024?c.name.slice(0,1021)+"...":c.name),l.data=c.data,l.target=c.target,l.duration=n.msToTimeSpan(c.duration),l.success=c.success,l.type=c.dependencyTypeName,l.properties=c.properties,l.resultCode=c.resultCode?c.resultCode+"":"",c.id?l.id=c.id:l.id=n.w3cTraceId();var u=new r.Data;return u.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Dependency),u.baseData=l,u},a.createEventData=function(c){var l=new r.EventData;l.name=c.name,l.properties=c.properties,l.measurements=c.measurements;var u=new r.Data;return u.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Event),u.baseData=l,u},a.createExceptionData=function(c){var l=new r.ExceptionData;l.properties=c.properties,isNaN(c.severity)?l.severityLevel=r.SeverityLevel.Error:l.severityLevel=c.severity,l.measurements=c.measurements,l.exceptions=[];var u=c.exception.stack,d=new r.ExceptionDetails;d.message=c.exception.message,d.typeName=c.exception.name,d.parsedStack=this.parseStack(u),d.hasFullStack=n.isArray(d.parsedStack)&&d.parsedStack.length>0,l.exceptions.push(d);var f=new r.Data;return f.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Exception),f.baseData=l,f},a.createRequestData=function(c){var l=new r.RequestData;c.id?l.id=c.id:l.id=n.w3cTraceId(),l.name=c.name,l.url=c.url,l.source=c.source,l.duration=n.msToTimeSpan(c.duration),l.responseCode=c.resultCode?c.resultCode+"":"",l.success=c.success,l.properties=c.properties;var u=new r.Data;return u.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Request),u.baseData=l,u},a.createMetricData=function(c){var l=new r.MetricData;l.metrics=[];var u=new r.DataPoint;u.count=isNaN(c.count)?1:c.count,u.kind=r.DataPointType.Aggregation,u.max=isNaN(c.max)?c.value:c.max,u.min=isNaN(c.min)?c.value:c.min,u.name=c.name,u.stdDev=isNaN(c.stdDev)?0:c.stdDev,u.value=c.value,l.metrics.push(u),l.properties=c.properties;var d=new r.Data;return d.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Metric),d.baseData=l,d},a.createAvailabilityData=function(c){var l=new r.AvailabilityData;c.id?l.id=c.id:l.id=n.w3cTraceId(),l.name=c.name,l.duration=n.msToTimeSpan(c.duration),l.success=c.success,l.runLocation=c.runLocation,l.message=c.message,l.measurements=c.measurements,l.properties=c.properties;var u=new r.Data;return u.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Availability),u.baseData=l,u},a.createPageViewData=function(c){var l=new r.PageViewData;l.name=c.name,l.duration=n.msToTimeSpan(c.duration),l.url=c.url,l.measurements=c.measurements,l.properties=c.properties;var u=new r.Data;return u.baseType=r.telemetryTypeToBaseType(r.TelemetryType.PageView),u.baseData=l,u},a.getTags=function(c,l){var u=i.CorrelationContextManager.getCurrentContext(),d={};if(c&&c.tags)for(var f in c.tags)d[f]=c.tags[f];if(l)for(var f in l)d[f]=l[f];return u&&(d[c.keys.operationId]=d[c.keys.operationId]||u.operation.id,d[c.keys.operationName]=d[c.keys.operationName]||u.operation.name,d[c.keys.operationParentId]=d[c.keys.operationParentId]||u.operation.parentId),d},a.parseStack=function(c){var l=void 0;if(typeof c=="string"){var u=c.split(`
`);l=[];for(var d=0,f=0,p=0;p<=u.length;p++){var h=u[p];if(s.regex.test(h)){var m=new s(u[p],d++);f+=m.sizeInBytes,l.push(m)}}var g=32*1024;if(f>g)for(var v=0,y=l.length-1,C=0,w=v,b=y;v<y;){var E=l[v].sizeInBytes,S=l[y].sizeInBytes;if(C+=E+S,C>g){var x=b-w+1;l.splice(w,x);break}w=v,b=y,v++,y--}}return l},a}(),s=function(){function a(c,l){this.sizeInBytes=0,this.level=l,this.method="<no_method>",this.assembly=n.trim(c);var u=c.match(a.regex);u&&u.length>=5&&(this.method=n.trim(u[2])||this.method,this.fileName=n.trim(u[4])||"<no_filename>",this.line=parseInt(u[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=a.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return a.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,a.baseSize=58,a}();e.exports=o}),aJ=I((t,e)=>{"use strict";var r=require("url"),n=TL(),i=Zp(),o=fr(),s=ZX(),a=iJ(),c=Ga(),l=oJ(),u=Yr(),d=Dt(),f=sJ(),p=function(){function h(m){this._telemetryProcessors=[],this._enableAzureProperties=!1;var g=new n(m);this.config=g,this.context=new i,this.commonProperties={};var v=new l(this.config);this.channel=new s(function(){return g.disableAppInsights},function(){return g.maxBatchSize},function(){return g.maxBatchIntervalMs},v)}return h.prototype.trackAvailability=function(m){this.track(m,o.TelemetryType.Availability)},h.prototype.trackPageView=function(m){this.track(m,o.TelemetryType.PageView)},h.prototype.trackTrace=function(m){this.track(m,o.TelemetryType.Trace)},h.prototype.trackMetric=function(m){this.track(m,o.TelemetryType.Metric)},h.prototype.trackException=function(m){m&&m.exception&&!u.isError(m.exception)&&(m.exception=new Error(m.exception.toString())),this.track(m,o.TelemetryType.Exception)},h.prototype.trackEvent=function(m){this.track(m,o.TelemetryType.Event)},h.prototype.trackRequest=function(m){this.track(m,o.TelemetryType.Request)},h.prototype.trackDependency=function(m){m&&!m.target&&m.data&&(m.target=r.parse(m.data).host),this.track(m,o.TelemetryType.Dependency)},h.prototype.flush=function(m){this.channel.triggerSend(m?!!m.isAppCrashing:!1,m?m.callback:void 0)},h.prototype.track=function(m,g){if(m&&o.telemetryTypeToBaseType(g)){var v=f.createEnvelope(m,g,this.commonProperties,this.context,this.config);m.time&&(v.time=m.time.toISOString()),this._enableAzureProperties&&a.azureRoleEnvironmentTelemetryProcessor(v,this.context);var y=this.runTelemetryProcessors(v,m.contextObjects);y=y&&a.samplingTelemetryProcessor(v,{correlationContext:c.CorrelationContextManager.getCurrentContext()}),a.preAggregatedMetricsTelemetryProcessor(v,this.context),y&&(a.performanceMetricsTelemetryProcessor(v,this.quickPulseClient),this.channel.send(v))}else d.warn("track() requires telemetry object and telemetryType to be specified.")},h.prototype.setAutoPopulateAzureProperties=function(m){this._enableAzureProperties=m},h.prototype.addTelemetryProcessor=function(m){this._telemetryProcessors.push(m)},h.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},h.prototype.runTelemetryProcessors=function(m,g){var v=!0,y=this._telemetryProcessors.length;if(y===0)return v;g=g||{},g.correlationContext=c.CorrelationContextManager.getCurrentContext();for(var C=0;C<y;++C)try{var w=this._telemetryProcessors[C];if(w&&w.apply(null,[m,g])===!1){v=!1;break}}catch(b){v=!0,d.warn("One of telemetry processors failed, telemetry item will be sent.",b,m)}return v&&(m&&m.tags&&(m.tags=u.validateStringMap(m.tags)),m&&m.data&&m.data.baseData&&m.data.baseData.properties&&(m.data.baseData.properties=u.validateStringMap(m.data.baseData.properties))),v},h}();e.exports=p}),cJ=I((t,e)=>{"use strict";var r=t&&t.__extends||function(){var c=function(l,u){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,f){d.__proto__=f}||function(d,f){for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(d[p]=f[p])},c(l,u)};return function(l,u){c(l,u);function d(){this.constructor=l}l.prototype=u===null?Object.create(u):(d.prototype=u.prototype,new d)}}(),n=aJ(),i=AL(),o=Yl(),s=Dt(),a=function(c){r(l,c);function l(){return c!==null&&c.apply(this,arguments)||this}return l.prototype.trackNodeHttpRequestSync=function(u){u&&u.request&&u.response&&u.duration?i.trackRequestSync(this,u):s.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},l.prototype.trackNodeHttpRequest=function(u){(u.duration||u.error)&&s.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),u&&u.request&&u.response?i.trackRequest(this,u):s.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},l.prototype.trackNodeHttpDependency=function(u){u&&u.request?o.trackRequest(this,u):s.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},l}(n);e.exports=a}),lJ=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),uJ=I(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dispose=t.Configuration=t.wrapWithCorrelationContext=t.startOperation=t.getCorrelationContext=t.start=t.setup=t.liveMetricsClient=t.defaultClient=t.DistributedTracingModes=void 0;var e=Ga(),r=LX(),n=FX(),i=vC(),o=IL(),s=WX(),a=Yl(),c=AL(),l=Va(),u=Dt(),d=QX(),f=JX();t.TelemetryClient=cJ(),t.Contracts=fr(),t.azureFunctionsTypes=lJ();var p;(function(fe){fe[fe.AI=0]="AI",fe[fe.AI_AND_W3C=1]="AI_AND_W3C"})(p=t.DistributedTracingModes||(t.DistributedTracingModes={}));var h=!0,m=!1,g=!0,v=!0,y=!0,C=!1,w=!0,b=!0,E=!0,S=!0,x,T=!1,R=!0,q,B=void 0,te=void 0,ee,H,$,A,D,F,G,K,z=!1,J;function he(fe){return t.defaultClient?u.info("The default client is already setup"):(t.defaultClient=new t.TelemetryClient(fe),ee=new r(t.defaultClient),H=new n(t.defaultClient),$=new i(t.defaultClient),A=new o(t.defaultClient),D=new s(t.defaultClient),G=new c(t.defaultClient),K=new a(t.defaultClient),F||(F=new f.AutoCollectNativePerformance(t.defaultClient))),t.defaultClient&&t.defaultClient.channel&&t.defaultClient.channel.setUseDiskRetryCaching(E,B,te),Pt}t.setup=he;function me(){return t.defaultClient?(z=!0,ee.enable(h,m),H.enable(g),$.enable(v),A.enable(y),D.enable(C,t.defaultClient.config),F.enable(R,q),G.useAutoCorrelation(S,x),G.enable(w),K.enable(b),t.liveMetricsClient&&T&&t.liveMetricsClient.enable(T)):u.warn("Start cannot be called before setup"),Pt}t.start=me;function He(){return S?e.CorrelationContextManager.getCurrentContext():null}t.getCorrelationContext=He;function Ne(fe,ue){return e.CorrelationContextManager.startOperation(fe,ue)}t.startOperation=Ne;function Ve(fe,ue){return e.CorrelationContextManager.wrapCallback(fe,ue)}t.wrapWithCorrelationContext=Ve;var Pt=function(){function fe(){}return fe.setDistributedTracingMode=function(ue){return l.w3cEnabled=ue===p.AI_AND_W3C,fe},fe.setAutoCollectConsole=function(ue,Me){return Me===void 0&&(Me=!1),h=ue,m=Me,z&&ee.enable(ue,Me),fe},fe.setAutoCollectExceptions=function(ue){return g=ue,z&&H.enable(ue),fe},fe.setAutoCollectPerformance=function(ue,Me){Me===void 0&&(Me=!0),v=ue;var It=f.AutoCollectNativePerformance.parseEnabled(Me);return R=It.isEnabled,q=It.disabledMetrics,z&&($.enable(ue),F.enable(It.isEnabled,It.disabledMetrics)),fe},fe.setAutoCollectPreAggregatedMetrics=function(ue){return y=ue,z&&A.enable(ue),fe},fe.setAutoCollectHeartbeat=function(ue){return C=ue,z&&D.enable(ue,t.defaultClient.config),fe},fe.setAutoCollectRequests=function(ue){return w=ue,z&&G.enable(ue),fe},fe.setAutoCollectDependencies=function(ue){return b=ue,z&&K.enable(ue),fe},fe.setAutoDependencyCorrelation=function(ue,Me){return S=ue,x=Me,z&&G.useAutoCorrelation(ue,Me),fe},fe.setUseDiskRetryCaching=function(ue,Me,It){return E=ue,B=Me,te=It,t.defaultClient&&t.defaultClient.channel&&t.defaultClient.channel.setUseDiskRetryCaching(ue,Me,It),fe},fe.setInternalLogging=function(ue,Me){return ue===void 0&&(ue=!1),Me===void 0&&(Me=!0),u.enableDebug=ue,u.disableWarnings=!Me,fe},fe.setSendLiveMetrics=function(ue){return ue===void 0&&(ue=!1),t.defaultClient?(!t.liveMetricsClient&&ue?(t.liveMetricsClient=new d(t.defaultClient.config,null),J=new i(t.liveMetricsClient,1e3,!0),t.liveMetricsClient.addCollector(J),t.defaultClient.quickPulseClient=t.liveMetricsClient):t.liveMetricsClient&&t.liveMetricsClient.enable(ue),T=ue,fe):(u.warn("Live metrics client cannot be setup without the default client"),fe)},fe.start=me,fe}();t.Configuration=Pt;function vr(){l.w3cEnabled=!0,t.defaultClient=null,z=!1,ee&&ee.dispose(),H&&H.dispose(),$&&$.dispose(),A&&A.dispose(),D&&D.dispose(),F&&F.dispose(),G&&G.dispose(),K&&K.dispose(),t.liveMetricsClient&&(t.liveMetricsClient.enable(!1),T=!1,t.liveMetricsClient=void 0)}t.dispose=vr});VY(OL,{default:()=>pJ});var RL=Gl(require("os")),Wa=Gl(require("vscode")),nt=Gl(require("vscode")),yC=Gl(require("vscode")),Vn;(function(t){t.ON="on",t.ERROR="error",t.OFF="off"})(Vn||(Vn={}));function DL(){let t="telemetry",e="enableTelemetry";return yC.env.isTelemetryEnabled!==void 0?yC.env.isTelemetryEnabled?Vn.ON:Vn.OFF:yC.workspace.getConfiguration(t).get(e)?Vn.ON:Vn.OFF}var dJ=class{constructor(t,e,r,n,i){this.extensionId=t,this.extensionVersion=e,this.telemetryAppender=r,this.osShim=n,this.firstParty=!1,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this.firstParty=!!i,this.updateUserOptStatus(),nt.env.onDidChangeTelemetryEnabled!==void 0?(this.disposables.push(nt.env.onDidChangeTelemetryEnabled(()=>this.updateUserOptStatus())),this.disposables.push(nt.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))):this.disposables.push(nt.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))}updateUserOptStatus(){let t=DL();this.userOptIn=t===Vn.ON,this.errorOptIn=t===Vn.ERROR||t===Vn.ON,(this.userOptIn||this.errorOptIn)&&this.telemetryAppender.instantiateAppender()}cleanRemoteName(t){if(!t)return"none";let e="other";return["ssh-remote","dev-container","attached-container","wsl"].forEach(r=>{t.indexOf(`${r}+`)===0&&(e=r)}),e}get extension(){return this._extension===void 0&&(this._extension=nt.extensions.getExtension(this.extensionId)),this._extension}cloneAndChange(t,e){if(t===null||typeof t!="object"||typeof e!="function")return t;let r={};for(let n in t)r[n]=e(n,t[n]);return r}shouldSendErrorTelemetry(){return this.errorOptIn===!1?!1:this.firstParty?this.cleanRemoteName(nt.env.remoteName)!=="other"?!0:!(this.extension===void 0||this.extension.extensionKind===nt.ExtensionKind.Workspace||nt.env.uiKind===nt.UIKind.Web):!0}getCommonProperties(){let t=Object.create(null);if(t["common.os"]=this.osShim.platform,t["common.platformversion"]=(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),t["common.extname"]=this.extensionId,t["common.extversion"]=this.extensionVersion,nt&&nt.env){switch(t["common.vscodemachineid"]=nt.env.machineId,t["common.vscodesessionid"]=nt.env.sessionId,t["common.vscodeversion"]=nt.version,t["common.isnewappinstall"]=nt.env.isNewAppInstall?nt.env.isNewAppInstall.toString():"false",t["common.product"]=nt.env.appHost,nt.env.uiKind){case nt.UIKind.Web:t["common.uikind"]="web";break;case nt.UIKind.Desktop:t["common.uikind"]="desktop";break;default:t["common.uikind"]="unknown"}t["common.remotename"]=this.cleanRemoteName(nt.env.remoteName)}return t}anonymizeFilePaths(t,e){let r;if(t==null)return"";let n=[];nt.env.appRoot!==""&&n.push(new RegExp(nt.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),this.extension&&n.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));let i=t;if(e){let o=[];for(let l of n)for(;(r=l.exec(t))&&r;)o.push([r.index,l.lastIndex]);let s=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,a=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g,c=0;for(i="";(r=a.exec(t))&&r;)r[0]&&!s.test(r[0])&&o.every(([l,u])=>r.index<l||r.index>=u)&&(i+=t.substring(c,r.index)+"<REDACTED: user-file-path>",c=a.lastIndex);c<t.length&&(i+=t.substr(c))}for(let o of n)i=i.replace(o,"");return i}removePropertiesWithPossibleUserInfo(t){if(typeof t!="object")return;let e=Object.create(null);for(let r of Object.keys(t)){let n=t[r];if(!n)continue;let i=/@[a-zA-Z0-9-.]+/;/\S*(key|token|sig|password|passwd|pwd)[="':\s]+\S*/.test(n.toLowerCase())?e[r]="<REDACTED: secret>":i.test(n)?e[r]="<REDACTED: email>":e[r]=n}return e}sendTelemetryEvent(t,e,r){if(this.userOptIn&&t!==""){e=Ha(Ha({},e),this.getCommonProperties());let n=this.cloneAndChange(e,(i,o)=>this.anonymizeFilePaths(o,this.firstParty));this.telemetryAppender.logEvent(`${this.extensionId}/${t}`,{properties:this.removePropertiesWithPossibleUserInfo(n),measurements:r})}}sendTelemetryErrorEvent(t,e,r,n){if(this.errorOptIn&&t!==""){e=Ha(Ha({},e),this.getCommonProperties());let i=this.cloneAndChange(e,(o,s)=>this.shouldSendErrorTelemetry()?this.anonymizeFilePaths(s,this.firstParty):n===void 0||n.indexOf(o)!==-1?"REDACTED":this.anonymizeFilePaths(s,this.firstParty));this.telemetryAppender.logEvent(`${this.extensionId}/${t}`,{properties:this.removePropertiesWithPossibleUserInfo(i),measurements:r})}}sendTelemetryException(t,e,r){if(this.shouldSendErrorTelemetry()&&this.errorOptIn&&t){e=Ha(Ha({},e),this.getCommonProperties());let n=this.cloneAndChange(e,(i,o)=>this.anonymizeFilePaths(o,this.firstParty));t.stack&&(t.stack=this.anonymizeFilePaths(t.stack,this.firstParty)),this.telemetryAppender.logException(t,{properties:this.removePropertiesWithPossibleUserInfo(n),measurements:r})}}dispose(){return this.telemetryAppender.flush(),Promise.all(this.disposables.map(t=>t.dispose()))}},fJ=class{constructor(t){this._key=t,this._isInstantiated=!1,DL()!==Vn.OFF&&this.instantiateAppender()}logEvent(t,e){!this._appInsightsClient||this._appInsightsClient.trackEvent({name:t,properties:e==null?void 0:e.properties,measurements:e==null?void 0:e.measurements})}logException(t,e){!this._appInsightsClient||this._appInsightsClient.trackException({exception:t,properties:e==null?void 0:e.properties,measurements:e==null?void 0:e.measurements})}flush(){return this._appInsightsClient&&(this._appInsightsClient.flush(),this._appInsightsClient=void 0),Promise.resolve(void 0)}instantiateAppender(){this._isInstantiated||Promise.resolve().then(()=>Gl(uJ())).then(t=>{t.defaultClient?(this._appInsightsClient=new t.TelemetryClient(this._key),this._appInsightsClient.channel.setUseDiskRetryCaching(!0)):(t.setup(this._key).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setUseDiskRetryCaching(!0).start(),this._appInsightsClient=t.defaultClient),Wa&&Wa.env&&(this._appInsightsClient.context.tags[this._appInsightsClient.context.keys.userId]=Wa.env.machineId,this._appInsightsClient.context.tags[this._appInsightsClient.context.keys.sessionId]=Wa.env.sessionId,this._appInsightsClient.context.tags[this._appInsightsClient.context.keys.cloudRole]=Wa.env.appName,this._appInsightsClient.context.tags[this._appInsightsClient.context.keys.cloudRoleInstance]=Wa.env.appName),this._key&&this._key.indexOf("AIF-")===0&&(this._appInsightsClient.config.endpointUrl="https://vortex.data.microsoft.com/collect/v1"),this._isInstantiated=!0})}},pJ=class extends dJ{constructor(t,e,r,n){let i=new fJ(r);r&&r.indexOf("AIF-")===0&&(n=!0);super(t,e,i,{release:RL.release(),platform:RL.platform()},n)}}});var wC=_(hs=>{"use strict";Object.defineProperty(hs,"__esModule",{value:!0});var eh=require("vscode"),Ql=class{constructor(e,r,n){this.extensionName=e,this.extensionVersion=r,this.targetPopulation=n}static trimVersionSuffix(e){let r=/\-[a-zA-Z0-9]+$/;return e.split(r)[0]}getFilterValue(e){switch(e){case wi.ApplicationVersion:return Ql.trimVersionSuffix(eh.version);case wi.Build:return eh.env.appName;case wi.ClientId:return eh.env.machineId;case wi.ExtensionName:return this.extensionName;case wi.ExtensionVersion:return Ql.trimVersionSuffix(this.extensionVersion);case wi.Language:return eh.env.language;case wi.TargetPopulation:return this.targetPopulation;default:return""}}getFilters(){let e=new Map,r=Object.values(wi);for(let n of r)e.set(n,this.getFilterValue(n));return e}};hs.VSCodeFilterProvider=Ql;var wi;(function(t){t.Market="X-MSEdge-Market",t.CorpNet="X-FD-Corpnet",t.ApplicationVersion="X-VSCode-AppVersion",t.Build="X-VSCode-Build",t.ClientId="X-MSEdge-ClientId",t.ExtensionName="X-VSCode-ExtensionName",t.ExtensionVersion="X-VSCode-ExtensionVersion",t.Language="X-VSCode-Language",t.TargetPopulation="X-VSCode-TargetPopulation"})(wi=hs.Filters||(hs.Filters={}));var hJ;(function(t){t.Team="team",t.Internal="internal",t.Insiders="insider",t.Public="public"})(hJ=hs.TargetPopulation||(hs.TargetPopulation={}))});var FL=_(CC=>{"use strict";Object.defineProperty(CC,"__esModule",{value:!0});var LL=class{constructor(e){this.telemetry=e,this.isFetching=!1}async getFeatures(){if(this.isFetching&&this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetch();let e=await this.fetchPromise;return this.isFetching=!1,this.fetchPromise=void 0,e}};CC.BaseFeatureProvider=LL});var qL=_(bC=>{"use strict";Object.defineProperty(bC,"__esModule",{value:!0});var mJ=FL(),ML=class extends mJ.BaseFeatureProvider{constructor(e,r){super(e);this.telemetry=e,this.filterProviders=r,this.cachedTelemetryEvents=[]}getFilters(){let e=new Map;for(let r of this.filterProviders){let n=r.getFilters();for(let i of n.keys()){let o=n.get(i);e.set(i,o)}}return e}PostEventToTelemetry(e){if(this.cachedTelemetryEvents.includes(e))return;let r=JSON.stringify(e);this.telemetry.postEvent("report-headers",new Map([["ABExp.headers",r]])),this.cachedTelemetryEvents.push(e)}};bC.FilteredFeatureProvider=ML});var jL=_(EC=>{"use strict";Object.defineProperty(EC,"__esModule",{value:!0});var gJ=qL(),$L=class extends gJ.FilteredFeatureProvider{constructor(e,r,n){super(r,n);this.httpClient=e,this.telemetry=r,this.filterProviders=n}async fetch(){let e=this.getFilters(),r={};for(let a of e.keys()){let c=e.get(a);r[a]=c}let n=await this.httpClient.get({headers:r});e.keys.length>0&&this.PostEventToTelemetry(r);let i=n.data,o=i.Configs,s=[];for(let a of o)if(!!a.Parameters)for(let c of Object.keys(a.Parameters)){let l=c+(a.Parameters[c]?"":"cf");s.includes(l)||s.push(l)}return{features:s,assignmentContext:i.AssignmentContext,configs:o}}};EC.TasApiFeatureProvider=$L});var _C=_((jve,UL)=>{"use strict";UL.exports=function(e,r){return function(){for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];return e.apply(r,i)}}});var er=_((Uve,VL)=>{"use strict";var vJ=_C(),ms=Object.prototype.toString;function SC(t){return ms.call(t)==="[object Array]"}function xC(t){return typeof t=="undefined"}function yJ(t){return t!==null&&!xC(t)&&t.constructor!==null&&!xC(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function wJ(t){return ms.call(t)==="[object ArrayBuffer]"}function CJ(t){return typeof FormData!="undefined"&&t instanceof FormData}function bJ(t){var e;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&t.buffer instanceof ArrayBuffer,e}function EJ(t){return typeof t=="string"}function _J(t){return typeof t=="number"}function BL(t){return t!==null&&typeof t=="object"}function th(t){if(ms.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function SJ(t){return ms.call(t)==="[object Date]"}function xJ(t){return ms.call(t)==="[object File]"}function kJ(t){return ms.call(t)==="[object Blob]"}function HL(t){return ms.call(t)==="[object Function]"}function PJ(t){return BL(t)&&HL(t.pipe)}function IJ(t){return typeof URLSearchParams!="undefined"&&t instanceof URLSearchParams}function AJ(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function TJ(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function kC(t,e){if(!(t===null||typeof t=="undefined"))if(typeof t!="object"&&(t=[t]),SC(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function PC(){var t={};function e(i,o){th(t[o])&&th(i)?t[o]=PC(t[o],i):th(i)?t[o]=PC({},i):SC(i)?t[o]=i.slice():t[o]=i}for(var r=0,n=arguments.length;r<n;r++)kC(arguments[r],e);return t}function RJ(t,e,r){return kC(e,function(i,o){r&&typeof i=="function"?t[o]=vJ(i,r):t[o]=i}),t}function DJ(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}VL.exports={isArray:SC,isArrayBuffer:wJ,isBuffer:yJ,isFormData:CJ,isArrayBufferView:bJ,isString:EJ,isNumber:_J,isObject:BL,isPlainObject:th,isUndefined:xC,isDate:SJ,isFile:xJ,isBlob:kJ,isFunction:HL,isStream:PJ,isURLSearchParams:IJ,isStandardBrowserEnv:TJ,forEach:kC,merge:PC,extend:RJ,trim:AJ,stripBOM:DJ}});var rh=_((Bve,WL)=>{"use strict";var za=er();function GL(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}WL.exports=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(za.isURLSearchParams(r))i=r.toString();else{var o=[];za.forEach(r,function(c,l){c===null||typeof c=="undefined"||(za.isArray(c)?l=l+"[]":c=[c],za.forEach(c,function(d){za.isDate(d)?d=d.toISOString():za.isObject(d)&&(d=JSON.stringify(d)),o.push(GL(l)+"="+GL(d))}))}),i=o.join("&")}if(i){var s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}});var KL=_((Hve,zL)=>{"use strict";var OJ=er();function nh(){this.handlers=[]}nh.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};nh.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};nh.prototype.forEach=function(e){OJ.forEach(this.handlers,function(n){n!==null&&e(n)})};zL.exports=nh});var QL=_((Vve,YL)=>{"use strict";var NJ=er();YL.exports=function(e,r){NJ.forEach(e,function(i,o){o!==r&&o.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[o])})}});var ih=_((Gve,XL)=>{"use strict";XL.exports=function(e,r,n,i,o){return e.config=r,n&&(e.code=n),e.request=i,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}});var oh=_((Wve,JL)=>{"use strict";var LJ=ih();JL.exports=function(e,r,n,i,o){var s=new Error(e);return LJ(s,r,n,i,o)}});var IC=_((zve,ZL)=>{"use strict";var FJ=oh();ZL.exports=function(e,r,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):r(FJ("Request failed with status code "+n.status,n.config,null,n.request,n))}});var t1=_((Kve,e1)=>{"use strict";var sh=er();e1.exports=sh.isStandardBrowserEnv()?function(){return{write:function(r,n,i,o,s,a){var c=[];c.push(r+"="+encodeURIComponent(n)),sh.isNumber(i)&&c.push("expires="+new Date(i).toGMTString()),sh.isString(o)&&c.push("path="+o),sh.isString(s)&&c.push("domain="+s),a===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(r){var n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var n1=_((Yve,r1)=>{"use strict";r1.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}});var o1=_((Qve,i1)=>{"use strict";i1.exports=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}});var AC=_((Xve,s1)=>{"use strict";var MJ=n1(),qJ=o1();s1.exports=function(e,r){return e&&!MJ(r)?qJ(e,r):r}});var c1=_((Jve,a1)=>{"use strict";var TC=er(),$J=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];a1.exports=function(e){var r={},n,i,o;return e&&TC.forEach(e.split(`
`),function(a){if(o=a.indexOf(":"),n=TC.trim(a.substr(0,o)).toLowerCase(),i=TC.trim(a.substr(o+1)),n){if(r[n]&&$J.indexOf(n)>=0)return;n==="set-cookie"?r[n]=(r[n]?r[n]:[]).concat([i]):r[n]=r[n]?r[n]+", "+i:i}}),r}});var d1=_((Zve,u1)=>{"use strict";var l1=er();u1.exports=l1.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function i(o){var s=o;return e&&(r.setAttribute("href",s),s=r.href),r.setAttribute("href",s),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(s){var a=l1.isString(s)?i(s):s;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}()});var p1=_((eye,f1)=>{"use strict";var ah=er(),jJ=IC(),UJ=t1(),BJ=rh(),HJ=AC(),VJ=c1(),GJ=d1(),RC=oh();f1.exports=function(e){return new Promise(function(n,i){var o=e.data,s=e.headers,a=e.responseType;ah.isFormData(o)&&delete s["Content-Type"];var c=new XMLHttpRequest;if(e.auth){var l=e.auth.username||"",u=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";s.Authorization="Basic "+btoa(l+":"+u)}var d=HJ(e.baseURL,e.url);c.open(e.method.toUpperCase(),BJ(d,e.params,e.paramsSerializer),!0),c.timeout=e.timeout;function f(){if(!!c){var h="getAllResponseHeaders"in c?VJ(c.getAllResponseHeaders()):null,m=!a||a==="text"||a==="json"?c.responseText:c.response,g={data:m,status:c.status,statusText:c.statusText,headers:h,config:e,request:c};jJ(n,i,g),c=null}}if("onloadend"in c?c.onloadend=f:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(f)},c.onabort=function(){!c||(i(RC("Request aborted",e,"ECONNABORTED",c)),c=null)},c.onerror=function(){i(RC("Network Error",e,null,c)),c=null},c.ontimeout=function(){var m="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(m=e.timeoutErrorMessage),i(RC(m,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",c)),c=null},ah.isStandardBrowserEnv()){var p=(e.withCredentials||GJ(d))&&e.xsrfCookieName?UJ.read(e.xsrfCookieName):void 0;p&&(s[e.xsrfHeaderName]=p)}"setRequestHeader"in c&&ah.forEach(s,function(m,g){typeof o=="undefined"&&g.toLowerCase()==="content-type"?delete s[g]:c.setRequestHeader(g,m)}),ah.isUndefined(e.withCredentials)||(c.withCredentials=!!e.withCredentials),a&&a!=="json"&&(c.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&c.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(m){!c||(c.abort(),i(m),c=null)}),o||(o=null),c.send(o)})}});var m1=_((tye,h1)=>{var Xl;h1.exports=function(){if(!Xl){try{Xl=Ag()("follow-redirects")}catch(t){}typeof Xl!="function"&&(Xl=function(){})}Xl.apply(null,arguments)}});var FC=_((rye,LC)=>{var Ka=require("url"),DC=Ka.URL,WJ=require("http"),zJ=require("https"),g1=require("stream").Writable,KJ=require("assert"),v1=m1(),gs=["abort","aborted","connect","error","socket","timeout"],OC=Object.create(null);gs.forEach(function(t){OC[t]=function(e,r,n){this._redirectable.emit(t,e,r,n)}});var YJ=ch("ERR_FR_REDIRECTION_FAILURE",""),QJ=ch("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),XJ=ch("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),JJ=ch("ERR_STREAM_WRITE_AFTER_END","write after end");function kr(t,e){g1.call(this),this._sanitizeOptions(t),this._options=t,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],e&&this.on("response",e);var r=this;this._onNativeResponse=function(n){r._processResponse(n)},this._performRequest()}kr.prototype=Object.create(g1.prototype);kr.prototype.abort=function(){C1(this._currentRequest),this.emit("abort")};kr.prototype.write=function(t,e,r){if(this._ending)throw new JJ;if(!(typeof t=="string"||typeof t=="object"&&"length"in t))throw new TypeError("data should be a string, Buffer or Uint8Array");if(typeof e=="function"&&(r=e,e=null),t.length===0){r&&r();return}this._requestBodyLength+t.length<=this._options.maxBodyLength?(this._requestBodyLength+=t.length,this._requestBodyBuffers.push({data:t,encoding:e}),this._currentRequest.write(t,e,r)):(this.emit("error",new XJ),this.abort())};kr.prototype.end=function(t,e,r){if(typeof t=="function"?(r=t,t=e=null):typeof e=="function"&&(r=e,e=null),!t)this._ended=this._ending=!0,this._currentRequest.end(null,null,r);else{var n=this,i=this._currentRequest;this.write(t,e,function(){n._ended=!0,i.end(null,null,r)}),this._ending=!0}};kr.prototype.setHeader=function(t,e){this._options.headers[t]=e,this._currentRequest.setHeader(t,e)};kr.prototype.removeHeader=function(t){delete this._options.headers[t],this._currentRequest.removeHeader(t)};kr.prototype.setTimeout=function(t,e){var r=this;e&&this.on("timeout",e);function n(s){s.setTimeout(t),s.removeListener("timeout",s.destroy),s.addListener("timeout",s.destroy)}function i(s){r._timeout&&clearTimeout(r._timeout),r._timeout=setTimeout(function(){r.emit("timeout"),o()},t),n(s)}function o(){clearTimeout(r._timeout),e&&r.removeListener("timeout",e),this.socket||r._currentRequest.removeListener("socket",i)}return this.socket?i(this.socket):this._currentRequest.once("socket",i),this.on("socket",n),this.once("response",o),this.once("error",o),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(t){kr.prototype[t]=function(e,r){return this._currentRequest[t](e,r)}});["aborted","connection","socket"].forEach(function(t){Object.defineProperty(kr.prototype,t,{get:function(){return this._currentRequest[t]}})});kr.prototype._sanitizeOptions=function(t){if(t.headers||(t.headers={}),t.host&&(t.hostname||(t.hostname=t.host),delete t.host),!t.pathname&&t.path){var e=t.path.indexOf("?");e<0?t.pathname=t.path:(t.pathname=t.path.substring(0,e),t.search=t.path.substring(e))}};kr.prototype._performRequest=function(){var t=this._options.protocol,e=this._options.nativeProtocols[t];if(!e){this.emit("error",new TypeError("Unsupported protocol "+t));return}if(this._options.agents){var r=t.substr(0,t.length-1);this._options.agent=this._options.agents[r]}var n=this._currentRequest=e.request(this._options,this._onNativeResponse);this._currentUrl=Ka.format(this._options),n._redirectable=this;for(var i=0;i<gs.length;i++)n.on(gs[i],OC[gs[i]]);if(this._isRedirect){var o=0,s=this,a=this._requestBodyBuffers;(function c(l){if(n===s._currentRequest)if(l)s.emit("error",l);else if(o<a.length){var u=a[o++];n.finished||n.write(u.data,u.encoding,c)}else s._ended&&n.end()})()}};kr.prototype._processResponse=function(t){var e=t.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:t.headers,statusCode:e});var r=t.headers.location;if(r&&this._options.followRedirects!==!1&&e>=300&&e<400){if(C1(this._currentRequest),t.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new QJ);return}((e===301||e===302)&&this._options.method==="POST"||e===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],NC(/^content-/i,this._options.headers));var n=NC(/^host$/i,this._options.headers)||Ka.parse(this._currentUrl).hostname,i=Ka.resolve(this._currentUrl,r);v1("redirecting to",i),this._isRedirect=!0;var o=Ka.parse(i);if(Object.assign(this._options,o),o.hostname!==n&&NC(/^authorization$/i,this._options.headers),typeof this._options.beforeRedirect=="function"){var s={headers:t.headers};try{this._options.beforeRedirect.call(null,this._options,s)}catch(c){this.emit("error",c);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(c){var a=new YJ("Redirected request failed: "+c.message);a.cause=c,this.emit("error",a)}}else t.responseUrl=this._currentUrl,t.redirects=this._redirects,this.emit("response",t),this._requestBodyBuffers=[]};function y1(t){var e={maxRedirects:21,maxBodyLength:10*1024*1024},r={};return Object.keys(t).forEach(function(n){var i=n+":",o=r[i]=t[n],s=e[n]=Object.create(o);function a(l,u,d){if(typeof l=="string"){var f=l;try{l=w1(new DC(f))}catch(p){l=Ka.parse(f)}}else DC&&l instanceof DC?l=w1(l):(d=u,u=l,l={protocol:i});return typeof u=="function"&&(d=u,u=null),u=Object.assign({maxRedirects:e.maxRedirects,maxBodyLength:e.maxBodyLength},l,u),u.nativeProtocols=r,KJ.equal(u.protocol,i,"protocol mismatch"),v1("options",u),new kr(u,d)}function c(l,u,d){var f=s.request(l,u,d);return f.end(),f}Object.defineProperties(s,{request:{value:a,configurable:!0,enumerable:!0,writable:!0},get:{value:c,configurable:!0,enumerable:!0,writable:!0}})}),e}function ZJ(){}function w1(t){var e={protocol:t.protocol,hostname:t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,hash:t.hash,search:t.search,pathname:t.pathname,path:t.pathname+t.search,href:t.href};return t.port!==""&&(e.port=Number(t.port)),e}function NC(t,e){var r;for(var n in e)t.test(n)&&(r=e[n],delete e[n]);return r}function ch(t,e){function r(n){Error.captureStackTrace(this,this.constructor),this.message=n||e}return r.prototype=new Error,r.prototype.constructor=r,r.prototype.name="Error ["+t+"]",r.prototype.code=t,r}function C1(t){for(var e=0;e<gs.length;e++)t.removeListener(gs[e],OC[gs[e]]);t.on("error",ZJ),t.abort()}LC.exports=y1({http:WJ,https:zJ});LC.exports.wrap=y1});var MC=_((nye,eZ)=>{eZ.exports={name:"axios",version:"0.21.4",description:"Promise based HTTP client for the browser and node.js",main:"index.js",scripts:{test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},repository:{type:"git",url:"https://github.com/axios/axios.git"},keywords:["xhr","http","ajax","promise","node"],author:"Matt Zabriskie",license:"MIT",bugs:{url:"https://github.com/axios/axios/issues"},homepage:"https://axios-http.com",devDependencies:{coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},browser:{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},jsdelivr:"dist/axios.min.js",unpkg:"dist/axios.min.js",typings:"./index.d.ts",dependencies:{"follow-redirects":"^1.14.0"},bundlesize:[{path:"./dist/axios.min.js",threshold:"5kB"}]}});var k1=_((iye,x1)=>{"use strict";var Jl=er(),b1=IC(),tZ=AC(),rZ=rh(),nZ=require("http"),iZ=require("https"),oZ=FC().http,sZ=FC().https,E1=require("url"),aZ=require("zlib"),cZ=MC(),lh=oh(),qC=ih(),_1=/https:?/;function S1(t,e,r){if(t.hostname=e.host,t.host=e.host,t.port=e.port,t.path=r,e.auth){var n=Buffer.from(e.auth.username+":"+e.auth.password,"utf8").toString("base64");t.headers["Proxy-Authorization"]="Basic "+n}t.beforeRedirect=function(o){o.headers.host=o.host,S1(o,e,o.href)}}x1.exports=function(e){return new Promise(function(n,i){var o=function(D){n(D)},s=function(D){i(D)},a=e.data,c=e.headers;if("User-Agent"in c||"user-agent"in c?!c["User-Agent"]&&!c["user-agent"]&&(delete c["User-Agent"],delete c["user-agent"]):c["User-Agent"]="axios/"+cZ.version,a&&!Jl.isStream(a)){if(!Buffer.isBuffer(a))if(Jl.isArrayBuffer(a))a=Buffer.from(new Uint8Array(a));else if(Jl.isString(a))a=Buffer.from(a,"utf-8");else return s(lh("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",e));c["Content-Length"]=a.length}var l=void 0;if(e.auth){var u=e.auth.username||"",d=e.auth.password||"";l=u+":"+d}var f=tZ(e.baseURL,e.url),p=E1.parse(f),h=p.protocol||"http:";if(!l&&p.auth){var m=p.auth.split(":"),g=m[0]||"",v=m[1]||"";l=g+":"+v}l&&delete c.Authorization;var y=_1.test(h),C=y?e.httpsAgent:e.httpAgent,w={path:rZ(p.path,e.params,e.paramsSerializer).replace(/^\?/,""),method:e.method.toUpperCase(),headers:c,agent:C,agents:{http:e.httpAgent,https:e.httpsAgent},auth:l};e.socketPath?w.socketPath=e.socketPath:(w.hostname=p.hostname,w.port=p.port);var b=e.proxy;if(!b&&b!==!1){var E=h.slice(0,-1)+"_proxy",S=process.env[E]||process.env[E.toUpperCase()];if(S){var x=E1.parse(S),T=process.env.no_proxy||process.env.NO_PROXY,R=!0;if(T){var q=T.split(",").map(function(D){return D.trim()});R=!q.some(function(D){return D?D==="*"||D[0]==="."&&p.hostname.substr(p.hostname.length-D.length)===D?!0:p.hostname===D:!1})}if(R&&(b={host:x.hostname,port:x.port,protocol:x.protocol},x.auth)){var B=x.auth.split(":");b.auth={username:B[0],password:B[1]}}}}b&&(w.headers.host=p.hostname+(p.port?":"+p.port:""),S1(w,b,h+"//"+p.hostname+(p.port?":"+p.port:"")+w.path));var te,ee=y&&(b?_1.test(b.protocol):!0);e.transport?te=e.transport:e.maxRedirects===0?te=ee?iZ:nZ:(e.maxRedirects&&(w.maxRedirects=e.maxRedirects),te=ee?sZ:oZ),e.maxBodyLength>-1&&(w.maxBodyLength=e.maxBodyLength);var H=te.request(w,function(D){if(!H.aborted){var F=D,G=D.req||H;if(D.statusCode!==204&&G.method!=="HEAD"&&e.decompress!==!1)switch(D.headers["content-encoding"]){case"gzip":case"compress":case"deflate":F=F.pipe(aZ.createUnzip()),delete D.headers["content-encoding"];break}var K={status:D.statusCode,statusText:D.statusMessage,headers:D.headers,config:e,request:G};if(e.responseType==="stream")K.data=F,b1(o,s,K);else{var z=[],J=0;F.on("data",function(me){z.push(me),J+=me.length,e.maxContentLength>-1&&J>e.maxContentLength&&(F.destroy(),s(lh("maxContentLength size of "+e.maxContentLength+" exceeded",e,null,G)))}),F.on("error",function(me){H.aborted||s(qC(me,e,null,G))}),F.on("end",function(){var me=Buffer.concat(z);e.responseType!=="arraybuffer"&&(me=me.toString(e.responseEncoding),(!e.responseEncoding||e.responseEncoding==="utf8")&&(me=Jl.stripBOM(me))),K.data=me,b1(o,s,K)})}}});if(H.on("error",function(D){H.aborted&&D.code!=="ERR_FR_TOO_MANY_REDIRECTS"||s(qC(D,e,null,H))}),e.timeout){var $=parseInt(e.timeout,10);if(isNaN($)){s(lh("error trying to parse `config.timeout` to int",e,"ERR_PARSE_TIMEOUT",H));return}H.setTimeout($,function(){H.abort(),s(lh("timeout of "+$+"ms exceeded",e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",H))})}e.cancelToken&&e.cancelToken.promise.then(function(D){H.aborted||(H.abort(),s(D))}),Jl.isStream(a)?a.on("error",function(D){s(qC(D,e,null,H))}).pipe(H):H.end(a)})}});var dh=_((oye,A1)=>{"use strict";var Ot=er(),P1=QL(),lZ=ih(),uZ={"Content-Type":"application/x-www-form-urlencoded"};function I1(t,e){!Ot.isUndefined(t)&&Ot.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function dZ(){var t;return typeof XMLHttpRequest!="undefined"?t=p1():typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]"&&(t=k1()),t}function fZ(t,e,r){if(Ot.isString(t))try{return(e||JSON.parse)(t),Ot.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var uh={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:dZ(),transformRequest:[function(e,r){return P1(r,"Accept"),P1(r,"Content-Type"),Ot.isFormData(e)||Ot.isArrayBuffer(e)||Ot.isBuffer(e)||Ot.isStream(e)||Ot.isFile(e)||Ot.isBlob(e)?e:Ot.isArrayBufferView(e)?e.buffer:Ot.isURLSearchParams(e)?(I1(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Ot.isObject(e)||r&&r["Content-Type"]==="application/json"?(I1(r,"application/json"),fZ(e)):e}],transformResponse:[function(e){var r=this.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,o=!n&&this.responseType==="json";if(o||i&&Ot.isString(e)&&e.length)try{return JSON.parse(e)}catch(s){if(o)throw s.name==="SyntaxError"?lZ(s,this,"E_JSON_PARSE"):s}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};uh.headers={common:{Accept:"application/json, text/plain, */*"}};Ot.forEach(["delete","get","head"],function(e){uh.headers[e]={}});Ot.forEach(["post","put","patch"],function(e){uh.headers[e]=Ot.merge(uZ)});A1.exports=uh});var R1=_((sye,T1)=>{"use strict";var pZ=er(),hZ=dh();T1.exports=function(e,r,n){var i=this||hZ;return pZ.forEach(n,function(s){e=s.call(i,e,r)}),e}});var $C=_((aye,D1)=>{"use strict";D1.exports=function(e){return!!(e&&e.__CANCEL__)}});var L1=_((cye,N1)=>{"use strict";var O1=er(),jC=R1(),mZ=$C(),gZ=dh();function UC(t){t.cancelToken&&t.cancelToken.throwIfRequested()}N1.exports=function(e){UC(e),e.headers=e.headers||{},e.data=jC.call(e,e.data,e.headers,e.transformRequest),e.headers=O1.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),O1.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||gZ.adapter;return r(e).then(function(i){return UC(e),i.data=jC.call(e,i.data,i.headers,e.transformResponse),i},function(i){return mZ(i)||(UC(e),i&&i.response&&(i.response.data=jC.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})}});var BC=_((lye,F1)=>{"use strict";var zt=er();F1.exports=function(e,r){r=r||{};var n={},i=["url","method","data"],o=["headers","auth","proxy","params"],s=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function c(f,p){return zt.isPlainObject(f)&&zt.isPlainObject(p)?zt.merge(f,p):zt.isPlainObject(p)?zt.merge({},p):zt.isArray(p)?p.slice():p}function l(f){zt.isUndefined(r[f])?zt.isUndefined(e[f])||(n[f]=c(void 0,e[f])):n[f]=c(e[f],r[f])}zt.forEach(i,function(p){zt.isUndefined(r[p])||(n[p]=c(void 0,r[p]))}),zt.forEach(o,l),zt.forEach(s,function(p){zt.isUndefined(r[p])?zt.isUndefined(e[p])||(n[p]=c(void 0,e[p])):n[p]=c(void 0,r[p])}),zt.forEach(a,function(p){p in r?n[p]=c(e[p],r[p]):p in e&&(n[p]=c(void 0,e[p]))});var u=i.concat(o).concat(s).concat(a),d=Object.keys(e).concat(Object.keys(r)).filter(function(p){return u.indexOf(p)===-1});return zt.forEach(d,l),n}});var U1=_((uye,j1)=>{"use strict";var M1=MC(),HC={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){HC[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var q1={},vZ=M1.version.split(".");function $1(t,e){for(var r=e?e.split("."):vZ,n=t.split("."),i=0;i<3;i++){if(r[i]>n[i])return!0;if(r[i]<n[i])return!1}return!1}HC.transitional=function(e,r,n){var i=r&&$1(r);function o(s,a){return"[Axios v"+M1.version+"] Transitional option '"+s+"'"+a+(n?". "+n:"")}return function(s,a,c){if(e===!1)throw new Error(o(a," has been removed in "+r));return i&&!q1[a]&&(q1[a]=!0,console.warn(o(a," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,a,c):!0}};function yZ(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var o=n[i],s=e[o];if(s){var a=t[o],c=a===void 0||s(a,o,t);if(c!==!0)throw new TypeError("option "+o+" must be "+c);continue}if(r!==!0)throw Error("Unknown option "+o)}}j1.exports={isOlderVersion:$1,assertOptions:yZ,validators:HC}});var z1=_((dye,W1)=>{"use strict";var B1=er(),wZ=rh(),H1=KL(),V1=L1(),fh=BC(),G1=U1(),Ya=G1.validators;function Zl(t){this.defaults=t,this.interceptors={request:new H1,response:new H1}}Zl.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=fh(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var r=e.transitional;r!==void 0&&G1.assertOptions(r,{silentJSONParsing:Ya.transitional(Ya.boolean,"1.0.0"),forcedJSONParsing:Ya.transitional(Ya.boolean,"1.0.0"),clarifyTimeoutError:Ya.transitional(Ya.boolean,"1.0.0")},!1);var n=[],i=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(e)===!1||(i=i&&f.synchronous,n.unshift(f.fulfilled,f.rejected))});var o=[];this.interceptors.response.forEach(function(f){o.push(f.fulfilled,f.rejected)});var s;if(!i){var a=[V1,void 0];for(Array.prototype.unshift.apply(a,n),a=a.concat(o),s=Promise.resolve(e);a.length;)s=s.then(a.shift(),a.shift());return s}for(var c=e;n.length;){var l=n.shift(),u=n.shift();try{c=l(c)}catch(d){u(d);break}}try{s=V1(c)}catch(d){return Promise.reject(d)}for(;o.length;)s=s.then(o.shift(),o.shift());return s};Zl.prototype.getUri=function(e){return e=fh(this.defaults,e),wZ(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};B1.forEach(["delete","get","head","options"],function(e){Zl.prototype[e]=function(r,n){return this.request(fh(n||{},{method:e,url:r,data:(n||{}).data}))}});B1.forEach(["post","put","patch"],function(e){Zl.prototype[e]=function(r,n,i){return this.request(fh(i||{},{method:e,url:r,data:n}))}});W1.exports=Zl});var GC=_((fye,K1)=>{"use strict";function VC(t){this.message=t}VC.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};VC.prototype.__CANCEL__=!0;K1.exports=VC});var Q1=_((pye,Y1)=>{"use strict";var CZ=GC();function ph(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(i){e=i});var r=this;t(function(i){r.reason||(r.reason=new CZ(i),e(r.reason))})}ph.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};ph.source=function(){var e,r=new ph(function(i){e=i});return{token:r,cancel:e}};Y1.exports=ph});var J1=_((hye,X1)=>{"use strict";X1.exports=function(e){return function(n){return e.apply(null,n)}}});var eF=_((mye,Z1)=>{"use strict";Z1.exports=function(e){return typeof e=="object"&&e.isAxiosError===!0}});var nF=_((gye,WC)=>{"use strict";var tF=er(),bZ=_C(),hh=z1(),EZ=BC(),_Z=dh();function rF(t){var e=new hh(t),r=bZ(hh.prototype.request,e);return tF.extend(r,hh.prototype,e),tF.extend(r,e),r}var yn=rF(_Z);yn.Axios=hh;yn.create=function(e){return rF(EZ(yn.defaults,e))};yn.Cancel=GC();yn.CancelToken=Q1();yn.isCancel=$C();yn.all=function(e){return Promise.all(e)};yn.spread=J1();yn.isAxiosError=eF();WC.exports=yn;WC.exports.default=yn});var oF=_((vye,iF)=>{iF.exports=nF()});var aF=_(zC=>{"use strict";Object.defineProperty(zC,"__esModule",{value:!0});var SZ=oF(),sF=class{constructor(e){this.endpoint=e}get(e){return SZ.default.get(this.endpoint,Object.assign(Object.assign({},e),{proxy:!1}))}};zC.AxiosHttpClient=sF});var lF=_(KC=>{"use strict";Object.defineProperty(KC,"__esModule",{value:!0});var cF=class{constructor(){this.storage=new Map}async getValue(e,r){return this.storage.has(e)?await Promise.resolve(this.storage.get(e)):await Promise.resolve(r||void 0)}setValue(e,r){this.storage.set(e,r)}};KC.MemoryKeyValueStorage=cF});var dF=_(YC=>{"use strict";Object.defineProperty(YC,"__esModule",{value:!0});var xZ=lF(),uF=class{constructor(e,r,n,i,o,s){this.telemetry=e,this.featuresTelemetryPropertyName=r,this.assignmentContextTelemetryPropertyName=n,this.telemetryEventName=i,this.storageKey=o,this.storage=s,this.featuresConsumed=!1,this.cachedTelemetryEvents=[],this._features={features:[],assignmentContext:"",configs:[]},this.storageKey||(this.storageKey="ABExp.Features"),this.storage||(s=new xZ.MemoryKeyValueStorage),this.loadCachePromise=this.loadCachedFeatureData(),this.initializePromise=this.loadCachePromise,this.initialFetch=new Promise((a,c)=>{this.resolveInitialFetchPromise=a})}get features(){return this._features}set features(e){this._features=e,this.telemetry&&(this.telemetry.setSharedProperty(this.featuresTelemetryPropertyName,this.features.features.join(";")),this.telemetry.setSharedProperty(this.assignmentContextTelemetryPropertyName,this.features.assignmentContext))}async getFeaturesAsync(e=!1){if(this.fetchPromise!=null){try{await this.fetchPromise}catch(r){}return this.features}if(!this.featureProviders||this.featureProviders.length===0)return Promise.resolve({features:[],assignmentContext:"",configs:[]});this.fetchPromise=Promise.all(this.featureProviders.map(async r=>await r.getFeatures()));try{let r=await this.fetchPromise;this.updateFeatures(r,e)}catch(r){}return this.fetchPromise=void 0,this.resolveInitialFetchPromise&&(this.resolveInitialFetchPromise(),this.resolveInitialFetchPromise=void 0),this.features}updateFeatures(e,r=!1){let n={features:[],assignmentContext:"",configs:[]};for(let i of e){for(let o of i.features)n.features.includes(o)||n.features.push(o);for(let o of i.configs){let s=n.configs.find(a=>a.Id===o.Id);s?s.Parameters=Object.assign(Object.assign({},s.Parameters),o.Parameters):n.configs.push(o)}n.assignmentContext+=i.assignmentContext}(r||!this.featuresConsumed)&&(this.features=n),this.storage&&this.storage.setValue(this.storageKey,n)}async loadCachedFeatureData(){let e;this.storage&&(e=await this.storage.getValue(this.storageKey),e!==void 0&&e.configs===void 0&&(e.configs=[])),this.features.features.length===0&&(this.features=e||{features:[],assignmentContext:"",configs:[]})}isFlightEnabled(e){return this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isCachedFlightEnabled(e){return await this.loadCachePromise,this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isFlightEnabledAsync(e){let r=await this.getFeaturesAsync(!0);return this.featuresConsumed=!0,this.PostEventToTelemetry(e),r.features.includes(e)}getTreatmentVariable(e,r){var n;return this.featuresConsumed=!0,this.PostEventToTelemetry(`${e}.${r}`),(n=this.features.configs.find(o=>o.Id===e))===null||n===void 0?void 0:n.Parameters[r]}async getTreatmentVariableAsync(e,r,n){if(n){let i=this.featuresConsumed,o=this.getTreatmentVariable(e,r);if(o===void 0)this.featuresConsumed=i;else return o}return await this.getFeaturesAsync(!0),this.getTreatmentVariable(e,r)}PostEventToTelemetry(e){this.cachedTelemetryEvents.includes(e)||(this.telemetry.postEvent(this.telemetryEventName,new Map([["ABExp.queriedFeature",e]])),this.cachedTelemetryEvents.push(e))}invokeInit(){this.init()}addFeatureProvider(...e){if(!(e==null||this.featureProviders==null))for(let r of e)this.featureProviders.push(r)}};YC.ExperimentationServiceBase=uF});var pF=_(QC=>{"use strict";Object.defineProperty(QC,"__esModule",{value:!0});var fF=class{constructor(e){this.fetchInterval=e}StopPolling(){clearInterval(this.intervalHandle),this.intervalHandle=void 0}OnPollTick(e){this.onTick=e}StartPolling(e=!1){this.intervalHandle&&this.StopPolling(),this.onTick!=null&&(e&&this.onTick().then(()=>{}).catch(()=>{}),this.intervalHandle=setInterval(async()=>{await this.onTick()},this.fetchInterval),this.intervalHandle.unref&&this.intervalHandle.unref())}};QC.PollingService=fF});var mF=_(XC=>{"use strict";Object.defineProperty(XC,"__esModule",{value:!0});var kZ=dF(),PZ=pF(),hF=class extends kZ.ExperimentationServiceBase{constructor(e,r,n,i,o,s,a,c){super(e,i,o,s,a,c);if(this.telemetry=e,this.filterProviders=r,this.refreshRateMs=n,this.featuresTelemetryPropertyName=i,this.assignmentContextTelemetryPropertyName=o,this.telemetryEventName=s,this.storageKey=a,this.storage=c,n<1e3&&n!==0)throw new Error("The minimum refresh rate for polling is 1000 ms (1 second). If you wish to deactivate this auto-polling use value of 0.");n>0&&(this.pollingService=new PZ.PollingService(n),this.pollingService.OnPollTick(async()=>{await super.getFeaturesAsync()}))}init(){this.pollingService?this.pollingService.StartPolling(!0):super.getFeaturesAsync()}async getFeaturesAsync(e=!1){if(this.pollingService){this.pollingService.StopPolling();let r=await super.getFeaturesAsync(e);return this.pollingService.StartPolling(),r}else return await super.getFeaturesAsync(e)}};XC.ExperimentationServiceAutoPolling=hF});var gF=_(ZC=>{"use strict";Object.defineProperty(ZC,"__esModule",{value:!0});var IZ=jL(),AZ=aF(),TZ=mF(),JC=class extends TZ.ExperimentationServiceAutoPolling{constructor(e){super(e.telemetry,e.filterProviders||[],e.refetchInterval!=null?e.refetchInterval:0,e.featuresTelemetryPropertyName,e.assignmentContextTelemetryPropertyName,e.telemetryEventName,e.storageKey,e.keyValueStorage);this.options=e,this.invokeInit()}init(){this.featureProviders=[],this.addFeatureProvider(new IZ.TasApiFeatureProvider(new AZ.AxiosHttpClient(this.options.endpoint),this.telemetry,this.filterProviders)),super.init()}};ZC.ExperimentationService=JC;JC.REFRESH_RATE_IN_MINUTES=30});var vF=_(eb=>{"use strict";Object.defineProperty(eb,"__esModule",{value:!0});var RZ=gF();eb.ExperimentationService=RZ.ExperimentationService});var wF=_(tb=>{"use strict";Object.defineProperty(tb,"__esModule",{value:!0});var yF=class{constructor(e){this.mementoGlobalStorage=e}async getValue(e,r){return await this.mementoGlobalStorage.get(e)||r}setValue(e,r){this.mementoGlobalStorage.update(e,r)}};tb.MementoKeyValueStorage=yF});var bF=_(rb=>{"use strict";Object.defineProperty(rb,"__esModule",{value:!0});var CF=class{constructor(){this.initializePromise=Promise.resolve(),this.initialFetch=Promise.resolve()}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,r){}getTreatmentVariableAsync(e,r){return Promise.resolve(void 0)}};rb.default=CF});var _F=_(mh=>{"use strict";Object.defineProperty(mh,"__esModule",{value:!0});var DZ=wC(),OZ=vF(),nb=require("vscode"),NZ=wF(),LZ=bF(),FZ="https://default.exp-tas.com/vscode/ab",MZ="query-expfeature",qZ="VSCode.ABExp.Features",$Z="abexp.assignmentcontext",jZ="VSCode.ABExp.FeatureData",UZ=1e3*60*30;function EF(t,e,r,n,i,...o){if(!i)throw new Error("Memento storage was not provided.");let s=nb.workspace.getConfiguration("telemetry");if(!(nb.env.isTelemetryEnabled===void 0?s.get("enableTelemetry",!0):nb.env.isTelemetryEnabled))return new LZ.default;let l=[new DZ.VSCodeFilterProvider(t,e,r),...o],u=new NZ.MementoKeyValueStorage(i);return new OZ.ExperimentationService({filterProviders:l,telemetry:n,storageKey:jZ,keyValueStorage:u,featuresTelemetryPropertyName:qZ,assignmentContextTelemetryPropertyName:$Z,telemetryEventName:MZ,endpoint:FZ,refetchInterval:UZ})}mh.getExperimentationService=EF;async function BZ(t,e,r,n,i,...o){let s=EF(t,e,r,n,i,...o);return await s.initializePromise,s}mh.getExperimentationServiceAsync=BZ});var xF=_(eu=>{"use strict";Object.defineProperty(eu,"__esModule",{value:!0});var SF=_F();eu.getExperimentationService=SF.getExperimentationService;eu.getExperimentationServiceAsync=SF.getExperimentationServiceAsync;var HZ=wC();eu.TargetPopulation=HZ.TargetPopulation});var Le=_(xt=>{"use strict";var gb=Symbol.for("yaml.alias"),QF=Symbol.for("yaml.document"),Sh=Symbol.for("yaml.map"),XF=Symbol.for("yaml.pair"),vb=Symbol.for("yaml.scalar"),xh=Symbol.for("yaml.seq"),Wn=Symbol.for("yaml.node.type"),pee=t=>!!t&&typeof t=="object"&&t[Wn]===gb,hee=t=>!!t&&typeof t=="object"&&t[Wn]===QF,mee=t=>!!t&&typeof t=="object"&&t[Wn]===Sh,gee=t=>!!t&&typeof t=="object"&&t[Wn]===XF,JF=t=>!!t&&typeof t=="object"&&t[Wn]===vb,vee=t=>!!t&&typeof t=="object"&&t[Wn]===xh;function ZF(t){if(t&&typeof t=="object")switch(t[Wn]){case Sh:case xh:return!0}return!1}function yee(t){if(t&&typeof t=="object")switch(t[Wn]){case gb:case Sh:case vb:case xh:return!0}return!1}var wee=t=>(JF(t)||ZF(t))&&!!t.anchor,eM=class{constructor(e){Object.defineProperty(this,Wn,{value:e})}clone(){let e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}};xt.ALIAS=gb;xt.DOC=QF;xt.MAP=Sh;xt.NODE_TYPE=Wn;xt.NodeBase=eM;xt.PAIR=XF;xt.SCALAR=vb;xt.SEQ=xh;xt.hasAnchor=wee;xt.isAlias=pee;xt.isCollection=ZF;xt.isDocument=hee;xt.isMap=mee;xt.isNode=yee;xt.isPair=gee;xt.isScalar=JF;xt.isSeq=vee});var uu=_(tM=>{"use strict";var hr=Le(),ys=Symbol("break visit"),Cee=Symbol("skip children"),lu=Symbol("remove node");function kh(t,e){typeof e=="object"&&(e.Collection||e.Node||e.Value)&&(e=Object.assign({Alias:e.Node,Map:e.Node,Scalar:e.Node,Seq:e.Node},e.Value&&{Map:e.Value,Scalar:e.Value,Seq:e.Value},e.Collection&&{Map:e.Collection,Seq:e.Collection},e)),hr.isDocument(t)?Za(null,t.contents,e,Object.freeze([t]))===lu&&(t.contents=null):Za(null,t,e,Object.freeze([]))}kh.BREAK=ys;kh.SKIP=Cee;kh.REMOVE=lu;function Za(t,e,r,n){let i;if(typeof r=="function"?i=r(t,e,n):hr.isMap(e)?r.Map&&(i=r.Map(t,e,n)):hr.isSeq(e)?r.Seq&&(i=r.Seq(t,e,n)):hr.isPair(e)?r.Pair&&(i=r.Pair(t,e,n)):hr.isScalar(e)?r.Scalar&&(i=r.Scalar(t,e,n)):hr.isAlias(e)&&r.Alias&&(i=r.Alias(t,e,n)),hr.isNode(i)||hr.isPair(i)){let o=n[n.length-1];if(hr.isCollection(o))o.items[t]=i;else if(hr.isPair(o))t==="key"?o.key=i:o.value=i;else if(hr.isDocument(o))o.contents=i;else{let s=hr.isAlias(o)?"alias":"scalar";throw new Error(`Cannot replace node with ${s} parent`)}return Za(t,i,r,n)}if(typeof i!="symbol"){if(hr.isCollection(e)){n=Object.freeze(n.concat(e));for(let o=0;o<e.items.length;++o){let s=Za(o,e.items[o],r,n);if(typeof s=="number")o=s-1;else{if(s===ys)return ys;s===lu&&(e.items.splice(o,1),o-=1)}}}else if(hr.isPair(e)){n=Object.freeze(n.concat(e));let o=Za("key",e.key,r,n);if(o===ys)return ys;o===lu&&(e.key=null);let s=Za("value",e.value,r,n);if(s===ys)return ys;s===lu&&(e.value=null)}}return i}tM.visit=kh});var yb=_(nM=>{"use strict";var rM=Le(),bee=uu(),Eee={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},_ee=t=>t.replace(/[!,[\]{}]/g,e=>Eee[e]),Ir=class{constructor(e,r){this.marker=null,this.yaml=Object.assign({},Ir.defaultYaml,e),this.tags=Object.assign({},Ir.defaultTags,r)}clone(){let e=new Ir(this.yaml,this.tags);return e.marker=this.marker,e}atDocument(){let e=new Ir(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:Ir.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},Ir.defaultTags);break}return e}add(e,r){this.atNextDocument&&(this.yaml={explicit:Ir.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},Ir.defaultTags),this.atNextDocument=!1);let n=e.trim().split(/[ \t]+/),i=n.shift();switch(i){case"%TAG":{if(n.length!==2&&(r(0,"%TAG directive should contain exactly two parts"),n.length<2))return!1;let[o,s]=n;return this.tags[o]=s,!0}case"%YAML":{if(this.yaml.explicit=!0,n.length<1)return r(0,"%YAML directive should contain exactly one part"),!1;let[o]=n;return o==="1.1"||o==="1.2"?(this.yaml.version=o,!0):(r(6,`Unsupported YAML version ${o}`,!0),!1)}default:return r(0,`Unknown directive ${i}`,!0),!1}}tagName(e,r){if(e==="!")return"!";if(e[0]!=="!")return r(`Not a valid tag: ${e}`),null;if(e[1]==="<"){let s=e.slice(2,-1);return s==="!"||s==="!!"?(r(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(e[e.length-1]!==">"&&r("Verbatim tags must end with a >"),s)}let[,n,i]=e.match(/^(.*!)([^!]*)$/);i||r(`The ${e} tag has no suffix`);let o=this.tags[n];return o?o+decodeURIComponent(i):n==="!"?e:(r(`Could not resolve tag: ${e}`),null)}tagString(e){for(let[r,n]of Object.entries(this.tags))if(e.startsWith(n))return r+_ee(e.substring(n.length));return e[0]==="!"?e:`!<${e}>`}toString(e){let r=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],n=Object.entries(this.tags),i;if(e&&n.length>0&&rM.isNode(e.contents)){let o={};bee.visit(e.contents,(s,a)=>{rM.isNode(a)&&a.tag&&(o[a.tag]=!0)}),i=Object.keys(o)}else i=[];for(let[o,s]of n)o==="!!"&&s==="tag:yaml.org,2002:"||(!e||i.some(a=>a.startsWith(s)))&&r.push(`%TAG ${o} ${s}`);return r.join(`
`)}};Ir.defaultYaml={explicit:!1,version:"1.2"};Ir.defaultTags={"!!":"tag:yaml.org,2002:"};nM.Directives=Ir});var Ph=_(du=>{"use strict";var iM=Le(),See=uu();function xee(t){if(/[\x00-\x19\s,[\]{}]/.test(t)){let r=`Anchor must not contain whitespace or control characters: ${JSON.stringify(t)}`;throw new Error(r)}return!0}function oM(t){let e=new Set;return See.visit(t,{Value(r,n){n.anchor&&e.add(n.anchor)}}),e}function sM(t,e){for(let r=1;;++r){let n=`${t}${r}`;if(!e.has(n))return n}}function kee(t,e){let r=[],n=new Map,i=null;return{onAnchor(o){r.push(o),i||(i=oM(t));let s=sM(e,i);return i.add(s),s},setAnchors(){for(let o of r){let s=n.get(o);if(typeof s=="object"&&s.anchor&&(iM.isScalar(s.node)||iM.isCollection(s.node)))s.node.anchor=s.anchor;else{let a=new Error("Failed to resolve repeated object (this should not happen)");throw a.source=o,a}}},sourceObjects:n}}du.anchorIsValid=xee;du.anchorNames=oM;du.createNodeAnchors=kee;du.findNewAnchor=sM});var pu=_(lM=>{"use strict";var Pee=Ph(),aM=uu(),fu=Le(),cM=class extends fu.NodeBase{constructor(e){super(fu.ALIAS);this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e){let r;return aM.visit(e,{Node:(n,i)=>{if(i===this)return aM.visit.BREAK;i.anchor===this.source&&(r=i)}}),r}toJSON(e,r){if(!r)return{source:this.source};let{anchors:n,doc:i,maxAliasCount:o}=r,s=this.resolve(i);if(!s){let c=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(c)}let a=n.get(s);if(!a||a.res===void 0){let c="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(c)}if(o>=0&&(a.count+=1,a.aliasCount===0&&(a.aliasCount=Ih(i,s,n)),a.count*a.aliasCount>o)){let c="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(c)}return a.res}toString(e,r,n){let i=`*${this.source}`;if(e){if(Pee.anchorIsValid(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){let o=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(o)}if(e.implicitKey)return`${i} `}return i}};function Ih(t,e,r){if(fu.isAlias(e)){let n=e.resolve(t),i=r&&n&&r.get(n);return i?i.count*i.aliasCount:0}else if(fu.isCollection(e)){let n=0;for(let i of e.items){let o=Ih(t,i,r);o>n&&(n=o)}return n}else if(fu.isPair(e)){let n=Ih(t,e.key,r),i=Ih(t,e.value,r);return Math.max(n,i)}return 1}lM.Alias=cM});var ec=_(dM=>{"use strict";var Iee=Le();function uM(t,e,r){if(Array.isArray(t))return t.map((n,i)=>uM(n,String(i),r));if(t&&typeof t.toJSON=="function"){if(!r||!Iee.hasAnchor(t))return t.toJSON(e,r);let n={aliasCount:0,count:1,res:void 0};r.anchors.set(t,n),r.onCreate=o=>{n.res=o,delete r.onCreate};let i=t.toJSON(e,r);return r.onCreate&&r.onCreate(i),i}return typeof t=="bigint"&&!(r&&r.keep)?Number(t):t}dM.toJS=uM});var ht=_(wb=>{"use strict";var fM=Le(),Aee=ec(),Tee=t=>!t||typeof t!="function"&&typeof t!="object",ws=class extends fM.NodeBase{constructor(e){super(fM.SCALAR);this.value=e}toJSON(e,r){return r&&r.keep?this.value:Aee.toJS(this.value,e,r)}toString(){return String(this.value)}};ws.BLOCK_FOLDED="BLOCK_FOLDED";ws.BLOCK_LITERAL="BLOCK_LITERAL";ws.PLAIN="PLAIN";ws.QUOTE_DOUBLE="QUOTE_DOUBLE";ws.QUOTE_SINGLE="QUOTE_SINGLE";wb.Scalar=ws;wb.isScalarValue=Tee});var hu=_(hM=>{"use strict";var Ree=pu(),Cs=Le(),pM=ht(),Dee="tag:yaml.org,2002:";function Oee(t,e,r){if(e){let n=r.filter(o=>o.tag===e),i=n.find(o=>!o.format)||n[0];if(!i)throw new Error(`Tag ${e} not found`);return i}return r.find(n=>n.identify&&n.identify(t)&&!n.format)}function Nee(t,e,r){var n,i;if(Cs.isDocument(t)&&(t=t.contents),Cs.isNode(t))return t;if(Cs.isPair(t)){let p=(i=(n=r.schema[Cs.MAP]).createNode)===null||i===void 0?void 0:i.call(n,r.schema,null,r);return p.items.push(t),p}(t instanceof String||t instanceof Number||t instanceof Boolean||typeof BigInt=="function"&&t instanceof BigInt)&&(t=t.valueOf());let{aliasDuplicateObjects:o,onAnchor:s,onTagObj:a,schema:c,sourceObjects:l}=r,u;if(o&&t&&typeof t=="object"){if(u=l.get(t),u)return u.anchor||(u.anchor=s(t)),new Ree.Alias(u.anchor);u={anchor:null,node:null},l.set(t,u)}e&&e.startsWith("!!")&&(e=Dee+e.slice(2));let d=Oee(t,e,c.tags);if(!d){if(t&&typeof t.toJSON=="function"&&(t=t.toJSON()),!t||typeof t!="object"){let p=new pM.Scalar(t);return u&&(u.node=p),p}d=t instanceof Map?c[Cs.MAP]:Symbol.iterator in Object(t)?c[Cs.SEQ]:c[Cs.MAP]}a&&(a(d),delete r.onTagObj);let f=(d==null?void 0:d.createNode)?d.createNode(r.schema,t,r):new pM.Scalar(t);return e&&(f.tag=e),u&&(u.node=f),f}hM.createNode=Nee});var mu=_(Ah=>{"use strict";var Lee=hu(),Cn=Le();function Cb(t,e,r){let n=r;for(let i=e.length-1;i>=0;--i){let o=e[i];if(typeof o=="number"&&Number.isInteger(o)&&o>=0){let s=[];s[o]=n,n=s}else n=new Map([[o,n]])}return Lee.createNode(n,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:t,sourceObjects:new Map})}var mM=t=>t==null||typeof t=="object"&&!!t[Symbol.iterator]().next().done,bb=class extends Cn.NodeBase{constructor(e,r){super(e);Object.defineProperty(this,"schema",{value:r,configurable:!0,enumerable:!1,writable:!0})}clone(e){let r=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(r.schema=e),r.items=r.items.map(n=>Cn.isNode(n)||Cn.isPair(n)?n.clone(e):n),this.range&&(r.range=this.range.slice()),r}addIn(e,r){if(mM(e))this.add(r);else{let[n,...i]=e,o=this.get(n,!0);if(Cn.isCollection(o))o.addIn(i,r);else if(o===void 0&&this.schema)this.set(n,Cb(this.schema,i,r));else throw new Error(`Expected YAML collection at ${n}. Remaining path: ${i}`)}}deleteIn([e,...r]){if(r.length===0)return this.delete(e);let n=this.get(e,!0);if(Cn.isCollection(n))return n.deleteIn(r);throw new Error(`Expected YAML collection at ${e}. Remaining path: ${r}`)}getIn([e,...r],n){let i=this.get(e,!0);return r.length===0?!n&&Cn.isScalar(i)?i.value:i:Cn.isCollection(i)?i.getIn(r,n):void 0}hasAllNullValues(e){return this.items.every(r=>{if(!Cn.isPair(r))return!1;let n=r.value;return n==null||e&&Cn.isScalar(n)&&n.value==null&&!n.commentBefore&&!n.comment&&!n.tag})}hasIn([e,...r]){if(r.length===0)return this.has(e);let n=this.get(e,!0);return Cn.isCollection(n)?n.hasIn(r):!1}setIn([e,...r],n){if(r.length===0)this.set(e,n);else{let i=this.get(e,!0);if(Cn.isCollection(i))i.setIn(r,n);else if(i===void 0&&this.schema)this.set(e,Cb(this.schema,r,n));else throw new Error(`Expected YAML collection at ${e}. Remaining path: ${r}`)}}};bb.maxFlowStringSingleLineLength=60;Ah.Collection=bb;Ah.collectionFromPath=Cb;Ah.isEmptyPath=mM});var vM=_(gu=>{"use strict";var Fee="flow",Eb="block",Th="quoted";function Mee(t,e,r="flow",{indentAtStart:n,lineWidth:i=80,minContentWidth:o=20,onFold:s,onOverflow:a}={}){if(!i||i<0)return t;let c=Math.max(1+o,1+i-e.length);if(t.length<=c)return t;let l=[],u={},d=i-e.length;typeof n=="number"&&(n>i-Math.max(2,o)?l.push(0):d=i-n);let f,p,h=!1,m=-1,g=-1,v=-1;r===Eb&&(m=gM(t,m),m!==-1&&(d=m+c));for(let C;C=t[m+=1];){if(r===Th&&C==="\\"){switch(g=m,t[m+1]){case"x":m+=3;break;case"u":m+=5;break;case"U":m+=9;break;default:m+=1}v=m}if(C===`
`)r===Eb&&(m=gM(t,m)),d=m+c,f=void 0;else{if(C===" "&&p&&p!==" "&&p!==`
`&&p!=="	"){let w=t[m+1];w&&w!==" "&&w!==`
`&&w!=="	"&&(f=m)}if(m>=d)if(f)l.push(f),d=f+c,f=void 0;else if(r===Th){for(;p===" "||p==="	";)p=C,C=t[m+=1],h=!0;let w=m>v+1?m-2:g-1;if(u[w])return t;l.push(w),u[w]=!0,d=w+c,f=void 0}else h=!0}p=C}if(h&&a&&a(),l.length===0)return t;s&&s();let y=t.slice(0,l[0]);for(let C=0;C<l.length;++C){let w=l[C],b=l[C+1]||t.length;w===0?y=`
${e}${t.slice(0,b)}`:(r===Th&&u[w]&&(y+=`${t[w]}\\`),y+=`
${e}${t.slice(w+1,b)}`)}return y}function gM(t,e){let r=t[e+1];for(;r===" "||r==="	";){do r=t[e+=1];while(r&&r!==`
`);r=t[e+1]}return e}gu.FOLD_BLOCK=Eb;gu.FOLD_FLOW=Fee;gu.FOLD_QUOTED=Th;gu.foldFlowLines=Mee});var vu=_(yM=>{"use strict";var zn=ht(),go=vM(),Rh=t=>({indentAtStart:t.indentAtStart,lineWidth:t.options.lineWidth,minContentWidth:t.options.minContentWidth}),Dh=t=>/^(%|---|\.\.\.)/m.test(t);function qee(t,e,r){if(!e||e<0)return!1;let n=e-r,i=t.length;if(i<=n)return!1;for(let o=0,s=0;o<i;++o)if(t[o]===`
`){if(o-s>n)return!0;if(s=o+1,i-s<=n)return!1}return!0}function _i(t,e){let r=JSON.stringify(t);if(e.options.doubleQuotedAsJSON)return r;let{implicitKey:n}=e,i=e.options.doubleQuotedMinMultiLineLength,o=e.indent||(Dh(t)?"  ":""),s="",a=0;for(let c=0,l=r[c];l;l=r[++c])if(l===" "&&r[c+1]==="\\"&&r[c+2]==="n"&&(s+=r.slice(a,c)+"\\ ",c+=1,a=c,l="\\"),l==="\\")switch(r[c+1]){case"u":{s+=r.slice(a,c);let u=r.substr(c+2,4);switch(u){case"0000":s+="\\0";break;case"0007":s+="\\a";break;case"000b":s+="\\v";break;case"001b":s+="\\e";break;case"0085":s+="\\N";break;case"00a0":s+="\\_";break;case"2028":s+="\\L";break;case"2029":s+="\\P";break;default:u.substr(0,2)==="00"?s+="\\x"+u.substr(2):s+=r.substr(c,6)}c+=5,a=c+1}break;case"n":if(n||r[c+2]==='"'||r.length<i)c+=1;else{for(s+=r.slice(a,c)+`

`;r[c+2]==="\\"&&r[c+3]==="n"&&r[c+4]!=='"';)s+=`
`,c+=2;s+=o,r[c+2]===" "&&(s+="\\"),c+=1,a=c+1}break;default:c+=1}return s=a?s+r.slice(a):r,n?s:go.foldFlowLines(s,o,go.FOLD_QUOTED,Rh(e))}function _b(t,e){if(e.implicitKey){if(/\n/.test(t))return _i(t,e)}else if(/[ \t]\n|\n[ \t]/.test(t))return _i(t,e);let r=e.indent||(Dh(t)?"  ":""),n="'"+t.replace(/'/g,"''").replace(/\n+/g,`$&
${r}`)+"'";return e.implicitKey?n:go.foldFlowLines(n,r,go.FOLD_FLOW,Rh(e))}function Oh({comment:t,type:e,value:r},n,i,o){if(/\n[\t ]+$/.test(r)||/^\s*$/.test(r))return _i(r,n);let s=n.indent||(n.forceBlockIndent||Dh(r)?"  ":""),a=e===zn.Scalar.BLOCK_FOLDED?!1:e===zn.Scalar.BLOCK_LITERAL?!0:!qee(r,n.options.lineWidth,s.length);if(!r)return a?`|
`:`>
`;let c,l;for(l=r.length;l>0;--l){let C=r[l-1];if(C!==`
`&&C!=="	"&&C!==" ")break}let u=r.substring(l),d=u.indexOf(`
`);d===-1?c="-":r===u||d!==u.length-1?(c="+",o&&o()):c="",u&&(r=r.slice(0,-u.length),u[u.length-1]===`
`&&(u=u.slice(0,-1)),u=u.replace(/\n+(?!\n|$)/g,`$&${s}`));let f=!1,p,h=-1;for(p=0;p<r.length;++p){let C=r[p];if(C===" ")f=!0;else if(C===`
`)h=p;else break}let m=r.substring(0,h<p?h+1:p);m&&(r=r.substring(m.length),m=m.replace(/\n+/g,`$&${s}`));let v=(a?"|":">")+(f?s?"2":"1":"")+c;if(t&&(v+=" #"+t.replace(/ ?[\r\n]+/g," "),i&&i()),a)return r=r.replace(/\n+/g,`$&${s}`),`${v}
${s}${m}${r}${u}`;r=r.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${s}`);let y=go.foldFlowLines(`${m}${r}${u}`,s,go.FOLD_BLOCK,Rh(n));return`${v}
${s}${y}`}function $ee(t,e,r,n){var i;let{type:o,value:s}=t,{actualString:a,implicitKey:c,indent:l,inFlow:u}=e;if(c&&/[\n[\]{},]/.test(s)||u&&/[[\]{},]/.test(s))return _i(s,e);if(!s||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(s)){let f=s.indexOf('"')!==-1,p=s.indexOf("'")!==-1,h;return f&&!p?h=_b:p&&!f?h=_i:e.options.singleQuote?h=_b:h=_i,c||u||s.indexOf(`
`)===-1?h(s,e):Oh(t,e,r,n)}if(!c&&!u&&o!==zn.Scalar.PLAIN&&s.indexOf(`
`)!==-1)return Oh(t,e,r,n);if(l===""&&Dh(s))return e.forceBlockIndent=!0,Oh(t,e,r,n);let d=s.replace(/\n+/g,`$&
${l}`);if(a){for(let f of e.doc.schema.tags)if(f.default&&f.tag!=="tag:yaml.org,2002:str"&&((i=f.test)===null||i===void 0?void 0:i.test(d)))return _i(s,e)}return c?d:go.foldFlowLines(d,l,go.FOLD_FLOW,Rh(e))}function jee(t,e,r,n){let{implicitKey:i,inFlow:o}=e,s=typeof t.value=="string"?t:Object.assign({},t,{value:String(t.value)}),{type:a}=t;a!==zn.Scalar.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(s.value)&&(a=zn.Scalar.QUOTE_DOUBLE);let c=u=>{switch(u){case zn.Scalar.BLOCK_FOLDED:case zn.Scalar.BLOCK_LITERAL:return i||o?_i(s.value,e):Oh(s,e,r,n);case zn.Scalar.QUOTE_DOUBLE:return _i(s.value,e);case zn.Scalar.QUOTE_SINGLE:return _b(s.value,e);case zn.Scalar.PLAIN:return $ee(s,e,r,n);default:return null}},l=c(a);if(l===null){let{defaultKeyType:u,defaultStringType:d}=e.options,f=i&&u||d;if(l=c(f),l===null)throw new Error(`Unsupported default string type ${f}`)}return l}yM.stringifyString=jee});var tc=_(Sb=>{"use strict";var Uee=Ph(),vo=Le(),Bee=vu(),Hee=(t,e)=>({anchors:new Set,doc:t,indent:"",indentStep:typeof e.indent=="number"?" ".repeat(e.indent):"  ",options:Object.assign({defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:!1,trueStr:"true",verifyAliasOrder:!0},e)});function Vee(t,e){if(e.tag){let i=t.filter(o=>o.tag===e.tag);if(i.length>0)return i.find(o=>o.format===e.format)||i[0]}let r,n;if(vo.isScalar(e)){n=e.value;let i=t.filter(o=>o.identify&&o.identify(n));r=i.find(o=>o.format===e.format)||i.find(o=>!o.format)}else n=e,r=t.find(i=>i.nodeClass&&n instanceof i.nodeClass);if(!r){let i=n&&n.constructor?n.constructor.name:typeof n;throw new Error(`Tag not resolved for ${i} value`)}return r}function Gee(t,e,{anchors:r,doc:n}){let i=[],o=(vo.isScalar(t)||vo.isCollection(t))&&t.anchor;return o&&Uee.anchorIsValid(o)&&(r.add(o),i.push(`&${o}`)),t.tag?i.push(n.directives.tagString(t.tag)):e.default||i.push(n.directives.tagString(e.tag)),i.join(" ")}function Wee(t,e,r,n){if(vo.isPair(t))return t.toString(e,r,n);if(vo.isAlias(t))return t.toString(e);let i,o=vo.isNode(t)?t:e.doc.createNode(t,{onTagObj:c=>i=c});i||(i=Vee(e.doc.schema.tags,o));let s=Gee(o,i,e);s.length>0&&(e.indentAtStart=(e.indentAtStart||0)+s.length+1);let a=typeof i.stringify=="function"?i.stringify(o,e,r,n):vo.isScalar(o)?Bee.stringifyString(o,e,r,n):o.toString(e,r,n);return s?vo.isScalar(o)||a[0]==="{"||a[0]==="["?`${s} ${a}`:`${s}
${e.indent}${a}`:a}Sb.createStringifyContext=Hee;Sb.stringify=Wee});var Nh=_(xb=>{"use strict";var wM=(t,e)=>/^\n+$/.test(t)?t.substring(1):t.replace(/^(?!$)(?: $)?/gm,`${e}#`);function zee(t,e,r){return r?r.includes(`
`)?`${t}
`+wM(r,e):t.endsWith(" ")?`${t}#${r}`:`${t} #${r}`:t}xb.addComment=zee;xb.stringifyComment=wM});var _M=_(EM=>{"use strict";var yo=Le(),CM=ht(),bM=tc(),yu=Nh();function Kee({key:t,value:e},r,n,i){let{allNullValues:o,doc:s,indent:a,indentStep:c,options:{indentSeq:l,simpleKeys:u}}=r,d=yo.isNode(t)&&t.comment||null;if(u){if(d)throw new Error("With simple keys, key nodes cannot have comments");if(yo.isCollection(t)){let b="With simple keys, collection cannot be used as a key value";throw new Error(b)}}let f=!u&&(!t||d&&e==null&&!r.inFlow||yo.isCollection(t)||(yo.isScalar(t)?t.type===CM.Scalar.BLOCK_FOLDED||t.type===CM.Scalar.BLOCK_LITERAL:typeof t=="object"));r=Object.assign({},r,{allNullValues:!1,implicitKey:!f&&(u||!o),indent:a+c});let p=!1,h=!1,m=bM.stringify(t,r,()=>p=!0,()=>h=!0);if(!f&&!r.inFlow&&m.length>1024){if(u)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");f=!0}if(r.inFlow){if(o||e==null)return p&&n&&n(),f?`? ${m}`:m}else if(o&&!u||e==null&&f)return p&&(d=null),h&&!d&&i&&i(),yu.addComment(`? ${m}`,r.indent,d);p&&(d=null),m=f?`? ${yu.addComment(m,r.indent,d)}
${a}:`:yu.addComment(`${m}:`,r.indent,d);let g="",v=null;yo.isNode(e)?(e.spaceBefore&&(g=`
`),e.commentBefore&&(g+=`
${yu.stringifyComment(e.commentBefore,r.indent)}`),v=e.comment):e&&typeof e=="object"&&(e=s.createNode(e)),r.implicitKey=!1,!f&&!d&&yo.isScalar(e)&&(r.indentAtStart=m.length+1),h=!1,!l&&c.length>=2&&!r.inFlow&&!f&&yo.isSeq(e)&&!e.flow&&!e.tag&&!e.anchor&&(r.indent=r.indent.substr(2));let y=!1,C=bM.stringify(e,r,()=>y=!0,()=>h=!0),w=" ";return g||d?w=`${g}
${r.indent}`:!f&&yo.isCollection(e)?(!(C[0]==="["||C[0]==="{")||C.includes(`
`))&&(w=`
${r.indent}`):C[0]===`
`&&(w=""),r.inFlow?(y&&n&&n(),m+w+C):(y&&(v=null),h&&!v&&i&&i(),yu.addComment(m+w+C,r.indent,v))}EM.stringifyPair=Kee});var Pb=_(kb=>{"use strict";function Yee(t,...e){t==="debug"&&console.log(...e)}function Qee(t,e){(t==="debug"||t==="warn")&&(typeof process!="undefined"&&process.emitWarning?process.emitWarning(e):console.warn(e))}kb.debug=Yee;kb.warn=Qee});var Tb=_(xM=>{"use strict";var Xee=Pb(),Jee=tc(),wu=Le(),Zee=ht(),Ib=ec(),SM="<<";function ete(t,e,{key:r,value:n}){if(t&&t.doc.schema.merge&&tte(r))if(wu.isSeq(n))for(let i of n.items)Ab(t,e,i);else if(Array.isArray(n))for(let i of n)Ab(t,e,i);else Ab(t,e,n);else{let i=Ib.toJS(r,"",t);if(e instanceof Map)e.set(i,Ib.toJS(n,i,t));else if(e instanceof Set)e.add(i);else{let o=rte(r,i,t),s=Ib.toJS(n,o,t);o in e?Object.defineProperty(e,o,{value:s,writable:!0,enumerable:!0,configurable:!0}):e[o]=s}}return e}var tte=t=>t===SM||wu.isScalar(t)&&t.value===SM&&(!t.type||t.type===Zee.Scalar.PLAIN);function Ab(t,e,r){let n=t&&wu.isAlias(r)?r.resolve(t.doc):r;if(!wu.isMap(n))throw new Error("Merge sources must be maps or map aliases");let i=n.toJSON(null,t,Map);for(let[o,s]of i)e instanceof Map?e.has(o)||e.set(o,s):e instanceof Set?e.add(o):Object.prototype.hasOwnProperty.call(e,o)||Object.defineProperty(e,o,{value:s,writable:!0,enumerable:!0,configurable:!0});return e}function rte(t,e,r){if(e===null)return"";if(typeof e!="object")return String(e);if(wu.isNode(t)&&r&&r.doc){let n=Jee.createStringifyContext(r.doc,{});n.anchors=new Set;for(let o of r.anchors.keys())n.anchors.add(o.anchor);n.inFlow=!0,n.inStringifyKey=!0;let i=t.toString(n);if(!r.mapKeyWarned){let o=JSON.stringify(i);o.length>40&&(o=o.substring(0,36)+'..."'),Xee.warn(r.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${o}. Set mapAsMap: true to use object keys.`),r.mapKeyWarned=!0}return i}return JSON.stringify(e)}xM.addPairToJSMap=ete});var Si=_(Rb=>{"use strict";var kM=hu(),nte=_M(),ite=Tb(),Lh=Le();function ote(t,e,r){let n=kM.createNode(t,void 0,r),i=kM.createNode(e,void 0,r);return new Cu(n,i)}var Cu=class{constructor(e,r=null){Object.defineProperty(this,Lh.NODE_TYPE,{value:Lh.PAIR}),this.key=e,this.value=r}clone(e){let{key:r,value:n}=this;return Lh.isNode(r)&&(r=r.clone(e)),Lh.isNode(n)&&(n=n.clone(e)),new Cu(r,n)}toJSON(e,r){let n=r&&r.mapAsMap?new Map:{};return ite.addPairToJSMap(r,n,this)}toString(e,r,n){return e&&e.doc?nte.stringifyPair(this,e,r,n):JSON.stringify(this)}};Rb.Pair=Cu;Rb.createPair=ote});var Fh=_(PM=>{"use strict";var ste={intAsBigInt:!1,logLevel:"warn",prettyErrors:!0,strict:!0,uniqueKeys:!0,version:"1.2"};PM.defaultOptions=ste});var Db=_(AM=>{"use strict";var ate=mu(),Mh=Le(),cte=tc(),IM=Nh();function lte({comment:t,flow:e,items:r},n,{blockItem:i,flowChars:o,itemIndent:s,onChompKeep:a,onComment:c}){let{indent:l,indentStep:u}=n,d=e||n.inFlow;d&&(s+=u),n=Object.assign({},n,{indent:s,inFlow:d,type:null});let f=!0,p=!1,h=r.reduce((g,v,y)=>{let C=null;if(Mh.isNode(v)){!p&&v.spaceBefore&&g.push({comment:!0,str:""});let b=v.commentBefore;if(b&&p&&(b=b.replace(/^\n+/,"")),b){/^\n+$/.test(b)&&(b=b.substring(1));for(let E of b.match(/^.*$/gm)){let S=E===" "?"#":E?`#${E}`:"";g.push({comment:!0,str:S})}}v.comment&&(C=v.comment,f=!1)}else if(Mh.isPair(v)){let b=Mh.isNode(v.key)?v.key:null;if(b){!p&&b.spaceBefore&&g.push({comment:!0,str:""});let E=b.commentBefore;if(E&&p&&(E=E.replace(/^\n+/,"")),E){/^\n+$/.test(E)&&(E=E.substring(1));for(let S of E.match(/^.*$/gm)){let x=S===" "?"#":S?`#${S}`:"";g.push({comment:!0,str:x})}}b.comment&&(f=!1)}if(d){let E=Mh.isNode(v.value)?v.value:null;E?(E.comment&&(C=E.comment),(E.comment||E.commentBefore)&&(f=!1)):v.value==null&&b&&b.comment&&(C=b.comment)}}p=!1;let w=cte.stringify(v,n,()=>C=null,()=>p=!0);return d&&y<r.length-1&&(w+=","),w=IM.addComment(w,s,C),p&&(C||d)&&(p=!1),g.push({comment:!1,str:w}),g},[]),m;if(h.length===0)m=o.start+o.end;else if(d){let{start:g,end:v}=o,y=h.map(w=>w.str),C=2;for(let w of h){if(w.comment||w.str.includes(`
`)){f=!1;break}C+=w.str.length+2}if(!f||C>ate.Collection.maxFlowStringSingleLineLength){m=g;for(let w of y)m+=w?`
${u}${l}${w}`:`
`;m+=`
${l}${v}`}else m=`${g} ${y.join(" ")} ${v}`}else{let g=h.map(i);m=g.shift()||"";for(let v of g)m+=v?`
${l}${v}`:`
`}return t?(m+=`
`+IM.stringifyComment(t,l),c&&c()):p&&a&&a(),m}AM.stringifyCollection=lte});var bs=_(Nb=>{"use strict";var ute=Db(),dte=Tb(),fte=mu(),wo=Le(),Ob=Si(),pte=ht();function bu(t,e){let r=wo.isScalar(e)?e.value:e;for(let n of t)if(wo.isPair(n)&&(n.key===e||n.key===r||wo.isScalar(n.key)&&n.key.value===r))return n}var TM=class extends fte.Collection{constructor(e){super(wo.MAP,e);this.items=[]}static get tagName(){return"tag:yaml.org,2002:map"}add(e,r){let n;wo.isPair(e)?n=e:!e||typeof e!="object"||!("key"in e)?n=new Ob.Pair(e,e.value):n=new Ob.Pair(e.key,e.value);let i=bu(this.items,n.key),o=this.schema&&this.schema.sortMapEntries;if(i){if(!r)throw new Error(`Key ${n.key} already set`);wo.isScalar(i.value)&&pte.isScalarValue(n.value)?i.value.value=n.value:i.value=n.value}else if(o){let s=this.items.findIndex(a=>o(n,a)<0);s===-1?this.items.push(n):this.items.splice(s,0,n)}else this.items.push(n)}delete(e){let r=bu(this.items,e);return r?this.items.splice(this.items.indexOf(r),1).length>0:!1}get(e,r){let n=bu(this.items,e),i=n&&n.value;return!r&&wo.isScalar(i)?i.value:i}has(e){return!!bu(this.items,e)}set(e,r){this.add(new Ob.Pair(e,r),!0)}toJSON(e,r,n){let i=n?new n:r&&r.mapAsMap?new Map:{};r&&r.onCreate&&r.onCreate(i);for(let o of this.items)dte.addPairToJSMap(r,i,o);return i}toString(e,r,n){if(!e)return JSON.stringify(this);for(let i of this.items)if(!wo.isPair(i))throw new Error(`Map items must all be pairs; found ${JSON.stringify(i)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),ute.stringifyCollection(this,e,{blockItem:i=>i.str,flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:n,onComment:r})}};Nb.YAMLMap=TM;Nb.findPair=bu});var rc=_(DM=>{"use strict";var hte=Le(),mte=Si(),RM=bs();function gte(t,e,r){let{keepUndefined:n,replacer:i}=r,o=new RM.YAMLMap(t),s=(a,c)=>{if(typeof i=="function")c=i.call(e,a,c);else if(Array.isArray(i)&&!i.includes(a))return;(c!==void 0||n)&&o.items.push(mte.createPair(a,c,r))};if(e instanceof Map)for(let[a,c]of e)s(a,c);else if(e&&typeof e=="object")for(let a of Object.keys(e))s(a,e[a]);return typeof t.sortMapEntries=="function"&&o.items.sort(t.sortMapEntries),o}var vte={collection:"map",createNode:gte,default:!0,nodeClass:RM.YAMLMap,tag:"tag:yaml.org,2002:map",resolve(t,e){return hte.isMap(t)||e("Expected a mapping for this tag"),t}};DM.map=vte});var Es=_(NM=>{"use strict";var yte=Db(),wte=mu(),qh=Le(),Cte=ht(),bte=ec(),OM=class extends wte.Collection{constructor(e){super(qh.SEQ,e);this.items=[]}static get tagName(){return"tag:yaml.org,2002:seq"}add(e){this.items.push(e)}delete(e){let r=$h(e);return typeof r!="number"?!1:this.items.splice(r,1).length>0}get(e,r){let n=$h(e);if(typeof n!="number")return;let i=this.items[n];return!r&&qh.isScalar(i)?i.value:i}has(e){let r=$h(e);return typeof r=="number"&&r<this.items.length}set(e,r){let n=$h(e);if(typeof n!="number")throw new Error(`Expected a valid index, not ${e}.`);let i=this.items[n];qh.isScalar(i)&&Cte.isScalarValue(r)?i.value=r:this.items[n]=r}toJSON(e,r){let n=[];r&&r.onCreate&&r.onCreate(n);let i=0;for(let o of this.items)n.push(bte.toJS(o,String(i++),r));return n}toString(e,r,n){return e?yte.stringifyCollection(this,e,{blockItem:i=>i.comment?i.str:`- ${i.str}`,flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:n,onComment:r}):JSON.stringify(this)}};function $h(t){let e=qh.isScalar(t)?t.value:t;return e&&typeof e=="string"&&(e=Number(e)),typeof e=="number"&&Number.isInteger(e)&&e>=0?e:null}NM.YAMLSeq=OM});var nc=_(FM=>{"use strict";var Ete=hu(),_te=Le(),LM=Es();function Ste(t,e,r){let{replacer:n}=r,i=new LM.YAMLSeq(t);if(e&&Symbol.iterator in Object(e)){let o=0;for(let s of e){if(typeof n=="function"){let a=e instanceof Set?s:String(o++);s=n.call(e,a,s)}i.items.push(Ete.createNode(s,void 0,r))}}return i}var xte={collection:"seq",createNode:Ste,default:!0,nodeClass:LM.YAMLSeq,tag:"tag:yaml.org,2002:seq",resolve(t,e){return _te.isSeq(t)||e("Expected a sequence for this tag"),t}};FM.seq=xte});var Eu=_(MM=>{"use strict";var kte=vu(),Pte={identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify(t,e,r,n){return e=Object.assign({actualString:!0},e),kte.stringifyString(t,e,r,n)}};MM.string=Pte});var jh=_(jM=>{"use strict";var qM=ht(),$M={identify:t=>t==null,createNode:()=>new qM.Scalar(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new qM.Scalar(null),stringify:({source:t},e)=>t&&$M.test.test(t)?t:e.options.nullStr};jM.nullTag=$M});var Lb=_(BM=>{"use strict";var Ite=ht(),UM={identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:t=>new Ite.Scalar(t[0]==="t"||t[0]==="T"),stringify({source:t,value:e},r){if(t&&UM.test.test(t)){let n=t[0]==="t"||t[0]==="T";if(e===n)return t}return e?r.options.trueStr:r.options.falseStr}};BM.boolTag=UM});var ic=_(HM=>{"use strict";function Ate({format:t,minFractionDigits:e,tag:r,value:n}){if(typeof n=="bigint")return String(n);let i=typeof n=="number"?n:Number(n);if(!isFinite(i))return isNaN(i)?".nan":i<0?"-.inf":".inf";let o=JSON.stringify(n);if(!t&&e&&(!r||r==="tag:yaml.org,2002:float")&&/^\d/.test(o)){let s=o.indexOf(".");s<0&&(s=o.length,o+=".");let a=e-(o.length-s-1);for(;a-- >0;)o+="0"}return o}HM.stringifyNumber=Ate});var Fb=_(Uh=>{"use strict";var Tte=ht(),VM=ic(),Rte={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN))$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:VM.stringifyNumber},Dte={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t),stringify:({value:t})=>Number(t).toExponential()},Ote={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(t){let e=new Tte.Scalar(parseFloat(t)),r=t.indexOf(".");return r!==-1&&t[t.length-1]==="0"&&(e.minFractionDigits=t.length-r-1),e},stringify:VM.stringifyNumber};Uh.float=Ote;Uh.floatExp=Dte;Uh.floatNaN=Rte});var qb=_(Hh=>{"use strict";var GM=ic(),Bh=t=>typeof t=="bigint"||Number.isInteger(t),Mb=(t,e,r,{intAsBigInt:n})=>n?BigInt(t):parseInt(t.substring(e),r);function WM(t,e,r){let{value:n}=t;return Bh(n)&&n>=0?r+n.toString(e):GM.stringifyNumber(t)}var Nte={identify:t=>Bh(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(t,e,r)=>Mb(t,2,8,r),stringify:t=>WM(t,8,"0o")},Lte={identify:Bh,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(t,e,r)=>Mb(t,0,10,r),stringify:GM.stringifyNumber},Fte={identify:t=>Bh(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(t,e,r)=>Mb(t,2,16,r),stringify:t=>WM(t,16,"0x")};Hh.int=Lte;Hh.intHex=Fte;Hh.intOct=Nte});var KM=_(zM=>{"use strict";var Mte=rc(),qte=jh(),$te=nc(),jte=Eu(),Ute=Lb(),$b=Fb(),jb=qb(),Bte=[Mte.map,$te.seq,jte.string,qte.nullTag,Ute.boolTag,jb.intOct,jb.int,jb.intHex,$b.floatNaN,$b.floatExp,$b.float];zM.schema=Bte});var XM=_(QM=>{"use strict";var Hte=ht(),Vte=rc(),Gte=nc();function YM(t){return typeof t=="bigint"||Number.isInteger(t)}var Vh=({value:t})=>JSON.stringify(t),Wte=[{identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify:Vh},{identify:t=>t==null,createNode:()=>new Hte.Scalar(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:Vh},{identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:t=>t==="true",stringify:Vh},{identify:YM,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(t,e,{intAsBigInt:r})=>r?BigInt(t):parseInt(t,10),stringify:({value:t})=>YM(t)?t.toString():JSON.stringify(t)},{identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:t=>parseFloat(t),stringify:Vh}],zte={default:!0,tag:"",test:/^/,resolve(t,e){return e(`Unresolved plain scalar ${JSON.stringify(t)}`),t}},Kte=[Vte.map,Gte.seq].concat(Wte,zte);QM.schema=Kte});var Bb=_(JM=>{"use strict";var Ub=ht(),Yte=vu(),Qte={identify:t=>t instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(t,e){if(typeof Buffer=="function")return Buffer.from(t,"base64");if(typeof atob=="function"){let r=atob(t.replace(/[\n\r]/g,"")),n=new Uint8Array(r.length);for(let i=0;i<r.length;++i)n[i]=r.charCodeAt(i);return n}else return e("This environment does not support reading binary tags; either Buffer or atob is required"),t},stringify({comment:t,type:e,value:r},n,i,o){let s=r,a;if(typeof Buffer=="function")a=s instanceof Buffer?s.toString("base64"):Buffer.from(s.buffer).toString("base64");else if(typeof btoa=="function"){let c="";for(let l=0;l<s.length;++l)c+=String.fromCharCode(s[l]);a=btoa(c)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(e||(e=Ub.Scalar.BLOCK_LITERAL),e!==Ub.Scalar.QUOTE_DOUBLE){let c=Math.max(n.options.lineWidth-n.indent.length,n.options.minContentWidth),l=Math.ceil(a.length/c),u=new Array(l);for(let d=0,f=0;d<l;++d,f+=c)u[d]=a.substr(f,c);a=u.join(e===Ub.Scalar.BLOCK_LITERAL?`
`:" ")}return Yte.stringifyString({comment:t,type:e,value:a},n,i,o)}};JM.binary=Qte});var zh=_(Wh=>{"use strict";var Gh=Le(),Hb=Si(),Xte=ht(),Jte=Es();function ZM(t,e){if(Gh.isSeq(t))for(let r=0;r<t.items.length;++r){let n=t.items[r];if(!Gh.isPair(n)){if(Gh.isMap(n)){n.items.length>1&&e("Each pair must have its own sequence indicator");let i=n.items[0]||new Hb.Pair(new Xte.Scalar(null));if(n.commentBefore&&(i.key.commentBefore=i.key.commentBefore?`${n.commentBefore}
${i.key.commentBefore}`:n.commentBefore),n.comment){let o=i.value||i.key;o.comment=o.comment?`${n.comment}
${o.comment}`:n.comment}n=i}t.items[r]=Gh.isPair(n)?n:new Hb.Pair(n)}}else e("Expected a sequence for this tag");return t}function eq(t,e,r){let{replacer:n}=r,i=new Jte.YAMLSeq(t);i.tag="tag:yaml.org,2002:pairs";let o=0;if(e&&Symbol.iterator in Object(e))for(let s of e){typeof n=="function"&&(s=n.call(e,String(o++),s));let a,c;if(Array.isArray(s))if(s.length===2)a=s[0],c=s[1];else throw new TypeError(`Expected [key, value] tuple: ${s}`);else if(s&&s instanceof Object){let l=Object.keys(s);if(l.length===1)a=l[0],c=s[a];else throw new TypeError(`Expected { key: value } tuple: ${s}`)}else a=s;i.items.push(Hb.createPair(a,c,r))}return i}var Zte={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:ZM,createNode:eq};Wh.createPairs=eq;Wh.pairs=Zte;Wh.resolvePairs=ZM});var Wb=_(Gb=>{"use strict";var ere=Es(),Vb=ec(),tq=Le(),_u=bs(),rq=zh(),Co=class extends ere.YAMLSeq{constructor(){super();this.add=_u.YAMLMap.prototype.add.bind(this),this.delete=_u.YAMLMap.prototype.delete.bind(this),this.get=_u.YAMLMap.prototype.get.bind(this),this.has=_u.YAMLMap.prototype.has.bind(this),this.set=_u.YAMLMap.prototype.set.bind(this),this.tag=Co.tag}toJSON(e,r){if(!r)return super.toJSON(e);let n=new Map;r&&r.onCreate&&r.onCreate(n);for(let i of this.items){let o,s;if(tq.isPair(i)?(o=Vb.toJS(i.key,"",r),s=Vb.toJS(i.value,o,r)):o=Vb.toJS(i,"",r),n.has(o))throw new Error("Ordered maps must not include duplicate keys");n.set(o,s)}return n}};Co.tag="tag:yaml.org,2002:omap";var tre={collection:"seq",identify:t=>t instanceof Map,nodeClass:Co,default:!1,tag:"tag:yaml.org,2002:omap",resolve(t,e){let r=rq.resolvePairs(t,e),n=[];for(let{key:i}of r.items)tq.isScalar(i)&&(n.includes(i.value)?e(`Ordered maps must not include duplicate keys: ${i.value}`):n.push(i.value));return Object.assign(new Co,r)},createNode(t,e,r){let n=rq.createPairs(t,e,r),i=new Co;return i.items=n.items,i}};Gb.YAMLOMap=Co;Gb.omap=tre});var aq=_(zb=>{"use strict";var nq=ht();function iq({value:t,source:e},r){return e&&(t?oq:sq).test.test(e)?e:t?r.options.trueStr:r.options.falseStr}var oq={identify:t=>t===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new nq.Scalar(!0),stringify:iq},sq={identify:t=>t===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:()=>new nq.Scalar(!1),stringify:iq};zb.falseTag=sq;zb.trueTag=oq});var lq=_(Kh=>{"use strict";var rre=ht(),cq=ic(),nre={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:cq.stringifyNumber},ire={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t.replace(/_/g,"")),stringify:({value:t})=>Number(t).toExponential()},ore={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(t){let e=new rre.Scalar(parseFloat(t.replace(/_/g,""))),r=t.indexOf(".");if(r!==-1){let n=t.substring(r+1).replace(/_/g,"");n[n.length-1]==="0"&&(e.minFractionDigits=n.length)}return e},stringify:cq.stringifyNumber};Kh.float=ore;Kh.floatExp=ire;Kh.floatNaN=nre});var dq=_(xu=>{"use strict";var uq=ic(),Su=t=>typeof t=="bigint"||Number.isInteger(t);function Yh(t,e,r,{intAsBigInt:n}){let i=t[0];if((i==="-"||i==="+")&&(e+=1),t=t.substring(e).replace(/_/g,""),n){switch(r){case 2:t=`0b${t}`;break;case 8:t=`0o${t}`;break;case 16:t=`0x${t}`;break}let s=BigInt(t);return i==="-"?BigInt(-1)*s:s}let o=parseInt(t,r);return i==="-"?-1*o:o}function Kb(t,e,r){let{value:n}=t;if(Su(n)){let i=n.toString(e);return n<0?"-"+r+i.substr(1):r+i}return uq.stringifyNumber(t)}var sre={identify:Su,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(t,e,r)=>Yh(t,2,2,r),stringify:t=>Kb(t,2,"0b")},are={identify:Su,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(t,e,r)=>Yh(t,1,8,r),stringify:t=>Kb(t,8,"0")},cre={identify:Su,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(t,e,r)=>Yh(t,0,10,r),stringify:uq.stringifyNumber},lre={identify:Su,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(t,e,r)=>Yh(t,2,16,r),stringify:t=>Kb(t,16,"0x")};xu.int=cre;xu.intBin=sre;xu.intHex=lre;xu.intOct=are});var Qb=_(Yb=>{"use strict";var Qh=Le(),Xh=Si(),Jh=bs(),bo=class extends Jh.YAMLMap{constructor(e){super(e);this.tag=bo.tag}add(e){let r;Qh.isPair(e)?r=e:typeof e=="object"&&"key"in e&&"value"in e&&e.value===null?r=new Xh.Pair(e.key,null):r=new Xh.Pair(e,null),Jh.findPair(this.items,r.key)||this.items.push(r)}get(e,r){let n=Jh.findPair(this.items,e);return!r&&Qh.isPair(n)?Qh.isScalar(n.key)?n.key.value:n.key:n}set(e,r){if(typeof r!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof r}`);let n=Jh.findPair(this.items,e);n&&!r?this.items.splice(this.items.indexOf(n),1):!n&&r&&this.items.push(new Xh.Pair(e))}toJSON(e,r){return super.toJSON(e,r,Set)}toString(e,r,n){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),r,n);throw new Error("Set items must all have null values")}};bo.tag="tag:yaml.org,2002:set";var ure={collection:"map",identify:t=>t instanceof Set,nodeClass:bo,default:!1,tag:"tag:yaml.org,2002:set",resolve(t,e){if(Qh.isMap(t)){if(t.hasAllNullValues(!0))return Object.assign(new bo,t);e("Set items must all have null values")}else e("Expected a mapping for this tag");return t},createNode(t,e,r){let{replacer:n}=r,i=new bo(t);if(e&&Symbol.iterator in Object(e))for(let o of e)typeof n=="function"&&(o=n.call(e,o,o)),i.items.push(Xh.createPair(o,null,r));return i}};Yb.YAMLSet=bo;Yb.set=ure});var Jb=_(Zh=>{"use strict";var dre=ic();function Xb(t,e){let r=t[0],n=r==="-"||r==="+"?t.substring(1):t,i=s=>e?BigInt(s):Number(s),o=n.replace(/_/g,"").split(":").reduce((s,a)=>s*i(60)+i(a),i(0));return r==="-"?i(-1)*o:o}function fq(t){let{value:e}=t,r=s=>s;if(typeof e=="bigint")r=s=>BigInt(s);else if(isNaN(e)||!isFinite(e))return dre.stringifyNumber(t);let n="";e<0&&(n="-",e*=r(-1));let i=r(60),o=[e%i];return e<60?o.unshift(0):(e=(e-o[0])/i,o.unshift(e%i),e>=60&&(e=(e-o[0])/i,o.unshift(e))),n+o.map(s=>s<10?"0"+String(s):String(s)).join(":").replace(/000000\d*$/,"")}var fre={identify:t=>typeof t=="bigint"||Number.isInteger(t),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(t,e,{intAsBigInt:r})=>Xb(t,r),stringify:fq},pre={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:t=>Xb(t,!1),stringify:fq},pq={identify:t=>t instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(t){let e=t.match(pq.test);if(!e)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");let[,r,n,i,o,s,a]=e.map(Number),c=e[7]?Number((e[7]+"00").substr(1,3)):0,l=Date.UTC(r,n-1,i,o||0,s||0,a||0,c),u=e[8];if(u&&u!=="Z"){let d=Xb(u,!1);Math.abs(d)<30&&(d*=60),l-=6e4*d}return new Date(l)},stringify:({value:t})=>t.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")};Zh.floatTime=pre;Zh.intTime=fre;Zh.timestamp=pq});var gq=_(mq=>{"use strict";var hre=rc(),mre=jh(),gre=nc(),vre=Eu(),yre=Bb(),hq=aq(),Zb=lq(),em=dq(),wre=Wb(),Cre=zh(),bre=Qb(),eE=Jb(),Ere=[hre.map,gre.seq,vre.string,mre.nullTag,hq.trueTag,hq.falseTag,em.intBin,em.intOct,em.int,em.intHex,Zb.floatNaN,Zb.floatExp,Zb.float,yre.binary,wre.omap,Cre.pairs,bre.set,eE.intTime,eE.floatTime,eE.timestamp];mq.schema=Ere});var kq=_(nE=>{"use strict";var vq=rc(),_re=jh(),yq=nc(),Sre=Eu(),xre=Lb(),tE=Fb(),rE=qb(),kre=KM(),Pre=XM(),wq=Bb(),Cq=Wb(),bq=zh(),Eq=gq(),_q=Qb(),tm=Jb(),Sq={core:kre.schema,failsafe:[vq.map,yq.seq,Sre.string],json:Pre.schema,yaml11:Eq.schema,"yaml-1.1":Eq.schema},xq={binary:wq.binary,bool:xre.boolTag,float:tE.float,floatExp:tE.floatExp,floatNaN:tE.floatNaN,floatTime:tm.floatTime,int:rE.int,intHex:rE.intHex,intOct:rE.intOct,intTime:tm.intTime,map:vq.map,null:_re.nullTag,omap:Cq.omap,pairs:bq.pairs,seq:yq.seq,set:_q.set,timestamp:tm.timestamp},Ire={"tag:yaml.org,2002:binary":wq.binary,"tag:yaml.org,2002:omap":Cq.omap,"tag:yaml.org,2002:pairs":bq.pairs,"tag:yaml.org,2002:set":_q.set,"tag:yaml.org,2002:timestamp":tm.timestamp};function Are(t,e){let r=Sq[e];if(!r){let n=Object.keys(Sq).filter(i=>i!=="yaml11").map(i=>JSON.stringify(i)).join(", ");throw new Error(`Unknown schema "${e}"; use one of ${n}`)}if(Array.isArray(t))for(let n of t)r=r.concat(n);else typeof t=="function"&&(r=t(r.slice()));return r.map(n=>{if(typeof n!="string")return n;let i=xq[n];if(i)return i;let o=Object.keys(xq).map(s=>JSON.stringify(s)).join(", ");throw new Error(`Unknown custom tag "${n}"; use one of ${o}`)})}nE.coreKnownTags=Ire;nE.getTags=Are});var oE=_(Iq=>{"use strict";var iE=Le(),Tre=rc(),Rre=nc(),Dre=Eu(),Pq=kq(),Ore=(t,e)=>t.key<e.key?-1:t.key>e.key?1:0,rm=class{constructor({customTags:e,merge:r,resolveKnownTags:n,schema:i,sortMapEntries:o}){this.merge=!!r,this.name=i||"core",this.knownTags=n?Pq.coreKnownTags:{},this.tags=Pq.getTags(e,this.name),Object.defineProperty(this,iE.MAP,{value:Tre.map}),Object.defineProperty(this,iE.SCALAR,{value:Dre.string}),Object.defineProperty(this,iE.SEQ,{value:Rre.seq}),this.sortMapEntries=o===!0?Ore:o||null}clone(){let e=Object.create(rm.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}};Iq.Schema=rm});var Tq=_(Aq=>{"use strict";var Nre=Le(),sE=tc(),nm=Nh();function Lre(t,e){let r=[],n=e.directives===!0;if(e.directives!==!1){let c=t.directives.toString(t);c?(r.push(c),n=!0):t.directives.marker&&(n=!0)}n&&r.push("---"),t.commentBefore&&(r.length!==1&&r.unshift(""),r.unshift(nm.stringifyComment(t.commentBefore,"")));let i=sE.createStringifyContext(t,e),o=!1,s=null;if(t.contents){Nre.isNode(t.contents)&&(t.contents.spaceBefore&&n&&r.push(""),t.contents.commentBefore&&r.push(nm.stringifyComment(t.contents.commentBefore,"")),i.forceBlockIndent=!!t.comment,s=t.contents.comment);let c=s?void 0:()=>o=!0,l=sE.stringify(t.contents,i,()=>s=null,c);s&&(l=nm.addComment(l,"",s)),(l[0]==="|"||l[0]===">")&&r[r.length-1]==="---"?r[r.length-1]=`--- ${l}`:r.push(l)}else r.push(sE.stringify(t.contents,i));let a=t.comment;return a&&o&&(a=a.replace(/^\n+/,"")),a&&((!o||s)&&r[r.length-1]!==""&&r.push(""),r.push(nm.stringifyComment(a,""))),r.join(`
`)+`
`}Aq.stringifyDocument=Lre});var Dq=_(Rq=>{"use strict";function ku(t,e,r,n){if(n&&typeof n=="object")if(Array.isArray(n))for(let i=0,o=n.length;i<o;++i){let s=n[i],a=ku(t,n,String(i),s);a===void 0?delete n[i]:a!==s&&(n[i]=a)}else if(n instanceof Map)for(let i of Array.from(n.keys())){let o=n.get(i),s=ku(t,n,i,o);s===void 0?n.delete(i):s!==o&&n.set(i,s)}else if(n instanceof Set)for(let i of Array.from(n)){let o=ku(t,n,i,i);o===void 0?n.delete(i):o!==i&&(n.delete(i),n.add(o))}else for(let[i,o]of Object.entries(n)){let s=ku(t,n,i,o);s===void 0?delete n[i]:s!==o&&(n[i]=s)}return t.call(e,r,n)}Rq.applyReviver=ku});var Pu=_(Oq=>{"use strict";var Fre=pu(),oc=mu(),Xr=Le(),Mre=Si(),qre=ec(),$re=Fh(),jre=oE(),Ure=tc(),Bre=Tq(),aE=Ph(),Hre=Dq(),Vre=hu(),Gre=yb(),im=class{constructor(e,r,n){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,Xr.NODE_TYPE,{value:Xr.DOC});let i=null;typeof r=="function"||Array.isArray(r)?i=r:n===void 0&&r&&(n=r,r=void 0);let o=Object.assign({},$re.defaultOptions,n);this.options=o;let{version:s}=o;(n==null?void 0:n.directives)?(this.directives=n.directives.atDocument(),this.directives.yaml.explicit&&(s=this.directives.yaml.version)):this.directives=new Gre.Directives({version:s}),this.setSchema(s,n),e===void 0?this.contents=null:this.contents=this.createNode(e,i,n)}clone(){let e=Object.create(im.prototype,{[Xr.NODE_TYPE]:{value:Xr.DOC}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),e.directives=this.directives.clone(),e.schema=this.schema.clone(),e.contents=Xr.isNode(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){sc(this.contents)&&this.contents.add(e)}addIn(e,r){sc(this.contents)&&this.contents.addIn(e,r)}createAlias(e,r){if(!e.anchor){let n=aE.anchorNames(this);e.anchor=!r||n.has(r)?aE.findNewAnchor(r||"a",n):r}return new Fre.Alias(e.anchor)}createNode(e,r,n){let i;if(typeof r=="function")e=r.call({"":e},"",e),i=r;else if(Array.isArray(r)){let g=y=>typeof y=="number"||y instanceof String||y instanceof Number,v=r.filter(g).map(String);v.length>0&&(r=r.concat(v)),i=r}else n===void 0&&r&&(n=r,r=void 0);let{aliasDuplicateObjects:o,anchorPrefix:s,flow:a,keepUndefined:c,onTagObj:l,tag:u}=n||{},{onAnchor:d,setAnchors:f,sourceObjects:p}=aE.createNodeAnchors(this,s||"a"),h={aliasDuplicateObjects:o!=null?o:!0,keepUndefined:c!=null?c:!1,onAnchor:d,onTagObj:l,replacer:i,schema:this.schema,sourceObjects:p},m=Vre.createNode(e,u,h);return a&&Xr.isCollection(m)&&(m.flow=!0),f(),m}createPair(e,r,n={}){let i=this.createNode(e,null,n),o=this.createNode(r,null,n);return new Mre.Pair(i,o)}delete(e){return sc(this.contents)?this.contents.delete(e):!1}deleteIn(e){return oc.isEmptyPath(e)?this.contents==null?!1:(this.contents=null,!0):sc(this.contents)?this.contents.deleteIn(e):!1}get(e,r){return Xr.isCollection(this.contents)?this.contents.get(e,r):void 0}getIn(e,r){return oc.isEmptyPath(e)?!r&&Xr.isScalar(this.contents)?this.contents.value:this.contents:Xr.isCollection(this.contents)?this.contents.getIn(e,r):void 0}has(e){return Xr.isCollection(this.contents)?this.contents.has(e):!1}hasIn(e){return oc.isEmptyPath(e)?this.contents!==void 0:Xr.isCollection(this.contents)?this.contents.hasIn(e):!1}set(e,r){this.contents==null?this.contents=oc.collectionFromPath(this.schema,[e],r):sc(this.contents)&&this.contents.set(e,r)}setIn(e,r){oc.isEmptyPath(e)?this.contents=r:this.contents==null?this.contents=oc.collectionFromPath(this.schema,Array.from(e),r):sc(this.contents)&&this.contents.setIn(e,r)}setSchema(e,r){let n;switch(String(e)){case"1.1":this.directives.yaml.version="1.1",n=Object.assign({merge:!0,resolveKnownTags:!1,schema:"yaml-1.1"},r);break;case"1.2":this.directives.yaml.version="1.2",n=Object.assign({merge:!1,resolveKnownTags:!0,schema:"core"},r);break;default:{let i=JSON.stringify(e);throw new Error(`Expected '1.1' or '1.2' as version, but found: ${i}`)}}this.schema=new jre.Schema(n)}toJS({json:e,jsonArg:r,mapAsMap:n,maxAliasCount:i,onAnchor:o,reviver:s}={}){let a={anchors:new Map,doc:this,keep:!e,mapAsMap:n===!0,mapKeyWarned:!1,maxAliasCount:typeof i=="number"?i:100,stringify:Ure.stringify},c=qre.toJS(this.contents,r||"",a);if(typeof o=="function")for(let{count:l,res:u}of a.anchors.values())o(u,l);return typeof s=="function"?Hre.applyReviver(s,{"":c},"",c):c}toJSON(e,r){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:r})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){let r=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${r}`)}return Bre.stringifyDocument(this,e)}};function sc(t){if(Xr.isCollection(t))return!0;throw new Error("Expected a YAML collection as document contents")}Oq.Document=im});var Au=_(Iu=>{"use strict";var om=class extends Error{constructor(e,r,n,i){super();this.name=e,this.code=n,this.message=i,this.pos=r}},Nq=class extends om{constructor(e,r,n){super("YAMLParseError",e,r,n)}},Lq=class extends om{constructor(e,r,n){super("YAMLWarning",e,r,n)}},Wre=(t,e)=>r=>{if(r.pos[0]===-1)return;r.linePos=r.pos.map(a=>e.linePos(a));let{line:n,col:i}=r.linePos[0];r.message+=` at line ${n}, column ${i}`;let o=i-1,s=t.substring(e.lineStarts[n-1],e.lineStarts[n]).replace(/[\n\r]+$/,"");if(o>=60&&s.length>80){let a=Math.min(o-39,s.length-79);s="\u2026"+s.substring(a),o-=a-1}if(s.length>80&&(s=s.substring(0,79)+"\u2026"),n>1&&/^ *$/.test(s.substring(0,o))){let a=t.substring(e.lineStarts[n-2],e.lineStarts[n-1]);a.length>80&&(a=a.substring(0,79)+`\u2026
`),s=a+s}if(/[^ ]/.test(s)){let a=1,c=r.linePos[1];c&&c.line===n&&c.col>i&&(a=Math.min(c.col-i,80-o));let l=" ".repeat(o)+"^".repeat(a);r.message+=`:

${s}
${l}
`}};Iu.YAMLError=om;Iu.YAMLParseError=Nq;Iu.YAMLWarning=Lq;Iu.prettifyError=Wre});var Tu=_(Fq=>{"use strict";function zre(t,{flow:e,indicator:r,next:n,offset:i,onError:o,startOnNewline:s}){let a=!1,c=s,l=s,u="",d="",f=!1,p=!1,h=null,m=null,g=null,v=null,y=null;for(let b of t)switch(p&&(b.type!=="space"&&b.type!=="newline"&&b.type!=="comma"&&o(b.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),p=!1),b.type){case"space":!e&&c&&r!=="doc-start"&&b.source[0]==="	"&&o(b,"TAB_AS_INDENT","Tabs are not allowed as indentation"),l=!0;break;case"comment":{l||o(b,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");let E=b.source.substring(1)||" ";u?u+=d+E:u=E,d="",c=!1;break}case"newline":c?u?u+=b.source:a=!0:d+=b.source,c=!0,f=!0,l=!0;break;case"anchor":h&&o(b,"MULTIPLE_ANCHORS","A node can have at most one anchor"),h=b,y===null&&(y=b.offset),c=!1,l=!1,p=!0;break;case"tag":{m&&o(b,"MULTIPLE_TAGS","A node can have at most one tag"),m=b,y===null&&(y=b.offset),c=!1,l=!1,p=!0;break}case r:(h||m)&&o(b,"BAD_PROP_ORDER",`Anchors and tags must be after the ${b.source} indicator`),v=b,c=!1,l=!1;break;case"comma":if(e){g&&o(b,"UNEXPECTED_TOKEN",`Unexpected , in ${e}`),g=b,c=!1,l=!1;break}default:o(b,"UNEXPECTED_TOKEN",`Unexpected ${b.type} token`),c=!1,l=!1}let C=t[t.length-1],w=C?C.offset+C.source.length:i;return p&&n&&n.type!=="space"&&n.type!=="newline"&&n.type!=="comma"&&(n.type!=="scalar"||n.source!=="")&&o(n.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),{comma:g,found:v,spaceBefore:a,comment:u,hasNewline:f,anchor:h,tag:m,end:w,start:y!=null?y:w}}Fq.resolveProps=zre});var lE=_(Mq=>{"use strict";function cE(t){if(!t)return null;switch(t.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(t.source.includes(`
`))return!0;if(t.end){for(let e of t.end)if(e.type==="newline")return!0}return!1;case"flow-collection":for(let e of t.items){for(let r of e.start)if(r.type==="newline")return!0;if(e.sep){for(let r of e.sep)if(r.type==="newline")return!0}if(cE(e.key)||cE(e.value))return!0}return!1;default:return!0}}Mq.containsNewline=cE});var uE=_($q=>{"use strict";var qq=Le();function Kre(t,e,r){let{uniqueKeys:n}=t.options;if(n===!1)return!1;let i=typeof n=="function"?n:(o,s)=>o===s||qq.isScalar(o)&&qq.isScalar(s)&&o.value===s.value&&!(o.value==="<<"&&t.schema.merge);return e.some(o=>i(o.key,r))}$q.mapIncludes=Kre});var Vq=_(Hq=>{"use strict";var jq=Si(),Yre=bs(),Uq=Tu(),Qre=lE(),Xre=uE(),Bq="All mapping items must start at the same column";function Jre({composeNode:t,composeEmptyNode:e},r,n,i){var o;let s=new Yre.YAMLMap(r.schema),a=n.offset;for(let{start:c,key:l,sep:u,value:d}of n.items){let f=Uq.resolveProps(c,{indicator:"explicit-key-ind",next:l||(u==null?void 0:u[0]),offset:a,onError:i,startOnNewline:!0}),p=!f.found;if(p){if(l&&(l.type==="block-seq"?i(a,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in l&&l.indent!==n.indent&&i(a,"BAD_INDENT",Bq)),!f.anchor&&!f.tag&&!u){f.comment&&(s.comment?s.comment+=`
`+f.comment:s.comment=f.comment);continue}}else((o=f.found)===null||o===void 0?void 0:o.indent)!==n.indent&&i(a,"BAD_INDENT",Bq);p&&Qre.containsNewline(l)&&i(l,"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line");let h=f.end,m=l?t(r,l,f,i):e(r,h,c,null,f,i);Xre.mapIncludes(r,s.items,m)&&i(h,"DUPLICATE_KEY","Map keys must be unique");let g=Uq.resolveProps(u||[],{indicator:"map-value-ind",next:d,offset:m.range[2],onError:i,startOnNewline:!l||l.type==="block-scalar"});if(a=g.end,g.found){p&&((d==null?void 0:d.type)==="block-map"&&!g.hasNewline&&i(a,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),r.options.strict&&f.start<g.found.offset-1024&&i(m.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));let v=d?t(r,d,g,i):e(r,a,u,null,g,i);a=v.range[2],s.items.push(new jq.Pair(m,v))}else p&&i(m.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),g.comment&&(m.comment?m.comment+=`
`+g.comment:m.comment=g.comment),s.items.push(new jq.Pair(m))}return s.range=[n.offset,a,a],s}Hq.resolveBlockMap=Jre});var Wq=_(Gq=>{"use strict";var Zre=Es(),ene=Tu();function tne({composeNode:t,composeEmptyNode:e},r,n,i){let o=new Zre.YAMLSeq(r.schema),s=n.offset;for(let{start:a,value:c}of n.items){let l=ene.resolveProps(a,{indicator:"seq-item-ind",next:c,offset:s,onError:i,startOnNewline:!0});if(s=l.end,!l.found)if(l.anchor||l.tag||c)c&&c.type==="block-seq"?i(s,"BAD_INDENT","All sequence items must start at the same column"):i(s,"MISSING_CHAR","Sequence item without - indicator");else{l.comment&&(o.comment=l.comment);continue}let u=c?t(r,c,l,i):e(r,s,a,null,l,i);s=u.range[2],o.items.push(u)}return o.range=[n.offset,s,s],o}Gq.resolveBlockSeq=tne});var ac=_(zq=>{"use strict";function rne(t,e,r,n){let i="";if(t){let o=!1,s="";for(let a of t){let{source:c,type:l}=a;switch(l){case"space":o=!0;break;case"comment":{r&&!o&&n(a,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");let u=c.substring(1)||" ";i?i+=s+u:i=u,s="";break}case"newline":i&&(s+=c),o=!0;break;default:n(a,"UNEXPECTED_TOKEN",`Unexpected ${l} at node end`)}e+=c.length}}return{comment:i,offset:e}}zq.resolveEnd=rne});var Xq=_(Qq=>{"use strict";var nne=Le(),ine=Si(),Kq=bs(),one=Es(),sne=ac(),Yq=Tu(),ane=lE(),cne=uE(),dE="Block collections are not allowed within flow collections",fE=t=>t&&(t.type==="block-map"||t.type==="block-seq");function lne({composeNode:t,composeEmptyNode:e},r,n,i){let o=n.start.source==="{",s=o?"flow map":"flow sequence",a=o?new Kq.YAMLMap(r.schema):new one.YAMLSeq(r.schema);a.flow=!0;let c=n.offset;for(let p=0;p<n.items.length;++p){let{start:h,key:m,sep:g,value:v}=n.items[p],y=Yq.resolveProps(h,{flow:s,indicator:"explicit-key-ind",next:m||(g==null?void 0:g[0]),offset:c,onError:i,startOnNewline:!1});if(!y.found){if(!y.anchor&&!y.tag&&!g&&!v){p===0&&y.comma?i(y.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${s}`):p<n.items.length-1&&i(y.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${s}`),y.comment&&(a.comment?a.comment+=`
`+y.comment:a.comment=y.comment);continue}!o&&r.options.strict&&ane.containsNewline(m)&&i(m,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(p===0)y.comma&&i(y.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${s}`);else if(y.comma||i(y.start,"MISSING_CHAR",`Missing , between ${s} items`),y.comment){let C="";e:for(let w of h)switch(w.type){case"comma":case"space":break;case"comment":C=w.source.substring(1);break e;default:break e}if(C){let w=a.items[a.items.length-1];nne.isPair(w)&&(w=w.value||w.key),w.comment?w.comment+=`
`+C:w.comment=C,y.comment=y.comment.substring(C.length+1)}}if(!o&&!g&&!y.found){let C=v?t(r,v,y,i):e(r,y.end,g,null,y,i);a.items.push(C),c=C.range[2],fE(v)&&i(C.range,"BLOCK_IN_FLOW",dE)}else{let C=y.end,w=m?t(r,m,y,i):e(r,C,h,null,y,i);fE(m)&&i(w.range,"BLOCK_IN_FLOW",dE);let b=Yq.resolveProps(g||[],{flow:s,indicator:"map-value-ind",next:v,offset:w.range[2],onError:i,startOnNewline:!1});if(b.found){if(!o&&!y.found&&r.options.strict){if(g)for(let x of g){if(x===b.found)break;if(x.type==="newline"){i(x,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}y.start<b.found.offset-1024&&i(b.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else v&&("source"in v&&v.source&&v.source[0]===":"?i(v,"MISSING_CHAR",`Missing space after : in ${s}`):i(b.start,"MISSING_CHAR",`Missing , or : between ${s} items`));let E=v?t(r,v,b,i):b.found?e(r,b.end,g,null,b,i):null;E?fE(v)&&i(E.range,"BLOCK_IN_FLOW",dE):b.comment&&(w.comment?w.comment+=`
`+b.comment:w.comment=b.comment);let S=new ine.Pair(w,E);if(o){let x=a;cne.mapIncludes(r,x.items,w)&&i(C,"DUPLICATE_KEY","Map keys must be unique"),x.items.push(S)}else{let x=new Kq.YAMLMap(r.schema);x.flow=!0,x.items.push(S),a.items.push(x)}c=E?E.range[2]:b.end}}let l=o?"}":"]",[u,...d]=n.end,f=c;if(u&&u.source===l?f=u.offset+u.source.length:(i(c+1,"MISSING_CHAR",`Expected ${s} to end with ${l}`),u&&u.source.length!==1&&d.unshift(u)),d.length>0){let p=sne.resolveEnd(d,f,r.options.strict,i);p.comment&&(a.comment?a.comment+=`
`+p.comment:a.comment=p.comment),a.range=[n.offset,f,p.offset]}else a.range=[n.offset,f,f];return a}Qq.resolveFlowCollection=lne});var e$=_(Zq=>{"use strict";var Jq=Le(),une=ht(),dne=Vq(),fne=Wq(),pne=Xq();function hne(t,e,r,n,i){let o;switch(r.type){case"block-map":{o=dne.resolveBlockMap(t,e,r,i);break}case"block-seq":{o=fne.resolveBlockSeq(t,e,r,i);break}case"flow-collection":{o=pne.resolveFlowCollection(t,e,r,i);break}}if(!n)return o;let s=e.directives.tagName(n.source,f=>i(n,"TAG_RESOLVE_FAILED",f));if(!s)return o;let a=o.constructor;if(s==="!"||s===a.tagName)return o.tag=a.tagName,o;let c=Jq.isMap(o)?"map":"seq",l=e.schema.tags.find(f=>f.collection===c&&f.tag===s);if(!l){let f=e.schema.knownTags[s];if(f&&f.collection===c)e.schema.tags.push(Object.assign({},f,{default:!1})),l=f;else return i(n,"TAG_RESOLVE_FAILED",`Unresolved tag: ${s}`,!0),o.tag=s,o}let u=l.resolve(o,f=>i(n,"TAG_RESOLVE_FAILED",f),e.options),d=Jq.isNode(u)?u:new une.Scalar(u);return d.range=o.range,d.tag=s,(l==null?void 0:l.format)&&(d.format=l.format),d}Zq.composeCollection=hne});var hE=_(t$=>{"use strict";var pE=ht();function mne(t,e,r){let n=t.offset,i=gne(t,e,r);if(!i)return{value:"",type:null,comment:"",range:[n,n,n]};let o=i.mode===">"?pE.Scalar.BLOCK_FOLDED:pE.Scalar.BLOCK_LITERAL,s=t.source?vne(t.source):[],a=s.length;for(let m=s.length-1;m>=0;--m){let g=s[m][1];if(g===""||g==="\r")a=m;else break}if(!t.source||a===0){let m=i.chomp==="+"?s.map(v=>v[0]).join(`
`):"",g=n+i.length;return t.source&&(g+=t.source.length),{value:m,type:o,comment:i.comment,range:[n,g,g]}}let c=t.indent+i.indent,l=t.offset+i.length,u=0;for(let m=0;m<a;++m){let[g,v]=s[m];if(v===""||v==="\r")i.indent===0&&g.length>c&&(c=g.length);else{if(g.length<c){let y="Block scalars with more-indented leading empty lines must use an explicit indentation indicator";r(l+g.length,"MISSING_CHAR",y)}i.indent===0&&(c=g.length),u=m;break}l+=g.length+v.length+1}let d="",f="",p=!1;for(let m=0;m<u;++m)d+=s[m][0].slice(c)+`
`;for(let m=u;m<a;++m){let[g,v]=s[m];l+=g.length+v.length+1;let y=v[v.length-1]==="\r";if(y&&(v=v.slice(0,-1)),v&&g.length<c){let w=`Block scalar lines must not be less indented than their ${i.indent?"explicit indentation indicator":"first line"}`;r(l-v.length-(y?2:1),"BAD_INDENT",w),g=""}o===pE.Scalar.BLOCK_LITERAL?(d+=f+g.slice(c)+v,f=`
`):g.length>c||v[0]==="	"?(f===" "?f=`
`:!p&&f===`
`&&(f=`

`),d+=f+g.slice(c)+v,f=`
`,p=!0):v===""?f===`
`?d+=`
`:f=`
`:(d+=f+v,f=" ",p=!1)}switch(i.chomp){case"-":break;case"+":for(let m=a;m<s.length;++m)d+=`
`+s[m][0].slice(c);d[d.length-1]!==`
`&&(d+=`
`);break;default:d+=`
`}let h=n+i.length+t.source.length;return{value:d,type:o,comment:i.comment,range:[n,h,h]}}function gne({offset:t,props:e},r,n){if(e[0].type!=="block-scalar-header")return n(e[0],"IMPOSSIBLE","Block scalar header not found"),null;let{source:i}=e[0],o=i[0],s=0,a="",c=-1;for(let f=1;f<i.length;++f){let p=i[f];if(!a&&(p==="-"||p==="+"))a=p;else{let h=Number(p);!s&&h?s=h:c===-1&&(c=t+f)}}c!==-1&&n(c,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${i}`);let l=!1,u="",d=i.length;for(let f=1;f<e.length;++f){let p=e[f];switch(p.type){case"space":l=!0;case"newline":d+=p.source.length;break;case"comment":r&&!l&&n(p,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),d+=p.source.length,u=p.source.substring(1);break;case"error":n(p,"UNEXPECTED_TOKEN",p.message),d+=p.source.length;break;default:{let h=`Unexpected token in block scalar header: ${p.type}`;n(p,"UNEXPECTED_TOKEN",h);let m=p.source;m&&typeof m=="string"&&(d+=m.length)}}}return{mode:o,indent:s,chomp:a,comment:u,length:d}}function vne(t){let e=t.split(/\n( *)/),r=e[0],n=r.match(/^( *)/),o=[n&&n[1]?[n[1],r.slice(n[1].length)]:["",r]];for(let s=1;s<e.length;s+=2)o.push([e[s],e[s+1]]);return o}t$.resolveBlockScalar=mne});var gE=_(n$=>{"use strict";var mE=ht(),yne=ac();function wne(t,e,r){let{offset:n,type:i,source:o,end:s}=t,a,c,l=(f,p,h)=>r(n+f,p,h);switch(i){case"scalar":a=mE.Scalar.PLAIN,c=Cne(o,l);break;case"single-quoted-scalar":a=mE.Scalar.QUOTE_SINGLE,c=bne(o,l);break;case"double-quoted-scalar":a=mE.Scalar.QUOTE_DOUBLE,c=Ene(o,l);break;default:return r(t,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${i}`),{value:"",type:null,comment:"",range:[n,n+o.length,n+o.length]}}let u=n+o.length,d=yne.resolveEnd(s,u,e,r);return{value:c,type:a,comment:d.comment,range:[n,u,d.offset]}}function Cne(t,e){let r="";switch(t[0]){case"	":r="a tab character";break;case",":r="flow indicator character ,";break;case"%":r="directive indicator character %";break;case"|":case">":{r=`block scalar indicator ${t[0]}`;break}case"@":case"`":{r=`reserved character ${t[0]}`;break}}return r&&e(0,"BAD_SCALAR_START",`Plain value cannot start with ${r}`),r$(t)}function bne(t,e){return(t[t.length-1]!=="'"||t.length===1)&&e(t.length,"MISSING_CHAR","Missing closing 'quote"),r$(t.slice(1,-1)).replace(/''/g,"'")}function r$(t){let e,r;try{e=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),r=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch(c){e=/(.*?)[ \t]*\r?\n/sy,r=/[ \t]*(.*?)[ \t]*\r?\n/sy}let n=e.exec(t);if(!n)return t;let i=n[1],o=" ",s=e.lastIndex;for(r.lastIndex=s;n=r.exec(t);)n[1]===""?o===`
`?i+=o:o=`
`:(i+=o+n[1],o=" "),s=r.lastIndex;let a=/[ \t]*(.*)/sy;return a.lastIndex=s,n=a.exec(t),i+o+(n&&n[1]||"")}function Ene(t,e){let r="";for(let n=1;n<t.length-1;++n){let i=t[n];if(!(i==="\r"&&t[n+1]===`
`))if(i===`
`){let{fold:o,offset:s}=_ne(t,n);r+=o,n=s}else if(i==="\\"){let o=t[++n],s=Sne[o];if(s)r+=s;else if(o===`
`)for(o=t[n+1];o===" "||o==="	";)o=t[++n+1];else if(o==="\r"&&t[n+1]===`
`)for(o=t[++n+1];o===" "||o==="	";)o=t[++n+1];else if(o==="x"||o==="u"||o==="U"){let a={x:2,u:4,U:8}[o];r+=xne(t,n+1,a,e),n+=a}else{let a=t.substr(n-1,2);e(n-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${a}`),r+=a}}else if(i===" "||i==="	"){let o=n,s=t[n+1];for(;s===" "||s==="	";)s=t[++n+1];s!==`
`&&!(s==="\r"&&t[n+2]===`
`)&&(r+=n>o?t.slice(o,n+1):i)}else r+=i}return(t[t.length-1]!=='"'||t.length===1)&&e(t.length,"MISSING_CHAR",'Missing closing "quote'),r}function _ne(t,e){let r="",n=t[e+1];for(;(n===" "||n==="	"||n===`
`||n==="\r")&&!(n==="\r"&&t[e+2]!==`
`);)n===`
`&&(r+=`
`),e+=1,n=t[e+1];return r||(r=" "),{fold:r,offset:e}}var Sne={"0":"\0",a:"\x07",b:"\b",e:"",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"\x85",_:"\xA0",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function xne(t,e,r,n){let i=t.substr(e,r),s=i.length===r&&/^[0-9a-fA-F]+$/.test(i)?parseInt(i,16):NaN;if(isNaN(s)){let a=t.substr(e-2,r+2);return n(e-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${a}`),a}return String.fromCodePoint(s)}n$.resolveFlowScalar=wne});var s$=_(o$=>{"use strict";var sm=Le(),i$=ht(),kne=hE(),Pne=gE();function Ine(t,e,r,n){let{value:i,type:o,comment:s,range:a}=e.type==="block-scalar"?kne.resolveBlockScalar(e,t.options.strict,n):Pne.resolveFlowScalar(e,t.options.strict,n),c=r?t.directives.tagName(r.source,d=>n(r,"TAG_RESOLVE_FAILED",d)):null,l=r&&c?Ane(t.schema,i,c,r,n):Tne(t.schema,i,e.type==="scalar"),u;try{let d=l.resolve(i,f=>n(r||e,"TAG_RESOLVE_FAILED",f),t.options);u=sm.isScalar(d)?d:new i$.Scalar(d)}catch(d){let f=d instanceof Error?d.message:String(d);n(r||e,"TAG_RESOLVE_FAILED",f),u=new i$.Scalar(i)}return u.range=a,u.source=i,o&&(u.type=o),c&&(u.tag=c),l.format&&(u.format=l.format),s&&(u.comment=s),u}function Ane(t,e,r,n,i){var o;if(r==="!")return t[sm.SCALAR];let s=[];for(let c of t.tags)if(!c.collection&&c.tag===r)if(c.default&&c.test)s.push(c);else return c;for(let c of s)if((o=c.test)===null||o===void 0?void 0:o.test(e))return c;let a=t.knownTags[r];return a&&!a.collection?(t.tags.push(Object.assign({},a,{default:!1,test:void 0})),a):(i(n,"TAG_RESOLVE_FAILED",`Unresolved tag: ${r}`,r!=="tag:yaml.org,2002:str"),t[sm.SCALAR])}function Tne(t,e,r){var n;if(r){for(let i of t.tags)if(i.default&&((n=i.test)===null||n===void 0?void 0:n.test(e)))return i}return t[sm.SCALAR]}o$.composeScalar=Ine});var c$=_(a$=>{"use strict";function Rne(t,e,r){if(e){r===null&&(r=e.length);for(let n=r-1;n>=0;--n){let i=e[n];switch(i.type){case"space":case"comment":case"newline":t-=i.source.length;continue}for(i=e[++n];(i==null?void 0:i.type)==="space";)t+=i.source.length,i=e[++n];break}}return t}a$.emptyScalarPosition=Rne});var f$=_(vE=>{"use strict";var Dne=pu(),One=e$(),l$=s$(),Nne=ac(),Lne=c$(),Fne={composeNode:u$,composeEmptyNode:d$};function u$(t,e,r,n){let{spaceBefore:i,comment:o,anchor:s,tag:a}=r,c;switch(e.type){case"alias":c=Mne(t,e,n),(s||a)&&n(e,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":c=l$.composeScalar(t,e,a,n),s&&(c.anchor=s.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":c=One.composeCollection(Fne,t,e,a,n),s&&(c.anchor=s.source.substring(1));break;default:throw console.log(e),new Error(`Unsupporten token type: ${e.type}`)}return s&&c.anchor===""&&n(s,"BAD_ALIAS","Anchor cannot be an empty string"),i&&(c.spaceBefore=!0),o&&(e.type==="scalar"&&e.source===""?c.comment=o:c.commentBefore=o),c}function d$(t,e,r,n,{spaceBefore:i,comment:o,anchor:s,tag:a},c){let l={type:"scalar",offset:Lne.emptyScalarPosition(e,r,n),indent:-1,source:""},u=l$.composeScalar(t,l,a,c);return s&&(u.anchor=s.source.substring(1),u.anchor===""&&c(s,"BAD_ALIAS","Anchor cannot be an empty string")),i&&(u.spaceBefore=!0),o&&(u.comment=o),u}function Mne({options:t},{offset:e,source:r,end:n},i){let o=new Dne.Alias(r.substring(1));o.source===""&&i(e,"BAD_ALIAS","Alias cannot be an empty string");let s=e+r.length,a=Nne.resolveEnd(n,s,t.strict,i);return o.range=[e,s,a.offset],a.comment&&(o.comment=a.comment),o}vE.composeEmptyNode=d$;vE.composeNode=u$});var m$=_(h$=>{"use strict";var qne=Pu(),p$=f$(),$ne=ac(),jne=Tu();function Une(t,e,{offset:r,start:n,value:i,end:o},s){let a=Object.assign({directives:e},t),c=new qne.Document(void 0,a),l={directives:c.directives,options:c.options,schema:c.schema},u=jne.resolveProps(n,{indicator:"doc-start",next:i||(o==null?void 0:o[0]),offset:r,onError:s,startOnNewline:!0});u.found&&(c.directives.marker=!0,i&&(i.type==="block-map"||i.type==="block-seq")&&!u.hasNewline&&s(u.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),c.contents=i?p$.composeNode(l,i,u,s):p$.composeEmptyNode(l,u.end,n,null,u,s);let d=c.contents.range[2],f=$ne.resolveEnd(o,d,!1,s);return f.comment&&(c.comment=f.comment),c.range=[r,d,f.offset],c}h$.composeDoc=Une});var yE=_(w$=>{"use strict";var Bne=yb(),Hne=Pu(),Ru=Au(),g$=Le(),Vne=Fh(),Gne=m$(),Wne=ac();function Du(t){if(typeof t=="number")return[t,t+1];if(Array.isArray(t))return t.length===2?t:[t[0],t[1]];let{offset:e,source:r}=t;return[e,e+(typeof r=="string"?r.length:1)]}function v$(t){var e;let r="",n=!1,i=!1;for(let o=0;o<t.length;++o){let s=t[o];switch(s[0]){case"#":r+=(r===""?"":i?`

`:`
`)+(s.substring(1)||" "),n=!0,i=!1;break;case"%":((e=t[o+1])===null||e===void 0?void 0:e[0])!=="#"&&(o+=1),n=!1;break;default:n||(i=!0),n=!1}}return{comment:r,afterEmptyLine:i}}var y$=class{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(r,n,i,o)=>{let s=Du(r);o?this.warnings.push(new Ru.YAMLWarning(s,n,i)):this.errors.push(new Ru.YAMLParseError(s,n,i))},this.directives=new Bne.Directives({version:e.version||Vne.defaultOptions.version}),this.options=e}decorate(e,r){let{comment:n,afterEmptyLine:i}=v$(this.prelude);if(n){let o=e.contents;if(r)e.comment=e.comment?`${e.comment}
${n}`:n;else if(i||e.directives.marker||!o)e.commentBefore=n;else if(g$.isCollection(o)&&!o.flow&&o.items.length>0){let s=o.items[0];g$.isPair(s)&&(s=s.key);let a=s.commentBefore;s.commentBefore=a?`${n}
${a}`:n}else{let s=o.commentBefore;o.commentBefore=s?`${n}
${s}`:n}}r?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:v$(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,r=!1,n=-1){for(let i of e)yield*this.next(i);yield*this.end(r,n)}*next(e){switch(process.env.LOG_STREAM&&console.dir(e,{depth:null}),e.type){case"directive":this.directives.add(e.source,(r,n,i)=>{let o=Du(e);o[0]+=r,this.onError(o,"BAD_DIRECTIVE",n,i)}),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{let r=Gne.composeDoc(this.options,this.directives,e,this.onError);this.atDirectives&&!r.directives.marker&&this.onError(e,"MISSING_CHAR","Missing directives-end indicator line"),this.decorate(r,!1),this.doc&&(yield this.doc),this.doc=r,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{let r=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,n=new Ru.YAMLParseError(Du(e),"UNEXPECTED_TOKEN",r);this.atDirectives||!this.doc?this.errors.push(n):this.doc.errors.push(n);break}case"doc-end":{if(!this.doc){let n="Unexpected doc-end without preceding document";this.errors.push(new Ru.YAMLParseError(Du(e),"UNEXPECTED_TOKEN",n));break}let r=Wne.resolveEnd(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),r.comment){let n=this.doc.comment;this.doc.comment=n?`${n}
${r.comment}`:r.comment}this.doc.range[2]=r.offset;break}default:this.errors.push(new Ru.YAMLParseError(Du(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=!1,r=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){let n=Object.assign({directives:this.directives},this.options),i=new Hne.Document(void 0,n);this.atDirectives&&this.onError(r,"MISSING_CHAR","Missing directives-end indicator line"),i.range=[0,r,r],this.decorate(i,!1),yield i}}};w$.Composer=y$});var E$=_(am=>{"use strict";var zne=hE(),Kne=gE(),Yne=Au(),C$=vu();function Qne(t,e=!0,r){if(t){let n=(i,o,s)=>{let a=typeof i=="number"?i:Array.isArray(i)?i[0]:i.offset;if(r)r(a,o,s);else throw new Yne.YAMLParseError([a,a+1],o,s)};switch(t.type){case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return Kne.resolveFlowScalar(t,e,n);case"block-scalar":return zne.resolveBlockScalar(t,e,n)}}return null}function Xne(t,e){var r;let{implicitKey:n=!1,indent:i,inFlow:o=!1,offset:s=-1,type:a="PLAIN"}=e,c=C$.stringifyString({type:a,value:t},{implicitKey:n,indent:i>0?" ".repeat(i):"",inFlow:o,options:{lineWidth:-1}}),l=(r=e.end)!==null&&r!==void 0?r:[{type:"newline",offset:-1,indent:i,source:`
`}];switch(c[0]){case"|":case">":{let u=c.indexOf(`
`),d=c.substring(0,u),f=c.substring(u+1)+`
`,p=[{type:"block-scalar-header",offset:s,indent:i,source:d}];return b$(p,l)||p.push({type:"newline",offset:-1,indent:i,source:`
`}),{type:"block-scalar",offset:s,indent:i,props:p,source:f}}case'"':return{type:"double-quoted-scalar",offset:s,indent:i,source:c,end:l};case"'":return{type:"single-quoted-scalar",offset:s,indent:i,source:c,end:l};default:return{type:"scalar",offset:s,indent:i,source:c,end:l}}}function Jne(t,e,r={}){let{afterKey:n=!1,implicitKey:i=!1,inFlow:o=!1,type:s}=r,a="indent"in t?t.indent:null;if(n&&typeof a=="number"&&(a+=2),!s)switch(t.type){case"single-quoted-scalar":s="QUOTE_SINGLE";break;case"double-quoted-scalar":s="QUOTE_DOUBLE";break;case"block-scalar":{let l=t.props[0];if(l.type!=="block-scalar-header")throw new Error("Invalid block scalar header");s=l.source[0]===">"?"BLOCK_FOLDED":"BLOCK_LITERAL";break}default:s="PLAIN"}let c=C$.stringifyString({type:s,value:e},{implicitKey:i||a===null,indent:a!==null&&a>0?" ".repeat(a):"",inFlow:o,options:{lineWidth:-1}});switch(c[0]){case"|":case">":Zne(t,c);break;case'"':wE(t,c,"double-quoted-scalar");break;case"'":wE(t,c,"single-quoted-scalar");break;default:wE(t,c,"scalar")}}function Zne(t,e){let r=e.indexOf(`
`),n=e.substring(0,r),i=e.substring(r+1)+`
`;if(t.type==="block-scalar"){let o=t.props[0];if(o.type!=="block-scalar-header")throw new Error("Invalid block scalar header");o.source=n,t.source=i}else{let{offset:o}=t,s="indent"in t?t.indent:-1,a=[{type:"block-scalar-header",offset:o,indent:s,source:n}];b$(a,"end"in t?t.end:void 0)||a.push({type:"newline",offset:-1,indent:s,source:`
`});for(let c of Object.keys(t))c!=="type"&&c!=="offset"&&delete t[c];Object.assign(t,{type:"block-scalar",indent:s,props:a,source:i})}}function b$(t,e){if(e)for(let r of e)switch(r.type){case"space":case"comment":t.push(r);break;case"newline":return t.push(r),!0}return!1}function wE(t,e,r){switch(t.type){case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":t.type=r,t.source=e;break;case"block-scalar":{let n=t.props.slice(1),i=e.length;t.props[0].type==="block-scalar-header"&&(i-=t.props[0].source.length);for(let o of n)o.offset+=i;delete t.props,Object.assign(t,{type:r,source:e,end:n});break}case"block-map":case"block-seq":{let n=t.offset+e.length,i={type:"newline",offset:n,indent:t.indent,source:`
`};delete t.items,Object.assign(t,{type:r,source:e,end:[i]});break}default:{let n="indent"in t?t.indent:-1,i="end"in t&&Array.isArray(t.end)?t.end.filter(o=>o.type==="space"||o.type==="comment"||o.type==="newline"):[];for(let o of Object.keys(t))o!=="type"&&o!=="offset"&&delete t[o];Object.assign(t,{type:r,indent:n,source:e,end:i})}}}am.createScalarToken=Xne;am.resolveAsScalar=Qne;am.setScalarValue=Jne});var S$=_(_$=>{"use strict";var eie=t=>"type"in t?cm(t):lm(t);function cm(t){switch(t.type){case"block-scalar":{let e="";for(let r of t.props)e+=cm(r);return e+t.source}case"block-map":case"block-seq":{let e="";for(let r of t.items)e+=lm(r);return e}case"flow-collection":{let e=t.start.source;for(let r of t.items)e+=lm(r);for(let r of t.end)e+=r.source;return e}case"document":{let e=lm(t);if(t.end)for(let r of t.end)e+=r.source;return e}default:{let e=t.source;if("end"in t&&t.end)for(let r of t.end)e+=r.source;return e}}}function lm({start:t,key:e,sep:r,value:n}){let i="";for(let o of t)i+=o.source;if(e&&(i+=cm(e)),r)for(let o of r)i+=o.source;return n&&(i+=cm(n)),i}_$.stringify=eie});var I$=_(P$=>{"use strict";var CE=Symbol("break visit"),tie=Symbol("skip children"),x$=Symbol("remove item");function _s(t,e){"type"in t&&t.type==="document"&&(t={start:t.start,value:t.value}),k$(Object.freeze([]),t,e)}_s.BREAK=CE;_s.SKIP=tie;_s.REMOVE=x$;_s.itemAtPath=(t,e)=>{let r=t;for(let[n,i]of e){let o=r&&r[n];if(o&&"items"in o)r=o.items[i];else return}return r};_s.parentCollection=(t,e)=>{let r=_s.itemAtPath(t,e.slice(0,-1)),n=e[e.length-1][0],i=r&&r[n];if(i&&"items"in i)return i;throw new Error("Parent collection not found")};function k$(t,e,r){let n=r(e,t);if(typeof n=="symbol")return n;for(let i of["key","value"]){let o=e[i];if(o&&"items"in o){for(let s=0;s<o.items.length;++s){let a=k$(Object.freeze(t.concat([[i,s]])),o.items[s],r);if(typeof a=="number")s=a-1;else{if(a===CE)return CE;a===x$&&(o.items.splice(s,1),s-=1)}}typeof n=="function"&&i==="key"&&(n=n(e,t))}}return typeof n=="function"?n(e,t):n}P$.visit=_s});var um=_(mr=>{"use strict";var bE=E$(),rie=S$(),nie=I$(),EE="\uFEFF",_E="",SE="",xE="",iie=t=>!!t&&"items"in t,oie=t=>!!t&&(t.type==="scalar"||t.type==="single-quoted-scalar"||t.type==="double-quoted-scalar"||t.type==="block-scalar");function sie(t){switch(t){case EE:return"<BOM>";case _E:return"<DOC>";case SE:return"<FLOW_END>";case xE:return"<SCALAR>";default:return JSON.stringify(t)}}function aie(t){switch(t){case EE:return"byte-order-mark";case _E:return"doc-mode";case SE:return"flow-error-end";case xE:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(t[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}mr.createScalarToken=bE.createScalarToken;mr.resolveAsScalar=bE.resolveAsScalar;mr.setScalarValue=bE.setScalarValue;mr.stringify=rie.stringify;mr.visit=nie.visit;mr.BOM=EE;mr.DOCUMENT=_E;mr.FLOW_END=SE;mr.SCALAR=xE;mr.isCollection=iie;mr.isScalar=oie;mr.prettyToken=sie;mr.tokenType=aie});var PE=_(D$=>{"use strict";var Ou=um();function Jr(t){switch(t){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}var A$="0123456789ABCDEFabcdef".split(""),cie="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()".split(""),T$=",[]{}".split(""),lie=` ,[]{}
\r	`.split(""),kE=t=>!t||lie.includes(t),R$=class{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,r=!1){e&&(this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null),this.atEnd=!r;let n=this.next||"stream";for(;n&&(r||this.hasChars(1));)n=yield*this.parseNext(n)}atLineEnd(){let e=this.pos,r=this.buffer[e];for(;r===" "||r==="	";)r=this.buffer[++e];return!r||r==="#"||r===`
`?!0:r==="\r"?this.buffer[e+1]===`
`:!1}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let r=this.buffer[e];if(this.indentNext>0){let n=0;for(;r===" ";)r=this.buffer[++n+e];if(r==="\r"){let i=this.buffer[n+e+1];if(i===`
`||!i&&!this.atEnd)return e+n+1}return r===`
`||n>=this.indentNext||!r&&!this.atEnd?e+n:-1}if(r==="-"||r==="."){let n=this.buffer.substr(e,3);if((n==="---"||n==="...")&&Jr(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;return(typeof e!="number"||e!==-1&&e<this.pos)&&(e=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=e),e===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[e-1]==="\r"&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(e===null)return this.setNext("stream");if(e[0]===Ou.BOM&&(yield*this.pushCount(1),e=e.substring(1)),e[0]==="%"){let r=e.length,n=e.indexOf("#");if(n!==-1){let o=e[n-1];(o===" "||o==="	")&&(r=n-1)}for(;;){let o=e[r-1];if(o===" "||o==="	")r-=1;else break}let i=(yield*this.pushCount(r))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-i),this.pushNewline(),"stream"}if(this.atLineEnd()){let r=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-r),yield*this.pushNewline(),"stream"}return yield Ou.DOCUMENT,yield*this.parseLineStart()}*parseLineStart(){let e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if(e==="-"||e==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");let r=this.peek(3);if(r==="---"&&Jr(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,"doc";if(r==="..."&&Jr(this.charAt(3)))return yield*this.pushCount(3),"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!Jr(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){let[e,r]=this.peek(2);if(!r&&!this.atEnd)return this.setNext("block-start");if((e==="-"||e==="?"||e===":")&&Jr(r)){let n=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=n,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);let e=this.getLine();if(e===null)return this.setNext("doc");let r=yield*this.pushIndicators();switch(e[r]){case"#":yield*this.pushCount(e.length-r);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(kE),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return r+=yield*this.parseBlockScalarHeader(),r+=yield*this.pushSpaces(!0),yield*this.pushCount(e.length-r),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,r,n=-1;do e=yield*this.pushNewline(),r=yield*this.pushSpaces(!0),e>0&&(this.indentValue=n=r);while(e+r>0);let i=this.getLine();if(i===null)return this.setNext("flow");if((n!==-1&&n<this.indentNext||n===0&&(i.startsWith("---")||i.startsWith("..."))&&Jr(i[3]))&&!(n===this.indentNext-1&&this.flowLevel===1&&(i[0]==="]"||i[0]==="}")))return this.flowLevel=0,yield Ou.FLOW_END,yield*this.parseLineStart();let o=0;for(;i[o]===",";)o+=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));switch(o+=yield*this.pushIndicators(),i[o]){case void 0:return"flow";case"#":return yield*this.pushCount(i.length-o),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(kE),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{let s=this.charAt(1);if(this.flowKey||Jr(s)||s===",")return yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){let e=this.charAt(0),r=this.buffer.indexOf(e,this.pos+1);if(e==="'")for(;r!==-1&&this.buffer[r+1]==="'";)r=this.buffer.indexOf("'",r+2);else for(;r!==-1;){let o=0;for(;this.buffer[r-1-o]==="\\";)o+=1;if(o%2==0)break;r=this.buffer.indexOf('"',r+1)}let n=this.buffer.substring(0,r),i=n.indexOf(`
`,this.pos);if(i!==-1){for(;i!==-1;){let o=this.continueScalar(i+1);if(o===-1)break;i=n.indexOf(`
`,o)}i!==-1&&(r=i-(n[i-1]==="\r"?2:1))}if(r===-1){if(!this.atEnd)return this.setNext("quoted-scalar");r=this.buffer.length}return yield*this.pushToIndex(r+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){let r=this.buffer[++e];if(r==="+")this.blockScalarKeep=!0;else if(r>"0"&&r<="9")this.blockScalarIndent=Number(r)-1;else if(r!=="-")break}return yield*this.pushUntil(r=>Jr(r)||r==="#")}*parseBlockScalar(){let e=this.pos-1,r=0,n;e:for(let i=this.pos;n=this.buffer[i];++i)switch(n){case" ":r+=1;break;case`
`:e=i,r=0;break;case"\r":{let o=this.buffer[i+1];if(!o&&!this.atEnd)return this.setNext("block-scalar");if(o===`
`)break}default:break e}if(!n&&!this.atEnd)return this.setNext("block-scalar");if(r>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=r:this.indentNext+=this.blockScalarIndent;do{let i=this.continueScalar(e+1);if(i===-1)break;e=this.buffer.indexOf(`
`,i)}while(e!==-1);if(e===-1){if(!this.atEnd)return this.setNext("block-scalar");e=this.buffer.length}}if(!this.blockScalarKeep)do{let i=e-1,o=this.buffer[i];for(o==="\r"&&(o=this.buffer[--i]);o===" "||o==="	";)o=this.buffer[--i];if(o===`
`&&i>=this.pos)e=i;else break}while(!0);return yield Ou.SCALAR,yield*this.pushToIndex(e+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){let e=this.flowLevel>0,r=this.pos-1,n=this.pos-1,i;for(;i=this.buffer[++n];)if(i===":"){let o=this.buffer[n+1];if(Jr(o)||e&&o===",")break;r=n}else if(Jr(i)){let o=this.buffer[n+1];if(i==="\r"&&(o===`
`?(n+=1,i=`
`,o=this.buffer[n+1]):r=n),o==="#"||e&&T$.includes(o))break;if(i===`
`){let s=this.continueScalar(n+1);if(s===-1)break;n=Math.max(n,s-2)}}else{if(e&&T$.includes(i))break;r=n}return!i&&!this.atEnd?this.setNext("plain-scalar"):(yield Ou.SCALAR,yield*this.pushToIndex(r+1,!0),e?"flow":"doc")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,r){let n=this.buffer.slice(this.pos,e);return n?(yield n,this.pos+=n.length,n.length):(r&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(kE))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case":":case"?":case"-":if(Jr(this.charAt(1)))return this.flowLevel===0&&(this.indentNext=this.indentValue+1),(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}return 0}*pushTag(){if(this.charAt(1)==="<"){let e=this.pos+2,r=this.buffer[e];for(;!Jr(r)&&r!==">";)r=this.buffer[++e];return yield*this.pushToIndex(r===">"?e+1:e,!1)}else{let e=this.pos+1,r=this.buffer[e];for(;r;)if(cie.includes(r))r=this.buffer[++e];else if(r==="%"&&A$.includes(this.buffer[e+1])&&A$.includes(this.buffer[e+2]))r=this.buffer[e+=3];else break;return yield*this.pushToIndex(e,!1)}}*pushNewline(){let e=this.buffer[this.pos];return e===`
`?yield*this.pushCount(1):e==="\r"&&this.charAt(1)===`
`?yield*this.pushCount(2):0}*pushSpaces(e){let r=this.pos-1,n;do n=this.buffer[++r];while(n===" "||e&&n==="	");let i=r-this.pos;return i>0&&(yield this.buffer.substr(this.pos,i),this.pos=r),i}*pushUntil(e){let r=this.pos,n=this.buffer[r];for(;!e(n);)n=this.buffer[++r];return yield*this.pushToIndex(r,!1)}};D$.Lexer=R$});var IE=_(N$=>{"use strict";var O$=class{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let r=0,n=this.lineStarts.length;for(;r<n;){let o=r+n>>1;this.lineStarts[o]<e?r=o+1:n=o}if(this.lineStarts[r]===e)return{line:r+1,col:1};if(r===0)return{line:0,col:e};let i=this.lineStarts[r-1];return{line:r,col:e-i+1}}}};N$.LineCounter=O$});var TE=_($$=>{"use strict";var L$=um(),uie=PE();function Kn(t,e){for(let r=0;r<t.length;++r)if(t[r].type===e)return!0;return!1}function AE(t){for(let e=0;e<t.length;++e)switch(t[e].type){case"space":case"comment":case"newline":break;default:return!0}return!1}function F$(t){switch(t==null?void 0:t.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function dm(t){switch(t.type){case"document":return t.start;case"block-map":{let e=t.items[t.items.length-1];return e.sep||e.start}case"block-seq":return t.items[t.items.length-1].start;default:return[]}}function Nu(t){var e;if(t.length===0)return[];let r=t.length;e:for(;--r>=0;)switch(t[r].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;((e=t[++r])===null||e===void 0?void 0:e.type)==="space";);return t.splice(r,t.length)}function M$(t){if(t.start.type==="flow-seq-start")for(let e of t.items)e.sep&&!e.value&&!Kn(e.start,"explicit-key-ind")&&!Kn(e.sep,"map-value-ind")&&(e.key&&(e.value=e.key),delete e.key,F$(e.value)?e.value.end?Array.prototype.push.apply(e.value.end,e.sep):e.value.end=e.sep:Array.prototype.push.apply(e.start,e.sep),delete e.sep)}var q$=class{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new uie.Lexer,this.onNewLine=e}*parse(e,r=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(let n of this.lexer.lex(e,r))yield*this.next(n);r||(yield*this.end())}*next(e){if(this.source=e,process.env.LOG_TOKENS&&console.log("|",L$.prettyToken(e)),this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=e.length;return}let r=L$.tokenType(e);if(r)if(r==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=r,yield*this.step(),r){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&e[0]===" "&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":return;default:this.atNewLine=!1}this.offset+=e.length}else{let n=`Not a YAML token: ${e}`;yield*this.pop({type:"error",offset:this.offset,message:n,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){let e=this.peek(1);if(this.type==="doc-end"&&(!e||e.type!=="doc-end")){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}peek(e){return this.stack[this.stack.length-e]}*pop(e){let r=e||this.stack.pop();if(r)if(this.stack.length===0)yield r;else{let n=this.peek(1);switch((r.type==="block-scalar"||r.type==="flow-collection")&&(r.indent="indent"in n?n.indent:-1),r.type==="flow-collection"&&M$(r),n.type){case"document":n.value=r;break;case"block-scalar":n.props.push(r);break;case"block-map":{let i=n.items[n.items.length-1];if(i.value){n.items.push({start:[],key:r,sep:[]}),this.onKeyLine=!0;return}else if(i.sep)i.value=r;else{Object.assign(i,{key:r,sep:[]}),this.onKeyLine=!Kn(i.start,"explicit-key-ind");return}break}case"block-seq":{let i=n.items[n.items.length-1];i.value?n.items.push({start:[],value:r}):i.value=r;break}case"flow-collection":{let i=n.items[n.items.length-1];!i||i.value?n.items.push({start:[],key:r,sep:[]}):i.sep?i.value=r:Object.assign(i,{key:r,sep:[]});return}default:yield*this.pop(),yield*this.pop(r)}if((n.type==="document"||n.type==="block-map"||n.type==="block-seq")&&(r.type==="block-map"||r.type==="block-seq")){let i=r.items[r.items.length-1];i&&!i.sep&&!i.value&&i.start.length>0&&!AE(i.start)&&(r.indent===0||i.start.every(o=>o.type!=="comment"||o.indent<r.indent))&&(n.type==="document"?n.end=i.start:n.items.push({start:i.start}),r.items.splice(-1,1))}}else{let n="Tried to pop an empty stack";yield{type:"error",offset:this.offset,source:"",message:n}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{let e={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&e.start.push(this.sourceToken),this.stack.push(e);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":{AE(e.start)?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":e.start.push(this.sourceToken);return}let r=this.startBlockValue(e);r?this.stack.push(r):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if(this.type==="map-value-ind"){let r=dm(this.peek(2)),n=Nu(r),i;e.end?(i=e.end,i.push(this.sourceToken),delete e.end):i=[this.sourceToken];let o={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:n,key:e,sep:i}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=o}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":e.props.push(this.sourceToken);return;case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let r=this.source.indexOf(`
`)+1;for(;r!==0;)this.onNewLine(this.offset+r),r=this.source.indexOf(`
`,r)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){var r;let n=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,n.value){let i="end"in n.value?n.value.end:void 0,o=Array.isArray(i)?i[i.length-1]:void 0;(o==null?void 0:o.type)==="comment"?i==null||i.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else if(n.sep)n.sep.push(this.sourceToken);else{if(this.atIndentedComment(n.start,e.indent)){let i=e.items[e.items.length-2],o=(r=i==null?void 0:i.value)===null||r===void 0?void 0:r.end;if(Array.isArray(o)){Array.prototype.push.apply(o,n.start),o.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return}if(this.indent>=e.indent){let i=!this.onKeyLine&&this.indent===e.indent&&(n.sep||AE(n.start));switch(this.type){case"anchor":case"tag":i||n.value?(e.items.push({start:[this.sourceToken]}),this.onKeyLine=!0):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"explicit-key-ind":!n.sep&&!Kn(n.start,"explicit-key-ind")?n.start.push(this.sourceToken):i||n.value?e.items.push({start:[this.sourceToken]}):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]}),this.onKeyLine=!0;return;case"map-value-ind":if(!n.sep)Object.assign(n,{key:null,sep:[this.sourceToken]});else if(n.value||i&&!Kn(n.start,"explicit-key-ind"))e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(Kn(n.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]});else if(Kn(n.start,"explicit-key-ind")&&F$(n.key)&&!Kn(n.sep,"newline")){let o=Nu(n.start),s=n.key,a=n.sep;a.push(this.sourceToken),delete n.key,delete n.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:s,sep:a}]})}else n.sep.push(this.sourceToken);this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{let o=this.flowScalar(this.type);i||n.value?(e.items.push({start:[],key:o,sep:[]}),this.onKeyLine=!0):n.sep?this.stack.push(o):(Object.assign(n,{key:o,sep:[]}),this.onKeyLine=!0);return}default:{let o=this.startBlockValue(e);if(o){i&&o.type!=="block-seq"&&Kn(n.start,"explicit-key-ind")&&e.items.push({start:[]}),this.stack.push(o);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(e){var r;let n=e.items[e.items.length-1];switch(this.type){case"newline":if(n.value){let i="end"in n.value?n.value.end:void 0,o=Array.isArray(i)?i[i.length-1]:void 0;(o==null?void 0:o.type)==="comment"?i==null||i.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(n.start,e.indent)){let i=e.items[e.items.length-2],o=(r=i==null?void 0:i.value)===null||r===void 0?void 0:r.end;if(Array.isArray(o)){Array.prototype.push.apply(o,n.start),o.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return;case"anchor":case"tag":if(n.value||this.indent<=e.indent)break;n.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==e.indent)break;n.value||Kn(n.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return}if(this.indent>e.indent){let i=this.startBlockValue(e);if(i){this.stack.push(i);return}}yield*this.pop(),yield*this.step()}*flowCollection(e){let r=e.items[e.items.length-1];if(this.type==="flow-error-end"){let n;do yield*this.pop(),n=this.peek(1);while(n&&n.type==="flow-collection")}else if(e.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!r||r.sep?e.items.push({start:[this.sourceToken]}):r.start.push(this.sourceToken);return;case"map-value-ind":!r||r.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):r.sep?r.sep.push(this.sourceToken):Object.assign(r,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!r||r.value?e.items.push({start:[this.sourceToken]}):r.sep?r.sep.push(this.sourceToken):r.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{let i=this.flowScalar(this.type);!r||r.value?e.items.push({start:[],key:i,sep:[]}):r.sep?this.stack.push(i):Object.assign(r,{key:i,sep:[]});return}case"flow-map-end":case"flow-seq-end":e.end.push(this.sourceToken);return}let n=this.startBlockValue(e);n?this.stack.push(n):(yield*this.pop(),yield*this.step())}else{let n=this.peek(2);if(n.type==="block-map"&&(this.type==="map-value-ind"||this.type==="newline"&&!n.items[n.items.length-1].sep))yield*this.pop(),yield*this.step();else if(this.type==="map-value-ind"&&n.type!=="flow-collection"){let i=dm(n),o=Nu(i);M$(e);let s=e.end.splice(1,e.end.length);s.push(this.sourceToken);let a={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:o,key:e,sep:s}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=a}else yield*this.lineEnd(e)}}flowScalar(e){if(this.onNewLine){let r=this.source.indexOf(`
`)+1;for(;r!==0;)this.onNewLine(this.offset+r),r=this.source.indexOf(`
`,r)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;let r=dm(e),n=Nu(r);return n.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:n}]}}case"map-value-ind":{this.onKeyLine=!0;let r=dm(e),n=Nu(r);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:n,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,r){return this.type!=="comment"||this.indent<=r?!1:e.every(n=>n.type==="newline"||n.type==="space")}*documentEnd(e){this.type!=="doc-mode"&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;case"space":case"comment":default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop())}}};$$.Parser=q$});var V$=_(Fu=>{"use strict";var j$=yE(),die=Pu(),Lu=Au(),fie=Pb(),pie=IE(),U$=TE();function B$(t){let e=!t||t.prettyErrors!==!1;return{lineCounter:t&&t.lineCounter||e&&new pie.LineCounter||null,prettyErrors:e}}function hie(t,e={}){let{lineCounter:r,prettyErrors:n}=B$(e),i=new U$.Parser(r==null?void 0:r.addNewLine),o=new j$.Composer(e),s=Array.from(o.compose(i.parse(t)));if(n&&r)for(let a of s)a.errors.forEach(Lu.prettifyError(t,r)),a.warnings.forEach(Lu.prettifyError(t,r));return s.length>0?s:Object.assign([],{empty:!0},o.streamInfo())}function H$(t,e={}){let{lineCounter:r,prettyErrors:n}=B$(e),i=new U$.Parser(r==null?void 0:r.addNewLine),o=new j$.Composer(e),s=null;for(let a of o.compose(i.parse(t),!0,t.length))if(!s)s=a;else if(s.options.logLevel!=="silent"){s.errors.push(new Lu.YAMLParseError(a.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return n&&r&&(s.errors.forEach(Lu.prettifyError(t,r)),s.warnings.forEach(Lu.prettifyError(t,r))),s}function mie(t,e,r){let n;typeof e=="function"?n=e:r===void 0&&e&&typeof e=="object"&&(r=e);let i=H$(t,r);if(!i)return null;if(i.warnings.forEach(o=>fie.warn(i.options.logLevel,o)),i.errors.length>0){if(i.options.logLevel!=="silent")throw i.errors[0];i.errors=[]}return i.toJS(Object.assign({reviver:n},r))}function gie(t,e,r){let n=null;if(typeof e=="function"||Array.isArray(e)?n=e:r===void 0&&e&&(r=e),typeof r=="string"&&(r=r.length),typeof r=="number"){let i=Math.round(r);r=i<1?void 0:i>8?{indent:8}:{indent:i}}if(t===void 0){let{keepUndefined:i}=r||e||{};if(!i)return}return new die.Document(t,n,r).toString(r)}Fu.parse=mie;Fu.parseAllDocuments=hie;Fu.parseDocument=H$;Fu.stringify=gie});var G$=_(Fe=>{"use strict";var vie=yE(),yie=Pu(),wie=oE(),RE=Au(),Cie=pu(),Eo=Le(),bie=Si(),Eie=ht(),_ie=bs(),Sie=Es(),xie=Fh(),kie=um(),Pie=PE(),Iie=IE(),Aie=TE(),fm=V$(),Tie=uu();Fe.Composer=vie.Composer;Fe.Document=yie.Document;Fe.Schema=wie.Schema;Fe.YAMLError=RE.YAMLError;Fe.YAMLParseError=RE.YAMLParseError;Fe.YAMLWarning=RE.YAMLWarning;Fe.Alias=Cie.Alias;Fe.isAlias=Eo.isAlias;Fe.isCollection=Eo.isCollection;Fe.isDocument=Eo.isDocument;Fe.isMap=Eo.isMap;Fe.isNode=Eo.isNode;Fe.isPair=Eo.isPair;Fe.isScalar=Eo.isScalar;Fe.isSeq=Eo.isSeq;Fe.Pair=bie.Pair;Fe.Scalar=Eie.Scalar;Fe.YAMLMap=_ie.YAMLMap;Fe.YAMLSeq=Sie.YAMLSeq;Fe.defaultOptions=xie.defaultOptions;Fe.CST=kie;Fe.Lexer=Pie.Lexer;Fe.LineCounter=Iie.LineCounter;Fe.Parser=Aie.Parser;Fe.parse=fm.parse;Fe.parseAllDocuments=fm.parseAllDocuments;Fe.parseDocument=fm.parseDocument;Fe.stringify=fm.stringify;Fe.visit=Tie.visit});var W$=_((TCe,Rie)=>{Rie.exports={Aacute:"\xC1",aacute:"\xE1",Abreve:"\u0102",abreve:"\u0103",ac:"\u223E",acd:"\u223F",acE:"\u223E\u0333",Acirc:"\xC2",acirc:"\xE2",acute:"\xB4",Acy:"\u0410",acy:"\u0430",AElig:"\xC6",aelig:"\xE6",af:"\u2061",Afr:"\u{1D504}",afr:"\u{1D51E}",Agrave:"\xC0",agrave:"\xE0",alefsym:"\u2135",aleph:"\u2135",Alpha:"\u0391",alpha:"\u03B1",Amacr:"\u0100",amacr:"\u0101",amalg:"\u2A3F",amp:"&",AMP:"&",andand:"\u2A55",And:"\u2A53",and:"\u2227",andd:"\u2A5C",andslope:"\u2A58",andv:"\u2A5A",ang:"\u2220",ange:"\u29A4",angle:"\u2220",angmsdaa:"\u29A8",angmsdab:"\u29A9",angmsdac:"\u29AA",angmsdad:"\u29AB",angmsdae:"\u29AC",angmsdaf:"\u29AD",angmsdag:"\u29AE",angmsdah:"\u29AF",angmsd:"\u2221",angrt:"\u221F",angrtvb:"\u22BE",angrtvbd:"\u299D",angsph:"\u2222",angst:"\xC5",angzarr:"\u237C",Aogon:"\u0104",aogon:"\u0105",Aopf:"\u{1D538}",aopf:"\u{1D552}",apacir:"\u2A6F",ap:"\u2248",apE:"\u2A70",ape:"\u224A",apid:"\u224B",apos:"'",ApplyFunction:"\u2061",approx:"\u2248",approxeq:"\u224A",Aring:"\xC5",aring:"\xE5",Ascr:"\u{1D49C}",ascr:"\u{1D4B6}",Assign:"\u2254",ast:"*",asymp:"\u2248",asympeq:"\u224D",Atilde:"\xC3",atilde:"\xE3",Auml:"\xC4",auml:"\xE4",awconint:"\u2233",awint:"\u2A11",backcong:"\u224C",backepsilon:"\u03F6",backprime:"\u2035",backsim:"\u223D",backsimeq:"\u22CD",Backslash:"\u2216",Barv:"\u2AE7",barvee:"\u22BD",barwed:"\u2305",Barwed:"\u2306",barwedge:"\u2305",bbrk:"\u23B5",bbrktbrk:"\u23B6",bcong:"\u224C",Bcy:"\u0411",bcy:"\u0431",bdquo:"\u201E",becaus:"\u2235",because:"\u2235",Because:"\u2235",bemptyv:"\u29B0",bepsi:"\u03F6",bernou:"\u212C",Bernoullis:"\u212C",Beta:"\u0392",beta:"\u03B2",beth:"\u2136",between:"\u226C",Bfr:"\u{1D505}",bfr:"\u{1D51F}",bigcap:"\u22C2",bigcirc:"\u25EF",bigcup:"\u22C3",bigodot:"\u2A00",bigoplus:"\u2A01",bigotimes:"\u2A02",bigsqcup:"\u2A06",bigstar:"\u2605",bigtriangledown:"\u25BD",bigtriangleup:"\u25B3",biguplus:"\u2A04",bigvee:"\u22C1",bigwedge:"\u22C0",bkarow:"\u290D",blacklozenge:"\u29EB",blacksquare:"\u25AA",blacktriangle:"\u25B4",blacktriangledown:"\u25BE",blacktriangleleft:"\u25C2",blacktriangleright:"\u25B8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20E5",bnequiv:"\u2261\u20E5",bNot:"\u2AED",bnot:"\u2310",Bopf:"\u{1D539}",bopf:"\u{1D553}",bot:"\u22A5",bottom:"\u22A5",bowtie:"\u22C8",boxbox:"\u29C9",boxdl:"\u2510",boxdL:"\u2555",boxDl:"\u2556",boxDL:"\u2557",boxdr:"\u250C",boxdR:"\u2552",boxDr:"\u2553",boxDR:"\u2554",boxh:"\u2500",boxH:"\u2550",boxhd:"\u252C",boxHd:"\u2564",boxhD:"\u2565",boxHD:"\u2566",boxhu:"\u2534",boxHu:"\u2567",boxhU:"\u2568",boxHU:"\u2569",boxminus:"\u229F",boxplus:"\u229E",boxtimes:"\u22A0",boxul:"\u2518",boxuL:"\u255B",boxUl:"\u255C",boxUL:"\u255D",boxur:"\u2514",boxuR:"\u2558",boxUr:"\u2559",boxUR:"\u255A",boxv:"\u2502",boxV:"\u2551",boxvh:"\u253C",boxvH:"\u256A",boxVh:"\u256B",boxVH:"\u256C",boxvl:"\u2524",boxvL:"\u2561",boxVl:"\u2562",boxVL:"\u2563",boxvr:"\u251C",boxvR:"\u255E",boxVr:"\u255F",boxVR:"\u2560",bprime:"\u2035",breve:"\u02D8",Breve:"\u02D8",brvbar:"\xA6",bscr:"\u{1D4B7}",Bscr:"\u212C",bsemi:"\u204F",bsim:"\u223D",bsime:"\u22CD",bsolb:"\u29C5",bsol:"\\",bsolhsub:"\u27C8",bull:"\u2022",bullet:"\u2022",bump:"\u224E",bumpE:"\u2AAE",bumpe:"\u224F",Bumpeq:"\u224E",bumpeq:"\u224F",Cacute:"\u0106",cacute:"\u0107",capand:"\u2A44",capbrcup:"\u2A49",capcap:"\u2A4B",cap:"\u2229",Cap:"\u22D2",capcup:"\u2A47",capdot:"\u2A40",CapitalDifferentialD:"\u2145",caps:"\u2229\uFE00",caret:"\u2041",caron:"\u02C7",Cayleys:"\u212D",ccaps:"\u2A4D",Ccaron:"\u010C",ccaron:"\u010D",Ccedil:"\xC7",ccedil:"\xE7",Ccirc:"\u0108",ccirc:"\u0109",Cconint:"\u2230",ccups:"\u2A4C",ccupssm:"\u2A50",Cdot:"\u010A",cdot:"\u010B",cedil:"\xB8",Cedilla:"\xB8",cemptyv:"\u29B2",cent:"\xA2",centerdot:"\xB7",CenterDot:"\xB7",cfr:"\u{1D520}",Cfr:"\u212D",CHcy:"\u0427",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",Chi:"\u03A7",chi:"\u03C7",circ:"\u02C6",circeq:"\u2257",circlearrowleft:"\u21BA",circlearrowright:"\u21BB",circledast:"\u229B",circledcirc:"\u229A",circleddash:"\u229D",CircleDot:"\u2299",circledR:"\xAE",circledS:"\u24C8",CircleMinus:"\u2296",CirclePlus:"\u2295",CircleTimes:"\u2297",cir:"\u25CB",cirE:"\u29C3",cire:"\u2257",cirfnint:"\u2A10",cirmid:"\u2AEF",cirscir:"\u29C2",ClockwiseContourIntegral:"\u2232",CloseCurlyDoubleQuote:"\u201D",CloseCurlyQuote:"\u2019",clubs:"\u2663",clubsuit:"\u2663",colon:":",Colon:"\u2237",Colone:"\u2A74",colone:"\u2254",coloneq:"\u2254",comma:",",commat:"@",comp:"\u2201",compfn:"\u2218",complement:"\u2201",complexes:"\u2102",cong:"\u2245",congdot:"\u2A6D",Congruent:"\u2261",conint:"\u222E",Conint:"\u222F",ContourIntegral:"\u222E",copf:"\u{1D554}",Copf:"\u2102",coprod:"\u2210",Coproduct:"\u2210",copy:"\xA9",COPY:"\xA9",copysr:"\u2117",CounterClockwiseContourIntegral:"\u2233",crarr:"\u21B5",cross:"\u2717",Cross:"\u2A2F",Cscr:"\u{1D49E}",cscr:"\u{1D4B8}",csub:"\u2ACF",csube:"\u2AD1",csup:"\u2AD0",csupe:"\u2AD2",ctdot:"\u22EF",cudarrl:"\u2938",cudarrr:"\u2935",cuepr:"\u22DE",cuesc:"\u22DF",cularr:"\u21B6",cularrp:"\u293D",cupbrcap:"\u2A48",cupcap:"\u2A46",CupCap:"\u224D",cup:"\u222A",Cup:"\u22D3",cupcup:"\u2A4A",cupdot:"\u228D",cupor:"\u2A45",cups:"\u222A\uFE00",curarr:"\u21B7",curarrm:"\u293C",curlyeqprec:"\u22DE",curlyeqsucc:"\u22DF",curlyvee:"\u22CE",curlywedge:"\u22CF",curren:"\xA4",curvearrowleft:"\u21B6",curvearrowright:"\u21B7",cuvee:"\u22CE",cuwed:"\u22CF",cwconint:"\u2232",cwint:"\u2231",cylcty:"\u232D",dagger:"\u2020",Dagger:"\u2021",daleth:"\u2138",darr:"\u2193",Darr:"\u21A1",dArr:"\u21D3",dash:"\u2010",Dashv:"\u2AE4",dashv:"\u22A3",dbkarow:"\u290F",dblac:"\u02DD",Dcaron:"\u010E",dcaron:"\u010F",Dcy:"\u0414",dcy:"\u0434",ddagger:"\u2021",ddarr:"\u21CA",DD:"\u2145",dd:"\u2146",DDotrahd:"\u2911",ddotseq:"\u2A77",deg:"\xB0",Del:"\u2207",Delta:"\u0394",delta:"\u03B4",demptyv:"\u29B1",dfisht:"\u297F",Dfr:"\u{1D507}",dfr:"\u{1D521}",dHar:"\u2965",dharl:"\u21C3",dharr:"\u21C2",DiacriticalAcute:"\xB4",DiacriticalDot:"\u02D9",DiacriticalDoubleAcute:"\u02DD",DiacriticalGrave:"`",DiacriticalTilde:"\u02DC",diam:"\u22C4",diamond:"\u22C4",Diamond:"\u22C4",diamondsuit:"\u2666",diams:"\u2666",die:"\xA8",DifferentialD:"\u2146",digamma:"\u03DD",disin:"\u22F2",div:"\xF7",divide:"\xF7",divideontimes:"\u22C7",divonx:"\u22C7",DJcy:"\u0402",djcy:"\u0452",dlcorn:"\u231E",dlcrop:"\u230D",dollar:"$",Dopf:"\u{1D53B}",dopf:"\u{1D555}",Dot:"\xA8",dot:"\u02D9",DotDot:"\u20DC",doteq:"\u2250",doteqdot:"\u2251",DotEqual:"\u2250",dotminus:"\u2238",dotplus:"\u2214",dotsquare:"\u22A1",doublebarwedge:"\u2306",DoubleContourIntegral:"\u222F",DoubleDot:"\xA8",DoubleDownArrow:"\u21D3",DoubleLeftArrow:"\u21D0",DoubleLeftRightArrow:"\u21D4",DoubleLeftTee:"\u2AE4",DoubleLongLeftArrow:"\u27F8",DoubleLongLeftRightArrow:"\u27FA",DoubleLongRightArrow:"\u27F9",DoubleRightArrow:"\u21D2",DoubleRightTee:"\u22A8",DoubleUpArrow:"\u21D1",DoubleUpDownArrow:"\u21D5",DoubleVerticalBar:"\u2225",DownArrowBar:"\u2913",downarrow:"\u2193",DownArrow:"\u2193",Downarrow:"\u21D3",DownArrowUpArrow:"\u21F5",DownBreve:"\u0311",downdownarrows:"\u21CA",downharpoonleft:"\u21C3",downharpoonright:"\u21C2",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295E",DownLeftVectorBar:"\u2956",DownLeftVector:"\u21BD",DownRightTeeVector:"\u295F",DownRightVectorBar:"\u2957",DownRightVector:"\u21C1",DownTeeArrow:"\u21A7",DownTee:"\u22A4",drbkarow:"\u2910",drcorn:"\u231F",drcrop:"\u230C",Dscr:"\u{1D49F}",dscr:"\u{1D4B9}",DScy:"\u0405",dscy:"\u0455",dsol:"\u29F6",Dstrok:"\u0110",dstrok:"\u0111",dtdot:"\u22F1",dtri:"\u25BF",dtrif:"\u25BE",duarr:"\u21F5",duhar:"\u296F",dwangle:"\u29A6",DZcy:"\u040F",dzcy:"\u045F",dzigrarr:"\u27FF",Eacute:"\xC9",eacute:"\xE9",easter:"\u2A6E",Ecaron:"\u011A",ecaron:"\u011B",Ecirc:"\xCA",ecirc:"\xEA",ecir:"\u2256",ecolon:"\u2255",Ecy:"\u042D",ecy:"\u044D",eDDot:"\u2A77",Edot:"\u0116",edot:"\u0117",eDot:"\u2251",ee:"\u2147",efDot:"\u2252",Efr:"\u{1D508}",efr:"\u{1D522}",eg:"\u2A9A",Egrave:"\xC8",egrave:"\xE8",egs:"\u2A96",egsdot:"\u2A98",el:"\u2A99",Element:"\u2208",elinters:"\u23E7",ell:"\u2113",els:"\u2A95",elsdot:"\u2A97",Emacr:"\u0112",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",EmptySmallSquare:"\u25FB",emptyv:"\u2205",EmptyVerySmallSquare:"\u25AB",emsp13:"\u2004",emsp14:"\u2005",emsp:"\u2003",ENG:"\u014A",eng:"\u014B",ensp:"\u2002",Eogon:"\u0118",eogon:"\u0119",Eopf:"\u{1D53C}",eopf:"\u{1D556}",epar:"\u22D5",eparsl:"\u29E3",eplus:"\u2A71",epsi:"\u03B5",Epsilon:"\u0395",epsilon:"\u03B5",epsiv:"\u03F5",eqcirc:"\u2256",eqcolon:"\u2255",eqsim:"\u2242",eqslantgtr:"\u2A96",eqslantless:"\u2A95",Equal:"\u2A75",equals:"=",EqualTilde:"\u2242",equest:"\u225F",Equilibrium:"\u21CC",equiv:"\u2261",equivDD:"\u2A78",eqvparsl:"\u29E5",erarr:"\u2971",erDot:"\u2253",escr:"\u212F",Escr:"\u2130",esdot:"\u2250",Esim:"\u2A73",esim:"\u2242",Eta:"\u0397",eta:"\u03B7",ETH:"\xD0",eth:"\xF0",Euml:"\xCB",euml:"\xEB",euro:"\u20AC",excl:"!",exist:"\u2203",Exists:"\u2203",expectation:"\u2130",exponentiale:"\u2147",ExponentialE:"\u2147",fallingdotseq:"\u2252",Fcy:"\u0424",fcy:"\u0444",female:"\u2640",ffilig:"\uFB03",fflig:"\uFB00",ffllig:"\uFB04",Ffr:"\u{1D509}",ffr:"\u{1D523}",filig:"\uFB01",FilledSmallSquare:"\u25FC",FilledVerySmallSquare:"\u25AA",fjlig:"fj",flat:"\u266D",fllig:"\uFB02",fltns:"\u25B1",fnof:"\u0192",Fopf:"\u{1D53D}",fopf:"\u{1D557}",forall:"\u2200",ForAll:"\u2200",fork:"\u22D4",forkv:"\u2AD9",Fouriertrf:"\u2131",fpartint:"\u2A0D",frac12:"\xBD",frac13:"\u2153",frac14:"\xBC",frac15:"\u2155",frac16:"\u2159",frac18:"\u215B",frac23:"\u2154",frac25:"\u2156",frac34:"\xBE",frac35:"\u2157",frac38:"\u215C",frac45:"\u2158",frac56:"\u215A",frac58:"\u215D",frac78:"\u215E",frasl:"\u2044",frown:"\u2322",fscr:"\u{1D4BB}",Fscr:"\u2131",gacute:"\u01F5",Gamma:"\u0393",gamma:"\u03B3",Gammad:"\u03DC",gammad:"\u03DD",gap:"\u2A86",Gbreve:"\u011E",gbreve:"\u011F",Gcedil:"\u0122",Gcirc:"\u011C",gcirc:"\u011D",Gcy:"\u0413",gcy:"\u0433",Gdot:"\u0120",gdot:"\u0121",ge:"\u2265",gE:"\u2267",gEl:"\u2A8C",gel:"\u22DB",geq:"\u2265",geqq:"\u2267",geqslant:"\u2A7E",gescc:"\u2AA9",ges:"\u2A7E",gesdot:"\u2A80",gesdoto:"\u2A82",gesdotol:"\u2A84",gesl:"\u22DB\uFE00",gesles:"\u2A94",Gfr:"\u{1D50A}",gfr:"\u{1D524}",gg:"\u226B",Gg:"\u22D9",ggg:"\u22D9",gimel:"\u2137",GJcy:"\u0403",gjcy:"\u0453",gla:"\u2AA5",gl:"\u2277",glE:"\u2A92",glj:"\u2AA4",gnap:"\u2A8A",gnapprox:"\u2A8A",gne:"\u2A88",gnE:"\u2269",gneq:"\u2A88",gneqq:"\u2269",gnsim:"\u22E7",Gopf:"\u{1D53E}",gopf:"\u{1D558}",grave:"`",GreaterEqual:"\u2265",GreaterEqualLess:"\u22DB",GreaterFullEqual:"\u2267",GreaterGreater:"\u2AA2",GreaterLess:"\u2277",GreaterSlantEqual:"\u2A7E",GreaterTilde:"\u2273",Gscr:"\u{1D4A2}",gscr:"\u210A",gsim:"\u2273",gsime:"\u2A8E",gsiml:"\u2A90",gtcc:"\u2AA7",gtcir:"\u2A7A",gt:">",GT:">",Gt:"\u226B",gtdot:"\u22D7",gtlPar:"\u2995",gtquest:"\u2A7C",gtrapprox:"\u2A86",gtrarr:"\u2978",gtrdot:"\u22D7",gtreqless:"\u22DB",gtreqqless:"\u2A8C",gtrless:"\u2277",gtrsim:"\u2273",gvertneqq:"\u2269\uFE00",gvnE:"\u2269\uFE00",Hacek:"\u02C7",hairsp:"\u200A",half:"\xBD",hamilt:"\u210B",HARDcy:"\u042A",hardcy:"\u044A",harrcir:"\u2948",harr:"\u2194",hArr:"\u21D4",harrw:"\u21AD",Hat:"^",hbar:"\u210F",Hcirc:"\u0124",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",hercon:"\u22B9",hfr:"\u{1D525}",Hfr:"\u210C",HilbertSpace:"\u210B",hksearow:"\u2925",hkswarow:"\u2926",hoarr:"\u21FF",homtht:"\u223B",hookleftarrow:"\u21A9",hookrightarrow:"\u21AA",hopf:"\u{1D559}",Hopf:"\u210D",horbar:"\u2015",HorizontalLine:"\u2500",hscr:"\u{1D4BD}",Hscr:"\u210B",hslash:"\u210F",Hstrok:"\u0126",hstrok:"\u0127",HumpDownHump:"\u224E",HumpEqual:"\u224F",hybull:"\u2043",hyphen:"\u2010",Iacute:"\xCD",iacute:"\xED",ic:"\u2063",Icirc:"\xCE",icirc:"\xEE",Icy:"\u0418",icy:"\u0438",Idot:"\u0130",IEcy:"\u0415",iecy:"\u0435",iexcl:"\xA1",iff:"\u21D4",ifr:"\u{1D526}",Ifr:"\u2111",Igrave:"\xCC",igrave:"\xEC",ii:"\u2148",iiiint:"\u2A0C",iiint:"\u222D",iinfin:"\u29DC",iiota:"\u2129",IJlig:"\u0132",ijlig:"\u0133",Imacr:"\u012A",imacr:"\u012B",image:"\u2111",ImaginaryI:"\u2148",imagline:"\u2110",imagpart:"\u2111",imath:"\u0131",Im:"\u2111",imof:"\u22B7",imped:"\u01B5",Implies:"\u21D2",incare:"\u2105",in:"\u2208",infin:"\u221E",infintie:"\u29DD",inodot:"\u0131",intcal:"\u22BA",int:"\u222B",Int:"\u222C",integers:"\u2124",Integral:"\u222B",intercal:"\u22BA",Intersection:"\u22C2",intlarhk:"\u2A17",intprod:"\u2A3C",InvisibleComma:"\u2063",InvisibleTimes:"\u2062",IOcy:"\u0401",iocy:"\u0451",Iogon:"\u012E",iogon:"\u012F",Iopf:"\u{1D540}",iopf:"\u{1D55A}",Iota:"\u0399",iota:"\u03B9",iprod:"\u2A3C",iquest:"\xBF",iscr:"\u{1D4BE}",Iscr:"\u2110",isin:"\u2208",isindot:"\u22F5",isinE:"\u22F9",isins:"\u22F4",isinsv:"\u22F3",isinv:"\u2208",it:"\u2062",Itilde:"\u0128",itilde:"\u0129",Iukcy:"\u0406",iukcy:"\u0456",Iuml:"\xCF",iuml:"\xEF",Jcirc:"\u0134",jcirc:"\u0135",Jcy:"\u0419",jcy:"\u0439",Jfr:"\u{1D50D}",jfr:"\u{1D527}",jmath:"\u0237",Jopf:"\u{1D541}",jopf:"\u{1D55B}",Jscr:"\u{1D4A5}",jscr:"\u{1D4BF}",Jsercy:"\u0408",jsercy:"\u0458",Jukcy:"\u0404",jukcy:"\u0454",Kappa:"\u039A",kappa:"\u03BA",kappav:"\u03F0",Kcedil:"\u0136",kcedil:"\u0137",Kcy:"\u041A",kcy:"\u043A",Kfr:"\u{1D50E}",kfr:"\u{1D528}",kgreen:"\u0138",KHcy:"\u0425",khcy:"\u0445",KJcy:"\u040C",kjcy:"\u045C",Kopf:"\u{1D542}",kopf:"\u{1D55C}",Kscr:"\u{1D4A6}",kscr:"\u{1D4C0}",lAarr:"\u21DA",Lacute:"\u0139",lacute:"\u013A",laemptyv:"\u29B4",lagran:"\u2112",Lambda:"\u039B",lambda:"\u03BB",lang:"\u27E8",Lang:"\u27EA",langd:"\u2991",langle:"\u27E8",lap:"\u2A85",Laplacetrf:"\u2112",laquo:"\xAB",larrb:"\u21E4",larrbfs:"\u291F",larr:"\u2190",Larr:"\u219E",lArr:"\u21D0",larrfs:"\u291D",larrhk:"\u21A9",larrlp:"\u21AB",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21A2",latail:"\u2919",lAtail:"\u291B",lat:"\u2AAB",late:"\u2AAD",lates:"\u2AAD\uFE00",lbarr:"\u290C",lBarr:"\u290E",lbbrk:"\u2772",lbrace:"{",lbrack:"[",lbrke:"\u298B",lbrksld:"\u298F",lbrkslu:"\u298D",Lcaron:"\u013D",lcaron:"\u013E",Lcedil:"\u013B",lcedil:"\u013C",lceil:"\u2308",lcub:"{",Lcy:"\u041B",lcy:"\u043B",ldca:"\u2936",ldquo:"\u201C",ldquor:"\u201E",ldrdhar:"\u2967",ldrushar:"\u294B",ldsh:"\u21B2",le:"\u2264",lE:"\u2266",LeftAngleBracket:"\u27E8",LeftArrowBar:"\u21E4",leftarrow:"\u2190",LeftArrow:"\u2190",Leftarrow:"\u21D0",LeftArrowRightArrow:"\u21C6",leftarrowtail:"\u21A2",LeftCeiling:"\u2308",LeftDoubleBracket:"\u27E6",LeftDownTeeVector:"\u2961",LeftDownVectorBar:"\u2959",LeftDownVector:"\u21C3",LeftFloor:"\u230A",leftharpoondown:"\u21BD",leftharpoonup:"\u21BC",leftleftarrows:"\u21C7",leftrightarrow:"\u2194",LeftRightArrow:"\u2194",Leftrightarrow:"\u21D4",leftrightarrows:"\u21C6",leftrightharpoons:"\u21CB",leftrightsquigarrow:"\u21AD",LeftRightVector:"\u294E",LeftTeeArrow:"\u21A4",LeftTee:"\u22A3",LeftTeeVector:"\u295A",leftthreetimes:"\u22CB",LeftTriangleBar:"\u29CF",LeftTriangle:"\u22B2",LeftTriangleEqual:"\u22B4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVectorBar:"\u2958",LeftUpVector:"\u21BF",LeftVectorBar:"\u2952",LeftVector:"\u21BC",lEg:"\u2A8B",leg:"\u22DA",leq:"\u2264",leqq:"\u2266",leqslant:"\u2A7D",lescc:"\u2AA8",les:"\u2A7D",lesdot:"\u2A7F",lesdoto:"\u2A81",lesdotor:"\u2A83",lesg:"\u22DA\uFE00",lesges:"\u2A93",lessapprox:"\u2A85",lessdot:"\u22D6",lesseqgtr:"\u22DA",lesseqqgtr:"\u2A8B",LessEqualGreater:"\u22DA",LessFullEqual:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",LessLess:"\u2AA1",lesssim:"\u2272",LessSlantEqual:"\u2A7D",LessTilde:"\u2272",lfisht:"\u297C",lfloor:"\u230A",Lfr:"\u{1D50F}",lfr:"\u{1D529}",lg:"\u2276",lgE:"\u2A91",lHar:"\u2962",lhard:"\u21BD",lharu:"\u21BC",lharul:"\u296A",lhblk:"\u2584",LJcy:"\u0409",ljcy:"\u0459",llarr:"\u21C7",ll:"\u226A",Ll:"\u22D8",llcorner:"\u231E",Lleftarrow:"\u21DA",llhard:"\u296B",lltri:"\u25FA",Lmidot:"\u013F",lmidot:"\u0140",lmoustache:"\u23B0",lmoust:"\u23B0",lnap:"\u2A89",lnapprox:"\u2A89",lne:"\u2A87",lnE:"\u2268",lneq:"\u2A87",lneqq:"\u2268",lnsim:"\u22E6",loang:"\u27EC",loarr:"\u21FD",lobrk:"\u27E6",longleftarrow:"\u27F5",LongLeftArrow:"\u27F5",Longleftarrow:"\u27F8",longleftrightarrow:"\u27F7",LongLeftRightArrow:"\u27F7",Longleftrightarrow:"\u27FA",longmapsto:"\u27FC",longrightarrow:"\u27F6",LongRightArrow:"\u27F6",Longrightarrow:"\u27F9",looparrowleft:"\u21AB",looparrowright:"\u21AC",lopar:"\u2985",Lopf:"\u{1D543}",lopf:"\u{1D55D}",loplus:"\u2A2D",lotimes:"\u2A34",lowast:"\u2217",lowbar:"_",LowerLeftArrow:"\u2199",LowerRightArrow:"\u2198",loz:"\u25CA",lozenge:"\u25CA",lozf:"\u29EB",lpar:"(",lparlt:"\u2993",lrarr:"\u21C6",lrcorner:"\u231F",lrhar:"\u21CB",lrhard:"\u296D",lrm:"\u200E",lrtri:"\u22BF",lsaquo:"\u2039",lscr:"\u{1D4C1}",Lscr:"\u2112",lsh:"\u21B0",Lsh:"\u21B0",lsim:"\u2272",lsime:"\u2A8D",lsimg:"\u2A8F",lsqb:"[",lsquo:"\u2018",lsquor:"\u201A",Lstrok:"\u0141",lstrok:"\u0142",ltcc:"\u2AA6",ltcir:"\u2A79",lt:"<",LT:"<",Lt:"\u226A",ltdot:"\u22D6",lthree:"\u22CB",ltimes:"\u22C9",ltlarr:"\u2976",ltquest:"\u2A7B",ltri:"\u25C3",ltrie:"\u22B4",ltrif:"\u25C2",ltrPar:"\u2996",lurdshar:"\u294A",luruhar:"\u2966",lvertneqq:"\u2268\uFE00",lvnE:"\u2268\uFE00",macr:"\xAF",male:"\u2642",malt:"\u2720",maltese:"\u2720",Map:"\u2905",map:"\u21A6",mapsto:"\u21A6",mapstodown:"\u21A7",mapstoleft:"\u21A4",mapstoup:"\u21A5",marker:"\u25AE",mcomma:"\u2A29",Mcy:"\u041C",mcy:"\u043C",mdash:"\u2014",mDDot:"\u223A",measuredangle:"\u2221",MediumSpace:"\u205F",Mellintrf:"\u2133",Mfr:"\u{1D510}",mfr:"\u{1D52A}",mho:"\u2127",micro:"\xB5",midast:"*",midcir:"\u2AF0",mid:"\u2223",middot:"\xB7",minusb:"\u229F",minus:"\u2212",minusd:"\u2238",minusdu:"\u2A2A",MinusPlus:"\u2213",mlcp:"\u2ADB",mldr:"\u2026",mnplus:"\u2213",models:"\u22A7",Mopf:"\u{1D544}",mopf:"\u{1D55E}",mp:"\u2213",mscr:"\u{1D4C2}",Mscr:"\u2133",mstpos:"\u223E",Mu:"\u039C",mu:"\u03BC",multimap:"\u22B8",mumap:"\u22B8",nabla:"\u2207",Nacute:"\u0143",nacute:"\u0144",nang:"\u2220\u20D2",nap:"\u2249",napE:"\u2A70\u0338",napid:"\u224B\u0338",napos:"\u0149",napprox:"\u2249",natural:"\u266E",naturals:"\u2115",natur:"\u266E",nbsp:"\xA0",nbump:"\u224E\u0338",nbumpe:"\u224F\u0338",ncap:"\u2A43",Ncaron:"\u0147",ncaron:"\u0148",Ncedil:"\u0145",ncedil:"\u0146",ncong:"\u2247",ncongdot:"\u2A6D\u0338",ncup:"\u2A42",Ncy:"\u041D",ncy:"\u043D",ndash:"\u2013",nearhk:"\u2924",nearr:"\u2197",neArr:"\u21D7",nearrow:"\u2197",ne:"\u2260",nedot:"\u2250\u0338",NegativeMediumSpace:"\u200B",NegativeThickSpace:"\u200B",NegativeThinSpace:"\u200B",NegativeVeryThinSpace:"\u200B",nequiv:"\u2262",nesear:"\u2928",nesim:"\u2242\u0338",NestedGreaterGreater:"\u226B",NestedLessLess:"\u226A",NewLine:`
`,nexist:"\u2204",nexists:"\u2204",Nfr:"\u{1D511}",nfr:"\u{1D52B}",ngE:"\u2267\u0338",nge:"\u2271",ngeq:"\u2271",ngeqq:"\u2267\u0338",ngeqslant:"\u2A7E\u0338",nges:"\u2A7E\u0338",nGg:"\u22D9\u0338",ngsim:"\u2275",nGt:"\u226B\u20D2",ngt:"\u226F",ngtr:"\u226F",nGtv:"\u226B\u0338",nharr:"\u21AE",nhArr:"\u21CE",nhpar:"\u2AF2",ni:"\u220B",nis:"\u22FC",nisd:"\u22FA",niv:"\u220B",NJcy:"\u040A",njcy:"\u045A",nlarr:"\u219A",nlArr:"\u21CD",nldr:"\u2025",nlE:"\u2266\u0338",nle:"\u2270",nleftarrow:"\u219A",nLeftarrow:"\u21CD",nleftrightarrow:"\u21AE",nLeftrightarrow:"\u21CE",nleq:"\u2270",nleqq:"\u2266\u0338",nleqslant:"\u2A7D\u0338",nles:"\u2A7D\u0338",nless:"\u226E",nLl:"\u22D8\u0338",nlsim:"\u2274",nLt:"\u226A\u20D2",nlt:"\u226E",nltri:"\u22EA",nltrie:"\u22EC",nLtv:"\u226A\u0338",nmid:"\u2224",NoBreak:"\u2060",NonBreakingSpace:"\xA0",nopf:"\u{1D55F}",Nopf:"\u2115",Not:"\u2AEC",not:"\xAC",NotCongruent:"\u2262",NotCupCap:"\u226D",NotDoubleVerticalBar:"\u2226",NotElement:"\u2209",NotEqual:"\u2260",NotEqualTilde:"\u2242\u0338",NotExists:"\u2204",NotGreater:"\u226F",NotGreaterEqual:"\u2271",NotGreaterFullEqual:"\u2267\u0338",NotGreaterGreater:"\u226B\u0338",NotGreaterLess:"\u2279",NotGreaterSlantEqual:"\u2A7E\u0338",NotGreaterTilde:"\u2275",NotHumpDownHump:"\u224E\u0338",NotHumpEqual:"\u224F\u0338",notin:"\u2209",notindot:"\u22F5\u0338",notinE:"\u22F9\u0338",notinva:"\u2209",notinvb:"\u22F7",notinvc:"\u22F6",NotLeftTriangleBar:"\u29CF\u0338",NotLeftTriangle:"\u22EA",NotLeftTriangleEqual:"\u22EC",NotLess:"\u226E",NotLessEqual:"\u2270",NotLessGreater:"\u2278",NotLessLess:"\u226A\u0338",NotLessSlantEqual:"\u2A7D\u0338",NotLessTilde:"\u2274",NotNestedGreaterGreater:"\u2AA2\u0338",NotNestedLessLess:"\u2AA1\u0338",notni:"\u220C",notniva:"\u220C",notnivb:"\u22FE",notnivc:"\u22FD",NotPrecedes:"\u2280",NotPrecedesEqual:"\u2AAF\u0338",NotPrecedesSlantEqual:"\u22E0",NotReverseElement:"\u220C",NotRightTriangleBar:"\u29D0\u0338",NotRightTriangle:"\u22EB",NotRightTriangleEqual:"\u22ED",NotSquareSubset:"\u228F\u0338",NotSquareSubsetEqual:"\u22E2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22E3",NotSubset:"\u2282\u20D2",NotSubsetEqual:"\u2288",NotSucceeds:"\u2281",NotSucceedsEqual:"\u2AB0\u0338",NotSucceedsSlantEqual:"\u22E1",NotSucceedsTilde:"\u227F\u0338",NotSuperset:"\u2283\u20D2",NotSupersetEqual:"\u2289",NotTilde:"\u2241",NotTildeEqual:"\u2244",NotTildeFullEqual:"\u2247",NotTildeTilde:"\u2249",NotVerticalBar:"\u2224",nparallel:"\u2226",npar:"\u2226",nparsl:"\u2AFD\u20E5",npart:"\u2202\u0338",npolint:"\u2A14",npr:"\u2280",nprcue:"\u22E0",nprec:"\u2280",npreceq:"\u2AAF\u0338",npre:"\u2AAF\u0338",nrarrc:"\u2933\u0338",nrarr:"\u219B",nrArr:"\u21CF",nrarrw:"\u219D\u0338",nrightarrow:"\u219B",nRightarrow:"\u21CF",nrtri:"\u22EB",nrtrie:"\u22ED",nsc:"\u2281",nsccue:"\u22E1",nsce:"\u2AB0\u0338",Nscr:"\u{1D4A9}",nscr:"\u{1D4C3}",nshortmid:"\u2224",nshortparallel:"\u2226",nsim:"\u2241",nsime:"\u2244",nsimeq:"\u2244",nsmid:"\u2224",nspar:"\u2226",nsqsube:"\u22E2",nsqsupe:"\u22E3",nsub:"\u2284",nsubE:"\u2AC5\u0338",nsube:"\u2288",nsubset:"\u2282\u20D2",nsubseteq:"\u2288",nsubseteqq:"\u2AC5\u0338",nsucc:"\u2281",nsucceq:"\u2AB0\u0338",nsup:"\u2285",nsupE:"\u2AC6\u0338",nsupe:"\u2289",nsupset:"\u2283\u20D2",nsupseteq:"\u2289",nsupseteqq:"\u2AC6\u0338",ntgl:"\u2279",Ntilde:"\xD1",ntilde:"\xF1",ntlg:"\u2278",ntriangleleft:"\u22EA",ntrianglelefteq:"\u22EC",ntriangleright:"\u22EB",ntrianglerighteq:"\u22ED",Nu:"\u039D",nu:"\u03BD",num:"#",numero:"\u2116",numsp:"\u2007",nvap:"\u224D\u20D2",nvdash:"\u22AC",nvDash:"\u22AD",nVdash:"\u22AE",nVDash:"\u22AF",nvge:"\u2265\u20D2",nvgt:">\u20D2",nvHarr:"\u2904",nvinfin:"\u29DE",nvlArr:"\u2902",nvle:"\u2264\u20D2",nvlt:"<\u20D2",nvltrie:"\u22B4\u20D2",nvrArr:"\u2903",nvrtrie:"\u22B5\u20D2",nvsim:"\u223C\u20D2",nwarhk:"\u2923",nwarr:"\u2196",nwArr:"\u21D6",nwarrow:"\u2196",nwnear:"\u2927",Oacute:"\xD3",oacute:"\xF3",oast:"\u229B",Ocirc:"\xD4",ocirc:"\xF4",ocir:"\u229A",Ocy:"\u041E",ocy:"\u043E",odash:"\u229D",Odblac:"\u0150",odblac:"\u0151",odiv:"\u2A38",odot:"\u2299",odsold:"\u29BC",OElig:"\u0152",oelig:"\u0153",ofcir:"\u29BF",Ofr:"\u{1D512}",ofr:"\u{1D52C}",ogon:"\u02DB",Ograve:"\xD2",ograve:"\xF2",ogt:"\u29C1",ohbar:"\u29B5",ohm:"\u03A9",oint:"\u222E",olarr:"\u21BA",olcir:"\u29BE",olcross:"\u29BB",oline:"\u203E",olt:"\u29C0",Omacr:"\u014C",omacr:"\u014D",Omega:"\u03A9",omega:"\u03C9",Omicron:"\u039F",omicron:"\u03BF",omid:"\u29B6",ominus:"\u2296",Oopf:"\u{1D546}",oopf:"\u{1D560}",opar:"\u29B7",OpenCurlyDoubleQuote:"\u201C",OpenCurlyQuote:"\u2018",operp:"\u29B9",oplus:"\u2295",orarr:"\u21BB",Or:"\u2A54",or:"\u2228",ord:"\u2A5D",order:"\u2134",orderof:"\u2134",ordf:"\xAA",ordm:"\xBA",origof:"\u22B6",oror:"\u2A56",orslope:"\u2A57",orv:"\u2A5B",oS:"\u24C8",Oscr:"\u{1D4AA}",oscr:"\u2134",Oslash:"\xD8",oslash:"\xF8",osol:"\u2298",Otilde:"\xD5",otilde:"\xF5",otimesas:"\u2A36",Otimes:"\u2A37",otimes:"\u2297",Ouml:"\xD6",ouml:"\xF6",ovbar:"\u233D",OverBar:"\u203E",OverBrace:"\u23DE",OverBracket:"\u23B4",OverParenthesis:"\u23DC",para:"\xB6",parallel:"\u2225",par:"\u2225",parsim:"\u2AF3",parsl:"\u2AFD",part:"\u2202",PartialD:"\u2202",Pcy:"\u041F",pcy:"\u043F",percnt:"%",period:".",permil:"\u2030",perp:"\u22A5",pertenk:"\u2031",Pfr:"\u{1D513}",pfr:"\u{1D52D}",Phi:"\u03A6",phi:"\u03C6",phiv:"\u03D5",phmmat:"\u2133",phone:"\u260E",Pi:"\u03A0",pi:"\u03C0",pitchfork:"\u22D4",piv:"\u03D6",planck:"\u210F",planckh:"\u210E",plankv:"\u210F",plusacir:"\u2A23",plusb:"\u229E",pluscir:"\u2A22",plus:"+",plusdo:"\u2214",plusdu:"\u2A25",pluse:"\u2A72",PlusMinus:"\xB1",plusmn:"\xB1",plussim:"\u2A26",plustwo:"\u2A27",pm:"\xB1",Poincareplane:"\u210C",pointint:"\u2A15",popf:"\u{1D561}",Popf:"\u2119",pound:"\xA3",prap:"\u2AB7",Pr:"\u2ABB",pr:"\u227A",prcue:"\u227C",precapprox:"\u2AB7",prec:"\u227A",preccurlyeq:"\u227C",Precedes:"\u227A",PrecedesEqual:"\u2AAF",PrecedesSlantEqual:"\u227C",PrecedesTilde:"\u227E",preceq:"\u2AAF",precnapprox:"\u2AB9",precneqq:"\u2AB5",precnsim:"\u22E8",pre:"\u2AAF",prE:"\u2AB3",precsim:"\u227E",prime:"\u2032",Prime:"\u2033",primes:"\u2119",prnap:"\u2AB9",prnE:"\u2AB5",prnsim:"\u22E8",prod:"\u220F",Product:"\u220F",profalar:"\u232E",profline:"\u2312",profsurf:"\u2313",prop:"\u221D",Proportional:"\u221D",Proportion:"\u2237",propto:"\u221D",prsim:"\u227E",prurel:"\u22B0",Pscr:"\u{1D4AB}",pscr:"\u{1D4C5}",Psi:"\u03A8",psi:"\u03C8",puncsp:"\u2008",Qfr:"\u{1D514}",qfr:"\u{1D52E}",qint:"\u2A0C",qopf:"\u{1D562}",Qopf:"\u211A",qprime:"\u2057",Qscr:"\u{1D4AC}",qscr:"\u{1D4C6}",quaternions:"\u210D",quatint:"\u2A16",quest:"?",questeq:"\u225F",quot:'"',QUOT:'"',rAarr:"\u21DB",race:"\u223D\u0331",Racute:"\u0154",racute:"\u0155",radic:"\u221A",raemptyv:"\u29B3",rang:"\u27E9",Rang:"\u27EB",rangd:"\u2992",range:"\u29A5",rangle:"\u27E9",raquo:"\xBB",rarrap:"\u2975",rarrb:"\u21E5",rarrbfs:"\u2920",rarrc:"\u2933",rarr:"\u2192",Rarr:"\u21A0",rArr:"\u21D2",rarrfs:"\u291E",rarrhk:"\u21AA",rarrlp:"\u21AC",rarrpl:"\u2945",rarrsim:"\u2974",Rarrtl:"\u2916",rarrtl:"\u21A3",rarrw:"\u219D",ratail:"\u291A",rAtail:"\u291C",ratio:"\u2236",rationals:"\u211A",rbarr:"\u290D",rBarr:"\u290F",RBarr:"\u2910",rbbrk:"\u2773",rbrace:"}",rbrack:"]",rbrke:"\u298C",rbrksld:"\u298E",rbrkslu:"\u2990",Rcaron:"\u0158",rcaron:"\u0159",Rcedil:"\u0156",rcedil:"\u0157",rceil:"\u2309",rcub:"}",Rcy:"\u0420",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdquo:"\u201D",rdquor:"\u201D",rdsh:"\u21B3",real:"\u211C",realine:"\u211B",realpart:"\u211C",reals:"\u211D",Re:"\u211C",rect:"\u25AD",reg:"\xAE",REG:"\xAE",ReverseElement:"\u220B",ReverseEquilibrium:"\u21CB",ReverseUpEquilibrium:"\u296F",rfisht:"\u297D",rfloor:"\u230B",rfr:"\u{1D52F}",Rfr:"\u211C",rHar:"\u2964",rhard:"\u21C1",rharu:"\u21C0",rharul:"\u296C",Rho:"\u03A1",rho:"\u03C1",rhov:"\u03F1",RightAngleBracket:"\u27E9",RightArrowBar:"\u21E5",rightarrow:"\u2192",RightArrow:"\u2192",Rightarrow:"\u21D2",RightArrowLeftArrow:"\u21C4",rightarrowtail:"\u21A3",RightCeiling:"\u2309",RightDoubleBracket:"\u27E7",RightDownTeeVector:"\u295D",RightDownVectorBar:"\u2955",RightDownVector:"\u21C2",RightFloor:"\u230B",rightharpoondown:"\u21C1",rightharpoonup:"\u21C0",rightleftarrows:"\u21C4",rightleftharpoons:"\u21CC",rightrightarrows:"\u21C9",rightsquigarrow:"\u219D",RightTeeArrow:"\u21A6",RightTee:"\u22A2",RightTeeVector:"\u295B",rightthreetimes:"\u22CC",RightTriangleBar:"\u29D0",RightTriangle:"\u22B3",RightTriangleEqual:"\u22B5",RightUpDownVector:"\u294F",RightUpTeeVector:"\u295C",RightUpVectorBar:"\u2954",RightUpVector:"\u21BE",RightVectorBar:"\u2953",RightVector:"\u21C0",ring:"\u02DA",risingdotseq:"\u2253",rlarr:"\u21C4",rlhar:"\u21CC",rlm:"\u200F",rmoustache:"\u23B1",rmoust:"\u23B1",rnmid:"\u2AEE",roang:"\u27ED",roarr:"\u21FE",robrk:"\u27E7",ropar:"\u2986",ropf:"\u{1D563}",Ropf:"\u211D",roplus:"\u2A2E",rotimes:"\u2A35",RoundImplies:"\u2970",rpar:")",rpargt:"\u2994",rppolint:"\u2A12",rrarr:"\u21C9",Rrightarrow:"\u21DB",rsaquo:"\u203A",rscr:"\u{1D4C7}",Rscr:"\u211B",rsh:"\u21B1",Rsh:"\u21B1",rsqb:"]",rsquo:"\u2019",rsquor:"\u2019",rthree:"\u22CC",rtimes:"\u22CA",rtri:"\u25B9",rtrie:"\u22B5",rtrif:"\u25B8",rtriltri:"\u29CE",RuleDelayed:"\u29F4",ruluhar:"\u2968",rx:"\u211E",Sacute:"\u015A",sacute:"\u015B",sbquo:"\u201A",scap:"\u2AB8",Scaron:"\u0160",scaron:"\u0161",Sc:"\u2ABC",sc:"\u227B",sccue:"\u227D",sce:"\u2AB0",scE:"\u2AB4",Scedil:"\u015E",scedil:"\u015F",Scirc:"\u015C",scirc:"\u015D",scnap:"\u2ABA",scnE:"\u2AB6",scnsim:"\u22E9",scpolint:"\u2A13",scsim:"\u227F",Scy:"\u0421",scy:"\u0441",sdotb:"\u22A1",sdot:"\u22C5",sdote:"\u2A66",searhk:"\u2925",searr:"\u2198",seArr:"\u21D8",searrow:"\u2198",sect:"\xA7",semi:";",seswar:"\u2929",setminus:"\u2216",setmn:"\u2216",sext:"\u2736",Sfr:"\u{1D516}",sfr:"\u{1D530}",sfrown:"\u2322",sharp:"\u266F",SHCHcy:"\u0429",shchcy:"\u0449",SHcy:"\u0428",shcy:"\u0448",ShortDownArrow:"\u2193",ShortLeftArrow:"\u2190",shortmid:"\u2223",shortparallel:"\u2225",ShortRightArrow:"\u2192",ShortUpArrow:"\u2191",shy:"\xAD",Sigma:"\u03A3",sigma:"\u03C3",sigmaf:"\u03C2",sigmav:"\u03C2",sim:"\u223C",simdot:"\u2A6A",sime:"\u2243",simeq:"\u2243",simg:"\u2A9E",simgE:"\u2AA0",siml:"\u2A9D",simlE:"\u2A9F",simne:"\u2246",simplus:"\u2A24",simrarr:"\u2972",slarr:"\u2190",SmallCircle:"\u2218",smallsetminus:"\u2216",smashp:"\u2A33",smeparsl:"\u29E4",smid:"\u2223",smile:"\u2323",smt:"\u2AAA",smte:"\u2AAC",smtes:"\u2AAC\uFE00",SOFTcy:"\u042C",softcy:"\u044C",solbar:"\u233F",solb:"\u29C4",sol:"/",Sopf:"\u{1D54A}",sopf:"\u{1D564}",spades:"\u2660",spadesuit:"\u2660",spar:"\u2225",sqcap:"\u2293",sqcaps:"\u2293\uFE00",sqcup:"\u2294",sqcups:"\u2294\uFE00",Sqrt:"\u221A",sqsub:"\u228F",sqsube:"\u2291",sqsubset:"\u228F",sqsubseteq:"\u2291",sqsup:"\u2290",sqsupe:"\u2292",sqsupset:"\u2290",sqsupseteq:"\u2292",square:"\u25A1",Square:"\u25A1",SquareIntersection:"\u2293",SquareSubset:"\u228F",SquareSubsetEqual:"\u2291",SquareSuperset:"\u2290",SquareSupersetEqual:"\u2292",SquareUnion:"\u2294",squarf:"\u25AA",squ:"\u25A1",squf:"\u25AA",srarr:"\u2192",Sscr:"\u{1D4AE}",sscr:"\u{1D4C8}",ssetmn:"\u2216",ssmile:"\u2323",sstarf:"\u22C6",Star:"\u22C6",star:"\u2606",starf:"\u2605",straightepsilon:"\u03F5",straightphi:"\u03D5",strns:"\xAF",sub:"\u2282",Sub:"\u22D0",subdot:"\u2ABD",subE:"\u2AC5",sube:"\u2286",subedot:"\u2AC3",submult:"\u2AC1",subnE:"\u2ACB",subne:"\u228A",subplus:"\u2ABF",subrarr:"\u2979",subset:"\u2282",Subset:"\u22D0",subseteq:"\u2286",subseteqq:"\u2AC5",SubsetEqual:"\u2286",subsetneq:"\u228A",subsetneqq:"\u2ACB",subsim:"\u2AC7",subsub:"\u2AD5",subsup:"\u2AD3",succapprox:"\u2AB8",succ:"\u227B",succcurlyeq:"\u227D",Succeeds:"\u227B",SucceedsEqual:"\u2AB0",SucceedsSlantEqual:"\u227D",SucceedsTilde:"\u227F",succeq:"\u2AB0",succnapprox:"\u2ABA",succneqq:"\u2AB6",succnsim:"\u22E9",succsim:"\u227F",SuchThat:"\u220B",sum:"\u2211",Sum:"\u2211",sung:"\u266A",sup1:"\xB9",sup2:"\xB2",sup3:"\xB3",sup:"\u2283",Sup:"\u22D1",supdot:"\u2ABE",supdsub:"\u2AD8",supE:"\u2AC6",supe:"\u2287",supedot:"\u2AC4",Superset:"\u2283",SupersetEqual:"\u2287",suphsol:"\u27C9",suphsub:"\u2AD7",suplarr:"\u297B",supmult:"\u2AC2",supnE:"\u2ACC",supne:"\u228B",supplus:"\u2AC0",supset:"\u2283",Supset:"\u22D1",supseteq:"\u2287",supseteqq:"\u2AC6",supsetneq:"\u228B",supsetneqq:"\u2ACC",supsim:"\u2AC8",supsub:"\u2AD4",supsup:"\u2AD6",swarhk:"\u2926",swarr:"\u2199",swArr:"\u21D9",swarrow:"\u2199",swnwar:"\u292A",szlig:"\xDF",Tab:"	",target:"\u2316",Tau:"\u03A4",tau:"\u03C4",tbrk:"\u23B4",Tcaron:"\u0164",tcaron:"\u0165",Tcedil:"\u0162",tcedil:"\u0163",Tcy:"\u0422",tcy:"\u0442",tdot:"\u20DB",telrec:"\u2315",Tfr:"\u{1D517}",tfr:"\u{1D531}",there4:"\u2234",therefore:"\u2234",Therefore:"\u2234",Theta:"\u0398",theta:"\u03B8",thetasym:"\u03D1",thetav:"\u03D1",thickapprox:"\u2248",thicksim:"\u223C",ThickSpace:"\u205F\u200A",ThinSpace:"\u2009",thinsp:"\u2009",thkap:"\u2248",thksim:"\u223C",THORN:"\xDE",thorn:"\xFE",tilde:"\u02DC",Tilde:"\u223C",TildeEqual:"\u2243",TildeFullEqual:"\u2245",TildeTilde:"\u2248",timesbar:"\u2A31",timesb:"\u22A0",times:"\xD7",timesd:"\u2A30",tint:"\u222D",toea:"\u2928",topbot:"\u2336",topcir:"\u2AF1",top:"\u22A4",Topf:"\u{1D54B}",topf:"\u{1D565}",topfork:"\u2ADA",tosa:"\u2929",tprime:"\u2034",trade:"\u2122",TRADE:"\u2122",triangle:"\u25B5",triangledown:"\u25BF",triangleleft:"\u25C3",trianglelefteq:"\u22B4",triangleq:"\u225C",triangleright:"\u25B9",trianglerighteq:"\u22B5",tridot:"\u25EC",trie:"\u225C",triminus:"\u2A3A",TripleDot:"\u20DB",triplus:"\u2A39",trisb:"\u29CD",tritime:"\u2A3B",trpezium:"\u23E2",Tscr:"\u{1D4AF}",tscr:"\u{1D4C9}",TScy:"\u0426",tscy:"\u0446",TSHcy:"\u040B",tshcy:"\u045B",Tstrok:"\u0166",tstrok:"\u0167",twixt:"\u226C",twoheadleftarrow:"\u219E",twoheadrightarrow:"\u21A0",Uacute:"\xDA",uacute:"\xFA",uarr:"\u2191",Uarr:"\u219F",uArr:"\u21D1",Uarrocir:"\u2949",Ubrcy:"\u040E",ubrcy:"\u045E",Ubreve:"\u016C",ubreve:"\u016D",Ucirc:"\xDB",ucirc:"\xFB",Ucy:"\u0423",ucy:"\u0443",udarr:"\u21C5",Udblac:"\u0170",udblac:"\u0171",udhar:"\u296E",ufisht:"\u297E",Ufr:"\u{1D518}",ufr:"\u{1D532}",Ugrave:"\xD9",ugrave:"\xF9",uHar:"\u2963",uharl:"\u21BF",uharr:"\u21BE",uhblk:"\u2580",ulcorn:"\u231C",ulcorner:"\u231C",ulcrop:"\u230F",ultri:"\u25F8",Umacr:"\u016A",umacr:"\u016B",uml:"\xA8",UnderBar:"_",UnderBrace:"\u23DF",UnderBracket:"\u23B5",UnderParenthesis:"\u23DD",Union:"\u22C3",UnionPlus:"\u228E",Uogon:"\u0172",uogon:"\u0173",Uopf:"\u{1D54C}",uopf:"\u{1D566}",UpArrowBar:"\u2912",uparrow:"\u2191",UpArrow:"\u2191",Uparrow:"\u21D1",UpArrowDownArrow:"\u21C5",updownarrow:"\u2195",UpDownArrow:"\u2195",Updownarrow:"\u21D5",UpEquilibrium:"\u296E",upharpoonleft:"\u21BF",upharpoonright:"\u21BE",uplus:"\u228E",UpperLeftArrow:"\u2196",UpperRightArrow:"\u2197",upsi:"\u03C5",Upsi:"\u03D2",upsih:"\u03D2",Upsilon:"\u03A5",upsilon:"\u03C5",UpTeeArrow:"\u21A5",UpTee:"\u22A5",upuparrows:"\u21C8",urcorn:"\u231D",urcorner:"\u231D",urcrop:"\u230E",Uring:"\u016E",uring:"\u016F",urtri:"\u25F9",Uscr:"\u{1D4B0}",uscr:"\u{1D4CA}",utdot:"\u22F0",Utilde:"\u0168",utilde:"\u0169",utri:"\u25B5",utrif:"\u25B4",uuarr:"\u21C8",Uuml:"\xDC",uuml:"\xFC",uwangle:"\u29A7",vangrt:"\u299C",varepsilon:"\u03F5",varkappa:"\u03F0",varnothing:"\u2205",varphi:"\u03D5",varpi:"\u03D6",varpropto:"\u221D",varr:"\u2195",vArr:"\u21D5",varrho:"\u03F1",varsigma:"\u03C2",varsubsetneq:"\u228A\uFE00",varsubsetneqq:"\u2ACB\uFE00",varsupsetneq:"\u228B\uFE00",varsupsetneqq:"\u2ACC\uFE00",vartheta:"\u03D1",vartriangleleft:"\u22B2",vartriangleright:"\u22B3",vBar:"\u2AE8",Vbar:"\u2AEB",vBarv:"\u2AE9",Vcy:"\u0412",vcy:"\u0432",vdash:"\u22A2",vDash:"\u22A8",Vdash:"\u22A9",VDash:"\u22AB",Vdashl:"\u2AE6",veebar:"\u22BB",vee:"\u2228",Vee:"\u22C1",veeeq:"\u225A",vellip:"\u22EE",verbar:"|",Verbar:"\u2016",vert:"|",Vert:"\u2016",VerticalBar:"\u2223",VerticalLine:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",VeryThinSpace:"\u200A",Vfr:"\u{1D519}",vfr:"\u{1D533}",vltri:"\u22B2",vnsub:"\u2282\u20D2",vnsup:"\u2283\u20D2",Vopf:"\u{1D54D}",vopf:"\u{1D567}",vprop:"\u221D",vrtri:"\u22B3",Vscr:"\u{1D4B1}",vscr:"\u{1D4CB}",vsubnE:"\u2ACB\uFE00",vsubne:"\u228A\uFE00",vsupnE:"\u2ACC\uFE00",vsupne:"\u228B\uFE00",Vvdash:"\u22AA",vzigzag:"\u299A",Wcirc:"\u0174",wcirc:"\u0175",wedbar:"\u2A5F",wedge:"\u2227",Wedge:"\u22C0",wedgeq:"\u2259",weierp:"\u2118",Wfr:"\u{1D51A}",wfr:"\u{1D534}",Wopf:"\u{1D54E}",wopf:"\u{1D568}",wp:"\u2118",wr:"\u2240",wreath:"\u2240",Wscr:"\u{1D4B2}",wscr:"\u{1D4CC}",xcap:"\u22C2",xcirc:"\u25EF",xcup:"\u22C3",xdtri:"\u25BD",Xfr:"\u{1D51B}",xfr:"\u{1D535}",xharr:"\u27F7",xhArr:"\u27FA",Xi:"\u039E",xi:"\u03BE",xlarr:"\u27F5",xlArr:"\u27F8",xmap:"\u27FC",xnis:"\u22FB",xodot:"\u2A00",Xopf:"\u{1D54F}",xopf:"\u{1D569}",xoplus:"\u2A01",xotime:"\u2A02",xrarr:"\u27F6",xrArr:"\u27F9",Xscr:"\u{1D4B3}",xscr:"\u{1D4CD}",xsqcup:"\u2A06",xuplus:"\u2A04",xutri:"\u25B3",xvee:"\u22C1",xwedge:"\u22C0",Yacute:"\xDD",yacute:"\xFD",YAcy:"\u042F",yacy:"\u044F",Ycirc:"\u0176",ycirc:"\u0177",Ycy:"\u042B",ycy:"\u044B",yen:"\xA5",Yfr:"\u{1D51C}",yfr:"\u{1D536}",YIcy:"\u0407",yicy:"\u0457",Yopf:"\u{1D550}",yopf:"\u{1D56A}",Yscr:"\u{1D4B4}",yscr:"\u{1D4CE}",YUcy:"\u042E",yucy:"\u044E",yuml:"\xFF",Yuml:"\u0178",Zacute:"\u0179",zacute:"\u017A",Zcaron:"\u017D",zcaron:"\u017E",Zcy:"\u0417",zcy:"\u0437",Zdot:"\u017B",zdot:"\u017C",zeetrf:"\u2128",ZeroWidthSpace:"\u200B",Zeta:"\u0396",zeta:"\u03B6",zfr:"\u{1D537}",Zfr:"\u2128",ZHcy:"\u0416",zhcy:"\u0436",zigrarr:"\u21DD",zopf:"\u{1D56B}",Zopf:"\u2124",Zscr:"\u{1D4B5}",zscr:"\u{1D4CF}",zwj:"\u200D",zwnj:"\u200C"}});var DE=_((RCe,z$)=>{"use strict";z$.exports=W$()});var pm=_((DCe,K$)=>{K$.exports=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/});var X$=_((OCe,Q$)=>{"use strict";var Y$={};function Die(t){var e,r,n=Y$[t];if(n)return n;for(n=Y$[t]=[],e=0;e<128;e++)r=String.fromCharCode(e),/^[0-9a-z]$/i.test(r)?n.push(r):n.push("%"+("0"+e.toString(16).toUpperCase()).slice(-2));for(e=0;e<t.length;e++)n[t.charCodeAt(e)]=t[e];return n}function hm(t,e,r){var n,i,o,s,a,c="";for(typeof e!="string"&&(r=e,e=hm.defaultChars),typeof r=="undefined"&&(r=!0),a=Die(e),n=0,i=t.length;n<i;n++){if(o=t.charCodeAt(n),r&&o===37&&n+2<i&&/^[0-9a-f]{2}$/i.test(t.slice(n+1,n+3))){c+=t.slice(n,n+3),n+=2;continue}if(o<128){c+=a[o];continue}if(o>=55296&&o<=57343){if(o>=55296&&o<=56319&&n+1<i&&(s=t.charCodeAt(n+1),s>=56320&&s<=57343)){c+=encodeURIComponent(t[n]+t[n+1]),n++;continue}c+="%EF%BF%BD";continue}c+=encodeURIComponent(t[n])}return c}hm.defaultChars=";/?:@&=+$,-_.!~*'()#";hm.componentChars="-_.!~*'()";Q$.exports=hm});var ej=_((NCe,Z$)=>{"use strict";var J$={};function Oie(t){var e,r,n=J$[t];if(n)return n;for(n=J$[t]=[],e=0;e<128;e++)r=String.fromCharCode(e),n.push(r);for(e=0;e<t.length;e++)r=t.charCodeAt(e),n[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2);return n}function mm(t,e){var r;return typeof e!="string"&&(e=mm.defaultChars),r=Oie(e),t.replace(/(%[a-f0-9]{2})+/gi,function(n){var i,o,s,a,c,l,u,d="";for(i=0,o=n.length;i<o;i+=3){if(s=parseInt(n.slice(i+1,i+3),16),s<128){d+=r[s];continue}if((s&224)==192&&i+3<o&&(a=parseInt(n.slice(i+4,i+6),16),(a&192)==128)){u=s<<6&1984|a&63,u<128?d+="\uFFFD\uFFFD":d+=String.fromCharCode(u),i+=3;continue}if((s&240)==224&&i+6<o&&(a=parseInt(n.slice(i+4,i+6),16),c=parseInt(n.slice(i+7,i+9),16),(a&192)==128&&(c&192)==128)){u=s<<12&61440|a<<6&4032|c&63,u<2048||u>=55296&&u<=57343?d+="\uFFFD\uFFFD\uFFFD":d+=String.fromCharCode(u),i+=6;continue}if((s&248)==240&&i+9<o&&(a=parseInt(n.slice(i+4,i+6),16),c=parseInt(n.slice(i+7,i+9),16),l=parseInt(n.slice(i+10,i+12),16),(a&192)==128&&(c&192)==128&&(l&192)==128)){u=s<<18&1835008|a<<12&258048|c<<6&4032|l&63,u<65536||u>1114111?d+="\uFFFD\uFFFD\uFFFD\uFFFD":(u-=65536,d+=String.fromCharCode(55296+(u>>10),56320+(u&1023))),i+=9;continue}d+="\uFFFD"}return d})}mm.defaultChars=";/?:@&=+$,#";mm.componentChars="";Z$.exports=mm});var rj=_((LCe,tj)=>{"use strict";tj.exports=function(e){var r="";return r+=e.protocol||"",r+=e.slashes?"//":"",r+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?r+="["+e.hostname+"]":r+=e.hostname||"",r+=e.port?":"+e.port:"",r+=e.pathname||"",r+=e.search||"",r+=e.hash||"",r}});var lj=_((FCe,cj)=>{"use strict";function gm(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var Nie=/^([a-z0-9.+-]+:)/i,Lie=/:[0-9]*$/,Fie=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Mie=["<",">",'"',"`"," ","\r",`
`,"	"],qie=["{","}","|","\\","^","`"].concat(Mie),$ie=["'"].concat(qie),nj=["%","/","?",";","#"].concat($ie),ij=["/","?","#"],jie=255,oj=/^[+a-z0-9A-Z_-]{0,63}$/,Uie=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,sj={javascript:!0,"javascript:":!0},aj={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function Bie(t,e){if(t&&t instanceof gm)return t;var r=new gm;return r.parse(t,e),r}gm.prototype.parse=function(t,e){var r,n,i,o,s,a=t;if(a=a.trim(),!e&&t.split("#").length===1){var c=Fie.exec(a);if(c)return this.pathname=c[1],c[2]&&(this.search=c[2]),this}var l=Nie.exec(a);if(l&&(l=l[0],i=l.toLowerCase(),this.protocol=l,a=a.substr(l.length)),(e||l||a.match(/^\/\/[^@\/]+@[^@\/]+/))&&(s=a.substr(0,2)==="//",s&&!(l&&sj[l])&&(a=a.substr(2),this.slashes=!0)),!sj[l]&&(s||l&&!aj[l])){var u=-1;for(r=0;r<ij.length;r++)o=a.indexOf(ij[r]),o!==-1&&(u===-1||o<u)&&(u=o);var d,f;for(u===-1?f=a.lastIndexOf("@"):f=a.lastIndexOf("@",u),f!==-1&&(d=a.slice(0,f),a=a.slice(f+1),this.auth=d),u=-1,r=0;r<nj.length;r++)o=a.indexOf(nj[r]),o!==-1&&(u===-1||o<u)&&(u=o);u===-1&&(u=a.length),a[u-1]===":"&&u--;var p=a.slice(0,u);a=a.slice(u),this.parseHost(p),this.hostname=this.hostname||"";var h=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!h){var m=this.hostname.split(/\./);for(r=0,n=m.length;r<n;r++){var g=m[r];if(!!g&&!g.match(oj)){for(var v="",y=0,C=g.length;y<C;y++)g.charCodeAt(y)>127?v+="x":v+=g[y];if(!v.match(oj)){var w=m.slice(0,r),b=m.slice(r+1),E=g.match(Uie);E&&(w.push(E[1]),b.unshift(E[2])),b.length&&(a=b.join(".")+a),this.hostname=w.join(".");break}}}}this.hostname.length>jie&&(this.hostname=""),h&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var S=a.indexOf("#");S!==-1&&(this.hash=a.substr(S),a=a.slice(0,S));var x=a.indexOf("?");return x!==-1&&(this.search=a.substr(x),a=a.slice(0,x)),a&&(this.pathname=a),aj[i]&&this.hostname&&!this.pathname&&(this.pathname=""),this};gm.prototype.parseHost=function(t){var e=Lie.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};cj.exports=Bie});var OE=_((MCe,Mu)=>{"use strict";Mu.exports.encode=X$();Mu.exports.decode=ej();Mu.exports.format=rj();Mu.exports.parse=lj()});var NE=_((qCe,uj)=>{uj.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/});var LE=_(($Ce,dj)=>{dj.exports=/[\0-\x1F\x7F-\x9F]/});var pj=_((jCe,fj)=>{fj.exports=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/});var FE=_((UCe,hj)=>{hj.exports=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/});var mj=_(cc=>{"use strict";cc.Any=NE();cc.Cc=LE();cc.Cf=pj();cc.P=pm();cc.Z=FE()});var Oe=_(wt=>{"use strict";function Hie(t){return Object.prototype.toString.call(t)}function Vie(t){return Hie(t)==="[object String]"}var Gie=Object.prototype.hasOwnProperty;function gj(t,e){return Gie.call(t,e)}function Wie(t){var e=Array.prototype.slice.call(arguments,1);return e.forEach(function(r){if(!!r){if(typeof r!="object")throw new TypeError(r+"must be object");Object.keys(r).forEach(function(n){t[n]=r[n]})}}),t}function zie(t,e,r){return[].concat(t.slice(0,e),r,t.slice(e+1))}function vj(t){return!(t>=55296&&t<=57343||t>=64976&&t<=65007||(t&65535)==65535||(t&65535)==65534||t>=0&&t<=8||t===11||t>=14&&t<=31||t>=127&&t<=159||t>1114111)}function yj(t){if(t>65535){t-=65536;var e=55296+(t>>10),r=56320+(t&1023);return String.fromCharCode(e,r)}return String.fromCharCode(t)}var wj=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,Kie=/&([a-z#][a-z0-9]{1,31});/gi,Yie=new RegExp(wj.source+"|"+Kie.source,"gi"),Qie=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,Cj=DE();function Xie(t,e){var r=0;return gj(Cj,e)?Cj[e]:e.charCodeAt(0)===35&&Qie.test(e)&&(r=e[1].toLowerCase()==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10),vj(r))?yj(r):t}function Jie(t){return t.indexOf("\\")<0?t:t.replace(wj,"$1")}function Zie(t){return t.indexOf("\\")<0&&t.indexOf("&")<0?t:t.replace(Yie,function(e,r,n){return r||Xie(e,n)})}var eoe=/[&<>"]/,toe=/[&<>"]/g,roe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function noe(t){return roe[t]}function ioe(t){return eoe.test(t)?t.replace(toe,noe):t}var ooe=/[.?*+^$[\]\\(){}|-]/g;function soe(t){return t.replace(ooe,"\\$&")}function aoe(t){switch(t){case 9:case 32:return!0}return!1}function coe(t){if(t>=8192&&t<=8202)return!0;switch(t){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}var loe=pm();function uoe(t){return loe.test(t)}function doe(t){switch(t){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function foe(t){return t=t.trim().replace(/\s+/g," "),"\u1E9E".toLowerCase()==="\u1E7E"&&(t=t.replace(/ẞ/g,"\xDF")),t.toLowerCase().toUpperCase()}wt.lib={};wt.lib.mdurl=OE();wt.lib.ucmicro=mj();wt.assign=Wie;wt.isString=Vie;wt.has=gj;wt.unescapeMd=Jie;wt.unescapeAll=Zie;wt.isValidEntityCode=vj;wt.fromCodePoint=yj;wt.escapeHtml=ioe;wt.arrayReplaceAt=zie;wt.isSpace=aoe;wt.isWhiteSpace=coe;wt.isMdAsciiPunct=doe;wt.isPunctChar=uoe;wt.escapeRE=soe;wt.normalizeReference=foe});var Ej=_((VCe,bj)=>{"use strict";bj.exports=function(e,r,n){var i,o,s,a,c=-1,l=e.posMax,u=e.pos;for(e.pos=r+1,i=1;e.pos<l;){if(s=e.src.charCodeAt(e.pos),s===93&&(i--,i===0)){o=!0;break}if(a=e.pos,e.md.inline.skipToken(e),s===91){if(a===e.pos-1)i++;else if(n)return e.pos=u,-1}}return o&&(c=e.pos),e.pos=u,c}});var xj=_((GCe,Sj)=>{"use strict";var _j=Oe().unescapeAll;Sj.exports=function(e,r,n){var i,o,s=0,a=r,c={ok:!1,pos:0,lines:0,str:""};if(e.charCodeAt(r)===60){for(r++;r<n;){if(i=e.charCodeAt(r),i===10||i===60)return c;if(i===62)return c.pos=r+1,c.str=_j(e.slice(a+1,r)),c.ok=!0,c;if(i===92&&r+1<n){r+=2;continue}r++}return c}for(o=0;r<n&&(i=e.charCodeAt(r),!(i===32||i<32||i===127));){if(i===92&&r+1<n){if(e.charCodeAt(r+1)===32)break;r+=2;continue}if(i===40&&(o++,o>32))return c;if(i===41){if(o===0)break;o--}r++}return a===r||o!==0||(c.str=_j(e.slice(a,r)),c.lines=s,c.pos=r,c.ok=!0),c}});var Pj=_((WCe,kj)=>{"use strict";var poe=Oe().unescapeAll;kj.exports=function(e,r,n){var i,o,s=0,a=r,c={ok:!1,pos:0,lines:0,str:""};if(r>=n||(o=e.charCodeAt(r),o!==34&&o!==39&&o!==40))return c;for(r++,o===40&&(o=41);r<n;){if(i=e.charCodeAt(r),i===o)return c.pos=r+1,c.lines=s,c.str=poe(e.slice(a+1,r)),c.ok=!0,c;if(i===40&&o===41)return c;i===10?s++:i===92&&r+1<n&&(r++,e.charCodeAt(r)===10&&s++),r++}return c}});var Ij=_(vm=>{"use strict";vm.parseLinkLabel=Ej();vm.parseLinkDestination=xj();vm.parseLinkTitle=Pj()});var Tj=_((KCe,Aj)=>{"use strict";var hoe=Oe().assign,moe=Oe().unescapeAll,Ss=Oe().escapeHtml,Yn={};Yn.code_inline=function(t,e,r,n,i){var o=t[e];return"<code"+i.renderAttrs(o)+">"+Ss(t[e].content)+"</code>"};Yn.code_block=function(t,e,r,n,i){var o=t[e];return"<pre"+i.renderAttrs(o)+"><code>"+Ss(t[e].content)+`</code></pre>
`};Yn.fence=function(t,e,r,n,i){var o=t[e],s=o.info?moe(o.info).trim():"",a="",c="",l,u,d,f,p;return s&&(d=s.split(/(\s+)/g),a=d[0],c=d.slice(2).join("")),r.highlight?l=r.highlight(o.content,a,c)||Ss(o.content):l=Ss(o.content),l.indexOf("<pre")===0?l+`
`:s?(u=o.attrIndex("class"),f=o.attrs?o.attrs.slice():[],u<0?f.push(["class",r.langPrefix+a]):(f[u]=f[u].slice(),f[u][1]+=" "+r.langPrefix+a),p={attrs:f},"<pre><code"+i.renderAttrs(p)+">"+l+`</code></pre>
`):"<pre><code"+i.renderAttrs(o)+">"+l+`</code></pre>
`};Yn.image=function(t,e,r,n,i){var o=t[e];return o.attrs[o.attrIndex("alt")][1]=i.renderInlineAsText(o.children,r,n),i.renderToken(t,e,r)};Yn.hardbreak=function(t,e,r){return r.xhtmlOut?`<br />
`:`<br>
`};Yn.softbreak=function(t,e,r){return r.breaks?r.xhtmlOut?`<br />
`:`<br>
`:`
`};Yn.text=function(t,e){return Ss(t[e].content)};Yn.html_block=function(t,e){return t[e].content};Yn.html_inline=function(t,e){return t[e].content};function lc(){this.rules=hoe({},Yn)}lc.prototype.renderAttrs=function(e){var r,n,i;if(!e.attrs)return"";for(i="",r=0,n=e.attrs.length;r<n;r++)i+=" "+Ss(e.attrs[r][0])+'="'+Ss(e.attrs[r][1])+'"';return i};lc.prototype.renderToken=function(e,r,n){var i,o="",s=!1,a=e[r];return a.hidden?"":(a.block&&a.nesting!==-1&&r&&e[r-1].hidden&&(o+=`
`),o+=(a.nesting===-1?"</":"<")+a.tag,o+=this.renderAttrs(a),a.nesting===0&&n.xhtmlOut&&(o+=" /"),a.block&&(s=!0,a.nesting===1&&r+1<e.length&&(i=e[r+1],(i.type==="inline"||i.hidden||i.nesting===-1&&i.tag===a.tag)&&(s=!1))),o+=s?`>
`:">",o)};lc.prototype.renderInline=function(t,e,r){for(var n,i="",o=this.rules,s=0,a=t.length;s<a;s++)n=t[s].type,typeof o[n]!="undefined"?i+=o[n](t,s,e,r,this):i+=this.renderToken(t,s,e);return i};lc.prototype.renderInlineAsText=function(t,e,r){for(var n="",i=0,o=t.length;i<o;i++)t[i].type==="text"?n+=t[i].content:t[i].type==="image"?n+=this.renderInlineAsText(t[i].children,e,r):t[i].type==="softbreak"&&(n+=`
`);return n};lc.prototype.render=function(t,e,r){var n,i,o,s="",a=this.rules;for(n=0,i=t.length;n<i;n++)o=t[n].type,o==="inline"?s+=this.renderInline(t[n].children,e,r):typeof a[o]!="undefined"?s+=a[t[n].type](t,n,e,r,this):s+=this.renderToken(t,n,e,r);return s};Aj.exports=lc});var ym=_((YCe,Rj)=>{"use strict";function bn(){this.__rules__=[],this.__cache__=null}bn.prototype.__find__=function(t){for(var e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===t)return e;return-1};bn.prototype.__compile__=function(){var t=this,e=[""];t.__rules__.forEach(function(r){!r.enabled||r.alt.forEach(function(n){e.indexOf(n)<0&&e.push(n)})}),t.__cache__={},e.forEach(function(r){t.__cache__[r]=[],t.__rules__.forEach(function(n){!n.enabled||r&&n.alt.indexOf(r)<0||t.__cache__[r].push(n.fn)})})};bn.prototype.at=function(t,e,r){var n=this.__find__(t),i=r||{};if(n===-1)throw new Error("Parser rule not found: "+t);this.__rules__[n].fn=e,this.__rules__[n].alt=i.alt||[],this.__cache__=null};bn.prototype.before=function(t,e,r,n){var i=this.__find__(t),o=n||{};if(i===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(i,0,{name:e,enabled:!0,fn:r,alt:o.alt||[]}),this.__cache__=null};bn.prototype.after=function(t,e,r,n){var i=this.__find__(t),o=n||{};if(i===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(i+1,0,{name:e,enabled:!0,fn:r,alt:o.alt||[]}),this.__cache__=null};bn.prototype.push=function(t,e,r){var n=r||{};this.__rules__.push({name:t,enabled:!0,fn:e,alt:n.alt||[]}),this.__cache__=null};bn.prototype.enable=function(t,e){Array.isArray(t)||(t=[t]);var r=[];return t.forEach(function(n){var i=this.__find__(n);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+n)}this.__rules__[i].enabled=!0,r.push(n)},this),this.__cache__=null,r};bn.prototype.enableOnly=function(t,e){Array.isArray(t)||(t=[t]),this.__rules__.forEach(function(r){r.enabled=!1}),this.enable(t,e)};bn.prototype.disable=function(t,e){Array.isArray(t)||(t=[t]);var r=[];return t.forEach(function(n){var i=this.__find__(n);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+n)}this.__rules__[i].enabled=!1,r.push(n)},this),this.__cache__=null,r};bn.prototype.getRules=function(t){return this.__cache__===null&&this.__compile__(),this.__cache__[t]||[]};Rj.exports=bn});var Oj=_((QCe,Dj)=>{"use strict";var goe=/\r\n?|\n/g,voe=/\0/g;Dj.exports=function(e){var r;r=e.src.replace(goe,`
`),r=r.replace(voe,"\uFFFD"),e.src=r}});var Lj=_((XCe,Nj)=>{"use strict";Nj.exports=function(e){var r;e.inlineMode?(r=new e.Token("inline","",0),r.content=e.src,r.map=[0,1],r.children=[],e.tokens.push(r)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}});var Mj=_((JCe,Fj)=>{"use strict";Fj.exports=function(e){var r=e.tokens,n,i,o;for(i=0,o=r.length;i<o;i++)n=r[i],n.type==="inline"&&e.md.inline.parse(n.content,e.md,e.env,n.children)}});var $j=_((ZCe,qj)=>{"use strict";var yoe=Oe().arrayReplaceAt;function woe(t){return/^<a[>\s]/i.test(t)}function Coe(t){return/^<\/a\s*>/i.test(t)}qj.exports=function(e){var r,n,i,o,s,a,c,l,u,d,f,p,h,m,g,v,y=e.tokens,C;if(!!e.md.options.linkify){for(n=0,i=y.length;n<i;n++)if(!(y[n].type!=="inline"||!e.md.linkify.pretest(y[n].content)))for(o=y[n].children,h=0,r=o.length-1;r>=0;r--){if(a=o[r],a.type==="link_close"){for(r--;o[r].level!==a.level&&o[r].type!=="link_open";)r--;continue}if(a.type==="html_inline"&&(woe(a.content)&&h>0&&h--,Coe(a.content)&&h++),!(h>0)&&a.type==="text"&&e.md.linkify.test(a.content)){for(u=a.content,C=e.md.linkify.match(u),c=[],p=a.level,f=0,l=0;l<C.length;l++)m=C[l].url,g=e.md.normalizeLink(m),!!e.md.validateLink(g)&&(v=C[l].text,C[l].schema?C[l].schema==="mailto:"&&!/^mailto:/i.test(v)?v=e.md.normalizeLinkText("mailto:"+v).replace(/^mailto:/,""):v=e.md.normalizeLinkText(v):v=e.md.normalizeLinkText("http://"+v).replace(/^http:\/\//,""),d=C[l].index,d>f&&(s=new e.Token("text","",0),s.content=u.slice(f,d),s.level=p,c.push(s)),s=new e.Token("link_open","a",1),s.attrs=[["href",g]],s.level=p++,s.markup="linkify",s.info="auto",c.push(s),s=new e.Token("text","",0),s.content=v,s.level=p,c.push(s),s=new e.Token("link_close","a",-1),s.level=--p,s.markup="linkify",s.info="auto",c.push(s),f=C[l].lastIndex);f<u.length&&(s=new e.Token("text","",0),s.content=u.slice(f),s.level=p,c.push(s)),y[n].children=o=yoe(o,r,c)}}}}});var Bj=_((ebe,Uj)=>{"use strict";var jj=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,boe=/\((c|tm|r|p)\)/i,Eoe=/\((c|tm|r|p)\)/ig,_oe={c:"\xA9",r:"\xAE",p:"\xA7",tm:"\u2122"};function Soe(t,e){return _oe[e.toLowerCase()]}function xoe(t){var e,r,n=0;for(e=t.length-1;e>=0;e--)r=t[e],r.type==="text"&&!n&&(r.content=r.content.replace(Eoe,Soe)),r.type==="link_open"&&r.info==="auto"&&n--,r.type==="link_close"&&r.info==="auto"&&n++}function koe(t){var e,r,n=0;for(e=t.length-1;e>=0;e--)r=t[e],r.type==="text"&&!n&&jj.test(r.content)&&(r.content=r.content.replace(/\+-/g,"\xB1").replace(/\.{2,}/g,"\u2026").replace(/([?!])…/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1\u2014").replace(/(^|\s)--(?=\s|$)/mg,"$1\u2013").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1\u2013")),r.type==="link_open"&&r.info==="auto"&&n--,r.type==="link_close"&&r.info==="auto"&&n++}Uj.exports=function(e){var r;if(!!e.md.options.typographer)for(r=e.tokens.length-1;r>=0;r--)e.tokens[r].type==="inline"&&(boe.test(e.tokens[r].content)&&xoe(e.tokens[r].children),jj.test(e.tokens[r].content)&&koe(e.tokens[r].children))}});var Yj=_((tbe,Kj)=>{"use strict";var Hj=Oe().isWhiteSpace,Vj=Oe().isPunctChar,Gj=Oe().isMdAsciiPunct,Poe=/['"]/,Wj=/['"]/g,zj="\u2019";function wm(t,e,r){return t.substr(0,e)+r+t.substr(e+1)}function Ioe(t,e){var r,n,i,o,s,a,c,l,u,d,f,p,h,m,g,v,y,C,w,b,E;for(w=[],r=0;r<t.length;r++){for(n=t[r],c=t[r].level,y=w.length-1;y>=0&&!(w[y].level<=c);y--);if(w.length=y+1,n.type!=="text")continue;i=n.content,s=0,a=i.length;e:for(;s<a&&(Wj.lastIndex=s,o=Wj.exec(i),!!o);){if(g=v=!0,s=o.index+1,C=o[0]==="'",u=32,o.index-1>=0)u=i.charCodeAt(o.index-1);else for(y=r-1;y>=0&&!(t[y].type==="softbreak"||t[y].type==="hardbreak");y--)if(!!t[y].content){u=t[y].content.charCodeAt(t[y].content.length-1);break}if(d=32,s<a)d=i.charCodeAt(s);else for(y=r+1;y<t.length&&!(t[y].type==="softbreak"||t[y].type==="hardbreak");y++)if(!!t[y].content){d=t[y].content.charCodeAt(0);break}if(f=Gj(u)||Vj(String.fromCharCode(u)),p=Gj(d)||Vj(String.fromCharCode(d)),h=Hj(u),m=Hj(d),m?g=!1:p&&(h||f||(g=!1)),h?v=!1:f&&(m||p||(v=!1)),d===34&&o[0]==='"'&&u>=48&&u<=57&&(v=g=!1),g&&v&&(g=f,v=p),!g&&!v){C&&(n.content=wm(n.content,o.index,zj));continue}if(v){for(y=w.length-1;y>=0&&(l=w[y],!(w[y].level<c));y--)if(l.single===C&&w[y].level===c){l=w[y],C?(b=e.md.options.quotes[2],E=e.md.options.quotes[3]):(b=e.md.options.quotes[0],E=e.md.options.quotes[1]),n.content=wm(n.content,o.index,E),t[l.token].content=wm(t[l.token].content,l.pos,b),s+=E.length-1,l.token===r&&(s+=b.length-1),i=n.content,a=i.length,w.length=y;continue e}}g?w.push({token:r,pos:o.index,single:C,level:c}):v&&C&&(n.content=wm(n.content,o.index,zj))}}}Kj.exports=function(e){var r;if(!!e.md.options.typographer)for(r=e.tokens.length-1;r>=0;r--)e.tokens[r].type!=="inline"||!Poe.test(e.tokens[r].content)||Ioe(e.tokens[r].children,e)}});var Cm=_((rbe,Qj)=>{"use strict";function uc(t,e,r){this.type=t,this.tag=e,this.attrs=null,this.map=null,this.nesting=r,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}uc.prototype.attrIndex=function(e){var r,n,i;if(!this.attrs)return-1;for(r=this.attrs,n=0,i=r.length;n<i;n++)if(r[n][0]===e)return n;return-1};uc.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]};uc.prototype.attrSet=function(e,r){var n=this.attrIndex(e),i=[e,r];n<0?this.attrPush(i):this.attrs[n]=i};uc.prototype.attrGet=function(e){var r=this.attrIndex(e),n=null;return r>=0&&(n=this.attrs[r][1]),n};uc.prototype.attrJoin=function(e,r){var n=this.attrIndex(e);n<0?this.attrPush([e,r]):this.attrs[n][1]=this.attrs[n][1]+" "+r};Qj.exports=uc});var Zj=_((nbe,Jj)=>{"use strict";var Aoe=Cm();function Xj(t,e,r){this.src=t,this.env=r,this.tokens=[],this.inlineMode=!1,this.md=e}Xj.prototype.Token=Aoe;Jj.exports=Xj});var tU=_((ibe,eU)=>{"use strict";var Toe=ym(),ME=[["normalize",Oj()],["block",Lj()],["inline",Mj()],["linkify",$j()],["replacements",Bj()],["smartquotes",Yj()]];function qE(){this.ruler=new Toe;for(var t=0;t<ME.length;t++)this.ruler.push(ME[t][0],ME[t][1])}qE.prototype.process=function(t){var e,r,n;for(n=this.ruler.getRules(""),e=0,r=n.length;e<r;e++)n[e](t)};qE.prototype.State=Zj();eU.exports=qE});var iU=_((obe,nU)=>{"use strict";var $E=Oe().isSpace;function jE(t,e){var r=t.bMarks[e]+t.tShift[e],n=t.eMarks[e];return t.src.substr(r,n-r)}function rU(t){var e=[],r=0,n=t.length,i,o=!1,s=0,a="";for(i=t.charCodeAt(r);r<n;)i===124&&(o?(a+=t.substring(s,r-1),s=r):(e.push(a+t.substring(s,r)),a="",s=r+1)),o=i===92,r++,i=t.charCodeAt(r);return e.push(a+t.substring(s)),e}nU.exports=function(e,r,n,i){var o,s,a,c,l,u,d,f,p,h,m,g,v,y,C,w,b,E;if(r+2>n||(u=r+1,e.sCount[u]<e.blkIndent)||e.sCount[u]-e.blkIndent>=4||(a=e.bMarks[u]+e.tShift[u],a>=e.eMarks[u])||(b=e.src.charCodeAt(a++),b!==124&&b!==45&&b!==58)||a>=e.eMarks[u]||(E=e.src.charCodeAt(a++),E!==124&&E!==45&&E!==58&&!$E(E))||b===45&&$E(E))return!1;for(;a<e.eMarks[u];){if(o=e.src.charCodeAt(a),o!==124&&o!==45&&o!==58&&!$E(o))return!1;a++}for(s=jE(e,r+1),d=s.split("|"),h=[],c=0;c<d.length;c++){if(m=d[c].trim(),!m){if(c===0||c===d.length-1)continue;return!1}if(!/^:?-+:?$/.test(m))return!1;m.charCodeAt(m.length-1)===58?h.push(m.charCodeAt(0)===58?"center":"right"):m.charCodeAt(0)===58?h.push("left"):h.push("")}if(s=jE(e,r).trim(),s.indexOf("|")===-1||e.sCount[r]-e.blkIndent>=4||(d=rU(s),d.length&&d[0]===""&&d.shift(),d.length&&d[d.length-1]===""&&d.pop(),f=d.length,f===0||f!==h.length))return!1;if(i)return!0;for(y=e.parentType,e.parentType="table",w=e.md.block.ruler.getRules("blockquote"),p=e.push("table_open","table",1),p.map=g=[r,0],p=e.push("thead_open","thead",1),p.map=[r,r+1],p=e.push("tr_open","tr",1),p.map=[r,r+1],c=0;c<d.length;c++)p=e.push("th_open","th",1),h[c]&&(p.attrs=[["style","text-align:"+h[c]]]),p=e.push("inline","",0),p.content=d[c].trim(),p.children=[],p=e.push("th_close","th",-1);for(p=e.push("tr_close","tr",-1),p=e.push("thead_close","thead",-1),u=r+2;u<n&&!(e.sCount[u]<e.blkIndent);u++){for(C=!1,c=0,l=w.length;c<l;c++)if(w[c](e,u,n,!0)){C=!0;break}if(C||(s=jE(e,u).trim(),!s)||e.sCount[u]-e.blkIndent>=4)break;for(d=rU(s),d.length&&d[0]===""&&d.shift(),d.length&&d[d.length-1]===""&&d.pop(),u===r+2&&(p=e.push("tbody_open","tbody",1),p.map=v=[r+2,0]),p=e.push("tr_open","tr",1),p.map=[u,u+1],c=0;c<f;c++)p=e.push("td_open","td",1),h[c]&&(p.attrs=[["style","text-align:"+h[c]]]),p=e.push("inline","",0),p.content=d[c]?d[c].trim():"",p.children=[],p=e.push("td_close","td",-1);p=e.push("tr_close","tr",-1)}return v&&(p=e.push("tbody_close","tbody",-1),v[1]=u),p=e.push("table_close","table",-1),g[1]=u,e.parentType=y,e.line=u,!0}});var sU=_((sbe,oU)=>{"use strict";oU.exports=function(e,r,n){var i,o,s;if(e.sCount[r]-e.blkIndent<4)return!1;for(o=i=r+1;i<n;){if(e.isEmpty(i)){i++;continue}if(e.sCount[i]-e.blkIndent>=4){i++,o=i;continue}break}return e.line=o,s=e.push("code_block","code",0),s.content=e.getLines(r,o,4+e.blkIndent,!1)+`
`,s.map=[r,e.line],!0}});var cU=_((abe,aU)=>{"use strict";aU.exports=function(e,r,n,i){var o,s,a,c,l,u,d,f=!1,p=e.bMarks[r]+e.tShift[r],h=e.eMarks[r];if(e.sCount[r]-e.blkIndent>=4||p+3>h||(o=e.src.charCodeAt(p),o!==126&&o!==96)||(l=p,p=e.skipChars(p,o),s=p-l,s<3)||(d=e.src.slice(l,p),a=e.src.slice(p,h),o===96&&a.indexOf(String.fromCharCode(o))>=0))return!1;if(i)return!0;for(c=r;c++,!(c>=n||(p=l=e.bMarks[c]+e.tShift[c],h=e.eMarks[c],p<h&&e.sCount[c]<e.blkIndent));)if(e.src.charCodeAt(p)===o&&!(e.sCount[c]-e.blkIndent>=4)&&(p=e.skipChars(p,o),!(p-l<s)&&(p=e.skipSpaces(p),!(p<h)))){f=!0;break}return s=e.sCount[r],e.line=c+(f?1:0),u=e.push("fence","code",0),u.info=a,u.content=e.getLines(r+1,c,s,!0),u.markup=d,u.map=[r,e.line],!0}});var dU=_((cbe,uU)=>{"use strict";var lU=Oe().isSpace;uU.exports=function(e,r,n,i){var o,s,a,c,l,u,d,f,p,h,m,g,v,y,C,w,b,E,S,x,T=e.lineMax,R=e.bMarks[r]+e.tShift[r],q=e.eMarks[r];if(e.sCount[r]-e.blkIndent>=4||e.src.charCodeAt(R++)!==62)return!1;if(i)return!0;for(c=p=e.sCount[r]+1,e.src.charCodeAt(R)===32?(R++,c++,p++,o=!1,w=!0):e.src.charCodeAt(R)===9?(w=!0,(e.bsCount[r]+p)%4==3?(R++,c++,p++,o=!1):o=!0):w=!1,h=[e.bMarks[r]],e.bMarks[r]=R;R<q&&(s=e.src.charCodeAt(R),lU(s));){s===9?p+=4-(p+e.bsCount[r]+(o?1:0))%4:p++;R++}for(m=[e.bsCount[r]],e.bsCount[r]=e.sCount[r]+1+(w?1:0),u=R>=q,y=[e.sCount[r]],e.sCount[r]=p-c,C=[e.tShift[r]],e.tShift[r]=R-e.bMarks[r],E=e.md.block.ruler.getRules("blockquote"),v=e.parentType,e.parentType="blockquote",f=r+1;f<n&&(x=e.sCount[f]<e.blkIndent,R=e.bMarks[f]+e.tShift[f],q=e.eMarks[f],!(R>=q));f++){if(e.src.charCodeAt(R++)===62&&!x){for(c=p=e.sCount[f]+1,e.src.charCodeAt(R)===32?(R++,c++,p++,o=!1,w=!0):e.src.charCodeAt(R)===9?(w=!0,(e.bsCount[f]+p)%4==3?(R++,c++,p++,o=!1):o=!0):w=!1,h.push(e.bMarks[f]),e.bMarks[f]=R;R<q&&(s=e.src.charCodeAt(R),lU(s));){s===9?p+=4-(p+e.bsCount[f]+(o?1:0))%4:p++;R++}u=R>=q,m.push(e.bsCount[f]),e.bsCount[f]=e.sCount[f]+1+(w?1:0),y.push(e.sCount[f]),e.sCount[f]=p-c,C.push(e.tShift[f]),e.tShift[f]=R-e.bMarks[f];continue}if(u)break;for(b=!1,a=0,l=E.length;a<l;a++)if(E[a](e,f,n,!0)){b=!0;break}if(b){e.lineMax=f,e.blkIndent!==0&&(h.push(e.bMarks[f]),m.push(e.bsCount[f]),C.push(e.tShift[f]),y.push(e.sCount[f]),e.sCount[f]-=e.blkIndent);break}h.push(e.bMarks[f]),m.push(e.bsCount[f]),C.push(e.tShift[f]),y.push(e.sCount[f]),e.sCount[f]=-1}for(g=e.blkIndent,e.blkIndent=0,S=e.push("blockquote_open","blockquote",1),S.markup=">",S.map=d=[r,0],e.md.block.tokenize(e,r,f),S=e.push("blockquote_close","blockquote",-1),S.markup=">",e.lineMax=T,e.parentType=v,d[1]=e.line,a=0;a<C.length;a++)e.bMarks[a+r]=h[a],e.tShift[a+r]=C[a],e.sCount[a+r]=y[a],e.bsCount[a+r]=m[a];return e.blkIndent=g,!0}});var pU=_((lbe,fU)=>{"use strict";var Roe=Oe().isSpace;fU.exports=function(e,r,n,i){var o,s,a,c,l=e.bMarks[r]+e.tShift[r],u=e.eMarks[r];if(e.sCount[r]-e.blkIndent>=4||(o=e.src.charCodeAt(l++),o!==42&&o!==45&&o!==95))return!1;for(s=1;l<u;){if(a=e.src.charCodeAt(l++),a!==o&&!Roe(a))return!1;a===o&&s++}return s<3?!1:(i||(e.line=r+1,c=e.push("hr","hr",0),c.map=[r,e.line],c.markup=Array(s+1).join(String.fromCharCode(o))),!0)}});var yU=_((ube,vU)=>{"use strict";var hU=Oe().isSpace;function mU(t,e){var r,n,i,o;return n=t.bMarks[e]+t.tShift[e],i=t.eMarks[e],r=t.src.charCodeAt(n++),r!==42&&r!==45&&r!==43||n<i&&(o=t.src.charCodeAt(n),!hU(o))?-1:n}function gU(t,e){var r,n=t.bMarks[e]+t.tShift[e],i=n,o=t.eMarks[e];if(i+1>=o||(r=t.src.charCodeAt(i++),r<48||r>57))return-1;for(;;){if(i>=o)return-1;if(r=t.src.charCodeAt(i++),r>=48&&r<=57){if(i-n>=10)return-1;continue}if(r===41||r===46)break;return-1}return i<o&&(r=t.src.charCodeAt(i),!hU(r))?-1:i}function Doe(t,e){var r,n,i=t.level+2;for(r=e+2,n=t.tokens.length-2;r<n;r++)t.tokens[r].level===i&&t.tokens[r].type==="paragraph_open"&&(t.tokens[r+2].hidden=!0,t.tokens[r].hidden=!0,r+=2)}vU.exports=function(e,r,n,i){var o,s,a,c,l,u,d,f,p,h,m,g,v,y,C,w,b,E,S,x,T,R,q,B,te,ee,H,$,A=!1,D=!0;if(e.sCount[r]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[r]-e.listIndent>=4&&e.sCount[r]<e.blkIndent)return!1;if(i&&e.parentType==="paragraph"&&e.tShift[r]>=e.blkIndent&&(A=!0),(q=gU(e,r))>=0){if(d=!0,te=e.bMarks[r]+e.tShift[r],v=Number(e.src.slice(te,q-1)),A&&v!==1)return!1}else if((q=mU(e,r))>=0)d=!1;else return!1;if(A&&e.skipSpaces(q)>=e.eMarks[r])return!1;if(g=e.src.charCodeAt(q-1),i)return!0;for(m=e.tokens.length,d?($=e.push("ordered_list_open","ol",1),v!==1&&($.attrs=[["start",v]])):$=e.push("bullet_list_open","ul",1),$.map=h=[r,0],$.markup=String.fromCharCode(g),C=r,B=!1,H=e.md.block.ruler.getRules("list"),E=e.parentType,e.parentType="list";C<n;){for(R=q,y=e.eMarks[C],u=w=e.sCount[C]+q-(e.bMarks[r]+e.tShift[r]);R<y;){if(o=e.src.charCodeAt(R),o===9)w+=4-(w+e.bsCount[C])%4;else if(o===32)w++;else break;R++}if(s=R,s>=y?l=1:l=w-u,l>4&&(l=1),c=u+l,$=e.push("list_item_open","li",1),$.markup=String.fromCharCode(g),$.map=f=[r,0],d&&($.info=e.src.slice(te,q-1)),T=e.tight,x=e.tShift[r],S=e.sCount[r],b=e.listIndent,e.listIndent=e.blkIndent,e.blkIndent=c,e.tight=!0,e.tShift[r]=s-e.bMarks[r],e.sCount[r]=w,s>=y&&e.isEmpty(r+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,r,n,!0),(!e.tight||B)&&(D=!1),B=e.line-r>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=b,e.tShift[r]=x,e.sCount[r]=S,e.tight=T,$=e.push("list_item_close","li",-1),$.markup=String.fromCharCode(g),C=r=e.line,f[1]=C,s=e.bMarks[r],C>=n||e.sCount[C]<e.blkIndent||e.sCount[r]-e.blkIndent>=4)break;for(ee=!1,a=0,p=H.length;a<p;a++)if(H[a](e,C,n,!0)){ee=!0;break}if(ee)break;if(d){if(q=gU(e,C),q<0)break;te=e.bMarks[C]+e.tShift[C]}else if(q=mU(e,C),q<0)break;if(g!==e.src.charCodeAt(q-1))break}return d?$=e.push("ordered_list_close","ol",-1):$=e.push("bullet_list_close","ul",-1),$.markup=String.fromCharCode(g),h[1]=C,e.line=C,e.parentType=E,D&&Doe(e,m),!0}});var CU=_((dbe,wU)=>{"use strict";var Ooe=Oe().normalizeReference,bm=Oe().isSpace;wU.exports=function(e,r,n,i){var o,s,a,c,l,u,d,f,p,h,m,g,v,y,C,w,b=0,E=e.bMarks[r]+e.tShift[r],S=e.eMarks[r],x=r+1;if(e.sCount[r]-e.blkIndent>=4||e.src.charCodeAt(E)!==91)return!1;for(;++E<S;)if(e.src.charCodeAt(E)===93&&e.src.charCodeAt(E-1)!==92){if(E+1===S||e.src.charCodeAt(E+1)!==58)return!1;break}for(c=e.lineMax,C=e.md.block.ruler.getRules("reference"),h=e.parentType,e.parentType="reference";x<c&&!e.isEmpty(x);x++)if(!(e.sCount[x]-e.blkIndent>3)&&!(e.sCount[x]<0)){for(y=!1,u=0,d=C.length;u<d;u++)if(C[u](e,x,c,!0)){y=!0;break}if(y)break}for(v=e.getLines(r,x,e.blkIndent,!1).trim(),S=v.length,E=1;E<S;E++){if(o=v.charCodeAt(E),o===91)return!1;if(o===93){p=E;break}else o===10?b++:o===92&&(E++,E<S&&v.charCodeAt(E)===10&&b++)}if(p<0||v.charCodeAt(p+1)!==58)return!1;for(E=p+2;E<S;E++)if(o=v.charCodeAt(E),o===10)b++;else if(!bm(o))break;if(m=e.md.helpers.parseLinkDestination(v,E,S),!m.ok||(l=e.md.normalizeLink(m.str),!e.md.validateLink(l)))return!1;for(E=m.pos,b+=m.lines,s=E,a=b,g=E;E<S;E++)if(o=v.charCodeAt(E),o===10)b++;else if(!bm(o))break;for(m=e.md.helpers.parseLinkTitle(v,E,S),E<S&&g!==E&&m.ok?(w=m.str,E=m.pos,b+=m.lines):(w="",E=s,b=a);E<S&&(o=v.charCodeAt(E),!!bm(o));)E++;if(E<S&&v.charCodeAt(E)!==10&&w)for(w="",E=s,b=a;E<S&&(o=v.charCodeAt(E),!!bm(o));)E++;return E<S&&v.charCodeAt(E)!==10||(f=Ooe(v.slice(1,p)),!f)?!1:(i||(typeof e.env.references=="undefined"&&(e.env.references={}),typeof e.env.references[f]=="undefined"&&(e.env.references[f]={title:w,href:l}),e.parentType=h,e.line=r+b+1),!0)}});var EU=_((fbe,bU)=>{"use strict";bU.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]});var BE=_((pbe,UE)=>{"use strict";var Noe="[a-zA-Z_:][a-zA-Z0-9:._-]*",Loe="[^\"'=<>`\\x00-\\x20]+",Foe="'[^']*'",Moe='"[^"]*"',qoe="(?:"+Loe+"|"+Foe+"|"+Moe+")",$oe="(?:\\s+"+Noe+"(?:\\s*=\\s*"+qoe+")?)",_U="<[A-Za-z][A-Za-z0-9\\-]*"+$oe+"*\\s*\\/?>",SU="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",joe="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",Uoe="<[?][\\s\\S]*?[?]>",Boe="<![A-Z]+\\s+[^>]*>",Hoe="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",Voe=new RegExp("^(?:"+_U+"|"+SU+"|"+joe+"|"+Uoe+"|"+Boe+"|"+Hoe+")"),Goe=new RegExp("^(?:"+_U+"|"+SU+")");UE.exports.HTML_TAG_RE=Voe;UE.exports.HTML_OPEN_CLOSE_TAG_RE=Goe});var kU=_((hbe,xU)=>{"use strict";var Woe=EU(),zoe=BE().HTML_OPEN_CLOSE_TAG_RE,dc=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+Woe.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(zoe.source+"\\s*$"),/^$/,!1]];xU.exports=function(e,r,n,i){var o,s,a,c,l=e.bMarks[r]+e.tShift[r],u=e.eMarks[r];if(e.sCount[r]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(l)!==60)return!1;for(c=e.src.slice(l,u),o=0;o<dc.length&&!dc[o][0].test(c);o++);if(o===dc.length)return!1;if(i)return dc[o][2];if(s=r+1,!dc[o][1].test(c)){for(;s<n&&!(e.sCount[s]<e.blkIndent);s++)if(l=e.bMarks[s]+e.tShift[s],u=e.eMarks[s],c=e.src.slice(l,u),dc[o][1].test(c)){c.length!==0&&s++;break}}return e.line=s,a=e.push("html_block","",0),a.map=[r,s],a.content=e.getLines(r,s,e.blkIndent,!0),!0}});var AU=_((mbe,IU)=>{"use strict";var PU=Oe().isSpace;IU.exports=function(e,r,n,i){var o,s,a,c,l=e.bMarks[r]+e.tShift[r],u=e.eMarks[r];if(e.sCount[r]-e.blkIndent>=4||(o=e.src.charCodeAt(l),o!==35||l>=u))return!1;for(s=1,o=e.src.charCodeAt(++l);o===35&&l<u&&s<=6;)s++,o=e.src.charCodeAt(++l);return s>6||l<u&&!PU(o)?!1:(i||(u=e.skipSpacesBack(u,l),a=e.skipCharsBack(u,35,l),a>l&&PU(e.src.charCodeAt(a-1))&&(u=a),e.line=r+1,c=e.push("heading_open","h"+String(s),1),c.markup="########".slice(0,s),c.map=[r,e.line],c=e.push("inline","",0),c.content=e.src.slice(l,u).trim(),c.map=[r,e.line],c.children=[],c=e.push("heading_close","h"+String(s),-1),c.markup="########".slice(0,s)),!0)}});var RU=_((gbe,TU)=>{"use strict";TU.exports=function(e,r,n){var i,o,s,a,c,l,u,d,f,p=r+1,h,m=e.md.block.ruler.getRules("paragraph");if(e.sCount[r]-e.blkIndent>=4)return!1;for(h=e.parentType,e.parentType="paragraph";p<n&&!e.isEmpty(p);p++)if(!(e.sCount[p]-e.blkIndent>3)){if(e.sCount[p]>=e.blkIndent&&(l=e.bMarks[p]+e.tShift[p],u=e.eMarks[p],l<u&&(f=e.src.charCodeAt(l),(f===45||f===61)&&(l=e.skipChars(l,f),l=e.skipSpaces(l),l>=u)))){d=f===61?1:2;break}if(!(e.sCount[p]<0)){for(o=!1,s=0,a=m.length;s<a;s++)if(m[s](e,p,n,!0)){o=!0;break}if(o)break}}return d?(i=e.getLines(r,p,e.blkIndent,!1).trim(),e.line=p+1,c=e.push("heading_open","h"+String(d),1),c.markup=String.fromCharCode(f),c.map=[r,e.line],c=e.push("inline","",0),c.content=i,c.map=[r,e.line-1],c.children=[],c=e.push("heading_close","h"+String(d),-1),c.markup=String.fromCharCode(f),e.parentType=h,!0):!1}});var OU=_((vbe,DU)=>{"use strict";DU.exports=function(e,r){var n,i,o,s,a,c,l=r+1,u=e.md.block.ruler.getRules("paragraph"),d=e.lineMax;for(c=e.parentType,e.parentType="paragraph";l<d&&!e.isEmpty(l);l++)if(!(e.sCount[l]-e.blkIndent>3)&&!(e.sCount[l]<0)){for(i=!1,o=0,s=u.length;o<s;o++)if(u[o](e,l,d,!0)){i=!0;break}if(i)break}return n=e.getLines(r,l,e.blkIndent,!1).trim(),e.line=l,a=e.push("paragraph_open","p",1),a.map=[r,e.line],a=e.push("inline","",0),a.content=n,a.map=[r,e.line],a.children=[],a=e.push("paragraph_close","p",-1),e.parentType=c,!0}});var FU=_((ybe,LU)=>{"use strict";var NU=Cm(),Em=Oe().isSpace;function Qn(t,e,r,n){var i,o,s,a,c,l,u,d;for(this.src=t,this.md=e,this.env=r,this.tokens=n,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0,this.result="",o=this.src,d=!1,s=a=l=u=0,c=o.length;a<c;a++){if(i=o.charCodeAt(a),!d)if(Em(i)){l++,i===9?u+=4-u%4:u++;continue}else d=!0;(i===10||a===c-1)&&(i!==10&&a++,this.bMarks.push(s),this.eMarks.push(a),this.tShift.push(l),this.sCount.push(u),this.bsCount.push(0),d=!1,l=0,u=0,s=a+1)}this.bMarks.push(o.length),this.eMarks.push(o.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Qn.prototype.push=function(t,e,r){var n=new NU(t,e,r);return n.block=!0,r<0&&this.level--,n.level=this.level,r>0&&this.level++,this.tokens.push(n),n};Qn.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};Qn.prototype.skipEmptyLines=function(e){for(var r=this.lineMax;e<r&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};Qn.prototype.skipSpaces=function(e){for(var r,n=this.src.length;e<n&&(r=this.src.charCodeAt(e),!!Em(r));e++);return e};Qn.prototype.skipSpacesBack=function(e,r){if(e<=r)return e;for(;e>r;)if(!Em(this.src.charCodeAt(--e)))return e+1;return e};Qn.prototype.skipChars=function(e,r){for(var n=this.src.length;e<n&&this.src.charCodeAt(e)===r;e++);return e};Qn.prototype.skipCharsBack=function(e,r,n){if(e<=n)return e;for(;e>n;)if(r!==this.src.charCodeAt(--e))return e+1;return e};Qn.prototype.getLines=function(e,r,n,i){var o,s,a,c,l,u,d,f=e;if(e>=r)return"";for(u=new Array(r-e),o=0;f<r;f++,o++){for(s=0,d=c=this.bMarks[f],f+1<r||i?l=this.eMarks[f]+1:l=this.eMarks[f];c<l&&s<n;){if(a=this.src.charCodeAt(c),Em(a))a===9?s+=4-(s+this.bsCount[f])%4:s++;else if(c-d<this.tShift[f])s++;else break;c++}s>n?u[o]=new Array(s-n+1).join(" ")+this.src.slice(c,l):u[o]=this.src.slice(c,l)}return u.join("")};Qn.prototype.Token=NU;LU.exports=Qn});var qU=_((wbe,MU)=>{"use strict";var Koe=ym(),_m=[["table",iU(),["paragraph","reference"]],["code",sU()],["fence",cU(),["paragraph","reference","blockquote","list"]],["blockquote",dU(),["paragraph","reference","blockquote","list"]],["hr",pU(),["paragraph","reference","blockquote","list"]],["list",yU(),["paragraph","reference","blockquote"]],["reference",CU()],["html_block",kU(),["paragraph","reference","blockquote"]],["heading",AU(),["paragraph","reference","blockquote"]],["lheading",RU()],["paragraph",OU()]];function Sm(){this.ruler=new Koe;for(var t=0;t<_m.length;t++)this.ruler.push(_m[t][0],_m[t][1],{alt:(_m[t][2]||[]).slice()})}Sm.prototype.tokenize=function(t,e,r){for(var n,i,o=this.ruler.getRules(""),s=o.length,a=e,c=!1,l=t.md.options.maxNesting;a<r&&(t.line=a=t.skipEmptyLines(a),!(a>=r||t.sCount[a]<t.blkIndent));){if(t.level>=l){t.line=r;break}for(i=0;i<s&&(n=o[i](t,a,r,!1),!n);i++);t.tight=!c,t.isEmpty(t.line-1)&&(c=!0),a=t.line,a<r&&t.isEmpty(a)&&(c=!0,a++,t.line=a)}};Sm.prototype.parse=function(t,e,r,n){var i;!t||(i=new this.State(t,e,r,n),this.tokenize(i,i.line,i.lineMax))};Sm.prototype.State=FU();MU.exports=Sm});var jU=_((Cbe,$U)=>{"use strict";function Yoe(t){switch(t){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}$U.exports=function(e,r){for(var n=e.pos;n<e.posMax&&!Yoe(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(r||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}});var BU=_((bbe,UU)=>{"use strict";var Qoe=Oe().isSpace;UU.exports=function(e,r){var n,i,o=e.pos;if(e.src.charCodeAt(o)!==10)return!1;for(n=e.pending.length-1,i=e.posMax,r||(n>=0&&e.pending.charCodeAt(n)===32?n>=1&&e.pending.charCodeAt(n-1)===32?(e.pending=e.pending.replace(/ +$/,""),e.push("hardbreak","br",0)):(e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0)):e.push("softbreak","br",0)),o++;o<i&&Qoe(e.src.charCodeAt(o));)o++;return e.pos=o,!0}});var VU=_((Ebe,HU)=>{"use strict";var Xoe=Oe().isSpace,HE=[];for(VE=0;VE<256;VE++)HE.push(0);var VE;"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(t){HE[t.charCodeAt(0)]=1});HU.exports=function(e,r){var n,i=e.pos,o=e.posMax;if(e.src.charCodeAt(i)!==92)return!1;if(i++,i<o){if(n=e.src.charCodeAt(i),n<256&&HE[n]!==0)return r||(e.pending+=e.src[i]),e.pos+=2,!0;if(n===10){for(r||e.push("hardbreak","br",0),i++;i<o&&(n=e.src.charCodeAt(i),!!Xoe(n));)i++;return e.pos=i,!0}}return r||(e.pending+="\\"),e.pos++,!0}});var WU=_((_be,GU)=>{"use strict";GU.exports=function(e,r){var n,i,o,s,a,c,l,u,d=e.pos,f=e.src.charCodeAt(d);if(f!==96)return!1;for(n=d,d++,i=e.posMax;d<i&&e.src.charCodeAt(d)===96;)d++;if(o=e.src.slice(n,d),l=o.length,e.backticksScanned&&(e.backticks[l]||0)<=n)return r||(e.pending+=o),e.pos+=l,!0;for(a=c=d;(a=e.src.indexOf("`",c))!==-1;){for(c=a+1;c<i&&e.src.charCodeAt(c)===96;)c++;if(u=c-a,u===l)return r||(s=e.push("code_inline","code",0),s.markup=o,s.content=e.src.slice(d,a).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),e.pos=c,!0;e.backticks[u]=a}return e.backticksScanned=!0,r||(e.pending+=o),e.pos+=l,!0}});var WE=_((Sbe,GE)=>{"use strict";GE.exports.tokenize=function(e,r){var n,i,o,s,a,c=e.pos,l=e.src.charCodeAt(c);if(r||l!==126||(i=e.scanDelims(e.pos,!0),s=i.length,a=String.fromCharCode(l),s<2))return!1;for(s%2&&(o=e.push("text","",0),o.content=a,s--),n=0;n<s;n+=2)o=e.push("text","",0),o.content=a+a,e.delimiters.push({marker:l,length:0,jump:n/2,token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return e.pos+=i.length,!0};function zU(t,e){var r,n,i,o,s,a=[],c=e.length;for(r=0;r<c;r++)i=e[r],i.marker===126&&i.end!==-1&&(o=e[i.end],s=t.tokens[i.token],s.type="s_open",s.tag="s",s.nesting=1,s.markup="~~",s.content="",s=t.tokens[o.token],s.type="s_close",s.tag="s",s.nesting=-1,s.markup="~~",s.content="",t.tokens[o.token-1].type==="text"&&t.tokens[o.token-1].content==="~"&&a.push(o.token-1));for(;a.length;){for(r=a.pop(),n=r+1;n<t.tokens.length&&t.tokens[n].type==="s_close";)n++;n--,r!==n&&(s=t.tokens[n],t.tokens[n]=t.tokens[r],t.tokens[r]=s)}}GE.exports.postProcess=function(e){var r,n=e.tokens_meta,i=e.tokens_meta.length;for(zU(e,e.delimiters),r=0;r<i;r++)n[r]&&n[r].delimiters&&zU(e,n[r].delimiters)}});var KE=_((xbe,zE)=>{"use strict";zE.exports.tokenize=function(e,r){var n,i,o,s=e.pos,a=e.src.charCodeAt(s);if(r||a!==95&&a!==42)return!1;for(i=e.scanDelims(e.pos,a===42),n=0;n<i.length;n++)o=e.push("text","",0),o.content=String.fromCharCode(a),e.delimiters.push({marker:a,length:i.length,jump:n,token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return e.pos+=i.length,!0};function KU(t,e){var r,n,i,o,s,a,c=e.length;for(r=c-1;r>=0;r--)n=e[r],!(n.marker!==95&&n.marker!==42)&&n.end!==-1&&(i=e[n.end],a=r>0&&e[r-1].end===n.end+1&&e[r-1].token===n.token-1&&e[n.end+1].token===i.token+1&&e[r-1].marker===n.marker,s=String.fromCharCode(n.marker),o=t.tokens[n.token],o.type=a?"strong_open":"em_open",o.tag=a?"strong":"em",o.nesting=1,o.markup=a?s+s:s,o.content="",o=t.tokens[i.token],o.type=a?"strong_close":"em_close",o.tag=a?"strong":"em",o.nesting=-1,o.markup=a?s+s:s,o.content="",a&&(t.tokens[e[r-1].token].content="",t.tokens[e[n.end+1].token].content="",r--))}zE.exports.postProcess=function(e){var r,n=e.tokens_meta,i=e.tokens_meta.length;for(KU(e,e.delimiters),r=0;r<i;r++)n[r]&&n[r].delimiters&&KU(e,n[r].delimiters)}});var QU=_((kbe,YU)=>{"use strict";var Joe=Oe().normalizeReference,YE=Oe().isSpace;YU.exports=function(e,r){var n,i,o,s,a,c,l,u,d,f="",p="",h=e.pos,m=e.posMax,g=e.pos,v=!0;if(e.src.charCodeAt(e.pos)!==91||(a=e.pos+1,s=e.md.helpers.parseLinkLabel(e,e.pos,!0),s<0))return!1;if(c=s+1,c<m&&e.src.charCodeAt(c)===40){for(v=!1,c++;c<m&&(i=e.src.charCodeAt(c),!(!YE(i)&&i!==10));c++);if(c>=m)return!1;if(g=c,l=e.md.helpers.parseLinkDestination(e.src,c,e.posMax),l.ok){for(f=e.md.normalizeLink(l.str),e.md.validateLink(f)?c=l.pos:f="",g=c;c<m&&(i=e.src.charCodeAt(c),!(!YE(i)&&i!==10));c++);if(l=e.md.helpers.parseLinkTitle(e.src,c,e.posMax),c<m&&g!==c&&l.ok)for(p=l.str,c=l.pos;c<m&&(i=e.src.charCodeAt(c),!(!YE(i)&&i!==10));c++);}(c>=m||e.src.charCodeAt(c)!==41)&&(v=!0),c++}if(v){if(typeof e.env.references=="undefined")return!1;if(c<m&&e.src.charCodeAt(c)===91?(g=c+1,c=e.md.helpers.parseLinkLabel(e,c),c>=0?o=e.src.slice(g,c++):c=s+1):c=s+1,o||(o=e.src.slice(a,s)),u=e.env.references[Joe(o)],!u)return e.pos=h,!1;f=u.href,p=u.title}return r||(e.pos=a,e.posMax=s,d=e.push("link_open","a",1),d.attrs=n=[["href",f]],p&&n.push(["title",p]),e.md.inline.tokenize(e),d=e.push("link_close","a",-1)),e.pos=c,e.posMax=m,!0}});var JU=_((Pbe,XU)=>{"use strict";var Zoe=Oe().normalizeReference,QE=Oe().isSpace;XU.exports=function(e,r){var n,i,o,s,a,c,l,u,d,f,p,h,m,g="",v=e.pos,y=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91||(c=e.pos+2,a=e.md.helpers.parseLinkLabel(e,e.pos+1,!1),a<0))return!1;if(l=a+1,l<y&&e.src.charCodeAt(l)===40){for(l++;l<y&&(i=e.src.charCodeAt(l),!(!QE(i)&&i!==10));l++);if(l>=y)return!1;for(m=l,d=e.md.helpers.parseLinkDestination(e.src,l,e.posMax),d.ok&&(g=e.md.normalizeLink(d.str),e.md.validateLink(g)?l=d.pos:g=""),m=l;l<y&&(i=e.src.charCodeAt(l),!(!QE(i)&&i!==10));l++);if(d=e.md.helpers.parseLinkTitle(e.src,l,e.posMax),l<y&&m!==l&&d.ok)for(f=d.str,l=d.pos;l<y&&(i=e.src.charCodeAt(l),!(!QE(i)&&i!==10));l++);else f="";if(l>=y||e.src.charCodeAt(l)!==41)return e.pos=v,!1;l++}else{if(typeof e.env.references=="undefined")return!1;if(l<y&&e.src.charCodeAt(l)===91?(m=l+1,l=e.md.helpers.parseLinkLabel(e,l),l>=0?s=e.src.slice(m,l++):l=a+1):l=a+1,s||(s=e.src.slice(c,a)),u=e.env.references[Zoe(s)],!u)return e.pos=v,!1;g=u.href,f=u.title}return r||(o=e.src.slice(c,a),e.md.inline.parse(o,e.md,e.env,h=[]),p=e.push("image","img",0),p.attrs=n=[["src",g],["alt",""]],p.children=h,p.content=o,f&&n.push(["title",f])),e.pos=l,e.posMax=y,!0}});var e2=_((Ibe,ZU)=>{"use strict";var ese=/^([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,tse=/^([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)$/;ZU.exports=function(e,r){var n,i,o,s,a,c,l=e.pos;if(e.src.charCodeAt(l)!==60)return!1;for(a=e.pos,c=e.posMax;;){if(++l>=c||(s=e.src.charCodeAt(l),s===60))return!1;if(s===62)break}return n=e.src.slice(a+1,l),tse.test(n)?(i=e.md.normalizeLink(n),e.md.validateLink(i)?(r||(o=e.push("link_open","a",1),o.attrs=[["href",i]],o.markup="autolink",o.info="auto",o=e.push("text","",0),o.content=e.md.normalizeLinkText(n),o=e.push("link_close","a",-1),o.markup="autolink",o.info="auto"),e.pos+=n.length+2,!0):!1):ese.test(n)?(i=e.md.normalizeLink("mailto:"+n),e.md.validateLink(i)?(r||(o=e.push("link_open","a",1),o.attrs=[["href",i]],o.markup="autolink",o.info="auto",o=e.push("text","",0),o.content=e.md.normalizeLinkText(n),o=e.push("link_close","a",-1),o.markup="autolink",o.info="auto"),e.pos+=n.length+2,!0):!1):!1}});var r2=_((Abe,t2)=>{"use strict";var rse=BE().HTML_TAG_RE;function nse(t){var e=t|32;return e>=97&&e<=122}t2.exports=function(e,r){var n,i,o,s,a=e.pos;return!e.md.options.html||(o=e.posMax,e.src.charCodeAt(a)!==60||a+2>=o)||(n=e.src.charCodeAt(a+1),n!==33&&n!==63&&n!==47&&!nse(n))||(i=e.src.slice(a).match(rse),!i)?!1:(r||(s=e.push("html_inline","",0),s.content=e.src.slice(a,a+i[0].length)),e.pos+=i[0].length,!0)}});var s2=_((Tbe,o2)=>{"use strict";var n2=DE(),ise=Oe().has,ose=Oe().isValidEntityCode,i2=Oe().fromCodePoint,sse=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,ase=/^&([a-z][a-z0-9]{1,31});/i;o2.exports=function(e,r){var n,i,o,s=e.pos,a=e.posMax;if(e.src.charCodeAt(s)!==38)return!1;if(s+1<a){if(n=e.src.charCodeAt(s+1),n===35){if(o=e.src.slice(s).match(sse),o)return r||(i=o[1][0].toLowerCase()==="x"?parseInt(o[1].slice(1),16):parseInt(o[1],10),e.pending+=ose(i)?i2(i):i2(65533)),e.pos+=o[0].length,!0}else if(o=e.src.slice(s).match(ase),o&&ise(n2,o[1]))return r||(e.pending+=n2[o[1]]),e.pos+=o[0].length,!0}return r||(e.pending+="&"),e.pos++,!0}});var l2=_((Rbe,c2)=>{"use strict";function a2(t,e){var r,n,i,o,s,a,c,l,u={},d=e.length;for(r=0;r<d;r++)if(i=e[r],i.length=i.length||0,!!i.close){for(u.hasOwnProperty(i.marker)||(u[i.marker]=[-1,-1,-1,-1,-1,-1]),s=u[i.marker][(i.open?3:0)+i.length%3],n=r-i.jump-1,n<-1&&(n=-1),a=n;n>s;n-=o.jump+1)if(o=e[n],o.marker===i.marker&&o.open&&o.end<0&&(c=!1,(o.close||i.open)&&(o.length+i.length)%3==0&&(o.length%3!=0||i.length%3!=0)&&(c=!0),!c)){l=n>0&&!e[n-1].open?e[n-1].jump+1:0,i.jump=r-n+l,i.open=!1,o.end=r,o.jump=l,o.close=!1,a=-1;break}a!==-1&&(u[i.marker][(i.open?3:0)+(i.length||0)%3]=a)}}c2.exports=function(e){var r,n=e.tokens_meta,i=e.tokens_meta.length;for(a2(e,e.delimiters),r=0;r<i;r++)n[r]&&n[r].delimiters&&a2(e,n[r].delimiters)}});var d2=_((Dbe,u2)=>{"use strict";u2.exports=function(e){var r,n,i=0,o=e.tokens,s=e.tokens.length;for(r=n=0;r<s;r++)o[r].nesting<0&&i--,o[r].level=i,o[r].nesting>0&&i++,o[r].type==="text"&&r+1<s&&o[r+1].type==="text"?o[r+1].content=o[r].content+o[r+1].content:(r!==n&&(o[n]=o[r]),n++);r!==n&&(o.length=n)}});var g2=_((Obe,m2)=>{"use strict";var XE=Cm(),f2=Oe().isWhiteSpace,p2=Oe().isPunctChar,h2=Oe().isMdAsciiPunct;function qu(t,e,r,n){this.src=t,this.env=r,this.md=e,this.tokens=n,this.tokens_meta=Array(n.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1}qu.prototype.pushPending=function(){var t=new XE("text","",0);return t.content=this.pending,t.level=this.pendingLevel,this.tokens.push(t),this.pending="",t};qu.prototype.push=function(t,e,r){this.pending&&this.pushPending();var n=new XE(t,e,r),i=null;return r<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),n.level=this.level,r>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(n),this.tokens_meta.push(i),n};qu.prototype.scanDelims=function(t,e){var r=t,n,i,o,s,a,c,l,u,d,f=!0,p=!0,h=this.posMax,m=this.src.charCodeAt(t);for(n=t>0?this.src.charCodeAt(t-1):32;r<h&&this.src.charCodeAt(r)===m;)r++;return o=r-t,i=r<h?this.src.charCodeAt(r):32,l=h2(n)||p2(String.fromCharCode(n)),d=h2(i)||p2(String.fromCharCode(i)),c=f2(n),u=f2(i),u?f=!1:d&&(c||l||(f=!1)),c?p=!1:l&&(u||d||(p=!1)),e?(s=f,a=p):(s=f&&(!p||l),a=p&&(!f||d)),{can_open:s,can_close:a,length:o}};qu.prototype.Token=XE;m2.exports=qu});var w2=_((Nbe,y2)=>{"use strict";var v2=ym(),JE=[["text",jU()],["newline",BU()],["escape",VU()],["backticks",WU()],["strikethrough",WE().tokenize],["emphasis",KE().tokenize],["link",QU()],["image",JU()],["autolink",e2()],["html_inline",r2()],["entity",s2()]],ZE=[["balance_pairs",l2()],["strikethrough",WE().postProcess],["emphasis",KE().postProcess],["text_collapse",d2()]];function $u(){var t;for(this.ruler=new v2,t=0;t<JE.length;t++)this.ruler.push(JE[t][0],JE[t][1]);for(this.ruler2=new v2,t=0;t<ZE.length;t++)this.ruler2.push(ZE[t][0],ZE[t][1])}$u.prototype.skipToken=function(t){var e,r,n=t.pos,i=this.ruler.getRules(""),o=i.length,s=t.md.options.maxNesting,a=t.cache;if(typeof a[n]!="undefined"){t.pos=a[n];return}if(t.level<s)for(r=0;r<o&&(t.level++,e=i[r](t,!0),t.level--,!e);r++);else t.pos=t.posMax;e||t.pos++,a[n]=t.pos};$u.prototype.tokenize=function(t){for(var e,r,n=this.ruler.getRules(""),i=n.length,o=t.posMax,s=t.md.options.maxNesting;t.pos<o;){if(t.level<s)for(r=0;r<i&&(e=n[r](t,!1),!e);r++);if(e){if(t.pos>=o)break;continue}t.pending+=t.src[t.pos++]}t.pending&&t.pushPending()};$u.prototype.parse=function(t,e,r,n){var i,o,s,a=new this.State(t,e,r,n);for(this.tokenize(a),o=this.ruler2.getRules(""),s=o.length,i=0;i<s;i++)o[i](a)};$u.prototype.State=g2();y2.exports=$u});var b2=_((Lbe,C2)=>{"use strict";C2.exports=function(t){var e={};e.src_Any=NE().source,e.src_Cc=LE().source,e.src_Z=FE().source,e.src_P=pm().source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");var r="[><\uFF5C]";return e.src_pseudo_letter="(?:(?!"+r+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+r+"|"+e.src_ZPCc+")(?!-|_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+r+`|[()[\\]{}.,"'?!\\-]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-]).|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]).|"+(t&&t["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+"\\,(?!"+e.src_ZCc+").|\\!+(?!"+e.src_ZCc+"|[!]).|\\?(?!"+e.src_ZCc+"|[?]).)+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+r+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uFF5C]|"+e.src_ZPCc+"))((?![$+<=>^`|\uFF5C])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uFF5C]|"+e.src_ZPCc+"))((?![$+<=>^`|\uFF5C])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}});var P2=_((Fbe,k2)=>{"use strict";function e_(t){var e=Array.prototype.slice.call(arguments,1);return e.forEach(function(r){!r||Object.keys(r).forEach(function(n){t[n]=r[n]})}),t}function xm(t){return Object.prototype.toString.call(t)}function cse(t){return xm(t)==="[object String]"}function lse(t){return xm(t)==="[object Object]"}function use(t){return xm(t)==="[object RegExp]"}function E2(t){return xm(t)==="[object Function]"}function dse(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var _2={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function fse(t){return Object.keys(t||{}).reduce(function(e,r){return e||_2.hasOwnProperty(r)},!1)}var pse={"http:":{validate:function(t,e,r){var n=t.slice(e);return r.re.http||(r.re.http=new RegExp("^\\/\\/"+r.re.src_auth+r.re.src_host_port_strict+r.re.src_path,"i")),r.re.http.test(n)?n.match(r.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(t,e,r){var n=t.slice(e);return r.re.no_http||(r.re.no_http=new RegExp("^"+r.re.src_auth+"(?:localhost|(?:(?:"+r.re.src_domain+")\\.)+"+r.re.src_domain_root+")"+r.re.src_port+r.re.src_host_terminator+r.re.src_path,"i")),r.re.no_http.test(n)?e>=3&&t[e-3]===":"||e>=3&&t[e-3]==="/"?0:n.match(r.re.no_http)[0].length:0}},"mailto:":{validate:function(t,e,r){var n=t.slice(e);return r.re.mailto||(r.re.mailto=new RegExp("^"+r.re.src_email_name+"@"+r.re.src_host_strict,"i")),r.re.mailto.test(n)?n.match(r.re.mailto)[0].length:0}}},hse="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",mse="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|\u0440\u0444".split("|");function gse(t){t.__index__=-1,t.__text_cache__=""}function vse(t){return function(e,r){var n=e.slice(r);return t.test(n)?n.match(t)[0].length:0}}function S2(){return function(t,e){e.normalize(t)}}function km(t){var e=t.re=b2()(t.__opts__),r=t.__tlds__.slice();t.onCompile(),t.__tlds_replaced__||r.push(hse),r.push(e.src_xn),e.src_tlds=r.join("|");function n(a){return a.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(n(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(n(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(n(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(n(e.tpl_host_fuzzy_test),"i");var i=[];t.__compiled__={};function o(a,c){throw new Error('(LinkifyIt) Invalid schema "'+a+'": '+c)}Object.keys(t.__schemas__).forEach(function(a){var c=t.__schemas__[a];if(c!==null){var l={validate:null,link:null};if(t.__compiled__[a]=l,lse(c)){use(c.validate)?l.validate=vse(c.validate):E2(c.validate)?l.validate=c.validate:o(a,c),E2(c.normalize)?l.normalize=c.normalize:c.normalize?o(a,c):l.normalize=S2();return}if(cse(c)){i.push(a);return}o(a,c)}}),i.forEach(function(a){!t.__compiled__[t.__schemas__[a]]||(t.__compiled__[a].validate=t.__compiled__[t.__schemas__[a]].validate,t.__compiled__[a].normalize=t.__compiled__[t.__schemas__[a]].normalize)}),t.__compiled__[""]={validate:null,normalize:S2()};var s=Object.keys(t.__compiled__).filter(function(a){return a.length>0&&t.__compiled__[a]}).map(dse).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:[><\uFF5C]|"+e.src_ZPCc+"))("+s+")","i"),t.re.schema_search=RegExp("(^|(?!_)(?:[><\uFF5C]|"+e.src_ZPCc+"))("+s+")","ig"),t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i"),gse(t)}function yse(t,e){var r=t.__index__,n=t.__last_index__,i=t.__text_cache__.slice(r,n);this.schema=t.__schema__.toLowerCase(),this.index=r+e,this.lastIndex=n+e,this.raw=i,this.text=i,this.url=i}function x2(t,e){var r=new yse(t,e);return t.__compiled__[r.schema].normalize(r,t),r}function Zr(t,e){if(!(this instanceof Zr))return new Zr(t,e);e||fse(t)&&(e=t,t={}),this.__opts__=e_({},_2,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=e_({},pse,t),this.__compiled__={},this.__tlds__=mse,this.__tlds_replaced__=!1,this.re={},km(this)}Zr.prototype.add=function(e,r){return this.__schemas__[e]=r,km(this),this};Zr.prototype.set=function(e){return this.__opts__=e_(this.__opts__,e),this};Zr.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;var r,n,i,o,s,a,c,l,u;if(this.re.schema_test.test(e)){for(c=this.re.schema_search,c.lastIndex=0;(r=c.exec(e))!==null;)if(o=this.testSchemaAt(e,r[2],c.lastIndex),o){this.__schema__=r[2],this.__index__=r.index+r[1].length,this.__last_index__=r.index+r[0].length+o;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(l=e.search(this.re.host_fuzzy_test),l>=0&&(this.__index__<0||l<this.__index__)&&(n=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(s=n.index+n[1].length,(this.__index__<0||s<this.__index__)&&(this.__schema__="",this.__index__=s,this.__last_index__=n.index+n[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(u=e.indexOf("@"),u>=0&&(i=e.match(this.re.email_fuzzy))!==null&&(s=i.index+i[1].length,a=i.index+i[0].length,(this.__index__<0||s<this.__index__||s===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=s,this.__last_index__=a))),this.__index__>=0};Zr.prototype.pretest=function(e){return this.re.pretest.test(e)};Zr.prototype.testSchemaAt=function(e,r,n){return this.__compiled__[r.toLowerCase()]?this.__compiled__[r.toLowerCase()].validate(e,n,this):0};Zr.prototype.match=function(e){var r=0,n=[];this.__index__>=0&&this.__text_cache__===e&&(n.push(x2(this,r)),r=this.__last_index__);for(var i=r?e.slice(r):e;this.test(i);)n.push(x2(this,r)),i=i.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};Zr.prototype.tlds=function(e,r){return e=Array.isArray(e)?e:[e],r?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(n,i,o){return n!==o[i-1]}).reverse(),km(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,km(this),this)};Zr.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};Zr.prototype.onCompile=function(){};k2.exports=Zr});var A2=_((Mbe,I2)=>{"use strict";I2.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}}});var R2=_((qbe,T2)=>{"use strict";T2.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","text_collapse"]}}}});var O2=_(($be,D2)=>{"use strict";D2.exports={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","text_collapse"]}}}});var M2=_((jbe,F2)=>{"use strict";var ju=Oe(),wse=Ij(),Cse=Tj(),bse=tU(),Ese=qU(),_se=w2(),Sse=P2(),xs=OE(),N2=require("punycode"),xse={default:A2(),zero:R2(),commonmark:O2()},kse=/^(vbscript|javascript|file|data):/,Pse=/^data:image\/(gif|png|jpeg|webp);/;function Ise(t){var e=t.trim().toLowerCase();return kse.test(e)?!!Pse.test(e):!0}var L2=["http:","https:","mailto:"];function Ase(t){var e=xs.parse(t,!0);if(e.hostname&&(!e.protocol||L2.indexOf(e.protocol)>=0))try{e.hostname=N2.toASCII(e.hostname)}catch(r){}return xs.encode(xs.format(e))}function Tse(t){var e=xs.parse(t,!0);if(e.hostname&&(!e.protocol||L2.indexOf(e.protocol)>=0))try{e.hostname=N2.toUnicode(e.hostname)}catch(r){}return xs.decode(xs.format(e),xs.decode.defaultChars+"%")}function en(t,e){if(!(this instanceof en))return new en(t,e);e||ju.isString(t)||(e=t||{},t="default"),this.inline=new _se,this.block=new Ese,this.core=new bse,this.renderer=new Cse,this.linkify=new Sse,this.validateLink=Ise,this.normalizeLink=Ase,this.normalizeLinkText=Tse,this.utils=ju,this.helpers=ju.assign({},wse),this.options={},this.configure(t),e&&this.set(e)}en.prototype.set=function(t){return ju.assign(this.options,t),this};en.prototype.configure=function(t){var e=this,r;if(ju.isString(t)&&(r=t,t=xse[r],!t))throw new Error('Wrong `markdown-it` preset "'+r+'", check name');if(!t)throw new Error("Wrong `markdown-it` preset, can't be empty");return t.options&&e.set(t.options),t.components&&Object.keys(t.components).forEach(function(n){t.components[n].rules&&e[n].ruler.enableOnly(t.components[n].rules),t.components[n].rules2&&e[n].ruler2.enableOnly(t.components[n].rules2)}),this};en.prototype.enable=function(t,e){var r=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(i){r=r.concat(this[i].ruler.enable(t,!0))},this),r=r.concat(this.inline.ruler2.enable(t,!0));var n=t.filter(function(i){return r.indexOf(i)<0});if(n.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+n);return this};en.prototype.disable=function(t,e){var r=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(i){r=r.concat(this[i].ruler.disable(t,!0))},this),r=r.concat(this.inline.ruler2.disable(t,!0));var n=t.filter(function(i){return r.indexOf(i)<0});if(n.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+n);return this};en.prototype.use=function(t){var e=[this].concat(Array.prototype.slice.call(arguments,1));return t.apply(t,e),this};en.prototype.parse=function(t,e){if(typeof t!="string")throw new Error("Input data should be a String");var r=new this.core.State(t,this,e);return this.core.process(r),r.tokens};en.prototype.render=function(t,e){return e=e||{},this.renderer.render(this.parse(t,e),this.options,e)};en.prototype.parseInline=function(t,e){var r=new this.core.State(t,this,e);return r.inlineMode=!0,this.core.process(r),r.tokens};en.prototype.renderInline=function(t,e){return e=e||{},this.renderer.render(this.parseInline(t,e),this.options,e)};F2.exports=en});var $2=_((Ube,q2)=>{"use strict";q2.exports=M2()});var iH=_((eSe,Dae)=>{Dae.exports={name:"remote-containers",displayName:"Remote - Containers",description:"Open any folder or repository inside a Docker container and take advantage of Visual Studio Code's full feature set.",version:"0.205.2",preview:!0,publisher:"ms-vscode-remote",icon:"resources/remote-containers.png",repository:{type:"git",url:"https://github.com/Microsoft/vscode-remote-release.git"},bugs:{url:"https://github.com/Microsoft/vscode-remote-release/issues"},license:"SEE LICENSE IN LICENSE.txt",engines:{vscode:"^1.62.1"},extensionKind:["ui"],capabilities:{untrustedWorkspaces:{supported:"limited",description:"Opening a folder in a container requires workspace trust."},virtualWorkspaces:!0},categories:["Other"],keywords:["remote","docker","containers","remote development","dev container","development container"],aiKey:"AIF-d9b70cd4-b9f9-4d70-929b-a071c400b217",activationEvents:["onStartupFinished","onCommand:remote-containers.reopenInContainer","onCommand:remote-containers.rebuildAndReopenInContainer","onCommand:remote-containers.rebuildNoCacheAndReopenInContainer","onCommand:remote-containers.reopenLocally","onCommand:remote-containers.openFolder","onCommand:remote-containers.openRepositoryInVolume","onCommand:remote-containers.openRepositoryInUniqueVolume","onCommand:remote-containers.openRepositoryFromRemoteHub","onCommand:remote-containers.openPullRequestInVolume","onCommand:remote-containers.inspectVolume","onCommand:remote-containers.inspectVolumeFromViewlet","onCommand:remote-containers.inspectInBasicDevContainer","onCommand:remote-containers.cloneInVolumeFromViewlet","onCommand:remote-containers.pruneVolumes","onCommand:remote-containers.openWorkspace","onCommand:remote-containers.attachToRunningContainer","onCommand:remote-containers.attachToRunningContainerFromViewlet","onCommand:remote-containers.attachToK8sContainerFromViewlet","onCommand:remote-containers.checkoutPRInVolume","onCommand:remote-containers.rebuildContainer","onCommand:remote-containers.rebuildContainerNoCache","onCommand:remote-containers.createDevContainerFile","onCommand:remote-containers.openDevContainerFile","onCommand:remote-containers.openAttachDevContainerFile","onCommand:remote-containers.settings","onCommand:remote-containers.getHelp","onCommand:remote-containers.getStarted","onCommand:remote-containers.trySample","onCommand:remote-containers.reportIssue","onCommand:remote-containers.provideFeedback","onCommand:remote-containers.revealLogTerminal","onCommand:remote-containers.openLogFile","onCommand:remote-containers.openLastLogFile","onCommand:remote-containers.addExtensionToConfig","onCommand:remote-containers.showReopenInContainerNotificationReset","onCommand:remote-containers.showRecoveryContainerNotificationReset","onCommand:remote-containers.labelPortAndUpdateConfig","onCommand:remote-containers.installDocker","onCommand:remote-containers.installUserCLI","onCommand:remote-containers.configureContainerFeatures","workspaceContains:.devcontainer/devcontainer.json","workspaceContains:.devcontainer.json","onResolveRemoteAuthority:dev-container","onResolveRemoteAuthority:attached-container","onResolveRemoteAuthority:k8s-container","onDebugResolve:extensionHost","onView:targetsContainers"],main:"./dist/extension/extension",enableProposedApi:!0,contributes:{virtualWorkspaces:{menus:{continueOn:[{command:"remote-containers.openRepositoryFromRemoteHub",group:"0_local@2",when:"!isWeb && remoteHub:hasVirtualFolders"}]}},configuration:{title:"Remote - Containers",properties:{"remote.containers.defaultExtensions":{scope:"application",type:"array",description:"Configures the list of extensions to always install while creating a container.",default:[],items:{type:"string",pattern:"([a-z0-9A-Z][a-z0-9\\-A-Z]*)\\.([a-z0-9A-Z][a-z0-9\\-A-Z]*)",errorMessage:"Expected format '${publisher}.${name}'. Example: 'vscode.csharp'."}},"remote.containers.workspaceMountConsistency":{scope:"application",type:"string",enum:["consistent","cached","delegated"],enumDescriptions:["Perfect consistency.","The host\u2019s view is authoritative.","The container\u2019s view is authoritative."],description:"The consistency level used for the workspace mount (existing containers must be rebuilt to take effect).",default:"cached"},"remote.containers.cacheVolume":{scope:"application",type:"boolean",description:"Controls whether a Docker volume should be used to cache the VS Code server and extensions. Currently only applies to single container and not Docker Compose configurations.",default:!0},"remote.containers.copyGitConfig":{scope:"machine",type:"boolean",markdownDescription:"Controls whether the Git configuration (`~/.gitconfig`) should be copied into the container. This is done after installing any `#dotfiles.repository#` and will not overwrite an existing Git configuration file.",default:!0},"remote.containers.gitCredentialHelperConfigLocation":{scope:"machine",type:"string",enum:["system","global","none"],enumDescriptions:["Write to system config (`/etc/gitconfig`, requires root access).","Write to user config (`~/.gitconfig`).","Do not set a credential helper."],description:"Where to write the configuration for the Git credential helper.",default:"global"},"remote.containers.logLevel":{scope:"application",type:"string",description:"The log level for the extension.",default:"debug",enum:["info","debug","trace"]},"remote.containers.dockerPath":{scope:"application",type:"string",description:"Docker (or Podman) executable name or path.",default:"docker"},"remote.containers.dockerComposePath":{scope:"application",type:"string",description:"Docker Compose executable name or path.",default:"docker-compose"},"remote.containers.executeInWSL":{scope:"application",type:"boolean",description:"Controls whether CLI commands should always be executed in WSL. The default is to only execute in WSL for workspace folders in WSL. This setting has no effect on other platforms than Windows.",default:!1},"dotfiles.repository":{scope:"machine",type:"string",description:"URL of a dotfiles Git repository (e.g., https://github.com/owner/repository.git) or owner/repository of a GitHub repository."},"dotfiles.installCommand":{scope:"machine",type:"string",description:"The command to run after cloning the dotfiles repository. Defaults to run the first file of `install.sh`, `install`, `bootstrap.sh`, `bootstrap`, `setup.sh` and `setup` found in the dotfiles repository's root folder."},"dotfiles.targetPath":{scope:"machine",type:"string",description:"The path to clone the dotfiles repository to. Defaults to `~/dotfiles`.",default:"~/dotfiles"},"remote.containers.dotfiles.repository":{scope:"machine",type:"string",description:"URL of a dotfiles Git repository (e.g., https://github.com/owner/repository.git) or owner/repository of a GitHub repository for DevContainers. This overrides the common setting for the dotfiles repository."},"remote.containers.dotfiles.installCommand":{scope:"machine",type:"string",description:"The command to run after cloning the dotfiles repository for DevContainers. This overrides the common setting for the dotfiles install command."},"remote.containers.dotfiles.targetPath":{scope:"machine",type:"string",description:"The path to clone the dotfiles repository to for DevContainers. This overrides the common setting for the dotfiles target path."},"remote.containers.repositoryConfigurationPaths":{scope:"application",type:"array",markdownDescription:"List of additional paths to search for [repository configurations](https://github.com/microsoft/vscode-dev-containers/tree/main/repository-containers).",default:[],items:{type:"string"}}}},commands:[{command:"remote-containers.reopenInContainer",title:"Reopen in Container",category:"Remote-Containers"},{command:"remote-containers.rebuildAndReopenInContainer",title:"Rebuild and Reopen in Container",category:"Remote-Containers"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",title:"Rebuild Without Cache and Reopen in Container",category:"Remote-Containers"},{command:"remote-containers.reopenLocally",title:"Reopen Folder Locally",category:"Remote-Containers"},{command:"remote-containers.reopenInWSL",title:"Reopen Folder in WSL",category:"Remote-Containers"},{command:"remote-containers.openFolder",title:"Open Folder in Container...",category:"Remote-Containers",icon:{light:"resources/light/reopen-folder.svg",dark:"resources/dark/reopen-folder.svg"}},{command:"remote-containers.startAndOpenFolder",title:"Open Folder in Container",category:"Remote-Containers",icon:{light:"resources/light/reopen-folder.svg",dark:"resources/dark/reopen-folder.svg"}},{command:"remote-containers.openRepositoryInVolume",title:"Clone Repository in Named Container Volume...",category:"Remote-Containers"},{command:"remote-containers.openRepositoryInUniqueVolume",title:"Clone Repository in Container Volume...",icon:"$(repo-clone)",category:"Remote-Containers"},{command:"remote-containers.openRepositoryFromRemoteHub",title:"Clone Repository in a Container Volume",icon:"$(repo-clone)",category:"Remote-Containers"},{command:"remote-containers.openPullRequestInVolume",title:"Clone GitHub Pull Request in Container Volume...",category:"Remote-Containers"},{command:"remote-containers.inspectVolume",title:"Explore a Volume in a Development Container...",category:"Remote-Containers"},{command:"remote-containers.openWorkspace",title:"Open Workspace in Container...",category:"Remote-Containers"},{command:"remote-containers.attachToRunningContainer",title:"Attach to Running Container...",category:"Remote-Containers"},{command:"remote-containers.attachToRunningContainerFromViewlet",title:"Attach Visual Studio Code",category:"Remote-Containers"},{command:"remote-containers.inspectVolumeFromViewlet",title:"Explore in a Development Container",category:"Remote-Containers"},{command:"remote-containers.cloneInVolumeFromViewlet",title:"Clone into existing Volume",category:"Remote-Containers"},{command:"remote-containers.pruneVolumes",title:"Remove Unused Volumes...",category:"Remote-Containers",icon:"$(clear-all)"},{command:"remote-containers.explorerVolumesRefresh",title:"Refresh",category:"Remote-Containers",icon:"$(refresh)"},{command:"remote-containers.attachToK8sContainerFromViewlet",title:"Attach Visual Studio Code",category:"Remote-Containers"},{command:"remote-containers.rebuildContainer",title:"Rebuild Container",category:"Remote-Containers",icon:{light:"resources/light/tools.svg",dark:"resources/dark/tools.svg"}},{command:"remote-containers.rebuildContainerNoCache",title:"Rebuild Container Without Cache",category:"Remote-Containers",icon:{light:"resources/light/tools.svg",dark:"resources/dark/tools.svg"}},{command:"remote-containers.createDevContainerFile",title:"Add Development Container Configuration Files...",category:"Remote-Containers"},{command:"remote-containers.settings",title:"Settings for Remote-Containers",category:"Remote-Containers"},{command:"remote-containers.getHelp",title:"Help for Remote-Containers",category:"Remote-Containers"},{command:"remote-containers.getStarted",title:"Getting Started with Remote-Containers",category:"Remote-Containers"},{command:"remote-containers.trySample",title:"Try a Development Container Sample...",category:"Remote-Containers"},{command:"remote-containers.reportIssue",title:"Report Issue with Remote-Containers...",category:"Remote-Containers"},{command:"remote-containers.provideFeedback",title:"Provide Feedback",category:"Remote-Containers"},{command:"remote-containers.openDevContainerFile",title:"Open Container Configuration File",category:"Remote-Containers",icon:{light:"resources/light/gear.svg",dark:"resources/dark/gear.svg"}},{command:"remote-containers.openAttachConfigByNameFile",title:"Open Named Container Configuration File",category:"Remote-Containers"},{command:"remote-containers.openAttachDevContainerFile",title:"Open Attached Container Configuration File...",category:"Remote-Containers"},{command:"remote-containers.revealLogTerminal",title:"Show Container Log",category:"Remote-Containers"},{command:"remote-containers.openLogFile",title:"Show All Logs...",category:"Remote-Containers Developer"},{command:"remote-containers.openLastLogFile",title:"Show Previous Log",category:"Remote-Containers"},{command:"remote-containers.attachToContainer",title:"Attach to Container",category:"Remote-Containers",icon:{light:"resources/light/empty-window.svg",dark:"resources/dark/empty-window.svg"}},{command:"remote-containers.attachToContainerNewWindow",title:"Attach in New Window",category:"Remote-Containers"},{command:"remote-containers.stopContainer",title:"Stop Container",category:"Remote-Containers"},{command:"remote-containers.startContainer",title:"Start Container",category:"Remote-Containers",icon:{light:"resources/light/vm-start.svg",dark:"resources/dark/vm-start.svg"}},{command:"remote-containers.removeContainer",title:"Remove Container",category:"Remote-Containers",icon:{light:"resources/light/remove.svg",dark:"resources/dark/remove.svg"}},{command:"remote-containers.removeRecentFolder",title:"Remove Recent Folder",category:"Remote-Containers",icon:{light:"resources/light/remove.svg",dark:"resources/dark/remove.svg"}},{command:"remote-containers.showDetails",title:"Show Details",category:"Remote-Containers"},{command:"remote-containers.explorerTargetsRefresh",title:"Refresh",category:"Remote-Containers",icon:{light:"resources/light/refresh.svg",dark:"resources/dark/refresh.svg"}},{command:"remote-containers.explorerDetailsRefresh",title:"Refresh",category:"Remote-Containers",icon:{light:"resources/light/refresh.svg",dark:"resources/dark/refresh.svg"}},{command:"remote-containers.inspectDockerResource",title:"Inspect",category:"Remote-Containers"},{command:"remote-containers.inspectInBasicDevContainer",title:"Explore in Development Container",category:"Remote-Containers"},{command:"remote-containers.cloneInVolume",title:"Clone Repository in Volume",category:"Remote-Containers"},{command:"remote-containers.removeVolume",title:"Remove",category:"Remote-Containers"},{command:"remote-containers.newContainer",title:"New Container",category:"Remote-Containers",icon:{light:"resources/light/plus.svg",dark:"resources/dark/plus.svg"}},{command:"remote-containers.showContainerLog",title:"Show Container Log",category:"Remote-Containers"},{command:"remote-containers.addExtensionToConfig",title:"Add to devcontainer.json",category:"Remote-Containers"},{command:"remote-containers.checkoutPRInVolume",title:"Checkout Pull Request in Dev Container",category:"Remote-Containers"},{command:"remote-containers.showReopenInContainerNotificationReset",title:"Reset Don't Show Reopen Notification",category:"Remote-Containers"},{command:"remote-containers.showRecoveryContainerNotificationReset",title:"Reset Don't Show Recovery Container Notification",category:"Remote-Containers"},{command:"remote-containers.labelPortAndUpdateConfig",title:"Set Label and Update devcontainer.json",category:"Remote-Containers",icon:"$(tag)"},{command:"remote-containers.installDocker",title:"Install Docker",category:"Remote-Containers"},{command:"remote-containers.installUserCLI",title:"Install devcontainer CLI",category:"Remote-Containers"},{command:"remote-containers.configureContainerFeatures",title:"Configure Container Features",category:"Remote-Containers"}],menus:{commandPalette:[{command:"remote-containers.reopenInContainer",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.reopenInContainer",when:"workspaceFolderCount != 0 && remoteName == wsl"},{command:"remote-containers.reopenInContainer",when:"workspaceFolderCount != 0 && remoteName == dev-container && isRecoveryContainer"},{command:"remote-containers.rebuildAndReopenInContainer",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.rebuildAndReopenInContainer",when:"workspaceFolderCount != 0 && remoteName == wsl"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",when:"workspaceFolderCount != 0 && remoteName == wsl"},{command:"remote-containers.reopenLocally",when:"remoteName =~ /^dev-container$/"},{command:"remote-containers.reopenInWSL",when:"canReopenInWSL"},{command:"remote-containers.openFolder",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)?$/"},{command:"remote-containers.openFolder",when:"remoteName == wsl"},{command:"remote-containers.openRepositoryInVolume",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.openRepositoryInUniqueVolume",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.openPullRequestInVolume",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.openWorkspace",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)?$/"},{command:"remote-containers.openWorkspace",when:"remoteName == wsl"},{command:"remote-containers.attachToRunningContainer",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.attachToRunningContainerFromViewlet",when:"false"},{command:"remote-containers.inspectVolumeFromViewlet",when:"false"},{command:"remote-containers.openRepositoryFromRemoteHub",when:"false"},{command:"remote-containers.cloneInVolumeFromViewlet",when:"false"},{command:"remote-containers.inspectInBasicDevContainer",when:"false"},{command:"remote-containers.cloneInVolume",when:"false"},{command:"remote-containers.removeVolume",when:"false"},{command:"remote-containers.attachToK8sContainerFromViewlet",when:"false"},{command:"remote-containers.checkoutPRInVolume",when:"false"},{command:"remote-containers.rebuildContainer",when:"remoteName =~ /^dev-container$/"},{command:"remote-containers.rebuildContainerNoCache",when:"remoteName =~ /^dev-container$/"},{command:"remote-containers.createDevContainerFile",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.createDevContainerFile",when:"remoteName == wsl"},{command:"remote-containers.openDevContainerFile",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.openDevContainerFile",when:"workspaceFolderCount != 0 && remoteName == wsl"},{command:"remote-containers.openDevContainerFile",when:"remoteName =~ /^(dev|attached)-container$/"},{command:"remote-containers.openAttachConfigByNameFile",when:"remoteName == attached-container"},{command:"remote-containers.openAttachDevContainerFile",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)?$/"},{command:"remote-containers.getStarted",when:"false"},{command:"remote-containers.trySample",when:"!remoteName"},{command:"remote-containers.provideFeedback",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.attachToContainer",when:"false"},{command:"remote-containers.attachToContainerNewWindow",when:"false"},{command:"remote-containers.stopContainer",when:"false"},{command:"remote-containers.removeContainer",when:"false"},{command:"remote-containers.startContainer",when:"false"},{command:"remote-containers.removeRecentFolder",when:"false"},{command:"remote-containers.showDetails",when:"false"},{command:"remote-containers.explorerTargetsRefresh",when:"false"},{command:"remote-containers.explorerVolumesRefresh",when:"false"},{command:"remote-containers.explorerDetailsRefresh",when:"false"},{command:"remote-containers.inspectDockerResource",when:"false"},{command:"remote-containers.startAndOpenFolder",when:"false"},{command:"remote-containers.newContainer",when:"false"},{command:"remote-containers.showContainerLog",when:"false"},{command:"remote-containers.labelPortAndUpdateConfig",when:"false"},{command:"remote-containers.addExtensionToConfig",when:"false"},{command:"remote-containers.configureContainerFeatures",when:"experimentalContainerFeatures"}],"statusBar/remoteIndicator":[{command:"remote-containers.reopenInContainer",group:"remote_30_dev-container_2_actions@1",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.reopenInContainer",group:"remote_30_dev-container_2_actions@1",when:"workspaceFolderCount != 0 && remoteName == wsl"},{command:"remote-containers.openFolder",group:"remote_30_dev-container_2_actions@2",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_2_actions@4",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.attachToRunningContainer",group:"remote_30_dev-container_2_actions@5",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.createDevContainerFile",group:"remote_30_dev-container_2_actions@6",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.createDevContainerFile",group:"remote_30_dev-container_2_actions@6",when:"remoteName == wsl"},{command:"remote-containers.trySample",group:"remote_30_dev-container_2_actions@7",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.getStarted",group:"remote_30_dev-container_2_actions@8",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.reopenInWSL",group:"remote_30_dev-container_1_actions@1",when:"canReopenInWSL"},{command:"remote-containers.reopenLocally",group:"remote_30_dev-container_1_actions@2",when:"remoteName =~ /^dev-container$/"},{command:"remote-containers.rebuildContainer",group:"remote_30_dev-container_1_actions@3",when:"remoteName =~ /^dev-container$/"},{command:"remote-containers.openDevContainerFile",group:"remote_30_dev-container_1_actions@4",when:"remoteName =~ /^(dev|attached)-container$/"},{command:"remote-containers.revealLogTerminal",group:"remote_30_dev-container_1_actions@5",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.openFolder",group:"remote_30_dev-container_1_actions@6",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/ && remoteConnectionState == connected"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_1_actions@8",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/ && remoteConnectionState == connected"},{command:"remote-containers.attachToRunningContainer",group:"remote_30_dev-container_1_actions@9",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.settings",group:"remote_30_dev-container_9_help@1",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.reportIssue",group:"remote_30_dev-container_9_help@2",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.getHelp",group:"remote_30_dev-container_9_help@4",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"}],"view/title":[{command:"remote-containers.explorerTargetsRefresh",when:"view == targetsContainers && !remote-containers:needsDockerStartOrInstall && !remote-containers:noContainersWithFolder && !remote-containers:noContainersWithoutFolder",group:"navigation"},{command:"remote-containers.newContainer",when:"view == targetsContainers && !remote-containers:needsDockerStartOrInstall && !remote-containers:noContainersWithFolder && !remote-containers:noContainersWithoutFolder",group:"navigation"},{command:"remote-containers.explorerDetailsRefresh",when:"view == detailsContainers",group:"navigation"},{command:"remote-containers.attachToContainer",when:"view == detailsContainers",group:"navigation"},{command:"remote-containers.rebuildContainer",when:"view == detailsContainers && remoteName == dev-container",group:"navigation"},{command:"remote-containers.openDevContainerFile",when:"view == detailsContainers && remoteName =~ /^(dev|attached)-container$/",group:"navigation"},{command:"remote-containers.pruneVolumes",when:"view == devVolumes",group:"navigation@2"},{command:"remote-containers.explorerVolumesRefresh",when:"view == devVolumes",group:"navigation@3"},{command:"remote-containers.openRepositoryInUniqueVolume",when:"view == devVolumes",group:"navigation@1"}],"view/item/context":[{command:"remote-containers.attachToRunningContainerFromViewlet",when:"view == dockerContainers && viewItem =~ /^runningContainer$/i && vscode-docker:aciContext != true",group:"containers_1_general@2"},{command:"remote-containers.inspectVolumeFromViewlet",when:"view == dockerVolumes && viewItem == volume && vscode-docker:aciContext != true",group:"volumes_1_general@2"},{command:"remote-containers.checkoutPRInVolume",when:"view =~ /pr:/ && viewItem =~ /pullrequest(:local)?:nonactive|description/"},{command:"remote-containers.attachToK8sContainerFromViewlet",group:"2@4",when:"remoteName =~ /^(wsl)?$/ && view == extension.vsKubernetesExplorer && viewItem =~ /vsKubernetes\\.resource\\.pod/i"},{command:"remote-containers.startAndOpenFolder",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"1_folder@1"},{command:"remote-containers.startAndOpenFolder",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"inline@1"},{command:"remote-containers.removeRecentFolder",when:"view == targetsContainers && viewItem == attachedFolder",group:"2_folder@1"},{command:"remote-containers.removeRecentFolder",when:"view == targetsContainers && viewItem == attachedFolder",group:"inline@2"},{command:"workbench.action.closeFolder",when:"view == targetsContainers && viewItem =~ /active.*Folder/",group:"1_folder@1"},{command:"remote-containers.reopenLocally",when:"view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.reopenInWSL",when:"canReopenInWSL && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.attachToContainer",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container/",group:"1_container@1"},{command:"remote-containers.attachToContainer",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container/",group:"inline@1"},{command:"remote-containers.attachToContainerNewWindow",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container/",group:"1_container@2"},{command:"remote-containers.stopContainer",when:"view == targetsContainers && viewItem =~ /^(active|running)(Dev|)Container/",group:"2_container@2"},{command:"remote-containers.removeContainer",when:"view == targetsContainers && viewItem =~ /^(running|exited)(Dev|)Container/",group:"2_container@3"},{command:"remote-containers.rebuildContainer",when:"view == targetsContainers && viewItem =~ /activeDevContainer/",group:"2_container@1"},{command:"remote-containers.removeContainer",when:"view == targetsContainers && viewItem =~ /^(running|exited)(Dev|)Container/",group:"inline@2"},{command:"remote-containers.startContainer",when:"view == targetsContainers && viewItem =~ /^exited(Dev|)Container/",group:"1_container@3"},{command:"remote-containers.showDetails",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@4"},{command:"remote-containers.inspectDockerResource",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@5"},{command:"remote-containers.showContainerLog",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@6"},{command:"remote-containers.openDevContainerFile",when:"view == detailsContainers && viewItem == devContainer"},{command:"remote-containers.inspectDockerResource",when:"view == detailsContainers && viewItem =~ /^(image|volume)$/"},{command:"remote-containers.cloneInVolume",when:"view == devVolumes && viewItem =~ /^(devVolume)$/",group:"1_volumes@1"},{command:"remote-containers.inspectInBasicDevContainer",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"2_volumes@1"},{command:"remote-containers.inspectDockerResource",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"2_volumes@2"},{command:"remote-containers.removeVolume",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"3_volumes-destructive@1"}],"ports/item/port/inline":[{command:"remote-containers.labelPortAndUpdateConfig",group:"0_manage@4",when:"remoteName =~ /^(dev|attached)-container$/ && tunnelType == Forwarded"}],"extension/context":[{command:"remote-containers.addExtensionToConfig",group:"2_configure",when:"!isBuiltinExtension && remoteName =~ /^(dev-container|attached-container|wsl)?$/"}]},resourceLabelFormatters:[{scheme:"vscode-remote",authority:"dev-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"Dev Container"}},{scheme:"vscode-remote",authority:"attached-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"Container"}},{scheme:"vscode-remote",authority:"exec+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"Exec"}},{scheme:"vscode-remote",authority:"k8s-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"Kubernetes"}}],views:{remote:[{id:"targetsContainers",name:"Containers",group:"targets@2",remoteName:["dev-container","attached-container","exec","k8s-container"]},{id:"detailsContainers",name:"Details (Containers)",when:"remote-containers:showDetails",group:"details@1",remoteName:["dev-container","attached-container"]},{id:"devVolumes",name:"DevVolumes",group:"details@2",remoteName:["dev-container","attached-container"]}]},viewsWelcome:[{view:"targetsContainers",when:"remote-containers:needsDockerStartOrInstall",contents:"Get started with containers by [installing Docker](command:remote-containers.installDocker) or by visiting the [help view](command:~remote.helpPanel.focus). [Refresh](command:remote-containers.explorerTargetsRefresh) after installation and startup."},{view:"targetsContainers",when:"remote-containers:needsSSHCredentials",contents:"[Refresh](command:remote-containers.explorerTargetsRefresh) to provide SSH credentials."},{view:"targetsContainers",when:"remote-containers:noContainersWithFolder",contents:`Get started with containers by running one of the [Remote-Containers](command:remote-containers.newContainer) commands.
You can [reopen the current folder in a container](command:remote-containers.reopenInContainer), or open another folder in a container.
[Open Folder in Container](command:remote-containers.openFolder)
If you're new to containers and want to [try a sample](command:remote-containers.trySample), there are several to choose from.`},{view:"targetsContainers",when:"remote-containers:noContainersWithoutFolder",contents:`Get started with containers by running one of the [Remote-Containers](command:remote-containers.newContainer) commands.
You can open an existing folder in a container.
[Open Folder in Container](command:remote-containers.openFolder)
If you're new to containers and want to [try a sample](command:remote-containers.trySample), there are several to choose from.`},{view:"devVolumes",when:"remote-containers:noDevVolumes",contents:`If there's a repository you want to work with you can clone that directly in a container volume.
[Clone Repository in Container Volume](command:remote-containers.openRepositoryInUniqueVolume)
`}],remoteHelp:{getStarted:"https://aka.ms/vscode-remote/containers/tutorial-sandbox",feedback:"https://aka.ms/vscode-remote/containers/provide-feedback",documentation:"https://aka.ms/vscode-remote/containers",issues:"https://aka.ms/vscode-remote/containers/issues",remoteName:["dev-container","attached-container","exec","k8s-container"]}},scripts:{"vscode:prepublish":"npm-run-all clean definitions compile-prod dev-containers-user-cli-prepare",compile:"npm-run-all clean-dist definitions compile-dev",watch:"npm-run-all clean-dist definitions compile-watch",precommit:"node build/hygiene.js",package:"vsce package --yarn",definitions:"npm-run-all definitions-clean definitions-copy",lint:"eslint -c .eslintrc.js --rulesdir ./build/eslint --ext .ts ./src ./test","compile-prod":"node esbuild.js --production","compile-dev":"node esbuild.js","compile-watch":"node esbuild.js --watch","type-check":"npm-run-all clean-built tsc-b","tsc-b":"tsc -b","type-check-watch":"npm-run-all clean-built tsc-b-w","tsc-b-w":"tsc -b -w","definitions-clean":"rimraf dist/node_modules/vscode-dev-containers","definitions-copy":'copyfiles --all "node_modules/vscode-dev-containers/**/*" dist',"dev-containers-cli-publish":"npm-run-all dev-containers-cli-prepare dev-containers-cli-npm-publish","dev-containers-cli-package":"npm-run-all dev-containers-cli-prepare dev-containers-cli-npm-pack","dev-containers-cli-prepare":"npm-run-all clean dev-containers-cli-compile dev-containers-cli-copy-module dev-containers-cli-copy-definitions","dev-containers-cli-compile":"npm-run-all compile-prod","dev-containers-cli-copy-module":'copyfiles ThirdPartyNotices.txt dist/node/devContainersCLI.* "scripts/**/*" dev-containers-cli',"dev-containers-cli-copy-definitions":'copyfiles --all "node_modules/vscode-dev-containers/**/*" dev-containers-cli/dist',"dev-containers-cli-npm-publish":"cd dev-containers-cli && npm publish","dev-containers-cli-npm-pack":"cd dev-containers-cli && npm pack","dev-containers-user-cli-package":"npm-run-all dev-containers-user-cli-prepare dev-containers-user-cli-npm-pack","dev-containers-user-cli-prepare":"npm-run-all dev-containers-user-cli-copy-module dev-containers-user-cli-copy-definitions","dev-containers-user-cli-clean-prepare":"npm-run-all clean dev-containers-user-prepare","dev-containers-user-cli-copy-module":'copyfiles ThirdPartyNotices.txt dist/node/devContainersUserCLI.* "scripts/**/*" dev-containers-user-cli',"dev-containers-user-cli-copy-definitions":'copyfiles --all "node_modules/vscode-dev-containers/**/*" dev-containers-user-cli/dist',"dev-containers-user-cli-npm-pack":"cd dev-containers-user-cli && npm pack",clean:"npm-run-all clean-dist clean-built","clean-dist":"rimraf dist dev-containers-cli/dist dev-containers-cli/scripts dev-containers-user-cli/dist dev-containers-user-cli/scripts","clean-built":"rimraf built",test:"env TS_NODE_PROJECT=test/core/tsconfig.json mocha -r ts-node/register --exit test/core/**/*.test.ts","test-no-env":"mocha -r ts-node/register --exit test/core/**/*.test.ts","test-dev-containers":"env TS_NODE_PROJECT=test/dev-containers/tsconfig.json mocha -r ts-node/register --exit test/dev-containers/**/*.test.ts",copytestconfigsforalpine:"/bin/bash -c 'cd test/configs && for f in *; do if [[ -d $f ]] && [[ $f != *alpine* ]]; then cp -r -T $f $f-alpine ; fi ; done'"},devDependencies:{"@types/chai":"^4.2.22","@types/follow-redirects":"^1.13.1","@types/js-yaml":"^4.0.3","@types/markdown-it":"^12.2.1","@types/minimist":"^1.2.2","@types/mocha":"^9.0.0","@types/node":"^16.9.6","@types/pull-stream":"^3.6.2","@types/semver":"^7.3.8","@types/stats-lite":"^2.2.0","@types/tar":"^4.0.5","@types/vscode":"^1.60.0","@types/yargs":"^17.0.3","@typescript-eslint/eslint-plugin":"^4.31.2","@typescript-eslint/parser":"^4.31.2",ajv:"^8.6.3",chai:"4.3.4",copyfiles:"^2.4.1",eslint:"^7.32.0","event-stream":"^4.0.1","gulp-eslint":"^6.0.0","gulp-filter":"^7.0.0",husky:"^7.0.2",jsonc:"^2.0.0",mocha:"^9.1.1","mocha-junit-reporter":"^2.0.0","npm-run-all":"^4.1.5","p-all":"^4.0.0",rimraf:"^3.0.2","ts-node":"^10.2.1",typescript:"^4.4.3","typescript-formatter":"^7.2.2",vinyl:"^2.2.1","vinyl-fs":"^3.0.3",vsce:"^1.100.0"},dependencies:{applicationinsights:"2.1.7",esbuild:"^0.13.3","find-process":"^1.4.5","follow-redirects":"^1.14.4","js-yaml":"^4.1.0","jsonc-parser":"^3.0.0","markdown-it":"^12.2.0",minimist:"^1.2.5",muxrpc:"^6.5.3","node-pty":"^0.10.1","pull-stream":"^3.6.14","pull-stream-to-stream":"^2.0.0",semver:"^7.3.5","stats-lite":"^2.2.0","stream-to-pull-stream":"^1.7.3",tar:"^6.1.11","vscode-dev-containers":"https://github.com/microsoft/vscode-dev-containers/releases/download/v0.205.2/vscode-dev-containers-0.205.2.tgz","vscode-extension-telemetry":"^0.4.2","vscode-tas-client":"^0.1.22","vscode-uri":"^3.0.2",yaml:"^2.0.0-8",yargs:"17.0.1"}}});tV(exports,{activate:()=>Oae,attachToContainer:()=>jm,deactivate:()=>Mae});var L=V(require("vscode")),oH=V(require("os")),Hm=V(require("fs")),Ct=V(require("path")),sH=V(require("querystring"));var tt=V(require("fs")),Zn=V(require("util"));function lt(t){return new Promise(e=>tt.stat(t,(r,n)=>e(!r&&n.isFile())))}function Sc(t){return new Promise(e=>tt.stat(t,(r,n)=>e(!r&&n.isDirectory())))}var Ce=(0,Zn.promisify)(tt.readFile),Ls=(0,Zn.promisify)(tt.writeFile),sce=(0,Zn.promisify)(tt.appendFile),Fs=(0,Zn.promisify)(tt.rename),Lt=(0,Zn.promisify)(tt.readdir),U_=(0,Zn.promisify)(tt.unlink),nr=t=>new Promise((e,r)=>tt.mkdir(t,{recursive:!0},n=>n?r(n):e())),bg=(0,Zn.promisify)(tt.rmdir),Eg=(t,e=!1,r=!1)=>new Promise((n,i)=>tt.rm(t,{recursive:e,force:r},o=>o?i(o):n())),B_=(0,Zn.promisify)(tt.copyFile);var Ue=V(require("vscode")),m_=V(require("path"));var co=V(require("path")),TN=V(require("crypto"));var V_=V(require("os")),xc=V(require("fs")),G_=V(require("path"));async function H_(t,e){return{sendTelemetryEvent:async()=>{},isCachedFlightEnabled:async()=>!1,product:await e,package:await t}}var de;(function(a){a[a.Trace=1]="Trace",a[a.Debug=2]="Debug",a[a.Info=3]="Info",a[a.Warning=4]="Warning",a[a.Error=5]="Error",a[a.Critical=6]="Critical",a[a.Off=7]="Off"})(de||(de={}));var _g={info:3,debug:2,trace:1},nV=Object.keys(_g).reduce((t,e)=>(t[_g[e]]=e,t),[]);function W_(t){return _g[t]||3}function z_(t){return nV[t]||3}var Ge={write:()=>{},raw:()=>{},start:()=>Date.now(),stop:()=>{},event:()=>{}},Ti=/(\x9B|\x1B\[)[0-?]*[ -\/]*[@-~]/g;function K_(t,e){let r=!!e;return{event:n=>{r&&(r=!1,t.forEach(i=>i.event({type:"text",level:3,timestamp:Date.now(),text:e}))),t.forEach(i=>i.event(n))}}}function Y_(t,e){let r=sV(t);return{event(n){let i=oV(n,e());i&&r.write(i)},join:r.join}}function Q_(t,e,r){return{event(n){let i=iV(n,e(),r.getTime());i&&t(i)}}}function rt(t,e=2){return{event:t.event,write(r,n=e){t.event({type:"text",level:n,timestamp:Date.now(),text:r})},raw(r,n=e){t.event({type:"raw",level:n,timestamp:Date.now(),text:r})},start(r,n=e){let i=Date.now();return t.event({type:"start",level:n,timestamp:i,text:r}),i},stop(r,n,i=e){t.event({type:"stop",level:i,timestamp:Date.now(),text:r,startTimestamp:n})},get dimensions(){return t.dimensions},onDidChangeDimensions:t.onDidChangeDimensions}}function iV(t,e,r){if(!(!("level"in t)||t.level<e))switch(t.type){case"text":return`[${kc(Z_,`${t.timestamp-r} ms`)}] ${cd(t.text)}`;case"raw":return t.text;case"start":return 1>=e?`${kc(uV,`[${t.timestamp-r} ms] Start`)}: ${cd(t.text)}`:`[${kc(Z_,`${t.timestamp-r} ms`)}] Start: ${cd(t.text)}`;case"stop":return 1>=e?`${kc(lV,`[${t.timestamp-r} ms] Stop`)} (${t.timestamp-t.startTimestamp} ms): ${cd(t.text)}`:void 0;default:throw X_(t)}}function cd(t){return fV(t).replace(/\r?\n/g,`\r
`).replace(/(\r?\n)?$/,`\r
`)}function oV(t,e){if(!(!("level"in t)||t.level<e))switch(t.type){case"text":case"raw":return`[${new Date(t.timestamp).toISOString()}] ${Sg(t.text)}`;case"start":return`[${new Date(t.timestamp).toISOString()}] Start: ${Sg(t.text)}`;case"stop":return 2>=e?`[${new Date(t.timestamp).toISOString()}] Stop (${t.timestamp-t.startTimestamp} ms): ${Sg(t.text)}`:void 0;default:throw X_(t)}}function Sg(t){return t.replace(Ti,"").replace(/(\r?\n)?$/,V_.EOL)}function X_(t){return new Error(`Unknown log event type: ${t.type}`)}function sV(t){let e=[],r=!1,n,i;function o(){r=!1,i&&!e.length&&(n=void 0,i(),i=void 0)}function s(a,c=!1){if(a&&e.push(a),!c&&!r&&e.length){r=!0;let l=e.join("");e.length=0,xc.appendFile(t,l,u=>{u&&(u.code==="ENOENT"?xc.mkdir(G_.dirname(t),{recursive:!0},d=>{d?(o(),console.error(d)):xc.appendFile(t,l,f=>{o(),f&&console.error(f),s()})}):(o(),console.error(u))),o(),s()})}}return{write:s,join:()=>n||(r?n=new Promise(a=>i=a):Promise.resolve())}}var aV="38;2;143;99;79",J_="38;2;99;143;79",cV="38;2;86;156;214",lV=aV,uV=J_,Z_=J_,dV=cV;function kc(t,e){return e.split(`
`).map(r=>`[1m[${t}m${r}[39m[22m`).join(`
`)}function fV(t){let e,r=0,n=[];for(Ti.lastIndex=0;e=Ti.exec(t);)n.push(e0(t.substring(r,e.index))),n.push(e[0]),r=Ti.lastIndex;return n.push(e0(t.substr(r))),n.join("")}function e0(t){let e=/(?<=^|[^A-Za-z0-9_\-\.])[0-9]+(\.[0-9]+)*(?=$|[^A-Za-z0-9_\-\.])/g,r,n=0,i=[];for(;r=e.exec(t);)i.push(t.substring(n,r.index)),i.push(kc(dV,r[0])),n=e.lastIndex;return i.push(t.substr(n)),i.join("")}function _e(t){return t.split(/\r?\n/).map(e=>`[1m[31m${e}[39m[22m`).join(`\r
`)+`\r
`}function xg(t){return t.split(/\r?\n/).map(e=>`[1m[33m${e}[39m[22m`).join(`\r
`)+`\r
`}var ne=class extends Error{constructor(e){super(e.originalError&&e.originalError.message||e.description);this.manageContainer=!1;this.actions=[];this.data={};var r;Object.assign(this,e),((r=this.originalError)==null?void 0:r.stack)&&(this.stack=this.originalError.stack)}};var Ul=V(require("path"));var le=V(require("path")),Bf=V(require("fs")),IT=V(Ng()),Gy=V(require("string_decoder")),Hf=V(Wc());"use strict";function zc(t,e){e===void 0&&(e=!1);var r=t.length,n=0,i="",o=0,s=16,a=0,c=0,l=0,u=0,d=0;function f(C,w){for(var b=0,E=0;b<C||!w;){var S=t.charCodeAt(n);if(S>=48&&S<=57)E=E*16+S-48;else if(S>=65&&S<=70)E=E*16+S-65+10;else if(S>=97&&S<=102)E=E*16+S-97+10;else break;n++,b++}return b<C&&(E=-1),E}function p(C){n=C,i="",o=0,s=16,d=0}function h(){var C=n;if(t.charCodeAt(n)===48)n++;else for(n++;n<t.length&&ca(t.charCodeAt(n));)n++;if(n<t.length&&t.charCodeAt(n)===46)if(n++,n<t.length&&ca(t.charCodeAt(n)))for(n++;n<t.length&&ca(t.charCodeAt(n));)n++;else return d=3,t.substring(C,n);var w=n;if(n<t.length&&(t.charCodeAt(n)===69||t.charCodeAt(n)===101))if(n++,(n<t.length&&t.charCodeAt(n)===43||t.charCodeAt(n)===45)&&n++,n<t.length&&ca(t.charCodeAt(n))){for(n++;n<t.length&&ca(t.charCodeAt(n));)n++;w=n}else d=3;return t.substring(C,w)}function m(){for(var C="",w=n;;){if(n>=r){C+=t.substring(w,n),d=2;break}var b=t.charCodeAt(n);if(b===34){C+=t.substring(w,n),n++;break}if(b===92){if(C+=t.substring(w,n),n++,n>=r){d=2;break}var E=t.charCodeAt(n++);switch(E){case 34:C+='"';break;case 92:C+="\\";break;case 47:C+="/";break;case 98:C+="\b";break;case 102:C+="\f";break;case 110:C+=`
`;break;case 114:C+="\r";break;case 116:C+="	";break;case 117:var S=f(4,!0);S>=0?C+=String.fromCharCode(S):d=4;break;default:d=5}w=n;continue}if(b>=0&&b<=31)if(Kc(b)){C+=t.substring(w,n),d=2;break}else d=6;n++}return C}function g(){if(i="",d=0,o=n,c=a,u=l,n>=r)return o=r,s=17;var C=t.charCodeAt(n);if(ry(C)){do n++,i+=String.fromCharCode(C),C=t.charCodeAt(n);while(ry(C));return s=15}if(Kc(C))return n++,i+=String.fromCharCode(C),C===13&&t.charCodeAt(n)===10&&(n++,i+=`
`),a++,l=n,s=14;switch(C){case 123:return n++,s=1;case 125:return n++,s=2;case 91:return n++,s=3;case 93:return n++,s=4;case 58:return n++,s=6;case 44:return n++,s=5;case 34:return n++,i=m(),s=10;case 47:var w=n-1;if(t.charCodeAt(n+1)===47){for(n+=2;n<r&&!Kc(t.charCodeAt(n));)n++;return i=t.substring(w,n),s=12}if(t.charCodeAt(n+1)===42){n+=2;for(var b=r-1,E=!1;n<b;){var S=t.charCodeAt(n);if(S===42&&t.charCodeAt(n+1)===47){n+=2,E=!0;break}n++,Kc(S)&&(S===13&&t.charCodeAt(n)===10&&n++,a++,l=n)}return E||(n++,d=1),i=t.substring(w,n),s=13}return i+=String.fromCharCode(C),n++,s=16;case 45:if(i+=String.fromCharCode(C),n++,n===r||!ca(t.charCodeAt(n)))return s=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return i+=h(),s=11;default:for(;n<r&&v(C);)n++,C=t.charCodeAt(n);if(o!==n){switch(i=t.substring(o,n),i){case"true":return s=8;case"false":return s=9;case"null":return s=7}return s=16}return i+=String.fromCharCode(C),n++,s=16}}function v(C){if(ry(C)||Kc(C))return!1;switch(C){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function y(){var C;do C=g();while(C>=12&&C<=15);return C}return{setPosition:p,getPosition:function(){return n},scan:e?y:g,getToken:function(){return s},getTokenValue:function(){return i},getTokenOffset:function(){return o},getTokenLength:function(){return n-o},getTokenStartLine:function(){return c},getTokenStartCharacter:function(){return o-u},getTokenError:function(){return d}}}function ry(t){return t===32||t===9||t===11||t===12||t===160||t===5760||t>=8192&&t<=8203||t===8239||t===8287||t===12288||t===65279}function Kc(t){return t===10||t===13||t===8232||t===8233}function ca(t){return t>=48&&t<=57}"use strict";function ny(t,e,r){var n,i,o,s,a;if(e){for(s=e.offset,a=s+e.length,o=s;o>0&&!Yc(t,o-1);)o--;for(var c=a;c<t.length&&!Yc(t,c);)c++;i=t.substring(o,c),n=yW(i,r)}else i=t,n=0,o=0,s=0,a=t.length;var l=wW(r,t),u=!1,d=0,f;r.insertSpaces?f=iy(" ",r.tabSize||4):f="	";var p=zc(i,!1),h=!1;function m(){return l+iy(f,n+d)}function g(){var B=p.scan();for(u=!1;B===15||B===14;)u=u||B===14,B=p.scan();return h=B===16||p.getTokenError()!==0,B}var v=[];function y(B,te,ee){!h&&(!e||te<a&&ee>s)&&t.substring(te,ee)!==B&&v.push({offset:te,length:ee-te,content:B})}var C=g();if(C!==17){var w=p.getTokenOffset()+o,b=iy(f,n);y(b,o,w)}for(;C!==17;){for(var E=p.getTokenOffset()+p.getTokenLength()+o,S=g(),x="",T=!1;!u&&(S===12||S===13);){var R=p.getTokenOffset()+o;y(" ",E,R),E=p.getTokenOffset()+p.getTokenLength()+o,T=S===12,x=T?m():"",S=g()}if(S===2)C!==1&&(d--,x=m());else if(S===4)C!==3&&(d--,x=m());else{switch(C){case 3:case 1:d++,x=m();break;case 5:case 12:x=m();break;case 13:u?x=m():T||(x=" ");break;case 6:T||(x=" ");break;case 10:if(S===6){T||(x="");break}case 7:case 8:case 9:case 11:case 2:case 4:S===12||S===13?T||(x=" "):S!==5&&S!==17&&(h=!0);break;case 16:h=!0;break}u&&(S===12||S===13)&&(x=m())}S===17&&(x=r.insertFinalNewline?l:"");var q=p.getTokenOffset()+o;y(x,E,q),C=S}return v}function iy(t,e){for(var r="",n=0;n<e;n++)r+=t;return r}function yW(t,e){for(var r=0,n=0,i=e.tabSize||4;r<t.length;){var o=t.charAt(r);if(o===" ")n++;else if(o==="	")n+=i;else break;r++}return Math.floor(n/i)}function wW(t,e){for(var r=0;r<e.length;r++){var n=e.charAt(r);if(n==="\r")return r+1<e.length&&e.charAt(r+1)===`
`?`\r
`:"\r";if(n===`
`)return`
`}return t&&t.eol||`
`}function Yc(t,e){return`\r
`.indexOf(t.charAt(e))!==-1}"use strict";var Qc;(function(t){t.DEFAULT={allowTrailingComma:!1}})(Qc||(Qc={}));function Ck(t,e){var r=[],n=new Object,i=void 0,o={value:{},offset:0,length:0,type:"object",parent:void 0},s=!1;function a(c,l,u,d){o.value=c,o.offset=l,o.length=u,o.type=d,o.colonOffset=void 0,i=o}try{uf(t,{onObjectBegin:function(c,l){if(e<=c)throw n;i=void 0,s=e>c,r.push("")},onObjectProperty:function(c,l,u){if(e<l||(a(c,l,u,"property"),r[r.length-1]=c,e<=l+u))throw n},onObjectEnd:function(c,l){if(e<=c)throw n;i=void 0,r.pop()},onArrayBegin:function(c,l){if(e<=c)throw n;i=void 0,r.push(0)},onArrayEnd:function(c,l){if(e<=c)throw n;i=void 0,r.pop()},onLiteralValue:function(c,l,u){if(e<l||(a(c,l,u,Ek(c)),e<=l+u))throw n},onSeparator:function(c,l,u){if(e<=l)throw n;if(c===":"&&i&&i.type==="property")i.colonOffset=l,s=!1,i=void 0;else if(c===","){var d=r[r.length-1];typeof d=="number"?r[r.length-1]=d+1:(s=!0,r[r.length-1]=""),i=void 0}}})}catch(c){if(c!==n)throw c}return{path:r,previousNode:i,isAtPropertyKey:s,matches:function(c){for(var l=0,u=0;l<c.length&&u<r.length;u++)if(c[l]===r[u]||c[l]==="*")l++;else if(c[l]!=="**")return!1;return l===c.length}}}function bk(t,e,r){e===void 0&&(e=[]),r===void 0&&(r=Qc.DEFAULT);var n=null,i=[],o=[];function s(c){Array.isArray(i)?i.push(c):n!==null&&(i[n]=c)}var a={onObjectBegin:function(){var c={};s(c),o.push(i),i=c,n=null},onObjectProperty:function(c){n=c},onObjectEnd:function(){i=o.pop()},onArrayBegin:function(){var c=[];s(c),o.push(i),i=c,n=null},onArrayEnd:function(){i=o.pop()},onLiteralValue:s,onError:function(c,l,u){e.push({error:c,offset:l,length:u})}};return uf(t,a,r),i[0]}function cf(t,e,r){e===void 0&&(e=[]),r===void 0&&(r=Qc.DEFAULT);var n={type:"array",offset:-1,length:-1,children:[],parent:void 0};function i(c){n.type==="property"&&(n.length=c-n.offset,n=n.parent)}function o(c){return n.children.push(c),c}var s={onObjectBegin:function(c){n=o({type:"object",offset:c,length:-1,parent:n,children:[]})},onObjectProperty:function(c,l,u){n=o({type:"property",offset:l,length:-1,parent:n,children:[]}),n.children.push({type:"string",value:c,offset:l,length:u,parent:n})},onObjectEnd:function(c,l){i(c+l),n.length=c+l-n.offset,n=n.parent,i(c+l)},onArrayBegin:function(c,l){n=o({type:"array",offset:c,length:-1,parent:n,children:[]})},onArrayEnd:function(c,l){n.length=c+l-n.offset,n=n.parent,i(c+l)},onLiteralValue:function(c,l,u){o({type:Ek(c),offset:l,length:u,parent:n,value:c}),i(l+u)},onSeparator:function(c,l,u){n.type==="property"&&(c===":"?n.colonOffset=l:c===","&&i(l))},onError:function(c,l,u){e.push({error:c,offset:l,length:u})}};uf(t,s,r);var a=n.children[0];return a&&delete a.parent,a}function Xc(t,e){if(!!t){for(var r=t,n=0,i=e;n<i.length;n++){var o=i[n];if(typeof o=="string"){if(r.type!=="object"||!Array.isArray(r.children))return;for(var s=!1,a=0,c=r.children;a<c.length;a++){var l=c[a];if(Array.isArray(l.children)&&l.children[0].value===o){r=l.children[1],s=!0;break}}if(!s)return}else{var u=o;if(r.type!=="array"||u<0||!Array.isArray(r.children)||u>=r.children.length)return;r=r.children[u]}}return r}}function lf(t){switch(t.type){case"array":return t.children.map(lf);case"object":for(var e=Object.create(null),r=0,n=t.children;r<n.length;r++){var i=n[r],o=i.children[1];o&&(e[i.children[0].value]=lf(o))}return e;case"null":case"string":case"number":case"boolean":return t.value;default:return}}function uf(t,e,r){r===void 0&&(r=Qc.DEFAULT);var n=zc(t,!1);function i(T){return T?function(){return T(n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter())}:function(){return!0}}function o(T){return T?function(R){return T(R,n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter())}:function(){return!0}}var s=i(e.onObjectBegin),a=o(e.onObjectProperty),c=i(e.onObjectEnd),l=i(e.onArrayBegin),u=i(e.onArrayEnd),d=o(e.onLiteralValue),f=o(e.onSeparator),p=i(e.onComment),h=o(e.onError),m=r&&r.disallowComments,g=r&&r.allowTrailingComma;function v(){for(;;){var T=n.scan();switch(n.getTokenError()){case 4:y(14);break;case 5:y(15);break;case 3:y(13);break;case 1:m||y(11);break;case 2:y(12);break;case 6:y(16);break}switch(T){case 12:case 13:m?y(10):p();break;case 16:y(1);break;case 15:case 14:break;default:return T}}}function y(T,R,q){if(R===void 0&&(R=[]),q===void 0&&(q=[]),h(T),R.length+q.length>0)for(var B=n.getToken();B!==17;){if(R.indexOf(B)!==-1){v();break}else if(q.indexOf(B)!==-1)break;B=v()}}function C(T){var R=n.getTokenValue();return T?d(R):a(R),v(),!0}function w(){switch(n.getToken()){case 11:var T=n.getTokenValue(),R=Number(T);isNaN(R)&&(y(2),R=0),d(R);break;case 7:d(null);break;case 8:d(!0);break;case 9:d(!1);break;default:return!1}return v(),!0}function b(){return n.getToken()!==10?(y(3,[],[2,5]),!1):(C(!1),n.getToken()===6?(f(":"),v(),x()||y(4,[],[2,5])):y(5,[],[2,5]),!0)}function E(){s(),v();for(var T=!1;n.getToken()!==2&&n.getToken()!==17;){if(n.getToken()===5){if(T||y(4,[],[]),f(","),v(),n.getToken()===2&&g)break}else T&&y(6,[],[]);b()||y(4,[],[2,5]),T=!0}return c(),n.getToken()!==2?y(7,[2],[]):v(),!0}function S(){l(),v();for(var T=!1;n.getToken()!==4&&n.getToken()!==17;){if(n.getToken()===5){if(T||y(4,[],[]),f(","),v(),n.getToken()===4&&g)break}else T&&y(6,[],[]);x()||y(4,[],[4,5]),T=!0}return u(),n.getToken()!==4?y(8,[4],[]):v(),!0}function x(){switch(n.getToken()){case 3:return S();case 1:return E();case 10:return C(!0);default:return w()}}return v(),n.getToken()===17?r.allowEmptyContent?!0:(y(4,[],[]),!1):x()?(n.getToken()!==17&&y(9,[],[]),!0):(y(4,[],[]),!1)}function Ek(t){switch(typeof t){case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"object":{if(t){if(Array.isArray(t))return"array"}else return"null";return"object"}default:return"null"}}"use strict";function _k(t,e,r,n){for(var i,o=e.slice(),s=[],a=cf(t,s),c=void 0,l=void 0;o.length>0&&(l=o.pop(),c=Xc(a,o),c===void 0&&r!==void 0);)typeof l=="string"?r=(i={},i[l]=r,i):r=[r];if(c)if(c.type==="object"&&typeof l=="string"&&Array.isArray(c.children)){var u=Xc(c,[l]);if(u!==void 0)if(r===void 0){if(!u.parent)throw new Error("Malformed AST");var d=c.children.indexOf(u.parent),f=void 0,p=u.parent.offset+u.parent.length;if(d>0){var h=c.children[d-1];f=h.offset+h.length}else if(f=c.offset+1,c.children.length>1){var m=c.children[1];p=m.offset}return Go(t,{offset:f,length:p-f,content:""},n)}else return Go(t,{offset:u.offset,length:u.length,content:JSON.stringify(r)},n);else{if(r===void 0)return[];var g=JSON.stringify(l)+": "+JSON.stringify(r),v=n.getInsertionIndex?n.getInsertionIndex(c.children.map(function(T){return T.children[0].value})):c.children.length,y=void 0;if(v>0){var h=c.children[v-1];y={offset:h.offset+h.length,length:0,content:","+g}}else c.children.length===0?y={offset:c.offset+1,length:0,content:g}:y={offset:c.offset+1,length:0,content:g+","};return Go(t,y,n)}}else if(c.type==="array"&&typeof l=="number"&&Array.isArray(c.children)){var C=l;if(C===-1){var g=""+JSON.stringify(r),y=void 0;if(c.children.length===0)y={offset:c.offset+1,length:0,content:g};else{var h=c.children[c.children.length-1];y={offset:h.offset+h.length,length:0,content:","+g}}return Go(t,y,n)}else if(r===void 0&&c.children.length>=0){var w=l,b=c.children[w],y=void 0;if(c.children.length===1)y={offset:c.offset+1,length:c.length-2,content:""};else if(c.children.length-1===w){var h=c.children[w-1],E=h.offset+h.length,S=c.offset+c.length;y={offset:E,length:S-2-E,content:""}}else y={offset:b.offset,length:c.children[w+1].offset-b.offset,content:""};return Go(t,y,n)}else if(r!==void 0){var y=void 0,g=""+JSON.stringify(r);if(!n.isArrayInsertion&&c.children.length>l){var x=c.children[l];y={offset:x.offset,length:x.length,content:g}}else if(c.children.length===0||l===0)y={offset:c.offset+1,length:0,content:c.children.length===0?g:g+","};else{var v=l>c.children.length?c.children.length:l,h=c.children[v-1];y={offset:h.offset+h.length,length:0,content:","+g}}return Go(t,y,n)}else throw new Error("Can not "+(r===void 0?"remove":n.isArrayInsertion?"insert":"modify")+" Array index "+C+" as length is not sufficient")}else throw new Error("Can not add "+(typeof l!="number"?"index":"property")+" to parent of type "+c.type);else{if(r===void 0)throw new Error("Can not delete in empty document");return Go(t,{offset:a?a.offset:0,length:a?a.length:0,content:JSON.stringify(r)},n)}}function Go(t,e,r){if(!r.formattingOptions)return[e];var n=df(t,e),i=e.offset,o=e.offset+e.content.length;if(e.length===0||e.content.length===0){for(;i>0&&!Yc(n,i-1);)i--;for(;o<n.length&&!Yc(n,o);)o++}for(var s=ny(n,{offset:i,length:o-i},r.formattingOptions),a=s.length-1;a>=0;a--){var c=s[a];n=df(n,c),i=Math.min(i,c.offset),o=Math.max(o,c.offset+c.length),o+=c.content.length-c.length}var l=t.length-(n.length-o)-i;return[{offset:i,length:l,content:n.substring(i,o)}]}function df(t,e){return t.substring(0,e.offset)+e.content+t.substring(e.offset+e.length)}"use strict";var Sk=Ck,De=bk,xk=cf,ff=Xc;var kk=lf;function Et(t,e,r,n){return _k(t,e,r,n)}function $t(t,e){for(var r=e.length-1;r>=0;r--)t=df(t,e[r]);return t}var AT=V(require("crypto")),TT=V(require("util"));var Pk=V(require("string_decoder")),Jc="\u2404";async function Wo(t,e,r,n){let i=await t({env:r?{VSCODE_REMOTE_CONTAINERS_SESSION:r}:{},cmd:n||"/bin/sh",args:[],output:e}),o=CW(i),s;async function a(l,u){let d=s=(async()=>{try{await s}catch(f){}return c(l,u)})();try{return await Promise.race([d,o.unexpectedExit])}finally{o.disposeStdioListeners(),s===d&&(s=void 0)}}async function c(l,u){let d=`Run in container: ${l.replace(/\n.*/g,"")}`,f;if((u==null?void 0:u.logOutput)!=="silent"&&(f=e.start(d,u==null?void 0:u.logLevel)),i.stdin.destroyed){e.write("Stdin closed!");let{code:w,signal:b}=await i.exit;return Promise.reject({message:`Shell server terminated (code: ${w}, signal: ${b})`,code:w,signal:b})}i.stdin.write(`echo -n ${Jc}; ( ${l} ); echo -n ${Jc}$?${Jc}; echo -n ${Jc} >&2
`);let[p,h]=Ik(i.stdout,[1,2],(u==null?void 0:u.logOutput)==="continuous"?(w,b,E)=>{b===1&&E===0&&e.write(w,u==null?void 0:u.logLevel)}:()=>{}),m=Ik(i.stderr,[1],(u==null?void 0:u.logOutput)==="continuous"?(w,b,E)=>{b===0&&E===0&&e.write(w,u==null?void 0:u.logLevel)}:()=>{})[0];(u==null?void 0:u.stdin)&&(await p,i.stdin.write(u==null?void 0:u.stdin));let[g,v]=await h,[y]=await m,C=parseInt(v,10)||0;return((u==null?void 0:u.logOutput)===void 0||(u==null?void 0:u.logOutput)===!0)&&(e.write(g,u==null?void 0:u.logLevel),e.write(y,u==null?void 0:u.logLevel),C&&e.write(`Exit code ${C}`,u==null?void 0:u.logLevel)),(u==null?void 0:u.logOutput)==="continuous"&&C&&e.write(`Exit code ${C}`,u==null?void 0:u.logLevel),(u==null?void 0:u.logOutput)!=="silent"&&e.stop(d,f,u==null?void 0:u.logLevel),C?Promise.reject({message:`Command in container failed: ${l}`,code:C,stdout:g,stderr:y}):{stdout:g,stderr:y}}return{exec:a}}function Ik(t,e,r){let n=e.map(()=>{let u,d=new Promise((f,p)=>u={resolve:f,reject:p});return U({promise:d},u)}),i=new Pk.StringDecoder("utf8"),o=[],s=0,a=[];function c(u){let d=i.write(u);l(d)}function l(u){let d=u.indexOf(Jc);if(d!==-1){let f=u.substr(0,d);o.push(f),r(f,s,a.length),a.push(o.join("")),o.length=0,a.length===e[s]&&(n[s].resolve(a),s++,a=[],s===e.length&&t.off("data",c)),d+1<u.length&&l(u.substr(d+1))}else o.push(u),r(u,s,a.length)}return t.on("data",c),n.map(u=>u.promise)}function CW(t){let e,r=new Promise((c,l)=>e=l),n=[],i=[],o=c=>n.push(c),s=c=>i.push(c);return t.stdout.on("data",o),t.stderr.on("data",s),t.exit.then(({code:c,signal:l})=>{e(`Shell server terminated (code: ${c}, signal: ${l})
${Buffer.concat(n).toString()}
${Buffer.concat(i).toString()}`)},c=>{e(`Shell server failed: ${c&&(c.stack||c.message)}`)}),{unexpectedExit:r,disposeStdioListeners:()=>{t.stdout.off("data",o),t.stderr.off("data",s),n.length=0,i.length=0}}}var Ak=V(require("path"));var bW=["install.sh","install","bootstrap.sh","bootstrap","script/bootstrap","setup.sh","setup","script/setup"];async function Tk(t,e,r,n,i){let{repository:o,installCommand:s,targetPath:a}=t.dotfilesConfiguration;if(o=i["remote.containers.dotfiles.repository"]||i["dotfiles.repository"]||o,s=i["remote.containers.dotfiles.installCommand"]||i["dotfiles.installCommand"]||s,a=i["remote.containers.dotfiles.targetPath"]||i["dotfiles.targetPath"]||a,!o)return;await n;let c=await r;o.indexOf(":")===-1&&!/^\.{0,2}\//.test(o)&&(o=`https://github.com/${o}.git`);let l=e.shellServer,u=_W(e),d=Object.keys(c).reduce((f,p)=>`${f}${p}=${EW(c[p])} `,"");try{t.output.event({type:"progress",name:"Installing Dotfiles",status:"running"}),s?await l.exec(`# Clone & install dotfiles
${pf(u)} || (echo dotfiles marker found && exit 1) || exit 0
command -v git >/dev/null 2>&1 || (echo git not found && exit 1) || exit 0
[ -e ${a} ] || ${d}git clone ${o} ${a} || exit $?
if [ -x ${s} ]
then
	echo Executing script ${s}
	cd ${a} && ${d}${s}
else
	echo Error: ${s} not executable
	exit 126
fi
`,{logOutput:"continuous",logLevel:de.Info}):await l.exec(`# Clone & install dotfiles
${pf(u)} || (echo dotfiles marker found && exit 1) || exit 0
command -v git >/dev/null 2>&1 || (echo git not found && exit 1) || exit 0
[ -e ${a} ] || ${d}git clone ${o} ${a} || exit $?
cd ${a}
for f in ${bW.join(" ")}
do
	if [ -e $f ]
	then
		installCommand=$f
		break
	fi
done
if [ -z "$installCommand" ]
then
	dotfiles=$(ls -d ${a}/.* 2>/dev/null | grep -v -E '/(.|..|.git)$')
	if [ ! -z "$dotfiles" ]
	then
		echo Linking dotfiles: $dotfiles
		ln -sf $dotfiles ~ 2>/dev/null
	else
		echo No dotfiles found.
	fi
else
	if [ -x "$installCommand" ]
	then
		echo Executing script '${a}'/"$installCommand"
		${d}./"$installCommand"
	else
		echo Error: '${a}'/"$installCommand" not executable
		exit 126
	fi
fi
`,{logOutput:"continuous",logLevel:de.Info}),t.output.event({type:"progress",name:"Installing Dotfiles",status:"succeeded"})}catch(f){t.output.event({type:"progress",name:"Installing Dotfiles",status:"failed"})}}function EW(t){return`'${(t||"").replace(/'+/g,`'"$&"'`)}'`}function _W(t){return Ak.posix.join(zo(t),".dotfilesMarker")}var Vi=V(require("path")),Ff=V(require("net")),rT=V(require("crypto")),nT=V(vf()),iT=V(require("util")),oT=V(require("string_decoder"));var Jt=V(require("path")),wf=V(require("os")),LP=V(require("fs")),da=V(require("child_process")),uy=V(require("string_decoder"));var OP;OP=(()=>{"use strict";var t={470:n=>{function i(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}function o(a,c){for(var l,u="",d=0,f=-1,p=0,h=0;h<=a.length;++h){if(h<a.length)l=a.charCodeAt(h);else{if(l===47)break;l=47}if(l===47){if(!(f===h-1||p===1))if(f!==h-1&&p===2){if(u.length<2||d!==2||u.charCodeAt(u.length-1)!==46||u.charCodeAt(u.length-2)!==46){if(u.length>2){var m=u.lastIndexOf("/");if(m!==u.length-1){m===-1?(u="",d=0):d=(u=u.slice(0,m)).length-1-u.lastIndexOf("/"),f=h,p=0;continue}}else if(u.length===2||u.length===1){u="",d=0,f=h,p=0;continue}}c&&(u.length>0?u+="/..":u="..",d=2)}else u.length>0?u+="/"+a.slice(f+1,h):u=a.slice(f+1,h),d=h-f-1;f=h,p=0}else l===46&&p!==-1?++p:p=-1}return u}var s={resolve:function(){for(var a,c="",l=!1,u=arguments.length-1;u>=-1&&!l;u--){var d;u>=0?d=arguments[u]:(a===void 0&&(a=process.cwd()),d=a),i(d),d.length!==0&&(c=d+"/"+c,l=d.charCodeAt(0)===47)}return c=o(c,!l),l?c.length>0?"/"+c:"/":c.length>0?c:"."},normalize:function(a){if(i(a),a.length===0)return".";var c=a.charCodeAt(0)===47,l=a.charCodeAt(a.length-1)===47;return(a=o(a,!c)).length!==0||c||(a="."),a.length>0&&l&&(a+="/"),c?"/"+a:a},isAbsolute:function(a){return i(a),a.length>0&&a.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var a,c=0;c<arguments.length;++c){var l=arguments[c];i(l),l.length>0&&(a===void 0?a=l:a+="/"+l)}return a===void 0?".":s.normalize(a)},relative:function(a,c){if(i(a),i(c),a===c||(a=s.resolve(a))===(c=s.resolve(c)))return"";for(var l=1;l<a.length&&a.charCodeAt(l)===47;++l);for(var u=a.length,d=u-l,f=1;f<c.length&&c.charCodeAt(f)===47;++f);for(var p=c.length-f,h=d<p?d:p,m=-1,g=0;g<=h;++g){if(g===h){if(p>h){if(c.charCodeAt(f+g)===47)return c.slice(f+g+1);if(g===0)return c.slice(f+g)}else d>h&&(a.charCodeAt(l+g)===47?m=g:g===0&&(m=0));break}var v=a.charCodeAt(l+g);if(v!==c.charCodeAt(f+g))break;v===47&&(m=g)}var y="";for(g=l+m+1;g<=u;++g)g!==u&&a.charCodeAt(g)!==47||(y.length===0?y+="..":y+="/..");return y.length>0?y+c.slice(f+m):(f+=m,c.charCodeAt(f)===47&&++f,c.slice(f))},_makeLong:function(a){return a},dirname:function(a){if(i(a),a.length===0)return".";for(var c=a.charCodeAt(0),l=c===47,u=-1,d=!0,f=a.length-1;f>=1;--f)if((c=a.charCodeAt(f))===47){if(!d){u=f;break}}else d=!1;return u===-1?l?"/":".":l&&u===1?"//":a.slice(0,u)},basename:function(a,c){if(c!==void 0&&typeof c!="string")throw new TypeError('"ext" argument must be a string');i(a);var l,u=0,d=-1,f=!0;if(c!==void 0&&c.length>0&&c.length<=a.length){if(c.length===a.length&&c===a)return"";var p=c.length-1,h=-1;for(l=a.length-1;l>=0;--l){var m=a.charCodeAt(l);if(m===47){if(!f){u=l+1;break}}else h===-1&&(f=!1,h=l+1),p>=0&&(m===c.charCodeAt(p)?--p==-1&&(d=l):(p=-1,d=h))}return u===d?d=h:d===-1&&(d=a.length),a.slice(u,d)}for(l=a.length-1;l>=0;--l)if(a.charCodeAt(l)===47){if(!f){u=l+1;break}}else d===-1&&(f=!1,d=l+1);return d===-1?"":a.slice(u,d)},extname:function(a){i(a);for(var c=-1,l=0,u=-1,d=!0,f=0,p=a.length-1;p>=0;--p){var h=a.charCodeAt(p);if(h!==47)u===-1&&(d=!1,u=p+1),h===46?c===-1?c=p:f!==1&&(f=1):c!==-1&&(f=-1);else if(!d){l=p+1;break}}return c===-1||u===-1||f===0||f===1&&c===u-1&&c===l+1?"":a.slice(c,u)},format:function(a){if(a===null||typeof a!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof a);return function(c,l){var u=l.dir||l.root,d=l.base||(l.name||"")+(l.ext||"");return u?u===l.root?u+d:u+"/"+d:d}(0,a)},parse:function(a){i(a);var c={root:"",dir:"",base:"",ext:"",name:""};if(a.length===0)return c;var l,u=a.charCodeAt(0),d=u===47;d?(c.root="/",l=1):l=0;for(var f=-1,p=0,h=-1,m=!0,g=a.length-1,v=0;g>=l;--g)if((u=a.charCodeAt(g))!==47)h===-1&&(m=!1,h=g+1),u===46?f===-1?f=g:v!==1&&(v=1):f!==-1&&(v=-1);else if(!m){p=g+1;break}return f===-1||h===-1||v===0||v===1&&f===h-1&&f===p+1?h!==-1&&(c.base=c.name=p===0&&d?a.slice(1,h):a.slice(p,h)):(p===0&&d?(c.name=a.slice(1,f),c.base=a.slice(1,h)):(c.name=a.slice(p,f),c.base=a.slice(p,h)),c.ext=a.slice(f,h)),p>0?c.dir=a.slice(0,p-1):d&&(c.dir="/"),c},sep:"/",delimiter:":",win32:null,posix:null};s.posix=s,n.exports=s},447:(n,i,o)=>{var s;if(o.r(i),o.d(i,{URI:()=>v,Utils:()=>B}),typeof process=="object")s=process.platform==="win32";else if(typeof navigator=="object"){var a=navigator.userAgent;s=a.indexOf("Windows")>=0}var c,l,u=(c=function($,A){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,F){D.__proto__=F}||function(D,F){for(var G in F)Object.prototype.hasOwnProperty.call(F,G)&&(D[G]=F[G])})($,A)},function($,A){function D(){this.constructor=$}c($,A),$.prototype=A===null?Object.create(A):(D.prototype=A.prototype,new D)}),d=/^\w[\w\d+.-]*$/,f=/^\//,p=/^\/\//,h="",m="/",g=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,v=function(){function $(A,D,F,G,K,z){z===void 0&&(z=!1),typeof A=="object"?(this.scheme=A.scheme||h,this.authority=A.authority||h,this.path=A.path||h,this.query=A.query||h,this.fragment=A.fragment||h):(this.scheme=function(J,he){return J||he?J:"file"}(A,z),this.authority=D||h,this.path=function(J,he){switch(J){case"https":case"http":case"file":he?he[0]!==m&&(he=m+he):he=m}return he}(this.scheme,F||h),this.query=G||h,this.fragment=K||h,function(J,he){if(!J.scheme&&he)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'+J.authority+'", path: "'+J.path+'", query: "'+J.query+'", fragment: "'+J.fragment+'"}');if(J.scheme&&!d.test(J.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(J.path){if(J.authority){if(!f.test(J.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(p.test(J.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}(this,z))}return $.isUri=function(A){return A instanceof $||!!A&&typeof A.authority=="string"&&typeof A.fragment=="string"&&typeof A.path=="string"&&typeof A.query=="string"&&typeof A.scheme=="string"&&typeof A.fsPath=="function"&&typeof A.with=="function"&&typeof A.toString=="function"},Object.defineProperty($.prototype,"fsPath",{get:function(){return S(this,!1)},enumerable:!1,configurable:!0}),$.prototype.with=function(A){if(!A)return this;var D=A.scheme,F=A.authority,G=A.path,K=A.query,z=A.fragment;return D===void 0?D=this.scheme:D===null&&(D=h),F===void 0?F=this.authority:F===null&&(F=h),G===void 0?G=this.path:G===null&&(G=h),K===void 0?K=this.query:K===null&&(K=h),z===void 0?z=this.fragment:z===null&&(z=h),D===this.scheme&&F===this.authority&&G===this.path&&K===this.query&&z===this.fragment?this:new C(D,F,G,K,z)},$.parse=function(A,D){D===void 0&&(D=!1);var F=g.exec(A);return F?new C(F[2]||h,q(F[4]||h),q(F[5]||h),q(F[7]||h),q(F[9]||h),D):new C(h,h,h,h,h)},$.file=function(A){var D=h;if(s&&(A=A.replace(/\\/g,m)),A[0]===m&&A[1]===m){var F=A.indexOf(m,2);F===-1?(D=A.substring(2),A=m):(D=A.substring(2,F),A=A.substring(F)||m)}return new C("file",D,A,h,h)},$.from=function(A){return new C(A.scheme,A.authority,A.path,A.query,A.fragment)},$.prototype.toString=function(A){return A===void 0&&(A=!1),x(this,A)},$.prototype.toJSON=function(){return this},$.revive=function(A){if(A){if(A instanceof $)return A;var D=new C(A);return D._formatted=A.external,D._fsPath=A._sep===y?A.fsPath:null,D}return A},$}(),y=s?1:void 0,C=function($){function A(){var D=$!==null&&$.apply(this,arguments)||this;return D._formatted=null,D._fsPath=null,D}return u(A,$),Object.defineProperty(A.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=S(this,!1)),this._fsPath},enumerable:!1,configurable:!0}),A.prototype.toString=function(D){return D===void 0&&(D=!1),D?x(this,!0):(this._formatted||(this._formatted=x(this,!1)),this._formatted)},A.prototype.toJSON=function(){var D={$mid:1};return this._fsPath&&(D.fsPath=this._fsPath,D._sep=y),this._formatted&&(D.external=this._formatted),this.path&&(D.path=this.path),this.scheme&&(D.scheme=this.scheme),this.authority&&(D.authority=this.authority),this.query&&(D.query=this.query),this.fragment&&(D.fragment=this.fragment),D},A}(v),w=((l={})[58]="%3A",l[47]="%2F",l[63]="%3F",l[35]="%23",l[91]="%5B",l[93]="%5D",l[64]="%40",l[33]="%21",l[36]="%24",l[38]="%26",l[39]="%27",l[40]="%28",l[41]="%29",l[42]="%2A",l[43]="%2B",l[44]="%2C",l[59]="%3B",l[61]="%3D",l[32]="%20",l);function b($,A){for(var D=void 0,F=-1,G=0;G<$.length;G++){var K=$.charCodeAt(G);if(K>=97&&K<=122||K>=65&&K<=90||K>=48&&K<=57||K===45||K===46||K===95||K===126||A&&K===47)F!==-1&&(D+=encodeURIComponent($.substring(F,G)),F=-1),D!==void 0&&(D+=$.charAt(G));else{D===void 0&&(D=$.substr(0,G));var z=w[K];z!==void 0?(F!==-1&&(D+=encodeURIComponent($.substring(F,G)),F=-1),D+=z):F===-1&&(F=G)}}return F!==-1&&(D+=encodeURIComponent($.substring(F))),D!==void 0?D:$}function E($){for(var A=void 0,D=0;D<$.length;D++){var F=$.charCodeAt(D);F===35||F===63?(A===void 0&&(A=$.substr(0,D)),A+=w[F]):A!==void 0&&(A+=$[D])}return A!==void 0?A:$}function S($,A){var D;return D=$.authority&&$.path.length>1&&$.scheme==="file"?"//"+$.authority+$.path:$.path.charCodeAt(0)===47&&($.path.charCodeAt(1)>=65&&$.path.charCodeAt(1)<=90||$.path.charCodeAt(1)>=97&&$.path.charCodeAt(1)<=122)&&$.path.charCodeAt(2)===58?A?$.path.substr(1):$.path[1].toLowerCase()+$.path.substr(2):$.path,s&&(D=D.replace(/\//g,"\\")),D}function x($,A){var D=A?E:b,F="",G=$.scheme,K=$.authority,z=$.path,J=$.query,he=$.fragment;if(G&&(F+=G,F+=":"),(K||G==="file")&&(F+=m,F+=m),K){var me=K.indexOf("@");if(me!==-1){var He=K.substr(0,me);K=K.substr(me+1),(me=He.indexOf(":"))===-1?F+=D(He,!1):(F+=D(He.substr(0,me),!1),F+=":",F+=D(He.substr(me+1),!1)),F+="@"}(me=(K=K.toLowerCase()).indexOf(":"))===-1?F+=D(K,!1):(F+=D(K.substr(0,me),!1),F+=K.substr(me))}if(z){if(z.length>=3&&z.charCodeAt(0)===47&&z.charCodeAt(2)===58)(Ne=z.charCodeAt(1))>=65&&Ne<=90&&(z="/"+String.fromCharCode(Ne+32)+":"+z.substr(3));else if(z.length>=2&&z.charCodeAt(1)===58){var Ne;(Ne=z.charCodeAt(0))>=65&&Ne<=90&&(z=String.fromCharCode(Ne+32)+":"+z.substr(2))}F+=D(z,!0)}return J&&(F+="?",F+=D(J,!1)),he&&(F+="#",F+=A?he:b(he,!1)),F}function T($){try{return decodeURIComponent($)}catch(A){return $.length>3?$.substr(0,3)+T($.substr(3)):$}}var R=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function q($){return $.match(R)?$.replace(R,function(A){return T(A)}):$}var B,te=o(470),ee=function(){for(var $=0,A=0,D=arguments.length;A<D;A++)$+=arguments[A].length;var F=Array($),G=0;for(A=0;A<D;A++)for(var K=arguments[A],z=0,J=K.length;z<J;z++,G++)F[G]=K[z];return F},H=te.posix||te;(function($){$.joinPath=function(A){for(var D=[],F=1;F<arguments.length;F++)D[F-1]=arguments[F];return A.with({path:H.join.apply(H,ee([A.path],D))})},$.resolvePath=function(A){for(var D=[],F=1;F<arguments.length;F++)D[F-1]=arguments[F];var G=A.path||"/";return A.with({path:H.resolve.apply(H,ee([G],D))})},$.dirname=function(A){var D=H.dirname(A.path);return D.length===1&&D.charCodeAt(0)===46?A:A.with({path:D})},$.basename=function(A){return H.basename(A.path)},$.extname=function(A){return H.extname(A.path)}})(B||(B={}))}},e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}return r.d=(n,i)=>{for(var o in i)r.o(i,o)&&!r.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:i[o]})},r.o=(n,i)=>Object.prototype.hasOwnProperty.call(n,i),r.r=n=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r(447)})();var{URI:Ee,Utils:qr}=OP;var NP=V(require("path"));function Ae(t,e){if(Zc(e)){let r=t.dirname(e);return{isWorkspaceFile:!0,workspaceOrFolderPath:e,rootFolderPath:r,configFolderPath:r}}return{isWorkspaceFile:!1,workspaceOrFolderPath:e,rootFolderPath:e,configFolderPath:e}}function Zc(t){return NP.extname(t)===".code-workspace"}async function yf(t,e){if(!!e.isWorkspaceFile)try{let r=e.rootFolderPath,n=(await t.readFile(e.workspaceOrFolderPath)).toString(),o=De(n).folders;if(o&&o.length>0){for(let s of o){let a=s.path,c;if(a){if(t.path.isAbsolute(a))return`Workspace contains an absolute folder path '${a}'.`;c=t.path.resolve(r,a)}else{let l=s.uri;return l?Ee.parse(l).scheme!=="file"?`Workspace contains folder '${l}' not on the local file system.`:`Workspace contains an absolute folder path '${l}'.`:"Workspace contains a folder that defines neither a path nor a URI."}if(!KW(t,c,r))return`Folder '${c}' is not a subfolder of shared root folder '${r}'.`}return}return"Workspace does not define any folders"}catch(r){return`Problems loading workspace file ${e.workspaceOrFolderPath}: ${r&&(r.message||r.toString())}`}}function KW(t,e,r){return e===r?!0:!e||!r||r.length>e.length||e.length>r.length&&e.charAt(r.length)!==t.path.sep?!1:YW(t.platform,r,e.substr(0,r.length))}function YW(t,e,r){return t==="linux"?e===r:e.toLowerCase()===r.toLowerCase()}async function Nn(t){return new Promise(e=>setTimeout(e,t))}var Yo;(function(i){i[i.Unknown=0]="Unknown",i[i.File=1]="File",i[i.Directory=2]="Directory",i[i.SymbolicLink=64]="SymbolicLink"})(Yo||(Yo={}));function FP(t,e,r){return t==="linux"?e===r:e.toLowerCase()===r.toLowerCase()}var QW=Jt.join(__dirname,"..","..","node_modules",".bin","ts-node"),dy=Jt.basename(process.argv[0])==="ts-node"||process.argv.indexOf("ts-node/register")!==-1;async function pe(t){let{exec:e,cmd:r,args:n,cwd:i,env:o,stdin:s,output:a,print:c}=t,l=await e({cmd:r,args:n,cwd:i,env:o,output:a});return new Promise((u,d)=>{let f=[],p=[],h=c==="continuous"?new uy.StringDecoder:void 0;l.stdout.on("data",g=>{f.push(g),c==="continuous"&&a.write(h.write(g))}),l.stdout.on("error",g=>{if((g==null?void 0:g.code)!=="ENOTCONN")throw g});let m=c==="continuous"?new uy.StringDecoder:void 0;l.stderr.on("data",g=>{p.push(g),c==="continuous"&&a.write(_e(m.write(g)))}),l.stderr.on("error",g=>{if((g==null?void 0:g.code)!=="ENOTCONN")throw g}),l.exit.then(({code:g})=>{try{let v=Buffer.concat(f),y=Buffer.concat(p);(c===!0||g&&c==="onerror")&&(a.write(v.toString().replace(/\r?\n/g,`\r
`)),a.write(_e(y.toString()))),c&&g&&a.write(`Exit code ${g}`),g?d({message:`Command failed: ${r} ${(n||[]).join(" ")}`,stdout:v,stderr:y,code:g}):u({stdout:v,stderr:y})}catch(v){d(v)}},d),s instanceof Buffer?(l.stdin.write(s,g=>{g&&d(g)}),l.stdin.end()):s instanceof LP.ReadStream&&s.pipe(l.stdin)})}async function si(t){let{ptyExec:e,cmd:r,args:n,cwd:i,env:o,output:s,resolveOn:a,onDidInput:c}=t,l=await e({cmd:r,args:n,cwd:i,env:o,output:s});return new Promise((u,d)=>{let f="",p=[c&&c(h=>l.write(h))];l.onData(h=>{f+=h,s.raw(h),a&&a.exec(f)&&u({cmdOutput:f})}),l.exit.then(({code:h,signal:m})=>{try{p.forEach(g=>g==null?void 0:g.dispose()),h||m?d({message:`Command failed: ${r} ${(n||[]).join(" ")}`,cmdOutput:f,code:h,signal:m}):u({cmdOutput:f})}catch(g){d(g)}},h=>{p.forEach(m=>m==null?void 0:m.dispose()),d(h)})})}function fa(t){return async function(e){let{cmd:r,args:n,output:i}=e,o=`Run: ${r} ${(n||[]).join(" ").replace(/\n.*/g,"")}`,s=i.start(o),a=e.cwd||t,c=e.env?U(U({},process.env),e.env):process.env,l=await Cf(r,a,c,i),u=da.spawn(l,n,{cwd:a,env:c,windowsHide:!0});return{stdin:u.stdin,stdout:u.stdout,stderr:u.stderr,exit:new Promise((d,f)=>{u.once("error",p=>{i.stop(o,s),f(p)}),u.once("close",(p,h)=>{i.stop(o,s),d({code:p,signal:h})})}),async terminate(){u.kill("SIGKILL")}}}}async function XW(t,e){let r=await e("node-pty");if(!r)throw new Error("Missing node-pty");return async function(n){var m,g;let{cmd:i,args:o,output:s}=n,a=`Run: ${i} ${(o||[]).join(" ").replace(/\n.*/g,"")}`,c=s.start(a),l=!1,u=n.cwd||t,d=n.env?U(U({},process.env),n.env):process.env,f=await Cf(i,u,d,s),p=r.spawn(f,o||[],{cwd:u,env:d,cols:(m=s.dimensions)==null?void 0:m.columns,rows:(g=s.dimensions)==null?void 0:g.rows,useConpty:l}),h=[s.onDidChangeDimensions&&s.onDidChangeDimensions(v=>p.resize(v.columns,v.rows))];return{onData:p.onData.bind(p),write:p.write.bind(p),resize:p.resize.bind(p),exit:new Promise(v=>{p.onExit(({exitCode:y,signal:C})=>{if(h.forEach(w=>w==null?void 0:w.dispose()),s.stop(a,c),v({code:y,signal:C}),process.platform==="win32")try{p.kill()}catch{}})}),async terminate(){p.kill("SIGKILL")}}}}function fy(t,e,r){return async function(n){let{env:i,cmd:o,args:s,output:a}=n,c=n.cwd||r,l=c?`cd '${c}' && `:"",u=Object.keys(i||{}).map(y=>`${y}='${i[y]}' `).join(""),d=(s||[]).map(y=>` '${y.replace(/'/g,`'"'"'`)}'`).join(""),f=`${l}${u}${o}${d}`,p=[...e,"/bin/sh","-c",f],h=`Run: ${t} ${p.join(" ").replace(/\n.*/g,"")}`,m=a.start(h),g=await Cf(t,process.cwd(),process.env,a),v=da.spawn(g,p,{windowsHide:!0});return{stdin:v.stdin,stdout:v.stdout,stderr:v.stderr,exit:new Promise((y,C)=>{v.once("error",w=>{a.stop(h,m),C(w)}),v.once("close",(w,b)=>{a.stop(h,m),y({code:w,signal:b})})}),async terminate(){v.kill("SIGKILL")}}}}async function py(t,e,r,n){let i=await n("node-pty");if(!i)throw new Error("Missing node-pty");return async function(o){var E,S;let{env:s,cmd:a,args:c,output:l}=o,u=o.cwd||r,d=u?`cd '${u}' && `:"",f=Object.keys(s||{}).map(x=>`${x}='${s[x]}' `).join(""),p=(c||[]).map(x=>` '${x.replace(/'/g,`'"'"'`)}'`).join(""),h=`${d}${f}${a}${p}`,m=[...e,"/bin/sh","-c",h],g=`Run: ${t} ${m.join(" ").replace(/\n.*/g,"")}`,v=l.start(g),y=!1,C=await Cf(t,process.cwd(),process.env,l),w=i.spawn(C,m,{cols:(E=l.dimensions)==null?void 0:E.columns,rows:(S=l.dimensions)==null?void 0:S.rows,useConpty:y}),b=[l.onDidChangeDimensions&&l.onDidChangeDimensions(x=>w.resize(x.columns,x.rows))];return{onData:w.onData.bind(w),write:w.write.bind(w),resize:w.resize.bind(w),exit:new Promise(x=>{w.onExit(({exitCode:T,signal:R})=>{if(b.forEach(q=>q==null?void 0:q.dispose()),l.stop(g,v),x({code:T,signal:R}),process.platform==="win32")try{w.kill()}catch{}})}),async terminate(){w.kill("SIGKILL")}}}}async function Cf(t,e=process.cwd(),r,n){if(process.platform!=="win32")return t;if(Jt.isAbsolute(t))return await el(t)||t;if(/[/\\]/.test(t)){let a=Jt.join(e,t);return await el(a)||a}let i,o;if(r){for(let a of Object.keys(r))if(a.toLowerCase()==="path"){let c=r[a];typeof c=="string"&&(i=c,o=c.split(Jt.delimiter).filter(Boolean),o.push(Jt.join(r.ProgramW6432||"C:\\Program Files","Docker\\Docker\\resources\\bin")));break}}if(o===void 0||o.length===0){n.write(`findLocalWindowsExecutable: No PATH to look up exectuable '${t}'.`);let a=Jt.join(e,t);return await el(a)||a}for(let a of o){let c;Jt.isAbsolute(a)?c=Jt.join(a,t):c=Jt.join(e,a,t);let l=await el(c);if(l)return l}n.write(`findLocalWindowsExecutable: Exectuable '${t}' not found on PATH '${i}'.`);let s=Jt.join(e,t);return await el(s)||s}var MP=process.env.PATHEXT,qP=MP?MP.toLowerCase().split(";"):[".com",".exe",".bat",".cmd"];async function el(t){if(qP.indexOf(Jt.extname(t))!==-1)return await lt(t)?t:void 0;for(let e of qP){let r=t+e;if(await lt(r))return r}}async function $r(t,e,r,n){if(typeof t!="string"||n==="forWSLPath"&&ar(t)||n==="always"){let i,o;typeof t!="string"?(i=t.wslDistro,o=t.wslPath):n==="forWSLPath"||ar(t)?(i=pa(t),o=await Qo(i,t,r)):(i=await hy(r)||(()=>{throw new Error("No default WSL distro found.")})(),o=await Qo(i,t,r));let s=fy("wsl",["-d",i,"-e"],o),a=await py("wsl",["-d",i,"-e"],o,e),c=tl("wsl",o,s,a,r);return c.env=await ZW(c,i,r),c.toCommonURI=async l=>{try{return Ee.file((await pe({exec:s,cmd:"wslpath",args:["-w",l],output:r})).stdout.toString().trim())}catch(u){return}},c}return await JW(t,e)}async function JW(t,e){return{type:"local",platform:process.platform,exec:fa(t),ptyExec:await XW(t,e),cwd:t,env:process.env,path:Jt,homedir:async()=>wf.homedir(),tmpdir:async()=>wf.tmpdir(),isFile:lt,isFolder:Sc,readFile:Ce,writeFile:Ls,rename:Fs,mkdirp:async r=>{await nr(r)},readDir:Lt,getuid:async()=>process.getuid(),getgid:async()=>process.getgid(),toCommonURI:async r=>Ee.file(r)}}function tl(t,e,r,n,i){let o;return{type:t,platform:"linux",exec:r,ptyExec:n,cwd:e,env:{},path:Jt.posix,async homedir(){var s;return typeof o=="undefined"&&(o=this.env.HOME||((s=bf((await this.readFile("/etc/passwd")).toString(),(await this.getuid()).toString()))==null?void 0:s.home)||"/"),o},async tmpdir(){return this.env.TMPDIR||"/tmp"},isFile:async s=>{try{return await pe({exec:r,cmd:"test",args:["-f",s],output:Ge}),!0}catch(a){if((a==null?void 0:a.code)!==1)throw a;return!1}},isFolder:async s=>{try{return await pe({exec:r,cmd:"test",args:["-d",s],output:Ge}),!0}catch(a){if((a==null?void 0:a.code)!==1)throw a;return!1}},readFile:async s=>{try{return(await pe({exec:r,cmd:"cat",args:[s],output:Ge})).stdout}catch(a){let c=new Error(`Could not read file: ${s}`);throw c.originalError=a,c.code="ENOENT",c}},writeFile:async(s,a)=>{await pe({exec:r,cmd:"/bin/sh",args:["-c",`cat >'${s}'`],stdin:a,output:Ge})},rename:async(s,a)=>{await pe({exec:r,cmd:"mv",args:[s,a],output:Ge})},mkdirp:async s=>{await pe({exec:r,cmd:"mkdir",args:["-p",s],output:Ge})},readDir:async s=>(await pe({exec:r,cmd:"ls",args:["-a",s],output:Ge})).stdout.toString().trim().split(`
`).filter(a=>a!=="."&&a!==".."),readDirWithTypes:async s=>{let a={f:1,"*":1,"/":2,"@":64};return(await pe({exec:r,cmd:"ls",args:["-aF",s],output:Ge})).stdout.toString().trim().split(`
`).map(c=>"/*@=%|>".indexOf(c[c.length-1])!==-1?[c.substr(0,c.length-1),c[c.length-1]]:[c,"f"]).filter(([c])=>c!=="."&&c!=="..").map(([c,l])=>[c,a[l]||0])},getuid:async()=>{let s=await pe({exec:r,cmd:"id",args:["-u"],output:Ge});return parseInt(s.stdout.toString().trim(),10)},getgid:async()=>{let s=await pe({exec:r,cmd:"id",args:["-g"],output:Ge});return parseInt(s.stdout.toString().trim(),10)},toCommonURI:()=>Promise.resolve(void 0)}}var $P=/^\\\\wsl(\.localhost|\$)?\\/;function ar(t){return $P.test(t.toLowerCase())}function pa(t){let e=t.toLowerCase(),r=$P.exec(e);if(!r)return"";let n=e.indexOf("\\",r[0].length);return t.substring(r[0].length,n)}async function hy(t){let{stdout:e}=await pe({exec:fa(void 0),cmd:"wsl",args:["-l","-v"],output:t}),r=e.toString(e[1]===0?"utf16le":"utf8").trim();return(/^\*\s*(\S+)/m.exec(r)||[])[1]}async function ZW(t,e,r){let n="WSL env probe",i=r.start(n),o;try{let a=pe({exec:fa(void 0),cmd:"wsl",args:["-d",e],stdin:Buffer.from(`printenv ; exit
`),output:r,print:"onerror"});if(!await Promise.race([a,Nn(2e3)])&&(r.write("WSL env probe is taking longer than 2 seconds."),!await Promise.race([a,Nn(8e3)])))throw r.write("WSL env probe is taking longer than 10 seconds. Avoid waiting for user input in your shell's startup scripts. Continuing."),new Error("Continue");let{stdout:c}=await a;o=c.toString()}catch{let{stdout:a}=await pe({exec:t.exec,cmd:"printenv",output:r,print:"onerror"});o=a.toString()}let s=ez(o);return delete s.WSL_INTEROP,delete s.PWD,r.stop(n,i),s}function ez(t){let e={};return t.trim().split(`
`).forEach(r=>{let n=r.indexOf("=");n!==-1&&(e[r.substr(0,n)]=r.substr(n+1))}),e}async function Qo(t,e,r){let{stdout:n}=await pe({exec:fa(void 0),cmd:"wsl",args:["-d",t,"-e","wslpath","-u",e],output:r});return n.toString().trim()}async function rl(t,e){let r=pa(t),n=await Qo(r,t,e);return Ee.parse(`vscode-remote://wsl+${r}${n}`)}function nl(t){if(t.scheme==="vscode-remote"){let e=my(t.authority);if(e){let r=t.path;return Zc(r)&&(r=Jt.posix.dirname(r)),{wslDistro:e,wslPath:r}}}}function my(t){return(/wsl\+(.*)/.exec(t)||[])[1]}function Xo(t){let e=/^'?v?(\d+(\.\d+)*)/.exec(t);if(!!e)return e[1].split(".").map(r=>parseInt(r,10))}function ha(t,e){for(let r=0,n=Math.max(t.length,e.length);r<n;r++){let i=t[r]||0,o=e[r]||0;if(i!==o)return i<o}return!1}var jP=dy?(t,e,r)=>da.spawn(QW,[t,...e||[]],Z(U({},r),{windowsHide:!0})):da.fork;async function UP(t,e){if(!e){try{return require(t)}catch(r){}return}try{return require(`${e}/node_modules.asar/${t}`)}catch(r){}try{return require(`${e}/node_modules/${t}`)}catch(r){}}function il(t){let{output:e}=t,r=[];return{output:rt(Z(U({},e),{get dimensions(){return e.dimensions},event:i=>r?r.push(i):e.event(i)})),flush:()=>{r&&(r.forEach(i=>e.event(i)),r=void 0)}}}function BP(t,e){return rt(Z(U({},t),{get dimensions(){return t.dimensions},event:n=>{t.event(n),e.event(n)}}))}var Ef=V(require("path"));async function HP(t,e){let r=await VP(t.cliHost,"agent-extra-socket",t.output);if(!r)return;let n=await gy(e,"agent-socket");if(!n)return;let i=await gy(e,"homedir");try{let{stdout:s}=await e.exec(`ls '${i}/private-keys-v1.d' 2>/dev/null`);if(s.trim())return}catch{}let o=(async()=>{await e.exec(`mkdir -p -m 700 '${Ef.posix.dirname(n)}'`);let s=await VP(t.cliHost,"homedir",t.output),a=await gy(e,"homedir");s&&a&&(await ol(t,{shellServer:e},t.cliHost.path.join(s,"pubring.kbx"),Ef.posix.join(a,"pubring.kbx"),"gpg"),await ol(t,{shellServer:e},t.cliHost.path.join(s,"trustdb.gpg"),Ef.posix.join(a,"trustdb.gpg"),"gpg")),await tz(t.cliHost,t.output)})();return{remoteGpgSocket:n,localGpgSocket:r,ready:o}}async function VP(t,e,r){try{let{stdout:n}=await pe({exec:t.exec,cmd:"gpgconf",args:["--list-dir",e],output:r,print:!0}),i=n.toString().trim();if(i.indexOf(`
`)!==-1){let o=new RegExp(`^${e}:(.*)$`,"m").exec(i);o&&(i=o[1])}return t.platform==="win32"&&/^\/.\//.test(i)&&(i=`${i.charAt(1)}:${i.substr(2).replace(/\//g,"\\")}`),i}catch(n){return}}async function gy(t,e){try{let{stdout:r}=await t.exec(`gpgconf --list-dir ${e}`),n=r.trim();if(n.indexOf(`
`)!==-1){let i=new RegExp(`^${e}:(.*)$`,"m").exec(n);if(i)return i[1]}return n}catch(r){return}}async function tz(t,e){try{await pe({exec:t.exec,cmd:"gpg-connect-agent",args:["updatestartuptty","/bye"],output:e})}catch(r){}}async function _f(t,e,r){try{let{stdout:n}=await pe({exec:t.exec,cmd:"git",args:["rev-parse","--show-cdup"],cwd:e,output:r}),i=n.toString().trim();return t.path.resolve(e,i)}catch{return}}async function vy(t,e,r){try{return await pe({exec:t.exec,cmd:"git",args:["ls-remote",e],cwd:".",output:r}),!0}catch(n){return!1}}async function GP({exec:t},e,r){try{let{stdout:n,stderr:i}=await pe({exec:t,cmd:"git",args:["credential",e],env:{GIT_TERMINAL_PROMPT:"0"},stdin:Buffer.from(r),output:Ge});return{stdout:n.toString(),stderr:i.toString(),code:0}}catch(n){if(!(n&&n.stdout&&n.stderr))throw n;let{stdout:i,stderr:o,code:s}=n;return{stdout:i.toString(),stderr:o.toString(),code:s||0}}}async function WP(t,e,r){let n=await yy(t,e,r);if(!n)return;n.startsWith("refs/")&&(n=n.substr(5)),n.startsWith("remotes/")&&(n=n.substr(8));let i=n.indexOf("/");if(i===-1)return;let o=n.substr(0,i),s=n.substr(i+1);try{let{stdout:a}=await pe({exec:t.exec,cmd:"git",args:["remote","get-url",o],cwd:e.rootFolderPath,output:r}),c=a.toString().trim();if(c.endsWith(".git")&&(c=c.substr(0,c.length-4)),c.startsWith("https://github.com/")){let l=await oz(t,e,o,r);if(l&&s!==l)return`${c}/tree/${s}`}return c}catch{return}}async function zP(t,e,r){let n;try{let{stdout:i}=await pe({exec:t.exec,cmd:"git",args:["remote","-v"],cwd:e.rootFolderPath,output:r});n=i.toString()}catch{return}return Array.from(new Set(rz(/^[^\s]+\s+([^\s]+)/gm,n,1)))}function rz(t,e,r){return{[Symbol.iterator]:function*(){let n;for(;n=t.exec(e);)yield n[r],t.lastIndex===n.index&&t.lastIndex++}}}async function KP(t,e,r){return await nz(t,e,r)||iz(t,e,r)}async function nz(t,e,r){try{let{stdout:n}=await pe({exec:t.exec,cmd:"git",args:["status","--porcelain"],cwd:e.rootFolderPath,output:r});return!!n.toString().trim()}catch{return}}async function iz(t,e,r){let n=await yy(t,e,r);if(!!n)try{let{stdout:i}=await pe({exec:t.exec,cmd:"git",args:["log",`${n}..HEAD`],cwd:e.rootFolderPath,output:r});return!!i.toString().trim()}catch{return}}async function YP(t,e,r,n){let i=await yy(t,e,n);if(!i)return!1;try{let o=t.platform==="win32"?r.replace(/\\/g,"/"):r;return await pe({exec:t.exec,cmd:"git",args:["cat-file","-e",`${i}:${o}`],cwd:e.rootFolderPath,output:n}),!0}catch{return!1}}async function yy(t,e,r){try{let{stdout:n}=await pe({exec:t.exec,cmd:"git",args:["rev-parse","--abbrev-ref","--symbolic-full-name","@{u}"],cwd:e.rootFolderPath,output:r});return n.toString().trim()}catch{return}}async function oz(t,e,r,n){try{let{stdout:i}=await pe({exec:t.exec,cmd:"git",args:["remote","show",r],cwd:e.rootFolderPath,output:n});return(i.toString().match(/^\s*HEAD branch:\s*(.*)$/m)||[])[1]}catch{return}}async function Sf(t,e,r,n,i,o){let{extensionPath:s}=t;if(await e.isFolder(e.path.join(r,".git")))return{gitClone:void 0,gitUnshallow:void 0};await e.mkdirp(r);let a=n.tokenEnvVar?Z(U({},n.env),{GIT_ASKPASS:e.path.join(s,"scripts","gitAskPass.sh"),GIT_TOKEN:e.env[n.tokenEnvVar]}):n.env,c=[];n.fullClone||c.push("--depth","1"),n.branch&&c.push("--branch",n.branch),n.recurseSubmodules&&c.push("--recurse-submodules");let l=si({ptyExec:e.ptyExec,cmd:"git",args:["clone",...c,n.url,"."],cwd:r,env:a,output:rt(i,de.Info)}),u=n.fullClone?l:(async()=>(await l,await si({ptyExec:e.ptyExec,cmd:"git",args:["config","remote.origin.fetch","+refs/heads/*:refs/remotes/origin/*"],cwd:r,env:a,output:o}),si({ptyExec:e.ptyExec,cmd:"git",args:["fetch","--unshallow","--tags"],cwd:r,env:a,output:o})))();return{gitClone:l,gitUnshallow:u}}var Gi=V(require("stream"));async function QP(t,e){let{stdout:r}=await t.exec(`cat /proc/${e}/environ`,{logOutput:!1});return r.split("\0").map(n=>{let i=n.indexOf("=");return i!==-1?[n.slice(0,i),n.slice(i+1)]:[]}).reduce((n,[i,o])=>(i&&(n[i]=o),n),{})}async function wy(t){let e='for pid in `cd /proc && ls -d [0-9]*`; do { echo $pid ; readlink /proc/$pid/cwd ; readlink /proc/$pid/ns/mnt ; cat /proc/$pid/stat | tr "\n" " " ; echo ; xargs -0 < /proc/$pid/environ ; xargs -0 < /proc/$pid/cmdline ; } ; echo --- ; done ; readlink /proc/self/ns/mnt 2>/dev/null',{stdout:r}=await t.exec(e,{logOutput:!1}),n=6,i=r.split(`
---
`),o=i.pop().trim();return{processes:i.map(a=>a.split(`
`)).filter(a=>a.length>=n).map(([a,c,l,u,d,f])=>{let p=/.*\) [^ ]* ([^ ]*) ([^ ]*)/.exec(u)||[];return{pid:a,ppid:p[1],pgrp:p[2],cwd:c,mntNS:l,cmd:f,env:d.split(" ").reduce((h,m)=>{let g=m.indexOf("=");return g!==-1&&(h[m.substr(0,g)]=m.substr(g+1)),h},{})}}),mntNS:o}}function XP(t){let e={};return t.forEach(r=>e[r.pid]={process:r,childProcesses:[]}),t.filter(r=>r.ppid).forEach(r=>{var n;return(n=e[r.ppid])==null?void 0:n.childProcesses.push(e[r.pid])}),e}function Cy(t,e="  ",r="  "){return`${r}${t.process.pid}: ${t.process.cmd}
${t.childProcesses.map(n=>Cy(n,e,r+e))}`}var f4=YA(),ya=ZA(),Ny=tT();async function Mf(t,e){var y,C,w,b;let{output:r}=t,n="Launching Remote-Containers helper.",i=r.start(n);if(dy)return r.stop(n,i),{remoteEnv:{},ready:Promise.resolve()};let s=(await(0,iT.promisify)(rT.randomBytes)(20)).toString("hex"),a={},c=y4(t.cliHost),l=c?Vi.posix.join(((y=e.env)==null?void 0:y.TMPDIR)||"/tmp",`vscode-ssh-auth-${s}.sock`):void 0;c?(a[l]=c,r.write(`ssh-agent: SSH_AUTH_SOCK in container (${l}) forwarded to host (${c}).`)):r.write("ssh-agent: SSH_AUTH_SOCK not set on host.");let u=await HP(t,e.shellServer);u&&(a[u.remoteGpgSocket]=u.localGpgSocket);let d=Vi.posix.join(((C=e.env)==null?void 0:C.TMPDIR)||"/tmp",`vscode-remote-containers-ipc-${s}.sock`),f=Vi.posix.join(((w=e.env)==null?void 0:w.TMPDIR)||"/tmp",`vscode-remote-containers-server-${s}.js`),p=Vi.posix.join(((b=e.env)==null?void 0:b.TMPDIR)||"/tmp",`vscode-remote-containers-${s}.js`),h=p4(t,e,f,p,a,d),m=h.then(E=>E.ready),g=h.then(E=>E.mrpcExec),v=h.then(E=>E.mrpcExecToEnd);return m.catch(console.error),t.onAdoptProcess(E=>w4(e.shellServer,d,l,E).catch(console.error)),r.stop(n,i),{remoteContainersCLI:p,remoteEnv:l?{SSH_AUTH_SOCK:l,REMOTE_CONTAINERS_IPC:d}:{REMOTE_CONTAINERS_IPC:d},mrpcExec:g,mrpcExecToEnd:v,ready:m}}async function p4(t,{remoteExec:e,nodeExecutable:r,shellServer:n},i,o,s,a){let{cliHost:c,output:l}=t,u=Object.keys(s),d=Z(U({},u.reduce((x,T)=>(x[T]="duplex",x),{})),{rpc:"async",ready:"async"}),f={exec:"async",stdin:"sink",stdout:"source",stderr:"source",exit:"async",terminate:"async",dispose:"async",execToEnd:"async"},p={REMOTE_CONTAINERS_SOCKETS:JSON.stringify(u),REMOTE_CONTAINERS_IPC:a},h=Ce(Vi.join(t.extensionPath,"dist","common","remoteContainersCLI.js"),{encoding:"utf8"}),m=Ce(Vi.join(t.extensionPath,"dist","common","remoteContainersServer.js"),{encoding:"utf8"}),g=`EOF-${o}`;await n.exec(`cat <<'${g}' >${o}
${await h}
${g}
`);let v=[],y=`EOF-${i}`;await n.exec(`cat <<'${y}' >${i}
${await m}
${y}
`),v.push(i);let C=await e({env:p,cmd:r,args:v,output:l}),w=new oT.StringDecoder;C.stderr.on("data",x=>{let T=w.write(x).replace(/^.*DeprecationWarning: Buffer\(\) is deprecated.*$\r?\n?/mg,"").trim();T&&l.write(_e(`Remote-Containers server: ${T}`))}),C.exit.then(({code:x,signal:T})=>{l.write(`Remote-Containers server terminated (code: ${x}, signal: ${T}).`)},x=>{l.write(_e(`Remote-Containers did not launch: ${x&&(x.stack||x.message)||String(x)}`))});let b,E=new Promise(x=>b=x),S=f4(f,d)(Z(U({},u.reduce((x,T)=>{let R=s[T];return x[T]=()=>g4(t,R),x},{})),{rpc:async(x,T)=>{try{let R=JSON.parse(x),q=await GP(c,R.command,R.stdin);T(void 0,JSON.stringify(q))}catch(R){console.error(R),T(R)}},ready:x=>{b(),x()}}));return(0,nT.default)(ya.source(C.stdout),S.createStream(),ya.sink(C.stdin)),{ready:E,mrpcExec:h4(S),mrpcExecToEnd:m4(S)}}function h4(t){return async e=>{let{cmd:r,args:n,cwd:i,env:o,output:s}=e,a=`Run in container: ${r} ${(n||[]).join(" ").replace(/\n.*/g,"")}`,c=s.start(a),l=await new Promise((u,d)=>{t.exec({cmd:r,args:n,cwd:i,env:o},(f,p)=>{f?d(f):u(p)})});return{stdin:Ny.sink(t.stdin(l,u=>{u&&u.message!=="unexpected end of parent stream"&&console.error(u)})),stdout:Ny.source(t.stdout(l)),stderr:Ny.source(t.stderr(l)),exit:new Promise((u,d)=>{t.exit(l,(f,p)=>{s.stop(a,c),f?d(f):u(p)})}),terminate:async()=>new Promise((u,d)=>{t.terminate(l,f=>{f?d(f):u()})})}}}function m4(t){return async e=>{let{cmd:r,args:n,cwd:i,env:o,output:s}=e,a=`Run in container: ${r} ${(n||[]).join(" ").replace(/\n.*/g,"")}`,c=s.start(a);return new Promise((l,u)=>{t.execToEnd({cmd:r,args:n,cwd:i,env:o},(d,f)=>{if(s.stop(a,c),d||!f)u({stdin:new Gi.Writable,stdout:Gi.Readable.from([]),stderr:Gi.Readable.from([]),exit:Promise.reject(d),terminate:async()=>{}});else{let p=Gi.Readable.from([Buffer.from(f.stdout.data)]),h=new Promise(v=>p.on("end",v)),m=Gi.Readable.from([Buffer.from(f.stderr.data)]),g=new Promise(v=>m.on("end",v));l({stdin:new Gi.Writable,stdout:p,stderr:m,exit:Promise.all([h,g]).then(()=>({code:f.code,signal:f.signal})),terminate:async()=>{}})}})})}}function g4(t,e){let{cliHost:r}=t;if(r.type!=="local")return v4(t,e);if(r.platform!=="win32"||e.startsWith("\\\\.\\pipe\\"))return ya.duplex(Ff.connect(e));let n=new Ff.Socket;return(async()=>{let i=await r.readFile(e),o=i.indexOf(10),s=parseInt(i.slice(0,o).toString(),10),a=i.slice(o+1);n.connect(s,"127.0.0.1",()=>{n.write(a,c=>{c&&(console.error(c),n.destroy())})})})().catch(i=>{console.error(i),n.destroy()}),ya.duplex(n)}function v4({cliHost:t,fireEvent:e,output:r},n){let i=t.exec({cmd:"socat",args:["-",`UNIX-CONNECT:${n}`],output:r});i.then(l=>l.exit.then(({code:u,signal:d})=>{(u||d)&&(r.write(_e(`socat terminated (code: ${u}, signal: ${d}).`)),u===127&&e({type:"socatNotFound"}))})).catch(l=>{r.write(_e(`socat did not launch: ${l&&(l.stack||l.message)||String(l)}`))});let o=i.then(l=>ya.sink(l.stdin)),s=i.then(l=>ya.source(l.stdout));return{sink:l=>{o.then(u=>u(l))},source:(l,u)=>{s.then(d=>d(l,u))}}}var Ly="\\\\.\\pipe\\openssh-ssh-agent";function y4(t){if(t.env.SSH_AUTH_SOCK)return t.env.SSH_AUTH_SOCK;if(t.platform==="win32")return Ly}var qf=new Set;async function w4(t,e,r,n){let i=await n.processId;if(i&&i>0){let o=await QP(t,i),s=o.REMOTE_CONTAINERS_IPC;s&&s!==e&&!qf.has(s)&&s.indexOf("vscode-remote-containers-ipc")!==-1&&(qf.add(s),await t.exec(`rm '${s}' && ln -s '${e}' '${s}'`));let a=o.SSH_AUTH_SOCK;a&&r&&a!==r&&!qf.has(a)&&a.indexOf("vscode-ssh-auth")!==-1&&(qf.add(a),await t.exec(`rm '${a}' && ln -s '${r}' '${a}'`))}}var CT=V(require("net")),bT=V(wT());async function ET({forwardedPorts:t,output:e,getLogLevel:r},n,i,o){e.write(`Port forwarding for container port ${i} starts listening on local port.`,de.Debug);let s=o?{VSCODE_REMOTE_CONTAINERS_SESSION:o}:void 0;return new Promise((a,c)=>{let l=new Set,u=CT.createServer({pauseOnConnect:!0},d=>{let f=d.remotePort,p=u.address().port;e.write(`Port forwarding connection from ${f} > ${p} > ${i} in the container.`),r()===de.Trace&&(async()=>{let h=await(0,bT.default)("port",f);e.write(`Port forwarding process for ${f} > ${p} > ${i} in the container:
${JSON.stringify(h,void 0,"  ")}`)})().catch(console.error),P4(e,n,[n.nodeExecutable,"-e",`
				const net = require('net');
				process.stdin.pause();
				const client = net.createConnection({ port: ${i} }, () => {
					client.pipe(process.stdout);
					process.stdin.pipe(client);
				});
				client.on('close', function (hadError) {
					console.error(hadError ? 'Remote close with error' : 'Remote close');
					process.exit(hadError ? 1 : 0);
				});
				client.on('error', function (err) {
					process.stderr.write(err && (err.stack || err.message) || String(err));
				});
			`],s).then(h=>{let m=!1;h.exit.then(({code:g,signal:v})=>{m||(l.delete(d),d.end()),e.write(`Port forwarding ${f} > ${p} > ${i} terminated${m?" by extension":""} with code ${g} and signal ${v}.`)}),h.stderr.on("data",g=>{e.write(`Port forwarding ${f} > ${p} > ${i} stderr: ${g.toString("utf8")}`,de.Debug)}),d.on("close",g=>{e.write(`Port forwarding ${f} > ${p} > ${i}: Local close${g?" with error":""}`,de.Debug),m=!0,l.delete(d),h.terminate().catch(console.error)}),h.stdout.pipe(d),d.pipe(h.stdin),l.add(d)}).catch(console.error)});u.on("listening",()=>{let d={targetPort:i,server:u,connections:l};u.on("close",()=>{t.delete(d)}),t.add(d),e.write(`Port forwarding local port ${u.address().port} to container port ${i}`),a(u)}),u.on("error",d=>{if(d&&(d.code==="EADDRINUSE"||d.code==="EACCES")){u.listen(0,"127.0.0.1");return}c(d)}),u.on("close",()=>{c(new Error("Closed"))}),u.listen(i,"127.0.0.1")})}async function P4(t,e,r,n){return e.remoteExec({env:n,cmd:r[0],args:r.slice(1),output:t})}var _T=V(require("events"));var Uy=class{constructor(){this.nodeEmitter=new _T.EventEmitter;this.event=e=>{let r=n=>n.results.push(e(n.data));return this.nodeEmitter.on("event",r),{dispose:()=>{this.nodeEmitter.off("event",r)}}}}fire(e){let r=[];return this.nodeEmitter.emit("event",{data:e,results:r}),r}dispose(){this.nodeEmitter.removeAllListeners()}};var By=V(require("path"));var I4=V(require("http")),A4=V(require("https"));function wa(t,e={}){return new Promise((r,n)=>{let i=t.startsWith("https:")?A4:I4,o;if(Object.keys(e).length>0){let a=new URL(t);o={headers:e,host:a.host,path:a.pathname}}i.get(o!=null?o:t,a=>{var c;if(a.statusCode<200||a.statusCode>299){if(a.statusCode===302){let l=(c=a.headers)==null?void 0:c.location;l&&r(wa(l,e))}n(new Error(`HTTP ${a.statusCode}: ${a.statusMessage}`))}else{a.on("error",n);let l=[];a.on("data",u=>l.push(u)),a.on("end",()=>r(Buffer.concat(l)))}}).on("error",n)})}async function Hy(t){let e=await Ce(By.join(t,"package.json"),"utf8");return JSON.parse(e)}async function Vy(t){let e=await Ce(By.join(t,"product.json"),"utf8"),r=JSON.parse(e);return r.commit||(r.commit=await T4(r.quality)),r.serverDataFolderName||(r.serverDataFolderName=".vscode-server-oss"),r}async function T4(t="insider"){let e=`https://update.code.visualstudio.com/api/update/server-linux-x64/${t}/latest`,r=await wa(e);return JSON.parse(r.toString()).version}var ut=!0;var Ca=V(require("path"));function ba(t,e){let r,n=t.platform==="win32",i=Z(U({},t),{get env(){return r||(r=xT(n,t.env))}}),o=O4.bind(void 0,n,i);return t.containerWorkspaceFolder&&(i.containerWorkspaceFolder=kT(o,t.containerWorkspaceFolder)),Uf(o,e)}function ST(t,e,r,n){let i=t==="win32";return Uf(N4.bind(void 0,i,e,xT(i,r)),n)}function Uf(t,e){if(typeof e=="string")return kT(t,e);if(Array.isArray(e))return e.map(r=>Uf(t,r));if(e&&typeof e=="object"){let r=Object.create(null);return Object.keys(e).forEach(n=>{r[n]=Uf(t,e[n])}),r}return e}var R4=/\$\{(.*?)\}/g;function xT(t,e){if(t){let r=Object.create(null);return Object.keys(e).forEach(n=>{r[n.toLowerCase()]=e[n]}),r}return e}function kT(t,e){return e.replace(R4,D4.bind(void 0,t))}function D4(t,e,r){let n,i=r.split(":");return i.length>1&&(r=i[0],n=i[1]),t(e,r,n)}function O4(t,e,r,n,i){switch(n){case"env":case"localEnv":return PT(t,e.env,i,r,e.configFile);case"localWorkspaceFolder":return e.localWorkspaceFolder!==void 0?e.localWorkspaceFolder:r;case"localWorkspaceFolderBasename":return e.localWorkspaceFolder!==void 0?(t?Ca.win32:Ca.posix).basename(e.localWorkspaceFolder):r;case"containerWorkspaceFolder":return e.containerWorkspaceFolder!==void 0?e.containerWorkspaceFolder:r;case"containerWorkspaceFolderBasename":return e.containerWorkspaceFolder!==void 0?Ca.posix.basename(e.containerWorkspaceFolder):r;default:return r}}function N4(t,e,r,n,i,o){switch(i){case"containerEnv":return PT(t,r,o,n,e);default:return n}}function PT(t,e,r,n,i){if(r){t&&(r=r.toLowerCase());let o=e[r];return typeof o=="string"?o:""}throw new ne({description:`'${n}'${i?` in ${Ca.posix.basename(i.path)}`:""} can not be resolved because no environment variable name is given.`})}var zi=0,RT=/Extension host agent listening on (\d+)/,DT="d9c064ed-ec74-42ab-b759-c9578d277ba2",st;(function(a){a[a.Begin=0]="Begin",a[a.CloningRepository=1]="CloningRepository",a[a.BuildingImage=2]="BuildingImage",a[a.StartingContainer=3]="StartingContainer",a[a.InstallingServer=4]="InstallingServer",a[a.StartingServer=5]="StartingServer",a[a.End=6]="End"})(st||(st={}));var OT="updateContentCommand";async function Vf(t){let{params:e,startedAt:r,sharedDataFolder:n,sharedDataFolderIsLocalCacheFolder:i,remoteWorkspaceFolder:o,containerUser:s,containerGroup:a,containerEnv:c,remoteExec:l,remotePtyExec:u,remoteExecAsRoot:d,rootShellServer:f}=t,p;f&&s==="root"?p=f:p=await Wo(l,e.output,e.sessionId),s||(s=await L4(p)),!d&&s==="root"&&(d=l);let h=await o6(p),m=await M4(p,s);m||e.output.write(xg(`User ${s} not found in /etc/passwd.`));let g=await F4(c,m),v=await NT(c,m),y=await j4(v,e.product),{commit:C,quality:w}=e.product,b=C&&await q4(y,C,w||"insider",e.web),E=i6(h,w==="stable"),S=C&&n&&await LT(le.posix,n,E,C,w||"insider",e.web),x=b&&await U4(b),T;f?T=Promise.resolve(f):s==="root"&&(T=Promise.resolve(p));let R={startedAt:r,osRelease:h,build:E,user:s,gid:a||(m==null?void 0:m.gid),env:c,shell:g,homeFolder:v,userDataFolder:y,sharedDataFolderIsLocalCacheFolder:i,sharedDataFolder:n,installFolder:b,sharedInstallFolder:S,remoteWorkspaceFolder:o,nodeExecutable:x,remoteExec:l,remotePtyExec:u,remoteExecAsRoot:d,shellServer:p};return(T||d)&&(R.launchRootShellServer=()=>T||(T=Wo(d,e.output))),R}async function L4(t){return(await t.exec("id -un")).stdout.trim()}async function NT(t,e){return t.HOME||e&&e.home||"/root"}async function F4(t,e){return t.SHELL||e&&e.shell||"/bin/sh"}async function M4(t,e){let{stdout:r}=await t.exec("cat /etc/passwd",{logOutput:!1});return bf(r,e)}function bf(t,e){return t.split(/\r?\n/).map(n=>n.split(":")).map(n=>({name:n[0],uid:n[2],gid:n[3],home:n[5],shell:n[6]})).find(n=>n.name===e||n.uid===e)}async function q4(t,e,r,n){return le.posix.join(t,"bin",`${e}${r==="stable"?"":`-${r}`}${n?"-web":""}`)}async function LT(t,e,r,n,i,o){return t.join(e,"bin",r.id,`${n}${i==="stable"?"":`-${i}`}${o?"-web":""}`)}function FT(t){return le.posix.join(t.userDataFolder,"extensions")}function zo(t){return le.posix.join(t.userDataFolder,"data/Machine")}function Gf(t){return le.posix.join(t.userDataFolder,"data/Machine/settings.json")}function $4(t){return le.posix.join(t,".vscode-remote")}async function j4(t,e){return le.posix.join(t,e.serverDataFolderName)}function MT(t){return le.posix.join("/var",/^\.*(.*)$/.exec(t.serverDataFolderName)[1])}async function U4(t){return le.posix.join(t,"node")}async function Ki(t,e,r,n,i,o=zi){var v;await B4(t,e),await g6(t,e),await v6(t,e);let s=await H4(t,e,r,n),{serverDownloaded:a}=await z4(t,e),c,l,u=Promise.resolve(),d;if(!t.cliMode&&e.nodeExecutable){let y=await Mf(t,e);c=y.remoteContainersCLI,l=y.remoteEnv,u=y.ready,d=y.mrpcExec}let p=t.computeExtensionHostEnv||e.installFolder&&t.cliMode||t.postCreate.enabled?y6(t,e,r,d).then(y=>U(U(U(U({},y),l),t.cliMode?{}:{REMOTE_CONTAINERS:"true"}),r.remoteEnv?ST(t.cliHost.platform,r.configFilePath,e.env,r.remoteEnv):{})):Promise.resolve({}),h=(v=s["remote.containers.gitCredentialHelperConfigLocation"])!=null?v:t.credentialHelperConfigLocation;!t.cliMode&&e.nodeExecutable&&(await dl(t,e,[".ssh","known_hosts"],"ssh"),h!=="none"&&await Wf(e,c,t.output,"system"));let m,g;if(e.installFolder){let y=Array.from(new Set([...r.extensions||[],...(n==null?void 0:n.features.filter(b=>(ut||b.included)&&b.value).reduce((b,E)=>b.concat(E.extensions||[]),[]))||[]])),C=await Y4(t,e,y),w=await u6(t,e,o,d,C,p);m=w,t.forwardServerPort&&e.nodeExecutable&&(g=await ET(t,e,w,t.sessionId),m=g.address().port,t.backgroundTasks.push(async()=>h6(t,e,r)))}if(t.postCreate.enabled){let y,C=!1,w=new Promise(E=>y=()=>{C=!0,E()}),b=(async()=>{var E;if((r.waitFor||OT)==="initializeCommand"&&y(),!(t.postCreate.skipNonBlocking&&C)&&(await Qy(t,e,r,"onCreateCommand",p,u,i,!1,y),!(t.postCreate.skipNonBlocking&&C)&&(await Qy(t,e,r,"updateContentCommand",p,u,i,!!t.prebuild,y),!(t.postCreate.skipNonBlocking&&C)))){if(!t.prebuild){if(await Qy(t,e,r,"postCreateCommand",p,u,i,!1,y),t.postCreate.skipNonBlocking&&C||(await Tk(t,e,p,u,s),!t.cliMode&&e.nodeExecutable&&(((E=s["remote.containers.copyGitConfig"])!=null?E:t.isCopyGitConfigEnabled)&&(await dl(t,e,[".gitconfig"],"git"),await zy(t,e,p.then(S=>U(U({},e.env),S)))),await Wf(e,c,t.output,h)),await s6(t,e,r,p,u,i,y),t.postCreate.skipNonBlocking&&C))return;await c6(t,e,r,p,u,i,y)}t.postCreate.done()}})();t.backgroundTasks.push(b),await Promise.race([w,b])}return{hostOrContainerPort:m,hostPortServer:g,remoteEnv:t.computeExtensionHostEnv?await p:{},serverDownloaded:a}}async function B4(t,e){let r=$4(e.homeFolder);!await Kf(e.shellServer,e.userDataFolder)&&await Kf(e.shellServer,r)&&await ci(t,e,["/bin/sh","-c",`cp -r '${r}' '${e.userDataFolder}'`])}async function H4(t,e,r,n){let i=zo(e),o=le.posix.join(i,".writeMachineSettingsMarker"),s=Gf(e);if(await fl(e.shellServer,o)){let a=Object.assign({},...(n==null?void 0:n.features.filter(c=>(ut||c.included)&&c.value&&c.settings).map(c=>c.settings))||[],r.settings);if(V4(a,r.portsAttributes),G4(a,r.otherPortsAttributes),Object.keys(a).length)return await e.shellServer.exec(`mkdir -p '${le.posix.dirname(s)}' && cat >'${s}' <<'settingsJSON'
${JSON.stringify(a,null,"	")}
settingsJSON
`),a}try{let{stdout:a}=await e.shellServer.exec(`cat ${s}`);return De(a)||{}}catch{return{}}}function V4(t,e){if(!t||!e)return;let r="remote.portsAttributes";if(!t[r]){t[r]=e;return}for(let n in e)t[r][n]||(t[r][n]=e[n])}function G4(t,e){if(!t||!e)return;let r="remote.otherPortsAttributes";t[r]||(t[r]=e)}async function Wy(t,e,r,n){let i=typeof t.gid=="string"?`${t.user}:${t.gid}`:t.user,o=await e();(await o.exec(`stat -c %u ${r}`)).stdout.trim()==="0"?(await o.exec(`chown ${i} ${le.posix.dirname(r)}`),await o.exec(`chown -R ${i} ${r}`)):n&&(await o.exec(`stat -c %u ${n}`)).stdout.trim()==="0"&&await o.exec(`chown -R ${i} ${le.posix.dirname(n)}`)}async function Wf(t,e,r,n){if(e&&n!=="none"){let i=n==="system"?t.launchRootShellServer&&await t.launchRootShellServer():t.shellServer;i?await i.exec(`command -v git >/dev/null 2>&1 && git config --${n} --replace-all credential.helper '!f() { ${t.nodeExecutable} ${e} $*; }; f' || true`):r.write("Cannot configure system wide Git credential helper without root access.")}}async function dl(t,e,r,n){let{cliHost:i}=t,o=i.path.join(await i.homedir(),...r),s=le.posix.join(e.homeFolder,...r);await ol(t,e,o,s,n)}async function zy(t,e,r){let{cliHost:n}=t,{env:i}=n,o=["git","config"],s=i.XDG_CONFIG_HOME?[i.XDG_CONFIG_HOME]:[await n.homedir(),".config"],a=n.path.join(...s,...o),c=(async()=>{let l=await r,u=l.XDG_CONFIG_HOME?[l.XDG_CONFIG_HOME]:[e.homeFolder,".config"];return le.posix.join(...u,...o)})();await ol(t,e,a,c,"git")}async function ol(t,e,r,n,i){let o=await W4(t.cliHost,r);if(o)try{let s=await n;await e.shellServer.exec(`# Test for ${s} and ${i}
[ -e ${s} ] && echo ${s} exists && exit 1
command -v ${i} >/dev/null 2>&1 || (echo ${i} not found && exit 1) || exit 1
mkdir -p ${le.posix.dirname(s)}`),await e.shellServer.exec(`# Copy ${r} to ${s}
${pl(o.byteLength)} >${s}`,{stdin:o})}catch(s){if(s&&s.code!==1)throw s}}async function W4(t,e){try{return await t.readFile(e)}catch(r){if(r&&(r.code==="ENOENT"||r.code==="EISDIR"))return;throw r}}async function z4(t,e){let{commit:r}=t.product,{installFolder:n,shellServer:i,launchRootShellServer:o,build:s}=e;if(!(r&&n))return{serverDownloaded:void 0};K4(e.osRelease,s),s.preview&&t.output.write(`\r
[1mSupport for ${s.label} is in preview.[22m\r
\r
`);let a=await Kf(i,n),c;a||s===HT[s.arch]&&(o?c=(await o()).exec("apk info | grep -e '^libstdc++$' || (apk update && apk add libstdc++)"):c=i.exec(`apk info | grep -e '^libstdc++$' || (echo "ERROR: libstdc++ not found. Please install." >&2 && exit 1)`));let l=e.sharedInstallFolder;if(l&&await Kf(i,l))return a||await i.exec(`mkdir -p '${le.posix.dirname(n)}' && ln -snf '${l}' '${n}'`),o&&(async()=>{await(await o()).exec(`touch '${l}'`)})().catch(console.error),await c,{serverDownloaded:!1};if(a)return{serverDownloaded:!1};t.progress(4),t.output.write(`Installing VS Code Server for commit ${r}\r
`);let u=!!(l&&o),d=u?l:n,f=u?await o():i,p={localCacheFolder:t.localCacheFolder,build:s,commit:r,quality:t.product.quality||"insider",web:t.web,output:t.output},h=Ky(p),m=await lt(h);m||await qT(p);try{e.sharedDataFolderIsLocalCacheFolder?await jT(p):await $T(t,f,h,d)}catch(g){if(g&&g.stderr&&/unexpected end of file|not in gzip format/i.test(g.stderr.toString()))await qT(p),e.sharedDataFolderIsLocalCacheFolder?await jT(p):await $T(t,f,h,d);else throw g}return u&&(await i.exec(`mkdir -p '${le.posix.dirname(n)}' && ln -snf '${l}' '${n}'`),(async()=>{await f.exec(`cd '${le.posix.dirname(l)}' && ls -t | tail -n +10 | xargs rm -rf`)})().catch(console.error)),await c,{serverDownloaded:!m}}function K4(t,e){let r=t.version;if(e.minVersion&&r){let n=Xo(r.trim());if(n&&ha(n,e.minVersion)){let i=`${e.label} ${e.minVersion.join(".")} or later required.`;throw new ne({description:i,data:{reload:!1}})}}}async function qT(t){let{build:e,commit:r,quality:n,web:i,output:o}=t,s="Downloading VS Code Server",a=o.start(s);o.write(`${r} ${e.id} ${n} ${i?"web":""}`);let c=Ky(t);await nr(le.dirname(c));try{let l=`${c}_${Date.now()}`;await new Promise((u,d)=>{let f=Bf.createWriteStream(l),p=`https://update.code.visualstudio.com/commit:${r}/server-${e.id}${i?"-web":""}/${n}`;IT.https.get(p,m=>{if(m.statusCode<200||m.statusCode>299){d(new ne({description:"Downloading the VS Code Server failed. Please try again later.",originalError:`Failed to download VS Code Server (${p}): HTTP ${m.statusCode} - ${m.statusMessage}`}));return}m.on("error",d),m.pipe(f),m.on("end",u)}).on("error",d)}),await Fs(l,c)}catch(l){throw l||new Error("Failed to download VS Code Server")}finally{o.stop(s,a)}}async function $T(t,e,r,n){let i="Installing VS Code Server",o=t.output.start(i);try{let s=`${n}_${Date.now()}`;await e.exec(`mkdir -p ${s}`);let a=await Ce(r);await e.exec(`${pl(a.byteLength)} | tar --no-same-owner -xz --strip-components 1 -C ${s}`,{stdin:a}),await e.exec(`mv -n ${le.posix.join(s,".")} ${n}`)}finally{t.output.stop(i,o)}}async function jT(t){let{localCacheFolder:e,build:r,commit:n,quality:i,web:o,output:s}=t,a="Unpacking VS Code Server",c=s.start(a);s.write(`${n} ${r.id} ${i} ${o?"web":""}`);try{let l=await LT(le,e,r,n,i,o),u=`${l}_${Date.now()}`;await nr(u);let d=Ky(t);await(await fa(void 0)({cmd:"tar",args:["--no-same-owner","-xzf",d,"--strip-components","1","-C",u],cwd:process.cwd(),output:s})).exit,await bg(l,{recursive:!0}),await Fs(u,l)}finally{s.stop(a,c)}}function Ky(t){let{localCacheFolder:e,build:r,commit:n,quality:i,web:o}=t,s=le.join(e,"serverCache",n),a=`vscode-server-${r.id}${i==="stable"?"":`-${i}`}${o?"-web":""}.tar.gz`;return le.join(s,a)}async function UT(t,e){let r={VSCODE_AGENT_FOLDER:e.userDataFolder},{stdout:n}=await ci(t,e,[le.posix.join(e.installFolder,"server.sh"),...VT(t.telemetry),"--list-extensions"],e.installFolder,{remoteEnv:r});return n.toString().split(`
`).filter(i=>!!i)}async function Y4(t,e,r){let n="Preparing Extensions",i=t.output.start(n),{sharedDataFolder:o}=e,s=o?t6(o):void 0,a=BT(e),c=await Q4(t,e,r);if(e.sharedDataFolderIsLocalCacheFolder)e.shellServer.exec(`mkdir -p '${s}' && ln -s -T '${s}' '${a}' || true`),e.launchRootShellServer&&(await e.launchRootShellServer()).exec(`chown -R ${e.user} ${s}`);else{let l=e6(t.localCacheFolder),u=await X4(t,e,l,s,a,[...c.builtinExtensions,...c.extensions]);J4(t,e,l,s,a,u).catch(console.error)}return t.output.stop(n,i),c}async function Q4(t,e,r){let n=zo(e),i=le.posix.join(n,".installExtensionsMarker"),o=!await fl(e.shellServer,i),s=o?[]:t.installBuiltinExtensions||[],a=await t.getExtensionsToInstall(o,r),c=[].concat(...s.map(l=>["--install-builtin-extension",l]),...a.map(l=>["--install-extension",l]));return t.cliMode&&c.length&&c.push("--do-not-sync"),{builtinExtensions:s,extensions:a,args:c}}async function X4(t,e,r,n,i,o){t.output.write(`Extensions cache, install extensions: ${o.join(", ")||"None"}`);let{shellServer:s}=e,a=(await s.exec(`test -d ${i} && ls ${i} || true`)).stdout.trim().split(`
`).filter(c=>!!c);if(n){let c=(await s.exec(`test -d ${n} && ls ${n} || true`)).stdout.trim().split(`
`).filter(u=>!!u),l=c.filter(u=>o.some(d=>u.toLowerCase().startsWith(d.toLowerCase()))&&a.indexOf(u)===-1);if(t.output.write(`Extensions cache, link in container: ${l.join(", ")||"None"}`),l.length){await s.exec(`mkdir -p '${i}' && ln -s '${n}'/* '${i}' || true`);let{launchRootShellServer:u}=e;u&&(async()=>{await(await u()).exec(`cd ${n} && touch ${l.map(f=>`'${f}'`).join(" ")}`)})().catch(console.error)}return{remoteExtensions:[...new Set([...a,...c])],cachedExtensions:c}}else{await nr(r);let c=await Lt(r),l=c.filter(u=>o.some(d=>u.toLowerCase().startsWith(d.toLowerCase()))&&a.indexOf(u)===-1);if(t.output.write(`Extensions cache, copy to remote: ${l.join(", ")||"None"}`),l.length){let u=le.basename(r),d=Hf.c({cwd:le.dirname(r)},l.map(h=>le.join(u,h))),f=le.posix.join(i,`tmp-${Date.now()}`),p=await new Promise(h=>{let m=[];d.on("data",g=>m.push(g)),d.on("end",()=>h(Buffer.concat(m)))});await s.exec(`# Copy extensions to remote
mkdir -p ${f}
${pl(p.byteLength)} | tar --no-same-owner -x --strip-components 1 -C ${f}
mv ${f}/* ${i} && rmdir ${f}`,{stdin:p})}return{remoteExtensions:a.concat(l),cachedExtensions:c}}}async function J4(t,e,r,n,i,o){if(n&&!e.launchRootShellServer)return;let s=1e4,a=6e4;for(await Nn(s);;)o=await Z4(t,e,r,n,i,o),await Nn(a)}async function Z4(t,e,r,n,i,{remoteExtensions:o,cachedExtensions:s}){let{shellServer:a,launchRootShellServer:c,remoteExec:l}=e,u=(await a.exec(`ls ${i} || true`,{logOutput:"silent"})).stdout.trim().split(`
`).filter(f=>!!f);if(!n){let f=o.filter(p=>u.indexOf(p)===-1);t.output.write(`Extensions cache, remote removals: ${f.join(", ")||"None"}`);for(let p of f)try{await U_(le.join(r,p))}catch(h){if(!(h&&h.code==="ENOENT"))throw h}}let d=u.filter(f=>o.indexOf(f)===-1&&s.indexOf(f)===-1);if(t.output.write(`Extensions cache, copy to ${n?"shared cache":"local"}: ${d.join(", ")||"None"}`,de.Trace),d.length)if(n){let f=await c();await f.exec(`mkdir -p '${n}' && cd '${i}' && cp ${d.map(p=>`'${p}'`).join(" ")} '${n}'`),await f.exec(`cd '${n}' && ls -t | tail -n +50 | xargs rm -f`)}else{let f=le.posix.basename(i),p=await l({cmd:"tar",cwd:le.posix.dirname(i),args:["c",...d.map(v=>le.posix.join(f,v))],output:t.output}),h=le.join(le.dirname(r),`${le.basename(r)}-${Date.now()}`);await nr(h);let m=Hf.x({cwd:h,strip:1}),g=new Promise((v,y)=>{m.on("error",y),m.on("finish",v)});p.stdout.pipe(m),await g;for(let v of await Lt(h))await Fs(le.join(h,v),le.join(r,v));await bg(h)}return{remoteExtensions:u,cachedExtensions:s}}var Yy="extensionsCache";function e6(t){return le.join(t,Yy)}function t6(t){return le.posix.join(t,Yy)}function BT(t){return le.posix.join(t.userDataFolder,Yy)}var r6={x64:{label:"x86-64",id:"linux-x64",arch:"x64",stable:!0,preview:!1},armhf:{label:"ARM",id:"linux-armhf",arch:"armhf",stable:!0,preview:!0},arm64:{label:"ARM64",id:"linux-arm64",arch:"arm64",stable:!0,preview:!0}},HT={x64:{label:"Alpine Linux",id:"linux-alpine",arch:"x64",stable:!0,preview:!0,minVersion:[3,9]},arm64:{label:"Alpine Linux ARM64",id:"alpine-arm64",arch:"arm64",stable:!0,preview:!0,minVersion:[3,9]}},n6={x86_64:"x64",armv7l:"armhf",arm64:"arm64",aarch64:"arm64"};function i6(t,e){let r=n6[t.hardware];if(t.id==="alpine"){let i=r&&HT[r];if(!i)throw new ne({description:`Alpine Linux is not supported on the hardware architecture '${t.hardware}' of the container.`,data:{learnMoreUrl:"https://aka.ms/vscode-remote/linux",reload:!1}});return i}let n=r&&r6[r];if(!n||e&&!n.stable)throw new ne({description:`The hardware architecture '${t.hardware}' of the container is not supported.`,data:{learnMoreUrl:"https://aka.ms/vscode-remote/linux",reload:!1}});return n}async function o6(t){let e="unknown",r="unknown",n="unknown";try{e=(await t.exec("uname -m")).stdout.trim();let{stdout:i}=await t.exec("(cat /etc/os-release || cat /usr/lib/os-release) 2>/dev/null");r=(i.match(/^ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound",n=(i.match(/^VERSION_ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound"}catch(i){console.error(i)}return{hardware:e,id:r,version:n}}async function Qy(t,e,r,n,i,o,s,a,c){let l=le.posix.join(zo(e),`.${n}Marker`),u=await fl(e.shellServer,l)||a;await Xy(t,e,r,n,i,o,s,u,c)}async function s6(t,e,r,n,i,o,s){let a=le.posix.join(zo(e),".postStartCommandMarker"),c=!!e.startedAt&&await a6(e.shellServer,a,e.startedAt);await Xy(t,e,r,"postStartCommand",n,i,o,c,s)}async function a6(t,e,r){try{return await t.exec(`mkdir -p '${le.posix.dirname(e)}' && [ "$(cat '${e}' 2>/dev/null)" != '${r}' ] && echo '${r}' > '${e}'`),!0}catch(n){return!1}}async function c6(t,e,r,n,i,o,s){await Xy(t,e,r,"postAttachCommand",n,i,o,!0,s)}async function Xy({postCreate:t},e,r,n,i,o,s,a,c){let l=r[n];if(a&&l&&(typeof l=="string"?l.trim():l.length)){await o,s&&await s();let u=`Running ${n}...`,d=typeof l=="string"?l:l.join(" "),f=rt({event(p){t.output.event(p),p.type==="raw"&&p.text.includes("::endstep::")&&t.output.event({type:"progress",name:u,status:"running",stepDetail:""}),p.type==="raw"&&p.text.includes("::step::")&&t.output.event({type:"progress",name:u,status:"running",stepDetail:`${p.text.split("::step::")[1].split(`\r
`)[0]}`})},get dimensions(){return t.output.dimensions},onDidChangeDimensions:t.output.onDidChangeDimensions},de.Info);try{f.event({type:"progress",name:u,status:"running",stepDetail:d});let p=e.remoteWorkspaceFolder||e.homeFolder;f.raw(`[1mRunning the ${n} from devcontainer.json...[0m\r
\r
`),await m6(Z(U({},t),{output:f}),e,typeof l=="string"?["/bin/sh","-c",l]:l,p,{remoteEnv:await i,print:"continuous"}),f.raw(`\r
`),f.event({type:"progress",name:u,status:"succeeded"})}catch(p){if(f.event({type:"progress",name:u,status:"failed"}),p&&(p.code===130||p.signal===2))f.raw(`\r
[1m${n} interrupted.[0m\r
\r
`);else throw new ne({description:`The ${n} in the devcontainer.json failed.`,originalError:p})}}n===(r.waitFor||OT)&&c()}async function zf(t,e){try{return await t.exec(`test -f ${e}`),!0}catch(r){return!1}}async function fl(t,e){try{return await t.exec(pf(e)),!0}catch(r){return!1}}function pf(t){return`test ! -f '${t}' && set -o noclobber && mkdir -p '${le.posix.dirname(t)}' && { > '${t}' ; } 2> /dev/null`}async function Kf(t,e){try{return await l6(t,e),!0}catch(r){return!1}}async function l6(t,e){return t.exec(`test -d ${e}`)}async function u6(t,e,r,n,i,o){let{userDataFolder:s,installFolder:a,sharedInstallFolder:c,shellServer:l}=e,{processes:u,mntNS:d}=await wy(l),f=new RegExp(`${le.posix.join(le.posix.dirname(a).replace(".","\\."),"[^/]*","server.sh")}`),p=u.filter(T=>T.mntNS===d&&f.test(T.cmd)),{current:h,others:m}=p.reduce((T,R)=>(T[(R.cwd===a||R.cwd===c)&&f.test(R.cmd)?"current":"others"].push(R),T),{current:[],others:[]});if(!t.cliMode&&m.length){t.output.write(`Terminating old extension host agent.\r
`);try{await l.exec(`kill -9 ${m.map(T=>T.pgrp?`-${T.pgrp}`:T.pid).join(" ")}`)}catch(T){}}let{commit:g,quality:v}=t.product,y=le.posix.join(zo(e),`.devport-${g}${v==="stable"?"":`-${v}`}${t.web?"-web":""}`);if(h.length){t.output.write(`Extension host agent is already running.\r
`);try{let{stdout:T}=await l.exec(`cat '${y}' 2>/dev/null`),R=T.toString().trim();return parseInt(R,10)}catch(T){console.error(T),t.output.write(`Agent port not found. Terminating old extension host agent.\r
`);try{await l.exec(`kill -9 ${h.map(R=>R.pgrp?`-${R.pgrp}`:R.pid).join(" ")}`)}catch(R){}}}t.progress(5);let C="Starting VS Code Server",w=t.output.start(C),b=[le.posix.join(a,"server.sh"),"--log",z_(t.getLogLevel()),"--force-disable-user-env",...d6(t),...VT(t.telemetry),"--port",String(r),...t.connectionToken?["--connectionToken",t.connectionToken]:[],"--extensions-download-dir",BT(e),...i.args,"--start-server",...t.isLocalContainer?["--disable-websocket-compression"]:[""],...t.cliMode?["--enable-remote-auto-shutdown"]:[]],S=(await ci(t,{remoteExec:await n||e.remoteExec},b,a,{remoteEnv:U({SHELL:e.shell,VSCODE_AGENT_FOLDER:s},t.cliMode?await o:{}),resolveOn:RT,print:"continuous"})).cmdOutput;t.output.stop(C,w);let x=(RT.exec(S)||[])[1];if(!x)throw new Error("Port not found");return await l.exec(`echo ${x} >'${y}'`),parseInt(x,10)}function d6(t){return t.isLocalContainer?["--use-host-proxy"]:[]}function VT(t){return t?[]:["--disable-telemetry"]}var f6=/^([a-z0-9\-]+):(\d{1,5})$/;function p6(t){let e=t.match(f6);if(!(!e||e.length!==3))return{host:e[1],port:Number(e[2])}}async function h6(t,e,r){let n=await t.getTunnels();await Promise.all((r.forwardPorts||[]).filter(i=>!n.find(o=>o.remoteAddress.port===i)).map(async i=>{let o,s;if(typeof i=="number")o=i;else{let a=p6(i);if(!a)return;s=a.host,o=a.port}return t.openTunnel(e,o,s)}))}async function m6(t,{remotePtyExec:e},r,n,i={}){let o=i.print||(i.silent?"off":"end"),s=await e({env:i.remoteEnv,cwd:n,cmd:r[0],args:r.slice(1),output:i.silent?Ge:t.output}),a="",c,l=new Promise(f=>{c=f});s.onData(f=>{a+=f,o==="continuous"&&t.output.raw(f),i.resolveOn&&i.resolveOn.exec(a)&&c()});let u=t.onDidInput&&t.onDidInput(f=>s.write(f)),d=await Promise.race([s.exit,l]);return u&&u.dispose(),o==="end"&&t.output.raw(a),d&&(d.code||d.signal)?Promise.reject({message:`Command failed: ${r.join(" ")}`,cmdOutput:a,code:d.code,signal:d.signal}):{cmdOutput:a}}async function ci(t,{remoteExec:e},r,n,i={}){let o=i.print||(i.silent?"off":"end"),s=await e({env:i.remoteEnv,cwd:n,cmd:r[0],args:r.slice(1),output:i.silent?Ge:t.output}),a=[],c=[],l=new Gy.StringDecoder,u=new Gy.StringDecoder,d="",f="",p,h,m=new Promise((w,b)=>{p=w,h=b});s.stdout.on("data",w=>{a.push(w);let b=l.write(w);o==="continuous"&&t.output.write(b.replace(/\r?\n/g,`\r
`)),d+=b,i.resolveOn&&i.resolveOn.exec(d)&&p()}),s.stderr.on("data",w=>{c.push(w),f+=u.write(w)}),i.stdin instanceof Buffer?(s.stdin.write(i.stdin,w=>{w&&h(w)}),s.stdin.end()):i.stdin instanceof Bf.ReadStream&&i.stdin.pipe(s.stdin);let g=await Promise.race([s.exit,m]),v=Buffer.concat(a),y=Buffer.concat(c);o==="end"&&(t.output.write(d.replace(/\r?\n/g,`\r
`)),t.output.write(_e(f)));let C=`${d}
${f}`;return g&&(g.code||g.signal)?Promise.reject({message:`Command failed: ${r.join(" ")}`,cmdOutput:C,stdout:v,stderr:y,code:g.code,signal:g.signal}):{cmdOutput:C,stdout:v,stderr:y}}function pl(t){let e=8*1024,r=t%e,n=(t-r)/e;return`(dd iflag=fullblock bs=${e} count=${n} 2>/dev/null; dd iflag=fullblock bs=${r} count=1 2>/dev/null)`}async function g6(t,e){let r=le.posix.join(MT(t.product),".patchEtcEnvironmentMarker");if(t.allowSystemConfigChange&&e.launchRootShellServer&&!await zf(e.shellServer,r)){let n=await e.launchRootShellServer();await fl(n,r)&&await n.exec(`cat >> /etc/environment <<'etcEnvrionmentEOF'
${Object.keys(e.env).map(i=>`
${i}=${e.env[i]}`).join("")}
etcEnvrionmentEOF
`)}}async function v6(t,e){let r=le.posix.join(MT(t.product),".patchEtcProfileMarker");if(t.allowSystemConfigChange&&e.launchRootShellServer&&!await zf(e.shellServer,r)){let n=await e.launchRootShellServer();await fl(n,r)&&await n.exec("sed -i -E 's/((^|\\s)PATH=)([^\\$]*)$/\\1${PATH:-\\3}/g' /etc/profile || true")}}async function y6(t,e,{userEnvProbe:r},n){if(t.output.write(`userEnvProbe: ${r||t.defaultUserEnvProbe}${r?"":" (default)"}`),r||(r=t.defaultUserEnvProbe),r==="none")return{};try{let o=(await(0,TT.promisify)(AT.randomBytes)(16)).toString("hex"),s=new RegExp(o+"(.*)"+o),a=e.shell;t.output.write(`userEnvProbe shell: ${a}`);let c=e.nodeExecutable,l=le.posix.basename(a),u,d;/^pwsh(-preview)?$/.test(l)?(u=`& '${c}' -p '''${o}'' + JSON.stringify(process.env) + ''${o}'''`,d=r==="loginInteractiveShell"||r==="loginShell"?["-Login","-Command"]:["-Command"]):(u=`'${c}' -p '"${o}" + JSON.stringify(process.env) + "${o}"'`,d=[r==="loginInteractiveShell"?"-lic":r==="loginShell"?"-lc":r==="interactiveShell"?"-ic":"-c"]);let f=rt(t.output,de.Trace),p=ci({output:f},{remoteExec:await n||e.remoteExec},[a,...d,u],e.installFolder);Promise.race([p,Nn(2e3)]).then(async E=>{if(!E){let{processes:S}=await wy(e.shellServer),x=S.find(T=>T.cmd.startsWith(a)&&T.cmd.indexOf(o)!==-1);if(x){let R=XP(S)[x.pid];t.output.write(`userEnvProbe is taking longer than 2 seconds. Process tree:
${Cy(R)}`)}else t.output.write("userEnvProbe is taking longer than 2 seconds. Process not found.")}},()=>{}).catch(E=>t.output.write(_e(E&&(E.stack||E.message)||"Error reading process tree.")));let h=await Promise.race([p,Nn(1e4)]);if(!h)return t.output.write(_e("userEnvProbe is taking longer than 10 seconds. Avoid waiting for user input in your shell's startup scripts. Continuing.")),{};let m=h.stdout.toString(),g=s.exec(m),v=g?g[1]:"{}",y=JSON.parse(v);t.output.write(`userEnvProbe parsed: ${JSON.stringify(y,void 0,"  ")}`,de.Trace);let C=y.PATH,w=e.env.PATH,b=!(t.allowSystemConfigChange&&e.launchRootShellServer)&&C&&w;if(b){let E=e.user;y.PATH=w6(C,w,E==="root"||E==="0")}return t.output.write(`userEnvProbe PATHs:
Probe:     ${typeof C=="string"?`'${C}'`:"None"}
Container: ${typeof w=="string"?`'${w}'`:"None"}${b?`
Merged:    ${typeof y.PATH=="string"?`'${y.PATH}'`:"None"}`:""}`),y}catch(i){return t.output.write(_e(i&&(i.stack||i.message)||"Error reading shell environment.")),{}}}function w6(t,e,r){let n=t.split(":"),i=0;for(let o of e.split(":")){let s=n.indexOf(o);s===-1?(r||!/\/sbin(\/|$)/.test(o))&&n.splice(i++,0,o):i=s+1}return n.join(":")}async function GT(t){for(let e of t)await(typeof e=="function"?e():e)}var FR=V(require("crypto")),wl=V(require("path"));function WT(t){return typeof t=="undefined"||t===null}function C6(t){return typeof t=="object"&&t!==null}function b6(t){return Array.isArray(t)?t:WT(t)?[]:[t]}function E6(t,e){var r,n,i,o;if(e)for(o=Object.keys(e),r=0,n=o.length;r<n;r+=1)i=o[r],t[i]=e[i];return t}function _6(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function S6(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var x6=WT,k6=C6,P6=b6,I6=_6,A6=S6,T6=E6,vt={isNothing:x6,isObject:k6,toArray:P6,repeat:I6,isNegativeZero:A6,extend:T6};function zT(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function hl(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=zT(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}hl.prototype=Object.create(Error.prototype);hl.prototype.constructor=hl;hl.prototype.toString=function(e){return this.name+": "+zT(this,e)};var cr=hl;function Jy(t,e,r,n,i){var o="",s="",a=Math.floor(i/2)-1;return n-e>a&&(o=" ... ",e=n-a+o.length),r-n>a&&(s=" ...",r=n+a-s.length),{str:o+t.slice(e,r).replace(/\t/g,"\u2192")+s,pos:n-e+o.length}}function Zy(t,e){return vt.repeat(" ",e-t.length)+t}function R6(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,s=-1;o=r.exec(t.buffer);)i.push(o.index),n.push(o.index+o[0].length),t.position<=o.index&&s<0&&(s=n.length-2);s<0&&(s=n.length-1);var a="",c,l,u=Math.min(t.line+e.linesAfter,i.length).toString().length,d=e.maxLength-(e.indent+u+3);for(c=1;c<=e.linesBefore&&!(s-c<0);c++)l=Jy(t.buffer,n[s-c],i[s-c],t.position-(n[s]-n[s-c]),d),a=vt.repeat(" ",e.indent)+Zy((t.line-c+1).toString(),u)+" | "+l.str+`
`+a;for(l=Jy(t.buffer,n[s],i[s],t.position,d),a+=vt.repeat(" ",e.indent)+Zy((t.line+1).toString(),u)+" | "+l.str+`
`,a+=vt.repeat("-",e.indent+u+3+l.pos)+`^
`,c=1;c<=e.linesAfter&&!(s+c>=i.length);c++)l=Jy(t.buffer,n[s+c],i[s+c],t.position-(n[s]-n[s+c]),d),a+=vt.repeat(" ",e.indent)+Zy((t.line+c+1).toString(),u)+" | "+l.str+`
`;return a.replace(/\n$/,"")}var D6=R6,O6=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],N6=["scalar","sequence","mapping"];function L6(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function F6(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(O6.indexOf(r)===-1)throw new cr('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=L6(e.styleAliases||null),N6.indexOf(this.kind)===-1)throw new cr('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var jt=F6;function KT(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(o,s){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=s)}),r[i]=n}),r}function M6(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function ew(t){return this.extend(t)}ew.prototype.extend=function(e){var r=[],n=[];if(e instanceof jt)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new cr("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof jt))throw new cr("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new cr("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new cr("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof jt))throw new cr("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(ew.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=KT(i,"implicit"),i.compiledExplicit=KT(i,"explicit"),i.compiledTypeMap=M6(i.compiledImplicit,i.compiledExplicit),i};var q6=ew,$6=new jt("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),j6=new jt("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),U6=new jt("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),B6=new q6({explicit:[$6,j6,U6]});function H6(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function V6(){return null}function G6(t){return t===null}var W6=new jt("tag:yaml.org,2002:null",{kind:"scalar",resolve:H6,construct:V6,predicate:G6,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function z6(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function K6(t){return t==="true"||t==="True"||t==="TRUE"}function Y6(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var Q6=new jt("tag:yaml.org,2002:bool",{kind:"scalar",resolve:z6,construct:K6,predicate:Y6,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function X6(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function J6(t){return 48<=t&&t<=55}function Z6(t){return 48<=t&&t<=57}function eK(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!X6(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!J6(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!Z6(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function tK(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function rK(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1==0&&!vt.isNegativeZero(t)}var nK=new jt("tag:yaml.org,2002:int",{kind:"scalar",resolve:eK,construct:tK,predicate:rK,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),iK=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function oK(t){return!(t===null||!iK.test(t)||t[t.length-1]==="_")}function sK(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var aK=/^[-+]?[0-9]+e/;function cK(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(vt.isNegativeZero(t))return"-0.0";return r=t.toString(10),aK.test(r)?r.replace("e",".e"):r}function lK(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!=0||vt.isNegativeZero(t))}var uK=new jt("tag:yaml.org,2002:float",{kind:"scalar",resolve:oK,construct:sK,predicate:lK,represent:cK,defaultStyle:"lowercase"}),dK=B6.extend({implicit:[W6,Q6,nK,uK]}),fK=dK,YT=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),QT=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function pK(t){return t===null?!1:YT.exec(t)!==null||QT.exec(t)!==null}function hK(t){var e,r,n,i,o,s,a,c=0,l=null,u,d,f;if(e=YT.exec(t),e===null&&(e=QT.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(o=+e[4],s=+e[5],a=+e[6],e[7]){for(c=e[7].slice(0,3);c.length<3;)c+="0";c=+c}return e[9]&&(u=+e[10],d=+(e[11]||0),l=(u*60+d)*6e4,e[9]==="-"&&(l=-l)),f=new Date(Date.UTC(r,n,i,o,s,a,c)),l&&f.setTime(f.getTime()-l),f}function mK(t){return t.toISOString()}var gK=new jt("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:pK,construct:hK,instanceOf:Date,represent:mK});function vK(t){return t==="<<"||t===null}var yK=new jt("tag:yaml.org,2002:merge",{kind:"scalar",resolve:vK}),tw=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function wK(t){if(t===null)return!1;var e,r,n=0,i=t.length,o=tw;for(r=0;r<i;r++)if(e=o.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8==0}function CK(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,o=tw,s=0,a=[];for(e=0;e<i;e++)e%4==0&&e&&(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)),s=s<<6|o.indexOf(n.charAt(e));return r=i%4*6,r===0?(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)):r===18?(a.push(s>>10&255),a.push(s>>2&255)):r===12&&a.push(s>>4&255),new Uint8Array(a)}function bK(t){var e="",r=0,n,i,o=t.length,s=tw;for(n=0;n<o;n++)n%3==0&&n&&(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]),r=(r<<8)+t[n];return i=o%3,i===0?(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]):i===2?(e+=s[r>>10&63],e+=s[r>>4&63],e+=s[r<<2&63],e+=s[64]):i===1&&(e+=s[r>>2&63],e+=s[r<<4&63],e+=s[64],e+=s[64]),e}function EK(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var _K=new jt("tag:yaml.org,2002:binary",{kind:"scalar",resolve:wK,construct:CK,predicate:EK,represent:bK}),SK=Object.prototype.hasOwnProperty,xK=Object.prototype.toString;function kK(t){if(t===null)return!0;var e=[],r,n,i,o,s,a=t;for(r=0,n=a.length;r<n;r+=1){if(i=a[r],s=!1,xK.call(i)!=="[object Object]")return!1;for(o in i)if(SK.call(i,o))if(!s)s=!0;else return!1;if(!s)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}function PK(t){return t!==null?t:[]}var IK=new jt("tag:yaml.org,2002:omap",{kind:"sequence",resolve:kK,construct:PK}),AK=Object.prototype.toString;function TK(t){if(t===null)return!0;var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1){if(n=s[e],AK.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[e]=[i[0],n[i[0]]]}return!0}function RK(t){if(t===null)return[];var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1)n=s[e],i=Object.keys(n),o[e]=[i[0],n[i[0]]];return o}var DK=new jt("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:TK,construct:RK}),OK=Object.prototype.hasOwnProperty;function NK(t){if(t===null)return!0;var e,r=t;for(e in r)if(OK.call(r,e)&&r[e]!==null)return!1;return!0}function LK(t){return t!==null?t:{}}var FK=new jt("tag:yaml.org,2002:set",{kind:"mapping",resolve:NK,construct:LK}),XT=fK.extend({implicit:[gK,yK],explicit:[_K,IK,DK,FK]}),Yi=Object.prototype.hasOwnProperty,Yf=1,JT=2,ZT=3,Qf=4,rw=1,MK=2,eR=3,qK=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,$K=/[\x85\u2028\u2029]/,jK=/[,\[\]\{\}]/,tR=/^(?:!|!!|![a-z\-]+!)$/i,rR=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function nR(t){return Object.prototype.toString.call(t)}function Ln(t){return t===10||t===13}function Zo(t){return t===9||t===32}function lr(t){return t===9||t===32||t===10||t===13}function Ea(t){return t===44||t===91||t===93||t===123||t===125}function UK(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function BK(t){return t===120?2:t===117?4:t===85?8:0}function HK(t){return 48<=t&&t<=57?t-48:-1}function iR(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function VK(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var oR=new Array(256),sR=new Array(256);for(es=0;es<256;es++)oR[es]=iR(es)?1:0,sR[es]=iR(es);var es;function GK(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||XT,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function aR(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=D6(r),new cr(e,r)}function ce(t,e){throw aR(t,e)}function Xf(t,e){t.onWarning&&t.onWarning.call(null,aR(t,e))}var cR={YAML:function(e,r,n){var i,o,s;e.version!==null&&ce(e,"duplication of %YAML directive"),n.length!==1&&ce(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&ce(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),s=parseInt(i[2],10),o!==1&&ce(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=s<2,s!==1&&s!==2&&Xf(e,"unsupported YAML version of the document")},TAG:function(e,r,n){var i,o;n.length!==2&&ce(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],tR.test(i)||ce(e,"ill-formed tag handle (first argument) of the TAG directive"),Yi.call(e.tagMap,i)&&ce(e,'there is a previously declared suffix for "'+i+'" tag handle'),rR.test(o)||ce(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch(s){ce(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o}};function Qi(t,e,r,n){var i,o,s,a;if(e<r){if(a=t.input.slice(e,r),n)for(i=0,o=a.length;i<o;i+=1)s=a.charCodeAt(i),s===9||32<=s&&s<=1114111||ce(t,"expected valid JSON character");else qK.test(a)&&ce(t,"the stream contains non-printable characters");t.result+=a}}function lR(t,e,r,n){var i,o,s,a;for(vt.isObject(r)||ce(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),s=0,a=i.length;s<a;s+=1)o=i[s],Yi.call(e,o)||(e[o]=r[o],n[o]=!0)}function _a(t,e,r,n,i,o,s,a,c){var l,u;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),l=0,u=i.length;l<u;l+=1)Array.isArray(i[l])&&ce(t,"nested arrays are not supported inside keys"),typeof i=="object"&&nR(i[l])==="[object Object]"&&(i[l]="[object Object]");if(typeof i=="object"&&nR(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(l=0,u=o.length;l<u;l+=1)lR(t,e,o[l],r);else lR(t,e,o,r);else!t.json&&!Yi.call(r,i)&&Yi.call(e,i)&&(t.line=s||t.line,t.lineStart=a||t.lineStart,t.position=c||t.position,ce(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete r[i];return e}function nw(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):ce(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function dt(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;Zo(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(Ln(i))for(nw(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&Xf(t,"deficient indentation"),n}function Jf(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||lr(r)))}function iw(t,e){e===1?t.result+=" ":e>1&&(t.result+=vt.repeat(`
`,e-1))}function WK(t,e,r){var n,i,o,s,a,c,l,u,d=t.kind,f=t.result,p;if(p=t.input.charCodeAt(t.position),lr(p)||Ea(p)||p===35||p===38||p===42||p===33||p===124||p===62||p===39||p===34||p===37||p===64||p===96||(p===63||p===45)&&(i=t.input.charCodeAt(t.position+1),lr(i)||r&&Ea(i)))return!1;for(t.kind="scalar",t.result="",o=s=t.position,a=!1;p!==0;){if(p===58){if(i=t.input.charCodeAt(t.position+1),lr(i)||r&&Ea(i))break}else if(p===35){if(n=t.input.charCodeAt(t.position-1),lr(n))break}else{if(t.position===t.lineStart&&Jf(t)||r&&Ea(p))break;if(Ln(p))if(c=t.line,l=t.lineStart,u=t.lineIndent,dt(t,!1,-1),t.lineIndent>=e){a=!0,p=t.input.charCodeAt(t.position);continue}else{t.position=s,t.line=c,t.lineStart=l,t.lineIndent=u;break}}a&&(Qi(t,o,s,!1),iw(t,t.line-c),o=s=t.position,a=!1),Zo(p)||(s=t.position+1),p=t.input.charCodeAt(++t.position)}return Qi(t,o,s,!1),t.result?!0:(t.kind=d,t.result=f,!1)}function zK(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(Qi(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else Ln(r)?(Qi(t,n,i,!0),iw(t,dt(t,!1,e)),n=i=t.position):t.position===t.lineStart&&Jf(t)?ce(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);ce(t,"unexpected end of the stream within a single quoted scalar")}function KK(t,e){var r,n,i,o,s,a;if(a=t.input.charCodeAt(t.position),a!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(a=t.input.charCodeAt(t.position))!==0;){if(a===34)return Qi(t,r,t.position,!0),t.position++,!0;if(a===92){if(Qi(t,r,t.position,!0),a=t.input.charCodeAt(++t.position),Ln(a))dt(t,!1,e);else if(a<256&&oR[a])t.result+=sR[a],t.position++;else if((s=BK(a))>0){for(i=s,o=0;i>0;i--)a=t.input.charCodeAt(++t.position),(s=UK(a))>=0?o=(o<<4)+s:ce(t,"expected hexadecimal character");t.result+=VK(o),t.position++}else ce(t,"unknown escape sequence");r=n=t.position}else Ln(a)?(Qi(t,r,n,!0),iw(t,dt(t,!1,e)),r=n=t.position):t.position===t.lineStart&&Jf(t)?ce(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}ce(t,"unexpected end of the stream within a double quoted scalar")}function YK(t,e){var r=!0,n,i,o,s=t.tag,a,c=t.anchor,l,u,d,f,p,h=Object.create(null),m,g,v,y;if(y=t.input.charCodeAt(t.position),y===91)u=93,p=!1,a=[];else if(y===123)u=125,p=!0,a={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=a),y=t.input.charCodeAt(++t.position);y!==0;){if(dt(t,!0,e),y=t.input.charCodeAt(t.position),y===u)return t.position++,t.tag=s,t.anchor=c,t.kind=p?"mapping":"sequence",t.result=a,!0;r?y===44&&ce(t,"expected the node content, but found ','"):ce(t,"missed comma between flow collection entries"),g=m=v=null,d=f=!1,y===63&&(l=t.input.charCodeAt(t.position+1),lr(l)&&(d=f=!0,t.position++,dt(t,!0,e))),n=t.line,i=t.lineStart,o=t.position,Sa(t,e,Yf,!1,!0),g=t.tag,m=t.result,dt(t,!0,e),y=t.input.charCodeAt(t.position),(f||t.line===n)&&y===58&&(d=!0,y=t.input.charCodeAt(++t.position),dt(t,!0,e),Sa(t,e,Yf,!1,!0),v=t.result),p?_a(t,a,h,g,m,v,n,i,o):d?a.push(_a(t,null,h,g,m,v,n,i,o)):a.push(m),dt(t,!0,e),y=t.input.charCodeAt(t.position),y===44?(r=!0,y=t.input.charCodeAt(++t.position)):r=!1}ce(t,"unexpected end of the stream within a flow collection")}function QK(t,e){var r,n,i=rw,o=!1,s=!1,a=e,c=0,l=!1,u,d;if(d=t.input.charCodeAt(t.position),d===124)n=!1;else if(d===62)n=!0;else return!1;for(t.kind="scalar",t.result="";d!==0;)if(d=t.input.charCodeAt(++t.position),d===43||d===45)rw===i?i=d===43?eR:MK:ce(t,"repeat of a chomping mode identifier");else if((u=HK(d))>=0)u===0?ce(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?ce(t,"repeat of an indentation width identifier"):(a=e+u-1,s=!0);else break;if(Zo(d)){do d=t.input.charCodeAt(++t.position);while(Zo(d));if(d===35)do d=t.input.charCodeAt(++t.position);while(!Ln(d)&&d!==0)}for(;d!==0;){for(nw(t),t.lineIndent=0,d=t.input.charCodeAt(t.position);(!s||t.lineIndent<a)&&d===32;)t.lineIndent++,d=t.input.charCodeAt(++t.position);if(!s&&t.lineIndent>a&&(a=t.lineIndent),Ln(d)){c++;continue}if(t.lineIndent<a){i===eR?t.result+=vt.repeat(`
`,o?1+c:c):i===rw&&o&&(t.result+=`
`);break}for(n?Zo(d)?(l=!0,t.result+=vt.repeat(`
`,o?1+c:c)):l?(l=!1,t.result+=vt.repeat(`
`,c+1)):c===0?o&&(t.result+=" "):t.result+=vt.repeat(`
`,c):t.result+=vt.repeat(`
`,o?1+c:c),o=!0,s=!0,c=0,r=t.position;!Ln(d)&&d!==0;)d=t.input.charCodeAt(++t.position);Qi(t,r,t.position,!1)}return!0}function uR(t,e){var r,n=t.tag,i=t.anchor,o=[],s,a=!1,c;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),c=t.input.charCodeAt(t.position);c!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,ce(t,"tab characters must not be used in indentation")),!(c!==45||(s=t.input.charCodeAt(t.position+1),!lr(s))));){if(a=!0,t.position++,dt(t,!0,-1)&&t.lineIndent<=e){o.push(null),c=t.input.charCodeAt(t.position);continue}if(r=t.line,Sa(t,e,ZT,!1,!0),o.push(t.result),dt(t,!0,-1),c=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&c!==0)ce(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return a?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}function XK(t,e,r){var n,i,o,s,a,c,l=t.tag,u=t.anchor,d={},f=Object.create(null),p=null,h=null,m=null,g=!1,v=!1,y;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=d),y=t.input.charCodeAt(t.position);y!==0;){if(!g&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,ce(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),o=t.line,(y===63||y===58)&&lr(n))y===63?(g&&(_a(t,d,f,p,h,null,s,a,c),p=h=m=null),v=!0,g=!0,i=!0):g?(g=!1,i=!0):ce(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,y=n;else{if(s=t.line,a=t.lineStart,c=t.position,!Sa(t,r,JT,!1,!0))break;if(t.line===o){for(y=t.input.charCodeAt(t.position);Zo(y);)y=t.input.charCodeAt(++t.position);if(y===58)y=t.input.charCodeAt(++t.position),lr(y)||ce(t,"a whitespace character is expected after the key-value separator within a block mapping"),g&&(_a(t,d,f,p,h,null,s,a,c),p=h=m=null),v=!0,g=!1,i=!1,p=t.tag,h=t.result;else if(v)ce(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=l,t.anchor=u,!0}else if(v)ce(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=l,t.anchor=u,!0}if((t.line===o||t.lineIndent>e)&&(g&&(s=t.line,a=t.lineStart,c=t.position),Sa(t,e,Qf,!0,i)&&(g?h=t.result:m=t.result),g||(_a(t,d,f,p,h,m,s,a,c),p=h=m=null),dt(t,!0,-1),y=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&y!==0)ce(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return g&&_a(t,d,f,p,h,null,s,a,c),v&&(t.tag=l,t.anchor=u,t.kind="mapping",t.result=d),v}function JK(t){var e,r=!1,n=!1,i,o,s;if(s=t.input.charCodeAt(t.position),s!==33)return!1;if(t.tag!==null&&ce(t,"duplication of a tag property"),s=t.input.charCodeAt(++t.position),s===60?(r=!0,s=t.input.charCodeAt(++t.position)):s===33?(n=!0,i="!!",s=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do s=t.input.charCodeAt(++t.position);while(s!==0&&s!==62);t.position<t.length?(o=t.input.slice(e,t.position),s=t.input.charCodeAt(++t.position)):ce(t,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!lr(s);)s===33&&(n?ce(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),tR.test(i)||ce(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),s=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),jK.test(o)&&ce(t,"tag suffix cannot contain flow indicator characters")}o&&!rR.test(o)&&ce(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch(a){ce(t,"tag name is malformed: "+o)}return r?t.tag=o:Yi.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:ce(t,'undeclared tag handle "'+i+'"'),!0}function ZK(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&ce(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!lr(r)&&!Ea(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&ce(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function e9(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!lr(n)&&!Ea(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&ce(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),Yi.call(t.anchorMap,r)||ce(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],dt(t,!0,-1),!0}function Sa(t,e,r,n,i){var o,s,a,c=1,l=!1,u=!1,d,f,p,h,m,g;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=s=a=Qf===r||ZT===r,n&&dt(t,!0,-1)&&(l=!0,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)),c===1)for(;JK(t)||ZK(t);)dt(t,!0,-1)?(l=!0,a=o,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)):a=!1;if(a&&(a=l||i),(c===1||Qf===r)&&(Yf===r||JT===r?m=e:m=e+1,g=t.position-t.lineStart,c===1?a&&(uR(t,g)||XK(t,g,m))||YK(t,m)?u=!0:(s&&QK(t,m)||zK(t,m)||KK(t,m)?u=!0:e9(t)?(u=!0,(t.tag!==null||t.anchor!==null)&&ce(t,"alias node should not have any properties")):WK(t,m,Yf===r)&&(u=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):c===0&&(u=a&&uR(t,g))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&ce(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),d=0,f=t.implicitTypes.length;d<f;d+=1)if(h=t.implicitTypes[d],h.resolve(t.result)){t.result=h.construct(t.result),t.tag=h.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(Yi.call(t.typeMap[t.kind||"fallback"],t.tag))h=t.typeMap[t.kind||"fallback"][t.tag];else for(h=null,p=t.typeMap.multi[t.kind||"fallback"],d=0,f=p.length;d<f;d+=1)if(t.tag.slice(0,p[d].tag.length)===p[d].tag){h=p[d];break}h||ce(t,"unknown tag !<"+t.tag+">"),t.result!==null&&h.kind!==t.kind&&ce(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+h.kind+'", not "'+t.kind+'"'),h.resolve(t.result,t.tag)?(t.result=h.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):ce(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||u}function t9(t){var e=t.position,r,n,i,o=!1,s;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(s=t.input.charCodeAt(t.position))!==0&&(dt(t,!0,-1),s=t.input.charCodeAt(t.position),!(t.lineIndent>0||s!==37));){for(o=!0,s=t.input.charCodeAt(++t.position),r=t.position;s!==0&&!lr(s);)s=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&ce(t,"directive name must not be less than one character in length");s!==0;){for(;Zo(s);)s=t.input.charCodeAt(++t.position);if(s===35){do s=t.input.charCodeAt(++t.position);while(s!==0&&!Ln(s));break}if(Ln(s))break;for(r=t.position;s!==0&&!lr(s);)s=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}s!==0&&nw(t),Yi.call(cR,n)?cR[n](t,n,i):Xf(t,'unknown document directive "'+n+'"')}if(dt(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,dt(t,!0,-1)):o&&ce(t,"directives end mark is expected"),Sa(t,t.lineIndent-1,Qf,!1,!0),dt(t,!0,-1),t.checkLineBreaks&&$K.test(t.input.slice(e,t.position))&&Xf(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Jf(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,dt(t,!0,-1));return}if(t.position<t.length-1)ce(t,"end of the stream or a document separator is expected");else return}function dR(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new GK(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,ce(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)t9(r);return r.documents}function r9(t,e,r){e!==null&&typeof e=="object"&&typeof r=="undefined"&&(r=e,e=null);var n=dR(t,r);if(typeof e!="function")return n;for(var i=0,o=n.length;i<o;i+=1)e(n[i])}function n9(t,e){var r=dR(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new cr("expected a single document in the stream, but found more")}}var i9=r9,o9=n9,fR={loadAll:i9,load:o9},pR=Object.prototype.toString,hR=Object.prototype.hasOwnProperty,ow=65279,s9=9,ml=10,a9=13,c9=32,l9=33,u9=34,sw=35,d9=37,f9=38,p9=39,h9=42,mR=44,m9=45,Zf=58,g9=61,v9=62,y9=63,w9=64,gR=91,vR=93,C9=96,yR=123,b9=124,wR=125,Ut={};Ut[0]="\\0";Ut[7]="\\a";Ut[8]="\\b";Ut[9]="\\t";Ut[10]="\\n";Ut[11]="\\v";Ut[12]="\\f";Ut[13]="\\r";Ut[27]="\\e";Ut[34]='\\"';Ut[92]="\\\\";Ut[133]="\\N";Ut[160]="\\_";Ut[8232]="\\L";Ut[8233]="\\P";var E9=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],_9=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function S9(t,e){var r,n,i,o,s,a,c;if(e===null)return{};for(r={},n=Object.keys(e),i=0,o=n.length;i<o;i+=1)s=n[i],a=String(e[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),c=t.compiledTypeMap.fallback[s],c&&hR.call(c.styleAliases,a)&&(a=c.styleAliases[a]),r[s]=a;return r}function x9(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new cr("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+vt.repeat("0",n-e.length)+e}var k9=1,gl=2;function P9(t){this.schema=t.schema||XT,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=vt.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=S9(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?gl:k9,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function CR(t,e){for(var r=vt.repeat(" ",e),n=0,i=-1,o="",s,a=t.length;n<a;)i=t.indexOf(`
`,n),i===-1?(s=t.slice(n),n=a):(s=t.slice(n,i+1),n=i+1),s.length&&s!==`
`&&(o+=r),o+=s;return o}function aw(t,e){return`
`+vt.repeat(" ",t.indent*e)}function I9(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}function ep(t){return t===c9||t===s9}function vl(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==ow||65536<=t&&t<=1114111}function bR(t){return vl(t)&&t!==ow&&t!==a9&&t!==ml}function ER(t,e,r){var n=bR(t),i=n&&!ep(t);return(r?n:n&&t!==mR&&t!==gR&&t!==vR&&t!==yR&&t!==wR)&&t!==sw&&!(e===Zf&&!i)||bR(e)&&!ep(e)&&t===sw||e===Zf&&i}function A9(t){return vl(t)&&t!==ow&&!ep(t)&&t!==m9&&t!==y9&&t!==Zf&&t!==mR&&t!==gR&&t!==vR&&t!==yR&&t!==wR&&t!==sw&&t!==f9&&t!==h9&&t!==l9&&t!==b9&&t!==g9&&t!==v9&&t!==p9&&t!==u9&&t!==d9&&t!==w9&&t!==C9}function T9(t){return!ep(t)&&t!==Zf}function yl(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function _R(t){var e=/^\n* /;return e.test(t)}var SR=1,cw=2,xR=3,kR=4,xa=5;function R9(t,e,r,n,i,o,s,a){var c,l=0,u=null,d=!1,f=!1,p=n!==-1,h=-1,m=A9(yl(t,0))&&T9(yl(t,t.length-1));if(e||s)for(c=0;c<t.length;l>=65536?c+=2:c++){if(l=yl(t,c),!vl(l))return xa;m=m&&ER(l,u,a),u=l}else{for(c=0;c<t.length;l>=65536?c+=2:c++){if(l=yl(t,c),l===ml)d=!0,p&&(f=f||c-h-1>n&&t[h+1]!==" ",h=c);else if(!vl(l))return xa;m=m&&ER(l,u,a),u=l}f=f||p&&c-h-1>n&&t[h+1]!==" "}return!d&&!f?m&&!s&&!i(t)?SR:o===gl?xa:cw:r>9&&_R(t)?xa:s?o===gl?xa:cw:f?kR:xR}function D9(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===gl?'""':"''";if(!t.noCompatMode&&(E9.indexOf(e)!==-1||_9.test(e)))return t.quotingType===gl?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,r),s=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),a=n||t.flowLevel>-1&&r>=t.flowLevel;function c(l){return I9(t,l)}switch(R9(e,a,t.indent,s,c,t.quotingType,t.forceQuotes&&!n,i)){case SR:return e;case cw:return"'"+e.replace(/'/g,"''")+"'";case xR:return"|"+PR(e,t.indent)+IR(CR(e,o));case kR:return">"+PR(e,t.indent)+IR(CR(O9(e,s),o));case xa:return'"'+N9(e)+'"';default:throw new cr("impossible error: invalid scalar style")}}()}function PR(t,e){var r=_R(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),o=i?"+":n?"":"-";return r+o+`
`}function IR(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function O9(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var l=t.indexOf(`
`);return l=l!==-1?l:t.length,r.lastIndex=l,AR(t.slice(0,l),e)}(),i=t[0]===`
`||t[0]===" ",o,s;s=r.exec(t);){var a=s[1],c=s[2];o=c[0]===" ",n+=a+(!i&&!o&&c!==""?`
`:"")+AR(c,e),i=o}return n}function AR(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,o,s=0,a=0,c="";n=r.exec(t);)a=n.index,a-i>e&&(o=s>i?s:a,c+=`
`+t.slice(i,o),i=o+1),s=a;return c+=`
`,t.length-i>e&&s>i?c+=t.slice(i,s)+`
`+t.slice(s+1):c+=t.slice(i),c.slice(1)}function N9(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=yl(t,i),n=Ut[r],!n&&vl(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||x9(r);return e}function L9(t,e,r){var n="",i=t.tag,o,s,a;for(o=0,s=r.length;o<s;o+=1)a=r[o],t.replacer&&(a=t.replacer.call(r,String(o),a)),(li(t,e,a,!1,!1)||typeof a=="undefined"&&li(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}function TR(t,e,r,n){var i="",o=t.tag,s,a,c;for(s=0,a=r.length;s<a;s+=1)c=r[s],t.replacer&&(c=t.replacer.call(r,String(s),c)),(li(t,e+1,c,!0,!0,!1,!0)||typeof c=="undefined"&&li(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=aw(t,e)),t.dump&&ml===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}function F9(t,e,r){var n="",i=t.tag,o=Object.keys(r),s,a,c,l,u;for(s=0,a=o.length;s<a;s+=1)u="",n!==""&&(u+=", "),t.condenseFlow&&(u+='"'),c=o[s],l=r[c],t.replacer&&(l=t.replacer.call(r,c,l)),!!li(t,e,c,!1,!1)&&(t.dump.length>1024&&(u+="? "),u+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),!!li(t,e,l,!1,!1)&&(u+=t.dump,n+=u));t.tag=i,t.dump="{"+n+"}"}function M9(t,e,r,n){var i="",o=t.tag,s=Object.keys(r),a,c,l,u,d,f;if(t.sortKeys===!0)s.sort();else if(typeof t.sortKeys=="function")s.sort(t.sortKeys);else if(t.sortKeys)throw new cr("sortKeys must be a boolean or a function");for(a=0,c=s.length;a<c;a+=1)f="",(!n||i!=="")&&(f+=aw(t,e)),l=s[a],u=r[l],t.replacer&&(u=t.replacer.call(r,l,u)),!!li(t,e+1,l,!0,!0,!0)&&(d=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,d&&(t.dump&&ml===t.dump.charCodeAt(0)?f+="?":f+="? "),f+=t.dump,d&&(f+=aw(t,e)),!!li(t,e+1,u,!0,d)&&(t.dump&&ml===t.dump.charCodeAt(0)?f+=":":f+=": ",f+=t.dump,i+=f));t.tag=o,t.dump=i||"{}"}function RR(t,e,r){var n,i,o,s,a,c;for(i=r?t.explicitTypes:t.implicitTypes,o=0,s=i.length;o<s;o+=1)if(a=i[o],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof e=="object"&&e instanceof a.instanceOf)&&(!a.predicate||a.predicate(e))){if(r?a.multi&&a.representName?t.tag=a.representName(e):t.tag=a.tag:t.tag="?",a.represent){if(c=t.styleMap[a.tag]||a.defaultStyle,pR.call(a.represent)==="[object Function]")n=a.represent(e,c);else if(hR.call(a.represent,c))n=a.represent[c](e,c);else throw new cr("!<"+a.tag+'> tag resolver accepts not "'+c+'" style');t.dump=n}return!0}return!1}function li(t,e,r,n,i,o,s){t.tag=null,t.dump=r,RR(t,r,!1)||RR(t,r,!0);var a=pR.call(t.dump),c=n,l;n&&(n=t.flowLevel<0||t.flowLevel>e);var u=a==="[object Object]"||a==="[object Array]",d,f;if(u&&(d=t.duplicates.indexOf(r),f=d!==-1),(t.tag!==null&&t.tag!=="?"||f||t.indent!==2&&e>0)&&(i=!1),f&&t.usedDuplicates[d])t.dump="*ref_"+d;else{if(u&&f&&!t.usedDuplicates[d]&&(t.usedDuplicates[d]=!0),a==="[object Object]")n&&Object.keys(t.dump).length!==0?(M9(t,e,t.dump,i),f&&(t.dump="&ref_"+d+t.dump)):(F9(t,e,t.dump),f&&(t.dump="&ref_"+d+" "+t.dump));else if(a==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!s&&e>0?TR(t,e-1,t.dump,i):TR(t,e,t.dump,i),f&&(t.dump="&ref_"+d+t.dump)):(L9(t,e,t.dump),f&&(t.dump="&ref_"+d+" "+t.dump));else if(a==="[object String]")t.tag!=="?"&&D9(t,t.dump,e,o,c);else{if(a==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new cr("unacceptable kind of an object to dump "+a)}t.tag!==null&&t.tag!=="?"&&(l=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?l="!"+l:l.slice(0,18)==="tag:yaml.org,2002:"?l="!!"+l.slice(18):l="!<"+l+">",t.dump=l+" "+t.dump)}return!0}function q9(t,e){var r=[],n=[],i,o;for(lw(t,r,n),i=0,o=n.length;i<o;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(o)}function lw(t,e,r){var n,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)lw(t[i],e,r);else for(n=Object.keys(t),i=0,o=n.length;i<o;i+=1)lw(t[n[i]],e,r)}function $9(t,e){e=e||{};var r=new P9(e);r.noRefs||q9(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),li(r,0,n,!0,!0)?r.dump+`
`:""}var j9=$9,U9={dump:j9};function uw(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var ur=fR.load,Mfe=fR.loadAll,qfe=U9.dump;var $fe=uw("safeLoad","load"),jfe=uw("safeLoadAll","loadAll"),Ufe=uw("safeDump","dump");var op=V(require("path"));var pw=V(require("path")),LR=V(require("os"));var DR=V(require("crypto"));var OR=V(require("util"));var fn={async readDocument(t){switch(t.scheme){case"file":try{return(await Ce(t.fsPath)).toString()}catch(e){if(e&&e.code==="ENOENT")return;throw e}default:throw new Error(`Unsupported scheme: ${t.toString()}`)}},async applyEdits(t,e,r){switch(t.scheme){case"file":let n=$t(r,e);await Ls(t.fsPath,n);break;default:throw new Error(`Unsupported scheme: ${t.toString()}`)}}},tp=class{constructor(e){this.fileHost=e}async readDocument(e){switch(e.scheme){case tp.scheme:try{return(await this.fileHost.readFile(ge(e,this.fileHost.platform))).toString()}catch(r){return}default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}async applyEdits(e,r,n){switch(e.scheme){case tp.scheme:let i=$t(n,r);await this.fileHost.writeFile(ge(e,this.fileHost.platform),Buffer.from(i));break;default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}},Bt=tp;Bt.scheme="vscode-fileHost";var rs=class{constructor(e){this.shellServer=e}async readDocument(e){switch(e.scheme){case rs.scheme:try{let{stdout:r}=await this.shellServer.exec(`cat ${e.path}`);return r}catch(r){return}default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}async applyEdits(e,r,n){switch(e.scheme){case rs.scheme:try{if(!rs.nonce){let s=await(0,OR.promisify)(DR.randomBytes)(20);rs.nonce=s.toString("hex")}let i=$t(n,r),o=`EOF-${rs.nonce}`;await this.shellServer.exec(`cat <<'${o}' >${e.path}
${i}
${o}
`)}catch(i){console.log(i)}break;default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}},ts=rs;ts.scheme="vscode-remote";var NR=class{constructor(e){this.documents=e}async readDocument(e){let r=this.documents[e.scheme];if(!r)throw new Error(`Unsupported scheme: ${e.toString()}`);return r.readDocument(e)}async applyEdits(e,r,n){let i=this.documents[e.scheme];if(!i)throw new Error(`Unsupported scheme: ${e.toString()}`);return i.applyEdits(e,r,n)}};function ft(t,e){let r={file:fn,[Bt.scheme]:new Bt(t)};return e&&(r[ts.scheme]=new ts(e)),new NR(r)}var dw=new Map;async function fw(t,e){let r=t.toString(),n=dw.get(r);if(n||dw.set(r,n=[]),n.push(e),n.length===1){for(;n.length;)await n[0](),n.shift();dw.delete(r)}}var rp;(function(i){i[i.Unknown=0]="Unknown",i[i.File=1]="File",i[i.Directory=2]="Directory",i[i.SymbolicLink=64]="SymbolicLink"})(rp||(rp={}));var Xi;(function(s){s[s.Slash=47]="Slash",s[s.Colon=58]="Colon",s[s.A=65]="A",s[s.Z=90]="Z",s[s.a=97]="a",s[s.z=122]="z"})(Xi||(Xi={}));function ge(t,e){let r;return t.authority&&t.path.length>1&&(t.scheme==="file"||t.scheme===Bt.scheme)?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,e==="win32"&&(r=r.replace(/\//g,"\\")),r}function ka(t,e){return[t.join(e,".devcontainer","devcontainer.json"),t.join(e,".devcontainer.json")]}function hw(t,e){return Ee.file(t.path.join(e,".devcontainer","devcontainer.json")).with({scheme:Bt.scheme})}async function np(t,e){let r=ka(t.path,e);for(let n of r)if(await t.isFile(n))return Ee.file(n).with({scheme:Bt.scheme})}async function ip(t){let e=ka(pw,t);for(let r of e)if(await lt(r))return r}var ui=`{${LR.EOL}}`;async function Br(t,e,r,n){e.scheme==="file"&&await nr(pw.dirname(e.fsPath)),await t.applyEdits(e,r,n)}function ns(t){let e=pw.posix.dirname(t.path);return t.with({path:e})}function Ji(t,e,r){return di(t,e.configFilePath,r)}function di(t,e,r){let n=ns(e);return e.with({path:op.posix.resolve(n.path,t.platform==="win32"&&e.scheme!==ts.scheme?(op.win32.isAbsolute(r)?"/":"")+r.replace(/\\/g,"/"):r)})}function ze(t){return"dockerFile"in t||"build"in t&&"dockerfile"in t.build}function Pa(t){return t&&(ze(t)||"image"in t||"dockerComposeFile"in t)}function yt(t,e){return Ji(t,e,B9(e))}function B9(t){return"dockerFile"in t?t.dockerFile:t.build.dockerfile}async function Ht(t,e,r,n){if(Array.isArray(e.dockerComposeFile)){if(e.dockerComposeFile.length)return e.dockerComposeFile.map(i=>ge(Ji(t,e,i),t.platform))}else if(typeof e.dockerComposeFile=="string")return[ge(Ji(t,e,e.dockerComposeFile),t.platform)];if(n){let i=r==null?void 0:r.COMPOSE_FILE;if(i)return i.split(t.path.delimiter).map(a=>t.path.resolve(n,a));try{let a=t.path.join(n,".env"),c=await t.readFile(a),l=/^COMPOSE_FILE=(.+)$/m.exec(c.toString()),u=l&&l[1].trim();if(u)return u.split(t.path.delimiter).map(d=>t.path.resolve(n,d))}catch(a){if(!(a&&(a.code==="ENOENT"||a.code==="EISDIR")))throw a}let o=[t.path.resolve(n,"docker-compose.yml")],s=t.path.resolve(n,"docker-compose.override.yml");return await t.isFile(s)&&o.push(s),o}return[]}function H9(){return{contentHashes:{}}}async function MR(t,e,r){let n=t.configurationTracking,i=n.getConfigurationState();if(i){let o=i.contentHashes,s=Object.keys(o),c=(await mw(t,e,r)).contentHashes,l=Object.keys(c),u=new Set(l);s.forEach(p=>u.delete(p));let d=new Set(s);l.forEach(p=>d.delete(p));let f=[];for(let p of s)p in c&&c[p]!==o[p]&&f.push(p);if(u.size||d.size||f.length){let p=await mw(t,e,r);(async()=>{await n.containerOutdated([...u,...d,...f].sort())==="ignore"&&await t.configurationTracking.updateConfigurationState(p)})().catch(console.error)}}else await qR(t,e,r)}async function sp(t,e,r){let n="Updating configuration state",i=t.common.output.start(n);await qR(t,e,r),t.common.output.stop(n,i)}async function qR(t,e,r){let n=await mw(t,e,r);await t.configurationTracking.updateConfigurationState(n)}async function mw(t,e,r){let n=H9();ap(n,wl.posix.basename(r.configFilePath.path),JSON.stringify(Z(U({},r),{forwardPorts:void 0,configFilePath:void 0,postStartCommand:void 0,postAttachCommand:void 0})));let i=ns(r.configFilePath).path;if(ze(r)){let o=yt(t.common.cliHost,r),s=await e.readDocument(o);s!==void 0&&ap(n,wl.posix.relative(i,o.path),s)}if("dockerComposeFile"in r){let o=await Ht(t.common.cliHost,r,t.common.cliHost.env,t.common.cliHost.cwd),s=await Promise.all(o.map(async a=>{let c=Ee.file(a).with({scheme:Bt.scheme});return{uri:c,content:await e.readDocument(c)}}));for(let{uri:a,content:c}of s)c!==void 0&&ap(n,wl.posix.relative(i,a.path),c);for(let a=s.length-1;a>=0;a--){let{uri:c,content:l}=s[a];if(l){let u=ur(l),d=u&&u.services,f=d&&d[r.service],p=f&&f.build,h=p&&(typeof p=="string"?p:p.context);if(h){let m=di(t.common.cliHost,c,h),g=$R(m,p.dockerfile||"Dockerfile"),v=await e.readDocument(g);v!==void 0&&ap(n,wl.posix.relative(i,g.path),v)}if(f&&(f.image||f.build))break}}}return n}function ap(t,e,r){let n=FR.createHash("sha256").update(r).digest("hex");t.contentHashes[e]=n}var ct=V(require("path")),hN=V(require("crypto"));var mN=V(Wc());var yi=V(require("path"));var Mw=V(require("path"));var GR=V(require("net")),Cw=V(require("path"));var gw=V(require("path")),vw=V(require("http")),jR=V(require("os")),UR=V(require("crypto"));async function BR(t,e){let r=await yw(t),n=new HR(r,e);return n.listen(),n}var HR=class{constructor(e,r){this.ipcHandlePath=e;this.server=vw.createServer((n,i)=>{Promise.resolve(r(n,i)).catch(o=>console.error(o&&o.message||o))}),this.server.on("error",n=>console.error(n))}listen(){this.server.listen(this.ipcHandlePath)}dispose(){this.server.close()}};async function VR(t){return new Promise((e,r)=>{let n=[];t.setEncoding("utf8"),t.on("data",i=>n.push(i)),t.on("error",i=>r(i)),t.on("end",()=>{let i=JSON.parse(n.join(""));e(i)})})}async function V9(t){return new Promise((e,r)=>{UR.randomBytes(t,(n,i)=>{n?r(n):e(i)})})}async function yw(t){let r=(await V9(20)).toString("hex"),n=`${t}-${r}`;return process.platform==="win32"?`\\\\.\\pipe\\${n}-sock`:process.env.XDG_RUNTIME_DIR?gw.join(process.env.XDG_RUNTIME_DIR,`${n}.sock`):gw.join(jR.tmpdir(),`${n}.sock`)}var ww=class{constructor(){this.messages=[]}push(e){this.messages.push(e),this.dequeueRequest&&(this.dequeueRequest.resolve(this.messages),this.dequeueRequest=void 0,this.messages=[])}async dequeue(e){if(this.messages.length){let r=this.messages;return this.messages=[],r}return this.dequeueRequest&&this.dequeueRequest.resolve([]),new Promise((r,n)=>{this.dequeueRequest={resolve:r,reject:n},typeof e=="number"&&setTimeout(n,e)})}};async function Fn(t,e){let r=await yw("ssh-askpass");return await new Promise((n,i)=>{GR.createServer(o=>{o.setEncoding("utf8");let s="";o.on("data",async a=>{if(s+=a,s.endsWith(`
`))try{let c=await e(JSON.parse(s));o.write(c,l=>{l&&console.error(l)}),o.end()}catch(c){console.error(c)}}),o.on("error",a=>console.error(a))}).on("error",o=>{i(o)}).listen(r,()=>{n()})}),{DISPLAY:process.env.DISPLAY||"1",ELECTRON_RUN_AS_NODE:"1",SSH_ASKPASS:Cw.join(t,"scripts",`ssh-askpass.${process.platform==="win32"?"bat":"sh"}`),VSCODE_SSH_ASKPASS_NODE:process.execPath,VSCODE_SSH_ASKPASS_EXTRA_ARGS:process.versions.electron?"--ms-enable-electron-run-as-node":"",VSCODE_SSH_ASKPASS_MAIN:Cw.join(t,"dist","common","sshAskpass.js"),VSCODE_SSH_ASKPASS_HANDLE:r}}var G9=0;function pn(t){return t.VSCODE_SSH_ASKPASS_HANDLE?{VSCODE_SSH_ASKPASS_COUNTER:String(++G9)}:{}}async function _t(t,e){return(await Zi(t,[e]))[0]}async function Zi(t,e){let r=await lp(t,"container",e);for(let n of r){n.Ports=[];let i=n.NetworkSettings.Ports;for(let o in i){let[s,a]=o.split("/");for(let c of i[o]||[]){let{HostIp:l,HostPort:u}=c;n.Ports.push({IP:l,PrivatePort:parseInt(s),PublicPort:parseInt(u),Type:a})}}}return r}async function eo(t,e){return(await lp(t,"image",[e]))[0]}async function cp(t,e){return(await lp(t,"volume",[e]))[0]}async function Cl(t,e){return lp(t,"volume",e)}async function lp(t,e,r){if(!r.length)return[];let n=El(t),i=await pe(Z(U({},n),{args:(n.args||[]).concat(["inspect","--type",e,...r])}));try{return JSON.parse(i.stdout.toString())}catch(o){throw console.error({stdout:i.stdout.toString(),stderr:i.stderr.toString()}),o}}async function fi(t,e=!1,r=[]){let n=[];e&&n.push("-a");for(let o of r)n.push("--filter",`label=${o}`);return(await Pe(t,"ps","-q",...n)).stdout.toString().split(/\r?\n/).filter(o=>!!o)}async function to(t,e=[]){let r=[];for(let i of e)r.push("--filter",`label=${i}`);return(await Pe(t,"volume","ls","-q",...r)).stdout.toString().split(/\r?\n/).filter(i=>!!i)}async function bw(t){return(await Pe(t,"volume","ls","-q","-f","dangling=true")).stdout.toString().split(/\r?\n/).filter(r=>!!r)}async function WR(t){return(await Pe(t,"volume","prune","-f")).stdout.toString()}async function zR(t,e,r){let n=[];for(let i of r)n.push("--label",i);await Pe(t,"volume","create",...n,e)}async function bl(t,e){let{exec:r,cmd:n,args:i,env:o,output:s}=El(t),a=[];for(let f in e)for(let p of e[f])a.push("--filter",`${f}=${p}`);let c=await _w(t)?"json":"{{json .}}",l=(i||[]).concat(["events","--format",c,...a]),u=await r({cmd:n,args:l,env:o,output:s}),d=[];return u.stderr.on("data",f=>d.push(f)),u.exit.then(({code:f,signal:p})=>{d.length&&s.write(_e(Buffer.concat(d).toString())),(f||p&&p!=="SIGKILL")&&s.write(_e(`Docker events terminated (code: ${f}, signal: ${p}).`))},f=>{s.write(_e(f&&(f.stack||f.message)))}),u}async function Pe(t,...e){let r=El(t);return pe(Z(U({},r),{args:(r.args||[]).concat(e)}))}async function Ew(t){var e;try{let{stdout:r}=await Pe(t,"context","ls","--format","{{json .}}"),n=`[${r.toString().trim().split(/\r?\n/).join(",")}]`;return(e=JSON.parse(n).find(s=>s.Current))==null?void 0:e.Name}catch{return}}async function _w(t){if(("cliHost"in t?t.cliHost:t.common.cliHost).platform!=="linux")return!1;try{let{stdout:r}=await Pe(t,"-v");return r.toString().toLowerCase().indexOf("podman")!==-1}catch(r){return!1}}async function dr(t,...e){let r=Mn(t);return si(Z(U({},r),{args:(r.args||[]).concat(e)}))}async function is(t,...e){let r=El(t,"dockerComposeCLI"in t?await t.dockerComposeCLI():void 0);return pe(Z(U({},r),{args:(r.args||[]).concat(e)}))}async function up(t,...e){let r=Mn(t,"dockerComposeCLI"in t?await t.dockerComposeCLI():void 0);return si(Z(U({},r),{args:(r.args||[]).concat(e)}))}function pi(t,e,r){return async function(n){let{exec:i,cmd:o,args:s,env:a}=El(t),{argsPrefix:c,args:l}=YR(e,r,n,!1);return i({cmd:o,args:(s||[]).concat(l),env:a,output:KR(n.output,o,c)})}}async function Ia(t,e,r,n){if(!await n("node-pty"))throw new Error("Missing node-pty");return async function(o){let{ptyExec:s,cmd:a,args:c,env:l}=Mn(t),{argsPrefix:u,args:d}=YR(e,r,o,!0);return s({cmd:a,args:(c||[]).concat(d),env:l,output:KR(o.output,a,u)})}}function KR(t,e,r){return W9(t,`Run: ${e} ${(r||[]).join(" ").replace(/\n.*/g,"")}`,"Run in container:")}function W9(t,e,r){let n=new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g");return rt(Z(U({},t),{get dimensions(){return t.dimensions},event:o=>t.event("text"in o?Z(U({},o),{text:o.text.replace(n,r)}):o)}))}function YR(t,e,r,n){let{env:i,cwd:o,cmd:s,args:a}=r,c=["exec","-i"];n&&c.push("-t"),e&&c.push("-u",e),i&&Object.keys(i).forEach(u=>c.push("-e",`${u}=${i[u]}`)),o&&c.push("-w",o),c.push(t);let l=c.slice();return c.push(s),a&&c.push(...a),{argsPrefix:l,args:c}}function El(t,e){return"dockerEnv"in t?{exec:t.common.cliHost.exec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:U(U({},t.dockerEnv),pn(t.dockerEnv)),output:t.common.output}:"cliHost"in t?{exec:t.cliHost.exec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:U(U({},t.env),pn(t.env)),output:t.output}:Z(U({},t),{env:U(U({},t.env),pn(t.env))})}function Mn(t,e){return"dockerEnv"in t?{ptyExec:t.common.cliHost.ptyExec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:U(U({},t.dockerEnv),pn(t.dockerEnv)),output:t.common.output}:"cliHost"in t?{ptyExec:t.cliHost.ptyExec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:U(U({},t.env),pn(t.env)),output:t.output}:Z(U({},t),{env:U(U({},t.env),pn(t.env))})}function dp(t){return t.toLowerCase().replace(/[^a-z0-9\._-]+/g,"").replace(/(\.[\._-]|_[\.-]|__[\._-]|-+[\._])[\._-]*/g,(e,r)=>r.substr(0,r.length-1))}var XO=V(require("path")),Fw=V(require("string_decoder")),JO=V(Wc());var Wr=V(require("path")),HO=V(BO()),VO=V(Wc());function Da(t){let e=typeof t=="string"?Wr.join(t,"dist"):t.distFolder;return Wr.join(e,"node_modules","vscode-dev-containers","container-features")}var Oa="f_microsoft-vscode-dev-container";function GO(){return`
ARG BASE_IMAGE=mcr.microsoft.com/vscode/devcontainers/base:buster
FROM $BASE_IMAGE

USER root

COPY . /tmp/build-features/

#{featureLayer}

#{containerEnv}

ARG IMAGE_USER=root
USER $IMAGE_USER
`}async function WO(t){let e="";return t.packageDstFolders.forEach(n=>{e+=`RUN cd /tmp/build-features/${n} \\
&& chmod +x ./install.sh \\
&& ./install.sh

`}),e}function J5(t,e){return Z(U({},t),{features:t.features.concat(e.features)})}async function Z5(t,e,r){var a;let n={features:[],dstFolder:e,packageDstFolders:new Set},i=t.features;if(!i||!Object.keys(i).length)return;let o=Object.keys(i).filter(c=>c.match(".+@.+"));if(o.length===0){r.write("No remote features declared in user devcontainer");return}r.write(`Remote feature Identifiers detected: ${o.join(`
`)}`);let s=Wr.join(e,"feature.tar.gz");for await(let c of o)try{r.write(`Fetching ${c}`);let l=c.split("@");l.length!==2&&r.write("Invalid remote feature identifier.",de.Error);let u=l[1],d=await wa(u,{"User-Agent":"remotecontainer"}),f=JSON.parse((a=d.toString())!=null?a:{}).tarball_url,p=Wr.join(e,"extractPath");if(await nr(p),f!==void 0&&f!==""){let E=await wa(f,{"User-Agent":"remotecontainer"});await Ls(s,E),await VO.x({file:s,cwd:p})}else{r.write("Could not fetch URL for featureId",de.Error);continue}let h=(await Lt(p))[0];if((await Lt(Wr.join(e))).find(E=>E===h)!==void 0){r.write(`Already pulled remote resource feature package from '${u}'. Skipping.`);continue}let g=`f_${h}`,v=Wr.join(e,g);await nr(v);let y=(await Lt(Wr.join(p,h))).filter(E=>!E.startsWith("."));for await(let E of y)await B_(Wr.join(p,h,E),Wr.join(v,E));let C=Wr.join(v,"features.json"),w=(await Ce(C)).toString(),b=De(w);if(b){let E=b.features.map(S=>Z(U({},S),{packageDstFolder:g}));n={features:n.features.concat(E),dstFolder:e,packageDstFolders:n.packageDstFolders.add(g)}}else r.write(`Could not parse features.json when merging remote feature ${c}`,de.Error);await Eg(p,!0,!0),await Eg(s,!1,!0)}catch(l){r.write(`Could not fetch ${c} due to ${l}`,de.Error)}return n}async function no(t,e,r,n){let{output:i,remoteContainerFeaturesEnabled:o}=t,s=r.features;if(!s||!Object.keys(s).length)return;o?i.write("Fetching remote container features: Enabled"):i.write("Fetching remote container features: Disabled");let a=Da(t.extensionPath),c=De((await Ce(Wr.join(a,"features.json"))).toString());c.features=c.features.map(d=>Z(U({},d),{packageDstFolder:Oa}));let l=c;if(o){let d=await Z5(r,e,i);d&&(l=J5(d,c))}let u=await xp(t,r,l,n);if(!u.features.every(d=>d.value===!1))return u.dstFolder=e,u.packageDstFolders=u.packageDstFolders?u.packageDstFolders.add(Oa):new Set().add(Oa),u}async function xp(t,e,r,n){let i=await n(),o=i["com.visualstudio.code.devcontainers.id"],s=i.version,a=e.features||{},c={};Object.keys(a).forEach(u=>{let d=u.split("@")[0];c[d]=a[u]});let l={};for(let u of r.features)eY(u),o&&(u.exclude||[]).some(d=>zO(d,o,s))?u.included=!1:(u.include||[]).length?u.included=!!o&&(u.include||[]).some(d=>zO(d,o,s)):u.included=!0,l[u.id]=l[u.id]||u.included,u.value=c[u.id]||!1;return t.output.write(`Feature configuration:
`+JSON.stringify(Z(U({},r),{imageDetails:void 0}),void 0,"  "),de.Trace),r.features=r.features.filter(u=>u.id in l&&u.included===l[u.id]?(delete l[u.id],!0):!1),r}function eY(t){if(t.values){let e=t.options||(t.options={});e[mn(t)]={type:"string",[t.customValues?"proposals":"enum"]:t.values,default:t.values[0],description:t.hint}}delete t.type,delete t.values,delete t.customValues,delete t.hint}function zO(t,e,r){let n=t.indexOf("@"),[i,o]=n!==-1?[t.slice(0,n),t.slice(n+1)]:[t,void 0];return e===i&&(!o||!r||HO.satisfies(r,o))}function mn(t){return"version"}function ls(t){var r,n;let e=mn(t);if(typeof t.value=="object"){let i=t.value[e];return i===void 0&&t.options?(r=t.options[e])==null?void 0:r.default:i}return t.value===void 0&&t.options?(n=t.options[e])==null?void 0:n.default:t.value}function KO(t){return typeof t.value=="object"?U(U({},YO(t)),t.value):Z(U({},YO(t)),{[mn(t)]:t.value})}function YO(t){let e=t.options||{};return Object.keys(e).reduce((r,n)=>("default"in e[n]&&(r[n]=e[n].default),r),{})}function QO(t){var r;let e=mn(t);return t.options&&((r=t.options[e])==null?void 0:r.default)}async function Ll(t,e,r,n){let{common:i}=t,{cliHost:o,output:s}=i;if(!e)return r;let{dstFolder:a}=e;if(!a||a==="")return s.write("dstFolder is undefined or empty in addContainerFeatures",de.Error),r;let c=(await n()).Config.User||"root",l=Ml(i),u=`${r.startsWith(l)?r:l}-features`,d=Da(i.extensionPath);s.write(`local container features stored at: ${d}`),await o.mkdirp(`${a}/${Oa}`);let f=JO.c({cwd:d,filter:C=>C!=="./Dockerfile"&&C!=="./features.json"},["."]),p=new Promise((C,w)=>{f.on("error",w),f.on("finish",C)}),h=await o.exec({cmd:"tar",args:["--no-same-owner","-x","-f","-"],cwd:`${a}/${Oa}`,output:s}),m=new Fw.StringDecoder;h.stdout.on("data",C=>{s.write(m.write(C))});let g=new Fw.StringDecoder;h.stderr.on("data",C=>{s.write(_e(g.write(C)))}),f.pipe(h.stdin);let v=GO();v=v.replace("#{featureLayer}",await WO(e)),v=v.replace("#{containerEnv}",e.features.filter(C=>(ut||C.included)&&C.value).reduce((C,w)=>C.concat(Object.keys(w.containerEnv||{}).map(b=>`ENV ${b}=${w.containerEnv[b]}`)),[]).join(`
`)),await o.writeFile(o.path.join(a,"Dockerfile"),Buffer.from(v)),await Promise.all([...e.packageDstFolders].map(async C=>{let w=[].concat(...e.features.filter(b=>(ut||b.included)&&b.value&&b.packageDstFolder===C).map(b=>{let E=KO(b),S=b.id.replace(/[/-]/g,"_").split("@")[0].toUpperCase(),x=[];return E&&(x.push(...Object.keys(E).map(T=>`_BUILD_ARG_${S}_${T.toUpperCase()}=${E[T]}`)),x.push(`_BUILD_ARG_${S}=true`)),b.buildArg&&x.push(`${b.buildArg}=${ls(b)}`),x})).join(`
`);await o.writeFile(o.path.join(a,C,"features.env"),Buffer.from(w))})),await h.exit,await p;let y=["build","-t",u,"--build-arg",`BASE_IMAGE=${r}`,"--build-arg",`IMAGE_USER=${c}`,a];return await dr(t,...y),u}async function Fl(t,e,r,n,i,o){let{common:s}=t,{cliHost:a}=s;if(s.cliMode||!(typeof e.updateRemoteUserUID=="boolean"?e.updateRemoteUserUID:o)||a.platform!=="linux")return r;let c=(await n()).Config.User||"root",l=e.remoteUser||i||c;if(l==="root"||/^\d+$/.test(l))return r;let u=Ml(s),d=`${r.startsWith(u)?r:u}-uid`,f="updateUID.Dockerfile",p=XO.join(s.extensionPath,"scripts",f),h=s.package.version,m=a.path.join(await a.tmpdir(),"vsch",`${f}-${h}`),g=`${m}-${Date.now()}`;await a.mkdirp(a.path.dirname(g)),await a.writeFile(g,await Ce(p)),await a.rename(g,m);let v=["build","-f",m,"-t",d,"--build-arg",`BASE_IMAGE=${r}`,"--build-arg",`REMOTE_USER=${l}`,"--build-arg",`NEW_UID=${await a.getuid()}`,"--build-arg",`NEW_GID=${await a.getgid()}`,"--build-arg",`IMAGE_USER=${c}`,a.path.dirname(m)];return await dr(t,...v),d}var kp="com.docker.compose.project",qw="com.docker.compose.service";async function ZO(t,e,r,n){let{common:i,dockerCLI:o,dockerComposeCLI:s}=t,{cliHost:a,env:c,output:l}=i;return tN(t,{cliHost:a,dockerCLI:o,dockerComposeCLI:s,env:c,output:l},e,r,n,$w(r),!0)}async function eN(t,{repositoryPath:e,folder:r},n,i,o,s){let{labels:a}=Na(n,e,r,i),c=Ae(Mw.posix,r?n.workspaceFolder(r):n.fullRepositoryName),l=`services:
  '${s.service}':
    labels:
${a.map(y=>`      - ${y}`).join(`
`)}
    volumes:
      - ${i}:${Mw.posix.dirname(c.rootFolderPath)}

volumes:
  ${i}:
    external: true
`,{loadNativeModule:u,output:d,cliHost:f}=t.common,p=pi(t,o,"root"),h=await Ia(t,o,"root",u),m=tl("container",c.rootFolderPath,p,h,d),g={cliHost:m,dockerCLI:"docker",dockerComposeCLI:gi({exec:m.exec,env:{},output:d},"docker","docker-compose"),env:{},output:d},v=Hw(n,i,r);return tN(t,g,c,s,f.cwd,c.rootFolderPath,!1,l,o,v)}async function tN(t,e,r,n,i,o,s,a,c,l){let{common:u}=t,{cliHost:d}=e,f,p;try{let h=await Ht(d,n,d.env,d.cwd),m=d.path.join(d.cwd,".env"),g=Array.isArray(n.dockerComposeFile)&&n.dockerComposeFile.length===0&&await d.isFile(m)?m:void 0,v="/tmp/docker-compose.repositoryContainer.yml";if(a){let H=(await d.readFile(h[0])).toString(),$=(/^\s*(version:.*)$/m.exec(H)||[])[1];$&&(a=`${$}

${a}`),await d.writeFile(v,Buffer.from(a)),h.push(v)}let y=await ql(e,r,h),C=await Pp(t,y,n.service);if(t.expectExistingContainer&&!C)throw new ne({description:"The expected container does not exist."});if(f=C?await _t(t,C):void 0,f&&(t.removeOnStartup===!0||t.removeOnStartup===f.Id)){let H="Removing existing container.",$=u.output.start(H);await Pe(t,"rm","-f",f.Id),u.output.stop(H,$),f=void 0}let w=!!f,b;if(!f||f.State.Status!=="running"){let H=await rY(t,e,n,y,h,g,!f,s);f=await _t(t,H.containerId),b=H.featuresConfig}else{let H=f.Config.Labels||{};b=await no(t.common,await oo(t.common),n,async()=>H)}p=await qn(t,f.Id,o,n.remoteUser);let E=ft(d,p.shellServer);w||await sp(t,E,n);let S={cwd:i,dockerCLI:t.dockerCLI,dockerComposeCLI:await t.dockerComposeCLI(),env:u.env,containerId:f.Id,user:p.user,sessionId:u.sessionId,shutdownAction:n.shutdownAction,projectName:y,composeFiles:h,envFile:g,composeOverrideFile:a&&v,composeOverrideContent:a,buildContainerRunArgs:l,service:n.service,runServices:n.runServices,logLevel:u.getLogLevel(),delay:1e4},{shutdownArgs:x,doneWithDocuments:T}=await Tp(t,E,"dockerCompose",S,w?n:void 0);c&&T.then(()=>{Pe(t,"rm","-f",c)});let R=n.devPort||zi,{hostOrContainerPort:q,hostPortServer:B,remoteEnv:te,serverDownloaded:ee}=await Ki(u,p,n,b,void 0,R);return x.hostPortServer=B,La(u,p,q,f,r),{params:u,properties:p,config:n,resolvedAuthority:{host:io,port:q,extensionHostEnv:te},tunnelInformation:u.isLocalContainer?Fa(f):{},dockerParams:t,dockerContainerId:f.Id,serverDownloaded:ee}}catch(h){let m=h instanceof ne?h:new ne({description:"An error occurred setting up the container.",originalError:h});throw f&&(m.manageContainer=!0,m.params=t.common,m.containerId=f.Id,m.dockerParams=t),p&&(m.containerProperties=p),m.config=n,m}}function $w(t){return t.workspaceFolder||"/"}async function tY(t,e,r,n,i,o,s,a){let{cliHost:c}=r,l=["--project-name",e,...i];if(a){let u=c.path.join(await c.tmpdir(),`docker-compose.devcontainer.build-${Date.now()}.yml`),d=`services:
  ${t.service}:
    image: ${a}
`;await c.writeFile(u,Buffer.from(d)),l.push("-f",u)}l.push("build"),s&&l.push("--no-cache","--pull"),o.length&&(l.push(...o),o.indexOf(t.service)===-1&&l.push(t.service));try{await up(r,...l)}catch(u){throw u instanceof ne?u:new ne({description:"An error occurred building the Docker Compose images.",originalError:u,data:{fileWithError:n[0]}})}}async function rY(t,e,r,n,i,o,s,a){var H,$;let{common:c}=t,{cliHost:l}=e;c.progress(st.StartingContainer);let u=await jw(l.cwd,i,c.output),d=[].concat(...u.map(A=>["-f",A]));o&&d.push("--env-file",o);let f=rt(e.output,de.Info),p=await Uw(Z(U({},e),{output:f}),u,o);if(Object.keys(p.services||{}).indexOf(r.service)===-1)throw new ne({description:`Service '${r.service}' configured in devcontainer.json not found in Docker Compose configuration.`,data:{fileWithError:i[0]}});let m,g=new Promise((A,D)=>m=D),{started:v}=await Ap(t,{[kp]:n,[qw]:r.service},g,c.output,c.getLogLevel()===de.Trace);s&&await tY(r,n,Z(U({},e),{output:f}),u,d,(H=r.runServices)!=null?H:[],($=t.buildNoCache)!=null?$:!1,void 0);let y=p.services[r.service],C=y.image||`${n}_${r.service}`,w,b=()=>w||(w=$l(t,C,!y.build)),E=await no(t.common,await oo(t.common),r,async()=>(await b()).Config.Labels||{}),S=await Ll(t,E,C,b),x=await Fl(t,r,S,b,y.user,a),T=x!==C,R=[...new Set([].concat(...((E==null?void 0:E.features)||[]).filter(A=>(ut||A.included)&&A.value).map(A=>A.capAdd||[])))],q=[...new Set([].concat(...((E==null?void 0:E.features)||[]).filter(A=>(ut||A.included)&&A.value).map(A=>A.securityOpt||[])))],B=[].concat(...((E==null?void 0:E.features)||[]).map(A=>(ut||A.included)&&A.value&&A.mounts).filter(Boolean)),te=B.filter(A=>A.type==="volume");if(r.overrideCommand||T||B.length){let A=((E==null?void 0:E.features)||[]).map(z=>(ut||z.included)&&z.value&&z.entrypoint).filter(Boolean),D=`services:
  '${r.service}':${T?`
    image: ${x}`:""}${r.overrideCommand?`
    entrypoint: /bin/sh
    command: ["-c", "echo Container started\\n
trap \\"exit 0\\" 15\\n
${A.join(`\\n
`)}\\n
while sleep 1 & wait $$!; do :; done"]`:""}${((E==null?void 0:E.features)||[]).some(z=>(ut||z.included)&&z.value&&z.init)?`
    init: true`:""}${((E==null?void 0:E.features)||[]).some(z=>(ut||z.included)&&z.value&&z.privileged)?`
    privileged: true`:""}${R.length?`
    cap_add:${R.map(z=>`
      - ${z}`).join("")}`:""}${q.length?`
    security_opt:${q.map(z=>`
      - ${z}`).join("")}`:""}${B.length?`
    volumes:${B.map(z=>`
      - type: ${z.type}
        source: ${z.source}
        target: ${z.target}`).join("")}`:""}${te.length?`
volumes:${te.map(z=>`
  ${z.source}:`).join("")}`:""}
`,F=(await l.readFile(i[0])).toString(),G=(/^\s*(version:.*)$/m.exec(F)||[])[1];G&&(D=`${G}

${D}`);let K=`${await l.tmpdir()}/docker-compose.devcontainer.containerFeatures-${Date.now()}.yml`;await l.writeFile(K,Buffer.from(D)),d.push("-f",K)}let ee=["--project-name",n,...d];ee.push("up","-d"),t.expectExistingContainer&&ee.push("--no-recreate"),r.runServices&&r.runServices.length&&(ee.push(...r.runServices),r.runServices.indexOf(r.service)===-1&&ee.push(r.service));try{await up(Z(U({},e),{output:f}),...ee)}catch(A){throw m(),new ne({description:"An error occurred starting Docker Compose up.",originalError:A,data:{fileWithError:u[0]}})}return await v,{containerId:await Pp(t,n,r.service),featuresConfig:E}}async function jw(t,e,r){if(ar(t)){let n=pa(t),i=[];for(let o=0;o<e.length;o++){let s=await Qo(n,e[o],r);i.push(s)}return i}return e}async function Uw(t,e,r){try{let n=[].concat(...e.map(o=>["-f",o]));r&&n.push("--env-file",r);let i=await t.dockerComposeCLI();(Xo(i.version)||[])[0]>=2&&n.push("--profile","*");try{let{stdout:o}=await is(t,...n,"config"),s=o.toString();return t.output.write(s),ur(s)||{}}catch(o){if(!Buffer.isBuffer(o==null?void 0:o.stderr)||(o==null?void 0:o.stderr.toString().indexOf("UnicodeEncodeError"))===-1)throw o;if(t.cliHost.platform==="win32"){let{cmdOutput:c}=await up(Z(U({},t),{output:rt({event:t.output.event,dimensions:{columns:999999,rows:1}},de.Info)}),...n,"config");return ur(c.replace(Ti,""))||{}}let{stdout:s}=await is(Z(U({},t),{env:Z(U({},t.env),{LANG:"en_US.UTF-8",LC_CTYPE:"en_US.UTF-8"})}),...n,"config"),a=s.toString();return t.output.write(a),ur(a)||{}}}catch(n){throw n instanceof ne?n:new ne({description:"An error occurred retrieving the Docker Compose configuration.",originalError:n,data:{fileWithError:e[0]}})}}async function Pp(t,e,r){let n=await fi(t,!0,[`${kp}=${e}`,`${qw}=${r}`]);return n&&n[0]}async function rN(t,e,r){var n;return(n=t.find(i=>{let o=i.Config.Labels||{};return o[kp]===e&&o[qw]===r}))==null?void 0:n.Id}async function ql(t,e,r){let{cliHost:n}="cliHost"in t?t:t.common,i=await nY(t),o=Ip(n.env.COMPOSE_PROJECT_NAME||"",i);if(o)return o;try{let c=n.path.join(n.cwd,".env"),l=await n.readFile(c),u=/^COMPOSE_PROJECT_NAME=(.+)$/m.exec(l.toString()),d=u&&u[1].trim(),f=Ip(d||"",i);if(f)return f}catch(c){if(!(c&&(c.code==="ENOENT"||c.code==="EISDIR")))throw c}let s=e.configFolderPath,a=r[0]?n.path.dirname(r[0]):n.cwd;return FP(n.platform,a,n.path.join(s,".devcontainer"))?Ip(`${n.path.basename(s)}_devcontainer`,i):Ip(n.path.basename(a),i)}function Bw(t){let e=(t.Config.Labels||{})[kp];return e||void 0}function Ip(t,e){return e?t.toLowerCase().replace(/[^-_a-z0-9]/g,""):t.toLowerCase().replace(/[^a-z0-9]/g,"")}async function nY(t){try{let e=Xo((await t.dockerComposeCLI()).version);return e?!ha(e,[1,21,0]):!0}catch(e){return!0}}function gi(t,e,r){let n;return()=>n||(n=(async()=>{let i=!1,o;try{o=(await is(Z(U({},t),{cmd:r}),"version","--short")).stdout}catch(s){if((s==null?void 0:s.code)!=="ENOENT")throw s;o=(await is(Z(U({},t),{cmd:e}),"compose","version","--short")).stdout,i=!0}return{version:o.toString().trim(),cmd:i?e:r,args:i?["compose"]:[]}})())}var $n=V(require("url")),nN=V(require("https"));var Vw;(function(e){e[e.CannotAccessRepository=2]="CannotAccessRepository"})(Vw||(Vw={}));function jn(t){return t.toLowerCase().indexOf("github.com")>=0?cY(t):t.toLowerCase().indexOf("visualstudio.com")>=0?sY(t):t.toLowerCase().indexOf("dev.azure.com")>=0?oY(t):t.toLowerCase().indexOf("gitlab.com")>=0?aY(t):iY(t)}function vi(t){let e="owner",r="repository";return{repository:"unknown",repositoryUrl:t,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${e}/${r}`}}function iY(t){var s;let e="unknown-owner",r,n=t,i;i=(s=$n.parse(t))==null?void 0:s.path;let o=i==null?void 0:i.split("/");return!o||o.length<1?vi(t):(r=o[o.length-1],r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf("."))),{repository:"unknown",repositoryUrl:n,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${e}/${r}`})}function oY(t){var o,s;let e,r,n=t,i;if(Rp(t)){let a=`http://${t}`;i=(o=$n.parse(a))==null?void 0:o.path;let c=i==null?void 0:i.split("/");if(!c||c.length<5)return vi(t);e=c[3],r=c[4]}else{i=(s=$n.parse(t))==null?void 0:s.path;let a=i==null?void 0:i.split("/");if(!a||a.length<5)return vi(t);e=a[2],r=a[4],r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf(".")))}return{repository:"ado",repositoryUrl:n,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${e}/${r}`}}function sY(t){var o,s;let e,r,n=t,i;if(Rp(t)){let a=`http://${t}`;i=(o=$n.parse(a))==null?void 0:o.path;let c=i==null?void 0:i.split("/");if(!c||c.length<5)return vi(t);e=c[3],r=c[4]}else{i=(s=$n.parse(t))==null?void 0:s.path;let a=i==null?void 0:i.split("/");if(!a||a.length<5)return vi(t);e=a[2],r=a[4],r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf(".")))}return{repository:"vso",repositoryUrl:n,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${e}/${r}`}}function aY(t){var o,s;let e,r,n=t,i;if(Rp(t)){let a=`http://${t}`;i=(o=$n.parse(a))==null?void 0:o.path,i&&(i=i.replace("/:","/"));let c=i==null?void 0:i.split("/");if(!c||c.length<3)return vi(t);e=c[1],r=c[2]}else{i=(s=$n.parse(t))==null?void 0:s.path;let a=i==null?void 0:i.split("/");if(!a||a.length<2)return vi(t);e=a[1],r=a[2]}return r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf("."))),{repository:"gitlab",repositoryUrl:n,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${e}/${r}`}}function cY(t){var c,l;let e,r,n=t,i,o,s;if(Rp(t)){let u=`http://${t}`;s=(c=$n.parse(u))==null?void 0:c.path,s&&(s=s.replace("/:","/"))}else s=(l=$n.parse(t))==null?void 0:l.path;let a=s==null?void 0:s.split("/");if(!a||a.length<=2)return vi(t);if(e=a[1],r=a[2],r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf("."))),a.length>=3){if(a[3]==="commit"||a[3]==="tree"){let u=t.match(/\/tree\/|\/commit\//);u&&u.index&&(n=t.substring(0,u.index),i=t.substring(u.index+u[0].length))}if(a[3]==="pull"){o=a[4];let u=t.match(/\/pull\//);u&&u.index&&(n=t.substring(0,u.index))}}return{repository:"github",repositoryUrl:n,ref:i,commit:a[3]==="commit",repositoryOwner:e,repositoryName:r,pullRequestId:o,fullRepositoryName:`${e}/${r}`}}function Rp(t){return t=t.toLowerCase(),t.indexOf("://")<0?t.indexOf("@")<t.indexOf(":"):!1}var Dp=class extends Error{constructor(e,r){super();this.code=e,this.description=r}},Op=class{constructor(e){this.inputUrl=e,this.gitUrlInfo=jn(this.inputUrl)}repositoryName(){return this.gitUrlInfo.repositoryName}repositoryOwner(){return this.gitUrlInfo.repositoryOwner}async postClone(e,r,n,i){}installExtension(){return null}},iN=class extends Op{constructor(e){super(e)}async parseUrl(e){var o,s,a;let r=(o=this.gitUrlInfo)==null?void 0:o.repositoryOwner,n=(s=this.gitUrlInfo)==null?void 0:s.repositoryName,i=(a=this.gitUrlInfo)==null?void 0:a.pullRequestId;return this.getPullRequestInfo(e,r,n,i)}async getPullRequestInfo(e,r,n,i){var u,d,f,p,h,m,g,v,y,C,w;let o=await this.fetchPullRequestInfo(e,r,n,i),s=(d=(u=o.head)==null?void 0:u.repo)==null?void 0:d.clone_url,a=(p=(f=o.base)==null?void 0:f.repo)==null?void 0:p.clone_url;if(!a)throw new Dp(2,"Cannot access the head repository of the Pull Request.");let c=(h=o.head)==null?void 0:h.ref,l=((v=(g=(m=o.head)==null?void 0:m.repo)==null?void 0:g.owner)==null?void 0:v.login)===r?null:(w=(C=(y=o.head)==null?void 0:y.repo)==null?void 0:C.owner)==null?void 0:w.login;return{urlToClone:a,prRepositoryUrl:s,ref:c,sourceOwner:l}}async fetchPullRequestInfo(e,r,n,i){let o=`/repos/${r}/${n}/pulls/${i}`,s={"user-agent":"vscode-remote-containers"};e&&(s.authorization=`token ${e}`);let a={hostname:"api.github.com",port:443,path:o,method:"GET",headers:s};return new Promise((c,l)=>{let u="",d=nN.request(a,f=>{if(f.statusCode<200||f.statusCode>=300)return l(new Error(`Status Code: ${f.statusCode}`));f.on("data",p=>{u+=p}),f.on("end",()=>{let p=JSON.parse(u.toString());c(p)})});d.on("error",l),d.end()})}cloneOptions(e){return{url:e.urlToClone,fullClone:!0}}async postClone(e,r,n,i){if(e.sourceOwner){let l=e.prRepositoryUrl.replace(/\.[^/.]+$/,"");await pe({exec:r.exec,cmd:"git",args:["remote","add",e.sourceOwner,l],cwd:n,output:i}),await pe({exec:r.exec,cmd:"git",args:["fetch",e.sourceOwner,e.ref],cwd:n,output:i});try{await pe({exec:r.exec,cmd:"git",args:["checkout","-t",`${e.sourceOwner}/${e.ref}`],cwd:n,output:i})}catch(u){if(!(u.stderr&&u.stderr.startsWith(`fatal: A branch named '${e.ref}' already exists`)))throw u}await pe({exec:r.exec,cmd:"git",args:["config","--local",`remote.${e.sourceOwner}.github-pr-remote`,"true"],cwd:n,output:i})}else await pe({exec:r.exec,cmd:"git",args:["checkout",e.ref],cwd:n,output:i});let o=this.gitUrlInfo.repositoryOwner,s=this.gitUrlInfo.repositoryName,a=this.gitUrlInfo.pullRequestId,c=`${o}#${s}#${a}`;await pe({exec:r.exec,cmd:"git",args:["config","--local",`branch.${e.ref}.github-pr-owner-number`,c],cwd:n,output:i})}installExtension(){return"GitHub.vscode-pull-request-github"}},oN=class extends Op{constructor(e){super(e)}async parseUrl(e){var r,n;return{urlToClone:(r=this.gitUrlInfo)==null?void 0:r.repositoryUrl,ref:(n=this.gitUrlInfo)==null?void 0:n.ref}}cloneOptions(e){let r=this.gitUrlInfo.commit;return{url:e.urlToClone,branch:!r&&e.ref||void 0,fullClone:r}}async postClone(e,r,n,i){this.gitUrlInfo.commit&&await pe({exec:r.exec,cmd:"git",args:["checkout",e.ref],cwd:n,output:i})}},Gw=class extends Op{constructor(e,r){super(e);this.branch=r}async parseUrl(e){return{urlToClone:this.inputUrl,ref:this.branch}}cloneOptions(e){return{url:e.urlToClone,branch:e.ref||void 0}}};function Ma(t,e){if(e)return new Gw(t,e);let r=jn(t);if(r.repository==="github"){if(r.pullRequestId)return new iN(t);if(r.ref)return new oN(t)}return new Gw(t)}var Np=yi.join(__dirname,"..","node_modules","vscode-dev-containers","repository-containers");async function sN(t,e,r){let n=t.parsedAuthority;if(!n||Wt(n))return lY(t,n,e,r);if(zr(n))return n.inspectVolume?Kw(t,n):uY(t,n);if(qa(n))return Kw(t,n);throw new Error(`Unexpected authority: ${JSON.stringify(n)}`)}async function lY(t,e,r,n){let{common:i,userRepositoryConfigurationPaths:o,workspaceMountConsistencyDefault:s}=t,{cliHost:a,output:c}=i,l=a.cwd,u=e&&Ae(a.path,Zc(e.hostPath)?a.path.join(l,yi.basename(e.hostPath)):l),d;u&&(d=await fY(t,u),d&&i.backgroundTasks.push(d==null?void 0:d.gitUnshallow),d&&!r&&await d.gitClone());let f=u?await Un(a,u,o)||(r?hw(a,u.configFolderPath):void 0):r,p=f&&await so(a,u,f,c,s,t.configUpdater,r,i.cliMode)||void 0;if(!p)throw f||u?new ne({description:`Dev container config (${ge(f||hw(a,u.configFolderPath),a.platform)}) not found.`}):new ne({description:"No dev container config and no workspace found."});let h=p.config,m=e==null?void 0:e.settings,g=ao(m),v=h.name?`Dev Container: ${h.name}${g}`:`Dev Container${g}`;i.setWorkspaceName(v),d&&"initializeCommand"in h&&await d.gitClone(),await pN(Z(U({},t),{common:Z(U({},i),{output:i.postCreate.output})}),h.initializeCommand,i.postCreate.onDidInput);let y;if(ze(h)||"image"in h)y=await dN(t,u,h,p.workspaceConfig,t.originalCwd||l,d==null?void 0:d.gitClone,n);else if("dockerComposeFile"in h){if(d&&await d.gitClone(),!u)throw new ne({description:"A Dev Container using Docker Compose requires a workspace folder."});y=await ZO(t,u,h,t.originalCwd||l)}else throw new ne({description:`Dev container config (${h.configFilePath}) is missing one of "image", "dockerFile" or "dockerComposeFile" properties.`});return d&&await d.gitClone(),y}async function uY(t,e){let{repositoryPath:r,volumeName:n,folder:i}=e,o=xr(r);n=await uN(t,o,n);let{labels:s}=Na(o,r,i,n),a=[...s,`${jl}=${t.common.product.quality}`],c=await Fp(t,a);if(c)return zw(t,e,o,n,c);let{containerId:l,shellServer:u,config:d}=await o.cloneAndInitializeRepository(t,e,o,n);if(ze(d)||"image"in d)return zw(t,e,o,n,d,l,u);if("dockerComposeFile"in d)return eN(t,e,o,n,l,d);throw new ne({description:`Dev container config (${d.configFilePath}) not valid.`})}async function so(t,e,r,n,i,o,s,a=!1){let l=await ft(t).readDocument(s!=null?s:r);if(!l)return;let u=De(l),d=u;if(u&&o&&(u.configFilePath=r,d=o(u),delete d.configFilePath),!d||typeof d!="object"||Array.isArray(d))throw new ne({description:`Dev container config (${ge(r,t.platform)}) must contain a JSON object literal.`});let f=await fN(t,e,d,n,i,a),p=ba({platform:t.platform,localWorkspaceFolder:e==null?void 0:e.rootFolderPath,containerWorkspaceFolder:f.workspaceFolder,configFile:r,env:t.env},d);return typeof p.workspaceFolder=="string"&&(f.workspaceFolder=p.workspaceFolder),"workspaceMount"in p&&(f.workspaceMount=p.workspaceMount),p.configFilePath=r,{config:p,workspaceConfig:f}}async function Un(t,e,r){let n=await Ww(t,e,r);return n==null?void 0:n.uri}async function Ww(t,e,r){let n=await aN(t,e,r);if(n)return{uri:n,location:"user"};let i=await np(t,e.configFolderPath);if(i)return{uri:i,location:"workspace"};let o=await aN(t,e,[Np]);if(o)return{uri:o,location:"builtin"}}async function aN(t,e,r){let n=await zP(t,e,Ge);return n&&Lp(n,r)}async function Lp(t,e){let r=new Set(t.map(dY).filter(n=>!!n));for(let n of r)for(let i of e){let o=yi.join(i,n),s=await ip(o);if(s)return Ee.file(s)}}function cN(t,e,r){let n=t.path.relative(e.rootFolderPath,ge(r,t.platform));return n&&!n.startsWith("..")&&!t.path.isAbsolute(n)}function lN(t){if(t.scheme!=="file")return;let e=yi.relative(Np,t.fsPath);if(e&&!e.startsWith("..")&&!yi.isAbsolute(e))return e}function dY(t){let e;if(t.startsWith("https://"))e=t.substr(8);else{let r=/[^@:]+@([^:]+):(.+)/.exec(t);if(r)e=`${r[1]}/${r[2]}`;else return}return e.endsWith(".git")&&(e=e.substr(0,e.length-4)),e.toLowerCase().startsWith("github.com")&&(e=(/^[^/]+\/[^/]+\/[^/]+/.exec(e)||[])[0]),e}async function fY(t,e){var p;let{common:r,gitClone:n}=t,{cliHost:i}=r;if(!n)return;let o=il(r),s=il(r),a=Ma(n.url,n.branch),c=await a.parseUrl(n.tokenEnvVar?i.env[n.tokenEnvVar]:void 0),l=a.cloneOptions(c),u=Z(U(U({},n),l),{env:U(U({},n.env),l.env)}),d=await Sf(r,r.cliHost,e.rootFolderPath,u,o.output,s.output),f=(p=d.gitClone)==null?void 0:p.then(()=>a.postClone(c,i,e.rootFolderPath,o.output));return{gitClone:async()=>{o.flush(),await f},gitUnshallow:async()=>{o.flush(),s.flush(),await d.gitUnshallow}}}function xr(t){return{repositoryPath:t,fullRepositoryName:Mp(t),repositoryName:pY(t),workspaceFolder:gN,volumeDestination:Yw(),oldVolumeName:hY(t),alreadyCloned:!1,imageName:mY(t),uniqueVolumeName:gY(t),getWorkspaceConfiguration:(e,r)=>vY(e,r),getOldWorkspacePath:wN,cloneAndInitializeRepository:yY,buildSingleContainer:wY,getConfigurationFromImage:yN,gitUrlHandler:Ma(t),gitUrlInfo:jn(t)}}function Mp(t){let e=jn(t);return e==null?void 0:e.fullRepositoryName}function pY(t){let e=jn(t);return e==null?void 0:e.repositoryName}function Yw(){return"/workspaces"}function hY(t){let e=Mp(t);return`vsc-${ct.posix.basename(e)}-${Qw(t)}`}function mY(t){let e=Mp(t),r=Qw(t),n=ct.posix.basename(e);return dp(`vsc-${n}-${r}`)}function gY(t){let e=jn(t),r="";e&&e.repositoryName&&(r=e.repositoryName,e.ref?r=`${r}-${e.ref.replace(/\//g,"-")}`:e.pullRequestId&&(r=`${r}-pull-${e.pullRequestId}`));let n=Qw(t);return`${r}-${n}`}function Qw(t){return hN.createHash("md5").update(t).digest("hex")}function vY(t,e){let r=gN(t),n=`type=volume,src=${e},dst=${Yw()}`;return{workspaceFolder:r,workspaceMount:n}}function gN(t){return ct.posix.join(`${Yw()}`,`${t}`)}async function yY(t,{folder:e,cloneInfo:r},n,i){var u;await EY(t);let{containerId:o,shellServer:s}=await CY(t,n,i,e,t.configProvider,r),{config:a,workspaceFolder:c}=await yN(t,n,e,s),l=(u=n.gitUrlHandler)==null?void 0:u.installExtension();return l&&(a.extensions||(a.extensions=[]),a.extensions.includes(l)||a.extensions.push(l)),await Up(t,o,"root",c,a.initializeCommand),{repository:n,volumeName:i,containerId:o,shellServer:s,config:a}}async function wY(t,e,r,n,i){try{return{imageName:await _Y(t,e,r,n,i)}}finally{Pe(t,"rm","-f",n)}}async function CY(t,e,r,n,i,o){let{common:s}=t,{output:a,loadNativeModule:c}=s,l=e.fullRepositoryName,u,d,f,p;t.common.progress(st.CloningRepository);let h=Hw(e,r,n,t.buildContainerRunArgs);n?(a.write(`Cloning Github repository: ${l} into ${e.workspaceFolder(n)}
\r`),u=`fatal: destination path '${e.workspaceFolder(n)}' already exists`,p=e.workspaceFolder(n),f=`Repository '${l}' was already cloned into '${e.workspaceFolder(n)}'.
\r`):(a.write(`Cloning Github repository: ${l} into volume ${r}
\r`),u=`fatal: destination path '${l}' already exists`,p=`${l}`,f=`Repository '${l}' was already cloned into volume.`);let m=e.gitUrlHandler;if(!m)throw new ne({description:"Could not analyze the URL."});o?d=m.cloneOptions(o):d={url:e.repositoryPath};let{stdout:g}=await Pe(t,...h),v=g.toString().trim(),y=pi(t,v,"root"),C=await Wo(y,a),w,b,E=Promise.resolve(),S;if(!s.cliMode){let q=await Mf(s,{remoteExec:y,user:"root",nodeExecutable:"node",shellServer:C});w=q.remoteContainersCLI,b=q.remoteEnv,E=q.ready,S=q.mrpcExec}let x=await Ia(t,v,"root",c),T=tl("container",p,await S||y,x,a);try{s.cliMode||(t.common.isCopyGitConfigEnabled&&(await dl(t.common,{homeFolder:"/root",shellServer:C},[".gitconfig"],"git"),await zy(t.common,{homeFolder:"/root",shellServer:C},{})),await Wf({shellServer:C,nodeExecutable:"node"},w,a,"global"),await dl(t.common,{homeFolder:"/root",shellServer:C},[".ssh","known_hosts"],"ssh"),await E);let q=il(s),B=await Sf(s,T,p,Z(U({},d),{env:U(U({},b),d.env)}),a,q.output);if(await B.gitClone,B.gitUnshallow&&B.gitUnshallow.then(q.flush,q.flush),B.gitClone&&o)try{await m.postClone(o,T,p,a)}catch(te){return Xw(t,v,`Failed to checkout the repository ${o.urlToClone}.`)}}catch(q){let B=q&&(q.cmdOutput||q.stack||q.message)||String(q);if(B=B.replace(Ti,""),B.replace(/[\r\n]+/gm,"").includes(u))a.write(f),e.alreadyCloned=!0;else return Xw(t,v,`Git clone failed. ${B}`)}let{configRaw:R}=await vN(t,e,n,C);if(!Pa(R)&&i){a.write(`Repository ${l} has no development container files.
\r`);let q=!0;for(;q;){let B=await i.createConfiguration(p,T);if(B)q=!1;else if(B=await i.showError("You must select a container configuration since the repository does not contain a dev container configuration. Without a dev container configuration the container cannot be started.","Select Configuration"),B!=="Select Configuration")return Xw(t,v,"Cancelled container configuration selection.")}}return{containerId:v,shellServer:C}}function Hw(t,e,r,n=[]){return r?["run","-d","--mount",`type=volume,src=${e},dst=${t.volumeDestination}`,"-v","/var/run/docker.sock:/var/run/docker.sock",...n,`${Jw}`,"sleep","infinity"]:["run","-d","--mount",`type=volume,src=${e},dst=${t.fullRepositoryName}`,"-v","/var/run/docker.sock:/var/run/docker.sock",...n,`${Jw}`,"sleep","infinity"]}function Xw(t,e,r){throw e&&Pe(t,"rm","-f",e),new ne({description:r})}async function vN(t,e,r,n){let i,o,s;if(r?s=e.workspaceFolder(r):s=`${wN(e.repositoryPath)}`,o=await Lp([e.repositoryPath],t.userRepositoryConfigurationPaths),o&&(i=(await Ce(o.fsPath)).toString()),!o)for(let a of ka(ct.posix,s))try{i=(await n.exec(`cat ${a} 2>/dev/null`,{logOutput:!1})).stdout,o=Ee.from({scheme:"vscode-remote",path:a});break}catch(c){}return o||(o=await Lp([e.repositoryPath],[Np]),o&&(i=(await Ce(o.fsPath)).toString())),{configRaw:i&&De(i),configFile:o,workspaceFolder:s}}async function yN(t,e,r,n){let{configRaw:i,configFile:o,workspaceFolder:s}=await vN(t,e,r,n);if(!o||!i)throw new ne({description:"The repository does not have a 'devcontainer.json' configuration file."});let{common:a,configUpdater:c}=t,{cliHost:l,output:u}=a,d=U({},i),f=d;c&&(d.configFilePath=o,f=c(d),delete f.configFilePath);let p=ba({platform:l.platform,configFile:o,env:l.env,localWorkspaceFolder:void 0,containerWorkspaceFolder:s},f);return p.configFilePath=o,("workspaceMount"in p||"workspaceFolder"in p)&&u.write("The options 'workspaceMount' or 'workspaceFolder' are ignored when cloning a repository into a volume."),bY(t,p),{workspaceFolder:s,config:p}}function bY({common:t},e){let r=Bn(t.env),n=ao(r),i=e.name?`Dev Container: ${e.name}${n}`:`Dev Container${n}`;t.setWorkspaceName(i)}function wN(t){return`/workspaces/${ct.posix.basename(Mp(t))}`}var Jw="vsc-volume-bootstrap",qp="vsc-volume-inspect";async function EY(t){let{common:e}=t,{cliHost:r}=e,n="volumeBootstrap.Dockerfile",i=ct.join(e.extensionPath,"scripts",n),o=e.package.version,s=r.path.join(await r.tmpdir(),"vsch",`${n}-${o}`),a=`${s}-${Date.now()}`;await r.mkdirp(r.path.dirname(a)),await r.writeFile(a,await Ce(i)),await r.rename(a,s);let c=["build","-f",s,"-t",Jw,ct.dirname(s)];await dr(t,...c)}async function CN(t){let{common:e}=t,{cliHost:r}=e,n="volumeInspect.Dockerfile",i=ct.join(e.extensionPath,"scripts",n),o=e.package.version,s=r.path.join(await r.tmpdir(),"vsch",`${n}-${o}`),a=`${s}-${Date.now()}`;await r.mkdirp(r.path.dirname(a)),await r.writeFile(a,await Ce(i)),await r.rename(a,s);let c=["build","-f",s,"-t",qp,ct.dirname(s)];await dr(t,...c)}async function _Y(t,e,r,n,i){let o=e.imageName,s="image"in r?r.image:o;if(ze(r))try{await SY(t,r,n,i,s)}catch(a){throw a instanceof ne?a:new ne({description:"An error occurred building the image.",originalError:a})}return s}async function SY(t,e,r,n,i){var m,g;t.common.progress(st.BuildingImage);let o=e.configFilePath,s=o.scheme==="file",a={platform:s?process.platform:"linux"},c=yt(a,e),l=s?c.fsPath:c.path,u=jp(a,e),d=s?u.fsPath:u.path;if(s){let v=ct.dirname(o.fsPath),y=ct.basename(v)===".devcontainer"?ct.dirname(v):v,C=mN.c({cwd:y},["."]),w=await new Promise(x=>{let T=[];C.on("data",R=>T.push(R)),C.on("end",()=>x(Buffer.concat(T)))}),b=`/tmp/devcontainer-${Date.now()}`;await n.exec(`# Copy local config folder to remote
mkdir -p ${b}
${pl(w.byteLength)} | tar --no-same-owner -x -C ${b}`,{stdin:w});let E=ct.relative(y,l);l=ct.posix.join(b,process.platform==="win32"?E.replace(/\\/g,"/"):E);let S=ct.relative(y,d);d=ct.posix.join(b,process.platform==="win32"?S.replace(/\\/g,"/"):S)}if(!await zf(n,l))throw new ne({description:`Dockerfile (${l}) not found.`});let f=["exec","-t",r,"docker","build","-f",l,"-t",i],p=(m=e.build)==null?void 0:m.target;if(p&&f.push("--target",p),t.buildNoCache)f.push("--no-cache","--pull");else if(e.build&&e.build.cacheFrom)if(typeof e.build.cacheFrom=="string")f.push("--cache-from",e.build.cacheFrom);else for(let v=0;v<e.build.cacheFrom.length;v++){let y=e.build.cacheFrom[v];f.push("--cache-from",y)}let h=(g=e.build)==null?void 0:g.args;if(h)for(let v in h)f.push("--build-arg",`${v}=${h[v]}`);f.push(d);try{let v=Z(U({},Mn(t)),{output:rt(t.common.output,de.Info)});await dr(v,...f)}catch(v){throw new ne({description:"An error occurred building the image.",originalError:v,data:{fileWithError:l}})}}async function uN(t,e,r){let n=[`vsch.local.repository=${e.repositoryPath}`];return r?r===Kr?(r=e.uniqueVolumeName,n.push("vsch.local.repository.unique=true")):n.push("vsch.local.repository.unique=false"):(r=e.oldVolumeName,n.push("vsch.local.repository.unique=false")),e.gitUrlInfo.ref&&n.push(`vsch.local.repository.branch=${e.gitUrlInfo.ref}`),e.gitUrlInfo.pullRequestId&&n.push(`vsch.local.repository.pullRequestId=${e.gitUrlInfo.pullRequestId}`),(await to(t)).indexOf(r)===-1&&await zR(t,r,n),r}var $p="vsch.local.repository",Zw="vsch.local.repository.volume",eC="vsch.local.repository.folder";function Na(t,e,r,n){return r?{labels:[`${$p}=${e}`,`${Zw}=${n}`,`${eC}=${r}`],remoteWorkspaceFolder:t.workspaceFolder(r)}:{labels:[`${$p}=${e}`],remoteWorkspaceFolder:t.getOldWorkspacePath(e)}}var jl="vsch.quality",bN="vsch.local.folder",EN="vsch.local.volume",tC="/volume";async function dN(t,e,r,n,i,o,s){let{common:a}=t,c,l,u,d=s||[`${bN}=${i}`,`${jl}=${a.product.quality}`];try{l=await Fp(t,d);let f=!!l;if(l){let p=l.Config.Labels||{};c=await no(t.common,await oo(t.common),r,async()=>p),await iC(t,d,l)}else{if(o&&e)if("image"in r){let{stdout:y}=await Pe(t,"images","-q",r.image);y.toString().trim().length===0&&await dr(t,"pull",r.image);let C=AY(t,e,r);C.length&&(a.output.write(`Waiting for git clone to finish. (Unsupported: ${C.map(w=>`'${w}'`).join(", ")})`),await o())}else await o();let p=await xY(t,r),h,m=()=>h||(h=$l(t,p,"image"in r));c=await no(t.common,await oo(t.common),r,async()=>(await m()).Config.Labels||{});let g=await Ll(t,c,p,m),v=await Fl(t,r,g,m,_N(r.runArgs)||r.containerUser,!0);try{await oC(t,r,c,v,d,n.workspaceMount)}finally{l=await Bl(t,d)}if(!l)return Hp(a.output,"Dev container not found.")}return u=await qn(t,l.Id,n.workspaceFolder,r.remoteUser),await nC(l,t,u,r,c,e,f,i,o)}catch(f){throw rC(f,l,t,u,r)}}async function zw(t,{repositoryPath:e,folder:r},n,i,o,s,a){let{common:c}=t,l,u,d,{labels:f,remoteWorkspaceFolder:p}=Na(n,e,r,i),h=[...f,`${jl}=${c.product.quality}`];try{let m,g="Id"in o;if("Id"in o){u=o,await iC(t,h,u);let v=pi(t,u.Id,"root"),y=await Wo(v,c.output,c.sessionId);l=(await n.getConfigurationFromImage(t,n,r,y)).config;let C=u.Config.Labels||{};m=await no(c,await oo(t.common),l,async()=>C),d=await qn(t,u.Id,p,l.remoteUser),await Up(t,u.Id,d.user,p,l.initializeCommand)}else{l=o;let v=await n.buildSingleContainer(t,n,l,s,a),y,C=()=>y||(y=$l(t,v.imageName,"image"in l));m=await no(c,await oo(t.common),l,async()=>(await C()).Config.Labels||{});let w=await Ll(t,m,v.imageName,C),b=await Fl(t,l,w,C,_N(l.runArgs)||l.containerUser,!1);try{let E=await n.getWorkspaceConfiguration(n.repositoryPath,i);await oC(t,l,m,b,h,E.workspaceMount)}finally{u=await Bl(t,h)}if(!u)return Hp(c.output,"Dev container not found.");d=await qn(t,u.Id,p,l.remoteUser),d.user!=="root"&&(d.launchRootShellServer?await Wy(d,d.launchRootShellServer,p,l.configFilePath.path):c.output.write("NOTE: Cannot run as root. Therefore cannot chown repository files."))}return await nC(u,t,d,l,m,Ae(Ul.posix,p),g,c.cwd,void 0)}catch(m){throw rC(m,u,t,d,l)}}async function Kw(t,e){let{common:r}=t,{volumeName:n}=e,i,o,s,a,c;qa(e)?(a=tC,c="Inspect Volume"):(a=xr(e.repositoryPath).volumeDestination,c="Recovery Container");let l=Ul.join(t.common.extensionPath,"scripts","devContainerInspect.json"),u={image:qp,name:c,configFilePath:Ee.parse(l),settings:{"extensions.ignoreRecommendations":!0}};s=[`${EN}=${n}`,`${jl}=${r.product.quality}`],r.setWorkspaceName(c);try{if(i=await Fp(t,s),i)await iC(t,s,i),o=await qn(t,i.Id,a,u.remoteUser);else{await CN(t);try{let d=`src=${n},dst=${a},type=volume,volume-driver=local`;await oC(t,u,void 0,qp,s,d)}finally{i=await Bl(t,s)}if(!i)return Hp(r.output,"Dev container not found.");o=await qn(t,i.Id,a,u.remoteUser),o.user!=="root"&&(o.launchRootShellServer?await Wy(o,o.launchRootShellServer,a):r.output.write("NOTE: Cannot run as root. Therefore cannot chown repository files."))}return await nC(i,t,o,u,void 0,Ae(Ul.posix,a),!0,r.cwd,void 0)}catch(d){throw rC(d,i,t,o,void 0)}}function rC(t,e,r,n,i){let o=t instanceof ne?t:new ne({description:"An error occurred setting up the container.",originalError:t});return e&&(o.manageContainer=!0,o.params=r.common,o.containerId=e.Id,o.dockerParams=r),n&&(o.containerProperties=n),i&&(o.config=i),o}async function nC(t,e,r,n,i,o,s,a,c){let{common:l}=e,u=ft(l.cliHost,r.shellServer);s||await sp(e,u,n);let d={cwd:a,dockerCLI:e.dockerCLI,env:l.env,containerId:t.Id,user:r.user,sessionId:l.sessionId,shutdownAction:n.shutdownAction,logLevel:l.getLogLevel(),delay:1e4},{shutdownArgs:f}=await Tp(e,u,"singleContainer",d,s?n:void 0),{hostOrContainerPort:p,hostPortServer:h,remoteEnv:m,serverDownloaded:g}=await Ki(l,r,n,i,c,n.devPort||zi);return f.hostPortServer=h,La(l,r,p,t,o),{params:l,properties:r,config:n,resolvedAuthority:{host:io,port:p,extensionHostEnv:m},tunnelInformation:l.isLocalContainer?Fa(t):{},dockerParams:e,dockerContainerId:t.Id,serverDownloaded:g}}async function xY(t,e){var n;let r="image"in e?e.image:Ml(t.common);return ze(e)&&(t.common.progress(st.BuildingImage),await kY(t,e,r,(n=t.buildNoCache)!=null?n:!1)),r}function _N(t=[]){for(let e=t.length-1;e>=0;e--){let r=t[e];if((r==="-u"||r==="--user")&&e+1<t.length)return t[e+1];if(r.startsWith("-u=")||r.startsWith("--user="))return r.substr(r.indexOf("=")+1)}}async function Fp(t,e){let{common:r}=t,n=await Bl(t,e);if(t.expectExistingContainer&&!n)throw new ne({description:"The expected container does not exist."});if(n&&(t.removeOnStartup===!0||t.removeOnStartup===n.Id)){let i="Removing Existing Container",o=r.output.start(i);await Pe(t,"rm","-f",n.Id),r.output.stop(i,o),n=void 0}return n}async function iC(t,e,r){let{common:n}=t,i=r.State.Status!=="running";if(i){let o="Starting container",s=n.output.start(o);await Pe(t,"start",r.Id),n.output.stop(o,s),await Bl(t,e)||Hp(n.output,"Dev container not found.")}return i}async function Bl(t,e){let r=await fi(t,!0,e);return(await Zi(t,r)).filter(i=>i.State.Status!=="removing")[0]}async function kY(t,e,r,n){var p,h;let{cliHost:i,output:o}="cliHost"in t?t:t.common,s=ft(i),a=yt(i,e);if(!await s.readDocument(a)){let m=ge(a,i.platform);throw new ne({description:`Dockerfile (${m}) not found.`})}let l=await sC(a,i),u=["build","-f",l,"-t",r],d=(p=e.build)==null?void 0:p.target;if(d&&u.push("--target",d),n)u.push("--no-cache","--pull");else if(e.build&&e.build.cacheFrom)if(typeof e.build.cacheFrom=="string")u.push("--cache-from",e.build.cacheFrom);else for(let m=0;m<e.build.cacheFrom.length;m++){let g=e.build.cacheFrom[m];u.push("--cache-from",g)}let f=(h=e.build)==null?void 0:h.args;if(f)for(let m in f)u.push("--build-arg",`${m}=${f[m]}`);u.push(await sC(jp(i,e),i));try{let m=Z(U({},Mn(t)),{output:rt(o,de.Info)});await dr(m,...u)}catch(m){throw new ne({description:"An error occurred building the image.",originalError:m,data:{fileWithError:l}})}}async function oC(t,e,r,n,i,o){let{common:s}=t;s.progress(st.StartingContainer);let a=e.appPort,c=typeof a=="number"||typeof a=="string"?[a]:a||[],l=[].concat(...c.map(H=>["-p",typeof H=="number"?`127.0.0.1:${H}:${H}`:H])),u=o?["--mount",o]:[],d=e.mounts?[].concat(...e.mounts.map(H=>["--mount",H])):[];if(t.cacheMount==="volume")d.push("--mount","type=volume,src=vscode,dst=/vscode");else if(t.cacheMount==="bind"){await nr(s.localCacheFolder);let H=s.localCacheFolder.indexOf(",")!==-1?'"':"";d.push("--mount",`type=bind,${H}src=${s.localCacheFolder}${H},dst=/vscode`)}let f=e.containerEnv,p=f?Object.keys(f).reduce((H,$)=>(H.push("-e",`${$}=${f[$]}`),H),[]):[],h=e.containerUser?["-u",e.containerUser]:[],m=[];((r==null?void 0:r.features)||[]).some(H=>(ut||H.included)&&H.value&&H.init)&&m.push("--init"),((r==null?void 0:r.features)||[]).some(H=>(ut||H.included)&&H.value&&H.privileged)&&m.push("--privileged");let g=new Set([].concat(...((r==null?void 0:r.features)||[]).filter(H=>(ut||H.included)&&H.value).map(H=>H.capAdd||[])));for(let H of g)m.push("--cap-add",H);let v=new Set([].concat(...((r==null?void 0:r.features)||[]).filter(H=>(ut||H.included)&&H.value).map(H=>H.securityOpt||[])));for(let H of v)m.push("--security-opt",H);let y=[].concat(...[].concat(...((r==null?void 0:r.features)||[]).map(H=>(ut||H.included)&&H.value&&H.mounts).filter(Boolean)).map(H=>["--mount",`type=${H.type},src=${H.source},dst=${H.target}`])),C=((r==null?void 0:r.features)||[]).map(H=>(ut||H.included)&&H.value&&H.entrypoint).filter(Boolean),w=e.overrideCommand!==!1,b=w?["--entrypoint","/bin/sh"]:[],E=w?["-c",`echo Container started
trap "exit 0" 15
${C.join(`
`)}
while sleep 1 & wait $!; do :; done`]:[],S=["run","--sig-proxy=false","-a","STDOUT","-a","STDERR",...l,...u,...d,...y,...PY(i),"-l",`vsch.remote.devPort=${e.devPort||zi}`,...p,...h,...e.runArgs||[],...m,...b,n,...E],x,T=new Promise((H,$)=>x=$),{started:R}=await Ap(t,IY(i),T,s.output,s.getLogLevel()===de.Trace),q="Starting container",B=s.output.start(q),te=Z(U({},Mn(t)),{output:rt(t.common.output,de.Info)});dr(te,...S).then(x,x),await R,s.output.stop(q,B)}function $a(t){let e=(t.Config.Labels||{})[bN];return e||void 0}function us(t){let e=(t.Config.Labels||{})[$p];return e||void 0}function Bp(t){let e=(t.Config.Labels||{})[Zw];return e||void 0}function SN(t){let e=(t.Config.Labels||{})[EN];return e||void 0}function xN(t){let e=(t.Config.Labels||{})[eC];return e||void 0}function PY(t){let e=[];return t.forEach(r=>e.push("-l",r)),e}function IY(t){let e={};return t.forEach(r=>{let n=r.split("=");e[n[0]]=n[1]}),e}function Hp(t,e){throw t.write(_e(e)),new Error(e)}function AY(t,e,r){let n=[];for(let i in r){let o=TY[i],s=typeof o=="function"?o(t,e,r):o;s===!0?n.push(i):typeof s=="string"?n.push(s):Array.isArray(s)&&n.push(...s)}return n}var TY={configFilePath:!1,image:!1,name:!1,forwardPorts:!1,appPort:!1,devPort:!1,portsAttributes:!1,otherPortsAttributes:!1,extensions:!1,runArgs:(t,e,r)=>{let n={"add-host":!0,"cap-add":!0,gpus:!0,hostname:!0,l:!0,label:!0,"security-opt":!0},i=[];for(let s of r.runArgs){let a=s.indexOf("="),c=a===-1?s.substr(2):s.substr(2,a);if(s.startsWith("--"))i.push(c);else if(s.startsWith("-"))for(let l of s.substr(1))i.push(l)}let o=[];for(let s of i)n[s]||o.push(s);return o},shutdownAction:!1,overrideCommand:!0,initializeCommand:!0,onCreateCommand:!1,updateContentCommand:!1,postCreateCommand:!1,postStartCommand:!1,postAttachCommand:!1,waitFor:!1,workspaceFolder:!1,workspaceMount:(t,e,r)=>kN(t,e,r.workspaceMount)?r.workspaceMount:!1,mounts:(t,e,r)=>r.mounts.filter(kN.bind(void 0,t,e)),settings:!1,containerEnv:!1,remoteEnv:!1,containerUser:!1,remoteUser:!1,updateRemoteUserUID:!1,userEnvProbe:!1,features:!1,hostRequirements:!1};function kN(t,e,r){let n=!!r&&RY(r);return n&&n.type==="bind"&&!!n.source&&DY(t.common.cliHost,e.rootFolderPath,n.source)}function RY(t){let e={src:"source",destination:"target",dst:"target"};return t.split(",").map(r=>r.split("=")).map(([r,n])=>[e[r]||r,n]).reduce((r,[n,i])=>(r[n]=i,r),{type:"bind"})}function DY(t,e,r){let{path:n}=t,i=n.relative(e,r);return!!i&&!i.startsWith("..")&&!n.isAbsolute(i)}var PN=V(require("path"));async function IN(t,e,r,n,i,o){let s,a=new Promise(h=>s=h),c=new ww,l=[],u=await BR("vscode-remote-containers",async(h,m)=>{let g=await VR(h),v=[];if(g.type==="poll")try{v=await c.dequeue(6e4)}catch(y){}else if(g.type==="reply"){let y=l[g.sequence];y&&(y(g.reply),delete l[g.sequence])}else g.type==="done"&&s?s():g.type==="log"&&n.event(g.event);m.write(JSON.stringify(v)),m.end()});u.server.unref();let d=PN.join(r,"dist","shutdown","shutdownMonitorProcess"),f=[u.ipcHandlePath,t,de[e],i||"",o.getTime().toString()];n.write(`Forking shutdown monitor: ${d} ${f.join(" ")}\r
`);let p=jP(d,f,{stdio:["ignore","ignore","ignore","ipc"],detached:!0,execArgv:[]});return p.on("error",h=>{console.error(h)}),p.unref(),{queue:c,sequence:0,replies:l,done:a}}async function Vp(t,e,r){let n=t.sequence++,i=new Promise(s=>t.replies[n]=s);return t.queue.push({type:"configure",sequence:n,options:e}),await i}async function AN({queue:t,done:e}){t.push({type:"cleanup"}),await e}var RN=V(require("util"));var DN=V(require("string_decoder")),Kr="__UNIQUE__",io="127.0.0.1";async function sC(t,e){if(t.scheme==="file"&&e.type==="wsl"){let{stdout:r}=await pe({exec:e.exec,cmd:"wslpath",args:["-u",t.fsPath],output:Ge});return r.toString().trim()}return ge(t,e.platform)}function ja(t,e){let r=t.platform==="win32"&&!t.env.SSH_AUTH_SOCK?Ly:t.type==="wsl"?t.env.SSH_AUTH_SOCK:void 0,n={DOCKER_CONTEXT:"default"};return e&&("context"in e?n.DOCKER_CONTEXT=e.context:(e.host&&(n.DOCKER_HOST=e.host),e.certPath&&(n.DOCKER_CERT_PATH=e.certPath),e.tlsVerify&&(n.DOCKER_TLS_VERIFY=e.tlsVerify))),r&&(n.SSH_AUTH_SOCK=r),n}function Bn(t){let e;return t.DOCKER_CONTEXT&&t.DOCKER_CONTEXT!=="default"?e={context:t.DOCKER_CONTEXT}:(e={},t.DOCKER_HOST&&(e.host=t.DOCKER_HOST),t.DOCKER_CERT_PATH&&(e.certPath=t.DOCKER_CERT_PATH),t.DOCKER_TLS_VERIFY&&(e.tlsVerify=t.DOCKER_TLS_VERIFY),Object.keys(e).length||(e=void 0)),e}function Gp(t,e){e&&("context"in e&&e.context&&t.write(`Context: ${e.context}\r
`),"host"in e&&e.host&&t.write(`Host: ${e.host}\r
`),"certPath"in e&&e.certPath&&t.write(`CertPath: ${e.certPath}\r
`),"tlsVerify"in e&&e.tlsVerify&&t.write(`TLSVerify: ${e.tlsVerify}\r
`))}function Wp(t){return!t.DOCKER_HOST&&(!t.DOCKER_CONTEXT||t.DOCKER_CONTEXT==="default")}function ao(t){return t&&("context"in t||t.host)?` @ ${"context"in t?t.context:t.host}`:""}async function Hn(t,e){try{return await _t(t,e)}catch(r){return}}async function Ap(t,e,r,n,i){let o=await bl(t,{event:["start"]});return{started:new Promise((s,a)=>{r.catch(u=>{o.terminate(),a(u)});let c=new DN.StringDecoder("utf8"),l="";o.stdout.on("data",async u=>{if(u){let d=c.write(u);i&&n.write(`Log: startEventSeen#data ${d.trim().replace(/\r?\n/g,`\r
`)}\r
`);let f=(l+d).split(`
`);l=f.pop();for(let p of f)if(p.trim())try{let h=JSON.parse(p);(h.status||h.Status)==="start"&&await OY(t,h,e)&&(o.terminate(),s())}catch(h){console.error(h),console.error(p)}}})})}}async function OY(t,e,r){var i;let n=((i=e.Actor)==null?void 0:i.Attributes)||(await _t(t,e.id||e.ID)).Config.Labels||{};return Object.keys(r).every(o=>n[o]===r[o])}function La(t,e,r,n,i){let o=n.Ports.filter(u=>!!u.PublicPort),s="";if(t.authority&&i){let u=i.isWorkspaceFile?"workspace":"folder",d=e.remoteWorkspaceFolder||"/",f=i.isWorkspaceFile?co.posix.join(d,t.cliHost.path.basename(i.workspaceOrFolderPath)):d;s=`&${u}=${encodeURIComponent(`vscode-remote://${t.authority}${f}`)}`}let a=[...o.length?["Published Ports:"]:[],...o.map(u=>`${u.PrivatePort}/${u.Type} -> ${u.IP}:${u.PublicPort}`),...o.length?[""]:[],...t.web?[`VS Code Web: http://localhost:${r}?tkn=${t.connectionToken}${s}`,""]:[]],c=a.reduce((u,d)=>Math.max(d.length,u),0),l="-".repeat(c);c>0&&t.output.write(`\r
\r
${l}\r
${a.join(`\r
`)}${l}\r
\r
`)}async function zp(t){let{common:e}=t,{output:r}=e,n="Check Docker is running",i=r.start(n);try{let{stdout:o}=await Pe(t,"version","--format","{{.Server.APIVersion}}"),s=o.toString();if(s.toLowerCase().indexOf("cannot connect")!==-1)throw new Error(s);r.write(`Server API version: ${s.trim()}`)}catch(o){console.error(o);let s=o&&(o.stderr?o.stderr.toString():o.message)||"";s&&r.write(_e(s));let a="Docker returned an error. Make sure the Docker daemon is running and select an option how to proceed.",c=o&&(o.stderr?o.stderr.toString().toLowerCase():o.message)||"";throw c.indexOf("permission denied")!==-1?c.indexOf("ssh")!==-1?a="Cannot connect to Docker daemon using 'ssh'. Make sure public/private keys are set up for connecting without keyboard interaction.":a="Current user does not have permission to run 'docker'. Try adding the user to the 'docker' group.":c.indexOf("ENOENT")!==-1&&(a="The 'docker' command was not found. Make sure Docker is installed."),new ne({description:a,originalError:`Docker returned an error code ${o.code}, message: ${o.message}`})}finally{r.stop(n,i)}}async function $l(t,e,r){try{return await eo(t,e)}catch(n){if(!r)throw n;try{await dr(t,"pull",e)}catch(i){throw n.stdout&&t.common.output.write(n.stdout.toString()),n.stderr&&t.common.output.write(_e(n.stderr.toString())),n}return eo(t,e)}}function Wt(t){return t.hostPath!==void 0}function zr(t){return t.repositoryPath!==void 0}function qa(t){return!zr(t)&&t.volumeName!==void 0}function gn(t){let e=NN("dev-container",t);if(!!e)return typeof e=="string"?{hostPath:e}:"repositoryPath"in e?e.dockerHost?{repositoryPath:e.repositoryPath,settings:{host:`tcp://${e.dockerHost.host}:${e.dockerHost.port}`,cloneInfo:e.cloneInfo}}:e:"hostPath"in e&&e.dockerHost?{hostPath:e.hostPath,settings:{host:`tcp://${e.dockerHost.host}:${e.dockerHost.port}`}}:e}function Hl(t,e,r){let n=r?JSON.stringify({hostPath:t,settings:r}):t;return`vscode-remote://dev-container+${Buffer.from(n,"utf8").toString("hex")}${e}`}function ds(t,e,r,n,i,o){if(t){let a=xr(t);if(!e){let l=JSON.stringify({repositoryPath:t,settings:i,cloneInfo:o,inspectVolume:n});return`vscode-remote://dev-container+${Buffer.from(l,"utf8").toString("hex")}${a.getOldWorkspacePath(t)}`}let c=JSON.stringify({repositoryPath:t,volumeName:e,folder:r,settings:i,cloneInfo:o,inspectVolume:n});return`vscode-remote://dev-container+${Buffer.from(c,"utf8").toString("hex")}${a.workspaceFolder(r)}`}let s=JSON.stringify({volumeName:e,settings:i});return`vscode-remote://dev-container+${Buffer.from(s,"utf8").toString("hex")}${tC}`}function Kp(t){let e=NN("attached-container",t);if(!!e)return typeof e=="string"?{containerId:e}:(e.dockerHost&&(e.settings={host:`tcp://${e.dockerHost.host}:${e.dockerHost.port}`},delete e.dockerHost),e)}function ON(t,e,r){let n=JSON.stringify({containerName:t,settings:e,cwd:r});return`attached-container+${Buffer.from(n,"utf8").toString("hex")}`}function NN(t,e){try{let[r,n]=e.split("+"),i=r===t&&n?Buffer.from(n,"hex").toString("utf8"):void 0;return i?i.startsWith("{")?JSON.parse(i):i:void 0}catch(r){console.warn(r);return}}async function aC(t,e,r,n=!1){return!n&&await _f(t,e,r)||e}function LN(t,e,r){let n=t.path.relative(t.path.dirname(e),r);return`/workspaces/${t.platform==="win32"?n.replace(/\\/g,"/"):n}`}async function fN(t,e,r,n,i,o=!1){if("dockerComposeFile"in r)return{workspaceFolder:$w(r),workspaceMount:void 0};let{workspaceFolder:s,workspaceMount:a}=r;if(e&&(!s||!("workspaceMount"in r))){let c=await aC(t,e.rootFolderPath,n,o);if(!s){let l=t.path.relative(t.path.dirname(c),e.rootFolderPath);s=`/workspaces/${t.platform==="win32"?l.replace(/\\/g,"/"):l}`}if(!("workspaceMount"in r)){let l=`/workspaces/${t.path.basename(c)}`,u=t.platform!=="linux"?`,consistency=${i||"consistent"}`:"",d=c.indexOf(",")!==-1?'"':"",f=l.indexOf(",")!==-1?'"':"";a=`type=bind,${d}source=${c}${d},${f}target=${l}${f}${u}`}}return{workspaceFolder:s,workspaceMount:a}}function FN(t,e,r){if(t==="win32")return e;let n=`${NY(r,"/")}/`;return(t==="linux"?e.startsWith(n):e.toLowerCase().startsWith(n.toLowerCase()))&&(e=`~/${e.substr(n.length)}`),e}function NY(t,e){if(e.length===0)return t;for(;t.endsWith(e);)t=t.substr(0,t.length-e.length);return t}function $R(t,e){return t.with({path:co.posix.resolve(t.path,e)})}async function LY(t,e,r,n,i,o){let s=FY(e,r,n,i,o);return dr(t,...s)}function FY(t,e,r,n,i){let o=["exec","-it"];if(r&&o.push("-w",r),o.push("-u",e),n)for(let s in n)o.push("-e",`${s}=${n[s]}`);return o.push(t,...i),o}async function Tp(t,e,r,n,i){let{common:o,onRemoveOnShutdownChanged:s}=t;if(o.cliMode)return{shutdownArgs:{},doneWithDocuments:Promise.resolve()};let a=o.output.start("Setup shutdown monitor"),c=await IN(r,o.getLogLevel(),o.extensionPath,o.output,o.logFilePath?co.dirname(o.logFilePath):void 0,o.sessionStart);Vp(c,n,o.output).catch(f=>console.error(f)),s&&s(async f=>{n.rebuild=!!f,n.delay=0,await Vp(c,n,o.output)}),o.onDidChangeLogLevel(async f=>{n.logLevel=f,await Vp(c,n,o.output)});let l={},u=async()=>{let f=AN(c);l.hostPortServer&&await(0,RN.promisify)(l.hostPortServer.close.bind(l.hostPortServer))(),await f};o.shutdowns.push(u);let d=i?MR(t,e,i).catch(console.error):Promise.resolve();return o.output.stop("Setup shutdown monitor",a),{monitor:c,shutdownArgs:l,doneWithDocuments:d}}function Fa(t){return{environmentTunnels:t.Ports.filter(e=>!!e.PublicPort).map(e=>({remoteAddress:{port:e.PrivatePort,host:e.IP},localAddress:e.IP+":"+e.PublicPort}))}}function jp(t,e){let r="dockerFile"in e?e.context:e.build.context;return r?Ji(t,e,r):ns(yt(t,e))}async function qn(t,e,r,n,i){let{common:o}=t,s="Inspecting container",a=o.output.start(s),c=await _t(t,e);o.output.stop(s,a);let l=n||c.Config.User||"root",[,u,,d]=/([^:]*)(:(.*))?/.exec(l),f=MY(c.Config.Env),p=pi(t,e,l),h=await Ia(t,e,l,o.loadNativeModule),m=pi(t,e,"root"),g=c.Mounts.find(C=>C.Type==="volume"&&C.Name==="vscode"),v=c.Mounts.find(C=>C.Type==="bind"&&C.Source===o.localCacheFolder),y=g&&co.posix.join(g.Destination,/^\.*(.*)$/.exec(o.product.serverDataFolderName)[1])||(v==null?void 0:v.Destination);return Vf({params:o,startedAt:c.State.StartedAt,sharedDataFolder:y,sharedDataFolderIsLocalCacheFolder:!g&&!!v,remoteWorkspaceFolder:r,containerUser:u==="0"?"root":u,containerGroup:d,containerEnv:f,remoteExec:p,remotePtyExec:h,remoteExecAsRoot:m,rootShellServer:i})}function MY(t){return(t||[]).reduce((e,r)=>{let n=r.indexOf("=");return n!==-1&&(e[r.substr(0,n)]=r.substr(n+1)),e},{})}async function pN(t,e,r){if(!e)return;let{common:n,dockerEnv:i}=t,{cliHost:o,output:s}=n,a=o.platform==="win32",c=a?[o.env.ComSpec||"cmd.exe","/c"]:["/bin/sh","-c"],l=a&&Array.isArray(e)&&e.length?[(e[0]||"").replace(/\//g,"\\"),...e.slice(1)]:e,u=typeof l=="string"?[...c,l]:l;if(!u.length)return;let d="initializeCommand",f=rt(s,de.Info);try{f.raw(`[1mRunning the ${d} from devcontainer.json...[0m\r
\r
`),await si({ptyExec:o.ptyExec,cmd:u[0],args:u.slice(1),env:i,output:f,onDidInput:r}),f.raw(`\r
`)}catch(p){if(p&&(p.code===130||p.signal===2))f.raw(`\r
[1m${d} interrupted.[0m\r
\r
`);else throw new ne({description:`The ${d} in the devcontainer.json failed.`,originalError:p})}}async function Up(t,e,r,n,i){if(!i)return;let o=typeof i=="string"?["/bin/sh","-c",i]:i;if(!o.length)return;let s=t.common.postCreate,a="initializeCommand",c=rt(s.output,de.Info);try{c.raw(`[1mRunning the ${a} from devcontainer.json...[0m\r
\r
`);let l=Z(U({},Mn(t)),{output:c,onDidInput:s.onDidInput});await LY(l,e,r,n,void 0,o),c.raw(`\r
`)}catch(l){if(l&&(l.code===130||l.signal===2))c.raw(`\r
[1m${a} interrupted.[0m\r
\r
`);else throw new ne({description:`The ${a} in the devcontainer.json failed.`,originalError:l})}}function Ml(t){let{cwd:e}="cwd"in t?t:t.cliHost,r=qY(e),n=co.basename(e);return dp(`vsc-${n}-${r}`)}function qY(t){return TN.createHash("md5").update(t).digest("hex")}async function oo(t){let{cliHost:e}=t,{version:r}=t.package,n=e.path.join(await e.tmpdir(),"vsch","container-features",`${r}-${Date.now()}`);return await e.mkdirp(n),n}var Ze=V(require("vscode"));var fs={id:"openDocumentation",title:"Open Documentation",isLastAction:!1,applicable:(t,e)=>!e,execute:async t=>{await Ze.env.openExternal(Ze.Uri.parse("https://aka.ms/vscode-remote/container/resolve-failed"))}},ps={id:"reloadWindow",title:"Reload Window",isLastAction:!0,applicable:(t,e)=>!e&&t.data.reload!==!1,execute:async t=>{t.manageContainer&&t.dockerParams&&t.containerId&&await Pe(t.dockerParams,"stop","-t","0",t.containerId),await Ze.commands.executeCommand("workbench.action.reloadWindow")}},MN={id:"rebuildContainer",title:"Rebuild Container",isLastAction:!0,applicable:(t,e)=>t.manageContainer&&!!t.dockerParams&&!!t.containerId&&!e,execute:async t=>{await Pe(t.dockerParams,"rm","-f",t.containerId),await Ze.commands.executeCommand("workbench.action.reloadWindow")}},Ua={id:"openRecent",title:"Open Recent...",isLastAction:!0,applicable:(t,e)=>!e,execute:async t=>{await Ze.commands.executeCommand("workbench.action.openRecent")}},qN={id:"startContainer",title:"Start Container",isLastAction:!0,applicable:t=>!!t.dockerParams&&!!t.containerId&&t.data.start===!0,execute:async t=>{await Pe(t.dockerParams,"start",t.containerId),await Ze.commands.executeCommand("workbench.action.reloadWindow")}},$N={id:"chooseContainer",title:"Choose Container",isLastAction:!0,applicable:t=>t.data.attach===!0,execute:async()=>{await Ze.commands.executeCommand("remote-containers.attachToRunningContainer")}},lo={id:"closeRemote",title:"Close Remote",isLastAction:!0,applicable:(t,e)=>{if(!e)return!1;let r=Ze.workspace.workspaceFile;return!(r&&r.scheme==="untitled"||Ze.workspace.textDocuments.some(i=>i.isDirty))},execute:async t=>{await Ze.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null})}},Ba=[{id:"retry",title:"Retry",isLastAction:!0,applicable:(t,e)=>e&&t.data.reload!==!1,execute:ps.execute},{id:"moreActions",title:"More Actions...",isCloseAffordance:!0,isLastAction:!1,applicable:(t,e)=>e,execute:async t=>{}},{id:"learnMore",title:"Learn More",isLastAction:!1,applicable:(t,e)=>e&&!!t.data.learnMoreUrl,async execute(t){await Ze.env.openExternal(Ze.Uri.parse(t.data.learnMoreUrl))}}];async function uo(t,e,r,n=!1,i){let o=t instanceof ne?t:new ne({description:"An error occurred setting up the container.",originalError:t});if(i){i.show();let f=o.originalError&&(o.originalError.stack||o.originalError.message)||o.originalError;if(f!==void 0){let p=String(f),h=_e(p);i.log.write(h)}}if(t.message.indexOf("Cancelled container configuration selection")!==-1)throw await Ze.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),Ze.RemoteAuthorityResolverError.NotAvailable(void 0,!1);let s=o.actions;s.length||(s=[fs]);let a=await s.reduce(async(f,p)=>await p.applicable(o,!0)?[...await f,p]:f,Promise.resolve([])),c=await Ze.window.showErrorMessage(o.description,{modal:!0},...a);if(c&&(jN(r,e,c.id),await c.execute(o)),c&&c.isLastAction){if(n)throw Ze.RemoteAuthorityResolverError.NotAvailable(void 0,!0);return}let l=await s.reduce(async(f,p)=>await p.applicable(o,!1)?[...await f,p]:f,Promise.resolve([])),u=l.map(f=>({label:f.title,action:f}));async function d(){let p=await(l.length?Ze.window.showQuickPick(u,{ignoreFocusOut:!0,placeHolder:"Pick an action to help resolve the problem."}):Promise.resolve(void 0));p&&(jN(r,e,p.action.id),p.action.execute(o).catch(console.error),p.action.isLastAction||await d())}if(d().catch(console.error),n)throw Ze.RemoteAuthorityResolverError.NotAvailable(void 0,!0)}function jN(t,e,r){t.sendTelemetryEvent("errorAction",{resolver:e,action:r})}var Q=V(require("vscode")),tu=V(require("path")),kF=V(require("os"));var PF=V(NL()),ho=V(xF());var VZ="remote.containers.defaultExtensions",Ci="remote-containers.revealLogTerminal",ib="remote-containers.revealPostCreateTerminal",ru="remote-containers.openDevContainerFile",IF="remote-containers.openRepositoryInVolume",gh="remote-containers.openRepositoryInUniqueVolume",AF="remote-containers.openRepositoryFromRemoteHub",TF="remote-containers.openPullRequestInVolume",nu=Q.Uri.parse("https://aka.ms/vscode-remote/containers/folder-setup"),iu=Q.Uri.parse("https://aka.ms/vscode-dev-containers"),RF=new Uy,pr={onRemoveOnShutdownChangedEmitter:RF,onRemoveOnShutdownChanged:RF.event,results:new Map},Qr=t=>UP(t,Q.env.appRoot);function vh(t,e,r,n){return async(i,o)=>{if(Q.commands.executeCommand("setContext","forwardedPortsViewEnabled",!0),o.resolveAttempt>1){let s=r.get(i);if(!s)throw new Error("Reconnect attempt without old result.");if(s.dockerContainerId){let a=await Hn(s.dockerParams,s.dockerContainerId);if(!a)throw Q.RemoteAuthorityResolverError.NotAvailable("Container no longer exists.");if(a.State.Status==="paused")throw Q.RemoteAuthorityResolverError.TemporarilyNotAvailable("Container is paused.");if(a.State.Status!=="running")throw Q.RemoteAuthorityResolverError.NotAvailable("Container is no longer running.")}return Z(U({connectionToken:void 0},s.resolvedAuthority),{isTrusted:s.isTrusted})}else{let s="Resolving Remote",a=t.log.start(s),c=await n(i,t,e);return GZ(c.params,c.properties).catch(l=>{}),r.set(i,c),t.log.stop(s,a),Q.window.withProgress({location:Q.ProgressLocation.Window,title:lee,cancellable:!1},async l=>{await GT(c.params.backgroundTasks)}).then(void 0,l=>{t.show(),t.log.write(_e(String(l&&(l.stack||l.message)||l)))}),Z(U(U({connectionToken:void 0},c.resolvedAuthority),c.tunnelInformation),{isTrusted:c.isTrusted})}}}async function GZ(t,e){if(!e.nodeExecutable)return;let r=await Ce(tu.join(t.extensionPath,"dist","node","remoteCloudGuesser.js"),{encoding:"utf8"}),{stdout:n}=await ci(t,e,[e.nodeExecutable,"-e",r],void 0,{silent:!0}),i=n.toString().trim();t.sendTelemetryEvent("extraInfo",{remoteCloud:i})}var ob;async function WZ(){return ob||(ob=Fn(tu.join(__dirname,"..",".."),bi)),ob}var ou={};async function bi(t,e=!0){var r;if(t.counter&&((r=ou[t.prompt])==null?void 0:r.from)===t.counter&&delete ou[t.prompt],!ou[t.prompt]){if(!e)return"";ou[t.prompt]={result:Promise.resolve(Q.window.showInputBox({prompt:t.prompt||"Enter password",password:!0,ignoreFocusOut:!0}).then(n=>n||"")),from:t.counter}}return ou[t.prompt].result}async function qe(t,e,r=!0,n=WZ()){e&&typeof e!="string"&&"scheme"in e&&(e.scheme==="file"?e=e.fsPath:e=nl(e));let i;if(!e){let l=(Q.workspace.workspaceFolders||[])[0];if(Q.env.remoteName==="wsl")l?e=nl(l.uri):e={wslDistro:my(Q.env.remoteAuthority),wslPath:"/"};else if(Q.env.remoteName==="ssh-remote"){let u=zZ(Q.env.remoteAuthority);if(u){let{user:d,hostName:f,port:p}=u;i={host:`ssh://${d?`${d}@`:""}${f}${p?`:${p}`:""}`}}}else(l==null?void 0:l.uri.scheme)==="file"&&(e=l.uri.fsPath);e||(e=process.cwd())}let o=await $r(e,Qr,t,r?Pr():"never"),s=wn(),a=Qa();if(!i){let l=Q.workspace.getConfiguration("docker"),u=l.get("context")||o.env.DOCKER_CONTEXT;if(!u){let d={cliHost:o,dockerCLI:s,dockerComposeCLI:gi({exec:o.exec,env:{},output:Ge},s,a),env:{},output:Ge};u=await Ew(d)||"default"}u&&u!=="default"?i={context:u}:(i=Bn(o.env)||{},"context"in i||(sb(i,l,"host"),sb(i,l,"certPath"),sb(i,l,"tlsVerify"),Object.keys(i).length||(i=void 0)))}let c=U(U({},await n),ja(o,i));return{cliHost:o,dockerCLI:s,dockerComposeCLI:gi({exec:o.exec,env:c,output:t},s,a),env:c,output:t}}function zZ(t){let e=/^ssh-remote\+(.*)$/.exec(t);if(!e)return;let r=e[1];try{let n=JSON.parse(Buffer.from(r,"hex").toString("utf8"));if(n&&n.hostName)return n}catch(n){}return{hostName:r}}function sb(t,e,r){let n=e.get(r);n&&(t[r]=n)}var KZ=["remote.containers.dockerPath","remote.containers.executeInWSL","docker.context","docker.host","docker.certPath","docker.tlsVerify"];function DF(){let t=new Q.EventEmitter,e=Q.workspace.onDidChangeConfiguration(async a=>{KZ.some(c=>a.affectsConfiguration(c))&&t.fire()}),r,n,i,o=()=>{(async()=>{n||(n=await $r(process.cwd(),Qr,Ge,Pr()));let a={cliHost:n,dockerCLI:wn(),dockerComposeCLI:gi({exec:n.exec,env:{},output:Ge},wn(),Qa()),env:{},output:Ge},c=await Ew(a);c===void 0?i=setTimeout(o,2*60*1e3):(c!==r&&(r!==void 0&&t.fire(),r=c),i=setTimeout(o,2*1e3))})().catch(console.error)};o();let s=t.dispose;return t.dispose=()=>{e.dispose(),i&&clearTimeout(i),s.call(t)},t}async function vs(){let t=Q.workspace.workspaceFolders;if((t==null?void 0:t.length)===1){let e=t[0].uri;return ab(e)}return null}async function ab(t){if(t&&t.scheme==="vscode-remote"&&/dev-container\+(.*)/.exec(t.authority)){let r=gn(t.authority);if(Wt(r))return null;if(zr(r)&&r.inspectVolume&&r.inspectVolume===!0)return r}return null}function yh(t){return{getConfigurationState:()=>t.get("configurationState"),updateConfigurationState:async e=>t.update("configurationState",e),containerOutdated:YZ}}async function YZ(t){let e="Rebuild",r="Ignore",n=await Q.window.showInformationMessage(`Configuration file(s) changed: ${t.join(", ")}. The container might need to be rebuilt to apply the changes.`,e,r);if(n===e)return Q.commands.executeCommand("remote-containers.rebuildContainer");if(n===r)return"ignore"}async function QZ(t,e){return t?OF():Array.from(new Set([...e,...Q.workspace.getConfiguration().get(VZ)||[],...OF()]))}function OF(){let t=Q.env.language,e=t.indexOf("-"),r=NF(t)||(e!==-1?NF(t.substr(0,e)):void 0);return r?[r]:[]}function NF(t){let e=t.toLowerCase();return Q.extensions.all.filter(r=>{var i;let n=r.packageJSON&&r.packageJSON.contributes;return((i=n==null?void 0:n.localizations)==null?void 0:i.length)?!!n.localizations.find(o=>{var s;return((s=o==null?void 0:o.languageId)==null?void 0:s.toLowerCase())===e}):!1}).map(r=>r.id)[0]}function XZ(){return Q.env.isTelemetryEnabled}function LF(){return!!Q.workspace.getConfiguration().get("workbench.enableExperiments")}function JZ(){return!!Q.workspace.getConfiguration().get("remote.containers.enableWebAccess")}function wh(){return Q.workspace.getConfiguration().get("remote.containers.workspaceMountConsistency")||"cached"}function Ch(){var t;return(t=Q.workspace.getConfiguration().get("remote.containers.cacheVolume"))!=null?t:!0}function ZZ(){let t=Q.workspace.getConfiguration().get("remote.containers.copyGitConfig");return typeof t=="boolean"?t:!0}function eee(){return Q.workspace.getConfiguration().get("remote.containers.gitCredentialHelperConfigLocation")||"global"}function wn(){return Q.workspace.getConfiguration().get("remote.containers.dockerPath")||"docker"}function Pr(){return process.platform!=="win32"?"never":Q.workspace.getConfiguration().get("remote.containers.executeInWSL",!1)?"always":"forWSLPath"}function Qa(){return Q.workspace.getConfiguration().get("remote.containers.dockerComposePath")||"docker-compose"}function lb(){let t=Q.workspace.getConfiguration().get("remote.containers.logLevel")||"debug";return W_(t)}var tee=t=>Q.workspace.onDidChangeConfiguration(e=>{e.affectsConfiguration("remote.containers.logLevel")&&t(lb())});function ree(){let t=Q.workspace.getConfiguration();return{repository:(t.get("remote.containers.dotfiles.repository","")||t.get("dotfiles.repository","")).trim()||void 0,installCommand:(t.get("remote.containers.dotfiles.installCommand","")||t.get("dotfiles.installCommand","")).trim()||void 0,targetPath:(t.get("remote.containers.dotfiles.targetPath","")||t.get("dotfiles.targetPath","")).trim()||"~/dotfiles"}}function Ei(t,e,r,n,i,o){let s={resolver:e,outcome:r};n&&(s.configProperties=JSON.stringify(Object.keys(n)),s.configExtensions=JSON.stringify(n.extensions||[]),s.configFeatures=JSON.stringify(Object.keys(n.features||{})),"image"in n?s.configType="image":ze(n)?s.configType="dockerfile":"dockerComposeFile"in n&&(s.configType="dockerCompose")),i&&(s.hardwareId=i.osRelease.hardware,s.osReleaseId=i.osRelease.id,s.osReleaseVersion=i.osRelease.version);let a=o&&o.originalError,c=a&&(a.stack||a.message||String(a))||o&&o.description;c&&(s.errorMessage=c),t.sendTelemetryEvent("resolver",s)}var FF=class{constructor(e){this.onClose=e;this.writeEmitter=new Q.EventEmitter;this.onDidWrite=this.writeEmitter.event;this.inputEmitter=new Q.EventEmitter;this.onDidInput=this.inputEmitter.event;this.queue=[];this.ready=!1}open(){this.ready=!0,this.queue.forEach(e=>this.writeEmitter.fire(e))}close(){this.ready=!1,this.onClose()}write(e){this.queue.push(e),this.ready&&this.writeEmitter.fire(e)}handleInput(e){this.inputEmitter.fire(e)}},bh=class{constructor(e,r,n=void 0){this.sessionStart=r;this.outputTerminal=new FF(()=>this._terminal=void 0);this.onDidInput=this.outputTerminal.onDidInput;this._name="Dev Containers";this._revealOnNextOutput=!1;let i=o=>{this.outputTerminal.write(o),this.revealOnNextOutput&&(this.revealOnNextOutput=!1,this.show())};this.logFilePath=e?tu.join(e,`remoteContainers-${r.toISOString().replace(/:/g,"-")}.log`):void 0,this.log=nee(i,lb,this.logFilePath,r,n),Object.defineProperty(this.log,"dimensions",{get:()=>{var o;return(o=this._terminal)==null?void 0:o.dimensions}}),this.log.onDidChangeDimensions=o=>Q.window.onDidChangeTerminalDimensions(s=>{s.terminal===this._terminal&&o(s.dimensions)})}get name(){return this._name}set name(e){this._name=e}get revealOnNextOutput(){return this._revealOnNextOutput}set revealOnNextOutput(e){this._revealOnNextOutput=e}show(){this._terminal||(this._terminal=Q.window.createTerminal({name:this.name,pty:this.outputTerminal})),this._terminal.show()}dispose(){this._terminal&&this._terminal.dispose()}get shown(){return!!this._terminal}};function nee(t,e,r,n,i=void 0){let o=[];return r&&o.push(Y_(r,()=>Math.min(de.Debug,e()))),o.push(Q_(t,e,n)),rt(K_(o,i))}async function ub(t,e){let r=await Hn(t,e.Id);if(r&&r.State.Status==="running")try{await Pe(t,"stop",r.Id)}catch(n){Q.window.showErrorMessage(`Error stopping container: ${n.message}`)}}async function Eh(t,e){let r=await Hn(t,e.Id);if(r&&r.State.Status!=="running")try{await Pe(t,"start",r.Id)}catch(n){Q.window.showErrorMessage(`Error starting container: ${n.message}`)}}async function MF(t,e){try{await Pe(t,"rm",e)}catch(r){Q.window.showErrorMessage(`Error removing container: ${r.message}`)}}async function db(t,e){try{await Pe(t,"volume","rm","--force",e)}catch(r){Q.window.showErrorMessage(`Error removing volume: ${r.message}`)}}function iee(){return Q.env.sessionId!=="someValue.sessionId"?Q.env.sessionId:`${Q.env.sessionId}_${Date.now()}`}function oee(t,e){let r=Q.workspace.registerResourceLabelFormatter({scheme:"vscode-remote",authority:t.authority,formatting:{label:"${path}",separator:"/",workspaceSuffix:e,tildify:!0}});t.shutdowns.push(r.dispose.bind(r))}async function qF(t,e){return t.globalState.get("removeOnStartup")===e?(await t.globalState.update("removeOnStartup",null),!0):t.workspaceState.get("removeOnStartup",!1)}async function $F(t,e){await t.workspaceState.update("removeOnStartup",e)}async function fb(t,e){await t.globalState.update("removeOnStartup",e)}async function jF(t,e){return t.globalState.get("buildNoCache")===e?(await t.globalState.update("buildNoCache",null),!0):!1}async function su(t,e){await t.globalState.update("buildNoCache",e)}async function _h(t,e,r,n,i){await t.globalState.update("openEditorsOnStartup",{workspaceFolder:e,fileWithError:r==null?void 0:r.toString(),logFile:n,openLog:i})}async function UF(t){var r;let e=t.globalState.get("openEditorsOnStartup");if(e){await t.globalState.update("openEditorsOnStartup",void 0);let n=(r=Q.workspace.workspaceFolders)==null?void 0:r.some(o=>o.uri.fsPath===e.workspaceFolder||o.uri.path===e.workspaceFolder),i=await vs();if(n||i&&i.repositoryPath===e.workspaceFolder&&(n=!0),n){let o=e.fileWithError?Ee.parse(e.fileWithError):void 0;if(e.openLog==="onTheSide"&&await HF(o),e.openLog&&e.logFile){let s={viewColumn:e.openLog==="onTheSide"?Q.ViewColumn.Beside:Q.ViewColumn.One,preserveFocus:!0},a=await Q.window.showTextDocument(Q.Uri.file(e.logFile),s),c=new Q.Position(a.document.lineCount-1,0);a.selection=new Q.Selection(c,c),a.revealRange(a.selection)}return e.openLog!=="onTheSide"&&await HF(o),!0}}return!1}function BF(t){return[`vscode-remote:/workspaces/${t}/.devcontainer/devcontainer.json`,`vscode-remote:/workspaces/${t}/.devcontainer.json`]}async function HF(t){return t?Q.commands.executeCommand("vscode.open",Q.Uri.parse(t.toString()),{viewColumn:Q.ViewColumn.One}):Q.commands.executeCommand("remote-containers.openDevContainerFile",void 0,{viewColumn:Q.ViewColumn.One})}async function pb(t){if(pr.results.size)return[...pr.results.values()].filter(o=>o.config).map(o=>o.config.configFilePath);let e=Gn(),r=Q.workspace.workspaceFolders||[],n=await Promise.all(r.map(async o=>{let s=Ae(t.path,ge(o.uri,t.platform));return await Un(t,s,e)})),i=Q.workspace.workspaceFile;if(i&&i.scheme!=="untitled"){let o=Ae(t.path,ge(i,t.platform)),s=await Un(t,o,e);s&&n.indexOf(s)===-1&&n.unshift(s)}return n.filter(o=>!!o)}function Gn(){return Q.workspace.getConfiguration().get("remote.containers.repositoryConfigurationPaths")||[]}async function see(t,e,r="localhost"){await Q.workspace.openTunnel({remoteAddress:{host:r,port:e}})}var VF=!1;function aee(t,e){if(t.type==="socatNotFound"){let r="socatNotFound_doNotShow";!VF&&!e.globalState.get(r)&&(VF=!0,(async()=>{let n="Don't Show Again";await Q.window.showWarningMessage("Cannot connect to WSL socket: 'socat' not installed in WSL distro.",n,"OK")===n&&await e.globalState.update(r,!0)})().catch(console.error))}}function GF(t,e){let r=new bh(void 0,e);r.name="Configuring...",r.revealOnNextOutput=!0;let n=!1;r.onDidInput(()=>{n&&(n=!1,r.dispose())});let i={enabled:!0,skipNonBlocking:!1,output:BP(r.log,t),onDidInput:r.onDidInput,done:()=>{r.shown&&(r.log.raw("[1mDone. Press any key to close the terminal.[0m"),n=!0)}};return{channel:r,postCreate:i}}function cee(){let t="remote.containers.experimentalContainerFeaturesFetchRemote";return Q.workspace.getConfiguration().get(t,!1)}async function Xa(t){let{authority:e,extensionContext:r,sessionStart:n,progress:i,cliHost:o,env:s,cwd:a,isLocalContainer:c,telemetry:l,output:u,logFilePath:d,allowSystemConfigChange:f,postCreate:p}=t,h=JZ(),m=cee(),g=Z(U({computeExtensionHostEnv:!0},l),{appRoot:Q.env.appRoot,localCacheFolder:tu.join(kF.tmpdir(),"vsch"),extensionPath:r.extensionPath,connectionToken:h?DT:void 0,sessionId:iee(),sessionStart:n,authority:e,cliHost:o,env:s,cwd:a,isLocalContainer:c,getExtensionsToInstall:QZ,isCopyGitConfigEnabled:ZZ(),credentialHelperConfigLocation:eee(),dotfilesConfiguration:ree(),progress:dee(i),output:u,logFilePath:d,allowSystemConfigChange:f,defaultUserEnvProbe:"loginInteractiveShell",postCreate:p,telemetry:XZ(),forwardServerPort:!0,web:h,getLogLevel:lb,onDidChangeLogLevel:tee,loadNativeModule:Qr,shutdowns:[],forwardedPorts:new Set,backgroundTasks:[],setWorkspaceName:v=>oee(g,v),openTunnel:see,getTunnels:()=>Promise.resolve(Q.workspace.tunnels),fireEvent:v=>aee(v,r),onAdoptProcess:Q.window.onDidOpenTerminal,remoteContainerFeaturesEnabled:m});return g}var Ja=`[Starting Dev Container (show log)](command:${Ci} "Show details in terminal")`,lee=`[Configuring Dev Container](command:${ib} "Show details in terminal")`,uee={[st.Begin]:"",[st.CloningRepository]:"Cloning Repository",[st.BuildingImage]:"Building image",[st.StartingContainer]:"Starting container",[st.InstallingServer]:"Installing server",[st.StartingServer]:"Starting server",[st.End]:""};function dee(t){let e=0;return r=>{let n=st.End-r,i=(100-e)/(n+1);t.report({message:uee[r],increment:i}),e+=i}}async function WF(t,e,r){let{name:n,publisher:i,version:o,aiKey:s}=e;if(!s)return H_(e,r);let a=i?`${i}.${n}`:n,c=new PF.default(a,o,s);t.subscriptions.push(c);let l=new zF(c),u=fee(r),d=LF()?(0,ho.getExperimentationService)(a,o,u,l,t.globalState):void 0;return{sendTelemetryEvent:l.sendTelemetryEvent.bind(l),isCachedFlightEnabled:async f=>d&&LF()?d.isCachedFlightEnabled(f):!1,product:r,package:e}}var zF=class{constructor(e){this.baseReporter=e;this.sharedProperties={}}sendTelemetryEvent(e,r,n){this.baseReporter.sendTelemetryEvent(e,U(U({},this.sharedProperties),r),n)}setSharedProperty(e,r){this.sharedProperties[e]=r}postEvent(e,r){let n={};for(let[i,o]of r)n[i]=o;this.sendTelemetryEvent(e,n)}};function fee(t){switch(t.quality){case"stable":return ho.TargetPopulation.Public;case"insider":return ho.TargetPopulation.Insiders;case"exploration":return ho.TargetPopulation.Internal;case void 0:return ho.TargetPopulation.Team;default:return ho.TargetPopulation.Public}}var au="Opening a folder in a Dev Container may execute arbitrary code both inside and outside the container.",hb="userConfirmedCloneRepositoryInDevContainerRequiresTrust";async function cu(t,e){if((e==null?void 0:e.toLowerCase().startsWith("https://github.com/microsoft/vscode-remote-try-"))||t.globalState.get(hb))return!0;let r="Got It",n="Learn More",i=await Q.window.showWarningMessage("Cloning a repository in a Dev Container may execute arbitrary code. ",{modal:!0,detail:"Only clone a repository in a Dev Container if you trust its authors."},r,n);return i===r?(await t.globalState.update(hb,!0),!0):(i===n&&Q.env.openExternal(Q.Uri.parse("https://aka.ms/vscode-remote-containers-trust")),!1)}var mb="userConfirmedAttachToContainerRequiresTrust";async function mo(t){if(t.globalState.get(mb))return!0;let e="Got It",r="Learn More",n=await Q.window.showWarningMessage("Attaching to a container may execute arbitrary code.",{modal:!0,detail:"Only attach to a container if you trust its origin."},e,r);return n===e?(await t.globalState.update(mb,!0),!0):(n===r&&Q.env.openExternal(Q.Uri.parse("https://aka.ms/vscode-remote-containers-trust")),!1)}function KF(t){t.globalState.setKeysForSync([hb,mb])}function YF(){let t=process.env.PATH||"";process.platform==="darwin"&&!/(^|:)\/usr\/local\/bin(:|$)/i.test(t)&&(process.env.PATH=`${t}:/usr/local/bin`)}var et=V(require("vscode")),Ie=V(require("path")),Z2=V(require("fs"));var xi=V(G$()),eB=V($2());var tB=V(require("util"));var j2=V(require("path"));var Rse=["png","md","json","txt","map"],Dse=["node_modules",".git","bin","out","dist",".vscode-test"],Ose=[{tag:"function.json",pattern:/^function\.json$/i},{tag:"package.json",pattern:/^package\.json$/i},{tag:"sln",pattern:/^.+\.sln$/i},{tag:"project.json",pattern:/^project\.json$/i},{tag:"csproj",pattern:/^.+\.csproj$/i},{tag:"azureml",pattern:/^.+\.azureml$/i},{tag:"amlignore",pattern:/^.+\.amlignore$/i},{tag:"azureml",pattern:/^.+\.azureml$/i},{tag:"environment.yml",pattern:/^environment\.yml$/i},{tag:"_config.yml",pattern:/^_config\.yml$/i},{tag:"_config.toml",pattern:/^_config\.toml$/i},{tag:"server.xml",pattern:/^server\.xml$/i},{tag:"web.xml",pattern:/^web\.xml$/i}],U2={"Node.js":["package.json"],".NET Core":["sln","project.json","csproj"],"Azure Functions":["function.json"],"Azure Machine Learning":["azureml","amlignore"],Anaconda:["environment.yml"],Jekyll:["_config.yml","_config.toml"],Tomcat:["server.xml","web.xml"],Dapr:[]},B2={"C#":["cs"],"C++":["cpp","cxx",".cc","c++"],"F#":["fs"],JavaScript:["js"],TypeScript:["ts"],Java:["java"],Elm:["elm"],Go:["go"],Python:["py","ipynb"],Ruby:["rb"],Perl:["pl"],PHP:["php"],R:["r"],PowerShell:["ps1"],Dart:["dart"],Rust:["rs"],Swift:["swift"],ReasonML:["re"],TerraForm:["tf"]},Nse=["docker-existing-docker-compose","docker-existing-dockerfile","codespaces-linux"];async function t_(t,e){for(let r of e)if(r.metaData){if(Nse.indexOf(j2.basename(r.definitionFolder))>-1)continue;let n=0,i=0,o=r.metaData.get("languagesPlatforms");if(o){let s=o.split(",").map(a=>a.trim());if(s[0]==="Any")n+=5;else for(let a of s)if(B2[a]){let c=B2[a];for(let l of c)t.fileTypes.get(l.toLowerCase())&&(n+=10),t.mostPopularFileType===l&&(n+=10)}else if(U2[a]){let c=U2[a],l=!1;for(let u of c)t.configFiles.get(u)&&(l=!0,i+=20);l||(i-=20)}}r.recommendationScore=n+(i<0?-4:i)}}async function H2(t,e){return Lse(t,e.rootFolderPath,Dse,Rse)}async function Lse(t,e,r,n){let i=new Map,o=new Map,s=500;function a(p,h,m,g){let v=[];(t.readDirWithTypes||t.readDir)(p).then(C=>{if(m.count>=s)return m.count+=C.length,m.maxReached=!0,g(v);let w=C.length;if(w===0)return g(v);let b=C;m.count+C.length>s&&(m.maxReached=!0,w=s-m.count,b=C.slice(0,w)),m.count+=C.length;for(let E of b){let S=Array.isArray(E)?E[0]:E;(Array.isArray(E)?Promise.resolve((E[1]&rp.File)!=0):t.isFile(t.path.join(p,S))).then(T=>{T?(v.push(S),--w==0&&g(v)):h.indexOf(S)===-1?a(t.path.join(p,S),h,m,R=>{if(v=v.concat(R),--w==0)return g(v)}):--w==0&&g(v)},()=>{if(--w==0)return g(v)})}},()=>g(v))}let c=p=>{i.has(p)?i.set(p,i.get(p)+1):i.set(p,1)},l=p=>{for(let h of Ose)h.pattern.test(p)&&(o.has(h.tag)?o.set(h.tag,o.get(h.tag)+1):o.set(h.tag,1))},u=p=>{if(p.lastIndexOf(".")>=0){let h=p.split(".").pop();h&&!n.includes(h)&&c(h.toLowerCase())}l(p)},d=p=>[...p.entries()].reduce((h,m)=>m[1]>h[1]?m:h,["",0])[0],f={count:0,maxReached:!1};return new Promise((p,h)=>{a(e,r,f,async m=>{m.forEach(u),p({configFiles:o,fileTypes:i,fileCount:f.count,mostPopularFileType:d(i)})})})}var Pm=V(require("path"));var _o=V(require("vscode"));async function Im(){await _o.window.showInformationMessage("You need to first save your workspace in a folder containing all its workspace folders.",{modal:!0})}function V2(t,e){let r=_o.workspace.fs;return{platform:t,path:t==="win32"?Pm.win32:Pm.posix,async isFile(n){try{return((await r.stat(ks(t,e,n))).type&_o.FileType.File)!=0}catch(i){if((i==null?void 0:i.code)==="FileNotFound")return!1;throw i}},async readFile(n){try{let i=await r.readFile(ks(t,e,n));return Buffer.from(i)}catch(i){if((i==null?void 0:i.code)==="FileNotFound"){let o=new Error(`Could not read file: ${n}`);throw o.originalError=i,o.code="ENOENT",o}throw i}},async writeFile(n,i){await r.writeFile(ks(t,e,n),i)},async readDir(n){return(await r.readDirectory(ks(t,e,n))).map(o=>o[0])},async readDirWithTypes(n){return r.readDirectory(ks(t,e,n))},async mkdirp(n){await r.createDirectory(ks(t,e,n))},async toCommonURI(n){return ks(t,e,n)}}}function Fse(t){return new RegExp("^[a-zA-Z]:/[^/].*$").test(t)}function ks(t,e,r){let i=t==="win32"||Fse(r)?"/"+r.replace(/\\/g,"/"):r;return e.with({path:i})}var Am=class{async readDocument(e){try{let r=await _o.workspace.fs.readFile(e);return Buffer.from(r).toString()}catch(r){return}}async applyEdits(e,r,n){let i=$t(n,r);await _o.workspace.fs.writeFile(e,Buffer.from(i))}};var xe=V(require("vscode"));var kt=V(require("vscode")),Uu=V(require("path"));async function r_(t,e){var i,o;let{fileHost:r}=t,n=await t.findDevContainerFiles();if(n.length){let s=n.length>1?(i=await kt.window.showQuickPick(n.map(d=>({label:d.scheme==="file"?d.fsPath:d.toString(),uri:d})),{placeHolder:"Select a container configuration file"}))==null?void 0:i.uri:n[0];if(!s)return;let a=r.path.dirname(ge(s,r.platform)),c=r.path.basename(a)===".devcontainer"?r.path.dirname(a):a,l=Ae(r.path,c),u=await a_(r,l);if(u){let d=Z(U({},u.object),{configFilePath:u.uri});if("image"in d)return{workspace:l,config:u,imageName:d.image,manifest:await Gu(d.image)};if(ze(d)){let f=((o=d.build)==null?void 0:o.args)||{},p=yt(r,d),h=await n_(r,p,f);if(h)return U({workspace:l,config:u},h)}if("dockerComposeFile"in d){let f=await Ht(r,d),p=await e.readDockerComposeConfig(f,void 0),h=await G2(r,f,c,u.uri,d,p);if(h)return U({workspace:l,config:u},h)}return{workspace:l,config:u}}}else{let s="Add Files...";await kt.window.showInformationMessage("No container configuration file found.",{modal:!0},s)===s&&await Vu(t)}}async function G2(t,e,r,n,i,o){var u;let s=((o==null?void 0:o.services)||{})[i.service]||{},a=Tm(t,e,r,s),c=a?di(t,n,a):void 0,l=c&&await n_(t,c,((u=s.build)==null?void 0:u.args)||{});if(l)return l;if(typeof s.image=="string")return{imageName:s.image,manifest:await Gu(s.image)}}function Tm(t,e,r,n){let i=e.length?t.path.dirname(e[0]):r,o=n.build;if(typeof o=="string")return t.path.resolve(i,o,"Dockerfile");if(o&&typeof o=="object"&&typeof o.context=="string"){let s=typeof o.dockerfile=="string"?o.dockerfile:"Dockerfile";return t.path.resolve(i,o.context,s)}}async function n_(t,e,r){let i=await ft(t).readDocument(e);if(i){let o=(/^\s*FROM\s+(\S+)(\s|$)/m.exec(i)||[])[1]||void 0;if(o){let s=o.replace(/\$\{([^\}]+)\}/,(a,c)=>r[c]||a);return{imageName:s,manifest:await Gu(s)}}}}async function W2(t){let e=await r_(t,{readDockerComposeConfig:async(r,n)=>{if(r[0])try{let i=await t.fileHost.readFile(r[0]);return ur(i.toString())}catch(i){t.output.write(_e(String(i&&(i.stack||i.message)||i)))}return{}}});e&&await i_(t,e,{})}async function i_(t,e,r){let{fileHost:n}=t,{workspace:i,config:o}=e,s=kt.window.createQuickPick();s.ignoreFocusOut=!0;let a={fileHost:n,workspace:i,quickPick:s,telemetry:await t.telemetry,output:t.output},c=await fc(),l=Da({distFolder:c}),u=De((await Ce(Uu.join(l,"features.json"))).toString()),f=(await xp(a,o.object,u,async()=>{var h,m;return U({"com.visualstudio.code.devcontainers.id":(h=e.manifest)==null?void 0:h.definitionName,version:(m=e.manifest)==null?void 0:m.definitionVersion},r)})).features.filter(h=>h.included);if(!f.length){await kt.window.showInformationMessage("No container features available for the current base image.",{modal:!0});return}let p=await s_(a,f,f.filter(h=>h.value!==!1));try{if(p){let h=o.text;for(let m of f){let g=p[m.id];if(g!==ls(m)){let v=["features",m.id];g!==!1&&typeof m.value=="object"&&v.push(mn(m));let y=Et(h,v,g!==!1?g:void 0,{formattingOptions:{}});h=$t(h,y)}}await ft(n).applyEdits(o.uri,[{content:h,offset:0,length:o.text.length}],o.text)}}finally{s.dispose()}}async function Rm(t,e,r,n){if(!Hu())return e;let o=(await o_(t,r,Uu.basename(e.definitionFolder))).features.filter(c=>c.included),s=await s_(t,o,o.filter(c=>c.value!==!1),!0);if(!s)return;if(s==="back")return n();let a=e.configText;for(let c of o){let l=s[c.id];if(l!==ls(c)){let u=["features",c.id];l!==!1&&typeof c.value=="object"&&u.push(mn(c));let d=Et(a,u,l!==!1?l:void 0,{formattingOptions:{}});a=$t(a,d)}}return Z(U({},e),{configText:a})}async function o_(t,e,r){var l;let{fileHost:n}=t,i;if("image"in e)i=await Gu(e.image);else if(ze(e)){let u=((l=e.build)==null?void 0:l.args)||{},d=yt(n,e),f=await n_(n,d,u);i=f==null?void 0:f.manifest}else if("dockerComposeFile"in e){let u=await Ht(n,e);if(u.length&&await n.isFile(u[0])){let d=await n.readFile(u[0]),f=ur(d.toString()),p=await G2(n,u,t.workspace.rootFolderPath,e.configFilePath,e,f);i=p==null?void 0:p.manifest}i=i||r&&await c_(r)||void 0}let o=await fc(),s=Da({distFolder:o}),a=De((await Ce(Uu.join(s,"features.json"))).toString());return await xp(t,e,a,async()=>({"com.visualstudio.code.devcontainers.id":i==null?void 0:i.definitionName,version:i==null?void 0:i.definitionVersion}))}var Bu={iconPath:new kt.ThemeIcon("check-all"),tooltip:"Finish"};async function s_(t,e,r,n=!1){if(!e.length)return{};let i=await En(t.quickPick,e.map(a=>({label:a.name,picked:r.indexOf(a)!==-1,feature:a})).sort((a,c)=>a.label.localeCompare(c.label)),"Select additional features to install",void 0,!0,n?[kt.QuickInputButtons.Back,Bu]:[Bu]);if(!i)return;if(i.button===kt.QuickInputButtons.Back)return"back";let o=i.pick.map(a=>a.feature),s={};for(let a of e){let c=o.indexOf(a)!==-1;s[a.id]=c?ls(a)||QO(a):!1}return i.button===Bu?s:qse(t,s,o,()=>s_(t,e,o))}function Mse(t){let e=t.options&&t.options[mn(t)];return e&&e.type==="string"&&("enum"in e||"proposals"in e)}async function qse(t,e,r,n){let i=r.filter(Mse);return async function o(s,a,c){if(!a.length)return s;let l=a[0],u=l.options[mn(l)],d=("enum"in u&&u.enum||"proposals"in u&&u.proposals||[]).map(h=>({label:String(h),value:h,picked:ls(l)===h})),f=d.length===1?{pick:d[0],button:"ok"}:await En(t.quickPick,d,u.description||"Select a value",void 0,void 0,[kt.QuickInputButtons.Back,Bu],"proposals"in u);if(!f)return;if(f.button===kt.QuickInputButtons.Back)return c();let p=Z(U({},s),{[l.id]:f.pick.value});return f.button===Bu?s:o(p,a.slice(1),()=>o(s,a,c))}(e,i,n)}var z2="remote.containers.experimentalContainerFeatures";function K2(){return kt.commands.executeCommand("setContext","experimentalContainerFeatures",Hu()),kt.workspace.onDidChangeConfiguration(t=>{t.affectsConfiguration(z2)&&kt.commands.executeCommand("setContext","experimentalContainerFeatures",Hu())})}function Hu(){return kt.workspace.getConfiguration().get(z2,!0)}function Y2(t){return{provideCompletionItems(e,r,n){let i=Sk(e.getText(),e.offsetAt(r)),o=e.getWordRangeAtPosition(r)||new xe.Range(r,r);if(i.path[0]==="extensions"){let s=De(e.getText());return s.configFilePath=e.uri,$se(s,o)}if(Hu()&&i.path[0]==="features"){let s=De(e.getText());s.configFilePath=e.uri;try{return jse(t,s,i,o)}catch(a){console.error(a)}}return[]}}}function $se(t,e){let r=t&&t.extensions||[];if(Array.isArray(r)){let n=xe.extensions.all.filter(i=>!(i.id.startsWith("vscode.")||i.id==="Microsoft.vscode-markdown"||r.indexOf(i.id)>-1));if(n.length)return n.map(i=>{let o=new xe.CompletionItem(i.id),s=`"${i.id}"`;return o.kind=xe.CompletionItemKind.Value,o.insertText=s,o.range=e,o.filterText=s,o})}}async function jse(t,e,r,n){var o;let i=e&&e.features||{};if(typeof i=="object"){if(e.configFilePath.scheme==="vscode-remote"&&t.fileHost.type==="local"){e=Z(U({},e),{configFilePath:e.configFilePath.with({scheme:Bt.scheme,authority:""})});let p=xe.env.remoteName&&xe.env.remoteName!=="test"?"linux":process.platform,h=((o=(xe.workspace.workspaceFolders||[])[0])==null?void 0:o.uri)||Ee.file(process.cwd());t=Z(U({},t),{fileHost:await V2(p,h)})}let{path:s}=t.fileHost,a=ge(e.configFilePath,t.fileHost.platform),c=s.basename(a),l=s.dirname(a),u=Ae(s,c===".devcontainer.json"?l:s.dirname(l)),f=(await o_(Z(U({},t),{workspace:u}),e)).features.filter(p=>p.included);if(r.path.length===2)if(r.isAtPropertyKey){let p=f.filter(h=>!(h.id in i));if(p.length)return p.map(h=>{let m=new xe.CompletionItem(h.id),g=`"${h.id}": `;return m.kind=xe.CompletionItemKind.Property,m.insertText=g,m.range=n,m.filterText=g,m})}else{let p=r.path[1],h=f.find(m=>m.id===p);if(h){let m=mn(h),g=(h.options||{})[m]||{type:"boolean",description:"Set to true to install."},v=(g.type==="string"?("enum"in g&&g.enum||"proposals"in g&&g.proposals||[""]).map(y=>`"${y}"`):["true","false"]).map(y=>({label:y,text:y}));return v.push({label:"{}",text:new xe.SnippetString(`{
	$1
}$0`)}),v.map(({label:y,text:C},w)=>{let b=new xe.CompletionItem(y);return b.kind=xe.CompletionItemKind.Value,b.insertText=C,b.range=n,b.sortText=`${w}_${y}`,b})}}else if(r.path.length===3){let p=r.path[1],h=f.find(m=>m.id===p);if(h){let m=h.options||{};if(r.isAtPropertyKey)return Object.keys(m).filter(g=>!(g in(i[p]||{}))).map(g=>{let v=new xe.CompletionItem(g),y=`"${g}": `;return v.kind=xe.CompletionItemKind.Property,v.insertText=y,v.range=n,v.filterText=y,v.detail=m[g].description,v});{let g=r.path[2],v=m[g];if(v)return(v.type==="string"?("enum"in v&&v.enum||"proposals"in v&&v.proposals||[""]).map(C=>`"${C}"`):["true","false"]).map((C,w)=>{let b=new xe.CompletionItem(C),E=C;return b.kind=xe.CompletionItemKind.Value,b.insertText=E,b.range=n,b.filterText=E,b.sortText=`${w}_${C}`,b})}}}}}async function Q2(t){let e=await l_(t);if((e==null?void 0:e.scheme)===Bt.scheme){let r=ge(e,t.fileHost.platform);e=await t.fileHost.toCommonURI(r)}e&&await xe.window.showTextDocument(xe.Uri.parse(e.toString()))}async function l_(t){let e=await t.findDevContainerFiles();if(!e.length){let n="Add Files...";await xe.window.showInformationMessage("No container configuration file found.",{modal:!0},n)===n&&await Vu(t)&&(e=await t.findDevContainerFiles())}if(!e.length)return;let r;return e.length===1?r={uri:e[0]}:r=await xe.window.showQuickPick(e.map(n=>({label:n.scheme==="file"?n.fsPath:n.toString(),uri:n})),{placeHolder:"Select a container configuration file"}),r==null?void 0:r.uri}async function X2(t,e){let r=await l_(t);if(r){let n=ft(t.fileHost);r.scheme==="file"&&!await lt(r.fsPath)?await Br(fn,r,[],ui):r.scheme==="vscode-remote"&&(n=new Am);let i=await n.readDocument(r);if(i){let s=De(i).extensions||[],a=t.openConfigurationCommandId?`[Dev Container configuration](command:${t.openConfigurationCommandId})`:"Dev Container configuration";if(s.indexOf(e)===-1){s.push(e);let c=Et(i,["extensions"],s,{formattingOptions:{}});await n.applyEdits(r,c,i),await xe.window.showInformationMessage(`Extension has been added to the ${a}.`)}else await xe.window.showInformationMessage(`Extension is already included in the ${a}.`)}}}async function J2(t,e){var s,a;let r=await xe.commands.executeCommand("remote.tunnel.label",e);if(r===void 0)return;let n=r.label,i=r.port,o=await l_(t);if(o){let c=ft(t.fileHost);o.scheme==="file"&&!await lt(o.fsPath)?await Br(fn,o,[],ui):o.scheme==="vscode-remote"&&(c=new Am);let l=await c.readDocument(o);if(l){let d=(s=De(l).portsAttributes)!=null?s:{},f=(a=d[`${i}`])!=null?a:{},p=t.openConfigurationCommandId?`[Dev Container configuration](command:${t.openConfigurationCommandId})`:"Dev Container configuration";if(d&&f&&f.label===n)await xe.window.showInformationMessage(`Port attributes are already included in the ${p}.`);else{f.label=n,d[`${i}`]=f;let h=Et(l,["portsAttributes"],d,{formattingOptions:{}});await c.applyEdits(o,h,l),await xe.window.showInformationMessage(`Port attributes have been added to the ${p}.`)}}}}async function rB(t,e){return{async openConfiguration(){return Q2(e)},async createConfiguration(){return Vu(e)},async addExtensionToConfiguration(r){return X2(e,r)},async addPortLabelToConfiguration(r){return J2(e,r)},async configureContainerFeatures(){return W2(e)},createCompletionItemProvider(){return Y2(e)}}}async function Vu(t){let{fileHost:e}=t,r=await Use();if(r){let n=ge(r,e.platform),i=Ae(e.path,n),o=await yf(e,i);if(o){let a="Continue";if(await et.window.showInformationMessage(`The workspace could fail to open in a container: ${o}`,{modal:!0},a)!==a)return!1}let s=await Wu(t,i);if(s){let a=await e.toCommonURI(s);return a&&et.window.showTextDocument(et.Uri.parse(a.toString())),!0}}return!1}async function Use(){let t=et.workspace.workspaceFile,e=et.workspace.workspaceFolders,r;if(t){if(t.scheme==="untitled"){await Im();return}r=t}else if(e&&e.length)if(e.length>1){let n=await et.window.showWorkspaceFolderPick({placeHolder:"Select a folder to create a container configuration for"});n&&(r=n.uri)}else r=e[0].uri;return r}function En(t,e,r,n,i,o,s){if(t.value="",t.title=n||"Add Development Container Configuration Files",t.placeholder=r,t.canSelectMany=!!i,Array.isArray(e))if(t.items=e,i)t.selectedItems=e.filter(l=>l.picked);else{let l=e.find(u=>u.picked);l&&(t.activeItems=[l])}t.buttons=o?Array.isArray(o)?o:[et.QuickInputButtons.Back]:[];let a=[],c=new Promise((l,u)=>{if(Array.isArray(e)||(t.busy=!0,e.then(d=>{if(t.busy=!1,t.items=d,i)t.selectedItems=d.filter(f=>f.picked);else{let f=d.find(p=>p.picked);f&&(t.activeItems=[f])}},d=>{t.busy=!1,u(d)})),a.push(t.onDidAccept(()=>{let d=i?t.selectedItems.slice():t.selectedItems[0];l(Array.isArray(o)?{pick:d,button:"ok"}:d),a.forEach(f=>f.dispose())})),t.buttons.length&&a.push(t.onDidTriggerButton(d=>{let f=i?t.selectedItems.slice():t.activeItems[0];l(o===!0?"back":{pick:f,button:d}),a.forEach(p=>p.dispose())})),a.push(t.onDidHide(()=>{a.forEach(d=>d.dispose()),t.dispose(),l(void 0)})),s){let d;a.push(t.onDidChangeValue(f=>{let p=f.trim().toLowerCase(),h=!p||t.items.find(m=>m.label.toLowerCase()===p);if(h&&d)t.items=t.items.filter(m=>m!==d),d=void 0;else if(!h){let m=t.items.filter(g=>g!==d);m.push(d={label:`Other: ${f}`,value:f}),t.items=m}}))}});return t.show(),c}var u_={label:"Learn More",description:"Documentation on predefined container definitions",alwaysShow:!0,type:"help"};async function Wu(t,e){let{fileHost:r,telemetry:n}=t,i=await n,o=await a_(r,e),a=!!Pa(o==null?void 0:o.object)&&!!o;if(a){Ar(i,"exists");let l=ge(o.uri,r.platform);if(!await et.window.showWarningMessage(`Dev Container configuration '${r.path.relative(e.configFolderPath,l)}' file already exists.`,{modal:!0},"Continue")){let d=await r.toCommonURI(l);d&&et.window.showTextDocument(et.Uri.parse(d.toString()));return}}let c=et.window.createQuickPick();return c.ignoreFocusOut=!0,d_(Z(U({},t),{quickPick:c,replaceExistingConfig:a,existingConfig:o,telemetry:i,workspace:e,codespaces:!!t.codespaces}))}async function d_(t){let{fileHost:e,workspace:r,telemetry:n,existingFilesLearnMoreLink:i}=t,o=await e.readDir(r.rootFolderPath),s=o.filter(p=>/docker.*compose/i.test(p)).map(p=>e.path.join(r.rootFolderPath,p)),a=o.filter(p=>/dockerfile/i.test(p)).map(p=>e.path.join(r.rootFolderPath,p)),c=a.map(p=>{let h=e.path.basename(p);return{label:`From '${h}'`,description:uB(e,p),dockerfile:h,dockerfilePath:p,detail:`Refer to the existing '${h}' in the container configuration`,type:"dockerfile"}}),l=s.map(p=>{let h=e.path.basename(p);return{label:`From '${h}'`,description:uB(e,p),dockerComposeFile:h,dockerComposePath:p,detail:`Refer to the existing '${h}' in the container configuration`,type:"dockerComposeFile"}});if(!(a.length>0||s.length>0))return Dm(t,void 0);let d={label:"From a predefined container configuration definition...",detail:"Use a base configuration from the container definition registry",alwaysShow:!0,type:"predefined"},f=await En(t.quickPick,[d,...c,...l,...i?[u_]:[]],"How would you like to create your container configuration?");if(!f){Ar(n,"canceled");return}if(f.type==="help"){Ar(n,"help"),et.env.openExternal(i);return}if(f.type==="predefined")return Dm(t,()=>d_(t));if(f.type==="dockerComposeFile")return zse(t,f.dockerComposePath,()=>d_(t));if(f.type==="dockerfile")return Wse(t,f.dockerfilePath)}function nB(t){let e=t.metaData.get("categories");return e?e.trim().split(", ").indexOf("Core")>-1:!1}async function Bse(t){let{fileHost:e,workspace:r,predefinedDefinitionsLearnMoreLink:n}=t,i=t.stats||(t.stats=await H2(e,r)),o=await fB(t.codespaces,t_.bind(null,i)),s=[];i.mostPopularFileType.length===0?s=await Yse(t.codespaces):s=o.filter(c=>c.recommendationScore&&c.recommendationScore>0&&nB(c));let a;return s.length>0?a=[{label:"Show All Definitions...",detail:"Show all available predefined container definitions.",alwaysShow:!0,type:"showAll"},...n?[u_]:[],...s]:a=[...n?[u_]:[],...o],{items:a,stats:i}}async function Dm(t,e){let{telemetry:r,predefinedDefinitionsLearnMoreLink:n}=t,i=Bse(t),o=await En(t.quickPick,i.then(s=>s.items),"Select a container configuration definition",void 0,void 0,!!e);if(o==="back")return e();if(!o){Ar(r,"canceled");return}if(o.type==="help"){Ar(r,"help"),et.env.openExternal(n);return}if(o.type==="showAll")return iB(t,(await i).stats,()=>Dm(t,e));if(o.type==="baseConfiguration")return oB(t,o,()=>Dm(t,e))}async function iB(t,e,r){let{telemetry:n}=t,i=await fB(t.codespaces,t_.bind(null,e)),o=await En(t.quickPick,[...i],"Select a container configuration definition",void 0,void 0,!0);if(o==="back")return r();if(o&&o.type==="baseConfiguration")return oB(t,o,()=>iB(t,e,r));Ar(n,"canceled")}async function oB(t,e,r){let{telemetry:n}=t,i=await Hse(t,e);if(!i){Ar(n,"canceled");return}return i==="back"?r():(Ar(n,"definition",Ie.basename(i.definitionFolder)),f_(t,i))}async function f_(t,e){let{quickPick:r}=t;r.busy=!0,r.enabled=!1;try{return await Zse(t,e)}finally{r.hide()}}async function Hse(t,e){let r=De(e.configText);return r.configFilePath=Ee.file(e.configFilePath),ze(r)?Vse(t,e,r,async()=>"back",(n,i)=>sB(t,n,r,i)):"dockerComposeFile"in r?Gse(t,e,r,async()=>"back",(n,i)=>aB(t,n,r,i)):Rm(t,e,r,async()=>"back")}async function Vse(t,e,r,n,i){var c;let o=yt({platform:process.platform},r),s=((c=r.build)==null?void 0:c.args)||{},a=await cB(o,s);return async function l(u,d,f){if(!d.length)return i(Z(U({},e),{configText:u}),f);let p=d[0],h=await En(t.quickPick,p.items,p.placeholder,void 0,void 0,!0);if(!h)return;if(h==="back")return f();let m=u;if(h.value!==p.default){let g=Et(m,["build","args",p.name],h.value,{formattingOptions:{}});m=$t(m,g)}return l(m,d.slice(1),()=>l(u,d,f))}(e.configText,a,n)}async function sB(t,e,r,n){var u;let i=yt({platform:process.platform},r),o=((u=r.build)==null?void 0:u.args)||{},{options:s,hasOptions:a}=await lB(i,o),c=s.length?await En(t.quickPick,s,a?`Select the options for the '${e.label}' dev container`:`Select the install options for the '${e.label}' dev container`,void 0,!0,!0):[];if(!c)return;if(c==="back")return n();let l=e.configText;for(let d of s){let f=c.indexOf(d)!==-1;if(f!==d.default){let p=Et(l,["build","args",d.name],String(f),{formattingOptions:{}});l=$t(l,p)}}return Rm(t,Z(U({},e),{configText:l}),r,s.length?()=>sB(t,e,r,n):n)}async function Gse(t,e,r,n,i){var a;let{fileHost:o}=t,s=await Ht(o,r);if(s.length&&await o.isFile(s[0])){let c=e.files||{},l=c[s[0]]||(await o.readFile(s[0])).toString(),u=ur(l),d=((u==null?void 0:u.services)||{})[r.service]||{},f=t.workspace.rootFolderPath,p=Tm(o,s,f,d);if(p){let h=r.configFilePath,m=di(o,h,p),g=((a=d.build)==null?void 0:a.args)||{},v=await cB(m,g),y;return async function C(w,b){if(!w.length)return y&&(c[s[0]]=y.toString()),i(Z(U({},e),{files:c}),b);let E=w[0],S=await En(t.quickPick,E.items,E.placeholder,void 0,void 0,!0);if(!!S){if(S==="back")return b();if(S.value!==E.default){y||(y=xi.parseDocument(l,{lineCounter:new xi.LineCounter}));let x=y.getIn(["services","app","build"]);x.has("args")||x.set("args",new xi.YAMLMap),x.get("args").set(E.name,S.value)}return C(w.slice(1),()=>C(w,b))}}(v,n)}}return i(e,n)}async function aB(t,e,r,n){var c;let i=!1,o=e.files||{},{fileHost:s}=t,a=await Ht(s,r);if(a.length&&await s.isFile(a[0])){let l=o[a[0]]||(await s.readFile(a[0])).toString(),u=ur(l),d=((u==null?void 0:u.services)||{})[r.service]||{},f=t.workspace.rootFolderPath,p=Tm(s,a,f,d);if(p){let h=r.configFilePath,m=di(s,h,p),g=((c=d.build)==null?void 0:c.args)||{},{options:v,hasOptions:y}=await lB(m,g);i=!!v.length;let C=v.length?await En(t.quickPick,v,y?`Select the options for the '${e.label}' dev container`:`Select the install options for the '${e.label}' dev container`,void 0,!0,!0):[];if(!C)return;if(C==="back")return n();let w;for(let b of v){let E=C.indexOf(b)!==-1;if(E!==b.default){w||(w=xi.parseDocument(l,{lineCounter:new xi.LineCounter}));let S=w.getIn(["services","app","build"]);S.has("args")||S.set("args",new xi.YAMLMap),S.get("args").set(b.name,String(E))}}w&&(o[a[0]]=w.toString())}}return Rm(t,Z(U({},e),{files:o}),r,i?()=>aB(t,e,r,n):n)}async function cB(t,e){let r=(await Ce(t.fsPath)).toString(),n=/^#\s*\[Choice\]\s*([^:\r\n]+):(.*)\r?\nARG\s+([^=\s]+)="?([^"\r\n]*)"?\s*$/gm,i,o=[];for(;i=n.exec(r);)o.push(i);return o.map(([,s,a,c,l])=>{let u=e[c]||l,d=a.trim().split(",").map(p=>p.trim()).map(p=>({label:p,description:p===u?"(default)":void 0,value:p})),f=d.findIndex(p=>p.value===u);return f!==-1&&d.unshift(...d.splice(f,1)),{placeholder:s||c,name:c,default:u,items:d}})}async function lB(t,e){let r=(await Ce(t.fsPath)).toString(),n=/^#\s*\[(Option|Install)\]\s*(.+)\r?\nARG\s+([^=\s]+)="?(true|false)"?\s*$/gm,i,o=[];for(;i=n.exec(r);)o.push(i);let s=o.map(([,c,l,u,d])=>{let p=(e[u]||d)==="true";return{type:c.toLowerCase(),label:l||u,picked:p,name:u,default:p}}),a=s.some(c=>c.type==="option");return a&&s.filter(c=>c.type==="install").forEach(c=>c.label=`Install ${c.label}`),{options:s,hasOptions:a}}function uB(t,e){let r=et.workspace.workspaceFolders||[];if(r.length<2)return;let n=r.find(i=>t.platform==="win32"?e.toLowerCase().startsWith(i.uri.fsPath.toLowerCase()):e.startsWith(i.uri.fsPath));return n&&n.name}async function Wse(t,e){let{fileHost:r,workspace:n,telemetry:i}=t,s=(await Om()).find(a=>Ie.basename(a.definitionFolder)==="docker-existing-dockerfile");if(s){let a=Ie.relative(s.definitionFolder,s.configFilePath),c=r.path.sep!==Ie.sep?a.replace(Ie.sep===Ie.win32.sep?/\\/g:/\//g,r.path.sep):a,l=r.path.resolve(n.configFolderPath,c),u=r.path.relative(r.path.dirname(l),e),d=r.platform==="win32"?u.replace(/\\/g,"/"):u,f="dockerFile"in De(s.configText)?["dockerFile"]:["build","dockerfile"],p=Et(s.configText,f,d,{formattingOptions:{}}),h=$t(s.configText,p);return Ar(i,"dockerFile"),f_(t,Z(U({},s),{configText:h}))}else{Ar(i,"existingDockerfileDefinitionNotFound");return}}async function zse(t,e,r){let{fileHost:n,workspace:i,telemetry:o}=t,s=(await n.readFile(e)).toString(),a=ur(s);if(!a){await et.window.showErrorMessage(`Invalid docker-compose file "${e}"`,{modal:!0});return}let c=a.version,l=Object.keys(a&&a.services||{}),u=l.length<2?l[0]||"":await En(t.quickPick,l.map(h=>({label:h,type:"service"})),"Select a service",void 0,void 0,!0);if(u==="back")return r();if(u===void 0){Ar(o,"canceled");return}let d=typeof u=="string"?u:u.label,p=(await Om()).find(h=>Ie.basename(h.definitionFolder)==="docker-existing-docker-compose");if(p){let h=Ie.relative(p.definitionFolder,p.configFilePath),m=n.path.sep!==Ie.sep?h.replace(Ie.sep===Ie.win32.sep?/\\/g:/\//g,n.path.sep):h,g=n.path.resolve(i.configFolderPath,m),v=n.path.relative(n.path.dirname(g),e),y=n.platform==="win32"?v.replace(/\\/g,"/"):v,C=De(p.configText).dockerComposeFile,w=Array.isArray(C)?C.slice(1):[],b=[y,...w],E=Et(p.configText,["dockerComposeFile"],b,{formattingOptions:{}}),S=$t(p.configText,E),x=Et(S,["service"],d,{formattingOptions:{}}),T=$t(S,x),R=w.reduce((B,te)=>(B[Ji({platform:process.platform},{configFilePath:Ee.file(p.configFilePath)},te).fsPath]=!0,B),{}),q=Z(U({},p),{configText:T,async copyFile(B,te){if(R[B]){let ee=this.files&&this.files[B]||(await Ce(B)).toString(),H=ur(ee);H.version&&c&&H.version!==c&&(ee=ee.replace(new RegExp(`^(version:.*)(${H.version.replace(/\./g,"\\.")})`,"m"),`$1${c}`));let $=Object.keys(H&&H.services||{});$.length&&(ee=ee.replace(new RegExp(`\\b${$[0]}\\b`),d)),await n.writeFile(te,Buffer.from(ee))}else{let ee=this.files&&this.files[B]?Buffer.from(this.files[B]):await Ce(B);await n.writeFile(te,ee)}}});return Ar(o,"dockerComposeFile"),f_(t,q)}else{Ar(o,"existingDockerComposeDefinitionNotFound");return}}function Ar(t,e,r){let n={outcome:e};r&&(n.definitionName=r),t.sendTelemetryEvent("createConfiguration",n)}function Kse(t,e){let r=e.recommendationScore===void 0?0:e.recommendationScore,n=t.recommendationScore===void 0?0:t.recommendationScore;return r-n}var dB=["docker-existing-docker-compose","docker-existing-dockerfile"];async function fB(t,e){let r=(await Om()).filter(n=>dB.indexOf(Ie.basename(n.definitionFolder))===-1);return t&&(r=r.filter(n=>!/^\s*no\b/i.test(n.metaData.get("codespaces")||"yes"))),e?(await e(r),r.sort(Kse)):r.sort((n,i)=>n.label.localeCompare(i.label))}async function Yse(t){let e=(await Om()).filter(r=>dB.indexOf(Ie.basename(r.definitionFolder))===-1);return e=e.filter(r=>nB(r)),t&&(e=e.filter(r=>!/^\s*no\b/i.test(r.metaData.get("codespaces")||"yes"))),e.sort((r,n)=>r.label.localeCompare(n.label))}async function Om(){let t=new eB.default,e=await fc(),r=Ie.join(e,"node_modules","vscode-dev-containers","containers"),n=Ie.join(e,"node_modules","vscode-dev-containers","containers-readmes"),i=await Lt(r);return(await Promise.all(i.map(async s=>{var y;let a=Ie.join(r,s),c=await ip(a),l=c&&await Jse(c);if(!l)return;let u=De(l);u.configFilePath=Ee.file(c);let[,d,f]=((y=u.name)==null?void 0:y.match(/^(.*)(\([^)]*\))$/))||[],p=(d==null?void 0:d.trim())||u.name||s,h=f,m,g=Ie.join(n,s,"README.md"),v=new Map;if(await lt(g))try{let C=await Ce(g,{encoding:"utf8"}),w=/\#\s*summary.*\n*(.*)/i.exec(C);if(w){let b=t.render(w[1]);m=Qse(b);let E=m.indexOf(". ");E!==-1&&(m=m.substr(0,E+1))}v=Xse(C)}catch(C){console.error(C)}return{label:p,description:h,type:"baseConfiguration",detail:m,definitionFolder:a,configText:l,configFilePath:c,metaData:v}}))).filter(s=>!!s)}function Qse(t){return t.replace(/<[^>]*>/g,"").trim().replace(/&#([0-9]+);/g,function(e,r){return String.fromCodePoint(parseInt(r,10))}).replace(/&#x([0-9a-f]+);/g,function(e,r){return String.fromCodePoint(parseInt(r,16))}).replace(/&amp;|&lt;|&gt;|&quot;|&apos;/g,function(e){switch(e){case"&amp;":return"&";case"&lt;":return"<";case"&gt;":return">";case"&quot;":return'"';case"&apos;":return"'"}return e})}function Xse(t){let e=new Map,r=!1,n=/^\s*\|\s*Metadata\s*\|\s*Value\s*\|/i,i=/^\s*\|/gi,o={categories:/^\s*\|\s*\*Categories\*\s*\|\s*(.*)\s*\|/i,contributors:/^\s*\|\s*\*Contributors\*\s*\|\s*(.*)\s*\|/i,definitionType:/^\s*\|\s*\*Definition type\*\s*\|\s*(.*)\s*\|/i,codespaces:/^\s*\|\s*\*Works in Codespaces\*\s*\|\s*(.*)\s*\|/i,languagesPlatforms:/^\s*\|\s*\*Languages, platforms\*\s*\|\s*(.*)\s*\|/i},s=t.toString().split(`
`);for(let a of s)if(!r)a.match(n)&&(r=!0);else{if(!a.match(i))break;for(let c in o){let l=a.match(o[c]);l&&l[1]&&e.set(c,l[1])}}return e}async function Jse(t){return await lt(t)?(await Ce(t)).toString():void 0}async function Zse(t,e){let{fileHost:r,workspace:n,replaceExistingConfig:i,existingConfig:o,output:s}=t,a=n.configFolderPath,c="Skip",l=(await hB(e.definitionFolder)).map(f=>Ie.relative(e.definitionFolder,f)),u,d;for(let f of l){let p=Ie.join(e.definitionFolder,f),h=p===e.configFilePath,m=r.path.sep!==Ie.sep?f.replace(Ie.sep===Ie.win32.sep?/\\/g:/\//g,r.path.sep):f,g=r.path.join(a,m);if(h&&!i&&o){let v=De(e.configText);try{d=eae(r,v,g,o)}catch(y){await rae(y,r,g,m,s);return}g=ge(o.uri,r.platform)}else if(await r.isFile(g)){let v=await et.window.showInformationMessage(`File '${m}' already exists, overwrite?`,{modal:!0},c,"Overwrite");if(!v)return;if(v===c)continue}if(await r.mkdirp(r.path.dirname(g)),h)u=g,await r.writeFile(g,Buffer.from(d||e.configText));else if(e.copyFile)await e.copyFile(p,g);else{let v=e.files&&e.files[p]?Buffer.from(e.files[p]):await Ce(p);await r.writeFile(g,v)}}return u}function eae(t,e,r,n){let i=n.text,o=ge(n.uri,t.platform);if("image"in e)i=mt(i,["image"],e.image);else if("dockerFile"in e){let u=pc(t,r,o,e.dockerFile);if(i=mt(i,["dockerFile"],u),e.context){let d=pc(t,r,o,e.context);i=mt(i,["context"],d)}}else if("build"in e){let u=pc(t,r,o,e.build.dockerfile);if(i=mt(i,["build","dockerfile"],u),e.build.context){let d=pc(t,r,o,e.build.context);i=mt(i,["build","context"],d)}i=mt(i,["build","target"],e.build.target),i=mt(i,["build","args"],e.build.args)}else if("dockerComposeFile"in e){let u=tae(t,r,o,e.dockerComposeFile);i=mt(i,["dockerComposeFile"],u),i=mt(i,["service"],e.service),i=mt(i,["workspaceFolder"],e.workspaceFolder)}let s=h_(e.settings,n.object.settings);i=mt(i,["settings"],s);let a=p_(n.object.forwardPorts,e.forwardPorts);i=mt(i,["forwardPorts"],a);let c=p_(n.object.extensions,e.extensions);if(i=mt(i,["extensions"],c),"image"in e||ze(e)){let u=p_(n.object.mounts,e.mounts);i=mt(i,["mounts"],u);let d=h_(e.containerEnv,n.object.containerEnv);i=mt(i,["containerEnv"],d),i=mt(i,["containerUser"],e.containerUser);let f=pB(n.object.runArgs,e.runArgs);i=mt(i,["runArgs"],f)}i=mt(i,["postCreateCommand"],e.postCreateCommand);let l=h_(e.remoteEnv,n.object.remoteEnv);return i=mt(i,["remoteEnv"],l),i=mt(i,["remoteUser"],e.remoteUser),i}function mt(t,e,r){if(r===void 0)return t;let n=Et(t,e,r,{formattingOptions:{}});return $t(t,n)}function tae(t,e,r,n){return Array.isArray(n)?n.map(i=>pc(t,e,r,i)):pc(t,e,r,n)}function pc({path:t},e,r,n){let i=t.resolve(t.dirname(e),n);return t.relative(t.dirname(r),i)||"."}function p_(t,e){var r;return(r=pB(t,e))==null?void 0:r.filter((n,i,o)=>o.indexOf(n)===i)}function pB(t,e){if(!!(e==null?void 0:e.length))return(t||[]).concat(e)}function h_(t,e){if(!(!t||!Object.keys(t).length))return Object.assign({},t,e)}async function a_(t,e){let r=await np(t,e.configFolderPath);if(!r)return;let n=await ft(t).readDocument(r);if(!n)return;let i=De(n);return{uri:r,text:n,object:i}}async function hB(t){let e=await Lt(t);return[].concat(...await Promise.all(e.map(async r=>{let n=Ie.join(t,r);return(await(0,tB.promisify)(Z2.lstat)(n)).isDirectory()?hB(n):n})))}async function rae(t,e,r,n,i){i.write(_e(t&&(t.stack||t.message)));let o=await e.toCommonURI(r),s=await et.window.showErrorMessage(`Could not update '${n}' due to errors in its content. Try fixing these first.`,{modal:!0},...o?["Open devcontainer.json"]:[]);o&&s&&et.window.showTextDocument(et.Uri.parse(o.toString()))}async function Gu(t){return(await nae()).find(r=>{var n,i;return(i=(n=r.build)==null?void 0:n.tags)==null?void 0:i.some(o=>{let c=`^mcr.microsoft.com/vscode/devcontainers/${o.split(/\$\{[^}]*\}/).map(l=>l.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g").join(".*")}$`;return new RegExp(c).test(t)})})}async function nae(){let t=Ie.join(await fc(),"node_modules","vscode-dev-containers","manifests");return(await Promise.all((await Lt(t)).map(e=>c_(e,t)))).filter(Boolean)}async function c_(t,e){e=e||Ie.join(await fc(),"node_modules","vscode-dev-containers","manifests");let r=Ie.join(e,t,"definition-manifest.json");if(await lt(r)){let n=(await Ce(r)).toString(),i=De(n);return i.definitionName=t,i}}async function fc(){let t=await Sc(Ie.join(__dirname,"node_modules","vscode-dev-containers"))?[]:await Sc(Ie.join(__dirname,"..","node_modules","vscode-dev-containers"))?[".."]:["..",".."];return Ie.join(__dirname,...t)}async function mB(t,e,r,n,i,o){let s=gn(r);if(Wt(s)&&!await Ue.workspace.requestWorkspaceTrust({message:au}))return ar(s.hostPath)?(await Ue.window.showInformationMessage("The WSL folder is currently not trusted.",{modal:!0,detail:"Trust is required to build a dev container from it. The folder will now reopen in WSL."}),await Ue.commands.executeCommand("remote-containers.reopenInWSL")):(await Ue.window.showInformationMessage("The local folder is currently not trusted.",{modal:!0,detail:"Trust is required to build a dev container from it. The folder will now reopen locally."}),await Ue.commands.executeCommand("remote-containers.reopenLocally")),new Promise(()=>{});let a=zr(s);return a&&!await cu(t,s.repositoryPath)?(await Ue.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{})):Z(U({},await iae(s,t,i,o,e,r,n)),{isTrusted:a||void 0})}async function iae(t,e,r,n,i,o,s){let{log:a,logFilePath:c}=r,l="hostPath"in t&&ar(t.hostPath)&&!!Ue.extensions.getExtension("ms-vscode-remote.remote-wsl");l&&Ue.commands.executeCommand("setContext","canReopenInWSL",!0);let u;return Ue.window.withProgress({location:Ue.ProgressLocation.Notification,title:Ja,cancellable:!1},async d=>{let{cliHost:f,originalCwd:p}=await oae(t,a),h=U(U({},await Fn(e.extensionPath,bi)),ja(f,t.settings)),m=U(U({},f.env),h),g=await Xa({authority:o,extensionContext:e,sessionStart:r.sessionStart,progress:d,cliHost:f,env:m,cwd:f.cwd,isLocalContainer:Wp(h),telemetry:i,output:a,logFilePath:c,allowSystemConfigChange:!0,postCreate:n}),v={async createConfiguration(y,C){return Wu({fileHost:C,telemetry:i,output:a,existingFilesLearnMoreLink:nu,predefinedDefinitionsLearnMoreLink:iu,openConfigurationCommandId:ru},Ae(m_.posix,y))},async showError(y,...C){return await Ue.window.showErrorMessage(y,{modal:!0},...C)}};return u={common:g,parsedAuthority:t,dockerCLI:wn(),dockerComposeCLI:gi({exec:g.cliHost.exec,env:U(U({},h),pn(h)),output:g.output},wn(),Qa()),dockerEnv:h,workspaceMountConsistencyDefault:wh(),cacheMount:Ch()?"volume":"none",configurationTracking:yh(e.workspaceState),removeOnStartup:await qF(e,o),buildNoCache:await jF(e,o),onRemoveOnShutdownChanged:s,userRepositoryConfigurationPaths:Gn(),originalCwd:p,configProvider:v},await zp(u),sN(u)}).then(d=>(s(async f=>{await $F(e,f&&d.dockerContainerId||!1),await su(e,f==="rebuildNoCache"?o:!1)}),Ei(i,g_(t),"success",d.config,d.properties),d),d=>{var C;let f=d instanceof ne?d:new ne({description:"An error occurred setting up the container.",originalError:d});zr(t)&&(f.volumeName=t.volumeName,f.volumeName===Kr&&(f.volumeName=xr(t.repositoryPath).uniqueVolumeName),f.repositoryPath=t.repositoryPath,f.folderPath=t.folder),Ei(i,g_(t),"failure",f.config,f.containerProperties,f);let p="onTheSide",h=(C=f.data)==null?void 0:C.fileWithError,m=h&&(u==null?void 0:u.common.cliHost.path.basename(h))||"devcontainer.json",g=Wt(t)?[{id:"openFileWithErrorLocally",title:`Open ${m} Locally`,isLastAction:!0,applicable:async(w,b)=>!b||!l,async execute(){let w=u==null?void 0:u.common.cliHost,b=h?w.type==="wsl"?await w.toCommonURI(h):Ee.file(h):void 0;await _h(e,t.hostPath,b,c,p);let E=Ue.Uri.file(t.hostPath);await Ue.commands.executeCommand("vscode.openFolder",E)}},{id:"openFileWithErrorinWSL",title:`Open ${m} in WSL`,isLastAction:!0,applicable:async()=>l,async execute(){let w=Ue.Uri.parse((await rl(t.hostPath,a)).toString());await _h(e,w.path,h?w.with({path:h}):void 0,c,p),await Ue.commands.executeCommand("vscode.openFolder",w)}}]:[],v=zr(t)?t.inspectVolume?[lo]:[{id:"reopenInRecoveryContainer",title:`Open ${m} in Recovery Container`,isLastAction:!0,applicable:(w,b)=>!0,execute:async w=>{await _h(e,t.repositoryPath,h?Ee.file(h).with({scheme:"vscode-remote"}):void 0,c,p),await Ue.commands.executeCommand("remote-containers.inspectVolume",w.volumeName,w.repositoryPath,w.folderPath)}},lo,{id:"openRepository",title:"Open Repository",isLastAction:!1,applicable:(w,b)=>!b,async execute(){Ue.env.openExternal(Ue.Uri.parse(t.repositoryPath))}}]:[],y=qa(t)?[lo]:[];return f.actions=[...Ba,ps,MN,...g,...v,...y,Ua,fs],sae(f),uo(f,g_(t),i,!0,r)})}async function oae(t,e){if(Wt(t)){let r=Ae(m_,t.hostPath),n=r.rootFolderPath,i=await $r(r.rootFolderPath,Qr,e,Pr());return i.cwd!==r.rootFolderPath&&(r=Ae(i.path,r.isWorkspaceFile?i.path.join(i.cwd,m_.basename(t.hostPath)):i.cwd)),e.write(`Setting up container for folder or workspace: ${r.workspaceOrFolderPath}\r
`),Gp(e,t.settings),{cliHost:i,originalCwd:n}}else{let r=process.cwd();return{cliHost:await $r(r,Qr,e,Pr()),originalCwd:r}}}function g_(t){return Wt(t)?"config":zr(t)?t.inspectVolume?"volume":"repository":"volume"}function sae(t){let e=(t.originalError&&(t.originalError.cmdOutput||t.originalError.message)||"").toLowerCase();e&&e.indexOf("drive has not been shared")!==-1?t.description="The drive of the workspace folder is not shared. Share it in the Docker settings first.":e&&(e.indexOf("port is already allocated")!==-1||e.indexOf("address already in use")!==-1)?t.description="A port the container is setup to bind to is already in use. See the Dev Containers terminal for details.":e&&e.indexOf('invalid mount config for type "bind"')!==-1?t.description="A mount config is invalid. Make sure it has the right format and a source folder that exists on the machine where the Docker daemon is running.":e&&e.indexOf("deb.debian.org/debian/dists/jessie-updates")!==-1&&(t.description="The base image references the obsolete Debian 8 update repository.",t.actions.push({id:"learnMore",title:"Learn More",isLastAction:!1,applicable:(r,n)=>n,async execute(){Ue.env.openExternal(Ue.Uri.parse("https://aka.ms/vscode-remote/containers/troubleshooting/jessie"))}}))}var So=V(require("vscode"));var gB=V(require("util"));var _n=V(require("path"));async function vB(t,e,r){let{common:n}=t,i;try{let{commit:o}=n.product;if(!o)throw new ne({description:"Cannot attach without commit id for the remote extension host."});i=await qn(t,e.Id,r.workspaceFolder,r.remoteUser);let s=ft(n.cliHost,i.shellServer),{hostOrContainerPort:a,hostPortServer:c,remoteEnv:l,serverDownloaded:u}=await Ki(n,i,r,void 0,void 0,zi);if(aae(n,i,s,r.configFilePath),lae(n,i,s,r.configFilePath),La(n,i,a,e,Ae(_n.posix,"/")),c){let d=async()=>{await(0,gB.promisify)(c.close.bind(c))()};n.shutdowns.push(d)}return{params:n,properties:i,config:r,resolvedAuthority:{host:io,port:a,extensionHostEnv:l},tunnelInformation:n.isLocalContainer?Fa(e):{},dockerParams:t,dockerContainerId:e.Id,serverDownloaded:u}}catch(o){let s=o instanceof ne?o:new ne({description:"An error occurred attaching to the container.",originalError:o});throw e&&(s.manageContainer=!1,s.params=t.common,s.containerId=e.Id,s.dockerParams=t),i&&(s.containerProperties=i),s.config=r,s}}function aae(t,e,r,n){e.installFolder&&yB(t,e,r,n).catch(console.error)}async function yB(t,e,r,n){try{await ci(t,e,["/bin/sh","-c",`# Watch installed extensions
			trap "exit 0" 16
			old=\`ls -A --full-time\`
			counter=0
			while [ $counter -lt 60 ]
			do
				sleep 1
				new=\`ls -A --full-time\`
				if [ "$new" != "$old" ]
				then
					exit 1
				fi
				counter=\`expr $counter + 1\`
			done
			exit 2
		`],FT(e),{print:"off"})}catch(i){i&&i.code===1?await cae(t,e,r,n):i&&i.code!==2&&await Nn(6e4)}return yB(t,e,r,n)}async function cae(t,e,r,n){let i=await UT(t,e);await fw(n,async()=>{let o=await Mm(t.cliHost,r,n,e.remoteWorkspaceFolder);if(!dae(o.config.extensions||[],i)){let s=Et(o.text,["extensions"],i,{formattingOptions:{}});await Br(r,n,s,o.text)}})}function lae(t,e,r,n){wB(t,e,r,n).catch(console.error)}async function wB(t,e,r,n){try{let i=Gf(e),o=_n.posix.dirname(i),s=_n.posix.basename(i);await ci(t,e,["/bin/sh","-c",`# Watch machine settings
			trap "exit 0" 16
			old=\`ls -A --full-time ${s} 2>/dev/null || true\`
			counter=0
			while [ $counter -lt 60 ]
			do
				sleep 1
				new=\`ls -A --full-time ${s} 2>/dev/null || true\`
				if [ "$new" != "$old" ]
				then
					exit 1
				fi
				counter=\`expr $counter + 1\`
			done
		`],o,{print:"off"})}catch(i){i&&i.code===1&&await uae(t.cliHost,e,r,n)}return wB(t,e,r,n)}async function uae(t,e,r,n){let{stdout:i}=await e.shellServer.exec(`cat ${Gf(e)}`),o=De(i)||{};await fw(n,async()=>{let s=await Mm(t,r,n,e.remoteWorkspaceFolder);if(JSON.stringify(s.config.settings||{})!==JSON.stringify(o)){let a=Et(s.text,["settings"],o,{formattingOptions:{}});await Br(r,n,a,s.text)}})}function dae(t,e){let r=new Set(t),n=new Set(e);return r.size===n.size&&t.every(i=>n.has(i))}async function CB(t,e){let r=Lm(t,e.Name),n=await PB(r);return n||(r=_B(t,e.Config.Image),n=await PB(r)),n}async function bB(t,e,r,n,i){let o=Ee.file(Lm(r,n.Name)),s=await Mm(t,e,o,i);return s.exists||(o=Ee.file(_B(r,n.Config.Image)),s=await Mm(t,e,o,i)),s}function Nm(t){return _n.join(t,"nameConfigs")}function Lm(t,e){let r=e.startsWith("/")?e.substr(1):e;return _n.join(Nm(t),`${xB(r)}.json`)}async function EB(t){try{let e=Nm(t);return(await Lt(e)).filter(n=>n.endsWith(".json")).map(n=>({name:kB(n.substr(0,n.length-5)),uri:Ee.file(_n.join(e,n))}))}catch(e){if(e&&e.code==="ENOENT")return[];throw e}}function Fm(t){return _n.join(t,"imageConfigs")}function _B(t,e){return _n.join(Fm(t),`${xB(e)}.json`)}async function SB(t){try{let e=Fm(t);return(await Lt(e)).filter(n=>n.endsWith(".json")).map(n=>({image:kB(n.substr(0,n.length-5)),uri:Ee.file(_n.join(e,n))}))}catch(e){if(e&&e.code==="ENOENT")return[];throw e}}function xB(t){return t.replace(/[:/%]/g,e=>`%${e.charCodeAt(0).toString(16)}`)}function kB(t){return t.replace(/%([0-9a-f]{2})/g,(e,r)=>String.fromCharCode(parseInt(r,16)))}async function PB(t){if(!await lt(t))return;let e=await Ce(t),r=De(e.toString())||{};return r.configFilePath=Ee.file(t),r}async function Mm(t,e,r,n){let i=await e.readDocument(r),o=i||ui,s=De(o)||{},a=ba({platform:t.platform,configFile:r,env:t.env,localWorkspaceFolder:void 0,containerWorkspaceFolder:n},s);return a.configFilePath=r,{exists:!!i,text:o,config:a}}async function IB(t,e,r,n,i){return await mo(t)?Z(U({},await fae(t,e,r,n,i)),{isTrusted:!0}):(await So.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{}))}async function fae(t,e,r,n,i){let o;return So.window.withProgress({location:So.ProgressLocation.Notification,title:Ja,cancellable:!1},async s=>{var a,c;try{let l=Kp(r),{settings:u}=l,d="containerName"in l?l.containerName:l.containerId;n.log.write(`Setting up container: ${d}\r
`),Gp(n.log,u);let f=l.cwd||process.cwd(),p=await $r(f,Qr,n.log,Pr()),h=wn(),m=U(U({},await Fn(t.extensionPath,bi)),ja(p,u)),g=gi({exec:p.exec,env:U(U({},m),pn(m)),output:n.log},wn(),Qa()),v=U(U({},p.env),m),y=await Hn({cliHost:p,dockerCLI:h,dockerComposeCLI:g,env:v,output:n.log},"containerName"in l?l.containerName:l.containerId);if(!y)throw new ne({description:`Cannot attach to the container with name/id ${d}, it no longer exists.`,data:{reload:!1,attach:!0}});let C=(c=(a=(So.workspace.workspaceFolders||[void 0])[0])==null?void 0:a.uri)==null?void 0:c.path,w=await bB(p,fn,t.globalStoragePath,y,C);if(C&&w.config.workspaceFolder!==C){let T=Et(w.text,["workspaceFolder"],C,{formattingOptions:{}});await Br(fn,w.config.configFilePath,T,w.text)}let b={common:await Xa({authority:r,extensionContext:t,sessionStart:n.sessionStart,progress:s,cliHost:p,env:v,cwd:f,isLocalContainer:Wp(m),telemetry:e,output:n.log,logFilePath:n.logFilePath,allowSystemConfigChange:!1,postCreate:i}),parsedAuthority:l,dockerCLI:h,dockerComposeCLI:g,dockerEnv:m,workspaceMountConsistencyDefault:wh(),cacheMount:Ch()?"volume":"none",configurationTracking:yh(t.workspaceState),userRepositoryConfigurationPaths:[]};await zp(b);let E=ao(u),S=y.Name.startsWith("/")?y.Name.substr(1):y.Name,x=`Container ${y.Config.Image} (${S})${E}`;if(b.common.setWorkspaceName(x),y.State.Status!=="running")throw new ne({description:`Cannot attach to the container ${y.Config.Image} (${S})${E}, it is not running.`,params:b.common,containerId:y.Id,dockerParams:b,data:{reload:!1,start:!0}});return await vB(b,y,w.config)}catch(l){let u=l instanceof ne?l:new ne({description:"An error occurred attaching to the container.",originalError:l});throw u.actions=[qN,$N,...Ba,ps,lo,Ua,fs],u}}).then(s=>(Ei(e,"attach","success",o,s.properties),s),s=>{let a=s instanceof ne?s:new ne({description:"An error occurred attaching to the container.",originalError:s});return Ei(e,"attach","failure",o,a.containerProperties,a),uo(a,"attach",e,!0,n)})}var ot=V(require("vscode"));var it=V(require("vscode")),AB=V(require("path")),Ps=V(require("os")),zu=V(require("fs")),TB=V(require("child_process")),RB=V(Ng());async function qm(t){mae()?await new DB().downloadAndInstallDocker(t):NB()?await new OB().downloadAndInstallDocker(t):await it.env.openExternal(it.Uri.parse("https://aka.ms/download-docker-linux-vscode"))}var v_=class{async downloadAndInstallDocker(e){if(await this.preInstallCheck(e)){let n="Downloading Docker installer...",i="The Docker Desktop installation is started. Complete the installation and then start Docker Desktop.",o;try{o=await it.window.withProgress({location:it.ProgressLocation.Notification,title:n},async()=>this.downloadInstaller())}catch(a){let c="Downloading the Docker Desktop installer failed. Do you want to manually download and install?",l="Download";throw this.handleError(c,l,this.downloadUrl),a}let s=this.getInstallCommand(o);it.window.showInformationMessage(i);try{await this.install(o,s,e)}catch(a){let c=`Docker Desktop installation failed. ${a}`,l="Install Instruction";throw this.handleError(c,l,"https://aka.ms/AA37qtj"),a}}}async preInstallCheck(e){let r=!0;if(await new LB(e).isDockerInstalledRealTimeCheck()){let n="Docker Desktop is already installed. Would you like to reinstall?",i="Reinstall";r=await it.window.showInformationMessage(n,{modal:!0},i)!==void 0}return r}async downloadInstaller(){let e=`${hae()}.${this.fileExtension}`;return await vae(this.downloadUrl,e),e}handleError(e,r,n){it.window.showErrorMessage(e,{title:r}).then(i=>{i&&it.env.openExternal(it.Uri.parse(n))})}},DB=class extends v_{constructor(){super(...arguments);this.downloadUrl="https://aka.ms/download-docker-windows-vscode";this.fileExtension="exe"}getInstallCommand(e){return`"${e}"`}async install(e,r,n){try{n.write(`Executing command ${r}`),await MB(r,n)}finally{try{await zu.promises.stat(e),await zu.promises.unlink(e)}catch(i){}}}},OB=class extends v_{constructor(){super(...arguments);this.downloadUrl="https://aka.ms/download-docker-mac-vscode";this.fileExtension="dmg"}getInstallCommand(e){return`chmod +x '${e}' && open '${e}'`}async install(e){let r="Docker Install",n=this.getInstallCommand(e);await gae(n,r,{addDockerEnv:!1})}},pae=0;function hae(){return AB.join(Ps.tmpdir(),`${it.env.sessionId}-${pae++}.tmp`)}function mae(){return Ps.platform()==="win32"}function NB(){return Ps.platform()==="darwin"}async function gae(t,e,r){var a,c,l;let n;r=r!=null?r:{},r.addDockerEnv&&(n={});let i=new it.Task({type:"shell"},(a=r.workspaceFolder)!=null?a:it.TaskScope.Workspace,e,"Docker",new it.ShellExecution(t,{cwd:r.cwd||((l=(c=r.workspaceFolder)==null?void 0:c.uri)==null?void 0:l.fsPath)||Ps.homedir(),env:n}),[]);r.alwaysRunNew&&(i.definition.idRandomizer=Math.random()),r.focus&&(i.presentationOptions={focus:!0});let o=await it.tasks.executeTask(i);return new Promise((u,d)=>{let f=it.tasks.onDidEndTaskProcess(p=>{p.execution===o&&(f.dispose(),p.exitCode&&r.rejectOnError&&d(p.exitCode),u())})})}var LB=class{constructor(e){this.output=e;this.maxCacheTime=3e4;this.isDockerInstalledLazy=new qB(async()=>{let r=await this.isDockerInstalledRealTimeCheck();return r&&this.isDockerInstalledLazy.cacheForever(),r},this.maxCacheTime)}async isDockerInstalled(){return await this.isDockerInstalledLazy.getValue()}async isDockerInstalledRealTimeCheck(){try{return await MB("docker -v",this.output),!0}catch(e){return!1}}};async function vae(t,e){await new Promise((r,n)=>{let i=zu.createWriteStream(e);RB.https.get(t,s=>{if(s.statusCode<200||s.statusCode>299){n(new Error(`Failed to download Docker (${t}): HTTP ${s.statusCode} - ${s.statusMessage}`));return}s.on("error",n),s.pipe(i),s.on("end",r)}).on("error",n)})}var FB=10*1024;async function MB(t,e,r,n){let i=Buffer.alloc(r&&r.maxBuffer||FB),o=Buffer.alloc(r&&r.maxBuffer||FB);return await yae(t,e,r,n,i,n,o),{stdout:y_(i),stderr:y_(o)}}async function yae(t,e,r,n,i,o,s,a){return await new Promise((c,l)=>{let u,d=0,f=0;r=r||{},r.shell=!0,wae(r,e);let p=TB.spawn(t,r);p.on("error",h=>(u&&(u.dispose(),u=void 0),l(h))),p.on("close",(h,m)=>{if(u&&(u.dispose(),u=void 0),a&&a.isCancellationRequested)return l(new Error("User canceled"));if(h){let g=`Process '${t.length>50?`${t.substring(0,50)}...`:t}' exited with code ${h}`;s&&(g+=`
Error: ${y_(s)}`);let v=new Error(g);return v.code=h,v.signal=m,v.stdErrHandled=o!==null,l(v)}return c()}),(r==null?void 0:r.stdin)&&(p.stdin.write(r.stdin),p.stdin.end()),(n||i)&&p.stdout.on("data",h=>{let m=h.toString();n&&n(m,p),i&&(d+=i.write(m,d))}),(o||s)&&p.stderr.on("data",h=>{let m=h.toString();o&&o(m,p),s&&(f+=s.write(m,f))}),a&&(u=a.onCancellationRequested(()=>{p.kill()}))})}function wae(t,e){var r,n;!NB()||/(?<=^|:)\/usr\/local\/bin(?=$|:)/i.test(((r=t==null?void 0:t.env)==null?void 0:r.PATH)||process.env.PATH||"")||(t=t!=null?t:{},t.env=(n=t.env)!=null?n:U({},process.env),e.write("WARNING: Adding '/usr/local/bin' to the PATH because it is missing."),t.env.PATH=`${t.env.PATH}:/usr/local/bin`)}function y_(t){return t.toString().replace(/[\x00-\x09\x0B-\x0C\x0E-\x1F]|\r?\n$/g,"")}var qB=class{constructor(e,r){this.valueFactory=e;this._valueLifetime=r;this._isValueCreated=!1}get isValueCreated(){return this._isValueCreated}cacheForever(){this._valueLifetime=void 0}clear(){this._isValueCreated=!1,this._valuePromise=void 0}async getValue(){if(this._isValueCreated)return this._value;let e=this._valuePromise===void 0;e&&(this._valuePromise=this.valueFactory());let r=await this._valuePromise;if(e&&(this._value=r,this._valuePromise=void 0,this._isValueCreated=!0),this._valueLifetime&&e){let n=setTimeout(()=>{this._valueLifetime&&this._valuePromise===void 0&&(this._isValueCreated=!1,this._value=void 0),clearTimeout(n)},this._valueLifetime)}return r}};async function gr(t,e){var i;let r=(i=(ot.workspace.workspaceFolders||[])[0])==null?void 0:i.uri;r&&(r.scheme==="file"&&ar(r.fsPath)||nl(r))&&(t=await qe(t.output,r));let n=await Ku(t,e);if(n==="permission")return await ot.window.showErrorMessage("Current user does not have permission to run 'docker'.",{modal:!0,detail:"Try adding the user to the 'docker' group."},"Documentation")&&ot.env.openExternal(ot.Uri.parse("https://go.microsoft.com/fwlink/?linkid=2079224")),!1;if(n==="ssh")return await ot.window.showErrorMessage("Cannot connect to Docker daemon using 'ssh'.",{modal:!0,detail:"Make sure public/private keys are set up for connecting without keyboard interaction."},"Show Log")&&ot.commands.executeCommand(Ci),!1;if(n==="daemon")return await ot.window.showErrorMessage("Docker returned an error.",{modal:!0,detail:"Make sure the Docker daemon is running."},"Show Log")&&ot.commands.executeCommand(Ci),!1;if(!n||n==="command"){if(t.cliHost.type==="wsl")await ot.window.showErrorMessage("Docker Desktop WSL 2 backend required.",{modal:!0},"Read more on docker.com")&&ot.env.openExternal(ot.Uri.parse("https://docs.docker.com/docker-for-windows/wsl"));else{let o="Install",s="Ignore",a=n===!1?[o,s]:[o],c=await ot.window.showErrorMessage("Docker version 17.12.0 or later required.",{modal:!0},...a);if(c===o)qm(t.output).then(console.error);else if(c===s)return!0}return!1}return n==="wsl1"?(await ot.window.showErrorMessage("WSL 2 distro required.",{modal:!0,detail:"The WSL distro is running with WSL 1."},"Read more on docker.com")&&ot.env.openExternal(ot.Uri.parse("https://docs.docker.com/docker-for-windows/wsl")),!1):!0}async function Ku(t,e){var s,a,c,l;let r;try{let u=await Pe(t,"version","--format","{{.Server.APIVersion}}");r=u.stdout.toString(),t.output.write(r);let d=u.stderr.toString();d&&t.output.write(_e(d))}catch(u){console.error(u);let d=(s=u==null?void 0:u.stdout)==null?void 0:s.toString();d&&t.output.write(d);let f=u&&(u.stderr?u.stderr.toString():u.message)||"";f&&t.output.write(_e(f)),Yu(e,"error",void 0,f);let p=f.toLowerCase();return p.indexOf("permission denied")!==-1?p.indexOf("ssh")!==-1?"ssh":"permission":p.indexOf("enoent")!==-1||p.indexOf("not found")!==-1?(t.output.write(`CLI host's PATH: ${t.cliHost.env.PATH}`),"command"):t.cliHost.type==="wsl"&&((l=(c=(a=u==null?void 0:u.stdout)==null?void 0:a.toString())==null?void 0:c.toLowerCase())==null?void 0:l.indexOf("wsl 1"))!==-1?"wsl1":"daemon"}let n=r.trim(),i=Xo(n);if(!i&&n.toLowerCase().indexOf("error during connect")!==-1)return Yu(e,"error",void 0,n),"daemon";if(!i)return Yu(e,"unparsed",n),!0;let o=!ha(i,[1,35]);return!o&&await _w(t)?(Yu(e,"podman",n),!0):(Yu(e,o?"success":"failure",n),o)}function Yu(t,e,r,n){let i={outcome:e};r&&(i.version=r),n&&(i.errorMessage=n),t.sendTelemetryEvent("dockerVersion",i)}async function $B(t){try{return await is(t,"version"),!0}catch(e){return await ot.window.showErrorMessage("Docker Compose required",{modal:!0},"Documentation")&&ot.env.openExternal(ot.Uri.parse("https://go.microsoft.com/fwlink/?linkid=2079610")),!1}}var hc=V(require("vscode"));var w_=class{constructor(e){this.cliHost=e}async provideDocumentLinks(e,r){let n=[],i=xk(e.getText());if(!i)return n;let o=kk(i)||{};return o.configFilePath=e.uri,ze(o)&&this._linksForDockerfile(n,o,i,e),"dockerComposeFile"in o&&await this._linksForDockerCompose(n,o,i,e),n}_tryAddDocumentLinkToBucket(e,r,n,i,o){let s=e.positionAt(r),a=e.positionAt(n);s.compareTo(a)!==0&&o.push(new hc.DocumentLink(new hc.Range(s,a),i))}_linksForDockerfile(e,r,n,i){let o=ff(n,["build","dockerfile"])||ff(n,["dockerFile"]);o&&o.type==="string"&&this._tryAddDocumentLinkToBucket(i,o.offset+1,o.offset+o.length-1,yt(this.cliHost,r),e)}async _linksForDockerCompose(e,r,n,i){let s=(await Ht(this.cliHost,r)).map(c=>hc.Uri.file(c).path),a=ff(n,["dockerComposeFile"]);if(s.length>0&&a)if(a.type==="array"&&a.children)for(let c=0;c<a.children.length;c++)this._tryAddDocumentLinkToBucket(i,a.children[c].offset+1,a.children[c].offset+a.children[c].length-1,i.uri.with({path:s[c]}),e);else a.type==="string"&&this._tryAddDocumentLinkToBucket(i,a.offset+1,a.offset+a.length-1,i.uri.with({path:s[0]}),e)}};var W=V(require("vscode")),Is=V(require("path"));var jB="Stop Container",UB="Reopen Folder locally",BB="Close Workspace",xo;(function(i){i.Placeholder="Placeholder",i.Group="Group",i.Container="Container",i.Folder="Folder"})(xo||(xo={}));var Nt=class{static isGroupItem(e){return!!e&&e.type===xo.Group}static isContainerItem(e){return!!e&&e.type===xo.Container}static isFolderItem(e){return!!e&&e.type===xo.Folder}},Qu;(function(n){n[n.DevContainers=0]="DevContainers",n[n.AttachContainers=1]="AttachContainers",n[n.OtherContainers=2]="OtherContainers"})(Qu||(Qu={}));var C_=class extends Nt{constructor(e,r){super();this.label=e;this.groupType=r;this.type=xo.Group}async asTreeItem(e,r,n,i){return new W.TreeItem(this.label,W.TreeItemCollapsibleState.Expanded)}},xn=class extends Nt{constructor(e,r=[],n,i=!1){super();this.container=e;this.folders=r;this.parent=n;this.isDevContainer=i;this.type=xo.Container;this._alreadyCheckedRepository=!1}async asTreeItem(e,r,n,i){let o=new W.TreeItem(this.getContainerLabel(),this.getCollapsibleState());o.description=this.containerDescription;let s=this.getContextBase();o.iconPath=$m(r,_ae),o.contextValue="exited"+s;let a=!1;return n&&this.container.Id===n.Id?(o.iconPath=$m(r,Eae),o.contextValue="active"+s,a=!0):e&&await this.setTreeItemIconAndContext(e,s,o),o.tooltip=this.getHover(a,o.iconPath instanceof W.ThemeIcon?o.iconPath:new W.ThemeIcon("vm"),o.label),this.folders.length===1&&(o.contextValue+="Folder"),o}getContextBase(){return(this.isDevContainer?"Dev":"")+"Container"}getCollapsibleState(){return this.folders.length>1?W.TreeItemCollapsibleState.Expanded:W.TreeItemCollapsibleState.None}async setTreeItemIconAndContext(e,r,n){switch(this.container.State.Status){case"created":{n.iconPath=new W.ThemeIcon("vm"),n.contextValue="exited"+r;break}case"paused":{n.iconPath=new W.ThemeIcon("vm-outline"),n.contextValue="running"+r;break}case"restarting":{n.iconPath=new W.ThemeIcon("vm-outline"),n.contextValue="exited"+r;break}case"exited":{n.iconPath=new W.ThemeIcon("vm"),n.contextValue="exited"+r;break}case"running":{n.iconPath=new W.ThemeIcon("vm-running"),n.contextValue="running"+r;break}}}getTimeElapsed(e){if(!e)return"";let r="",n=e.State.Status,i=new Date(e.State.StartedAt),o=new Date(e.State.FinishedAt);if(i.getFullYear()>1&&o.getFullYear()>1){let s=new Date,a=new Date(i>o?e.State.StartedAt:e.State.FinishedAt),c,l,u=s.getTime()-a.getTime();(l=Math.round(u/xn.years))>0?l===1?c="year":c="years":(l=Math.round(u/xn.days))>0?l===1?c="day":c="days":(l=Math.round(u/xn.hours))>0?l===1?c="hour":c="hours":(l=Math.round(u/xn.minutes))>0?l===1?c="minute":c="minutes":(l=Math.round(u/xn.seconds),l===1?c="second":c="seconds"),r=` ${l} ${c}`+(n.endsWith("ing")?"":" ago")}return`${n.charAt(0).toUpperCase()+n.slice(1)}`+r}getContainerLabel(){if($a(this.container)&&this.folders.length>0)return`${Is.basename(this.folders[0].folder.path)}`;{let r=Bw(this.container);if(r)return r;let n=this.repository;return n?n.repositoryName:this.container.Config.Image}}get containerDescription(){return this.container.Name.substr(1)}getHover(e,r,n){let i=new W.MarkdownString(void 0,!0);if(i.appendMarkdown(`$(${r.id}) ${n} (${this.container.Name.substr(1)})  
`),this.repository){let s=this.repository.gitUrlInfo.repository==="github"?"$(github)":"$(source-control)";i.appendMarkdown(`${s} [${this.repository.fullRepositoryName}](${this.repository.gitUrlInfo.repositoryUrl})  
`)}let o=Bp(this.container);return o&&i.appendMarkdown(`$(file-symlink-directory) ${o}  
`),e?i.appendMarkdown("$(remote) Connected"):i.appendMarkdown(`$(history) ${this.getTimeElapsed(this.container)}`),i}get repository(){if(!this._alreadyCheckedRepository){let e=us(this.container);e&&(this._repository=xr(e)),this._alreadyCheckedRepository=!0}return this._repository}inspect(e){return _t(e,this.container.Id)}},tr=xn;tr.seconds=1e3,tr.minutes=xn.seconds*60,tr.hours=xn.minutes*60,tr.days=xn.hours*24,tr.years=xn.days*365;var As=class extends Nt{constructor(e,r,n){super();this.container=e;this.folder=r;this.isDevContainer=n;this.type=xo.Folder}async asTreeItem(e,r,n,i){let o=new W.TreeItem(Is.basename(this.folder.path),W.TreeItemCollapsibleState.None);return o.description=this.folder.path,o.iconPath=$m(r,xae),o.contextValue="attachedFolder",this.isDevContainer&&!us(this.container)&&(o.contextValue="devFolder"),n&&this.container.Id===n.Id&&i===this.folder.path&&(o.iconPath=$m(r,Sae),o.tooltip=`Active Folder ${o.label}`,o.contextValue=`active${o.contextValue}`),o}};function Cae(t,e,r,n){if(!(!W.env.remoteName||W.env.remoteName!=="attached-container"&&W.env.remoteName!=="dev-container"))return HB(t,e,r,n)}function HB(t,e,r,n){W.commands.executeCommand("setContext","remote-containers:showDetails",!0);let i=new QB(e,n,e.output),o=W.window.createTreeView("detailsContainers",{treeDataProvider:i});return i.setTitle=s=>{o.title=s},t.subscriptions.push(r.onDidChangeActiveContainer(s=>i.refresh(s))),i}function bae(t,e){let r=[jB];return t&&t.Id===e.Id&&W.workspace.workspaceFolders&&W.workspace.workspaceFolders.length>0&&(r.push(BB),W.workspace.workspaceFolders[0].uri.authority.startsWith("dev-container")&&r.push(UB)),r}var VB=class{constructor(e,r){this.dockerParams=e;this.containerId=r;this.writeEmitter=new W.EventEmitter;this.onDidWrite=this.writeEmitter.event;this.destroyables=[]}open(){let{cliHost:e,env:r,output:n}=this.dockerParams;e.exec({cmd:wn(),args:["logs","-f",this.containerId],env:r,output:n}).then(i=>{this.destroyables.push(i.stdout.on("data",o=>{this.write(o.toString())})),this.destroyables.push(i.stderr.on("data",o=>{this.write(o.toString())}))}).catch(console.error)}close(){this.writeEmitter.dispose(),this.destroyables.forEach(e=>{e.destroy()})}write(e){this.writeEmitter.fire(e.replace(/\n/g,`\r
`))}},GB=class{constructor(e,r,n,i,o,s){this.targetsTreeData=e;this.detailsTreeData=r;this.devVolumesTreeData=n;this.dockerParams=i;this.context=o;this.telemetry=s}updateDockerParameters(e){this.dockerParams=e}registerCommands(){let e=[];return e.push(W.commands.registerCommand("remote-containers.stopContainer",this.commandStopContainer,this)),e.push(W.commands.registerCommand("remote-containers.removeContainer",this.commandRemoveContainer,this)),e.push(W.commands.registerCommand("remote-containers.startContainer",this.commandStartContainer,this)),e.push(W.commands.registerCommand("remote-containers.removeRecentFolder",this.commandRemoveRecentFolder,this)),e.push(W.commands.registerCommand("remote-containers.showDetails",this.commandShowDetails,this)),e.push(W.commands.registerCommand("remote-containers.explorerTargetsRefresh",async()=>(await this.targetsTreeData.getDockerParams(!0),this.targetsTreeData.refresh(void 0)),this)),e.push(W.commands.registerCommand("remote-containers.explorerDetailsRefresh",this.commandExplorerDetailsRefresh,this)),e.push(W.commands.registerCommand("remote-containers.attachToContainer",this.commandAttachToContainer,this)),e.push(W.commands.registerCommand("remote-containers.attachToContainerNewWindow",this.commandAttachToContainerNewWindow,this)),e.push(W.commands.registerCommand("remote-containers.inspectDockerResource",this.commandInspectDockerResource,this)),e.push(W.commands.registerCommand("remote-containers.inspectInBasicDevContainer",this.commandInspectInBasicDevContainer,this)),e.push(W.commands.registerCommand("remote-containers.cloneInVolume",this.commandCloneInVolume,this)),e.push(W.commands.registerCommand("remote-containers.removeVolume",this.commandRemoveVolume,this)),e.push(W.commands.registerCommand("remote-containers.pruneVolumes",this.commandPruneVolumes,this)),e.push(W.commands.registerCommand("remote-containers.explorerVolumesRefresh",this.commandExplorerVolumesRefresh,this)),e.push(W.commands.registerCommand("remote-containers.startAndOpenFolder",this.commandStartAndOpenFolder,this)),e.push(W.commands.registerCommand("remote-containers.newContainer",this.commandNewContainer,this)),e.push(W.commands.registerCommand("remote-containers.showContainerLog",this.commandShowContainerLog,this)),e}async commandStopContainer(e){if(!Nt.isContainerItem(e))return;let r=this.targetsTreeData.currentContainer&&this.targetsTreeData.currentContainer.Id===e.container.Id?"Stop active container? This will disconnect your current window.":`Stop ${e.getContainerLabel()}?`,n=await W.window.showWarningMessage(r,{modal:!0},...bae(this.targetsTreeData.currentContainer,e.container));await this.targetsTreeData.withProgress(e,async()=>{switch(n){case jB:{await ub(this.dockerParams,e.container),e.container=await _t(this.dockerParams,e.container.Id);break}case BB:{await W.commands.executeCommand("workbench.action.closeFolder");break}case UB:{await W.commands.executeCommand("remote-containers.reopenLocally");break}}})}async commandRemoveContainer(e){if(!Nt.isContainerItem(e))return;let r=await Hn(this.dockerParams,e.container.Id);if(!r)return;let n=await W.window.showWarningMessage("Remove this container?",{modal:!0,detail:"This action is not reversible and deletes the container permanently."},"Remove");await this.targetsTreeData.withProgress(e.parent,async()=>{n==="Remove"&&(await ub(this.dockerParams,e.container),await MF(this.dockerParams,r.Id),this.detailsTreeData&&await this.detailsTreeData.refresh(void 0),await this.tryRemoveVolume(e.container))})}async tryRemoveVolume(e){let r=Bp(e);if(r||(r=SN(e)),r){let n=await cp(this.dockerParams,r);if((await bw(this.dockerParams)).indexOf(r)>=0){let s;(n==null?void 0:n.Labels)&&n.Labels["vsch.local.repository.unique"]==="true"?s="The container is using a volume with a cloned repository.":s=`This is the last container using '${r}'.`,await W.window.showInformationMessage(s,{modal:!0,detail:"Do you want to remove the volume and the data it contains?"},"Remove")==="Remove"&&await db(this.dockerParams,r)}}}async commandPruneVolumes(e){let r="Are you sure you want to remove all unused volumes?";await W.window.showInformationMessage(r,{modal:!0},"Remove")==="Remove"&&await this.targetsTreeData.withProgress(e,async()=>{await WR(this.dockerParams)})}async commandExplorerVolumesRefresh(e){return await this.devVolumesTreeData.getDockerParams(),this.devVolumesTreeData.refresh(void 0)}async commandStartContainer(e){!Nt.isContainerItem(e)||await this.targetsTreeData.withProgress(e,async()=>{await Eh(this.dockerParams,e.container),e.container=await _t(this.dockerParams,e.container.Id)})}async commandRemoveRecentFolder(e){!Nt.isFolderItem(e)||(await W.commands.executeCommand("vscode.removeFromRecentlyOpened",e.folder.toString()),await this.targetsTreeData.refresh(void 0))}async commandShowDetails(e){!Nt.isContainerItem(e)||(this.detailsTreeData||(this.detailsTreeData=HB(this.context,this.dockerParams,this.targetsTreeData,this.telemetry)),await this.detailsTreeData.refresh(e))}async commandExplorerDetailsRefresh(){this.detailsTreeData&&await this.detailsTreeData.refresh(void 0)}async commandStartAndOpenFolder(e){let r,n;Nt.isFolderItem(e)?(n=e,r=e.container):tr.isContainerItem(e)&&(n=e.folders[0],r=e.container),r&&(await Eh(this.dockerParams,r),await W.commands.executeCommand("remote-containers.openFolder",n))}async commandAttachToContainer(e){return this.attachToContainerInternal(e)}async commandAttachToContainerNewWindow(e){return this.attachToContainerInternal(e,!0)}async attachToContainerInternal(e,r=!1){let n;Nt.isContainerItem(e)?n=e.container:this.detailsTreeData&&(n=this.detailsTreeData.container),n&&(await Eh(this.dockerParams,n),await jm(this.dockerParams,n,this.context,r))}async commandInspectDockerResource(e){let r;(Nt.isContainerItem(e)||ko.isImageItem(e)||ko.isVolume(e)||ko.isDevVolume(e))&&(r=await e.inspect(this.dockerParams)),r&&W.window.showTextDocument(await W.workspace.openTextDocument({language:"json",content:JSON.stringify(r,null,"	")}))}async commandInspectInBasicDevContainer(e){ko.isDevVolume(e)&&await e.inspectInBasicDevContainer()}async commandCloneInVolume(e){ko.isDevVolume(e)&&await e.cloneRepositoryInVolume()}async commandRemoveVolume(e){ko.isDevVolume(e)&&await e.removeVolume(this.dockerParams)}async commandNewContainer(){let e=[{label:"Open Current Folder in Container",command:"remote-containers.reopenInContainer"},{label:"Open Folder in Container...",command:"remote-containers.openFolder"},{label:"Open Workspace in Container...",command:"remote-containers.openWorkspace"},{label:"Clone Repository in Container Volume...",command:"remote-containers.openRepositoryInVolume"},{label:"Clone GitHub Pull Request in Container Volume...",command:"remote-containers.openPullRequestInVolume"},{label:"Try a Sample...",command:"remote-containers.trySample"}],r=await W.window.showQuickPick(e,{placeHolder:"Select an action to create a container"});if(r)return W.commands.executeCommand(r.command)}async commandShowContainerLog(e){if(!Nt.isContainerItem(e))return;let r=new VB(this.dockerParams,e.container.Id);W.window.createTerminal({name:e.container.Config.Image,pty:r}).show()}};async function WB(t,e,r,n){W.commands.executeCommand("setContext","remote-containers:showDetails",!1);let i=await qe(n),o=new zB(t,e,d,r,n),s=W.window.createTreeView("targetsContainers",{treeDataProvider:o});o.setMessage=f=>s.message=f;let a=Cae(t,i,o,r),c=new JB(t,r,n),l=W.window.createTreeView("devVolumes",{treeDataProvider:c});t.subscriptions.push(l);let u=new GB(o,a,c,i,t,r);t.subscriptions.push(...u.registerCommands());function d(){let f=DF();t.subscriptions.push(f),t.subscriptions.push(f.event(async()=>{o.refresh(void 0),c.refresh(void 0);let p=await qe(n);a&&a.updateDockerParameters(p),u.updateDockerParameters(p)}))}}var zB=class{constructor(e,r,n,i,o){this.context=e;this.resolverResults=r;this.onFirstReveal=n;this.telemetry=i;this.output=o;this._onDidChangeTreeData=new W.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this._onDidChangeActiveContainer=new W.EventEmitter;this.onDidChangeActiveContainer=this._onDidChangeActiveContainer.event;this.refreshDockerParams=!1;this.needsSSHCredentials=!1;this.setTreeMessage=()=>{};this.devContainers=[];this.attachContainers=[];this.otherContainers=[];this.recentAttachEntries=new Map;this.recentAttachDevContainerEntries=new Map;this.recentDevComposeEntries=new Map;this.containerItems=new Map;this.action=Promise.resolve();this.needsDockerStartOrInstallContext=void 0;this.hasContainersContext=void 0}set setMessage(e){this.setTreeMessage=e}get currentContainer(){return this._currentContainer}async getDockerParams(e=!1){return this.dockerParams||(this.passiveSSHAskpassEnv||(this.passiveSSHAskpassEnv=Fn(this.context.extensionPath,async r=>(this.needsSSHCredentials=!0,bi(r,!1)))),this.dockerParams=await qe(this.output,void 0,void 0,e?void 0:this.passiveSSHAskpassEnv),await Ku(this.dockerParams,this.telemetry)!==!0&&(this.dockerParams=void 0)),this.dockerParams}handleDockerEvent(e){try{let r=JSON.parse(e.toString());if(!r.Action)return;let n="exec_create: /root/.vscode-server";if(r.Action==="die"||r.Action==="destroy"||r.Action==="create")this._onDidChangeTreeData.fire();else if(!r.Action.startsWith("exec_create")&&r.Actor&&r.Actor.ID&&this.containerItems.has(r.Actor.ID)){let i=this.containerItems.get(r.Actor.ID);this.dockerParams&&i?(async()=>{i.container=await _t(this.dockerParams,i.container.Id),this._onDidChangeTreeData.fire(i)})():this._onDidChangeTreeData.fire(i);return}else if(r.Action.startsWith(n)){this._onDidChangeTreeData.fire();return}}catch(r){}}async tryEnsureDocker(){let e=await this.getDockerParams();if(!!e)try{this.eventsProcess&&this.eventsProcess.terminate(),this.eventsProcess=await bl(e,{event:["create","destroy","die","health-status","kill","pause","rename","resize","restart","start","stop","unpause","update","exec_create"]}),this.eventsProcess.stdout.on("data",r=>{this.handleDockerEvent(r)})}catch(r){r.code!=="ENOENT"&&console.log(r),this.dockerParams=void 0}}async getTreeItem(e){return e.asTreeItem(this.dockerParams,this.context,this._currentContainer,this.currentFolder)}async setDockerStartOrInstallContext(e){(this.needsDockerStartOrInstallContext===void 0||this.needsDockerStartOrInstallContext!==e)&&(this.needsDockerStartOrInstallContext=e,!this.needsDockerStartOrInstallContext&&this.hasContainersContext===!1&&this.setHasContainersContext(!0),await W.commands.executeCommand("setContext","remote-containers:needsDockerStartOrInstall",!this.needsDockerStartOrInstallContext&&!this.needsSSHCredentials),await W.commands.executeCommand("setContext","remote-containers:needsSSHCredentials",!this.needsDockerStartOrInstallContext&&this.needsSSHCredentials))}async setHasContainersContext(e){if(this.hasContainersContext===void 0||this.hasContainersContext!==e){this.hasContainersContext=e;let r=W.workspace.workspaceFolders&&W.workspace.workspaceFolders.length>0?"remote-containers:noContainersWithFolder":"remote-containers:noContainersWithoutFolder";await W.commands.executeCommand("setContext",r,!this.hasContainersContext)}}async getDockerOrShowMessage(e){return this.refreshDockerParams&&(this.refreshDockerParams=!1,this.dockerParams=void 0),!this.dockerParams&&(e===void 0&&await this.tryEnsureDocker(),!this.dockerParams)?(this.setDockerStartOrInstallContext(!1),this._onDidChangeActiveContainer.fire(void 0),!1):(this.setDockerStartOrInstallContext(!0),!0)}async getChildGroups(e){this.containerItems.clear(),await this.setCurrents(),await this.setContainerTypes(e);let r=[];return(this.devContainers.length>0||this.attachContainers.length>0)&&r.push(new C_("Dev Containers",0)),this.otherContainers.length>0&&r.push(new C_("Other Containers",2)),r}async getChildDevContainer(e,r){let n=await this.getWorkspaceFolderFromContainer(e),i=n?[new As(e,n,!0)]:[],o=$a(e);o&&this.recentAttachDevContainerEntries.has(o)?i.push(...this.recentAttachDevContainerEntries.get(o).map(a=>new As(e,a,!1))):o&&this.recentAttachEntries.has(e.Id)?i.push(...this.recentAttachEntries.get(e.Id).map(a=>new As(e,a,!1))):(o=us(e))&&this.recentAttachDevContainerEntries.has(o)?i.push(...this.recentAttachDevContainerEntries.get(o).map(a=>new As(e,a,!1))):o===void 0&&this.recentDevComposeEntries.has(e.Id)&&i.push(...this.recentDevComposeEntries.get(e.Id).map(a=>new As(e,a,!1)));let s=new tr(e,i,r,!0);return this.setContainerItems(s),s}setContainerItems(e){this.containerItems.set(e.container.Id,e),this._currentContainer&&e.container.Id===this._currentContainer.Id&&this._onDidChangeActiveContainer.fire(e)}async getChildContainers(e){if(e.groupType===0){let r=this.devContainers.map(async n=>this.getChildDevContainer(n,e));return r.push(...this.attachContainers.map(async n=>{let i=new tr(n,this.recentAttachEntries.get(n.Id).map(o=>new As(n,o,!1)),e);return this.setContainerItems(i),i})),Promise.all(r)}else return this.otherContainers.map(r=>{let n=new tr(r,[],e);return this.setContainerItems(n),n})}getChildFolders(e){return e.folders&&e.folders.length>1?e.folders:[]}async getChildItems(e){if(e===void 0){let r=await fi(this.dockerParams,!0);if(await this.setHasContainersContext(r.length>0),r.length===0)return[];let n=await Zi(this.dockerParams,r);return this.getChildGroups(n)}else{if(Nt.isGroupItem(e))return this.getChildContainers(e);if(Nt.isContainerItem(e))return this.getChildFolders(e)}return[]}async getChildren(e){return this.onFirstReveal&&(this.onFirstReveal(),this.onFirstReveal=void 0),await this.action,await this.getDockerOrShowMessage(e)?(this.setTreeMessage(void 0),this.getChildItems(e)):[]}async refresh(e){e===void 0&&(this.refreshDockerParams=!0),this._onDidChangeTreeData.fire(e)}async setCurrents(){let e=W.workspace.workspaceFolders,r;if(this.dockerParams){if(e&&e.length>0){let n=this.resolverResults.get(e[0].uri.authority);n&&n.dockerContainerId&&(r=await Hn(this.dockerParams,n.dockerContainerId),this.currentFolder=e[0].uri.path)}else if(this.resolverResults.size>0){let n=[...this.resolverResults.values()][0].dockerContainerId;n&&(r=await Hn(this.dockerParams,n))}}r!==this._currentContainer&&(this._currentContainer=r)}addContainerToMap(e){if($a(e)){this.devContainers.push(e);return}else if(us(e)){this.devContainers.push(e);return}else if(Bw(e)&&this.recentDevComposeEntries.has(e.Id)){this.devContainers.push(e);return}else if(this.recentAttachEntries.has(e.Id)){this.attachContainers.push(e);return}this.otherContainers.push(e)}async setContainerTypes(e){return await this.setRecentEntries(e),this.devContainers.length=0,this.attachContainers.length=0,this.otherContainers.length=0,e.forEach(r=>{this.addContainerToMap(r)}),{hasDev:this.devContainers.length>0,hasAttach:this.attachContainers.length>0}}async getWorkspaceFolderFromHostWorkspace(e){let r=await $r(e,Qr,this.output,Pr()),n=Ae(r.path,e),i=await Un(r,n,Gn()),o=i&&await so(r,n,i,this.output)||void 0;if(o&&ze(o.config))return W.Uri.parse(Hl(e,o.workspaceConfig.workspaceFolder,void 0),!0)}async getWorkspaceFolderFromContainer(e){let r=$a(e);if(r)return this.getWorkspaceFolderFromHostWorkspace(r);{let n=us(e),i=Bp(e),o=xN(e);if(n)return W.Uri.parse(ds(n,i,o,!1,void 0,void 0))}}async getWorkspaceFolderFromHostPath(e){let r=this.dockerParams.cliHost,n=await aC(r,e,this.output),i=LN(r,n,e);return W.Uri.parse(Hl(e,i,void 0),!0)}getWorkspaceFolderFromRepository(e,r,n){return W.Uri.parse(ds(e,r,n,!1,void 0,void 0),!0)}async findComposeTargetContainer(e,r){if(!this.dockerParams)return;let n=Ae(this.dockerParams.cliHost.path,e),i=await Un(this.dockerParams.cliHost,n,Gn()),o=i&&await so(this.dockerParams.cliHost,n,i,this.output);if(o&&"dockerComposeFile"in o.config){let s=await Ht(this.dockerParams.cliHost,o.config),a=await ql(this.dockerParams,n,s);return rN(r,a,o.config.service)}}trySetEntryWithAttachAuthority(e,r,n){let i;if("containerName"in r){let o=n.find(s=>s.Name===r.containerName);o&&(i=o.Id)}else i=r.containerId;i&&(this.recentAttachEntries.has(i)?this.recentAttachEntries.get(i).push(e):this.recentAttachEntries.set(i,[e]))}async trySetEntryWithDevAuthority(e,r,n,i){let o=r.hostPath,s=i[o];if(s||(s=await this.getWorkspaceFolderFromHostPath(r.hostPath),i[o]=s),s.path!==e.path){this.recentAttachDevContainerEntries.has(r.hostPath)?this.recentAttachDevContainerEntries.get(r.hostPath).push(e):this.recentAttachDevContainerEntries.set(r.hostPath,[e]);let a=await this.findComposeTargetContainer(r.hostPath,n);a&&this.recentDevComposeEntries.has(a)?this.recentDevComposeEntries.get(a).push(e):a&&this.recentDevComposeEntries.set(a,[e])}}trySetEntryWithRepoAuthority(e,r){this.getWorkspaceFolderFromRepository(r.repositoryPath,r.volumeName,r.folder).path!==e.path&&(this.recentAttachDevContainerEntries.has(r.repositoryPath)?this.recentAttachDevContainerEntries.get(r.repositoryPath).push(e):this.recentAttachDevContainerEntries.set(r.repositoryPath,[e]))}trySetEntryWithVolumeAuthority(e,r){let n=r.volumeName;!n||(this.recentAttachEntries.has(n)?this.recentAttachEntries.get(n).push(e):this.recentAttachEntries.set(n,[e]))}async trySetEntry(e,r,n){var s;if(!e||!e.folderUri&&!e.workspace.configPath)return;let i=(s=e.folderUri)!=null?s:e.workspace.configPath,o=Kp(i.authority);if(o)this.trySetEntryWithAttachAuthority(i,o,r);else{let a=gn(i.authority);a&&(Wt(a)?await this.trySetEntryWithDevAuthority(i,a,r,n):zr(a)?this.trySetEntryWithRepoAuthority(i,a):this.trySetEntryWithVolumeAuthority(i,a))}}async setRecentEntries(e){this.recentAttachEntries.clear(),this.recentAttachDevContainerEntries.clear(),this.recentDevComposeEntries.clear();let r=await W.commands.executeCommand("_workbench.getRecentlyOpened");if(r&&r.workspaces){let n={};for(let i of r.workspaces)await this.trySetEntry(i,e,n)}}withProgress(e,r){return this.action=this.action.then(()=>r()),this.refresh(e)}},Sn;(function(s){s.Default="Default",s.Title="Title",s.Image="Image",s.Port="Port",s.Volume="Volume",s.DevVolume="DevVolume"})(Sn||(Sn={}));var ko=class{constructor(e){this.label=e;this.type=Sn.Default}static isDetailItem(e){return!!e&&e.label!==void 0&&e.type!==void 0}static isImageItem(e){return!!e&&e.type===Sn.Image}static isVolume(e){return!!e&&e.type===Sn.Volume}static isDevVolume(e){return!!e&&e.type===Sn.DevVolume}},KB=class{constructor(e){this.detail=e;this.type=Sn.Image;this.context="image";this.label="Image"}inspect(e){return eo(e,this.detail)}},YB=class{constructor(e,r){this.label=e;this.volumeDetails=r;this.type=Sn.Volume;this.context="volume"}async inspect(e){return cp(e,this.volumeDetails)}},QB=class{constructor(e,r,n){this.dockerParams=e;this.telemetry=r;this.output=n;this._onDidChangeTreeData=new W.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this.setTreeTitle=()=>{}}updateDockerParameters(e){this.dockerParams=e}set setTitle(e){this.setTreeTitle=e}get container(){return this._container?this._container.container:void 0}getTreeItem(e){let r=new W.TreeItem(e.label,Array.isArray(e.detail)&&e.detail.length>0?W.TreeItemCollapsibleState.Expanded:W.TreeItemCollapsibleState.None);return r.tooltip=e.label,e.detail&&!Array.isArray(e.detail)&&(r.description=e.detail,r.tooltip+=` ${r.description}`),r.contextValue=e.context,r.command=e.command,r}async getAttributes(e,r,n){let i=[];r&&i.push({label:"Workspace",detail:r});let o=us(e.container);return o&&i.push({label:"Repository",detail:o}),i.push({label:"Name",detail:e.container.Name}),i.push(new KB(e.container.Config.Image)),n&&i.push({label:"Configuration",detail:n,command:{title:"Open Dev Container File",command:"remote-containers.openDevContainerFile",arguments:[n]},context:"devContainer"}),i}async getMounts(e){let r=[];return e&&e.Mounts.forEach(n=>{if(n.Type==="volume"){let i=n.Name,o=new YB(`Volume: ${i}`,i),s={label:`Destination: ${n.Destination}`,detail:void 0};r.push({label:"Volume mount",detail:[o,s]})}else if(n.Type==="bind"){let i={label:`Source: ${n.Source}`,detail:void 0},o={label:`Destination: ${n.Destination}`,detail:void 0};r.push({label:"Bind mount",detail:[i,o]})}}),r}async getChildrenFromRoot(e){let r=[],n=$a(e.container),i;if(this.dockerParams&&n){let a=await Un(this.dockerParams.cliHost,Ae(this.dockerParams.cliHost.path,n),Gn());a&&(i=ge(a,this.dockerParams.cliHost.platform))}r.push({label:"Attributes",detail:await this.getAttributes(e,n,i),type:Sn.Title});let o;this.dockerParams&&(o=await _t(this.dockerParams,e.container.Id));let s=await this.getMounts(o);return s.length>0&&r.push({label:"Mounts",detail:s,type:Sn.Title}),r}async testContainer(){let e=!0;try{(this.dockerParams?await _t(this.dockerParams,this._container.container.Id):void 0)===void 0&&(e=!1)}catch(r){e=!1}return e||(this._container=void 0,this.setTreeTitle("Details (Containers)")),e}async getChildren(e){if(this._container===void 0)return[];let r=[];return e===void 0?await this.testContainer()&&(this.setTreeTitle(this._container.getContainerLabel()),r=await this.getChildrenFromRoot(this._container)):Array.isArray(e.detail)&&r.push(...e.detail),r}async refresh(e){this.dockerParams=await qe(this.output),await Ku(this.dockerParams,this.telemetry)!==!0&&(this.dockerParams=void 0,this._container=void 0),this._container=e||this._container,this._onDidChangeTreeData.fire(void 0)}},XB=class extends ko{constructor(e){super(e.Name);this.type=Sn.DevVolume;this.volumeDetails=e,this.createdAt=void 0}async asTreeItem(){let e=this.getLabel(),r=new W.TreeItem(e,W.TreeItemCollapsibleState.None);return r.iconPath=this.iconPath,r.description=this.getDescription(),this.isUniqueVolume()?r.contextValue="uniqueDevVolume":r.contextValue="devVolume",r}isUniqueVolume(){let e=this.volumeDetails.Labels;if(e){let r=e["vsch.local.repository.unique"];if(r&&r==="true")return!0}return!1}getLabel(){let e=this.volumeDetails.Name;if(this.volumeDetails.Labels&&this.isUniqueVolume()){let n=this.getRepository();n&&n.gitUrlInfo.repository!=="unknown"&&(e=n.gitUrlInfo.fullRepositoryName)}return e}getDescription(){let e="";if(this.volumeDetails.Labels&&this.isUniqueVolume()){let n=this.getRepository();if(n&&n.gitUrlInfo.repository!=="unknown"){let i=this.getBranchName(),o=this.getPullRequestId();o?e=`#${o}`:i&&(e=`${i}`)}}return e}getBranchName(){let e=this.volumeDetails.Labels;if(e&&this.isUniqueVolume()&&e["vsch.local.repository.branch"])return e["vsch.local.repository.branch"]}getPullRequestId(){let e=this.volumeDetails.Labels;if(e&&this.isUniqueVolume()&&e["vsch.local.repository.pullRequestId"])return e["vsch.local.repository.pullRequestId"]}getRepository(){let e=this.volumeDetails.Labels;if(e){let r=e["vsch.local.repository.unique"];if(r&&r==="true"){let n=e["vsch.local.repository"];return xr(n)}}}get iconPath(){return new W.ThemeIcon("file-symlink-directory")}getTimeElapsed(){if(this.createdAt)return this.createdAt;let e="";if(new Date(this.volumeDetails.CreatedAt).getFullYear()>1){let n=new Date,i=new Date(this.volumeDetails.CreatedAt),o,s,a=n.getTime()-i.getTime();(s=Math.round(a/tr.years))>0?s===1?o="year":o="years":(s=Math.round(a/tr.days))>0?s===1?o="day":o="days":(s=Math.round(a/tr.hours))>0?s===1?o="hour":o="hours":(s=Math.round(a/tr.minutes))>0?s===1?o="minute":o="minutes":(s=Math.round(a/tr.seconds),s===1?o="second":o="seconds"),e=` ${s} ${o} ago`}return this.createdAt=e,e}async inspect(e){return cp(e,this.volumeDetails.Name)}async inspectInBasicDevContainer(){await W.commands.executeCommand("remote-containers.inspectVolume",this.volumeDetails.Name)}async cloneRepositoryInVolume(){await W.commands.executeCommand("remote-containers.cloneRepositoryInVolumeFromViewlet",this.volumeDetails.Name)}async removeVolume(e){if(!((await bw(e)).indexOf(this.volumeDetails.Name)>=0)){await W.window.showInformationMessage(`Volume '${this.volumeDetails.Name}' is in use and cannot be removed.`,{modal:!0});return}await W.window.showInformationMessage(`Are you sure you want to remove volume '${this.volumeDetails.Name}'?`,{modal:!0},"Remove")==="Remove"&&await db(e,this.volumeDetails.Name)}},JB=class{constructor(e,r,n){this.telemetry=r;this.output=n;this._onDidChangeTreeData=new W.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event}async getTreeItem(e){return e.asTreeItem()}async getDockerParams(){return this.dockerParams||(this.dockerParams=await qe(this.output,void 0,void 0),await Ku(this.dockerParams,this.telemetry)!==!0&&(this.dockerParams=void 0)),this.dockerParams}async setHasVolumesContext(e){await W.commands.executeCommand("setContext","remote-containers:noDevVolumes",e)}async getDockerOrShowMessage(e){return!(!this.dockerParams&&(e===void 0&&await this.tryEnsureDocker(),!this.dockerParams))}async getChildren(e){if(!await this.getDockerOrShowMessage(e))return[];let r=await qe(this.output),n=await to(r),i=await Cl(r,n),o=a=>!(a.Name==="vscode"||a.Name.length===64&&/^[0-9a-fA-F]+$/.test(a.Name)),s=i.filter(o);return await this.setHasVolumesContext(s.length===0),s.sort((a,c)=>{let l=new Date(a.CreatedAt);return new Date(c.CreatedAt).getTime()-l.getTime()}),s.map(a=>new XB(a))}async resolveTreeItem(e,r){let n=await qe(this.output),i=await this.getAssociatedContainers(n,r),o=r.getLabel(),s=r.getRepository(),a=r.getBranchName(),c=r.getPullRequestId(),l=r.getTimeElapsed();return i.length>0?e.tooltip=this.renderMarkdown(o,s,a,c,l,i.join(", ")):e.tooltip=this.renderMarkdown(o,s,a,c,l,"*None*"),e}async getAssociatedContainers(e,r){let n=[],i=await fi(e,!0),o=await Zi(e,i);for(let s of o)for(let a of s.Mounts)a.Type==="volume"&&a.Name===r.volumeDetails.Name&&n.push(s.Name.substring(1));return n}renderMarkdown(e,r,n,i,o,s){let a=new W.MarkdownString(void 0,!0);if(r){let c=r.gitUrlInfo.repository==="github"?"$(github)":"$(source-control)",l=r.gitUrlInfo.repositoryUrl;l.startsWith("http")?(l=r.gitUrlInfo.repositoryUrl.replace(".git",""),a.appendMarkdown(`${c} [${l}](${l})
`)):a.appendMarkdown(`${c} ${l})
`),a.appendMarkdown(`&nbsp;  
`),n&&(r.gitUrlInfo.repository==="github"?a.appendMarkdown(`$(git-compare) [${n}](${l}/tree/${n})
`):a.appendMarkdown(`$(git-compare) ${n}
`),a.appendMarkdown(`&nbsp;  
`)),i&&(r.gitUrlInfo.repository==="github"?a.appendMarkdown(`$(git-pull-request-create) [#${i}](${l}/pull/${i})
`):a.appendMarkdown(`$(git-pull-request-create) #${i}
`),a.appendMarkdown(`&nbsp;  
`)),a.appendMarkdown(`$(history) ${o}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(vm) ${s}`)}else a.appendMarkdown(`$(file-symlink-directory) ${e}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(history) ${o}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(vm) ${s}`);return a}handleDockerEvent(e){try{let r=JSON.parse(e.toString());if(!r.Action)return;(r.Action==="die"||r.Action==="destroy"||r.Action==="create"||r.Action==="prune")&&this._onDidChangeTreeData.fire()}catch(r){}}async tryEnsureDocker(){let e=await this.getDockerParams();if(!!e)try{this.eventsProcess&&this.eventsProcess.terminate(),this.eventsProcess=await bl(e,{event:["destroy","die","kill","create","rename","resize","restart","start","stop","unpause","prune"]}),this.eventsProcess.stdout.on("data",r=>{this.handleDockerEvent(r)})}catch(r){r.code!=="ENOENT"&&console.log(r),this.dockerParams=void 0}}async refresh(e){e===void 0&&(this.dockerParams=void 0),this._onDidChangeTreeData.fire(e)}},Eae="vm-active",_ae="vm-default",Sae="folder-active",xae="folder";function $m(t,e){let r=`${e}.svg`;return{light:W.Uri.file(t.asAbsolutePath(Is.join("resources","light",r))),dark:W.Uri.file(t.asAbsolutePath(Is.join("resources","dark",r))),highContrast:W.Uri.file(t.asAbsolutePath(Is.join("resources","highContrast",r)))}}var b_=V(require("util"));var tn=V(require("vscode"));async function ZB(t,e,r={}){let n=fy(e[0],e.slice(1),void 0),i=await py(e[0],e.slice(1),void 0,t.loadNativeModule),o=await Vf({params:t,startedAt:void 0,sharedDataFolderIsLocalCacheFolder:!1,sharedDataFolder:void 0,remoteWorkspaceFolder:"/",containerUser:void 0,containerGroup:void 0,containerEnv:{},remoteExec:n,remotePtyExec:i,remoteExecAsRoot:void 0,rootShellServer:void 0}),{hostOrContainerPort:s,remoteEnv:a,serverDownloaded:c}=await Ki(t,o,r,void 0,void 0);return{params:t,properties:o,config:void 0,resolvedAuthority:{host:io,port:s,extensionHostEnv:a},tunnelInformation:{},dockerParams:void 0,dockerContainerId:void 0,serverDownloaded:c}}async function eH(t,e,r){var n,i,o;if(!!await mo(t))if(r&&r.name){let s=["get","pod",r.name,"-o","json"];r.namespace&&s.push("--namespace",r.namespace);let{cliHost:a,env:c,output:l}=e,u=(await pe({exec:a.exec,cmd:"kubectl",args:["config","current-context"],env:c,output:l})).stdout.toString().trim(),f=(await pe({exec:a.exec,cmd:"kubectl",args:s,env:c,output:l})).stdout.toString(),p=JSON.parse(f),h=((n=p.spec)==null?void 0:n.containers)||[];if(!h.length){e.output.write(`No containers found. Pod details:
${f}`),await tn.window.showErrorMessage("No containers found.",{modal:!0},"Show Log")&&tn.commands.executeCommand(Ci);return}let m=h.length>1?(i=await tn.window.showQuickPick(h.map(g=>({label:g.name,detail:g.image,container:g})),{placeHolder:"Select container"}))==null?void 0:i.container:h[0];if(m){let g=((o=p.metadata)==null?void 0:o.namespace)||r.namespace,v={remoteAuthority:Pae({context:u,podname:r.name,namespace:g,name:m.name,image:m.image})};/\d$/.test(t.extensionPath)||(v.reuseWindow=!0),await tn.commands.executeCommand("vscode.newWindow",v)}}else e.output.write(`No Pod name found. Pod object:
${JSON.stringify(r,void 0,"  ")}`),await tn.window.showErrorMessage("No Pod name found.",{modal:!0},"Show Log")&&tn.commands.executeCommand(Ci)}async function tH(t,e,r,n,i){return await mo(t)?Z(U({},await kae(t,e,r,n,i)),{isTrusted:!0}):(await tn.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{}))}async function kae(t,e,r,n,i){return tn.window.withProgress({location:tn.ProgressLocation.Notification,title:Ja,cancellable:!1},async o=>{try{let s=Iae(r),a=process.cwd(),c=await $r(a,Qr,n.log,Pr()),l=await Xa({authority:r,extensionContext:t,sessionStart:n.sessionStart,progress:o,cliHost:c,env:c.env,cwd:a,isLocalContainer:!0,telemetry:e,output:n.log,logFilePath:n.logFilePath,allowSystemConfigChange:!1,postCreate:i});l.setWorkspaceName(`${s.name} in ${s.podname} (${s.image})`);let u=["kubectl","exec","-it",s.podname];return s.context&&u.push("--context",s.context),s.namespace&&u.push("--namespace",s.namespace),u.push("--container",s.name,"--"),await ZB(l,u)}catch(s){let a=s instanceof ne?s:new ne({description:"An error occurred attaching to the container.",originalError:s});throw a.actions=[...Ba,ps,lo,Ua,fs],a}}).then(o=>(Ei(e,"k8s-container","success",void 0,o.properties),o),o=>{let s=o instanceof ne?o:new ne({description:"An error occurred attaching to the container.",originalError:o});return Ei(e,"k8s-container","failure",void 0,s.containerProperties,s),uo(s,"k8s-container",e,!0,n)})}function Pae(t){let e=[];for(let r in t){let n=t[r];n&&e.push(`${r}=${encodeURIComponent(n)}`)}return`k8s-container+${e.join("+")}`}function Iae(t){return t.substr(t.indexOf("+")+1).split("+").reduce((e,r)=>{let n=r.indexOf("=");return n!==-1&&(e[r.substr(0,n)]=decodeURIComponent(r.substr(n+1))),e},{})}var Be=V(require("vscode")),mc=V(require("fs")),gc=V(require("os")),Ts=V(require("path")),Um=V(require("child_process")),vc=V(require("util"));function Bm(t){switch(t.quality){case"stable":return"";case"insider":return"-insiders";default:return`-${t.quality}`}}async function rH(t,e){var c;let r=t.globalStorageUri,n=qr.joinPath(r,"cli-bin");await Be.workspace.fs.createDirectory(n);let i="";try{i=(await Be.workspace.fs.readFile(qr.joinPath(n,"remote-containers-path"))).toString()}catch(l){if((l==null?void 0:l.code)!=="FileNotFound")return}if(i===t.extensionPath)return;let o=qr.joinPath(t.extensionUri,"dev-containers-user-cli","bin"),s=Bm(e),a=[{source:"devcontainer",destination:`devcontainer${s}`},{source:"devcontainer.cmd",destination:`devcontainer${s}.cmd`}];for(let l of a)Be.workspace.fs.copy(qr.joinPath(o,l.source),qr.joinPath(n,l.destination),{overwrite:!0});await Be.workspace.fs.writeFile(qr.joinPath(n,"vscode-app-root"),Buffer.from(Be.env.appRoot,"utf-8")),await Be.workspace.fs.writeFile(qr.joinPath(n,"vscode-path"),Buffer.from(process.argv0,"utf-8")),await Be.workspace.fs.writeFile(qr.joinPath(n,"vscode-quality"),Buffer.from((c=e.quality)!=null?c:"","utf-8")),await Be.workspace.fs.writeFile(qr.joinPath(n,"vscode-machine-id"),Buffer.from(Be.env.machineId,"utf-8")),await Be.workspace.fs.writeFile(qr.joinPath(n,"remote-containers-path"),Buffer.from(t.extensionPath,"utf-8"))}async function Aae(t,e){let r=Bm(e),n="";try{if(n=(await(0,vc.promisify)(Um.exec)(`powershell.exe -NoProfile -NonInteractive -Command "[System.Environment]::GetEnvironmentVariable('PATH', 'User')"`)).stdout.toString().trim(),n.indexOf(t)>=0)return await Be.window.showInformationMessage("The devcontainer CLI is already in your PATH",{modal:!0,detail:`Try running 'devcontainer${r} --help'
Note: you may need to restart your shell for PATH changes to take effect`}),!0;switch(await Be.window.showInformationMessage("The devcontainer CLI needs to be added to your PATH",{modal:!0},"Add","Copy CLI Path")){case"Add":let s=(0,vc.promisify)(Um.exec)(`powershell.exe  -NoProfile -NonInteractive -Command "[System.Environment]::SetEnvironmentVariable('PATH', '${n};${t}', 'User')`),a=Be.window.showInformationMessage("The devcontainer CLI has been added to your PATH",{modal:!0,detail:`Try running 'devcontainer${r} --help'
Note: you may need to restart your shell for PATH changes to take effect`});await Promise.all([s,a]);break;case"Copy CLI Path":await Be.env.clipboard.writeText(t),await Be.window.showInformationMessage("The devcontainer CLI path has been copied to the clipboard",{modal:!0,detail:`After adding to your PATH, try running 'devcontainer${r} --help'
Note: you may need to restart your shell for PATH changes to take effect`});break}return!0}catch(i){return!1}}async function Tae(t,e){var a;let n=((a=process.env.PATH)!=null?a:"").split(":"),i=[Ts.join(gc.homedir(),"bin"),Ts.join(gc.homedir(),".local/bin")],o="/usr/local/bin";gc.platform()==="darwin"&&i.push(o);let s=(0,vc.promisify)(mc.stat);for(let c of i){if(n.findIndex(p=>p===c)<0)continue;try{await s(c)}catch{continue}let l=Bm(e),u=Ts.join(c,`devcontainer${l}`);try{let p=await s(u);return console.log(p),await Be.window.showInformationMessage(`The devcontainer CLI is already symlinked in ${c}`,{modal:!0,detail:`Try running 'devcontainer${l} --help'
Note: you may need to restart your shell for PATH changes to take effect`}),!0}catch(p){if((p==null?void 0:p.code)!=="ENOENT")return!1}let d=await Be.window.showInformationMessage("The devcontainer CLI needs to be in your PATH",{detail:`Create a symlink in ${c}?`,modal:!0},"Create","Copy CLI Path"),f=Ts.join(t,`devcontainer${l}`);switch(d){case"Create":if(c===o){if(!await Rae(f,u))break}else await(0,vc.promisify)(mc.symlink)(f,u);await Be.window.showInformationMessage(`The devcontainer CLI has been symlinked in ${c}`,{modal:!0,detail:`Try running 'devcontainer${l} --help'
Note: you may need to restart your shell for PATH changes to take effect`});break;case"Copy CLI Path":await Be.env.clipboard.writeText(t),await Be.window.showInformationMessage("The devcontainer CLI path has been copied to the clipboard",{modal:!0,detail:`After adding to your PATH, try running 'devcontainer${l} --help'
Note: you may need to restart your shell for PATH changes to take effect`});break}return!0}return!1}async function Rae(t,e){try{return await mc.promises.symlink(t,e),!0}catch(r){if(r.code!=="EACCES"&&r.code!=="ENOENT")throw r;if(await Be.window.showInformationMessage("This will now prompt with 'osascript' for Administrator privileges to install the shell command.",{modal:!0},"OK")==="OK"){let i=`osascript -e "do shell script \\"mkdir -p ${Ts.dirname(e)} && ln -sf '${t}' '${e}'\\" with administrator privileges"`;return await(0,vc.promisify)(Um.exec)(i),!0}return!1}}async function nH(t,e){let r=t.globalStorageUri,n=qr.joinPath(r,"cli-bin").fsPath;switch(gc.platform()){case"win32":if(await Aae(n,e))return;break;case"darwin":case"linux":if(await Tae(n,e))return;break}if(await Be.window.showInformationMessage("The devcontainer CLI needs to be included your PATH",{modal:!0},"Copy CLI Path")==="Copy CLI Path"){await Be.env.clipboard.writeText(n);let o=Bm(e);await Be.window.showInformationMessage("The devcontainer CLI path has been copied to the clipboard",{modal:!0,detail:`After adding to your PATH, try running 'devcontainer${o} --help'
Note: you may need to restart your shell for PATH changes to take effect`})}}var aH=class{constructor(e,r){this.telemetry=r,this.output=e}handleUri(e){switch(e.path){case"/cloneInVolume":this.cloneInVolume(e)}}async cloneInVolume(e){let r=sH.parse(e.query);if(!r.url){L.window.showErrorMessage(`Failed to handle the URI '${e}' expected a 'url' query parameter.`,{modal:!0});return}let n;Array.isArray(r.url)?n=r.url[0]:n=r.url;let i=await qe(this.output.log);if(!!await gr(i,await this.telemetry)){if(!await vy(i.cliHost,n,this.output.log)){await L.window.showErrorMessage(`Cannot access the repository '${n}'.`,{modal:!0});return}await L.commands.executeCommand(gh,r.url)}}};async function Oae(t){YF();let e=new Date;KF(t);let r=await Hy(t.extensionPath),n=await Vy(L.env.appRoot),i=WF(t,r,n),o=`Remote-Containers ${r.version} in VS Code ${L.version} (${n.commit||"out-of-source"}).`,s=new bh(t.logPath,e,o);t.subscriptions.push(L.commands.registerCommand(Ci,()=>s.show()));let{channel:a,postCreate:c}=GF(s.log,e);t.subscriptions.push(L.commands.registerCommand(ib,()=>a.show())),t.subscriptions.push(L.workspace.registerRemoteAuthorityResolver("dev-container",{resolve:vh(s,c,pr.results,async(w,b,E)=>mB(t,await i,w,pr.onRemoveOnShutdownChanged,b,E)),async getCanonicalURI(w){let b=gn(w.authority);return b&&Wt(b)?ar(b.hostPath)?rl(b.hostPath,s.log):L.Uri.file(b.hostPath):w}}),L.workspace.registerRemoteAuthorityResolver("attached-container",{resolve:vh(s,c,pr.results,async(w,b,E)=>IB(t,await i,w,b,E))}),L.workspace.registerRemoteAuthorityResolver("k8s-container",{resolve:vh(s,c,pr.results,async(w,b,E)=>tH(t,await i,w,b,E))}),L.window.registerUriHandler(new aH(s,i)));let l=await qe(s.log),u=async(w,b,E)=>{let S=await qe(s.log);if(!await gr(S,await i))return;let x;if(Nt.isFolderItem(w)?(x=w.folder,E=qae()):x=w,x.scheme==="vscode-remote")return L.commands.executeCommand("vscode.openFolder",x,E);{let T=Ae(S.cliHost.path,ge(x,S.cliHost.platform));return Vm(t,T,S,await i,b,E)}};t.subscriptions.push(L.commands.registerCommand("remote-containers.openFolder",async(w,b)=>w?u(w,!1,b):dH(t,!0,await i,!1,s.log))),t.subscriptions.push(L.commands.registerCommand("remote-containers.openWorkspace",async(w,b)=>w?u(w,!1,b):dH(t,!1,await i,!1,s.log))),t.subscriptions.push(L.commands.registerCommand(IF,async w=>Xu(t,await i,s.log,w))),t.subscriptions.push(L.commands.registerCommand(gh,async w=>Xu(t,await i,s.log,w,Kr))),t.subscriptions.push(L.commands.registerCommand(AF,async w=>{if(w.url){let b=w.url;return(w==null?void 0:w.ref)&&(b=`${w.url}/tree/${w.ref}`),Xu(t,await i,s.log,b,Kr)}})),t.subscriptions.push(L.commands.registerCommand(TF,async w=>jae(t,await i,s.log,w,Kr))),t.subscriptions.push(L.commands.registerCommand("remote-containers.inspectVolume",async(w,b,E)=>pH(w,b,E,await i,s.log))),t.subscriptions.push(L.commands.registerCommand("remote-containers.inspectVolumeFromViewlet",async w=>Uae(w,await i,s.log))),t.subscriptions.push(L.commands.registerCommand("remote-containers.cloneRepositoryInVolumeFromViewlet",async w=>Xu(t,await i,s.log,void 0,w))),t.subscriptions.push(L.commands.registerCommand("remote-containers.reopenInContainer",()=>d(!1))),t.subscriptions.push(L.commands.registerCommand("remote-containers.rebuildAndReopenInContainer",()=>d(!0))),t.subscriptions.push(L.commands.registerCommand("remote-containers.rebuildNoCacheAndReopenInContainer",()=>d("rebuildNoCache")));let d=async w=>{if(!await L.workspace.requestWorkspaceTrust({message:au}))return;let E=await qe(s.log);if(!await gr(E,await i))return;let S=L.workspace.workspaceFile;if(S&&S.scheme==="untitled"){await Im();return}let x=L.workspace.workspaceFolders;if(!S&&x&&x.length){let R=x.length>1?await L.window.showWorkspaceFolderPick({placeHolder:"Pick a folder to reopen in a container."}):x[0];R&&(S=R.uri)}let T=await ab(S);if(T){await Ju(t,T.repositoryPath,T.volumeName,T.folder,E);return}if(S){let R;if(E.cliHost.type==="wsl"&&S.scheme==="file"){let B=ge(S,process.platform),te=pa(B)||await hy(E.output)||(()=>{throw new Error("No default WSL distro found.")})();R=await Qo(te,B,E.output)}else R=ge(S,E.cliHost.platform);let q=Ae(E.cliHost.path,R);await Vm(t,q,E,await i,w,{forceReuseWindow:!0})}};t.subscriptions.push(L.commands.registerCommand("remote-containers.reopenLocally",async()=>{let w=L.workspace.workspaceFolders,b=L.workspace.workspaceFile||w&&w.length&&w[0].uri;if(b&&b.scheme==="vscode-remote"){let E=gn(b.authority);if(E&&Wt(E)){let S=L.Uri.file(E.hostPath),x={forceReuseWindow:!0};await L.commands.executeCommand("vscode.openFolder",S,x)}else L.window.showInformationMessage("'Reopen Locally' not possible in current context.")}})),t.subscriptions.push(L.commands.registerCommand("remote-containers.reopenInWSL",async()=>{let w=L.workspace.workspaceFolders,b=L.workspace.workspaceFile||w&&w.length&&w[0].uri;if(b&&b.scheme==="vscode-remote"){let E=gn(b.authority);if(E&&Wt(E)&&ar(E.hostPath)){let S=L.Uri.parse((await rl(E.hostPath,s.log)).toString()),x={forceReuseWindow:!0};await L.commands.executeCommand("vscode.openFolder",S,x)}else L.window.showInformationMessage("'Reopen in WSL' not possible in current context.")}}));let f,p=async w=>{var S;if(!await mo(t))return;let b,E=typeof w=="string"?w:(S=w==null?void 0:w.containerDesc)==null?void 0:S.Id;if(E){let x=await qe(s.log);if(!await gr(x,await i))return;b=await _t(x,E)}else{let x=!1;f||(f=Fn(t.extensionPath,async R=>(x=!0,bi(R))));let T=await qe(s.log,void 0,void 0,f);if(b=await Yae(T,gr(T,await i),()=>x),!b)return}jm(l,b,t)};t.subscriptions.push(L.commands.registerCommand("remote-containers.attachToRunningContainer",p)),t.subscriptions.push(L.commands.registerCommand("remote-containers.attachToRunningContainerFromViewlet",p)),t.subscriptions.push(L.commands.registerCommand("remote-containers.attachToK8sContainerFromViewlet",async w=>eH(t,await qe(s.log),w)));let h=async w=>{var S;let b=await qe(s.log);if(!await gr(b,await i))return;let E=(S=w==null?void 0:w.pullRequestModel)==null?void 0:S.html_url;Xu(t,await i,s.log,E,Kr)};t.subscriptions.push(L.commands.registerCommand("remote-containers.checkoutPRInVolume",h)),t.subscriptions.push(L.commands.registerCommand("remote-containers.rebuildContainer",async()=>{let w=await vs();if(w){await Ju(t,w.repositoryPath,w.volumeName,w.folder,l,!0);return}return await Promise.all(pr.onRemoveOnShutdownChangedEmitter.fire(!0)),L.commands.executeCommand("workbench.action.reloadWindow")})),t.subscriptions.push(L.commands.registerCommand("remote-containers.rebuildContainerNoCache",async()=>{let w=await vs();if(w){await Ju(t,w.repositoryPath,w.volumeName,w.folder,l,"rebuildNoCache");return}return await Promise.all(pr.onRemoveOnShutdownChangedEmitter.fire("rebuildNoCache")),L.commands.executeCommand("workbench.action.reloadWindow")}));let m={fileHost:l.cliHost,findDevContainerFiles:()=>pb(l.cliHost),telemetry:i,output:s.log,existingFilesLearnMoreLink:nu,predefinedDefinitionsLearnMoreLink:iu,openConfigurationCommandId:ru},g=await rB(t,m);t.subscriptions.push(L.commands.registerCommand("remote-containers.createDevContainerFile",async()=>{if(!L.workspace.workspaceFolders){await L.window.showInformationMessage("Open a folder to create the configuration files in first.",{modal:!0},"Open Folder")&&await L.commands.executeCommand(process.platform==="darwin"?"workbench.action.files.openFileFolder":"workbench.action.files.openFolder");return}await x_(t,await i,s.log,g)})),t.subscriptions.push(L.commands.registerCommand("remote-containers.openDevContainerFile",async(w,b)=>{let E,S=await qe(s.log);if(typeof w=="string"?E=[Ee.file(w)]:E=(await Promise.all((await pb(S.cliHost)).map(x=>x.scheme==="vscode-remote"?x:S.cliHost.toCommonURI(ge(x,S.cliHost.platform))))).filter(x=>!!x),E.length){let x;E.length===1?x={uri:E[0]}:x=await L.window.showQuickPick(E.map(R=>({label:R.scheme==="file"?R.fsPath:R.toString(),uri:R})),{placeHolder:"Select container configuration file to open"});let T=await vs();if(T){let R=BF(T.folder);for(let q of R){try{await L.workspace.openTextDocument(L.Uri.parse(q.toString()))}catch(B){continue}await L.commands.executeCommand("vscode.open",L.Uri.parse(q.toString()),b);return}return}if(x){let R=x.uri,q=lN(R);if(q){let B=`https://github.com/microsoft/vscode-dev-containers/tree/main/repository-containers/${process.platform==="win32"?q.replace(/\\/g,"/"):q}`;return L.env.openExternal(L.Uri.parse(B))}else{if(R.scheme==="file"&&await lt(R.fsPath))return await L.commands.executeCommand("vscode.open",L.Uri.parse(R.toString()),b);if(R.scheme==="file"&&pr.results.size)return await Br(fn,R,[],ui),await L.commands.executeCommand("vscode.open",L.Uri.parse(R.toString()),b);if(R.scheme==="vscode-remote"&&pr.results.size)return await L.commands.executeCommand("vscode.open",L.Uri.parse(R.toString()),b);if(w===void 0)return await x_(t,await i,s.log,g)}}}else if(w===void 0)return await x_(t,await i,s.log,g)})),t.subscriptions.push(L.commands.registerCommand("remote-containers.openAttachConfigByNameFile",async()=>{let{dockerContainerId:w,dockerParams:b}=[...pr.results.values()][0];if(!w||!b)return L.window.showInformationMessage("Named configurations are only available for Docker containers.",{modal:!0});let E=await _t(b,w),S=Lm(t.globalStoragePath,E.Name),x=L.Uri.file(S);return await lt(S)?L.commands.executeCommand("vscode.open",x):(await Br(fn,x,[],ui),L.commands.executeCommand("vscode.open",x))})),t.subscriptions.push(L.commands.registerCommand("remote-containers.openAttachDevContainerFile",async()=>{let w=[...(await EB(t.globalStoragePath)).map(E=>U({label:E.name},E)).sort((E,S)=>E.label.localeCompare(S.label)),...(await SB(t.globalStoragePath)).map(E=>U({label:E.image},E)).sort((E,S)=>E.label.localeCompare(S.label))],b=await L.window.showQuickPick(w.length?w:[{label:"No configuration found."}],{placeHolder:"Choose a configuration file"});if(b&&"uri"in b)return L.commands.executeCommand("vscode.open",L.Uri.parse(b.uri.toString()))})),t.subscriptions.push(L.commands.registerCommand("remote-containers.settings",async()=>L.commands.executeCommand("workbench.action.openSettings",`@ext:${uH()}`))),t.subscriptions.push(L.commands.registerCommand("remote-containers.getHelp",async()=>L.env.openExternal(L.Uri.parse("https://aka.ms/vscode-remote/containers")))),t.subscriptions.push(L.commands.registerCommand("remote-containers.getStarted",async()=>L.env.openExternal(L.Uri.parse("https://aka.ms/vscode-remote/containers/getting-started")))),t.subscriptions.push(L.commands.registerCommand("remote-containers.reportIssue",async()=>L.commands.executeCommand("vscode.openIssueReporter",uH()))),t.subscriptions.push(L.commands.registerCommand("remote-containers.provideFeedback",async()=>L.env.openExternal(L.Uri.parse("https://aka.ms/vscode-remote/containers/provide-feedback")))),t.subscriptions.push(L.languages.registerDocumentLinkProvider([{pattern:"**/.devcontainer/devcontainer.json",language:"jsonc"},{pattern:"**/.devcontainer.json",language:"jsonc"}],new w_(l.cliHost))),t.subscriptions.push(L.commands.registerCommand("remote-containers.trySample",async()=>{rce(t,s.log)})),t.subscriptions.push(L.commands.registerCommand("remote-containers.openLogFile",()=>nce(t))),t.subscriptions.push(L.commands.registerCommand("remote-containers.openLastLogFile",()=>ice(t,"remoteContainers",s.logFilePath))),t.subscriptions.push(L.commands.registerCommand("remote-containers.showReopenInContainerNotificationReset",()=>Jae(t))),t.subscriptions.push(L.commands.registerCommand("remote-containers.showRecoveryContainerNotificationReset",()=>Lae(t))),t.subscriptions.push(L.commands.registerCommand("remote-containers.installDocker",()=>qm(s.log))),WB(t,pr.results,await i,s.log),await rH(t,n),t.subscriptions.push(L.commands.registerCommand("remote-containers.installUserCLI",()=>nH(t,n))),(async()=>{await UF(t)||await vH(t,l,await i)})().catch(console.error),Fae(t);let v=L.env.remoteName,y=!v||["dev-container","attached-container","wsl","ssh-remote","exec","k8s-container"].indexOf(v)!==-1?[{pattern:"**/.devcontainer.json"},{pattern:"**/devcontainer.json"}]:[];t.subscriptions.push(L.commands.registerCommand("remote-containers.addExtensionToConfig",g.addExtensionToConfiguration),L.languages.registerCompletionItemProvider([...y,{pattern:Ct.join(Fm(t.globalStoragePath),"*.json")},{pattern:Ct.join(Nm(t.globalStoragePath),"*.json")}],g.createCompletionItemProvider()),L.commands.registerCommand("remote-containers.configureContainerFeatures",async()=>{var b;let w=await r_(m,{readDockerComposeConfig:async(E,S)=>{let x=await jw(l.cliHost.cwd,E,l.output);return Uw(l,x,S)}});if(w){let E;if(!w.manifest&&w.imageName)try{E=await eo(l,w.imageName)}catch(S){if(((b=S==null?void 0:S.stdout)==null?void 0:b.toString().replace(/\s/g,""))==="[]")try{await Pe(l,"pull",w.imageName),E=await eo(l,w.imageName)}catch{}}await i_(m,w,(E==null?void 0:E.Config.Labels)||{})}}),L.commands.registerCommand("remote-containers.labelPortAndUpdateConfig",g.addPortLabelToConfiguration)),await vs()&&L.commands.executeCommand("setContext","isRecoveryContainer",!0),t.subscriptions.push(K2())}var cH="showRecoveryContainerNotification",lH="showReopenInContainerNotificationReset",Nae=5e3;function Lae(t){return t.globalState.update(lH,Date.now())}async function Fae(t){setTimeout(async()=>{let e=t.globalState.get(lH);if(k_(t.globalState.get(cH),e))return;if(await vs()){let n="This is a recovery container that allows you to edit your Dockerfile. Use 'Reopen in Container' to retry.",i="Reopen in Container",o="Don't Show Again",s=await L.window.showInformationMessage(n,o,i);s===i?L.commands.executeCommand("remote-containers.reopenInContainer"):s===o&&await t.globalState.update(cH,Date.now())}},Nae)}async function Mae(){await Promise.all([...pr.results.values()].map(t=>Promise.all(t.params.shutdowns.map(e=>{try{e()}catch(r){console.error(r)}}))))}function uH(){let{name:t,publisher:e}=iH();return`${e}.${t}`}async function dH(t,e,r,n,i){let o=await qe(i);if(!await gr(o,r))return;let s,a=L.workspace.workspaceFolders;if(a&&a[0]){let d=a[0].uri;if(d.scheme==="vscode-remote"){let f=gn(d.authority);if(f&&Wt(f)){let p=Ae(o.cliHost.path,f.hostPath);s=L.Uri.file(p.rootFolderPath)}else d.authority.startsWith("wsl+")&&(s=d)}else d.scheme==="file"&&(s=d)}s||(s=L.Uri.file(oH.homedir()));let c=e?{defaultUri:s,canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1,openLabel:"Open"}:{defaultUri:s,canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:{"Code Workspace":["code-workspace"]},openLabel:"Open"},l=await L.window.showOpenDialog(c),u=l&&l[0];if(u){let d=e?u:u.with({path:Ct.posix.dirname(u.path)}),f=await qe(o.output,d,Pr()==="always"),p=ge(u,f.cliHost.platform),h=Ae(f.cliHost.path,p);await Vm(t,h,f,r,n)}}function qae(){return L.workspace.getConfiguration("window").get("openFoldersInNewWindow",void 0)==="on"?{forceNewWindow:!0}:{forceReuseWindow:!0}}async function Vm(t,e,r,n,i,o){let{cliHost:s}=r;if(ar(e.rootFolderPath)){if(r=await qe(r.output,e.rootFolderPath),s=r.cliHost,!await gr(r,n))return;e=Ae(s.path,e.isWorkspaceFile?s.path.join(s.cwd,Ct.basename(e.workspaceOrFolderPath)):s.cwd)}let a=await yf(s,e);if(a){let m="Continue";if(await L.window.showInformationMessage(`The workspace could fail to open in a container: ${a}`,{modal:!0},m)!==m)return}let c=await Un(s,e,Gn()),l=c&&await so(s,e,c,r.output);if(!l||!Pa(l.config)){let m=await Wu({fileHost:s,telemetry:n,output:r.output,existingFilesLearnMoreLink:nu,predefinedDefinitionsLearnMoreLink:iu,openConfigurationCommandId:ru},e);if(!m||(l=await so(s,e,Ee.file(m).with({scheme:Bt.scheme}),r.output),!l))return}let u=l.config;if(!await $ae(r,u))return;let d=l.workspaceConfig.workspaceFolder;if(ze(u)){let m=yt(s,u);if(!u.initializeCommand&&!await ft(s).readDocument(m))return Zu(`"${m.fsPath}" does not exist.`,s,u.configFilePath);if(u.workspaceFolder&&!Ct.posix.isAbsolute(u.workspaceFolder))return Zu("Workspace folder in devcontainer.json must be an absolute path.",s,u.configFilePath)}else if(!("image"in u))if("dockerComposeFile"in u){if(!await $B(r)||!await Qae(e,r,u))return}else{let m=u.configFilePath;return Zu(`Configuration "${s.path.relative(e.rootFolderPath,ge(m,s.platform))}" not valid.`,s,m)}e.isWorkspaceFile&&(d=Ct.posix.join(d,s.path.basename(e.workspaceOrFolderPath)));let f=Bn(r.env),p=s.type==="wsl"?(await s.toCommonURI(e.workspaceOrFolderPath)).fsPath:e.workspaceOrFolderPath,h=L.Uri.parse(Hl(p,d,f));await Wm({uri:h,type:e.isWorkspaceFile?"workspace":"folder",label:`${FN(s.platform,e.workspaceOrFolderPath,await s.homedir())}${ao(f)} [Dev Container]`}),await fb(t,i?h.authority:!1),await su(t,i==="rebuildNoCache"?h.authority:!1),await L.commands.executeCommand("vscode.openFolder",h,o)}async function $ae(t,e){let r=e.hostRequirements;if(r&&(r.cpus||r.memory)){let n=await Pe(t,"info","--format","{{json .}}"),i=JSON.parse(n.stdout.toString()),o=i.NCPU&&r.cpus&&r.cpus>i.NCPU,s=i.MemTotal&&r.memory&&E_(r.memory)>i.MemTotal;if(o||s){let a=[];i.NCPU&&a.push(`CPUs ${i.NCPU}`),i.MemTotal&&a.push(`RAM ${__(i.MemTotal)}`);let c=[];r.cpus&&c.push(`CPUs ${r.cpus}`),r.memory&&c.push(`RAM ${__(E_(r.memory))}`),r.storage&&c.push(`disk ${__(E_(r.storage))}`);let l=`Docker daemon: ${a.join(", ")}
devcontainer.json: ${c.join(", ")}`;if(!await L.window.showInformationMessage("Not all host requirements in devcontainer.json are met by the Docker daemon.",{modal:!0,detail:l},"Continue"))return!1}}return!0}function E_(t){let e=/^(\d+)([tgmk]b)?$/.exec(t);if(e){let[,r,n]=e,i=parseInt(r,10),o=n&&{t:2**40,g:2**30,m:2**20,k:2**10}[n[0]]||1;return i*o}return 0}function __(t){let e=Math.min(Math.floor(Math.log2(Math.max(Math.abs(t),1))/10),4),r=t/Math.pow(2,10*e),n=Math.max(Math.pow(10,2-Math.floor(Math.log10(Math.max(Math.abs(r),1)))),1),i=Math.round(r*n)/n,o=[" bytes","kb","mb","gb","tb"][e];return`${i}${o}`}async function Xu(t,e,r,n,i){if(!await cu(t))return;let o=await qe(r),s=null;if(!!await gr(o,e)){if(typeof n=="string")s=n;else{let a=await L.commands.executeCommand("git.api.getRemoteSources",{providerLabel:c=>`Clone a repository from ${c.name} in a Container Volume`,urlLabel:"Clone git repository from URL",branch:!0});if(typeof a=="string"){s=a.trim(),s.split("/").length===2&&s.indexOf(":")===-1&&(s=`https://github.com/${s}`);let c=jn(s);if(!await vy(o.cliHost,c.repositoryUrl,o.output)){await L.window.showInformationMessage(`Cannot access the repository '${c.repositoryUrl}'.`,{modal:!0});return}}else if(a){if(!a.branch)return;s=`${a.url}/tree/${a.branch}`}}s&&await fH(t,o,s,i)}}async function fH(t,e,r,n){if(n||(n=await Hae(e)),n){let i=S_(r);n!==Kr&&(i=await Gae(r)),i&&await Ju(t,r,n,i,e)}}async function jae(t,e,r,n,i){if(!await cu(t))return;let o=await qe(r),s=/^(?:(?:https:\/\/)?github.com\/)?([^/]+)\/([^/]+?)(?:\/(?:pull\/([0-9]+)))?(?:\/|$)/i;if(!await gr(o,e))return;let a={placeHolder:"e.g. https://github.com/microsoft/vscode/pull/123",prompt:"Enter a GitHub pull request url",validateInput:u=>s.test(u)?void 0:"Invalid pull request url"},c;if(n?c=n:c=await L.window.showInputBox(a),!c)return;let l=jn(c);if(l.repository==="unknown"||!l.pullRequestId){await L.window.showInformationMessage(`Invalid pull request URL '${c}'.`,{modal:!0});return}await fH(t,o,c,i)}async function pH(t,e,r,n,i){let o=await qe(i);!await gr(o,n)||(t||(t=await Bae(o)),t&&(e&&r?await Kae(t,e,r,o):await zae(t,o)))}async function Uae(t,e,r){let n=await qe(r);!await gr(n,await e)||t&&t.volumeName&&await pH(t.volumeName,void 0,void 0,e,r)}var Gm=class{get detail(){return""}},hH=class extends Gm{get label(){return"$(plus) Create a new volume..."}get description(){return""}get volumeName(){return""}get detail(){return"Use this volume to store several cloned repositories."}get alwaysShow(){return!0}},mH=class extends Gm{constructor(e){super();this.volume=e}get label(){return`$(folder) ${this.volume.Name}`}get description(){return`created at ${new Date(this.volume.CreatedAt).toDateString()}`}get volumeName(){return this.volume.Name}},gH=class extends Gm{constructor(e){super();this.volume=e}get label(){return`$(folder) ${this.volume.Name}`}get description(){return`created at ${new Date(this.volume.CreatedAt).toDateString()}`}get volumeName(){return this.volume.Name}};async function Bae(t){let e=await to(t),n=(await Cl(t,e)).map(a=>new gH(a)),i="Select the volume to inspect with Visual Studio Code",o=L.window.createQuickPick();o.items=n,o.placeholder=i,o.show();let s=await new Promise(a=>{o.onDidAccept(()=>a(o.activeItems[0])),o.onDidHide(()=>a(void 0))});return o.hide(),s?s.volume.Name:null}async function Hae(t){let e=await to(t,["vsch.local.repository.unique=false"]),n=(await Cl(t,e)).map(u=>new mH(u)),i=new hH,o=[i,...n],s="Select the volume for the cloned repository",a=L.window.createQuickPick();a.items=o,a.placeholder=s,a.ignoreFocusOut=!0,a.show();let c=await new Promise(u=>{a.onDidAccept(()=>u(a.activeItems[0])),a.onDidHide(()=>u(void 0))});if(a.hide(),!c)return null;let l=null;return c===i?l=await Vae(t):l=c.volumeName,l}async function Vae(t){let e="",r="vsc-remote-containers",n=await to(t);n.find(s=>s===r)||(e=r);let i={prompt:"Enter the volume name.",value:e,ignoreFocusOut:!0,validateInput:s=>/^[a-zA-Z0-9][a-zA-Z0-9_.-]+$/i.test(s)?null:s.length<2?"Volume names should be at least two characters and the first character must be alphanumeric.":"Only [a-zA-Z0-9_.-] are allowed and the first character must be alphanumeric."},o=await L.window.showInputBox(i);return o?n.find(s=>s===o)?(await L.window.showErrorMessage("Volume already exists",{modal:!0}),null):o:null}async function Gae(t){let e={prompt:"Enter the target folder name.",value:S_(t),ignoreFocusOut:!0},r=await L.window.showInputBox(e);return r||null}function S_(t){return xr(t).repositoryName}async function Wae(){return(await L.authentication.getSession("github",["repo"],{createIfNone:!0})).accessToken}async function Ju(t,e,r,n,i,o=!1){let s=Bn(i.env),a=Ma(e),c;try{c=await a.parseUrl(void 0)}catch(u){if(u instanceof Dp){L.window.showErrorMessage(u.description);return}let d=await Wae();try{c=await a.parseUrl(d)}catch{L.window.showErrorMessage(`Cannot access '${e}'.`,{modal:!0});return}}let l=L.Uri.parse(ds(e,r,n,!1,s,c));r===Kr&&(r="a unique volume"),await Wm({uri:l,type:"folder",label:`${n} in ${r} [Dev Container]`}),await fb(t,o?l.authority:!1),await su(t,o==="rebuildNoCache"?l.authority:!1),await L.commands.executeCommand("vscode.openFolder",l)}async function zae(t,e){let r=Bn(e.env),n=L.Uri.parse(ds(void 0,t,void 0,!0,r,void 0));await Wm({uri:n,type:"folder",label:`Volume ${t} [Dev Container]`}),await L.commands.executeCommand("vscode.openFolder",n)}async function Kae(t,e,r,n){let i=Bn(n.env),o=L.Uri.parse(ds(e,t,r,!0,i,void 0));await Wm({uri:o,type:"folder",label:`${r} in ${t} [Inspect Dev Container]`}),await L.commands.executeCommand("vscode.openFolder",o)}async function Wm(t){return L.commands.executeCommand("_workbench.addToRecentlyOpened",t)}async function jm(t,e,r,n){if(!await mo(r))return;let i,o=t.cliHost;if(o.type==="wsl"){let l=await o.toCommonURI(o.cwd);l&&l.scheme==="file"&&(i=l.fsPath)}let s=ON(e.Name,Bn(t.env),i),a=await CB(r.globalStoragePath,e),c=r.extensionMode===L.ExtensionMode.Development;if(a&&a.workspaceFolder&&!n){let l=L.Uri.parse(`vscode-remote://${s}${a.workspaceFolder}`),u={};c?u.forceReuseWindow=!0:u.forceNewWindow=!0,await L.commands.executeCommand("vscode.openFolder",l,u)}else{let l={remoteAuthority:s};c&&!n&&(l.reuseWindow=!0),await L.commands.executeCommand("vscode.newWindow",l)}}async function Yae(t,e,r){let n=(async()=>{if(!await e)throw new Error("cancel");let i=await fi(t),o=await Zi(t,i),s=[];if(o.forEach(a=>{a.State.Status==="running"&&s.push({label:a.Name,description:`${a.Config.Image} ${a.Id}`,containerInfo:a})}),s.length===0)throw L.window.showErrorMessage("There are no running containers to attach to.",{modal:!0}),new Error("cancel");return s})();try{let i={placeHolder:"Select the container to attach VS Code"},o=await L.window.showQuickPick(n,i);if(!o&&r()){if(!await e)throw new Error("cancel");o=await L.window.showQuickPick(n,i)}return o?o.containerInfo:void 0}catch(i){if(i&&i.message==="cancel")return;throw i}}async function Qae(t,e,r){if(!r.workspaceFolder)return Zu("Workspace folder not specified in devcontainer.json.",e.cliHost,r.configFilePath),!1;if(!Ct.posix.isAbsolute(r.workspaceFolder))return Zu("Workspace folder in devcontainer.json must be an absolute path.",e.cliHost,r.configFilePath),!1;let n=await Ht(e.cliHost,r,e.cliHost.env,e.cliHost.cwd),i=await ql(e,t,n),o=await Pp(e,i,r.service),s=o&&await _t(e,o);return!(s&&!await Xae(e.cliHost,n,r,s))}async function Xae(t,e,r,n){let i=[];for(let o=0;o<e.length;o++)await t.isFile(e[o])||i.push(e[o]);return i.length>0?(L.window.showErrorMessage(`The following referenced docker compose files do not exist: ${i.join(", ")}`,{modal:!0}),!1):r.devPort&&!n.Ports.find(o=>r.devPort===o.PrivatePort)?(L.window.showErrorMessage(`The port '${r.devPort}' is not open on the service '${r.service}'`,{modal:!0}),!1):!0}async function Zu(t,e,r){if(await L.window.showErrorMessage(t,{modal:!0},"Open devcontainer.json")){let i=ge(r,e.platform),o=await e.toCommonURI(i);o&&L.window.showTextDocument(L.Uri.parse(o.toString()))}}async function x_(t,e,r,n){if(await n.createConfiguration()){let o=await qe(r);await vH(t,o,e)}}async function vH(t,e,r){if(L.env.remoteName&&L.env.remoteName!=="wsl")return;let n=L.workspace.workspaceFile,i=L.workspace.workspaceFolders,o=n||i&&i.length&&i[0].uri||void 0;if(o){let{cliHost:s}=e,a=ge(o,s.platform),c=Ae(s.path,a),l=await Ww(s,c,Gn());l&&await Zae(t,l,c,e,r)}}var zm="showReopenInContainerNotification",yH="showReopenInContainerNotificationReset";function Jae(t){return t.globalState.update(yH,Date.now())}async function Zae(t,e,r,n,i){let o=t.globalState.get(yH);if(k_(t.globalState.get(zm),o)||k_(t.workspaceState.get(zm),o))return;let s=cN(n.cliHost,r,e.uri),a,c="";if(n.cliHost.platform!=="linux"&&L.env.remoteName!=="wsl"&&!(n.cliHost.platform==="win32"&&ar(r.rootFolderPath))){if(a=await WP(n.cliHost,r,n.output),a&&s){let v=await _f(n.cliHost,r.rootFolderPath,n.output);v&&await YP(n.cliHost,r,n.cliHost.path.relative(v,ge(e.uri,n.cliHost.platform)),n.output)||(a=void 0)}if(a){let v=await so(n.cliHost,r,e.uri,n.output);(!v||!ze(v.config)&&!("image"in v.config))&&(a=void 0)}a&&(c=" Or: Clone repository in Docker volume for [better I/O performance](https://aka.ms/vscode-remote/containers/open-repo).")}let l;s?r.isWorkspaceFile?l="Workspace contains a Dev Container configuration file.":l="Folder contains a Dev Container configuration file.":l="There is a [Dev Container configuration](command:remote-containers.openDevContainerFile) available for this repository.";let u="Reopen in Container",d="Clone in Volume",f="Don't Show Again...",p=r.isWorkspaceFile?`${l} Reopen workspace to develop in a container ([learn more](https://aka.ms/vscode-remote/docker)).${c}`:`${l} Reopen folder to develop in a container ([learn more](https://aka.ms/vscode-remote/docker)).${c}`,h=a?[f,d,u]:[f,u];ece(i,e.location);let m=await L.window.showInformationMessage(p,...h);if(tce(i,m===u?"reopen":m===d?"openRepository":m===f?"dontShowAgain":"cancel",e.location),m===u){if(!await L.workspace.requestWorkspaceTrust({message:au})||!await gr(n,i))return;try{await Vm(t,r,n,i,!1,{forceReuseWindow:!0})}catch(y){await uo(y,"ui",i)}}else if(m===d){let v=await KP(n.cliHost,r,n.output),y="OK",C="Cancel";(!v||y===await L.window.showInformationMessage("Local changes not pushed to the Git remote will not be available in the Docker volume.",y,C))&&await L.window.withProgress({location:L.ProgressLocation.Notification,title:"Clone in Volume"},async(w,b)=>{w.report({message:"Follow the prompts at the top of the window."}),await L.commands.executeCommand(gh,a)})}else if(m===f){let v=r.isWorkspaceFile?"Any Workspace":"Any Folder",y=r.isWorkspaceFile?"Current Workspace":"Current Folder",C=r.isWorkspaceFile?"Don't show again for the current workspace or for any workspace?":"Don't show again for the current folder or for any folder?",w=await L.window.showInformationMessage(C,v,y);w===v?await t.globalState.update(zm,Date.now()):w===y&&await t.workspaceState.update(zm,Date.now())}}function ece(t,e){t.sendTelemetryEvent("reopenNotificationOpen",{location:e})}function tce(t,e,r){t.sendTelemetryEvent("reopenNotificationResult",{result:e,location:r})}function k_(t,e){return t===!1?t=1:t===void 0&&(t=-1),e===void 0&&(e=0),e<t}async function rce(t,e){let r=[{label:"C++",detail:"https://github.com/Microsoft/vscode-remote-try-cpp"},{label:"Go",detail:"https://github.com/Microsoft/vscode-remote-try-go"},{label:"Java",detail:"https://github.com/Microsoft/vscode-remote-try-java"},{label:".NET Core",detail:"https://github.com/Microsoft/vscode-remote-try-dotnetcore"},{label:"Node",detail:"https://github.com/Microsoft/vscode-remote-try-node"},{label:"PHP",detail:"https://github.com/Microsoft/vscode-remote-try-php"},{label:"Python",detail:"https://github.com/Microsoft/vscode-remote-try-python"},{label:"Rust",detail:"https://github.com/Microsoft/vscode-remote-try-rust"}],n={placeHolder:"Select a sample repository to clone in a container volume"},i=await L.window.showQuickPick(r,n);if(!i)return;let o=await qe(e);i.detail&&await Ju(t,i.detail,Kr,S_(i.detail),o)}async function nce(t){let e=await Promise.all((await wH(t)).map(async n=>{let i=await(0,b_.promisify)(Hm.stat)(n.path),o=n.time;return{label:n.prefix,description:`${yc(o.getFullYear())}-${yc(o.getMonth())}-${yc(o.getDay())} ${yc(o.getHours())}:${yc(o.getMinutes())}:${yc(o.getSeconds())} - ${i.size} bytes`,path:n.path}}));e.length||e.push({label:"No log files found."});let r=await L.window.showQuickPick(e,{placeHolder:"Choose a log file"});r&&r.path&&await L.window.showTextDocument(L.Uri.file(r.path))}function yc(t,e=2){let r=t.toString();for(;r.length<e;)r="0"+r;return r}async function ice(t,e,r){let n=(await wH(t)).find(i=>i.name.startsWith(e)&&i.path!==r);n?await L.window.showTextDocument(L.Uri.file(n.path)):await L.window.showInformationMessage("No previous log file found.",{modal:!0})}async function wH(t){let e=[],r=Ct.basename(t.logPath),n=Ct.dirname(Ct.dirname(Ct.dirname(t.logPath)));for(let i of(await P_(n)).sort().reverse()){let o=/(\d\d\d\d)(\d\d)(\d\d)T(\d\d)(\d\d)(\d\d)/.exec(i);if(o){let s=Ct.join(n,i);for(let a of await P_(s)){let c=Ct.join(s,a),l=Ct.join(c,r);for(let u of(await P_(l)).sort()){let d=Ct.join(l,u),f=/(\d\d\d\d)-(\d\d)-(\d\d)T(\d\d)[:\-](\d\d)[:\-](\d\d)\.(\d\d\d)Z/.exec(u),p=f?new Date(`${f[1]}-${f[2]}-${f[3]}T${f[4]}:${f[5]}:${f[6]}.${f[7]}Z`):new Date(`${o[1]}-${o[2]}-${o[3]}T${o[4]}:${o[5]}:${o[6]}Z`);e.push({name:u,path:d,time:p,prefix:f?u.substr(0,f.index-1):u.substr(0,u.length-4)})}}}}return e.sort((i,o)=>i.time>o.time?-1:i.time<o.time?1:i.path.localeCompare(o.path)),e}async function P_(t){try{return await(0,b_.promisify)(Hm.readdir)(t)}catch(e){return[]}}0&&(module.exports={activate,attachToContainer,deactivate});
/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */
//# sourceMappingURL=extension.js.map
