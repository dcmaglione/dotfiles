(()=>{var __webpack_modules__={5233:(e,t,r)=>{"use strict";e.exports=function(e,t){var n,i,o={},s={},a=!1,c=r(5622);function l(e,t){var r;return e&&"."===e.charAt(0)&&t&&(function(e){var t,r;for(t=0;e[t];t+=1)if("."===(r=e[t]))e.splice(t,1),t-=1;else if(".."===r){if(1===t&&(".."===e[2]||".."===e[0]))break;t>0&&(e.splice(t-1,2),t-=2)}}(r=(r=(r=t.split("/")).slice(0,r.length-1)).concat(e.split("/"))),e=r.join("/")),e}function u(r,i,o){var c,l,u,d;if(r)l=s[r]={},u={id:r,uri:__filename,exports:l},c=n(t,l,u,r);else{if(a)throw new Error("amdefine with no module ID cannot be called more than once per file.");a=!0,l=e.exports,c=n(t,l,u=e,e.id)}i&&(i=i.map((function(e){return c(e)}))),void 0!==(d="function"==typeof o?o.apply(u.exports,i):o)&&(u.exports=d,r&&(s[r]=u.exports))}function d(e,t,r){Array.isArray(e)?(r=t,t=e,e=void 0):"string"!=typeof e&&(r=e,e=t=void 0),t&&!Array.isArray(t)&&(r=t,t=void 0),t||(t=["require","exports","module"]),e?o[e]=[e,t,r]:u(e,t,r)}return n=function(e,t,r,n){function o(o,s){if("string"==typeof o)return i(e,t,r,o,n);o=o.map((function(o){return i(e,t,r,o,n)})),s&&process.nextTick((function(){s.apply(null,o)}))}return o.toUrl=function(e){return 0===e.indexOf(".")?l(e,c.dirname(r.filename)):e},o},t=t||function(){return e.require.apply(e,arguments)},i=function(e,t,r,a,c){var d,h,p,f=a.indexOf("!"),g=a;if(-1===f){if("require"===(a=l(a,c)))return n(e,t,r,c);if("exports"===a)return t;if("module"===a)return r;if(s.hasOwnProperty(a))return s[a];if(o[a])return u.apply(null,o[a]),s[a];if(e)return e(g);throw new Error("No module with ID: "+a)}return d=a.substring(0,f),a=a.substring(f+1,a.length),a=(h=i(e,t,r,d,c)).normalize?h.normalize(a,(p=c,function(e){return l(e,p)})):l(a,c),s[a]||h.load(a,n(e,t,r,c),function(e){function t(t){s[e]=t}return t.fromText=function(e,t){throw new Error("amdefine does not implement load.fromText")},t}(a),{}),s[a]},d.require=function(e){return s[e]?s[e]:o[e]?(u.apply(null,o[e]),s[e]):void 0},d.amd={},d}},35:e=>{var t=function(){function e(t){if(e.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=t,e.INSTANCE=this}return e.prototype.enable=function(e){},e.prototype.isInitialized=function(){return this._isInitialized},e._methodNames=["debug","info","log","warn","error"],e}();e.exports=t},5756:(e,t,r)=>{var n=r(9971),i=r(2323),o=function(){function e(t){if(e.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t}return e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.enable=function(t){var r=this;if(t){this._isInitialized=!0;this._exceptionListenerHandle||(this._exceptionListenerHandle=function(t){var n=e.getExceptionData(t,!1),i=r._client.getEnvelope(n);throw r._client.channel.handleCrash(i),t},process.on("uncaughtException",this._exceptionListenerHandle))}else this._exceptionListenerHandle&&(process.removeListener("uncaughtException",this._exceptionListenerHandle),this._exceptionListenerHandle=void 0,delete this._exceptionListenerHandle)},e.getExceptionData=function(e,t,r){var o=new n.Contracts.ExceptionData;o.handledAt=t?"User":"Unhandled",o.properties=r,o.severityLevel=n.Contracts.SeverityLevel.Error,o.properties=r,o.exceptions=[];var s=e.stack,a=new n.Contracts.ExceptionDetails;a.message=e.message,a.typeName=e.name,a.parsedStack=this.parseStack(s),a.hasFullStack=i.isArray(a.parsedStack)&&a.parsedStack.length>0,o.exceptions.push(a);var c=new n.Contracts.Data;return c.baseType="Microsoft.ApplicationInsights.ExceptionData",c.baseData=o,c},e.parseStack=function(e){var t=void 0;if("string"==typeof e){var r=e.split("\n");t=[];for(var n=0,i=0,o=0;o<=r.length;o++){var a=r[o];if(s.regex.test(a)){var c=new s(r[o],n++);i+=c.sizeInBytes,t.push(c)}}if(i>32768)for(var l=0,u=t.length-1,d=0,h=l,p=u;l<u;){if((d+=t[l].sizeInBytes+t[u].sizeInBytes)>32768){var f=p-h+1;t.splice(h,f);break}h=l,p=u,l++,u--}}return t},e.INSTANCE=null,e}(),s=function(){function e(t,r){this.sizeInBytes=0,this.level=r,this.method="unavailable",this.assembly=i.trim(t);var n=t.match(e.regex);n&&n.length>=5&&(this.method=i.trim(n[2]),this.fileName=i.trim(n[4]),this.line=parseInt(n[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=e.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return e.regex=/^([\s]+at)?(.*?)(\@|\s\(|\s)([^\(\@\n]+):([0-9]+):([0-9]+)(\)?)$/,e.baseSize=58,e}();e.exports=o},8182:(e,t,r)=>{var n,i=r(8605),o=r(2087),s=r(9971),a=r(8623);!function(e){e[e.ProcessorTime=0]="ProcessorTime",e[e.AvailableMemory=1]="AvailableMemory",e[e.RequestsPerSec=2]="RequestsPerSec",e[e.PrivateBytes=3]="PrivateBytes",e[e.RequestExecutionTime=4]="RequestExecutionTime",e[e.PercentProcessorTime=5]="PercentProcessorTime"}(n||(n={}));var c=function(){function e(t){if(e.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._isInitialized=!1,this._client=t}return e.prototype.enable=function(t){var r=this;this._isEnabled=t,this._isEnabled&&!this._isInitialized&&this._initialize(),t?this._handle||(this._lastCpus=o.cpus(),this._lastRequests={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date},this._handle=setInterval((function(){return r.trackPerformance()}),1e4)):this._handle&&(clearInterval(this._handle),this._handle=void 0)},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype._initialize=function(){var t=this;this._isInitialized=!0;var r=i.createServer;i.createServer=function(n){return r((function(r,i){t._isEnabled&&e.countRequest(r,i),"function"==typeof n&&n(r,i)}))}},e.countRequest=function(t,r){var n=this,i=+new Date;t&&r?"function"==typeof r.once&&r.once("finish",(function(){var t=+new Date;n._lastRequestExecutionTime=t-i,e._totalRequestCount++,r.statusCode>=400&&e._totalFailedRequestCount++})):a.warn("AutoCollectPerformance.countRequest was called with invalid parameters: ",!!t,!!r)},e.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork()},e.prototype._trackLegacyPerformance=function(e,t){var r=new s.Contracts.PerformanceCounterData;switch(e){case n.ProcessorTime:r.categoryName="Process",r.counterName="% Processor Time";break;case n.AvailableMemory:r.categoryName="Memory",r.counterName="Available Bytes";break;case n.RequestsPerSec:r.categoryName="ASP.NET Applications",r.counterName="Requests/Sec";break;case n.PrivateBytes:r.categoryName="Process",r.counterName="Private Bytes";break;case n.RequestExecutionTime:r.categoryName="ASP.NET Applications",r.counterName="Request Execution Time";break;case n.PercentProcessorTime:r.categoryName="Processor",r.counterName="% Processor Time"}r.count=1,r.kind=s.Contracts.DataPointType.Aggregation,r.max=t,r.min=t,r.stdDev=0,r.value=t;var i=new s.Contracts.Data;i.baseType="Microsoft.ApplicationInsights.PerformanceCounterData",i.baseData=r,this._client.track(i)},e.prototype._trackCpu=function(){var e=o.cpus();if(e&&e.length&&this._lastCpus&&e.length===this._lastCpus.length){for(var t=0,r=0,i=0,s=0,a=0,c=0;e&&c<e.length;c++){var l=e[c],u=this._lastCpus[c],d="% cpu["+c+"] ",h=(l.model,l.speed,l.times),p=u.times,f=h.user-p.user||0;t+=f;var g=h.sys-p.sys||0;r+=g;var m=h.nice-p.nice||0;i+=m;var _=h.idle-p.idle||0;s+=_;var E=h.irq-p.irq||0;a+=E;var v=f+g+m+_+E||1;this._client.trackMetric(d+"user",f/v)}var y=t+r+i+s+a||1;this._client.trackMetric("% total cpu user",t/y),this._client.trackMetric("% total cpu sys",r/y),this._client.trackMetric("% total cpu nice",i/y),this._client.trackMetric("% total cpu idle",s/y),this._client.trackMetric("% total cpu irq",a/y),this._trackLegacyPerformance(n.ProcessorTime,t/y),this._trackLegacyPerformance(n.PercentProcessorTime,(y-s)/y)}this._lastCpus=e},e.prototype._trackMemory=function(){var e=o.totalmem(),t=o.freemem(),r=e-t,i=r/(e||1),s=t/(e||1);this._client.trackMetric("Memory Used",r),this._client.trackMetric("Memory Free",t),this._client.trackMetric("Memory Total",e),this._client.trackMetric("% Memory Used",i),this._client.trackMetric("% Memory Free",s),this._trackLegacyPerformance(n.AvailableMemory,t),this._trackLegacyPerformance(n.PrivateBytes,r)},e.prototype._trackNetwork=function(){var t=this._lastRequests,r={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date},i=r.totalRequestCount-t.totalRequestCount||0,o=r.totalFailedRequestCount-t.totalFailedRequestCount||0,s=r.time-t.time,a=s/1e3;if(s>0){var c=i/a,l=o/a;this._client.trackMetric("Total Requests",r.totalRequestCount),this._client.trackMetric("Total Failed Requests",r.totalFailedRequestCount),this._client.trackMetric("Requests per Second",c),this._client.trackMetric("Failed Requests per Second",l),this._client.trackMetric("Last Request Execution Time",e._lastRequestExecutionTime),this._trackLegacyPerformance(n.RequestsPerSec,c),this._trackLegacyPerformance(n.RequestExecutionTime,e._lastRequestExecutionTime)}this._lastRequests=r},e._totalRequestCount=0,e._totalFailedRequestCount=0,e._lastRequestExecutionTime=0,e}();e.exports=c},234:(e,t,r)=>{var n=r(8835),i=r(9971),o=r(2323),s=function(){function e(e){e&&(this.method=e.method,this.url=e.url,this.startTime=+new Date,this.rawHeaders=e.headers||e.rawHeaders,this.socketRemoteAddress=e.socket&&e.socket.remoteAddress,this.userAgent=e.headers&&e.headers["user-agent"],e.connection&&(this.connectionRemoteAddress=e.connection.remoteAddress,this.legacySocketRemoteAddress=e.connection.socket&&e.connection.socket.remoteAddress))}return e.prototype.onResponse=function(e,t){this.endTime=+new Date,this.statusCode=e.statusCode,this.errorProperties=t},e.prototype.getRequestData=function(){var e=this.endTime-this.startTime,t=new i.Contracts.RequestData;t.httpMethod=this.method,t.id=o.newGuid(),t.name=this.method+" "+n.parse(this.url).pathname,t.startTime=new Date(this.startTime).toISOString(),t.url=this.url,t.duration=o.msToTimeSpan(e),t.responseCode=this.statusCode.toString(),t.success=this._isSuccess(this.statusCode),t.properties=this.errorProperties;var r=new i.Contracts.Data;return r.baseType="Microsoft.ApplicationInsights.RequestData",r.baseData=t,r},e.prototype.getRequestTags=function(t){var r={};for(var n in t)r[n]=t[n];return r[e.keys.locationIp]=this._getIp(),r[e.keys.sessionId]=this._getSessionId(),r[e.keys.userAgent]=this.userAgent,r},e.prototype._isSuccess=function(e){return e<400&&!this.errorProperties},e.prototype._getIp=function(){var e=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,t=function(t){var r=e.exec(t);if(r)return r[0]},r=t(this.rawHeaders["x-forwarded-for"])||t(this.rawHeaders["x-client-ip"])||t(this.rawHeaders["x-real-ip"])||t(this.connectionRemoteAddress)||t(this.socketRemoteAddress)||t(this.legacySocketRemoteAddress);return!r&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&"::"===this.connectionRemoteAddress.substr(0,2)&&(r="127.0.0.1"),r},e.prototype._getSessionId=function(){var t=this.rawHeaders&&this.rawHeaders.cookie&&"string"==typeof this.rawHeaders.cookie&&this.rawHeaders.cookie||"";return e.parseSessionId(o.getCookie("ai_session",t))},e.parseSessionId=function(e){return e.substr(0,e.indexOf("|"))},e.keys=new i.Contracts.ContextTagKeys,e}();e.exports=s},5126:(e,t,r)=>{var n=r(8605),i=r(8623),o=r(234),s=function(){function e(t){if(e.INSTANCE)throw new Error("Request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t}return e.prototype.enable=function(e){this._isEnabled=e,this._isEnabled&&!this._isInitialized&&this._initialize()},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype._initialize=function(){var t=this;this._isInitialized=!0;var r=n.createServer;n.createServer=function(n){return r((function(r,i){t._isEnabled&&e.trackRequest(t._client,r,i),"function"==typeof n&&n(r,i)}))}},e.trackRequest=function(e,t,r,n){if(t&&r&&e){var s=new o(t),a=function(t){setTimeout((function(){s.onResponse(r,n);var t=s.getRequestData(),i=s.getRequestTags(e.context.tags);e.track(t,i)}),0)};r&&r.once&&r.once("finish",(function(){return a()})),t&&t.on&&t.on("error",(function(e){if(n||(n={}),e)if("string"==typeof e)n.erorr=e;else if("object"==typeof e)for(var t in e)n[t]=e[t]&&e[t].toString&&e[t].toString();a()}))}else i.info("AutoCollectRequests.trackRequest was called with invalid parameters: ",!t,!r,!e)},e}();e.exports=s},5502:(e,t,r)=>{var n=r(8623),i=function(){function e(e,t,r,n){this._buffer=[],this._lastSend=0,this._isDisabled=e,this._getBatchSize=t,this._getBatchIntervalMs=r,this._sender=n}return e.prototype.setOfflineMode=function(e){this._sender.setOfflineMode(e)},e.prototype.send=function(e){var t=this;if(!this._isDisabled())if(e){var r=this._stringify(e);"string"==typeof r&&(this._buffer.push(r),this._buffer.length>=this._getBatchSize()?this.triggerSend(!1):!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout((function(){t._timeoutHandle=null,t.triggerSend(!1)}),this._getBatchIntervalMs())))}else n.warn("Cannot send null/undefined telemetry")},e.prototype.handleCrash=function(e){if(e){var t=this._stringify(e);"string"==typeof t?(this._buffer.push(t),this.triggerSend(!0)):n.warn("Could not send crash",e)}else n.warn("handleCrash was called with empty payload",e)},e.prototype.triggerSend=function(e,t){if(this._buffer.length){var r=this._buffer.join("\n");e?this._sender.saveOnCrash(r):this._sender.send(new Buffer(r),t)}this._lastSend=+new Date,this._buffer.length=0,clearTimeout(this._timeoutHandle),this._timeoutHandle=null},e.prototype._stringify=function(e){try{return JSON.stringify(e)}catch(t){n.warn("Failed to serialize payload",t,e)}},e}();e.exports=i},5418:(e,t,r)=>{var n=r(8035),i=r(8155),o=r(5756),s=r(9971),a=r(5502),c=r(5126),l=r(9717),u=r(2323),d=function(){function e(e){var t=new n(e);this.config=t,this.context=new i,this.commonProperties={};var r=new l((function(){return t.endpointUrl}));this.channel=new a((function(){return t.disableAppInsights}),(function(){return t.maxBatchSize}),(function(){return t.maxBatchIntervalMs}),r)}return e.prototype.trackEvent=function(e,t,r){var n=new s.Contracts.EventData;n.name=e,n.properties=t,n.measurements=r;var i=new s.Contracts.Data;i.baseType="EventData",i.baseData=n,this.track(i)},e.prototype.trackTrace=function(e,t,r){var n=new s.Contracts.MessageData;n.message=e,n.properties=r,isNaN(t)?n.severityLevel=s.Contracts.SeverityLevel.Information:n.severityLevel=t;var i=new s.Contracts.Data;i.baseType="MessageData",i.baseData=n,this.track(i)},e.prototype.trackException=function(e,t){u.isError(e)||(e=new Error(e));var r=o.getExceptionData(e,!0,t);this.track(r)},e.prototype.trackMetric=function(e,t,r,n,i,o){var a=new s.Contracts.MetricData;a.metrics=[];var c=new s.Contracts.DataPoint;c.count=isNaN(r)?1:r,c.kind=s.Contracts.DataPointType.Aggregation,c.max=isNaN(i)?t:i,c.min=isNaN(n)?t:n,c.name=e,c.stdDev=isNaN(o)?0:o,c.value=t,a.metrics.push(c);var l=new s.Contracts.Data;l.baseType="MetricData",l.baseData=a,this.track(l)},e.prototype.trackRequest=function(e,t,r){c.trackRequest(this,e,t,r)},e.prototype.sendPendingData=function(e){this.channel.triggerSend(!1,e)},e.prototype.getEnvelope=function(t,r){if(t&&t.baseData)if(t.baseData.ver=2,t.baseData.properties)for(var n in this.commonProperties)t.baseData.properties[n]||(t.baseData.properties[n]=this.commonProperties[n]);else t.baseData.properties=this.commonProperties;t.baseData.properties=u.validateStringMap(t.baseData.properties);var i=new s.Contracts.Envelope;return i.data=t,i.appVer=this.context.tags[this.context.keys.applicationVersion],i.iKey=this.config.instrumentationKey,i.name="Microsoft.ApplicationInsights."+t.baseType.substr(0,t.baseType.length-4),i.os=this.context.tags[this.context.keys.deviceOS],i.osVer=this.context.tags[this.context.keys.deviceOSVersion],i.seq=(e._sequenceNumber++).toString(),i.tags=r||this.context.tags,i.time=(new Date).toISOString(),i.ver=1,i},e.prototype.track=function(e,t){var r=this.getEnvelope(e,t);this.channel.send(r)},e._sequenceNumber=0,e}();e.exports=d},8035:e=>{var t=function(){function e(e){this.instrumentationKey=e||this._getInstrumentationKey(),this.endpointUrl="http://dc.services.visualstudio.com/v2/track",this.sessionRenewalMs=18e5,this.sessionExpirationMs=864e5,this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1}return e.prototype._getInstrumentationKey=function(){var t=process.env[e.ENV_iKey]||process.env[e.ENV_azurePrefix+e.ENV_iKey]||process.env[e.legacy_ENV_iKey]||process.env[e.ENV_azurePrefix+e.legacy_ENV_iKey];if(!t||""==t)throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return t},e.ENV_azurePrefix="APPSETTING_",e.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",e.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",e}();e.exports=t},8155:(e,t,r)=>{var n=r(2087),i=r(9971),o=r(8623),s=function(){function e(e){this.keys=new i.Contracts.ContextTagKeys,this.tags={},this._loadApplicationContext(),this._loadDeviceContext(),this._loadInternalContext()}return e.prototype._loadApplicationContext=function(e){var t="unknown",n=void 0;try{var i=r(8599)(e||"../../../package.json");i&&("string"==typeof i.version&&(t=i.version),"string"==typeof i.description&&(n=i.description))}catch(e){o.info("unable to read app version: ",e)}this.tags[this.keys.applicationVersion]=t,n&&(this.tags[this.keys.applicationBuild]=n)},e.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="node",this.tags[this.keys.deviceMachineName]=n&&n.hostname(),this.tags[this.keys.deviceOS]=n&&n.type(),this.tags[this.keys.deviceOSVersion]=n&&n.release(),this.tags[this.keys.deviceType]="server",this.tags["ai.device.osArchitecture"]=n&&n.arch(),this.tags["ai.device.osPlatform"]=n&&n.platform()},e.prototype._loadInternalContext=function(){var e="unknown";try{var t=r(2197);t&&"string"==typeof t.version&&(e=t.version)}catch(e){o.info("unable to read SDK version: "+e)}this.tags[this.keys.internalSdkVersion]="node:"+e||0},e}();e.exports=s},9971:function(e,t){var r=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};!function(e){!function(e){e[e.Measurement=0]="Measurement",e[e.Aggregation=1]="Aggregation"}(e.DataPointType||(e.DataPointType={}));var t=e.DataPointType;!function(e){e[e.SQL=0]="SQL",e[e.Http=1]="Http",e[e.Other=2]="Other"}(e.DependencyKind||(e.DependencyKind={}));e.DependencyKind;!function(e){e[e.Undefined=0]="Undefined",e[e.Aic=1]="Aic",e[e.Apmc=2]="Apmc"}(e.DependencySourceType||(e.DependencySourceType={}));e.DependencySourceType;!function(e){e[e.Start=0]="Start",e[e.End=1]="End"}(e.SessionState||(e.SessionState={}));e.SessionState;!function(e){e[e.Verbose=0]="Verbose",e[e.Information=1]="Information",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e[e.Critical=4]="Critical"}(e.SeverityLevel||(e.SeverityLevel={}));e.SeverityLevel;var n=function(){this.applicationVersion="ai.application.ver",this.applicationBuild="ai.application.build",this.deviceId="ai.device.id",this.deviceIp="ai.device.ip",this.deviceLanguage="ai.device.language",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceNetwork="ai.device.network",this.deviceOEMName="ai.device.oemName",this.deviceOS="ai.device.os",this.deviceOSVersion="ai.device.osVersion",this.deviceRoleInstance="ai.device.roleInstance",this.deviceRoleName="ai.device.roleName",this.deviceScreenResolution="ai.device.screenResolution",this.deviceType="ai.device.type",this.deviceMachineName="ai.device.machineName",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationRootId="ai.operation.rootId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationIsSynthetic="ai.operation.isSynthetic",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.sessionIsNew="ai.session.isNew",this.userAccountAcquisitionDate="ai.user.accountAcquisitionDate",this.userAccountId="ai.user.accountId",this.userAgent="ai.user.userAgent",this.userId="ai.user.id",this.userStoreRegion="ai.user.storeRegion",this.sampleRate="ai.sample.sampleRate",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion"};e.ContextTagKeys=n;var i=function(){};e.Domain=i;var o=function(){};e.Data=o;var s=function(){this.ver=1,this.sampleRate=100,this.tags={}};e.Envelope=s;var a=function(e){function t(){this.ver=2,this.properties={},this.measurements={},e.call(this)}return r(t,e),t}(e.Domain);e.EventData=a;var c=function(e){function t(){this.ver=2,this.properties={},e.call(this)}return r(t,e),t}(e.Domain);e.MessageData=c;var l=function(e){function t(){this.ver=2,this.exceptions=[],this.properties={},this.measurements={},e.call(this)}return r(t,e),t}(e.Domain);e.ExceptionData=l;var u=function(){};e.StackFrame=u;var d=function(){this.hasFullStack=!0,this.parsedStack=[]};e.ExceptionDetails=d;var h=function(){this.kind=e.DataPointType.Measurement};e.DataPoint=h;var p=function(e){function t(){this.ver=2,this.metrics=[],this.properties={},e.call(this)}return r(t,e),t}(e.Domain);e.MetricData=p;var f=function(e){function t(){this.ver=2,this.properties={},this.measurements={},e.call(this)}return r(t,e),t}(e.EventData);e.PageViewData=f;var g=function(e){function t(){this.ver=2,this.properties={},this.measurements={},e.call(this)}return r(t,e),t}(e.PageViewData);e.PageViewPerfData=g;var m=function(t){function n(){this.ver=2,this.kind=e.DataPointType.Measurement,this.dependencyKind=e.DependencyKind.Other,this.success=!0,this.dependencySource=e.DependencySourceType.Undefined,this.properties={},t.call(this)}return r(n,t),n}(e.Domain);e.RemoteDependencyData=m;var _=function(e){function t(){this.ver=2,this.properties={},this.measurements={},e.call(this)}return r(t,e),t}(e.PageViewData);e.AjaxCallData=_;var E=function(e){function t(){this.ver=2,this.properties={},this.measurements={},e.call(this)}return r(t,e),t}(e.Domain);e.RequestData=E;var v=function(t){function n(){this.ver=2,this.state=e.SessionState.Start,t.call(this)}return r(n,t),n}(e.Domain);e.SessionStateData=v;var y=function(e){function n(){this.ver=2,this.kind=t.Aggregation,this.properties={},e.call(this)}return r(n,e),n}(e.Domain);e.PerformanceCounterData=y}(t.Contracts||(t.Contracts={}))},8623:e=>{var t=function(){function e(){}return e.info=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.enableDebug&&console.info(e.TAG+t,r)},e.warn=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.disableWarnings||console.warn(e.TAG+t,r)},e.enableDebug=!1,e.disableWarnings=!1,e.TAG="ApplicationInsights:",e}();e.exports=t},9717:(e,t,r)=>{var n=r(5747),i=r(8605),o=r(7211),s=r(2087),a=r(5622),c=r(8835),l=r(8761),u=r(8623),d=function(){function e(e,t,r){this._getUrl=e,this._onSuccess=t,this._onError=r,this._enableOfflineMode=!1}return e.prototype.setOfflineMode=function(e){this._enableOfflineMode=e},e.prototype.send=function(t,r){var n=this,s=this._getUrl();s&&0===s.indexOf("//")&&(s="https:"+s);var a=c.parse(s),d={host:a.hostname,port:a.port,path:a.pathname,method:"POST",headers:{"Content-Type":"application/x-json-stream"}},h="https:"==a.protocol?o:i;l.gzip(t,(function(i,o){var s=o;i?(u.warn(i),s=t,d.headers["Content-Length"]=t.length):(d.headers["Content-Encoding"]="gzip",d.headers["Content-Length"]=o.length),u.info(e.TAG,d);var a=h.request(d,(function(i){i.setEncoding("utf-8");var o="";i.on("data",(function(e){o+=e})),i.on("end",(function(){u.info(e.TAG,o),"function"==typeof n._onSuccess&&n._onSuccess(o),"function"==typeof r&&r(o),n._enableOfflineMode&&(200===i.statusCode?setTimeout((function(){return n._sendFirstFileOnDisk()}),e.WAIT_BETWEEN_RESEND):206!==i.statusCode&&429!==i.statusCode&&439!==i.statusCode||n._storeToDisk(t))}))}));a.on("error",(function(i){if(u.warn(e.TAG,i),n._onErrorHelper(i),"function"==typeof r){var o="error sending telemetry";i&&"function"==typeof i.toString&&(o=i.toString()),r(o)}n._enableOfflineMode&&n._storeToDisk(t)})),a.write(s),a.end()}))},e.prototype.saveOnCrash=function(e){this._storeToDiskSync(e)},e.prototype._confirmDirExists=function(e,t){n.exists(e,(function(r){r?t(null):n.mkdir(e,(function(e){t(e)}))}))},e.prototype._storeToDisk=function(t){var r=this,i=a.join(s.tmpDir(),e.TEMPDIR);this._confirmDirExists(i,(function(o){if(o)r._onErrorHelper(o);else{var s=(new Date).getTime()+".ai.json",c=a.join(i,s);u.info(e.TAG,"saving data to disk at: "+c),n.writeFile(c,t,(function(e){return r._onErrorHelper(e)}))}}))},e.prototype._storeToDiskSync=function(t){var r=a.join(s.tmpDir(),e.TEMPDIR);try{n.existsSync(r)||n.mkdirSync(r);var i=(new Date).getTime()+".ai.json",o=a.join(r,i);u.info(e.TAG,"saving data before crash to disk at: "+o),n.writeFileSync(o,t)}catch(e){this._onErrorHelper(e)}},e.prototype._sendFirstFileOnDisk=function(){var t=this,r=a.join(s.tmpDir(),e.TEMPDIR);n.exists(r,(function(e){e&&n.readdir(r,(function(e,i){if(e)t._onErrorHelper(e);else if((i=i.filter((function(e){return a.basename(e).indexOf(".ai.json")>-1}))).length>0){var o=i[0],s=a.join(r,o);n.readFile(s,(function(e,r){e?t._onErrorHelper(e):n.unlink(s,(function(e){e?t._onErrorHelper(e):t.send(r)}))}))}}))}))},e.prototype._onErrorHelper=function(e){"function"==typeof this._onError&&this._onError(e)},e.TAG="Sender",e.WAIT_BETWEEN_RESEND=6e4,e.TEMPDIR="appInsights-node",e}();e.exports=d},2323:(e,t,r)=>{var n=r(8623),i=function(){function e(){}return e.getCookie=function(t,r){var n="";if(t&&t.length&&"string"==typeof r)for(var i=t+"=",o=r.split(";"),s=0;s<o.length;s++){r=o[s];if((r=e.trim(r))&&0===r.indexOf(i)){n=r.substring(i.length,o[s].length);break}}return n},e.trim=function(e){return"string"==typeof e?e.replace(/^\s+|\s+$/g,""):""},e.newGuid=function(){for(var e,t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],r="",n=0;n<4;n++)r+=t[15&(e=4294967296*Math.random()|0)]+t[e>>4&15]+t[e>>8&15]+t[e>>12&15]+t[e>>16&15]+t[e>>20&15]+t[e>>24&15]+t[e>>28&15];var i=t[8+4*Math.random()|0];return r.substr(0,8)+"-"+r.substr(9,4)+"-4"+r.substr(13,3)+"-"+i+r.substr(16,3)+"-"+r.substr(19,12)},e.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},e.isError=function(e){return"[object Error]"===Object.prototype.toString.call(e)},e.isDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)},e.msToTimeSpan=function(e){(isNaN(e)||e<0)&&(e=0);var t=""+e%1e3,r=""+Math.floor(e/1e3)%60,n=""+Math.floor(e/6e4)%60,i=""+Math.floor(e/36e5)%24;return t=1===t.length?"00"+t:2===t.length?"0"+t:t,r=r.length<2?"0"+r:r,n=n.length<2?"0"+n:n,(i=i.length<2?"0"+i:i)+":"+n+":"+r+"."+t},e.validateStringMap=function(t){var r;if("object"==typeof t)for(var i in r={},t){var o=t[i],s=typeof o;"string"!==s&&(o=o&&"function"==typeof o.toString?o.toString():"invalid property type: "+s),r[i]=o.trim(0,e.MAX_PROPERTY_LENGTH)}else n.info("Invalid properties dropped from payload");return r},e.MAX_PROPERTY_LENGTH=1024,e.document="undefined"!=typeof document?document:{},e}();e.exports=i},8599:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=8599,e.exports=t},2521:(e,t,r)=>{var n=r(35),i=r(5756),o=r(8182),s=r(5126),a=r(5418),c=r(8623),l=function(){function e(){}return e.getClient=function(e){return new a(e)},e.setup=function(t){return e.client?c.info("The default client is already setup"):(e.client=e.getClient(t),e._console=new n(e.client),e._exceptions=new i(e.client),e._performance=new o(e.client),e._requests=new s(e.client)),e.client&&e.client.channel&&e.client.channel.setOfflineMode(e._isOfflineMode),e},e.start=function(){return this.client?(e._isStarted=!0,e._console.enable(e._isConsole),e._exceptions.enable(e._isExceptions),e._performance.enable(e._isPerformance),e._requests.enable(e._isRequests)):c.warn("Start cannot be called before setup"),e},e.setAutoCollectConsole=function(t){return e._isConsole=t,e._isStarted&&e._console.enable(t),e},e.setAutoCollectExceptions=function(t){return e._isExceptions=t,e._isStarted&&e._exceptions.enable(t),e},e.setAutoCollectPerformance=function(t){return e._isPerformance=t,e._isStarted&&e._performance.enable(t),e},e.setAutoCollectRequests=function(t){return e._isRequests=t,e._isStarted&&e._requests.enable(t),e},e.setOfflineMode=function(t){return e._isOfflineMode=t,e.client&&e.client.channel&&e.client.channel.setOfflineMode(t),e},e.enableVerboseLogging=function(){return c.enableDebug=!0,e},e._isConsole=!0,e._isExceptions=!0,e._isPerformance=!0,e._isRequests=!0,e._isOfflineMode=!1,e._isStarted=!1,e}();e.exports=l},2197:e=>{"use strict";e.exports=JSON.parse('{"name":"applicationinsights","license":"MIT","bugs":"https://github.com/Microsoft/ApplicationInsights-node.js/issues","version":"0.15.6","description":"Microsoft Application Insights module for Node.JS","repository":{"type":"git","url":"https://github.com/Microsoft/ApplicationInsights-node.js"},"main":"applicationinsights","keywords":["exception monitoring","request monitoring","performance monitoring","application insights","microsoft","azure"],"contributors":[{"name":"scsouthw","email":"scsouthw@microsoft.com"},{"name":"bogdanbe","email":"bogdanbe@microsoft.com"}],"scripts":{"prepublish":"tsc --module commonjs --declaration applicationinsights.ts","pretest":"find Tests -type f -name \\"*.ts\\" | xargs tsc --module commonjs","test":"./node_modules/mocha/bin/mocha ./Tests --recursive"},"devDependencies":{"async":"^0.9.0","chai":"^2.3.0","mocha":"^2.2.4","node-mocks-http":"^1.2.3","sinon":"^1.14.1","typescript":"^1.0.1"},"_resolved":"https://registry.npmjs.org/applicationinsights/-/applicationinsights-0.15.6.tgz","_integrity":"sha1-IBoGgsBwT+S92aktCyy+NNKuWXI=","_from":"applicationinsights@0.15.6"}')},3825:e=>{"use strict";function t(e){return Buffer.from(e,"base64").toString("binary")}e.exports=t.atob=t},5623:e=>{"use strict";function t(e,t,i){e instanceof RegExp&&(e=r(e,i)),t instanceof RegExp&&(t=r(t,i));var o=n(e,t,i);return o&&{start:o[0],end:o[1],pre:i.slice(0,o[0]),body:i.slice(o[0]+e.length,o[1]),post:i.slice(o[1]+t.length)}}function r(e,t){var r=t.match(e);return r?r[0]:null}function n(e,t,r){var n,i,o,s,a,c=r.indexOf(e),l=r.indexOf(t,c+1),u=c;if(c>=0&&l>0){if(e===t)return[c,l];for(n=[],o=r.length;u>=0&&!a;)u==c?(n.push(u),c=r.indexOf(e,u+1)):1==n.length?a=[n.pop(),l]:((i=n.pop())<o&&(o=i,s=l),l=r.indexOf(t,u+1)),u=c<l&&c>=0?c:l;n.length&&(a=[o,s])}return a}e.exports=t,t.range=n},3644:(e,t,r)=>{var n=r(1048),i=r(5623);e.exports=function(e){if(!e)return[];"{}"===e.substr(0,2)&&(e="\\{\\}"+e.substr(2));return _(function(e){return e.split("\\\\").join(o).split("\\{").join(s).split("\\}").join(a).split("\\,").join(c).split("\\.").join(l)}(e),!0).map(d)};var o="\0SLASH"+Math.random()+"\0",s="\0OPEN"+Math.random()+"\0",a="\0CLOSE"+Math.random()+"\0",c="\0COMMA"+Math.random()+"\0",l="\0PERIOD"+Math.random()+"\0";function u(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function d(e){return e.split(o).join("\\").split(s).join("{").split(a).join("}").split(c).join(",").split(l).join(".")}function h(e){if(!e)return[""];var t=[],r=i("{","}",e);if(!r)return e.split(",");var n=r.pre,o=r.body,s=r.post,a=n.split(",");a[a.length-1]+="{"+o+"}";var c=h(s);return s.length&&(a[a.length-1]+=c.shift(),a.push.apply(a,c)),t.push.apply(t,a),t}function p(e){return"{"+e+"}"}function f(e){return/^-?0\d/.test(e)}function g(e,t){return e<=t}function m(e,t){return e>=t}function _(e,t){var r=[],o=i("{","}",e);if(!o||/\$$/.test(o.pre))return[e];var s,c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(o.body),l=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(o.body),d=c||l,E=o.body.indexOf(",")>=0;if(!d&&!E)return o.post.match(/,.*\}/)?_(e=o.pre+"{"+o.body+a+o.post):[e];if(d)s=o.body.split(/\.\./);else if(1===(s=h(o.body)).length&&1===(s=_(s[0],!1).map(p)).length)return(S=o.post.length?_(o.post,!1):[""]).map((function(e){return o.pre+s[0]+e}));var v,y=o.pre,S=o.post.length?_(o.post,!1):[""];if(d){var b=u(s[0]),T=u(s[1]),P=Math.max(s[0].length,s[1].length),A=3==s.length?Math.abs(u(s[2])):1,w=g;T<b&&(A*=-1,w=m);var R=s.some(f);v=[];for(var C=b;w(C,T);C+=A){var I;if(l)"\\"===(I=String.fromCharCode(C))&&(I="");else if(I=String(C),R){var O=P-I.length;if(O>0){var N=new Array(O+1).join("0");I=C<0?"-"+N+I.slice(1):N+I}}v.push(I)}}else v=n(s,(function(e){return _(e,!1)}));for(var M=0;M<v.length;M++)for(var k=0;k<S.length;k++){var D=y+v[M]+S[k];(!t||d||D)&&r.push(D)}return r}},6117:(e,t,r)=>{"use strict";r.r(t),r.d(t,{BrokenCircuitError:()=>S,BulkheadPolicy:()=>C,BulkheadRejectedError:()=>R,CancellationToken:()=>O,CancellationTokenSource:()=>I,CircuitBreakerPolicy:()=>P,CircuitState:()=>T,CompositeBackoff:()=>c,ConsecutiveBreaker:()=>w,ConstantBackoff:()=>l,DelegateBackoff:()=>d,Event:()=>o,EventEmitter:()=>s,ExponentialBackoff:()=>_,FallbackPolicy:()=>N,IsolatedCircuitError:()=>b,IterableBackoff:()=>E,NeverRetryBackoff:()=>u,Policy:()=>j,RetryPolicy:()=>k,SamplingBreaker:()=>A,TaskCancelledError:()=>n,TimeoutPolicy:()=>L,TimeoutStrategy:()=>D,decorrelatedJitterGenerator:()=>g,fullJitterGenerator:()=>p,halfJitterGenerator:()=>f,noJitterGenerator:()=>h});class n extends Error{constructor(e="Operation cancelled"){super(e),this.message=e}}const i={dispose:()=>{}};var o;!function(e){e.once=(e,t)=>{let r,n=!1;return r=e((e=>{t(e),r?r.dispose():n=!0})),n?(r.dispose(),i):r},e.toPromise=(t,r)=>r?r.isCancellationRequested?Promise.reject(new n):new Promise(((i,o)=>{const s=e.once(r.onCancellationRequested,(()=>{a.dispose(),o(new n)})),a=e.once(t,(e=>{s.dispose(),i(e)}))})):new Promise((r=>e.once(t,r)))}(o||(o={}));class s{constructor(){this.listeners=new Set,this.addListener=e=>this.addListenerInner(e)}emit(e){for(const t of this.listeners)t(e)}addListenerInner(e){return this.listeners.add(e),{dispose:()=>this.listeners.delete(e)}}}class a extends s{constructor(){super(...arguments),this.addListener=e=>{const t=this.addListenerInner(e);return this.lastValue&&e(this.lastValue.value),t}}get hasEmitted(){return!!this.lastValue}emit(e){this.lastValue={value:e};for(const t of this.listeners)t(e)}}class c{constructor(e,t,r){this.bias=e,this.backoffA=t,this.backoffB=r}duration(){switch(this.bias){case"a":return this.backoffA.duration();case"b":return this.backoffB.duration();case"max":return Math.max(this.backoffB.duration(),this.backoffA.duration());case"min":return Math.min(this.backoffB.duration(),this.backoffA.duration());default:throw new Error(`Unknown bias "${this.bias}" given to CompositeBackoff`)}}next(e){const t=this.backoffA.next(e),r=this.backoffB.next(e);return t&&r&&new c(this.bias,t,r)}}class l{constructor(e,t){this.interval=e,this.limit=t,this.index=0}duration(){return this.interval}next(){if(void 0===this.limit)return this;if(this.index>=this.limit-1)return;const e=new l(this.interval,this.limit);return e.index=this.index+1,e}}const u=new l(0,0);class d{constructor(e,t){this.fn=e,this.state=t,this.current=0}duration(){return this.current}next(e){const t=this.fn(e,this.state);if(void 0===t)return;let r;return"number"==typeof t?(r=new d(this.fn,this.state),r.current=t):(r=new d(this.fn,t.state),r.current=t.delay),r}}const h=(e=0,t)=>[Math.min(t.maxDelay,t.initialDelay*2**e),e+1],p=(e,t)=>{const[r,n]=h(e,t);return[Math.floor(Math.random()*r),n]},f=(e,t)=>{const[r,n]=h(e,t);return[Math.floor((r+Math.random()*r)/2),n]},g=(e,t)=>{const[r,n]=e||[0,0],i=r+Math.random(),o=Math.pow(t.exponent,i)*Math.tanh(Math.sqrt(4*i)),s=Math.max(0,o-n);return[Math.min(.7142857142857143*s*t.initialDelay,t.maxDelay),[r+1,o]]},m={generator:g,maxDelay:3e4,maxAttempts:1/0,exponent:2,initialDelay:128};class _{constructor(e){this.attempt=0,this.delay=0,this.options=e?{...m,...e}:m}duration(){return this.delay}next(){if(this.attempt>=this.options.maxAttempts-1)return;const e=new _(this.options);return[e.delay,e.state]=this.options.generator(this.state,this.options),e.attempt=this.attempt+1,e}}class E{constructor(e,t=0){if(this.durations=e,this.index=t,t>=e.length)throw new RangeError(`IterableBackoff index 0 >= number of durations (${e.length})`)}duration(){return this.durations[this.index]}next(){return this.index<this.durations.length-1?new E(this.durations,this.index+1):void 0}}const v=e=>{if("error"in e)throw e.error;return"success"in e?e.success:e.value},y=async(e,t,...r)=>{try{const n=await t(...r);return e.resultFilter(n)?{value:n}:{success:n}}catch(t){if(!e.errorFilter(t))throw t;return{error:t}}};class S extends Error{constructor(e="Execution prevented because the circuit breaker is open"){super(e)}}class b extends S{constructor(){super("Execution prevented because the circuit breaker is open")}}var T;!function(e){e[e.Closed=0]="Closed",e[e.Open=1]="Open",e[e.HalfOpen=2]="HalfOpen",e[e.Isolated=3]="Isolated"}(T||(T={}));class P{constructor(e){this.options=e,this.breakEmitter=new s,this.resetEmitter=new s,this.innerState={value:T.Closed},this.onBreak=this.breakEmitter.addListener,this.onReset=this.resetEmitter.addListener}get state(){return this.innerState.value}get lastFailure(){return this.innerLastFailure}isolate(){this.innerState.value!==T.Isolated&&(this.innerState={value:T.Isolated,counters:0},this.breakEmitter.emit({isolated:!0})),this.innerState.counters++;let e=!1;return{dispose:()=>{e||(e=!0,this.innerState.value!==T.Isolated||--this.innerState.counters||(this.innerState={value:T.Closed},this.resetEmitter.emit()))}}}async execute(e){const t=this.innerState;switch(t.value){case T.Closed:const r=await y(this.options,e);return"success"in r?this.options.breaker.success(t.value):(this.innerLastFailure=r,this.options.breaker.failure(t.value)&&this.open(r)),v(r);case T.HalfOpen:return await t.test.catch((()=>{})),this.execute(e);case T.Open:if(Date.now()-t.openedAt<this.options.halfOpenAfter)throw new S;const n=this.halfOpen(e);return this.innerState={value:T.HalfOpen,test:n},n;case T.Isolated:throw new b;default:throw new Error(`Unexpected circuit state ${t}`)}}async halfOpen(e){try{const t=await y(this.options,e);return"success"in t?(this.options.breaker.success(T.HalfOpen),this.close()):(this.innerLastFailure=t,this.options.breaker.failure(T.HalfOpen),this.open(t)),v(t)}catch(e){throw this.close(),e}}open(e){this.state!==T.Isolated&&this.state!==T.Open&&(this.innerState={value:T.Open,openedAt:Date.now()},this.breakEmitter.emit(e))}close(){this.state===T.HalfOpen&&(this.innerState={value:T.Closed},this.resetEmitter.emit())}}class A{constructor({threshold:e,duration:t,minimumRps:r}){if(this.windows=[],this.currentWindow=0,this.currentFailures=0,this.currentSuccesses=0,e<=0||e>=1)throw new RangeError(`SamplingBreaker threshold should be between (0, 1), got ${e}`);this.threshold=e;const n=Math.max(5,Math.ceil(t/1e3));for(let e=0;e<n;e++)this.windows.push({startedAt:0,failures:0,successes:0});this.windowSize=Math.round(t/n),this.duration=this.windowSize*n,this.minimumRpms=r?r/1e3:5/(1e3*e)}success(e){e===T.HalfOpen&&this.resetWindows(),this.push(!0)}failure(e){if(this.push(!1),e!==T.Closed)return!0;const t=this.currentSuccesses+this.currentFailures;return!(t<this.duration*this.minimumRpms)&&this.currentFailures>this.threshold*t}resetWindows(){this.currentFailures=0,this.currentSuccesses=0;for(const e of this.windows)e.failures=0,e.successes=0,e.startedAt=0}rotateWindow(e){const t=(this.currentWindow+1)%this.windows.length;this.currentFailures-=this.windows[t].failures,this.currentSuccesses-=this.windows[t].successes;const r=this.windows[t]={failures:0,successes:0,startedAt:e};return this.currentWindow=t,r}push(e){const t=Date.now();let r=this.windows[this.currentWindow];t-r.startedAt>=this.windowSize&&(r=this.rotateWindow(t)),e?(r.successes++,this.currentSuccesses++):(r.failures++,this.currentFailures++)}}class w{constructor(e){this.threshold=e,this.count=0}success(){this.count=0}failure(){return++this.count>=this.threshold}}class R extends Error{constructor(e,t){super(`Bulkhead capacity exceeded (0/${e} execution slots, 0/${t} available)`)}}class C{constructor(e,t){this.capacity=e,this.queueCapacity=t,this.active=0,this.queue=[],this.onRejectEmitter=new s,this.onReject=this.onRejectEmitter.addListener}get executionSlots(){return this.capacity-this.active}get queueSlots(){return this.queueCapacity-this.queue.length}async execute(e){if(this.active<this.capacity){this.active++;try{return await e()}finally{this.active--,this.dequeue()}}if(this.queue.length<this.queueCapacity){const{resolve:t,reject:r,promise:n}=(()=>{let e,t;const r=new Promise(((r,n)=>{e=r,t=n}));return{resolve:e,reject:t,promise:r}})();return this.queue.push({fn:e,resolve:t,reject:r}),n}throw this.onRejectEmitter.emit(),new R(this.capacity,this.queueCapacity)}dequeue(){const e=this.queue.shift();e&&Promise.resolve().then((()=>this.execute(e.fn))).then(e.resolve).catch(e.reject)}}class I{constructor(e){this.onCancel=new a,this.token=new O(this.onCancel.addListener),e&&(this.parentListener=e.onCancellationRequested((()=>this.cancel())))}cancel(){this.parentListener&&(this.parentListener.dispose(),this.parentListener=void 0),this.onCancel.hasEmitted||this.onCancel.emit()}}class O{constructor(e){this.onCancellationRequested=e,this.isRequested=!1,o.once(e,(()=>this.isRequested=!0))}get isCancellationRequested(){return this.isRequested}cancellation(e){return o.toPromise(this.onCancellationRequested,e)}}O.None=new O((()=>i)),O.Cancelled=new O((e=>(e(void 0),i)));class N{constructor(e,t){this.options=e,this.value=t,this.fallbackEmitter=new s,this.onFallback=this.fallbackEmitter.addListener}async execute(e){const t=await y(this.options,e);return"success"in t?t.success:(this.fallbackEmitter.emit(t),this.value())}}const M=(e,t)=>new Promise((r=>{const n=setTimeout(r,e);t&&n.unref()}));class k{constructor(e){this.options=e,this.onRetryEmitter=new s,this.onGiveUpEmitter=new s,this.onRetry=this.onRetryEmitter.addListener,this.onGiveUp=this.onGiveUpEmitter.addListener}attempts(e){return this.composeBackoff("a",new l(1,e))}delay(e){return this.composeBackoff("b","number"==typeof e?new l(e):new E(e))}delegate(e){return this.composeBackoff("b",new d(e))}exponential(e){return this.composeBackoff("b",new _(e))}backoff(e){return this.composeBackoff("b",e)}dangerouslyUnref(){return this.derivePolicy({...this.options,unref:!0})}async execute(e){let t=this.options.backoff||new l(0,1);for(let r=0;;r++){const n=await y(this.options,e,{attempt:r});if("success"in n)return n.success;if(!t){if(this.onGiveUpEmitter.emit(n),"error"in n)throw n.error;return n.value}{const e=t.duration(),i=M(e,!!this.options.unref);this.onRetryEmitter.emit({...n,delay:e}),await i,t=t.next({attempt:r+1,result:n})}}}composeBackoff(e,t){return this.options.backoff&&(t=new c(e,this.options.backoff,t)),this.derivePolicy({...this.options,backoff:t})}derivePolicy(e){const t=new k(e);return t.onGiveUp((e=>this.onGiveUpEmitter.emit(e))),t.onRetry((e=>this.onRetryEmitter.emit(e))),t}}var D;!function(e){e.Cooperative="optimistic",e.Aggressive="aggressive"}(D||(D={}));class L{constructor(e,t,r=!1){this.duration=e,this.strategy=t,this.unref=r,this.timeoutEmitter=new s,this.onTimeout=this.timeoutEmitter.addListener}dangerouslyUnref(){const e=new L(this.duration,this.strategy,!0);return e.onTimeout((()=>this.timeoutEmitter.emit())),e}async execute(e){const t=new I,r=setTimeout((()=>t.cancel()),this.duration);this.unref&&r.unref();try{return this.strategy===D.Cooperative?await e({cancellation:t.token}):await Promise.race([e({cancellation:t.token}),t.token.cancellation(t.token).then((()=>{throw new n(`Operation timed out after ${this.duration}ms`)}))])}finally{t.cancel(),clearTimeout(r)}}}const x=(e,t)=>t?r=>r instanceof e&&t(r):t=>t instanceof e,F=()=>!0,U=()=>!1;class j{constructor(e){this.options=e}static wrap(...e){return{execute(t){const r=(n,i)=>i===e.length?t(n):e[i].execute((e=>r({...n,...e},i+1)));return Promise.resolve(r({},0))}}}static bulkhead(e,t=0){return new C(e,t)}static handleAll(){return new j({errorFilter:F,resultFilter:U})}static handleType(e,t){return new j({errorFilter:x(e,t),resultFilter:U})}static handleWhen(e){return new j({errorFilter:e,resultFilter:U})}static handleResultType(e,t){return new j({errorFilter:U,resultFilter:x(e,t)})}static handleWhenResult(e){return new j({errorFilter:U,resultFilter:e})}static timeout(e,t){return new L(e,t)}static use(e){return(t,r,n)=>{const i=n.value;if("function"!=typeof i)throw new Error("Can only decorate functions with @cockatiel, got "+typeof i);n.value=function(...t){return e.execute((e=>i.apply(this,[...t,e])))}}}orType(e,t){const r=x(e,t);return new j({...this.options,errorFilter:e=>this.options.errorFilter(e)||r(e)})}orWhen(e){return new j({...this.options,errorFilter:t=>this.options.errorFilter(t)||e(t)})}orWhenResult(e){return new j({...this.options,resultFilter:t=>this.options.resultFilter(t)||e(t)})}orResultType(e,t){const r=x(e,t);return new j({...this.options,resultFilter:e=>this.options.resultFilter(e)||r(e)})}retry(){return new k({errorFilter:this.options.errorFilter,resultFilter:this.options.resultFilter})}circuitBreaker(e,t){return new P({...this.options,breaker:t,halfOpenAfter:e})}fallback(e){return new N(this.options,"function"==typeof e?e:()=>e)}}j.noop={execute:async e=>e(void 0)}},1048:e=>{e.exports=function(e,r){for(var n=[],i=0;i<e.length;i++){var o=r(e[i],i);t(o)?n.push.apply(n,o):n.push(o)}return n};var t=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},214:(e,t,r)=>{"use strict";const n=r(5622),i=r(2087),o=r(77),s=r(789),a=r(71),c=r(902),l=r(3517),u=r(6277),d=a.config||n.join(i.tmpdir(),u()),h="You don't have access to this file.",p={mode:448},f={mode:384};e.exports=class{constructor(e,t,r={}){const i=r.globalConfigPath?n.join(e,"config.json"):n.join("configstore",`${e}.json`);this.path=r.configPath||n.join(d,i),t&&(this.all={...t,...this.all})}get all(){try{return JSON.parse(o.readFileSync(this.path,"utf8"))}catch(e){if("ENOENT"===e.code)return{};if("EACCES"===e.code&&(e.message=`${e.message}\n${h}\n`),"SyntaxError"===e.name)return c.sync(this.path,"",f),{};throw e}}set all(e){try{s.sync(n.dirname(this.path),p),c.sync(this.path,JSON.stringify(e,void 0,"\t"),f)}catch(e){throw"EACCES"===e.code&&(e.message=`${e.message}\n${h}\n`),e}}get size(){return Object.keys(this.all||{}).length}get(e){return l.get(this.all,e)}set(e,t){const r=this.all;if(1===arguments.length)for(const t of Object.keys(e))l.set(r,t,e[t]);else l.set(r,e,t);this.all=r}has(e){return l.has(this.all,e)}delete(e){const t=this.all;l.delete(t,e),this.all=t}clear(){this.all={}}}},511:(e,t,r)=>{"use strict";const n=r(6417);e.exports=e=>{if(!Number.isFinite(e))throw new TypeError("Expected a finite number");return n.randomBytes(Math.ceil(e/2)).toString("hex").slice(0,e)}},4020:e=>{"use strict";var t="%[a-f0-9]{2}",r=new RegExp(t,"gi"),n=new RegExp("("+t+")+","gi");function i(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var r=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],i(r),i(n))}function o(e){try{return decodeURIComponent(e)}catch(o){for(var t=e.match(r),n=1;n<t.length;n++)t=(e=i(t,n).join("")).match(r);return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},r=n.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch(e){var i=o(r[0]);i!==r[0]&&(t[r[0]]=i)}r=n.exec(e)}t["%C2"]="�";for(var s=Object.keys(t),a=0;a<s.length;a++){var c=s[a];e=e.replace(new RegExp(c,"g"),t[c])}return e}(e)}}},3517:(e,t,r)=>{"use strict";const n=r(4290),i=["__proto__","prototype","constructor"];function o(e){const t=e.split("."),r=[];for(let e=0;e<t.length;e++){let n=t[e];for(;"\\"===n[n.length-1]&&void 0!==t[e+1];)n=n.slice(0,-1)+".",n+=t[++e];r.push(n)}return r.some((e=>i.includes(e)))?[]:r}e.exports={get(e,t,r){if(!n(e)||"string"!=typeof t)return void 0===r?e:r;const i=o(t);if(0!==i.length){for(let t=0;t<i.length;t++){if(!Object.prototype.propertyIsEnumerable.call(e,i[t]))return r;if(null==(e=e[i[t]])){if(t!==i.length-1)return r;break}}return e}},set(e,t,r){if(!n(e)||"string"!=typeof t)return e;const i=e,s=o(t);for(let t=0;t<s.length;t++){const i=s[t];n(e[i])||(e[i]={}),t===s.length-1&&(e[i]=r),e=e[i]}return i},delete(e,t){if(!n(e)||"string"!=typeof t)return!1;const r=o(t);for(let t=0;t<r.length;t++){const i=r[t];if(t===r.length-1)return delete e[i],!0;if(e=e[i],!n(e))return!1}},has(e,t){if(!n(e)||"string"!=typeof t)return!1;const r=o(t);if(0===r.length)return!1;for(let t=0;t<r.length;t++){if(!n(e))return!1;if(!(r[t]in e))return!1;e=e[r[t]]}return!0}}},139:e=>{"use strict";function t(e){return function(){return e}}var r=function(){};r.thatReturns=t,r.thatReturnsFalse=t(!1),r.thatReturnsTrue=t(!0),r.thatReturnsNull=t(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(e){return e},e.exports=r},4520:e=>{"use strict";var t=Object.prototype.hasOwnProperty;e.exports=function(e,r,n){for(var i in e)t.call(e,i)&&r.call(n,e[i],i,e)}},3759:e=>{"use strict";var t=function(e){};e.exports=function(e,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];if(t(r),!e){var s;if(void 0===r)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=0;(s=new Error(r.replace(/%s/g,(function(){return String(i[a++])})))).name="Invariant Violation"}throw s.framesToPop=1,s}}},2045:e=>{"use strict";e.exports=function(e){if(null!=e)return e;throw new Error("Got unexpected null or undefined")}},8857:e=>{"use strict";e.exports=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=0;return e.replace(/%s/g,(function(e){return r[i++]}))}},3620:(e,t,r)=>{"use strict";var n=r(139);e.exports=n},9828:(e,t,r)=>{WebInspector=r(3996),SourceMap=r(941),e.exports=function(e){var t=new WebInspector.SourceMap(e.file,e),r=new SourceMap.SourceMapGenerator;return r._file=e.file,t.sources().forEach((function(e){var n=t.sourceContent(e);r.setSourceContent(e,n)})),t._mappings.forEach((function(e){if(!(e.length<5)){var t={source:e[2],original:{line:e[3]+1,column:e[4]},generated:{line:e[0]+1,column:e[1]}};r.addMapping(t)}})),r.toJSON()}},3996:(e,t,r)=>{function n(){this.version,this.file,this.sources,this.sections,this.mappings,this.sourceRoot}e=r.nmd(e),WebInspector={},e&&e.exports&&(e.exports=WebInspector),String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{enumerable:!1,configurable:!1,writable:!1,value:function(e,t){return t=t||0,this.lastIndexOf(e,t)===t}}),String.prototype.endsWith||Object.defineProperty(String.prototype,"endsWith",{value:function(e,t){var r=this.toString();(void 0===t||t>r.length)&&(t=r.length),t-=e.length;var n=r.indexOf(e,t);return-1!==n&&n===t}}),WebInspector.ParsedURL=function(e){this.isValid=!1,this.url=e,this.scheme="",this.host="",this.port="",this.path="",this.queryParams="",this.fragment="",this.folderPathComponents="",this.lastPathComponent="";var t=e.match(/^([A-Za-z][A-Za-z0-9+.-]*):\/\/([^\s\/:]*)(?::([\d]+))?(?:(\/[^#]*)(?:#(.*))?)?$/i);if(t)this.isValid=!0,this.scheme=t[1].toLowerCase(),this.host=t[2],this.port=t[3],this.path=t[4]||"/",this.fragment=t[5];else{if(this.url.startsWith("data:"))return void(this.scheme="data");if("about:blank"===this.url)return void(this.scheme="about");this.path=this.url}var r=this.path,n=r.indexOf("?");-1!==n&&(this.queryParams=r.substring(n+1),r=r.substring(0,n));var i=r.lastIndexOf("/");-1!==i?(this.folderPathComponents=r.substring(0,i),this.lastPathComponent=r.substring(i+1)):this.lastPathComponent=r},WebInspector.ParsedURL._decodeIfPossible=function(e){var t=e;try{t=decodeURI(e)}catch(e){}return t},WebInspector.ParsedURL.splitURLIntoPathComponents=function(e){var t,r,n,i=WebInspector.ParsedURL._decodeIfPossible(e),o=new WebInspector.ParsedURL(i);o.isValid?(t=o.scheme+"://"+o.host,o.port&&(t+=":"+o.port),r=o.folderPathComponents,n=o.lastPathComponent,o.queryParams&&(n+="?"+o.queryParams)):(t="",r="",n=e);for(var s=[t],a=r.split("/"),c=1;c<a.length;++c)a[c]&&s.push(a[c]);return s.push(n),s},WebInspector.ParsedURL.completeURL=function(e,t){if(!t)return e;var r=t.trim();if(r.startsWith("data:")||r.startsWith("blob:")||r.startsWith("javascript:"))return t;var n=r.asParsedURL();if(n&&n.scheme)return r;var i=e.asParsedURL();if(i){if(i.isDataURL())return t;var o=t,s=o.indexOf("?"),a="";if(-1!==s)a=o.substring(s),o=o.substring(0,s);else{var c=o.indexOf("#");-1!==c&&(a=o.substring(c),o=o.substring(0,c))}if(!o){var l=i.path;if("?"===a.charAt(0)){var u=i.path.indexOf("?");-1!==u&&(l=l.substring(0,u))}return i.scheme+"://"+i.host+(i.port?":"+i.port:"")+l+a}if("/"!==o.charAt(0)){var d=i.path,h=d.indexOf("?");-1!==h&&(d=d.substring(0,h)),o=(d=d.substring(0,d.lastIndexOf("/"))+"/")+o}else if(o.length>1&&"/"===o.charAt(1))return i.scheme+":"+o+a;return i.scheme+"://"+i.host+(i.port?":"+i.port:"")+normalizePath(o)+a}return null},WebInspector.ParsedURL.prototype={get displayName(){return this._displayName?this._displayName:this.isDataURL()?this.dataURLDisplayName():this.isAboutBlank()?this.url:(this._displayName=this.lastPathComponent,this._displayName||(this._displayName=(this.host||"")+"/"),"/"===this._displayName&&(this._displayName=this.url),this._displayName)},dataURLDisplayName:function(){return this._dataURLDisplayName?this._dataURLDisplayName:this.isDataURL()?(this._dataURLDisplayName=this.url.trimEnd(20),this._dataURLDisplayName):""},isAboutBlank:function(){return"about:blank"===this.url},isDataURL:function(){return"data"===this.scheme}},WebInspector.ParsedURL.splitLineAndColumn=function(e){var t,r,n=/:(\d+)(:(\d+))?$/.exec(e);return n?(t=parseInt(n[1],10),t=isNaN(t)?void 0:t-1,"string"==typeof n[3]&&(r=parseInt(n[3],10),r=isNaN(r)?void 0:r-1),{url:e.substring(0,e.length-n[0].length),lineNumber:t,columnNumber:r}):null},String.prototype.asParsedURL=function(){var e=new WebInspector.ParsedURL(this.toString());return e.isValid?e:null},n.Section=function(){this.map,this.offset},n.Offset=function(){this.line,this.column},WebInspector.SourceMap=function(e,t){if(!WebInspector.SourceMap.prototype._base64Map){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";WebInspector.SourceMap.prototype._base64Map={};for(var r=0;r<e.length;++r)WebInspector.SourceMap.prototype._base64Map[e.charAt(r)]=r}this._sourceMappingURL=e,this._reverseMappingsBySourceURL={},this._mappings=[],this._sources={},this._sourceContentByURL={},this._parseMappingPayload(t)},WebInspector.SourceMap.load=function(e,t,r){var n=WebInspector.resourceTreeModel;function i(){NetworkAgent.loadResourceForFrontend(n.mainFrame.id,e,{},o)}function o(n,i,o,s){if(n||!s||i>=400)r(null);else{")]}"===s.slice(0,3)&&(s=s.substring(s.indexOf("\n")));try{var a=JSON.parse(s),c=e.startsWith("data:")?t:e;r(new WebInspector.SourceMap(c,a))}catch(e){console.error(e.message),r(null)}}}n.cachedResourcesLoaded()?i():n.addEventListener(WebInspector.ResourceTreeModel.EventTypes.CachedResourcesLoaded,(function e(){n.removeEventListener(WebInspector.ResourceTreeModel.EventTypes.CachedResourcesLoaded,e),i()}))},WebInspector.SourceMap.prototype={url:function(){return this._sourceMappingURL},sources:function(){return Object.keys(this._sources)},sourceContent:function(e){return this._sourceContentByURL[e]},sourceContentProvider:function(e,t){var r=this.sourceContent(e);return r?new WebInspector.StaticContentProvider(t,r):new WebInspector.CompilerSourceMappingContentProvider(e,t)},_parseMappingPayload:function(e){e.sections?this._parseSections(e.sections):this._parseMap(e,0,0)},_parseSections:function(e){for(var t=0;t<e.length;++t){var r=e[t];this._parseMap(r.map,r.offset.line,r.offset.column)}},findEntry:function(e,t){for(var r=0,n=this._mappings.length;n>1;){var i=n>>1,o=r+i,s=this._mappings[o];e<s[0]||e===s[0]&&t<s[1]?n=i:(r=o,n-=i)}var a=this._mappings[r];return!r&&a&&(e<a[0]||e===a[0]&&t<a[1])?null:a},findEntryReversed:function(e,t,r){for(var n=this._reverseMappingsBySourceURL[e],i="number"==typeof r?Math.min(t+r+1,n.length):n.length;t<i;++t){var o=n[t];if(o)return o}return null},_parseMap:function(e,t,r){for(var n=0,i=0,o=0,s=[],a={},c=0;c<e.sources.length;++c){var l=e.sources[c],u=e.sourceRoot||"";u&&!u.endsWith("/")&&(u+="/");var d=u+l,h=WebInspector.ParsedURL.completeURL(this._sourceMappingURL,d)||d;a[l]=h,s.push(h),this._sources[h]=!0,e.sourcesContent&&e.sourcesContent[c]&&(this._sourceContentByURL[h]=e.sourcesContent[c])}for(var p=new WebInspector.SourceMap.StringCharIterator(e.mappings),f=s[n];;){if(","===p.peek())p.next();else{for(;";"===p.peek();)t+=1,r=0,p.next();if(!p.hasNext())break}if(r+=this._decodeVLQ(p),p.hasNext()&&!this._isSeparator(p.peek())){var g=this._decodeVLQ(p);g&&(f=s[n+=g]),i+=this._decodeVLQ(p),o+=this._decodeVLQ(p),this._isSeparator(p.peek())||this._decodeVLQ(p),this._mappings.push([t,r,f,i,o])}else this._mappings.push([t,r])}for(c=0;c<this._mappings.length;++c){var m=this._mappings[c];if(h=m[2]){this._reverseMappingsBySourceURL[h]||(this._reverseMappingsBySourceURL[h]=[]);var _=this._reverseMappingsBySourceURL[h],E=m[3];_[E]||(_[E]=[m[0],m[1]])}}},_isSeparator:function(e){return","===e||";"===e},_decodeVLQ:function(e){var t=0,r=0;do{var n=this._base64Map[e.next()];t+=(n&this._VLQ_BASE_MASK)<<r,r+=this._VLQ_BASE_SHIFT}while(n&this._VLQ_CONTINUATION_MASK);var i=1&t;return t>>=1,i?-t:t},_VLQ_BASE_SHIFT:5,_VLQ_BASE_MASK:31,_VLQ_CONTINUATION_MASK:32},WebInspector.SourceMap.StringCharIterator=function(e){this._string=e,this._position=0},WebInspector.SourceMap.StringCharIterator.prototype={next:function(){return this._string.charAt(this._position++)},peek:function(){return this._string.charAt(this._position)},hasNext:function(){return this._position<this._string.length}}},941:(e,t,r)=>{t.SourceMapGenerator=r(133).SourceMapGenerator,t.SourceMapConsumer=r(2850).SourceMapConsumer,t.SourceNode=r(1260).SourceNode},2850:(e,t,r)=>{if(e=r.nmd(e),"function"!=typeof n)var n=r(5233)(e,r(1713));n((function(e,t,r){var n=e("./util"),i=e("./binary-search"),o=e("./array-set").ArraySet,s=e("./base64-vlq");function a(e){var t=e;"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,"")));var r=n.getArg(t,"version"),i=n.getArg(t,"sources"),s=n.getArg(t,"names",[]),a=n.getArg(t,"sourceRoot",null),c=n.getArg(t,"sourcesContent",null),l=n.getArg(t,"mappings"),u=n.getArg(t,"file",null);if(r!=this._version)throw new Error("Unsupported version: "+r);i=i.map(n.normalize),this._names=o.fromArray(s,!0),this._sources=o.fromArray(i,!0),this.sourceRoot=a,this.sourcesContent=c,this._mappings=l,this.file=u}a.fromSourceMap=function(e){var t=Object.create(a.prototype);return t._names=o.fromArray(e._names.toArray(),!0),t._sources=o.fromArray(e._sources.toArray(),!0),t.sourceRoot=e._sourceRoot,t.sourcesContent=e._generateSourcesContent(t._sources.toArray(),t.sourceRoot),t.file=e._file,t.__generatedMappings=e._mappings.toArray().slice(),t.__originalMappings=e._mappings.toArray().slice().sort(n.compareByOriginalPositions),t},a.prototype._version=3,Object.defineProperty(a.prototype,"sources",{get:function(){return this._sources.toArray().map((function(e){return null!=this.sourceRoot?n.join(this.sourceRoot,e):e}),this)}}),a.prototype.__generatedMappings=null,Object.defineProperty(a.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||(this.__generatedMappings=[],this.__originalMappings=[],this._parseMappings(this._mappings,this.sourceRoot)),this.__generatedMappings}}),a.prototype.__originalMappings=null,Object.defineProperty(a.prototype,"_originalMappings",{get:function(){return this.__originalMappings||(this.__generatedMappings=[],this.__originalMappings=[],this._parseMappings(this._mappings,this.sourceRoot)),this.__originalMappings}}),a.prototype._nextCharIsMappingSeparator=function(e){var t=e.charAt(0);return";"===t||","===t},a.prototype._parseMappings=function(e,t){for(var r,i=1,o=0,a=0,c=0,l=0,u=0,d=e,h={};d.length>0;)if(";"===d.charAt(0))i++,d=d.slice(1),o=0;else if(","===d.charAt(0))d=d.slice(1);else{if((r={}).generatedLine=i,s.decode(d,h),r.generatedColumn=o+h.value,o=r.generatedColumn,(d=h.rest).length>0&&!this._nextCharIsMappingSeparator(d)){if(s.decode(d,h),r.source=this._sources.at(l+h.value),l+=h.value,0===(d=h.rest).length||this._nextCharIsMappingSeparator(d))throw new Error("Found a source, but no line and column");if(s.decode(d,h),r.originalLine=a+h.value,a=r.originalLine,r.originalLine+=1,0===(d=h.rest).length||this._nextCharIsMappingSeparator(d))throw new Error("Found a source and line, but no column");s.decode(d,h),r.originalColumn=c+h.value,c=r.originalColumn,(d=h.rest).length>0&&!this._nextCharIsMappingSeparator(d)&&(s.decode(d,h),r.name=this._names.at(u+h.value),u+=h.value,d=h.rest)}this.__generatedMappings.push(r),"number"==typeof r.originalLine&&this.__originalMappings.push(r)}this.__generatedMappings.sort(n.compareByGeneratedPositions),this.__originalMappings.sort(n.compareByOriginalPositions)},a.prototype._findMapping=function(e,t,r,n,o){if(e[r]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[r]);if(e[n]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[n]);return i.search(e,t,o)},a.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var r=this._generatedMappings[e+1];if(t.generatedLine===r.generatedLine){t.lastGeneratedColumn=r.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},a.prototype.originalPositionFor=function(e){var t={generatedLine:n.getArg(e,"line"),generatedColumn:n.getArg(e,"column")},r=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",n.compareByGeneratedPositions);if(r>=0){var i=this._generatedMappings[r];if(i.generatedLine===t.generatedLine){var o=n.getArg(i,"source",null);return null!=o&&null!=this.sourceRoot&&(o=n.join(this.sourceRoot,o)),{source:o,line:n.getArg(i,"originalLine",null),column:n.getArg(i,"originalColumn",null),name:n.getArg(i,"name",null)}}}return{source:null,line:null,column:null,name:null}},a.prototype.sourceContentFor=function(e){if(!this.sourcesContent)return null;if(null!=this.sourceRoot&&(e=n.relative(this.sourceRoot,e)),this._sources.has(e))return this.sourcesContent[this._sources.indexOf(e)];var t;if(null!=this.sourceRoot&&(t=n.urlParse(this.sourceRoot))){var r=e.replace(/^file:\/\//,"");if("file"==t.scheme&&this._sources.has(r))return this.sourcesContent[this._sources.indexOf(r)];if((!t.path||"/"==t.path)&&this._sources.has("/"+e))return this.sourcesContent[this._sources.indexOf("/"+e)]}throw new Error('"'+e+'" is not in the SourceMap.')},a.prototype.generatedPositionFor=function(e){var t={source:n.getArg(e,"source"),originalLine:n.getArg(e,"line"),originalColumn:n.getArg(e,"column")};null!=this.sourceRoot&&(t.source=n.relative(this.sourceRoot,t.source));var r=this._findMapping(t,this._originalMappings,"originalLine","originalColumn",n.compareByOriginalPositions);if(r>=0){var i=this._originalMappings[r];return{line:n.getArg(i,"generatedLine",null),column:n.getArg(i,"generatedColumn",null),lastColumn:n.getArg(i,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},a.prototype.allGeneratedPositionsFor=function(e){var t={source:n.getArg(e,"source"),originalLine:n.getArg(e,"line"),originalColumn:1/0};null!=this.sourceRoot&&(t.source=n.relative(this.sourceRoot,t.source));var r=[],i=this._findMapping(t,this._originalMappings,"originalLine","originalColumn",n.compareByOriginalPositions);if(i>=0)for(var o=this._originalMappings[i];o&&o.originalLine===t.originalLine;)r.push({line:n.getArg(o,"generatedLine",null),column:n.getArg(o,"generatedColumn",null),lastColumn:n.getArg(o,"lastGeneratedColumn",null)}),o=this._originalMappings[--i];return r.reverse()},a.GENERATED_ORDER=1,a.ORIGINAL_ORDER=2,a.prototype.eachMapping=function(e,t,r){var i,o=t||null;switch(r||a.GENERATED_ORDER){case a.GENERATED_ORDER:i=this._generatedMappings;break;case a.ORIGINAL_ORDER:i=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var s=this.sourceRoot;i.map((function(e){var t=e.source;return null!=t&&null!=s&&(t=n.join(s,t)),{source:t,generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:e.name}})).forEach(e,o)},t.SourceMapConsumer=a}))},133:(e,t,r)=>{if(e=r.nmd(e),"function"!=typeof n)var n=r(5233)(e,r(1713));n((function(e,t,r){var n=e("./base64-vlq"),i=e("./util"),o=e("./array-set").ArraySet,s=e("./mapping-list").MappingList;function a(e){e||(e={}),this._file=i.getArg(e,"file",null),this._sourceRoot=i.getArg(e,"sourceRoot",null),this._skipValidation=i.getArg(e,"skipValidation",!1),this._sources=new o,this._names=new o,this._mappings=new s,this._sourcesContents=null}a.prototype._version=3,a.fromSourceMap=function(e){var t=e.sourceRoot,r=new a({file:e.file,sourceRoot:t});return e.eachMapping((function(e){var n={generated:{line:e.generatedLine,column:e.generatedColumn}};null!=e.source&&(n.source=e.source,null!=t&&(n.source=i.relative(t,n.source)),n.original={line:e.originalLine,column:e.originalColumn},null!=e.name&&(n.name=e.name)),r.addMapping(n)})),e.sources.forEach((function(t){var n=e.sourceContentFor(t);null!=n&&r.setSourceContent(t,n)})),r},a.prototype.addMapping=function(e){var t=i.getArg(e,"generated"),r=i.getArg(e,"original",null),n=i.getArg(e,"source",null),o=i.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,r,n,o),null==n||this._sources.has(n)||this._sources.add(n),null==o||this._names.has(o)||this._names.add(o),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:null!=r&&r.line,originalColumn:null!=r&&r.column,source:n,name:o})},a.prototype.setSourceContent=function(e,t){var r=e;null!=this._sourceRoot&&(r=i.relative(this._sourceRoot,r)),null!=t?(this._sourcesContents||(this._sourcesContents={}),this._sourcesContents[i.toSetString(r)]=t):this._sourcesContents&&(delete this._sourcesContents[i.toSetString(r)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},a.prototype.applySourceMap=function(e,t,r){var n=t;if(null==t){if(null==e.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');n=e.file}var s=this._sourceRoot;null!=s&&(n=i.relative(s,n));var a=new o,c=new o;this._mappings.unsortedForEach((function(t){if(t.source===n&&null!=t.originalLine){var o=e.originalPositionFor({line:t.originalLine,column:t.originalColumn});null!=o.source&&(t.source=o.source,null!=r&&(t.source=i.join(r,t.source)),null!=s&&(t.source=i.relative(s,t.source)),t.originalLine=o.line,t.originalColumn=o.column,null!=o.name&&(t.name=o.name))}var l=t.source;null==l||a.has(l)||a.add(l);var u=t.name;null==u||c.has(u)||c.add(u)}),this),this._sources=a,this._names=c,e.sources.forEach((function(t){var n=e.sourceContentFor(t);null!=n&&(null!=r&&(t=i.join(r,t)),null!=s&&(t=i.relative(s,t)),this.setSourceContent(t,n))}),this)},a.prototype._validateMapping=function(e,t,r,n){if((!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0)||t||r||n)&&!(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&r))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:r,original:t,name:n}))},a.prototype._serializeMappings=function(){for(var e,t=0,r=1,o=0,s=0,a=0,c=0,l="",u=this._mappings.toArray(),d=0,h=u.length;d<h;d++){if((e=u[d]).generatedLine!==r)for(t=0;e.generatedLine!==r;)l+=";",r++;else if(d>0){if(!i.compareByGeneratedPositions(e,u[d-1]))continue;l+=","}l+=n.encode(e.generatedColumn-t),t=e.generatedColumn,null!=e.source&&(l+=n.encode(this._sources.indexOf(e.source)-c),c=this._sources.indexOf(e.source),l+=n.encode(e.originalLine-1-s),s=e.originalLine-1,l+=n.encode(e.originalColumn-o),o=e.originalColumn,null!=e.name&&(l+=n.encode(this._names.indexOf(e.name)-a),a=this._names.indexOf(e.name)))}return l},a.prototype._generateSourcesContent=function(e,t){return e.map((function(e){if(!this._sourcesContents)return null;null!=t&&(e=i.relative(t,e));var r=i.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,r)?this._sourcesContents[r]:null}),this)},a.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(e.file=this._file),null!=this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},a.prototype.toString=function(){return JSON.stringify(this)},t.SourceMapGenerator=a}))},1260:(e,t,r)=>{if(e=r.nmd(e),"function"!=typeof n)var n=r(5233)(e,r(1713));n((function(e,t,r){var n=e("./source-map-generator").SourceMapGenerator,i=e("./util"),o=/(\r?\n)/,s="$$$isSourceNode$$$";function a(e,t,r,n,i){this.children=[],this.sourceContents={},this.line=null==e?null:e,this.column=null==t?null:t,this.source=null==r?null:r,this.name=null==i?null:i,this[s]=!0,null!=n&&this.add(n)}a.fromStringWithSourceMap=function(e,t,r){var n=new a,s=e.split(o),c=function(){return s.shift()+(s.shift()||"")},l=1,u=0,d=null;return t.eachMapping((function(e){if(null!==d){if(!(l<e.generatedLine)){t=(r=s[0]).substr(0,e.generatedColumn-u);return s[0]=r.substr(e.generatedColumn-u),u=e.generatedColumn,h(d,t),void(d=e)}var t="";h(d,c()),l++,u=0}for(;l<e.generatedLine;)n.add(c()),l++;if(u<e.generatedColumn){var r=s[0];n.add(r.substr(0,e.generatedColumn)),s[0]=r.substr(e.generatedColumn),u=e.generatedColumn}d=e}),this),s.length>0&&(d&&h(d,c()),n.add(s.join(""))),t.sources.forEach((function(e){var o=t.sourceContentFor(e);null!=o&&(null!=r&&(e=i.join(r,e)),n.setSourceContent(e,o))})),n;function h(e,t){if(null===e||void 0===e.source)n.add(t);else{var o=r?i.join(r,e.source):e.source;n.add(new a(e.originalLine,e.originalColumn,o,t,e.name))}}},a.prototype.add=function(e){if(Array.isArray(e))e.forEach((function(e){this.add(e)}),this);else{if(!e[s]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this},a.prototype.prepend=function(e){if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)this.prepend(e[t]);else{if(!e[s]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this},a.prototype.walk=function(e){for(var t,r=0,n=this.children.length;r<n;r++)(t=this.children[r])[s]?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},a.prototype.join=function(e){var t,r,n=this.children.length;if(n>0){for(t=[],r=0;r<n-1;r++)t.push(this.children[r]),t.push(e);t.push(this.children[r]),this.children=t}return this},a.prototype.replaceRight=function(e,t){var r=this.children[this.children.length-1];return r[s]?r.replaceRight(e,t):"string"==typeof r?this.children[this.children.length-1]=r.replace(e,t):this.children.push("".replace(e,t)),this},a.prototype.setSourceContent=function(e,t){this.sourceContents[i.toSetString(e)]=t},a.prototype.walkSourceContents=function(e){for(var t=0,r=this.children.length;t<r;t++)this.children[t][s]&&this.children[t].walkSourceContents(e);var n=Object.keys(this.sourceContents);for(t=0,r=n.length;t<r;t++)e(i.fromSetString(n[t]),this.sourceContents[n[t]])},a.prototype.toString=function(){var e="";return this.walk((function(t){e+=t})),e},a.prototype.toStringWithSourceMap=function(e){var t={code:"",line:1,column:0},r=new n(e),i=!1,o=null,s=null,a=null,c=null;return this.walk((function(e,n){t.code+=e,null!==n.source&&null!==n.line&&null!==n.column?(o===n.source&&s===n.line&&a===n.column&&c===n.name||r.addMapping({source:n.source,original:{line:n.line,column:n.column},generated:{line:t.line,column:t.column},name:n.name}),o=n.source,s=n.line,a=n.column,c=n.name,i=!0):i&&(r.addMapping({generated:{line:t.line,column:t.column}}),o=null,i=!1);for(var l=0,u=e.length;l<u;l++)10===e.charCodeAt(l)?(t.line++,t.column=0,l+1===u?(o=null,i=!1):i&&r.addMapping({source:n.source,original:{line:n.line,column:n.column},generated:{line:t.line,column:t.column},name:n.name})):t.column++})),this.walkSourceContents((function(e,t){r.setSourceContent(e,t)})),{code:t.code,map:r}},t.SourceNode=a}))},1713:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=1713,e.exports=t},7334:(e,t,r)=>{e.exports=u,u.realpath=u,u.sync=d,u.realpathSync=d,u.monkeypatch=function(){n.realpath=u,n.realpathSync=d},u.unmonkeypatch=function(){n.realpath=i,n.realpathSync=o};var n=r(5747),i=n.realpath,o=n.realpathSync,s=process.version,a=/^v[0-5]\./.test(s),c=r(7059);function l(e){return e&&"realpath"===e.syscall&&("ELOOP"===e.code||"ENOMEM"===e.code||"ENAMETOOLONG"===e.code)}function u(e,t,r){if(a)return i(e,t,r);"function"==typeof t&&(r=t,t=null),i(e,t,(function(n,i){l(n)?c.realpath(e,t,r):r(n,i)}))}function d(e,t){if(a)return o(e,t);try{return o(e,t)}catch(r){if(l(r))return c.realpathSync(e,t);throw r}}},7059:(e,t,r)=>{var n=r(5622),i="win32"===process.platform,o=r(5747),s=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function a(e){return"function"==typeof e?e:function(){var e;if(s){var t=new Error;e=function(e){e&&(t.message=e.message,r(e=t))}}else e=r;return e;function r(e){if(e){if(process.throwDeprecation)throw e;if(!process.noDeprecation){var t="fs: missing callback "+(e.stack||e.message);process.traceDeprecation?console.trace(t):console.error(t)}}}}()}n.normalize;if(i)var c=/(.*?)(?:[\/\\]+|$)/g;else c=/(.*?)(?:[\/]+|$)/g;if(i)var l=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/;else l=/^[\/]*/;t.realpathSync=function(e,t){if(e=n.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return t[e];var r,s,a,u,d=e,h={},p={};function f(){var t=l.exec(e);r=t[0].length,s=t[0],a=t[0],u="",i&&!p[a]&&(o.lstatSync(a),p[a]=!0)}for(f();r<e.length;){c.lastIndex=r;var g=c.exec(e);if(u=s,s+=g[0],a=u+g[1],r=c.lastIndex,!(p[a]||t&&t[a]===a)){var m;if(t&&Object.prototype.hasOwnProperty.call(t,a))m=t[a];else{var _=o.lstatSync(a);if(!_.isSymbolicLink()){p[a]=!0,t&&(t[a]=a);continue}var E=null;if(!i){var v=_.dev.toString(32)+":"+_.ino.toString(32);h.hasOwnProperty(v)&&(E=h[v])}null===E&&(o.statSync(a),E=o.readlinkSync(a)),m=n.resolve(u,E),t&&(t[a]=m),i||(h[v]=E)}e=n.resolve(m,e.slice(r)),f()}}return t&&(t[d]=e),e},t.realpath=function(e,t,r){if("function"!=typeof r&&(r=a(t),t=null),e=n.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return process.nextTick(r.bind(null,null,t[e]));var s,u,d,h,p=e,f={},g={};function m(){var t=l.exec(e);s=t[0].length,u=t[0],d=t[0],h="",i&&!g[d]?o.lstat(d,(function(e){if(e)return r(e);g[d]=!0,_()})):process.nextTick(_)}function _(){if(s>=e.length)return t&&(t[p]=e),r(null,e);c.lastIndex=s;var n=c.exec(e);return h=u,u+=n[0],d=h+n[1],s=c.lastIndex,g[d]||t&&t[d]===d?process.nextTick(_):t&&Object.prototype.hasOwnProperty.call(t,d)?y(t[d]):o.lstat(d,E)}function E(e,n){if(e)return r(e);if(!n.isSymbolicLink())return g[d]=!0,t&&(t[d]=d),process.nextTick(_);if(!i){var s=n.dev.toString(32)+":"+n.ino.toString(32);if(f.hasOwnProperty(s))return v(null,f[s],d)}o.stat(d,(function(e){if(e)return r(e);o.readlink(d,(function(e,t){i||(f[s]=t),v(e,t)}))}))}function v(e,i,o){if(e)return r(e);var s=n.resolve(h,i);t&&(t[o]=s),y(s)}function y(t){e=n.resolve(t,e.slice(s)),m()}m()}},6772:(e,t,r)=>{function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.alphasort=l,t.alphasorti=c,t.setopts=function(e,t,r){r||(r={});if(r.matchBase&&-1===t.indexOf("/")){if(r.noglobstar)throw new Error("base matching requires globstar");t="**/"+t}e.silent=!!r.silent,e.pattern=t,e.strict=!1!==r.strict,e.realpath=!!r.realpath,e.realpathCache=r.realpathCache||Object.create(null),e.follow=!!r.follow,e.dot=!!r.dot,e.mark=!!r.mark,e.nodir=!!r.nodir,e.nodir&&(e.mark=!0);e.sync=!!r.sync,e.nounique=!!r.nounique,e.nonull=!!r.nonull,e.nosort=!!r.nosort,e.nocase=!!r.nocase,e.stat=!!r.stat,e.noprocess=!!r.noprocess,e.absolute=!!r.absolute,e.maxLength=r.maxLength||1/0,e.cache=r.cache||Object.create(null),e.statCache=r.statCache||Object.create(null),e.symlinks=r.symlinks||Object.create(null),function(e,t){e.ignore=t.ignore||[],Array.isArray(e.ignore)||(e.ignore=[e.ignore]);e.ignore.length&&(e.ignore=e.ignore.map(u))}(e,r),e.changedCwd=!1;var o=process.cwd();n(r,"cwd")?(e.cwd=i.resolve(r.cwd),e.changedCwd=e.cwd!==o):e.cwd=o;e.root=r.root||i.resolve(e.cwd,"/"),e.root=i.resolve(e.root),"win32"===process.platform&&(e.root=e.root.replace(/\\/g,"/"));e.cwdAbs=s(e.cwd)?e.cwd:d(e,e.cwd),"win32"===process.platform&&(e.cwdAbs=e.cwdAbs.replace(/\\/g,"/"));e.nomount=!!r.nomount,r.nonegate=!0,r.nocomment=!0,e.minimatch=new a(t,r),e.options=e.minimatch.options},t.ownProp=n,t.makeAbs=d,t.finish=function(e){for(var t=e.nounique,r=t?[]:Object.create(null),n=0,i=e.matches.length;n<i;n++){var o=e.matches[n];if(o&&0!==Object.keys(o).length){var s=Object.keys(o);t?r.push.apply(r,s):s.forEach((function(e){r[e]=!0}))}else if(e.nonull){var a=e.minimatch.globSet[n];t?r.push(a):r[a]=!0}}t||(r=Object.keys(r));e.nosort||(r=r.sort(e.nocase?c:l));if(e.mark){for(n=0;n<r.length;n++)r[n]=e._mark(r[n]);e.nodir&&(r=r.filter((function(t){var r=!/\/$/.test(t),n=e.cache[t]||e.cache[d(e,t)];return r&&n&&(r="DIR"!==n&&!Array.isArray(n)),r})))}e.ignore.length&&(r=r.filter((function(t){return!h(e,t)})));e.found=r},t.mark=function(e,t){var r=d(e,t),n=e.cache[r],i=t;if(n){var o="DIR"===n||Array.isArray(n),s="/"===t.slice(-1);if(o&&!s?i+="/":!o&&s&&(i=i.slice(0,-1)),i!==t){var a=d(e,i);e.statCache[a]=e.statCache[r],e.cache[a]=e.cache[r]}}return i},t.isIgnored=h,t.childrenIgnored=function(e,t){return!!e.ignore.length&&e.ignore.some((function(e){return!(!e.gmatcher||!e.gmatcher.match(t))}))};var i=r(5622),o=r(1171),s=r(4095),a=o.Minimatch;function c(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}function l(e,t){return e.localeCompare(t)}function u(e){var t=null;if("/**"===e.slice(-3)){var r=e.replace(/(\/\*\*)+$/,"");t=new a(r,{dot:!0})}return{matcher:new a(e,{dot:!0}),gmatcher:t}}function d(e,t){var r=t;return r="/"===t.charAt(0)?i.join(e.root,t):s(t)||""===t?t:e.changedCwd?i.resolve(e.cwd,t):i.resolve(t),"win32"===process.platform&&(r=r.replace(/\\/g,"/")),r}function h(e,t){return!!e.ignore.length&&e.ignore.some((function(e){return e.matcher.match(t)||!(!e.gmatcher||!e.gmatcher.match(t))}))}},2884:(e,t,r)=>{e.exports=v;var n=r(5747),i=r(7334),o=r(1171),s=(o.Minimatch,r(4378)),a=r(8614).EventEmitter,c=r(5622),l=r(2357),u=r(4095),d=r(4751),h=r(6772),p=(h.alphasort,h.alphasorti,h.setopts),f=h.ownProp,g=r(7844),m=(r(1669),h.childrenIgnored),_=h.isIgnored,E=r(778);function v(e,t,r){if("function"==typeof t&&(r=t,t={}),t||(t={}),t.sync){if(r)throw new TypeError("callback provided to sync glob");return d(e,t)}return new S(e,t,r)}v.sync=d;var y=v.GlobSync=d.GlobSync;function S(e,t,r){if("function"==typeof t&&(r=t,t=null),t&&t.sync){if(r)throw new TypeError("callback provided to sync glob");return new y(e,t)}if(!(this instanceof S))return new S(e,t,r);p(this,e,t),this._didRealPath=!1;var n=this.minimatch.set.length;this.matches=new Array(n),"function"==typeof r&&(r=E(r),this.on("error",r),this.on("end",(function(e){r(null,e)})));var i=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(0===n)return s();for(var o=0;o<n;o++)this._process(this.minimatch.set[o],o,!1,s);function s(){--i._processing,i._processing<=0&&i._finish()}}v.glob=v,v.hasMagic=function(e,t){var r=function(e,t){if(null===t||"object"!=typeof t)return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}({},t);r.noprocess=!0;var n=new S(e,r).minimatch.set;if(!e)return!1;if(n.length>1)return!0;for(var i=0;i<n[0].length;i++)if("string"!=typeof n[0][i])return!0;return!1},v.Glob=S,s(S,a),S.prototype._finish=function(){if(l(this instanceof S),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();h.finish(this),this.emit("end",this.found)}},S.prototype._realpath=function(){if(!this._didRealpath){this._didRealpath=!0;var e=this.matches.length;if(0===e)return this._finish();for(var t=this,r=0;r<this.matches.length;r++)this._realpathSet(r,n)}function n(){0==--e&&t._finish()}},S.prototype._realpathSet=function(e,t){var r=this.matches[e];if(!r)return t();var n=Object.keys(r),o=this,s=n.length;if(0===s)return t();var a=this.matches[e]=Object.create(null);n.forEach((function(r,n){r=o._makeAbs(r),i.realpath(r,o.realpathCache,(function(n,i){n?"stat"===n.syscall?a[r]=!0:o.emit("error",n):a[i]=!0,0==--s&&(o.matches[e]=a,t())}))}))},S.prototype._mark=function(e){return h.mark(this,e)},S.prototype._makeAbs=function(e){return h.makeAbs(this,e)},S.prototype.abort=function(){this.aborted=!0,this.emit("abort")},S.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))},S.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var e=this._emitQueue.slice(0);this._emitQueue.length=0;for(var t=0;t<e.length;t++){var r=e[t];this._emitMatch(r[0],r[1])}}if(this._processQueue.length){var n=this._processQueue.slice(0);this._processQueue.length=0;for(t=0;t<n.length;t++){var i=n[t];this._processing--,this._process(i[0],i[1],i[2],i[3])}}}},S.prototype._process=function(e,t,r,n){if(l(this instanceof S),l("function"==typeof n),!this.aborted)if(this._processing++,this.paused)this._processQueue.push([e,t,r,n]);else{for(var i,s=0;"string"==typeof e[s];)s++;switch(s){case e.length:return void this._processSimple(e.join("/"),t,n);case 0:i=null;break;default:i=e.slice(0,s).join("/")}var a,c=e.slice(s);null===i?a=".":u(i)||u(e.join("/"))?(i&&u(i)||(i="/"+i),a=i):a=i;var d=this._makeAbs(a);if(m(this,a))return n();c[0]===o.GLOBSTAR?this._processGlobStar(i,a,d,c,t,r,n):this._processReaddir(i,a,d,c,t,r,n)}},S.prototype._processReaddir=function(e,t,r,n,i,o,s){var a=this;this._readdir(r,o,(function(c,l){return a._processReaddir2(e,t,r,n,i,o,l,s)}))},S.prototype._processReaddir2=function(e,t,r,n,i,o,s,a){if(!s)return a();for(var l=n[0],u=!!this.minimatch.negate,d=l._glob,h=this.dot||"."===d.charAt(0),p=[],f=0;f<s.length;f++){if("."!==(m=s[f]).charAt(0)||h)(u&&!e?!m.match(l):m.match(l))&&p.push(m)}var g=p.length;if(0===g)return a();if(1===n.length&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(f=0;f<g;f++){var m=p[f];e&&(m="/"!==e?e+"/"+m:e+m),"/"!==m.charAt(0)||this.nomount||(m=c.join(this.root,m)),this._emitMatch(i,m)}return a()}n.shift();for(f=0;f<g;f++){m=p[f];e&&(m="/"!==e?e+"/"+m:e+m),this._process([m].concat(n),i,o,a)}a()},S.prototype._emitMatch=function(e,t){if(!this.aborted&&!_(this,t))if(this.paused)this._emitQueue.push([e,t]);else{var r=u(t)?t:this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=r),!this.matches[e][t]){if(this.nodir){var n=this.cache[r];if("DIR"===n||Array.isArray(n))return}this.matches[e][t]=!0;var i=this.statCache[r];i&&this.emit("stat",t,i),this.emit("match",t)}}},S.prototype._readdirInGlobStar=function(e,t){if(!this.aborted){if(this.follow)return this._readdir(e,!1,t);var r=this,i=g("lstat\0"+e,(function(n,i){if(n&&"ENOENT"===n.code)return t();var o=i&&i.isSymbolicLink();r.symlinks[e]=o,o||!i||i.isDirectory()?r._readdir(e,!1,t):(r.cache[e]="FILE",t())}));i&&n.lstat(e,i)}},S.prototype._readdir=function(e,t,r){if(!this.aborted&&(r=g("readdir\0"+e+"\0"+t,r))){if(t&&!f(this.symlinks,e))return this._readdirInGlobStar(e,r);if(f(this.cache,e)){var i=this.cache[e];if(!i||"FILE"===i)return r();if(Array.isArray(i))return r(null,i)}n.readdir(e,function(e,t,r){return function(n,i){n?e._readdirError(t,n,r):e._readdirEntries(t,i,r)}}(this,e,r))}},S.prototype._readdirEntries=function(e,t,r){if(!this.aborted){if(!this.mark&&!this.stat)for(var n=0;n<t.length;n++){var i=t[n];i="/"===e?e+i:e+"/"+i,this.cache[i]=!0}return this.cache[e]=t,r(null,t)}},S.prototype._readdirError=function(e,t,r){if(!this.aborted){switch(t.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(e);if(this.cache[n]="FILE",n===this.cwdAbs){var i=new Error(t.code+" invalid cwd "+this.cwd);i.path=this.cwd,i.code=t.code,this.emit("error",i),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:this.cache[this._makeAbs(e)]=!1,this.strict&&(this.emit("error",t),this.abort()),this.silent||console.error("glob error",t)}return r()}},S.prototype._processGlobStar=function(e,t,r,n,i,o,s){var a=this;this._readdir(r,o,(function(c,l){a._processGlobStar2(e,t,r,n,i,o,l,s)}))},S.prototype._processGlobStar2=function(e,t,r,n,i,o,s,a){if(!s)return a();var c=n.slice(1),l=e?[e]:[],u=l.concat(c);this._process(u,i,!1,a);var d=this.symlinks[r],h=s.length;if(d&&o)return a();for(var p=0;p<h;p++){if("."!==s[p].charAt(0)||this.dot){var f=l.concat(s[p],c);this._process(f,i,!0,a);var g=l.concat(s[p],n);this._process(g,i,!0,a)}}a()},S.prototype._processSimple=function(e,t,r){var n=this;this._stat(e,(function(i,o){n._processSimple2(e,t,i,o,r)}))},S.prototype._processSimple2=function(e,t,r,n,i){if(this.matches[t]||(this.matches[t]=Object.create(null)),!n)return i();if(e&&u(e)&&!this.nomount){var o=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=c.join(this.root,e):(e=c.resolve(this.root,e),o&&(e+="/"))}"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e),i()},S.prototype._stat=function(e,t){var r=this._makeAbs(e),i="/"===e.slice(-1);if(e.length>this.maxLength)return t();if(!this.stat&&f(this.cache,r)){var o=this.cache[r];if(Array.isArray(o)&&(o="DIR"),!i||"DIR"===o)return t(null,o);if(i&&"FILE"===o)return t()}var s=this.statCache[r];if(void 0!==s){if(!1===s)return t(null,s);var a=s.isDirectory()?"DIR":"FILE";return i&&"FILE"===a?t():t(null,a,s)}var c=this,l=g("stat\0"+r,(function(i,o){if(o&&o.isSymbolicLink())return n.stat(r,(function(n,i){n?c._stat2(e,r,null,o,t):c._stat2(e,r,n,i,t)}));c._stat2(e,r,i,o,t)}));l&&n.lstat(r,l)},S.prototype._stat2=function(e,t,r,n,i){if(r&&("ENOENT"===r.code||"ENOTDIR"===r.code))return this.statCache[t]=!1,i();var o="/"===e.slice(-1);if(this.statCache[t]=n,"/"===t.slice(-1)&&n&&!n.isDirectory())return i(null,!1,n);var s=!0;return n&&(s=n.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||s,o&&"FILE"===s?i():i(null,s,n)}},4751:(e,t,r)=>{e.exports=f,f.GlobSync=g;var n=r(5747),i=r(7334),o=r(1171),s=(o.Minimatch,r(2884).Glob,r(1669),r(5622)),a=r(2357),c=r(4095),l=r(6772),u=(l.alphasort,l.alphasorti,l.setopts),d=l.ownProp,h=l.childrenIgnored,p=l.isIgnored;function f(e,t){if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");return new g(e,t).found}function g(e,t){if(!e)throw new Error("must provide pattern");if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");if(!(this instanceof g))return new g(e,t);if(u(this,e,t),this.noprocess)return this;var r=this.minimatch.set.length;this.matches=new Array(r);for(var n=0;n<r;n++)this._process(this.minimatch.set[n],n,!1);this._finish()}g.prototype._finish=function(){if(a(this instanceof g),this.realpath){var e=this;this.matches.forEach((function(t,r){var n=e.matches[r]=Object.create(null);for(var o in t)try{o=e._makeAbs(o),n[i.realpathSync(o,e.realpathCache)]=!0}catch(t){if("stat"!==t.syscall)throw t;n[e._makeAbs(o)]=!0}}))}l.finish(this)},g.prototype._process=function(e,t,r){a(this instanceof g);for(var n,i=0;"string"==typeof e[i];)i++;switch(i){case e.length:return void this._processSimple(e.join("/"),t);case 0:n=null;break;default:n=e.slice(0,i).join("/")}var s,l=e.slice(i);null===n?s=".":c(n)||c(e.join("/"))?(n&&c(n)||(n="/"+n),s=n):s=n;var u=this._makeAbs(s);h(this,s)||(l[0]===o.GLOBSTAR?this._processGlobStar(n,s,u,l,t,r):this._processReaddir(n,s,u,l,t,r))},g.prototype._processReaddir=function(e,t,r,n,i,o){var a=this._readdir(r,o);if(a){for(var c=n[0],l=!!this.minimatch.negate,u=c._glob,d=this.dot||"."===u.charAt(0),h=[],p=0;p<a.length;p++){if("."!==(m=a[p]).charAt(0)||d)(l&&!e?!m.match(c):m.match(c))&&h.push(m)}var f=h.length;if(0!==f)if(1!==n.length||this.mark||this.stat){n.shift();for(p=0;p<f;p++){var g;m=h[p];g=e?[e,m]:[m],this._process(g.concat(n),i,o)}}else{this.matches[i]||(this.matches[i]=Object.create(null));for(var p=0;p<f;p++){var m=h[p];e&&(m="/"!==e.slice(-1)?e+"/"+m:e+m),"/"!==m.charAt(0)||this.nomount||(m=s.join(this.root,m)),this._emitMatch(i,m)}}}},g.prototype._emitMatch=function(e,t){if(!p(this,t)){var r=this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=r),!this.matches[e][t]){if(this.nodir){var n=this.cache[r];if("DIR"===n||Array.isArray(n))return}this.matches[e][t]=!0,this.stat&&this._stat(t)}}},g.prototype._readdirInGlobStar=function(e){if(this.follow)return this._readdir(e,!1);var t,r;try{r=n.lstatSync(e)}catch(e){if("ENOENT"===e.code)return null}var i=r&&r.isSymbolicLink();return this.symlinks[e]=i,i||!r||r.isDirectory()?t=this._readdir(e,!1):this.cache[e]="FILE",t},g.prototype._readdir=function(e,t){if(t&&!d(this.symlinks,e))return this._readdirInGlobStar(e);if(d(this.cache,e)){var r=this.cache[e];if(!r||"FILE"===r)return null;if(Array.isArray(r))return r}try{return this._readdirEntries(e,n.readdirSync(e))}catch(t){return this._readdirError(e,t),null}},g.prototype._readdirEntries=function(e,t){if(!this.mark&&!this.stat)for(var r=0;r<t.length;r++){var n=t[r];n="/"===e?e+n:e+"/"+n,this.cache[n]=!0}return this.cache[e]=t,t},g.prototype._readdirError=function(e,t){switch(t.code){case"ENOTSUP":case"ENOTDIR":var r=this._makeAbs(e);if(this.cache[r]="FILE",r===this.cwdAbs){var n=new Error(t.code+" invalid cwd "+this.cwd);throw n.path=this.cwd,n.code=t.code,n}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:if(this.cache[this._makeAbs(e)]=!1,this.strict)throw t;this.silent||console.error("glob error",t)}},g.prototype._processGlobStar=function(e,t,r,n,i,o){var s=this._readdir(r,o);if(s){var a=n.slice(1),c=e?[e]:[],l=c.concat(a);this._process(l,i,!1);var u=s.length;if(!this.symlinks[r]||!o)for(var d=0;d<u;d++){if("."!==s[d].charAt(0)||this.dot){var h=c.concat(s[d],a);this._process(h,i,!0);var p=c.concat(s[d],n);this._process(p,i,!0)}}}},g.prototype._processSimple=function(e,t){var r=this._stat(e);if(this.matches[t]||(this.matches[t]=Object.create(null)),r){if(e&&c(e)&&!this.nomount){var n=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=s.join(this.root,e):(e=s.resolve(this.root,e),n&&(e+="/"))}"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e)}},g.prototype._stat=function(e){var t=this._makeAbs(e),r="/"===e.slice(-1);if(e.length>this.maxLength)return!1;if(!this.stat&&d(this.cache,t)){var i=this.cache[t];if(Array.isArray(i)&&(i="DIR"),!r||"DIR"===i)return i;if(r&&"FILE"===i)return!1}var o=this.statCache[t];if(!o){var s;try{s=n.lstatSync(t)}catch(e){if(e&&("ENOENT"===e.code||"ENOTDIR"===e.code))return this.statCache[t]=!1,!1}if(s&&s.isSymbolicLink())try{o=n.statSync(t)}catch(e){o=s}else o=s}this.statCache[t]=o;i=!0;return o&&(i=o.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||i,(!r||"FILE"!==i)&&i},g.prototype._mark=function(e){return l.mark(this,e)},g.prototype._makeAbs=function(e){return l.makeAbs(this,e)}},6458:e=>{"use strict";e.exports=function(e){if(null===e||"object"!=typeof e)return e;if(e instanceof Object)var r={__proto__:t(e)};else r=Object.create(null);return Object.getOwnPropertyNames(e).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))})),r};var t=Object.getPrototypeOf||function(e){return e.__proto__}},77:(e,t,r)=>{var n,i,o=r(5747),s=r(2161),a=r(8520),c=r(6458),l=r(1669);function u(e,t){Object.defineProperty(e,n,{get:function(){return t}})}"function"==typeof Symbol&&"function"==typeof Symbol.for?(n=Symbol.for("graceful-fs.queue"),i=Symbol.for("graceful-fs.previous")):(n="___graceful-fs.queue",i="___graceful-fs.previous");var d=function(){};if(l.debuglog?d=l.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(d=function(){var e=l.format.apply(l,arguments);e="GFS4: "+e.split(/\n/).join("\nGFS4: "),console.error(e)}),!o[n]){var h=global[n]||[];u(o,h),o.close=function(e){function t(t,r){return e.call(o,t,(function(e){e||g(),"function"==typeof r&&r.apply(this,arguments)}))}return Object.defineProperty(t,i,{value:e}),t}(o.close),o.closeSync=function(e){function t(t){e.apply(o,arguments),g()}return Object.defineProperty(t,i,{value:e}),t}(o.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",(function(){d(o[n]),r(2357).equal(o[n].length,0)}))}function p(e){s(e),e.gracefulify=p,e.createReadStream=function(t,r){return new e.ReadStream(t,r)},e.createWriteStream=function(t,r){return new e.WriteStream(t,r)};var t=e.readFile;e.readFile=function(e,r,n){"function"==typeof r&&(n=r,r=null);return function e(r,n,i){return t(r,n,(function(t){!t||"EMFILE"!==t.code&&"ENFILE"!==t.code?("function"==typeof i&&i.apply(this,arguments),g()):f([e,[r,n,i]])}))}(e,r,n)};var r=e.writeFile;e.writeFile=function(e,t,n,i){"function"==typeof n&&(i=n,n=null);return function e(t,n,i,o){return r(t,n,i,(function(r){!r||"EMFILE"!==r.code&&"ENFILE"!==r.code?("function"==typeof o&&o.apply(this,arguments),g()):f([e,[t,n,i,o]])}))}(e,t,n,i)};var n=e.appendFile;n&&(e.appendFile=function(e,t,r,i){"function"==typeof r&&(i=r,r=null);return function e(t,r,i,o){return n(t,r,i,(function(n){!n||"EMFILE"!==n.code&&"ENFILE"!==n.code?("function"==typeof o&&o.apply(this,arguments),g()):f([e,[t,r,i,o]])}))}(e,t,r,i)});var i=e.copyFile;i&&(e.copyFile=function(e,t,r,n){"function"==typeof r&&(n=r,r=0);return i(e,t,r,(function(o){!o||"EMFILE"!==o.code&&"ENFILE"!==o.code?("function"==typeof n&&n.apply(this,arguments),g()):f([i,[e,t,r,n]])}))});var o=e.readdir;function c(t){return o.apply(e,t)}if(e.readdir=function(e,t,r){var n=[e];"function"!=typeof t?n.push(t):r=t;return n.push((function(e,t){t&&t.sort&&t.sort();!e||"EMFILE"!==e.code&&"ENFILE"!==e.code?("function"==typeof r&&r.apply(this,arguments),g()):f([c,[n]])})),c(n)},"v0.8"===process.version.substr(0,4)){var l=a(e);_=l.ReadStream,E=l.WriteStream}var u=e.ReadStream;u&&(_.prototype=Object.create(u.prototype),_.prototype.open=function(){var e=this;y(e.path,e.flags,e.mode,(function(t,r){t?(e.autoClose&&e.destroy(),e.emit("error",t)):(e.fd=r,e.emit("open",r),e.read())}))});var d=e.WriteStream;d&&(E.prototype=Object.create(d.prototype),E.prototype.open=function(){var e=this;y(e.path,e.flags,e.mode,(function(t,r){t?(e.destroy(),e.emit("error",t)):(e.fd=r,e.emit("open",r))}))}),Object.defineProperty(e,"ReadStream",{get:function(){return _},set:function(e){_=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return E},set:function(e){E=e},enumerable:!0,configurable:!0});var h=_;Object.defineProperty(e,"FileReadStream",{get:function(){return h},set:function(e){h=e},enumerable:!0,configurable:!0});var m=E;function _(e,t){return this instanceof _?(u.apply(this,arguments),this):_.apply(Object.create(_.prototype),arguments)}function E(e,t){return this instanceof E?(d.apply(this,arguments),this):E.apply(Object.create(E.prototype),arguments)}Object.defineProperty(e,"FileWriteStream",{get:function(){return m},set:function(e){m=e},enumerable:!0,configurable:!0});var v=e.open;function y(e,t,r,n){return"function"==typeof r&&(n=r,r=null),function e(t,r,n,i){return v(t,r,n,(function(o,s){!o||"EMFILE"!==o.code&&"ENFILE"!==o.code?("function"==typeof i&&i.apply(this,arguments),g()):f([e,[t,r,n,i]])}))}(e,t,r,n)}return e.open=y,e}function f(e){d("ENQUEUE",e[0].name,e[1]),o[n].push(e)}function g(){var e=o[n].shift();e&&(d("RETRY",e[0].name,e[1]),e[0].apply(null,e[1]))}global[n]||u(global,o[n]),e.exports=p(c(o)),process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!o.__patched&&(e.exports=p(o),o.__patched=!0)},8520:(e,t,r)=>{var n=r(2413).Stream;e.exports=function(e){return{ReadStream:function t(r,i){if(!(this instanceof t))return new t(r,i);n.call(this);var o=this;this.path=r,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=65536,i=i||{};for(var s=Object.keys(i),a=0,c=s.length;a<c;a++){var l=s[a];this[l]=i[l]}this.encoding&&this.setEncoding(this.encoding);if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(null!==this.fd)return void process.nextTick((function(){o._read()}));e.open(this.path,this.flags,this.mode,(function(e,t){if(e)return o.emit("error",e),void(o.readable=!1);o.fd=t,o.emit("open",t),o._read()}))},WriteStream:function t(r,i){if(!(this instanceof t))return new t(r,i);n.call(this),this.path=r,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var o=Object.keys(i),s=0,a=o.length;s<a;s++){var c=o[s];this[c]=i[c]}if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],null===this.fd&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}}},2161:(e,t,r)=>{var n=r(7619),i=process.cwd,o=null,s=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return o||(o=i.call(process)),o};try{process.cwd()}catch(e){}if("function"==typeof process.chdir){var a=process.chdir;process.chdir=function(e){o=null,a.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,a)}e.exports=function(e){n.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&function(e){e.lchmod=function(t,r,i){e.open(t,n.O_WRONLY|n.O_SYMLINK,r,(function(t,n){t?i&&i(t):e.fchmod(n,r,(function(t){e.close(n,(function(e){i&&i(t||e)}))}))}))},e.lchmodSync=function(t,r){var i,o=e.openSync(t,n.O_WRONLY|n.O_SYMLINK,r),s=!0;try{i=e.fchmodSync(o,r),s=!1}finally{if(s)try{e.closeSync(o)}catch(e){}else e.closeSync(o)}return i}}(e);e.lutimes||function(e){n.hasOwnProperty("O_SYMLINK")?(e.lutimes=function(t,r,i,o){e.open(t,n.O_SYMLINK,(function(t,n){t?o&&o(t):e.futimes(n,r,i,(function(t){e.close(n,(function(e){o&&o(t||e)}))}))}))},e.lutimesSync=function(t,r,i){var o,s=e.openSync(t,n.O_SYMLINK),a=!0;try{o=e.futimesSync(s,r,i),a=!1}finally{if(a)try{e.closeSync(s)}catch(e){}else e.closeSync(s)}return o}):(e.lutimes=function(e,t,r,n){n&&process.nextTick(n)},e.lutimesSync=function(){})}(e);e.chown=o(e.chown),e.fchown=o(e.fchown),e.lchown=o(e.lchown),e.chmod=r(e.chmod),e.fchmod=r(e.fchmod),e.lchmod=r(e.lchmod),e.chownSync=a(e.chownSync),e.fchownSync=a(e.fchownSync),e.lchownSync=a(e.lchownSync),e.chmodSync=i(e.chmodSync),e.fchmodSync=i(e.fchmodSync),e.lchmodSync=i(e.lchmodSync),e.stat=c(e.stat),e.fstat=c(e.fstat),e.lstat=c(e.lstat),e.statSync=l(e.statSync),e.fstatSync=l(e.fstatSync),e.lstatSync=l(e.lstatSync),e.lchmod||(e.lchmod=function(e,t,r){r&&process.nextTick(r)},e.lchmodSync=function(){});e.lchown||(e.lchown=function(e,t,r,n){n&&process.nextTick(n)},e.lchownSync=function(){});"win32"===s&&(e.rename=(t=e.rename,function(r,n,i){var o=Date.now(),s=0;t(r,n,(function a(c){if(c&&("EACCES"===c.code||"EPERM"===c.code)&&Date.now()-o<6e4)return setTimeout((function(){e.stat(n,(function(e,o){e&&"ENOENT"===e.code?t(r,n,a):i(c)}))}),s),void(s<100&&(s+=10));i&&i(c)}))}));var t;function r(t){return t?function(r,n,i){return t.call(e,r,n,(function(e){u(e)&&(e=null),i&&i.apply(this,arguments)}))}:t}function i(t){return t?function(r,n){try{return t.call(e,r,n)}catch(e){if(!u(e))throw e}}:t}function o(t){return t?function(r,n,i,o){return t.call(e,r,n,i,(function(e){u(e)&&(e=null),o&&o.apply(this,arguments)}))}:t}function a(t){return t?function(r,n,i){try{return t.call(e,r,n,i)}catch(e){if(!u(e))throw e}}:t}function c(t){return t?function(r,n,i){function o(e,t){t&&(t.uid<0&&(t.uid+=4294967296),t.gid<0&&(t.gid+=4294967296)),i&&i.apply(this,arguments)}return"function"==typeof n&&(i=n,n=null),n?t.call(e,r,n,o):t.call(e,r,o)}:t}function l(t){return t?function(r,n){var i=n?t.call(e,r,n):t.call(e,r);return i.uid<0&&(i.uid+=4294967296),i.gid<0&&(i.gid+=4294967296),i}:t}function u(e){return!e||("ENOSYS"===e.code||!(process.getuid&&0===process.getuid()||"EINVAL"!==e.code&&"EPERM"!==e.code))}e.read=function(t){function r(r,n,i,o,s,a){var c;if(a&&"function"==typeof a){var l=0;c=function(u,d,h){if(u&&"EAGAIN"===u.code&&l<10)return l++,t.call(e,r,n,i,o,s,c);a.apply(this,arguments)}}return t.call(e,r,n,i,o,s,c)}return Object.setPrototypeOf&&Object.setPrototypeOf(r,t),r}(e.read),e.readSync=(d=e.readSync,function(t,r,n,i,o){for(var s=0;;)try{return d.call(e,t,r,n,i,o)}catch(e){if("EAGAIN"===e.code&&s<10){s++;continue}throw e}});var d}},4269:e=>{
/**
 * @preserve
 * JS Implementation of incremental MurmurHash3 (r150) (as of May 10, 2013)
 *
 * @author <a href="mailto:jensyt@gmail.com">Jens Taylor</a>
 * @see http://github.com/homebrewing/brauhaus-diff
 * @author <a href="mailto:gary.court@gmail.com">Gary Court</a>
 * @see http://github.com/garycourt/murmurhash-js
 * @author <a href="mailto:aappleby@gmail.com">Austin Appleby</a>
 * @see http://sites.google.com/site/murmurhash/
 */
!function(){var t;function r(e,n){var i=this instanceof r?this:t;if(i.reset(n),"string"==typeof e&&e.length>0&&i.hash(e),i!==this)return i}r.prototype.hash=function(e){var t,r,n,i,o;switch(o=e.length,this.len+=o,r=this.k1,n=0,this.rem){case 0:r^=o>n?65535&e.charCodeAt(n++):0;case 1:r^=o>n?(65535&e.charCodeAt(n++))<<8:0;case 2:r^=o>n?(65535&e.charCodeAt(n++))<<16:0;case 3:r^=o>n?(255&e.charCodeAt(n))<<24:0,r^=o>n?(65280&e.charCodeAt(n++))>>8:0}if(this.rem=o+this.rem&3,(o-=this.rem)>0){for(t=this.h1;t=5*(t=(t^=r=13715*(r=(r=11601*r+3432906752*(65535&r)&4294967295)<<15|r>>>17)+461832192*(65535&r)&4294967295)<<13|t>>>19)+3864292196&4294967295,!(n>=o);)r=65535&e.charCodeAt(n++)^(65535&e.charCodeAt(n++))<<8^(65535&e.charCodeAt(n++))<<16,r^=(255&(i=e.charCodeAt(n++)))<<24^(65280&i)>>8;switch(r=0,this.rem){case 3:r^=(65535&e.charCodeAt(n+2))<<16;case 2:r^=(65535&e.charCodeAt(n+1))<<8;case 1:r^=65535&e.charCodeAt(n)}this.h1=t}return this.k1=r,this},r.prototype.result=function(){var e,t;return e=this.k1,t=this.h1,e>0&&(t^=e=13715*(e=(e=11601*e+3432906752*(65535&e)&4294967295)<<15|e>>>17)+461832192*(65535&e)&4294967295),t^=this.len,t=51819*(t^=t>>>16)+2246770688*(65535&t)&4294967295,t=44597*(t^=t>>>13)+3266445312*(65535&t)&4294967295,(t^=t>>>16)>>>0},r.prototype.reset=function(e){return this.h1="number"==typeof e?e:0,this.rem=this.k1=this.len=0,this},t=new r,e.exports=r}()},7844:(e,t,r)=>{var n=r(2479),i=Object.create(null),o=r(778);function s(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n]=e[n];return r}e.exports=n((function(e,t){return i[e]?(i[e].push(t),null):(i[e]=[t],function(e){return o((function t(){var r=i[e],n=r.length,o=s(arguments);try{for(var a=0;a<n;a++)r[a].apply(null,o)}finally{r.length>n?(r.splice(0,n),process.nextTick((function(){t.apply(null,o)}))):delete i[e]}}))}(e))}))},4378:(e,t,r)=>{try{var n=r(1669);if("function"!=typeof n.inherits)throw"";e.exports=n.inherits}catch(t){e.exports=r(5717)}},5717:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},413:(e,t,r)=>{"use strict";var n=t,i=r(4293).Buffer,o=r(2087);n.toBuffer=function(e,t,r){var n;if(r=~~r,this.isV4Format(e))n=t||new i(r+4),e.split(/\./g).map((function(e){n[r++]=255&parseInt(e,10)}));else if(this.isV6Format(e)){var o,s=e.split(":",8);for(o=0;o<s.length;o++){var a;this.isV4Format(s[o])&&(a=this.toBuffer(s[o]),s[o]=a.slice(0,2).toString("hex")),a&&++o<8&&s.splice(o,0,a.slice(2,4).toString("hex"))}if(""===s[0])for(;s.length<8;)s.unshift("0");else if(""===s[s.length-1])for(;s.length<8;)s.push("0");else if(s.length<8){for(o=0;o<s.length&&""!==s[o];o++);var c=[o,1];for(o=9-s.length;o>0;o--)c.push("0");s.splice.apply(s,c)}for(n=t||new i(r+16),o=0;o<s.length;o++){var l=parseInt(s[o],16);n[r++]=l>>8&255,n[r++]=255&l}}if(!n)throw Error("Invalid ip address: "+e);return n},n.toString=function(e,t,r){t=~~t;var n=[];if(4===(r=r||e.length-t)){for(var i=0;i<r;i++)n.push(e[t+i]);n=n.join(".")}else if(16===r){for(i=0;i<r;i+=2)n.push(e.readUInt16BE(t+i).toString(16));n=(n=(n=n.join(":")).replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3")).replace(/:{3,4}/,"::")}return n};var s=/^(\d{1,3}\.){3,3}\d{1,3}$/,a=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i;function c(e){return e?e.toLowerCase():"ipv4"}n.isV4Format=function(e){return s.test(e)},n.isV6Format=function(e){return a.test(e)},n.fromPrefixLen=function(e,t){var r=4;"ipv6"===(t=e>32?"ipv6":c(t))&&(r=16);for(var o=new i(r),s=0,a=o.length;s<a;++s){var l=8;e<8&&(l=e),e-=l,o[s]=255&~(255>>l)}return n.toString(o)},n.mask=function(e,t){e=n.toBuffer(e),t=n.toBuffer(t);var r=new i(Math.max(e.length,t.length)),o=0;if(e.length===t.length)for(o=0;o<e.length;o++)r[o]=e[o]&t[o];else if(4===t.length)for(o=0;o<t.length;o++)r[o]=e[e.length-4+o]&t[o];else{for(o=0;o<r.length-6;o++)r[o]=0;for(r[10]=255,r[11]=255,o=0;o<e.length;o++)r[o+12]=e[o]&t[o+12];o+=12}for(;o<r.length;o++)r[o]=0;return n.toString(r)},n.cidr=function(e){var t=e.split("/"),r=t[0];if(2!==t.length)throw new Error("invalid CIDR subnet: "+r);var i=n.fromPrefixLen(parseInt(t[1],10));return n.mask(r,i)},n.subnet=function(e,t){for(var r=n.toLong(n.mask(e,t)),i=n.toBuffer(t),o=0,s=0;s<i.length;s++)if(255===i[s])o+=8;else for(var a=255&i[s];a;)a=a<<1&255,o++;var c=Math.pow(2,32-o);return{networkAddress:n.fromLong(r),firstAddress:c<=2?n.fromLong(r):n.fromLong(r+1),lastAddress:c<=2?n.fromLong(r+c-1):n.fromLong(r+c-2),broadcastAddress:n.fromLong(r+c-1),subnetMask:t,subnetMaskLength:o,numHosts:c<=2?c:c-2,length:c,contains:function(e){return r===n.toLong(n.mask(e,t))}}},n.cidrSubnet=function(e){var t=e.split("/"),r=t[0];if(2!==t.length)throw new Error("invalid CIDR subnet: "+r);var i=n.fromPrefixLen(parseInt(t[1],10));return n.subnet(r,i)},n.not=function(e){for(var t=n.toBuffer(e),r=0;r<t.length;r++)t[r]=255^t[r];return n.toString(t)},n.or=function(e,t){if(e=n.toBuffer(e),t=n.toBuffer(t),e.length===t.length){for(var r=0;r<e.length;++r)e[r]|=t[r];return n.toString(e)}var i=e,o=t;t.length>e.length&&(i=t,o=e);var s=i.length-o.length;for(r=s;r<i.length;++r)i[r]|=o[r-s];return n.toString(i)},n.isEqual=function(e,t){if(e=n.toBuffer(e),t=n.toBuffer(t),e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}if(4===t.length){var i=t;t=e,e=i}for(r=0;r<10;r++)if(0!==t[r])return!1;var o=t.readUInt16BE(10);if(0!==o&&65535!==o)return!1;for(r=0;r<4;r++)if(e[r]!==t[r+12])return!1;return!0},n.isPrivate=function(e){return/^(::f{4}:)?10\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?192\.168\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?172\.(1[6-9]|2\d|30|31)\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?169\.254\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^f[cd][0-9a-f]{2}:/i.test(e)||/^fe80:/i.test(e)||/^::1$/.test(e)||/^::$/.test(e)},n.isPublic=function(e){return!n.isPrivate(e)},n.isLoopback=function(e){return/^(::f{4}:)?127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})/.test(e)||/^fe80::1$/.test(e)||/^::1$/.test(e)||/^::$/.test(e)},n.loopback=function(e){if("ipv4"!==(e=c(e))&&"ipv6"!==e)throw new Error("family must be ipv4 or ipv6");return"ipv4"===e?"127.0.0.1":"fe80::1"},n.address=function(e,t){var r,i=o.networkInterfaces();if(t=c(t),e&&"private"!==e&&"public"!==e){var s=i[e].filter((function(e){return e.family.toLowerCase()===t}));if(0===s.length)return;return s[0].address}return(r=Object.keys(i).map((function(r){var o=i[r].filter((function(r){return r.family=r.family.toLowerCase(),r.family===t&&!n.isLoopback(r.address)&&(!e||("public"===e?n.isPrivate(r.address):n.isPublic(r.address)))}));return o.length?o[0].address:void 0})).filter(Boolean)).length?r[0]:n.loopback(t)},n.toLong=function(e){var t=0;return e.split(".").forEach((function(e){t<<=8,t+=parseInt(e)})),t>>>0},n.fromLong=function(e){return(e>>>24)+"."+(e>>16&255)+"."+(e>>8&255)+"."+(255&e)}},4290:e=>{"use strict";e.exports=e=>{const t=typeof e;return null!==e&&("object"===t||"function"===t)}},4501:e=>{e.exports=n,n.strict=i,n.loose=o;var t=Object.prototype.toString,r={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0};function n(e){return i(e)||o(e)}function i(e){return e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}function o(e){return r[t.call(e)]}},4276:(e,t,r)=>{"use strict";r.r(t),r.d(t,{version:()=>n,VERSION:()=>i,atob:()=>N,atobPolyfill:()=>O,btoa:()=>E,btoaPolyfill:()=>_,fromBase64:()=>x,toBase64:()=>A,utob:()=>T,encode:()=>A,encodeURI:()=>w,encodeURL:()=>w,btou:()=>I,decode:()=>x,isValid:()=>F,fromUint8Array:()=>y,toUint8Array:()=>k,extendString:()=>j,extendUint8Array:()=>B,extendBuiltins:()=>G,Base64:()=>H});const n="3.6.0",i=n,o="function"==typeof atob,s="function"==typeof btoa,a="function"==typeof Buffer,c="function"==typeof TextDecoder?new TextDecoder:void 0,l="function"==typeof TextEncoder?new TextEncoder:void 0,u=[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],d=(e=>{let t={};return e.forEach(((e,r)=>t[e]=r)),t})(u),h=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,p=String.fromCharCode.bind(String),f="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):(e,t=(e=>e))=>new Uint8Array(Array.prototype.slice.call(e,0).map(t)),g=e=>e.replace(/[+\/]/g,(e=>"+"==e?"-":"_")).replace(/=+$/m,""),m=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),_=e=>{let t,r,n,i,o="";const s=e.length%3;for(let s=0;s<e.length;){if((r=e.charCodeAt(s++))>255||(n=e.charCodeAt(s++))>255||(i=e.charCodeAt(s++))>255)throw new TypeError("invalid character found");t=r<<16|n<<8|i,o+=u[t>>18&63]+u[t>>12&63]+u[t>>6&63]+u[63&t]}return s?o.slice(0,s-3)+"===".substring(s):o},E=s?e=>btoa(e):a?e=>Buffer.from(e,"binary").toString("base64"):_,v=a?e=>Buffer.from(e).toString("base64"):e=>{let t=[];for(let r=0,n=e.length;r<n;r+=4096)t.push(p.apply(null,e.subarray(r,r+4096)));return E(t.join(""))},y=(e,t=!1)=>t?g(v(e)):v(e),S=e=>{if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?p(192|t>>>6)+p(128|63&t):p(224|t>>>12&15)+p(128|t>>>6&63)+p(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return p(240|t>>>18&7)+p(128|t>>>12&63)+p(128|t>>>6&63)+p(128|63&t)},b=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,T=e=>e.replace(b,S),P=a?e=>Buffer.from(e,"utf8").toString("base64"):l?e=>v(l.encode(e)):e=>E(T(e)),A=(e,t=!1)=>t?g(P(e)):P(e),w=e=>A(e,!0),R=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,C=e=>{switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return p(55296+(t>>>10))+p(56320+(1023&t));case 3:return p((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return p((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},I=e=>e.replace(R,C),O=e=>{if(e=e.replace(/\s+/g,""),!h.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let t,r,n,i="";for(let o=0;o<e.length;)t=d[e.charAt(o++)]<<18|d[e.charAt(o++)]<<12|(r=d[e.charAt(o++)])<<6|(n=d[e.charAt(o++)]),i+=64===r?p(t>>16&255):64===n?p(t>>16&255,t>>8&255):p(t>>16&255,t>>8&255,255&t);return i},N=o?e=>atob(m(e)):a?e=>Buffer.from(e,"base64").toString("binary"):O,M=a?e=>f(Buffer.from(e,"base64")):e=>f(N(e),(e=>e.charCodeAt(0))),k=e=>M(L(e)),D=a?e=>Buffer.from(e,"base64").toString("utf8"):c?e=>c.decode(M(e)):e=>I(N(e)),L=e=>m(e.replace(/[-_]/g,(e=>"-"==e?"+":"/"))),x=e=>D(L(e)),F=e=>{if("string"!=typeof e)return!1;const t=e.replace(/\s+/g,"").replace(/=+$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},U=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),j=function(){const e=(e,t)=>Object.defineProperty(String.prototype,e,U(t));e("fromBase64",(function(){return x(this)})),e("toBase64",(function(e){return A(this,e)})),e("toBase64URI",(function(){return A(this,!0)})),e("toBase64URL",(function(){return A(this,!0)})),e("toUint8Array",(function(){return k(this)}))},B=function(){const e=(e,t)=>Object.defineProperty(Uint8Array.prototype,e,U(t));e("toBase64",(function(e){return y(this,e)})),e("toBase64URI",(function(){return y(this,!0)})),e("toBase64URL",(function(){return y(this,!0)}))},G=()=>{j(),B()},H={version:n,VERSION:i,atob:N,atobPolyfill:O,btoa:E,btoaPolyfill:_,fromBase64:x,toBase64:A,encode:A,encodeURI:w,encodeURL:w,utob:T,btou:I,decode:x,isValid:F,fromUint8Array:y,toUint8Array:k,extendString:j,extendUint8Array:B,extendBuiltins:G}},516:(e,t,r)=>{"use strict";function n(e,t){void 0===t&&(t=!1);var r=e.length,n=0,a="",c=0,l=16,u=0,d=0,h=0,p=0,f=0;function g(t,r){for(var i=0,o=0;i<t||!r;){var s=e.charCodeAt(n);if(s>=48&&s<=57)o=16*o+s-48;else if(s>=65&&s<=70)o=16*o+s-65+10;else{if(!(s>=97&&s<=102))break;o=16*o+s-97+10}n++,i++}return i<t&&(o=-1),o}function m(){if(a="",f=0,c=n,d=u,p=h,n>=r)return c=r,l=17;var t=e.charCodeAt(n);if(i(t)){do{n++,a+=String.fromCharCode(t),t=e.charCodeAt(n)}while(i(t));return l=15}if(o(t))return n++,a+=String.fromCharCode(t),13===t&&10===e.charCodeAt(n)&&(n++,a+="\n"),u++,h=n,l=14;switch(t){case 123:return n++,l=1;case 125:return n++,l=2;case 91:return n++,l=3;case 93:return n++,l=4;case 58:return n++,l=6;case 44:return n++,l=5;case 34:return n++,a=function(){for(var t="",i=n;;){if(n>=r){t+=e.substring(i,n),f=2;break}var s=e.charCodeAt(n);if(34===s){t+=e.substring(i,n),n++;break}if(92!==s){if(s>=0&&s<=31){if(o(s)){t+=e.substring(i,n),f=2;break}f=6}n++}else{if(t+=e.substring(i,n),++n>=r){f=2;break}switch(e.charCodeAt(n++)){case 34:t+='"';break;case 92:t+="\\";break;case 47:t+="/";break;case 98:t+="\b";break;case 102:t+="\f";break;case 110:t+="\n";break;case 114:t+="\r";break;case 116:t+="\t";break;case 117:var a=g(4,!0);a>=0?t+=String.fromCharCode(a):f=4;break;default:f=5}i=n}}return t}(),l=10;case 47:var m=n-1;if(47===e.charCodeAt(n+1)){for(n+=2;n<r&&!o(e.charCodeAt(n));)n++;return a=e.substring(m,n),l=12}if(42===e.charCodeAt(n+1)){n+=2;for(var E=r-1,v=!1;n<E;){var y=e.charCodeAt(n);if(42===y&&47===e.charCodeAt(n+1)){n+=2,v=!0;break}n++,o(y)&&(13===y&&10===e.charCodeAt(n)&&n++,u++,h=n)}return v||(n++,f=1),a=e.substring(m,n),l=13}return a+=String.fromCharCode(t),n++,l=16;case 45:if(a+=String.fromCharCode(t),++n===r||!s(e.charCodeAt(n)))return l=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return a+=function(){var t=n;if(48===e.charCodeAt(n))n++;else for(n++;n<e.length&&s(e.charCodeAt(n));)n++;if(n<e.length&&46===e.charCodeAt(n)){if(!(++n<e.length&&s(e.charCodeAt(n))))return f=3,e.substring(t,n);for(n++;n<e.length&&s(e.charCodeAt(n));)n++}var r=n;if(n<e.length&&(69===e.charCodeAt(n)||101===e.charCodeAt(n)))if((++n<e.length&&43===e.charCodeAt(n)||45===e.charCodeAt(n))&&n++,n<e.length&&s(e.charCodeAt(n))){for(n++;n<e.length&&s(e.charCodeAt(n));)n++;r=n}else f=3;return e.substring(t,r)}(),l=11;default:for(;n<r&&_(t);)n++,t=e.charCodeAt(n);if(c!==n){switch(a=e.substring(c,n)){case"true":return l=8;case"false":return l=9;case"null":return l=7}return l=16}return a+=String.fromCharCode(t),n++,l=16}}function _(e){if(i(e)||o(e))return!1;switch(e){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}return{setPosition:function(e){n=e,a="",c=0,l=16,f=0},getPosition:function(){return n},scan:t?function(){var e;do{e=m()}while(e>=12&&e<=15);return e}:m,getToken:function(){return l},getTokenValue:function(){return a},getTokenOffset:function(){return c},getTokenLength:function(){return n-c},getTokenStartLine:function(){return d},getTokenStartCharacter:function(){return c-p},getTokenError:function(){return f}}}function i(e){return 32===e||9===e||11===e||12===e||160===e||5760===e||e>=8192&&e<=8203||8239===e||8287===e||12288===e||65279===e}function o(e){return 10===e||13===e||8232===e||8233===e}function s(e){return e>=48&&e<=57}function a(e,t,r){var i,o,s,a,u;if(t){for(a=t.offset,u=a+t.length,s=a;s>0&&!l(e,s-1);)s--;for(var d=u;d<e.length&&!l(e,d);)d++;o=e.substring(s,d),i=function(e,t){var r=0,n=0,i=t.tabSize||4;for(;r<e.length;){var o=e.charAt(r);if(" "===o)n++;else{if("\t"!==o)break;n+=i}r++}return Math.floor(n/i)}(o,r)}else o=e,i=0,s=0,a=0,u=e.length;var h,p=function(e,t){for(var r=0;r<t.length;r++){var n=t.charAt(r);if("\r"===n)return r+1<t.length&&"\n"===t.charAt(r+1)?"\r\n":"\r";if("\n"===n)return"\n"}return e&&e.eol||"\n"}(r,e),f=!1,g=0;h=r.insertSpaces?c(" ",r.tabSize||4):"\t";var m=n(o,!1),_=!1;function E(){return p+c(h,i+g)}function v(){var e=m.scan();for(f=!1;15===e||14===e;)f=f||14===e,e=m.scan();return _=16===e||0!==m.getTokenError(),e}var y=[];function S(r,n,i){_||t&&!(n<u&&i>a)||e.substring(n,i)===r||y.push({offset:n,length:i-n,content:r})}var b=v();if(17!==b){var T=m.getTokenOffset()+s;S(c(h,i),s,T)}for(;17!==b;){for(var P=m.getTokenOffset()+m.getTokenLength()+s,A=v(),w="",R=!1;!f&&(12===A||13===A);){S(" ",P,m.getTokenOffset()+s),P=m.getTokenOffset()+m.getTokenLength()+s,w=(R=12===A)?E():"",A=v()}if(2===A)1!==b&&(g--,w=E());else if(4===A)3!==b&&(g--,w=E());else{switch(b){case 3:case 1:g++,w=E();break;case 5:case 12:w=E();break;case 13:f?w=E():R||(w=" ");break;case 6:R||(w=" ");break;case 10:if(6===A){R||(w="");break}case 7:case 8:case 9:case 11:case 2:case 4:12===A||13===A?R||(w=" "):5!==A&&17!==A&&(_=!0);break;case 16:_=!0}!f||12!==A&&13!==A||(w=E())}17===A&&(w=r.insertFinalNewline?p:""),S(w,P,m.getTokenOffset()+s),b=A}return y}function c(e,t){for(var r="",n=0;n<t;n++)r+=e;return r}function l(e,t){return-1!=="\r\n".indexOf(e.charAt(t))}var u;function d(e,t,r){void 0===t&&(t=[]),void 0===r&&(r=u.DEFAULT);var n={type:"array",offset:-1,length:-1,children:[],parent:void 0};function i(e){"property"===n.type&&(n.length=e-n.offset,n=n.parent)}function o(e){return n.children.push(e),e}p(e,{onObjectBegin:function(e){n=o({type:"object",offset:e,length:-1,parent:n,children:[]})},onObjectProperty:function(e,t,r){(n=o({type:"property",offset:t,length:-1,parent:n,children:[]})).children.push({type:"string",value:e,offset:t,length:r,parent:n})},onObjectEnd:function(e,t){i(e+t),n.length=e+t-n.offset,n=n.parent,i(e+t)},onArrayBegin:function(e,t){n=o({type:"array",offset:e,length:-1,parent:n,children:[]})},onArrayEnd:function(e,t){n.length=e+t-n.offset,n=n.parent,i(e+t)},onLiteralValue:function(e,t,r){o({type:f(e),offset:t,length:r,parent:n,value:e}),i(t+r)},onSeparator:function(e,t,r){"property"===n.type&&(":"===e?n.colonOffset=t:","===e&&i(t))},onError:function(e,r,n){t.push({error:e,offset:r,length:n})}},r);var s=n.children[0];return s&&delete s.parent,s}function h(e,t){if(e){for(var r=e,n=0,i=t;n<i.length;n++){var o=i[n];if("string"==typeof o){if("object"!==r.type||!Array.isArray(r.children))return;for(var s=!1,a=0,c=r.children;a<c.length;a++){var l=c[a];if(Array.isArray(l.children)&&l.children[0].value===o){r=l.children[1],s=!0;break}}if(!s)return}else{var u=o;if("array"!==r.type||u<0||!Array.isArray(r.children)||u>=r.children.length)return;r=r.children[u]}}return r}}function p(e,t,r){void 0===r&&(r=u.DEFAULT);var i=n(e,!1);function o(e){return e?function(){return e(i.getTokenOffset(),i.getTokenLength(),i.getTokenStartLine(),i.getTokenStartCharacter())}:function(){return!0}}function s(e){return e?function(t){return e(t,i.getTokenOffset(),i.getTokenLength(),i.getTokenStartLine(),i.getTokenStartCharacter())}:function(){return!0}}var a=o(t.onObjectBegin),c=s(t.onObjectProperty),l=o(t.onObjectEnd),d=o(t.onArrayBegin),h=o(t.onArrayEnd),p=s(t.onLiteralValue),f=s(t.onSeparator),g=o(t.onComment),m=s(t.onError),_=r&&r.disallowComments,E=r&&r.allowTrailingComma;function v(){for(;;){var e=i.scan();switch(i.getTokenError()){case 4:y(14);break;case 5:y(15);break;case 3:y(13);break;case 1:_||y(11);break;case 2:y(12);break;case 6:y(16)}switch(e){case 12:case 13:_?y(10):g();break;case 16:y(1);break;case 15:case 14:break;default:return e}}}function y(e,t,r){if(void 0===t&&(t=[]),void 0===r&&(r=[]),m(e),t.length+r.length>0)for(var n=i.getToken();17!==n;){if(-1!==t.indexOf(n)){v();break}if(-1!==r.indexOf(n))break;n=v()}}function S(e){var t=i.getTokenValue();return e?p(t):c(t),v(),!0}function b(){switch(i.getToken()){case 3:return function(){d(),v();for(var e=!1;4!==i.getToken()&&17!==i.getToken();){if(5===i.getToken()){if(e||y(4,[],[]),f(","),v(),4===i.getToken()&&E)break}else e&&y(6,[],[]);b()||y(4,[],[4,5]),e=!0}return h(),4!==i.getToken()?y(8,[4],[]):v(),!0}();case 1:return function(){a(),v();for(var e=!1;2!==i.getToken()&&17!==i.getToken();){if(5===i.getToken()){if(e||y(4,[],[]),f(","),v(),2===i.getToken()&&E)break}else e&&y(6,[],[]);(10!==i.getToken()?(y(3,[],[2,5]),0):(S(!1),6===i.getToken()?(f(":"),v(),b()||y(4,[],[2,5])):y(5,[],[2,5]),1))||y(4,[],[2,5]),e=!0}return l(),2!==i.getToken()?y(7,[2],[]):v(),!0}();case 10:return S(!0);default:return function(){switch(i.getToken()){case 11:var e=i.getTokenValue(),t=Number(e);isNaN(t)&&(y(2),t=0),p(t);break;case 7:p(null);break;case 8:p(!0);break;case 9:p(!1);break;default:return!1}return v(),!0}()}}return v(),17===i.getToken()?!!r.allowEmptyContent||(y(4,[],[]),!1):b()?(17!==i.getToken()&&y(9,[],[]),!0):(y(4,[],[]),!1)}function f(e){switch(typeof e){case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"object":return e?Array.isArray(e)?"array":"object":"null";default:return"null"}}function g(e,t,r,n){for(var i,o=t.slice(),s=d(e,[]),a=void 0,c=void 0;o.length>0&&(c=o.pop(),void 0===(a=h(s,o))&&void 0!==r);)"string"==typeof c?((i={})[c]=r,r=i):r=[r];if(a){if("object"===a.type&&"string"==typeof c&&Array.isArray(a.children)){var l=h(a,[c]);if(void 0!==l){if(void 0===r){if(!l.parent)throw new Error("Malformed AST");var u=a.children.indexOf(l.parent),p=void 0,f=l.parent.offset+l.parent.length;if(u>0)p=(T=a.children[u-1]).offset+T.length;else if(p=a.offset+1,a.children.length>1)f=a.children[1].offset;return m(e,{offset:p,length:f-p,content:""},n)}return m(e,{offset:l.offset,length:l.length,content:JSON.stringify(r)},n)}if(void 0===r)return[];var g=JSON.stringify(c)+": "+JSON.stringify(r),_=void 0;return m(e,_=(P=n.getInsertionIndex?n.getInsertionIndex(a.children.map((function(e){return e.children[0].value}))):a.children.length)>0?{offset:(T=a.children[P-1]).offset+T.length,length:0,content:","+g}:0===a.children.length?{offset:a.offset+1,length:0,content:g}:{offset:a.offset+1,length:0,content:g+","},n)}if("array"===a.type&&"number"==typeof c&&Array.isArray(a.children)){var E=c;if(-1===E){g=""+JSON.stringify(r),_=void 0;if(0===a.children.length)_={offset:a.offset+1,length:0,content:g};else _={offset:(T=a.children[a.children.length-1]).offset+T.length,length:0,content:","+g};return m(e,_,n)}if(void 0===r&&a.children.length>=0){var v=c,y=a.children[v];_=void 0;if(1===a.children.length)_={offset:a.offset+1,length:a.length-2,content:""};else if(a.children.length-1===v){var S=(T=a.children[v-1]).offset+T.length;_={offset:S,length:a.offset+a.length-2-S,content:""}}else _={offset:y.offset,length:a.children[v+1].offset-y.offset,content:""};return m(e,_,n)}if(void 0!==r){_=void 0,g=""+JSON.stringify(r);if(!n.isArrayInsertion&&a.children.length>c){var b=a.children[c];_={offset:b.offset,length:b.length,content:g}}else if(0===a.children.length||0===c)_={offset:a.offset+1,length:0,content:0===a.children.length?g:g+","};else{var T,P=c>a.children.length?a.children.length:c;_={offset:(T=a.children[P-1]).offset+T.length,length:0,content:","+g}}return m(e,_,n)}throw new Error("Can not "+(void 0===r?"remove":n.isArrayInsertion?"insert":"modify")+" Array index "+E+" as length is not sufficient")}throw new Error("Can not add "+("number"!=typeof c?"index":"property")+" to parent of type "+a.type)}if(void 0===r)throw new Error("Can not delete in empty document");return m(e,{offset:s?s.offset:0,length:s?s.length:0,content:JSON.stringify(r)},n)}function m(e,t,r){if(!r.formattingOptions)return[t];var n=_(e,t),i=t.offset,o=t.offset+t.content.length;if(0===t.length||0===t.content.length){for(;i>0&&!l(n,i-1);)i--;for(;o<n.length&&!l(n,o);)o++}for(var s=a(n,{offset:i,length:o-i},r.formattingOptions),c=s.length-1;c>=0;c--){var u=s[c];n=_(n,u),i=Math.min(i,u.offset),o=Math.max(o,u.offset+u.length),o+=u.content.length-u.length}return[{offset:i,length:e.length-(n.length-o)-i,content:n.substring(i,o)}]}function _(e,t){return e.substring(0,t.offset)+t.content+e.substring(t.offset+t.length)}r.r(t),r.d(t,{applyEdits:()=>N,createScanner:()=>E,findNodeAtLocation:()=>b,findNodeAtOffset:()=>T,format:()=>I,getLocation:()=>v,getNodePath:()=>P,getNodeValue:()=>A,modify:()=>O,parse:()=>y,parseTree:()=>S,printParseErrorCode:()=>C,stripComments:()=>R,visit:()=>w}),function(e){e.DEFAULT={allowTrailingComma:!1}}(u||(u={}));var E=n,v=function(e,t){var r=[],n=new Object,i=void 0,o={value:{},offset:0,length:0,type:"object",parent:void 0},s=!1;function a(e,t,r,n){o.value=e,o.offset=t,o.length=r,o.type=n,o.colonOffset=void 0,i=o}try{p(e,{onObjectBegin:function(e,o){if(t<=e)throw n;i=void 0,s=t>e,r.push("")},onObjectProperty:function(e,i,o){if(t<i)throw n;if(a(e,i,o,"property"),r[r.length-1]=e,t<=i+o)throw n},onObjectEnd:function(e,o){if(t<=e)throw n;i=void 0,r.pop()},onArrayBegin:function(e,o){if(t<=e)throw n;i=void 0,r.push(0)},onArrayEnd:function(e,o){if(t<=e)throw n;i=void 0,r.pop()},onLiteralValue:function(e,r,i){if(t<r)throw n;if(a(e,r,i,f(e)),t<=r+i)throw n},onSeparator:function(e,o,a){if(t<=o)throw n;if(":"===e&&i&&"property"===i.type)i.colonOffset=o,s=!1,i=void 0;else if(","===e){var c=r[r.length-1];"number"==typeof c?r[r.length-1]=c+1:(s=!0,r[r.length-1]=""),i=void 0}}})}catch(e){if(e!==n)throw e}return{path:r,previousNode:i,isAtPropertyKey:s,matches:function(e){for(var t=0,n=0;t<e.length&&n<r.length;n++)if(e[t]===r[n]||"*"===e[t])t++;else if("**"!==e[t])return!1;return t===e.length}}},y=function(e,t,r){void 0===t&&(t=[]),void 0===r&&(r=u.DEFAULT);var n=null,i=[],o=[];function s(e){Array.isArray(i)?i.push(e):null!==n&&(i[n]=e)}return p(e,{onObjectBegin:function(){var e={};s(e),o.push(i),i=e,n=null},onObjectProperty:function(e){n=e},onObjectEnd:function(){i=o.pop()},onArrayBegin:function(){var e=[];s(e),o.push(i),i=e,n=null},onArrayEnd:function(){i=o.pop()},onLiteralValue:s,onError:function(e,r,n){t.push({error:e,offset:r,length:n})}},r),i[0]},S=d,b=h,T=function e(t,r,n){if(void 0===n&&(n=!1),function(e,t,r){return void 0===r&&(r=!1),t>=e.offset&&t<e.offset+e.length||r&&t===e.offset+e.length}(t,r,n)){var i=t.children;if(Array.isArray(i))for(var o=0;o<i.length&&i[o].offset<=r;o++){var s=e(i[o],r,n);if(s)return s}return t}},P=function e(t){if(!t.parent||!t.parent.children)return[];var r=e(t.parent);if("property"===t.parent.type){var n=t.parent.children[0].value;r.push(n)}else if("array"===t.parent.type){var i=t.parent.children.indexOf(t);-1!==i&&r.push(i)}return r},A=function e(t){switch(t.type){case"array":return t.children.map(e);case"object":for(var r=Object.create(null),n=0,i=t.children;n<i.length;n++){var o=i[n],s=o.children[1];s&&(r[o.children[0].value]=e(s))}return r;case"null":case"string":case"number":case"boolean":return t.value;default:return}},w=p,R=function(e,t){var r,i,o=n(e),s=[],a=0;do{switch(i=o.getPosition(),r=o.scan()){case 12:case 13:case 17:a!==i&&s.push(e.substring(a,i)),void 0!==t&&s.push(o.getTokenValue().replace(/[^\r\n]/g,t)),a=o.getPosition()}}while(17!==r);return s.join("")};function C(e){switch(e){case 1:return"InvalidSymbol";case 2:return"InvalidNumberFormat";case 3:return"PropertyNameExpected";case 4:return"ValueExpected";case 5:return"ColonExpected";case 6:return"CommaExpected";case 7:return"CloseBraceExpected";case 8:return"CloseBracketExpected";case 9:return"EndOfFileExpected";case 10:return"InvalidCommentToken";case 11:return"UnexpectedEndOfComment";case 12:return"UnexpectedEndOfString";case 13:return"UnexpectedEndOfNumber";case 14:return"InvalidUnicode";case 15:return"InvalidEscapeCharacter";case 16:return"InvalidCharacter"}return"<unknown ParseErrorCode>"}function I(e,t,r){return a(e,t,r)}function O(e,t,r,n){return g(e,t,r,n)}function N(e,t){for(var r=t.length-1;r>=0;r--)e=_(e,t[r]);return e}},789:(e,t,r)=>{"use strict";const n=r(5747),i=r(5622),{promisify:o}=r(1669),s=r(6625).satisfies(process.version,">=10.12.0"),a=e=>{if("win32"===process.platform){if(/[<>:"|?*]/.test(e.replace(i.parse(e).root,""))){const t=new Error(`Path contains invalid characters: ${e}`);throw t.code="EINVAL",t}}},c=e=>({...{mode:511,fs:n},...e}),l=e=>{const t=new Error(`operation not permitted, mkdir '${e}'`);return t.code="EPERM",t.errno=-4048,t.path=e,t.syscall="mkdir",t};e.exports=async(e,t)=>{a(e),t=c(t);const r=o(t.fs.mkdir),u=o(t.fs.stat);if(s&&t.fs.mkdir===n.mkdir){const n=i.resolve(e);return await r(n,{mode:t.mode,recursive:!0}),n}const d=async e=>{try{return await r(e,t.mode),e}catch(t){if("EPERM"===t.code)throw t;if("ENOENT"===t.code){if(i.dirname(e)===e)throw l(e);if(t.message.includes("null bytes"))throw t;return await d(i.dirname(e)),d(e)}try{if(!(await u(e)).isDirectory())throw new Error("The path is not a directory")}catch(e){throw t}return e}};return d(i.resolve(e))},e.exports.sync=(e,t)=>{if(a(e),t=c(t),s&&t.fs.mkdirSync===n.mkdirSync){const r=i.resolve(e);return n.mkdirSync(r,{mode:t.mode,recursive:!0}),r}const r=e=>{try{t.fs.mkdirSync(e,t.mode)}catch(n){if("EPERM"===n.code)throw n;if("ENOENT"===n.code){if(i.dirname(e)===e)throw l(e);if(n.message.includes("null bytes"))throw n;return r(i.dirname(e)),r(e)}try{if(!t.fs.statSync(e).isDirectory())throw new Error("The path is not a directory")}catch(e){throw n}}return e};return r(i.resolve(e))}},1171:(e,t,r)=>{e.exports=h,h.Minimatch=p;var n={sep:"/"};try{n=r(5622)}catch(e){}var i=h.GLOBSTAR=p.GLOBSTAR={},o=r(3644),s={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},a="[^/]",c="[^/]*?",l="().*{}+?[]^$\\!".split("").reduce((function(e,t){return e[t]=!0,e}),{});var u=/\/+/;function d(e,t){e=e||{},t=t||{};var r={};return Object.keys(t).forEach((function(e){r[e]=t[e]})),Object.keys(e).forEach((function(t){r[t]=e[t]})),r}function h(e,t,r){if("string"!=typeof t)throw new TypeError("glob pattern string required");return r||(r={}),!(!r.nocomment&&"#"===t.charAt(0))&&(""===t.trim()?""===e:new p(t,r).match(e))}function p(e,t){if(!(this instanceof p))return new p(e,t);if("string"!=typeof e)throw new TypeError("glob pattern string required");t||(t={}),e=e.trim(),"/"!==n.sep&&(e=e.split(n.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}function f(e,t){if(t||(t=this instanceof p?this.options:{}),void 0===(e=void 0===e?this.pattern:e))throw new TypeError("undefined pattern");return t.nobrace||!e.match(/\{.*\}/)?[e]:o(e)}h.filter=function(e,t){return t=t||{},function(r,n,i){return h(r,e,t)}},h.defaults=function(e){if(!e||!Object.keys(e).length)return h;var t=h,r=function(r,n,i){return t.minimatch(r,n,d(e,i))};return r.Minimatch=function(r,n){return new t.Minimatch(r,d(e,n))},r},p.defaults=function(e){return e&&Object.keys(e).length?h.defaults(e).Minimatch:p},p.prototype.debug=function(){},p.prototype.make=function(){if(this._made)return;var e=this.pattern,t=this.options;if(!t.nocomment&&"#"===e.charAt(0))return void(this.comment=!0);if(!e)return void(this.empty=!0);this.parseNegate();var r=this.globSet=this.braceExpand();t.debug&&(this.debug=console.error);this.debug(this.pattern,r),r=this.globParts=r.map((function(e){return e.split(u)})),this.debug(this.pattern,r),r=r.map((function(e,t,r){return e.map(this.parse,this)}),this),this.debug(this.pattern,r),r=r.filter((function(e){return-1===e.indexOf(!1)})),this.debug(this.pattern,r),this.set=r},p.prototype.parseNegate=function(){var e=this.pattern,t=!1,r=this.options,n=0;if(r.nonegate)return;for(var i=0,o=e.length;i<o&&"!"===e.charAt(i);i++)t=!t,n++;n&&(this.pattern=e.substr(n));this.negate=t},h.braceExpand=function(e,t){return f(e,t)},p.prototype.braceExpand=f,p.prototype.parse=function(e,t){if(e.length>65536)throw new TypeError("pattern is too long");var r=this.options;if(!r.noglobstar&&"**"===e)return i;if(""===e)return"";var n,o="",u=!!r.nocase,d=!1,h=[],p=[],f=!1,m=-1,_=-1,E="."===e.charAt(0)?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",v=this;function y(){if(n){switch(n){case"*":o+=c,u=!0;break;case"?":o+=a,u=!0;break;default:o+="\\"+n}v.debug("clearStateChar %j %j",n,o),n=!1}}for(var S,b=0,T=e.length;b<T&&(S=e.charAt(b));b++)if(this.debug("%s\t%s %s %j",e,b,o,S),d&&l[S])o+="\\"+S,d=!1;else switch(S){case"/":return!1;case"\\":y(),d=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",e,b,o,S),f){this.debug("  in class"),"!"===S&&b===_+1&&(S="^"),o+=S;continue}v.debug("call clearStateChar %j",n),y(),n=S,r.noext&&y();continue;case"(":if(f){o+="(";continue}if(!n){o+="\\(";continue}h.push({type:n,start:b-1,reStart:o.length,open:s[n].open,close:s[n].close}),o+="!"===n?"(?:(?!(?:":"(?:",this.debug("plType %j %j",n,o),n=!1;continue;case")":if(f||!h.length){o+="\\)";continue}y(),u=!0;var P=h.pop();o+=P.close,"!"===P.type&&p.push(P),P.reEnd=o.length;continue;case"|":if(f||!h.length||d){o+="\\|",d=!1;continue}y(),o+="|";continue;case"[":if(y(),f){o+="\\"+S;continue}f=!0,_=b,m=o.length,o+=S;continue;case"]":if(b===_+1||!f){o+="\\"+S,d=!1;continue}if(f){var A=e.substring(_+1,b);try{RegExp("["+A+"]")}catch(e){var w=this.parse(A,g);o=o.substr(0,m)+"\\["+w[0]+"\\]",u=u||w[1],f=!1;continue}}u=!0,f=!1,o+=S;continue;default:y(),d?d=!1:!l[S]||"^"===S&&f||(o+="\\"),o+=S}f&&(A=e.substr(_+1),w=this.parse(A,g),o=o.substr(0,m)+"\\["+w[0],u=u||w[1]);for(P=h.pop();P;P=h.pop()){var R=o.slice(P.reStart+P.open.length);this.debug("setting tail",o,P),R=R.replace(/((?:\\{2}){0,64})(\\?)\|/g,(function(e,t,r){return r||(r="\\"),t+t+r+"|"})),this.debug("tail=%j\n   %s",R,R,P,o);var C="*"===P.type?c:"?"===P.type?a:"\\"+P.type;u=!0,o=o.slice(0,P.reStart)+C+"\\("+R}y(),d&&(o+="\\\\");var I=!1;switch(o.charAt(0)){case".":case"[":case"(":I=!0}for(var O=p.length-1;O>-1;O--){var N=p[O],M=o.slice(0,N.reStart),k=o.slice(N.reStart,N.reEnd-8),D=o.slice(N.reEnd-8,N.reEnd),L=o.slice(N.reEnd);D+=L;var x=M.split("(").length-1,F=L;for(b=0;b<x;b++)F=F.replace(/\)[+*?]?/,"");var U="";""===(L=F)&&t!==g&&(U="$"),o=M+k+L+U+D}""!==o&&u&&(o="(?=.)"+o);I&&(o=E+o);if(t===g)return[o,u];if(!u)return function(e){return e.replace(/\\(.)/g,"$1")}(e);var j=r.nocase?"i":"";try{var B=new RegExp("^"+o+"$",j)}catch(e){return new RegExp("$.")}return B._glob=e,B._src=o,B};var g={};h.makeRe=function(e,t){return new p(e,t||{}).makeRe()},p.prototype.makeRe=function(){if(this.regexp||!1===this.regexp)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,r=t.noglobstar?c:t.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",n=t.nocase?"i":"",o=e.map((function(e){return e.map((function(e){return e===i?r:"string"==typeof e?function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(e):e._src})).join("\\/")})).join("|");o="^(?:"+o+")$",this.negate&&(o="^(?!"+o+").*$");try{this.regexp=new RegExp(o,n)}catch(e){this.regexp=!1}return this.regexp},h.match=function(e,t,r){var n=new p(t,r=r||{});return e=e.filter((function(e){return n.match(e)})),n.options.nonull&&!e.length&&e.push(t),e},p.prototype.match=function(e,t){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return""===e;if("/"===e&&t)return!0;var r=this.options;"/"!==n.sep&&(e=e.split(n.sep).join("/"));e=e.split(u),this.debug(this.pattern,"split",e);var i,o,s=this.set;for(this.debug(this.pattern,"set",s),o=e.length-1;o>=0&&!(i=e[o]);o--);for(o=0;o<s.length;o++){var a=s[o],c=e;if(r.matchBase&&1===a.length&&(c=[i]),this.matchOne(c,a,t))return!!r.flipNegate||!this.negate}return!r.flipNegate&&this.negate},p.prototype.matchOne=function(e,t,r){var n=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var o=0,s=0,a=e.length,c=t.length;o<a&&s<c;o++,s++){this.debug("matchOne loop");var l,u=t[s],d=e[o];if(this.debug(t,u,d),!1===u)return!1;if(u===i){this.debug("GLOBSTAR",[t,u,d]);var h=o,p=s+1;if(p===c){for(this.debug("** at the end");o<a;o++)if("."===e[o]||".."===e[o]||!n.dot&&"."===e[o].charAt(0))return!1;return!0}for(;h<a;){var f=e[h];if(this.debug("\nglobstar while",e,h,t,p,f),this.matchOne(e.slice(h),t.slice(p),r))return this.debug("globstar found match!",h,a,f),!0;if("."===f||".."===f||!n.dot&&"."===f.charAt(0)){this.debug("dot detected!",e,h,t,p);break}this.debug("globstar swallow a segment, and continue"),h++}return!(!r||(this.debug("\n>>> no match, partial?",e,h,t,p),h!==a))}if("string"==typeof u?(l=n.nocase?d.toLowerCase()===u.toLowerCase():d===u,this.debug("string match",u,d,l)):(l=d.match(u),this.debug("pattern match",u,d,l)),!l)return!1}if(o===a&&s===c)return!0;if(o===a)return r;if(s===c)return o===a-1&&""===e[o];throw new Error("wtf?")}},1890:(e,t,r)=>{const n=r(4231),i=r(3610),{mkdirpNative:o,mkdirpNativeSync:s}=r(9378),{mkdirpManual:a,mkdirpManualSync:c}=r(8600),{useNative:l,useNativeSync:u}=r(6167),d=(e,t)=>(e=i(e),t=n(t),l(t)?o(e,t):a(e,t));d.sync=(e,t)=>(e=i(e),t=n(t),u(t)?s(e,t):c(e,t)),d.native=(e,t)=>o(i(e),n(t)),d.manual=(e,t)=>a(i(e),n(t)),d.nativeSync=(e,t)=>s(i(e),n(t)),d.manualSync=(e,t)=>c(i(e),n(t)),e.exports=d},8812:(e,t,r)=>{const{dirname:n}=r(5622),i=(e,t,r)=>r===t?Promise.resolve():e.statAsync(t).then((e=>e.isDirectory()?r:void 0),(r=>"ENOENT"===r.code?i(e,n(t),t):void 0)),o=(e,t,r)=>{if(r!==t)try{return e.statSync(t).isDirectory()?r:void 0}catch(r){return"ENOENT"===r.code?o(e,n(t),t):void 0}};e.exports={findMade:i,findMadeSync:o}},8600:(e,t,r)=>{const{dirname:n}=r(5622),i=(e,t,r)=>{t.recursive=!1;const o=n(e);return o===e?t.mkdirAsync(e,t).catch((e=>{if("EISDIR"!==e.code)throw e})):t.mkdirAsync(e,t).then((()=>r||e),(n=>{if("ENOENT"===n.code)return i(o,t).then((r=>i(e,t,r)));if("EEXIST"!==n.code&&"EROFS"!==n.code)throw n;return t.statAsync(e).then((e=>{if(e.isDirectory())return r;throw n}),(()=>{throw n}))}))},o=(e,t,r)=>{const i=n(e);if(t.recursive=!1,i===e)try{return t.mkdirSync(e,t)}catch(e){if("EISDIR"!==e.code)throw e;return}try{return t.mkdirSync(e,t),r||e}catch(n){if("ENOENT"===n.code)return o(e,t,o(i,t,r));if("EEXIST"!==n.code&&"EROFS"!==n.code)throw n;try{if(!t.statSync(e).isDirectory())throw n}catch(e){throw n}}};e.exports={mkdirpManual:i,mkdirpManualSync:o}},9378:(e,t,r)=>{const{dirname:n}=r(5622),{findMade:i,findMadeSync:o}=r(8812),{mkdirpManual:s,mkdirpManualSync:a}=r(8600);e.exports={mkdirpNative:(e,t)=>{t.recursive=!0;return n(e)===e?t.mkdirAsync(e,t):i(t,e).then((r=>t.mkdirAsync(e,t).then((()=>r)).catch((r=>{if("ENOENT"===r.code)return s(e,t);throw r}))))},mkdirpNativeSync:(e,t)=>{t.recursive=!0;if(n(e)===e)return t.mkdirSync(e,t);const r=o(t,e);try{return t.mkdirSync(e,t),r}catch(r){if("ENOENT"===r.code)return a(e,t);throw r}}}},4231:(e,t,r)=>{const{promisify:n}=r(1669),i=r(5747);e.exports=e=>{if(e)if("object"==typeof e)e={mode:511&~process.umask(),fs:i,...e};else if("number"==typeof e)e={mode:e,fs:i};else{if("string"!=typeof e)throw new TypeError("invalid options argument");e={mode:parseInt(e,8),fs:i}}else e={mode:511&~process.umask(),fs:i};return e.mkdir=e.mkdir||e.fs.mkdir||i.mkdir,e.mkdirAsync=n(e.mkdir),e.stat=e.stat||e.fs.stat||i.stat,e.statAsync=n(e.stat),e.statSync=e.statSync||e.fs.statSync||i.statSync,e.mkdirSync=e.mkdirSync||e.fs.mkdirSync||i.mkdirSync,e}},3610:(e,t,r)=>{const n=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:i,parse:o}=r(5622);e.exports=e=>{if(/\0/.test(e))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:e,code:"ERR_INVALID_ARG_VALUE"});if(e=i(e),"win32"===n){const t=/[*|"<>?:]/,{root:r}=o(e);if(t.test(e.substr(r.length)))throw Object.assign(new Error("Illegal characters in path."),{path:e,code:"EINVAL"})}return e}},6167:(e,t,r)=>{const n=r(5747),i=(process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version).replace(/^v/,"").split("."),o=+i[0]>10||10==+i[0]&&+i[1]>=12,s=o?e=>e.mkdir===n.mkdir:()=>!1,a=o?e=>e.mkdirSync===n.mkdirSync:()=>!1;e.exports={useNative:s,useNativeSync:a}},778:(e,t,r)=>{var n=r(2479);function i(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function o(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}e.exports=n(i),e.exports.strict=n(o),i.proto=i((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return i(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return o(this)},configurable:!0})}))},289:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exec=void 0,t.default=s;var n=r(3129),i=function(e){return"function"==typeof e},o={"cms.verify":/^verification successful/i,genrsa:/^generating/i,pkcs12:/^mac verified ok/i,"req.new":/^generating/i,"req.verify":/^verify ok/i,rsa:/^writing rsa key/i,"smime.verify":/^verification successful/i,"x509.req":/^signature ok/i};function s(e,t,r,s){var a=t,c=r,l=s;Buffer.isBuffer(a)||(l=c,c=a,a=!1),i(c)&&(l=c,c={});var u=e.split(".").map((function(e,t){return t?"-"+e:e})),d=[];Object.keys(c).forEach((function(e){!1===c[e]?d.push(e):!0===c[e]?u.push("-"+e):Array.isArray(c[e])?c[e].forEach((function(t){u.push("-"+e,t)})):u.push("-"+e,c[e])})),u=u.concat(d);var h=(0,n.spawn)("openssl",u),p=[],f=0,g=[],m=0;return h.stdout.on("data",(function(e){f+=e.length,p.push(e)})),h.stderr.on("data",(function(e){m+=e.length,g.push(e)})),h.on("close",(function(t){var r=Buffer.concat(p,f),n=Buffer.concat(g,m).toString("utf8"),s=o[e],a=null;(t||n&&s&&!n.match(s))&&((a=new Error(n)).code=t),i(l)&&l.apply(null,[a,r])})),a&&h.stdin.write(a),h.stdin.end(),h}t.exec=s},9591:(e,t,r)=>{"use strict";const{Deflate:n,deflate:i,deflateRaw:o,gzip:s}=r(4555),{Inflate:a,inflate:c,inflateRaw:l,ungzip:u}=r(8843),d=r(1619);e.exports.Deflate=n,e.exports.deflate=i,e.exports.deflateRaw=o,e.exports.gzip=s,e.exports.Inflate=a,e.exports.inflate=c,e.exports.inflateRaw=l,e.exports.ungzip=u,e.exports.constants=d},4555:(e,t,r)=>{"use strict";const n=r(405),i=r(4236),o=r(9373),s=r(8898),a=r(2292),c=Object.prototype.toString,{Z_NO_FLUSH:l,Z_SYNC_FLUSH:u,Z_FULL_FLUSH:d,Z_FINISH:h,Z_OK:p,Z_STREAM_END:f,Z_DEFAULT_COMPRESSION:g,Z_DEFAULT_STRATEGY:m,Z_DEFLATED:_}=r(1619);function E(e){this.options=i.assign({level:g,method:_,chunkSize:16384,windowBits:15,memLevel:8,strategy:m},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;let r=n.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==p)throw new Error(s[r]);if(t.header&&n.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?o.string2buf(t.dictionary):"[object ArrayBuffer]"===c.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,r=n.deflateSetDictionary(this.strm,e),r!==p)throw new Error(s[r]);this._dict_set=!0}}function v(e,t){const r=new E(t);if(r.push(e,!0),r.err)throw r.msg||s[r.err];return r.result}E.prototype.push=function(e,t){const r=this.strm,i=this.options.chunkSize;let s,a;if(this.ended)return!1;for(a=t===~~t?t:!0===t?h:l,"string"==typeof e?r.input=o.string2buf(e):"[object ArrayBuffer]"===c.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(i),r.next_out=0,r.avail_out=i),(a===u||a===d)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if(s=n.deflate(r,a),s===f)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),s=n.deflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===p;if(0!==r.avail_out){if(a>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},E.prototype.onData=function(e){this.chunks.push(e)},E.prototype.onEnd=function(e){e===p&&(this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},e.exports.Deflate=E,e.exports.deflate=v,e.exports.deflateRaw=function(e,t){return(t=t||{}).raw=!0,v(e,t)},e.exports.gzip=function(e,t){return(t=t||{}).gzip=!0,v(e,t)},e.exports.constants=r(1619)},8843:(e,t,r)=>{"use strict";const n=r(7948),i=r(4236),o=r(9373),s=r(8898),a=r(2292),c=r(2401),l=Object.prototype.toString,{Z_NO_FLUSH:u,Z_FINISH:d,Z_OK:h,Z_STREAM_END:p,Z_NEED_DICT:f,Z_STREAM_ERROR:g,Z_DATA_ERROR:m,Z_MEM_ERROR:_}=r(1619);function E(e){this.options=i.assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;let r=n.inflateInit2(this.strm,t.windowBits);if(r!==h)throw new Error(s[r]);if(this.header=new c,n.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=o.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=n.inflateSetDictionary(this.strm,t.dictionary),r!==h)))throw new Error(s[r])}function v(e,t){const r=new E(t);if(r.push(e),r.err)throw r.msg||s[r.err];return r.result}E.prototype.push=function(e,t){const r=this.strm,i=this.options.chunkSize,s=this.options.dictionary;let a,c,E;if(this.ended)return!1;for(c=t===~~t?t:!0===t?d:u,"[object ArrayBuffer]"===l.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(0===r.avail_out&&(r.output=new Uint8Array(i),r.next_out=0,r.avail_out=i),a=n.inflate(r,c),a===f&&s&&(a=n.inflateSetDictionary(r,s),a===h?a=n.inflate(r,c):a===m&&(a=f));r.avail_in>0&&a===p&&r.state.wrap>0&&0!==e[r.next_in];)n.inflateReset(r),a=n.inflate(r,c);switch(a){case g:case m:case f:case _:return this.onEnd(a),this.ended=!0,!1}if(E=r.avail_out,r.next_out&&(0===r.avail_out||a===p))if("string"===this.options.to){let e=o.utf8border(r.output,r.next_out),t=r.next_out-e,n=o.buf2string(r.output,e);r.next_out=t,r.avail_out=i-t,t&&r.output.set(r.output.subarray(e,e+t),0),this.onData(n)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(a!==h||0!==E){if(a===p)return a=n.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(0===r.avail_in)break}}return!0},E.prototype.onData=function(e){this.chunks.push(e)},E.prototype.onEnd=function(e){e===h&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},e.exports.Inflate=E,e.exports.inflate=v,e.exports.inflateRaw=function(e,t){return(t=t||{}).raw=!0,v(e,t)},e.exports.ungzip=v,e.exports.constants=r(1619)},4236:e=>{"use strict";const t=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);e.exports.assign=function(e){const r=Array.prototype.slice.call(arguments,1);for(;r.length;){const n=r.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const r in n)t(n,r)&&(e[r]=n[r])}}return e},e.exports.flattenChunks=e=>{let t=0;for(let r=0,n=e.length;r<n;r++)t+=e[r].length;const r=new Uint8Array(t);for(let t=0,n=0,i=e.length;t<i;t++){let i=e[t];r.set(i,n),n+=i.length}return r}},9373:e=>{"use strict";let t=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){t=!1}const r=new Uint8Array(256);for(let e=0;e<256;e++)r[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;r[254]=r[254]=1,e.exports.string2buf=e=>{let t,r,n,i,o,s=e.length,a=0;for(i=0;i<s;i++)r=e.charCodeAt(i),55296==(64512&r)&&i+1<s&&(n=e.charCodeAt(i+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),i++)),a+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(a),o=0,i=0;o<a;i++)r=e.charCodeAt(i),55296==(64512&r)&&i+1<s&&(n=e.charCodeAt(i+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?t[o++]=r:r<2048?(t[o++]=192|r>>>6,t[o++]=128|63&r):r<65536?(t[o++]=224|r>>>12,t[o++]=128|r>>>6&63,t[o++]=128|63&r):(t[o++]=240|r>>>18,t[o++]=128|r>>>12&63,t[o++]=128|r>>>6&63,t[o++]=128|63&r);return t};e.exports.buf2string=(e,n)=>{let i,o;const s=n||e.length,a=new Array(2*s);for(o=0,i=0;i<s;){let t=e[i++];if(t<128){a[o++]=t;continue}let n=r[t];if(n>4)a[o++]=65533,i+=n-1;else{for(t&=2===n?31:3===n?15:7;n>1&&i<s;)t=t<<6|63&e[i++],n--;n>1?a[o++]=65533:t<65536?a[o++]=t:(t-=65536,a[o++]=55296|t>>10&1023,a[o++]=56320|1023&t)}}return((e,r)=>{if(r<65534&&e.subarray&&t)return String.fromCharCode.apply(null,e.length===r?e:e.subarray(0,r));let n="";for(let t=0;t<r;t++)n+=String.fromCharCode(e[t]);return n})(a,o)},e.exports.utf8border=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+r[e[n]]>t?n:t}},6069:e=>{"use strict";e.exports=(e,t,r,n)=>{let i=65535&e|0,o=e>>>16&65535|0,s=0;for(;0!==r;){s=r>2e3?2e3:r,r-=s;do{i=i+t[n++]|0,o=o+i|0}while(--s);i%=65521,o%=65521}return i|o<<16|0}},1619:e=>{"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},2869:e=>{"use strict";const t=new Uint32Array((()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t})());e.exports=(e,r,n,i)=>{const o=t,s=i+n;e^=-1;for(let t=i;t<s;t++)e=e>>>8^o[255&(e^r[t])];return-1^e}},405:(e,t,r)=>{"use strict";const{_tr_init:n,_tr_stored_block:i,_tr_flush_block:o,_tr_tally:s,_tr_align:a}=r(342),c=r(6069),l=r(2869),u=r(8898),{Z_NO_FLUSH:d,Z_PARTIAL_FLUSH:h,Z_FULL_FLUSH:p,Z_FINISH:f,Z_BLOCK:g,Z_OK:m,Z_STREAM_END:_,Z_STREAM_ERROR:E,Z_DATA_ERROR:v,Z_BUF_ERROR:y,Z_DEFAULT_COMPRESSION:S,Z_FILTERED:b,Z_HUFFMAN_ONLY:T,Z_RLE:P,Z_FIXED:A,Z_DEFAULT_STRATEGY:w,Z_UNKNOWN:R,Z_DEFLATED:C}=r(1619),I=258,O=262,N=103,M=113,k=666,D=(e,t)=>(e.msg=u[t],t),L=e=>(e<<1)-(e>4?9:0),x=e=>{let t=e.length;for(;--t>=0;)e[t]=0};let F=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask;const U=e=>{const t=e.state;let r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))},j=(e,t)=>{o(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,U(e.strm)},B=(e,t)=>{e.pending_buf[e.pending++]=t},G=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},H=(e,t,r,n)=>{let i=e.avail_in;return i>n&&(i=n),0===i?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),r),1===e.state.wrap?e.adler=c(e.adler,t,i,r):2===e.state.wrap&&(e.adler=l(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)},V=(e,t)=>{let r,n,i=e.max_chain_length,o=e.strstart,s=e.prev_length,a=e.nice_match;const c=e.strstart>e.w_size-O?e.strstart-(e.w_size-O):0,l=e.window,u=e.w_mask,d=e.prev,h=e.strstart+I;let p=l[o+s-1],f=l[o+s];e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do{if(r=t,l[r+s]===f&&l[r+s-1]===p&&l[r]===l[o]&&l[++r]===l[o+1]){o+=2,r++;do{}while(l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&o<h);if(n=I-(h-o),o=h-I,n>s){if(e.match_start=t,s=n,n>=a)break;p=l[o+s-1],f=l[o+s]}}}while((t=d[t&u])>c&&0!=--i);return s<=e.lookahead?s:e.lookahead},W=e=>{const t=e.w_size;let r,n,i,o,s;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-O)){e.window.set(e.window.subarray(t,t+t),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,n=e.hash_size,r=n;do{i=e.head[--r],e.head[r]=i>=t?i-t:0}while(--n);n=t,r=n;do{i=e.prev[--r],e.prev[r]=i>=t?i-t:0}while(--n);o+=t}if(0===e.strm.avail_in)break;if(n=H(e.strm,e.window,e.strstart+e.lookahead,o),e.lookahead+=n,e.lookahead+e.insert>=3)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=F(e,e.ins_h,e.window[s+1]);e.insert&&(e.ins_h=F(e,e.ins_h,e.window[s+3-1]),e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<O&&0!==e.strm.avail_in)},q=(e,t)=>{let r,n;for(;;){if(e.lookahead<O){if(W(e),e.lookahead<O&&t===d)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=F(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-O&&(e.match_length=V(e,r)),e.match_length>=3)if(n=s(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=F(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=F(e,e.ins_h,e.window[e.strstart+1]);else n=s(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(j(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===f?(j(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(j(e,!1),0===e.strm.avail_out)?1:2},$=(e,t)=>{let r,n,i;for(;;){if(e.lookahead<O){if(W(e),e.lookahead<O&&t===d)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=F(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-O&&(e.match_length=V(e,r),e.match_length<=5&&(e.strategy===b||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,n=s(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=F(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(j(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(n=s(e,0,e.window[e.strstart-1]),n&&j(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=s(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===f?(j(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(j(e,!1),0===e.strm.avail_out)?1:2};function z(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}const Y=[new z(0,0,0,0,((e,t)=>{let r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(W(e),0===e.lookahead&&t===d)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;const n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,j(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-O&&(j(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===f?(j(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(j(e,!1),e.strm.avail_out),1)})),new z(4,4,8,4,q),new z(4,5,16,8,q),new z(4,6,32,32,q),new z(4,4,16,16,$),new z(8,16,32,32,$),new z(8,16,128,128,$),new z(8,32,128,256,$),new z(32,128,258,1024,$),new z(32,258,258,4096,$)];function X(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=C,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),x(this.dyn_ltree),x(this.dyn_dtree),x(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),x(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),x(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const K=e=>{if(!e||!e.state)return D(e,E);e.total_in=e.total_out=0,e.data_type=R;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:M,e.adler=2===t.wrap?0:1,t.last_flush=d,n(t),m},J=e=>{const t=K(e);var r;return t===m&&((r=e.state).window_size=2*r.w_size,x(r.head),r.max_lazy_match=Y[r.level].max_lazy,r.good_match=Y[r.level].good_length,r.nice_match=Y[r.level].nice_length,r.max_chain_length=Y[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=2,r.match_available=0,r.ins_h=0),t},Q=(e,t,r,n,i,o)=>{if(!e)return E;let s=1;if(t===S&&(t=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),i<1||i>9||r!==C||n<8||n>15||t<0||t>9||o<0||o>A)return D(e,E);8===n&&(n=9);const a=new X;return e.state=a,a.strm=e,a.wrap=s,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=t,a.strategy=o,a.method=r,J(e)};e.exports.deflateInit=(e,t)=>Q(e,t,C,15,8,w),e.exports.deflateInit2=Q,e.exports.deflateReset=J,e.exports.deflateResetKeep=K,e.exports.deflateSetHeader=(e,t)=>e&&e.state?2!==e.state.wrap?E:(e.state.gzhead=t,m):E,e.exports.deflate=(e,t)=>{let r,n;if(!e||!e.state||t>g||t<0)return e?D(e,E):E;const o=e.state;if(!e.output||!e.input&&0!==e.avail_in||o.status===k&&t!==f)return D(e,0===e.avail_out?y:E);o.strm=e;const c=o.last_flush;if(o.last_flush=t,42===o.status)if(2===o.wrap)e.adler=0,B(o,31),B(o,139),B(o,8),o.gzhead?(B(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),B(o,255&o.gzhead.time),B(o,o.gzhead.time>>8&255),B(o,o.gzhead.time>>16&255),B(o,o.gzhead.time>>24&255),B(o,9===o.level?2:o.strategy>=T||o.level<2?4:0),B(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(B(o,255&o.gzhead.extra.length),B(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(e.adler=l(e.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=69):(B(o,0),B(o,0),B(o,0),B(o,0),B(o,0),B(o,9===o.level?2:o.strategy>=T||o.level<2?4:0),B(o,3),o.status=M);else{let t=C+(o.w_bits-8<<4)<<8,r=-1;r=o.strategy>=T||o.level<2?0:o.level<6?1:6===o.level?2:3,t|=r<<6,0!==o.strstart&&(t|=32),t+=31-t%31,o.status=M,G(o,t),0!==o.strstart&&(G(o,e.adler>>>16),G(o,65535&e.adler)),e.adler=1}if(69===o.status)if(o.gzhead.extra){for(r=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>r&&(e.adler=l(e.adler,o.pending_buf,o.pending-r,r)),U(e),r=o.pending,o.pending!==o.pending_buf_size));)B(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>r&&(e.adler=l(e.adler,o.pending_buf,o.pending-r,r)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=73)}else o.status=73;if(73===o.status)if(o.gzhead.name){r=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>r&&(e.adler=l(e.adler,o.pending_buf,o.pending-r,r)),U(e),r=o.pending,o.pending===o.pending_buf_size)){n=1;break}n=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,B(o,n)}while(0!==n);o.gzhead.hcrc&&o.pending>r&&(e.adler=l(e.adler,o.pending_buf,o.pending-r,r)),0===n&&(o.gzindex=0,o.status=91)}else o.status=91;if(91===o.status)if(o.gzhead.comment){r=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>r&&(e.adler=l(e.adler,o.pending_buf,o.pending-r,r)),U(e),r=o.pending,o.pending===o.pending_buf_size)){n=1;break}n=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,B(o,n)}while(0!==n);o.gzhead.hcrc&&o.pending>r&&(e.adler=l(e.adler,o.pending_buf,o.pending-r,r)),0===n&&(o.status=N)}else o.status=N;if(o.status===N&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&U(e),o.pending+2<=o.pending_buf_size&&(B(o,255&e.adler),B(o,e.adler>>8&255),e.adler=0,o.status=M)):o.status=M),0!==o.pending){if(U(e),0===e.avail_out)return o.last_flush=-1,m}else if(0===e.avail_in&&L(t)<=L(c)&&t!==f)return D(e,y);if(o.status===k&&0!==e.avail_in)return D(e,y);if(0!==e.avail_in||0!==o.lookahead||t!==d&&o.status!==k){let r=o.strategy===T?((e,t)=>{let r;for(;;){if(0===e.lookahead&&(W(e),0===e.lookahead)){if(t===d)return 1;break}if(e.match_length=0,r=s(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(j(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===f?(j(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(j(e,!1),0===e.strm.avail_out)?1:2})(o,t):o.strategy===P?((e,t)=>{let r,n,i,o;const a=e.window;for(;;){if(e.lookahead<=I){if(W(e),e.lookahead<=I&&t===d)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=e.strstart-1,n=a[i],n===a[++i]&&n===a[++i]&&n===a[++i])){o=e.strstart+I;do{}while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<o);e.match_length=I-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=s(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=s(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(j(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===f?(j(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(j(e,!1),0===e.strm.avail_out)?1:2})(o,t):Y[o.level].func(o,t);if(3!==r&&4!==r||(o.status=k),1===r||3===r)return 0===e.avail_out&&(o.last_flush=-1),m;if(2===r&&(t===h?a(o):t!==g&&(i(o,0,0,!1),t===p&&(x(o.head),0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),U(e),0===e.avail_out))return o.last_flush=-1,m}return t!==f?m:o.wrap<=0?_:(2===o.wrap?(B(o,255&e.adler),B(o,e.adler>>8&255),B(o,e.adler>>16&255),B(o,e.adler>>24&255),B(o,255&e.total_in),B(o,e.total_in>>8&255),B(o,e.total_in>>16&255),B(o,e.total_in>>24&255)):(G(o,e.adler>>>16),G(o,65535&e.adler)),U(e),o.wrap>0&&(o.wrap=-o.wrap),0!==o.pending?m:_)},e.exports.deflateEnd=e=>{if(!e||!e.state)return E;const t=e.state.status;return 42!==t&&69!==t&&73!==t&&91!==t&&t!==N&&t!==M&&t!==k?D(e,E):(e.state=null,t===M?D(e,v):m)},e.exports.deflateSetDictionary=(e,t)=>{let r=t.length;if(!e||!e.state)return E;const n=e.state,i=n.wrap;if(2===i||1===i&&42!==n.status||n.lookahead)return E;if(1===i&&(e.adler=c(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){0===i&&(x(n.head),n.strstart=0,n.block_start=0,n.insert=0);let e=new Uint8Array(n.w_size);e.set(t.subarray(r-n.w_size,r),0),t=e,r=n.w_size}const o=e.avail_in,s=e.next_in,a=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,W(n);n.lookahead>=3;){let e=n.strstart,t=n.lookahead-2;do{n.ins_h=F(n,n.ins_h,n.window[e+3-1]),n.prev[e&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=e,e++}while(--t);n.strstart=e,n.lookahead=2,W(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=s,e.input=a,e.avail_in=o,n.wrap=i,m},e.exports.deflateInfo="pako deflate (from Nodeca project)"},2401:e=>{"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},4264:e=>{"use strict";e.exports=function(e,t){let r,n,i,o,s,a,c,l,u,d,h,p,f,g,m,_,E,v,y,S,b,T,P,A;const w=e.state;r=e.next_in,P=e.input,n=r+(e.avail_in-5),i=e.next_out,A=e.output,o=i-(t-e.avail_out),s=i+(e.avail_out-257),a=w.dmax,c=w.wsize,l=w.whave,u=w.wnext,d=w.window,h=w.hold,p=w.bits,f=w.lencode,g=w.distcode,m=(1<<w.lenbits)-1,_=(1<<w.distbits)-1;e:do{p<15&&(h+=P[r++]<<p,p+=8,h+=P[r++]<<p,p+=8),E=f[h&m];t:for(;;){if(v=E>>>24,h>>>=v,p-=v,v=E>>>16&255,0===v)A[i++]=65535&E;else{if(!(16&v)){if(0==(64&v)){E=f[(65535&E)+(h&(1<<v)-1)];continue t}if(32&v){w.mode=12;break e}e.msg="invalid literal/length code",w.mode=30;break e}y=65535&E,v&=15,v&&(p<v&&(h+=P[r++]<<p,p+=8),y+=h&(1<<v)-1,h>>>=v,p-=v),p<15&&(h+=P[r++]<<p,p+=8,h+=P[r++]<<p,p+=8),E=g[h&_];r:for(;;){if(v=E>>>24,h>>>=v,p-=v,v=E>>>16&255,!(16&v)){if(0==(64&v)){E=g[(65535&E)+(h&(1<<v)-1)];continue r}e.msg="invalid distance code",w.mode=30;break e}if(S=65535&E,v&=15,p<v&&(h+=P[r++]<<p,p+=8,p<v&&(h+=P[r++]<<p,p+=8)),S+=h&(1<<v)-1,S>a){e.msg="invalid distance too far back",w.mode=30;break e}if(h>>>=v,p-=v,v=i-o,S>v){if(v=S-v,v>l&&w.sane){e.msg="invalid distance too far back",w.mode=30;break e}if(b=0,T=d,0===u){if(b+=c-v,v<y){y-=v;do{A[i++]=d[b++]}while(--v);b=i-S,T=A}}else if(u<v){if(b+=c+u-v,v-=u,v<y){y-=v;do{A[i++]=d[b++]}while(--v);if(b=0,u<y){v=u,y-=v;do{A[i++]=d[b++]}while(--v);b=i-S,T=A}}}else if(b+=u-v,v<y){y-=v;do{A[i++]=d[b++]}while(--v);b=i-S,T=A}for(;y>2;)A[i++]=T[b++],A[i++]=T[b++],A[i++]=T[b++],y-=3;y&&(A[i++]=T[b++],y>1&&(A[i++]=T[b++]))}else{b=i-S;do{A[i++]=A[b++],A[i++]=A[b++],A[i++]=A[b++],y-=3}while(y>2);y&&(A[i++]=A[b++],y>1&&(A[i++]=A[b++]))}break}}break}}while(r<n&&i<s);y=p>>3,r-=y,p-=y<<3,h&=(1<<p)-1,e.next_in=r,e.next_out=i,e.avail_in=r<n?n-r+5:5-(r-n),e.avail_out=i<s?s-i+257:257-(i-s),w.hold=h,w.bits=p}},7948:(e,t,r)=>{"use strict";const n=r(6069),i=r(2869),o=r(4264),s=r(9241),{Z_FINISH:a,Z_BLOCK:c,Z_TREES:l,Z_OK:u,Z_STREAM_END:d,Z_NEED_DICT:h,Z_STREAM_ERROR:p,Z_DATA_ERROR:f,Z_MEM_ERROR:g,Z_BUF_ERROR:m,Z_DEFLATED:_}=r(1619),E=12,v=30,y=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function S(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const b=e=>{if(!e||!e.state)return p;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,u},T=e=>{if(!e||!e.state)return p;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,b(e)},P=(e,t)=>{let r;if(!e||!e.state)return p;const n=e.state;return t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?p:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,T(e))},A=(e,t)=>{if(!e)return p;const r=new S;e.state=r,r.window=null;const n=P(e,t);return n!==u&&(e.state=null),n};let w,R,C=!0;const I=e=>{if(C){w=new Int32Array(512),R=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(1,e.lens,0,288,w,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(2,e.lens,0,32,R,0,e.work,{bits:5}),C=!1}e.lencode=w,e.lenbits=9,e.distcode=R,e.distbits=5},O=(e,t,r,n)=>{let i;const o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),n>=o.wsize?(o.window.set(t.subarray(r-o.wsize,r),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>n&&(i=n),o.window.set(t.subarray(r-n,r-n+i),o.wnext),(n-=i)?(o.window.set(t.subarray(r-n,r),0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0};e.exports.inflateReset=T,e.exports.inflateReset2=P,e.exports.inflateResetKeep=b,e.exports.inflateInit=e=>A(e,15),e.exports.inflateInit2=A,e.exports.inflate=(e,t)=>{let r,S,b,T,P,A,w,R,C,N,M,k,D,L,x,F,U,j,B,G,H,V,W=0;const q=new Uint8Array(4);let $,z;const Y=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return p;r=e.state,r.mode===E&&(r.mode=13),P=e.next_out,b=e.output,w=e.avail_out,T=e.next_in,S=e.input,A=e.avail_in,R=r.hold,C=r.bits,N=A,M=w,V=u;e:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;C<16;){if(0===A)break e;A--,R+=S[T++]<<C,C+=8}if(2&r.wrap&&35615===R){r.check=0,q[0]=255&R,q[1]=R>>>8&255,r.check=i(r.check,q,2,0),R=0,C=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&R)<<8)+(R>>8))%31){e.msg="incorrect header check",r.mode=v;break}if((15&R)!==_){e.msg="unknown compression method",r.mode=v;break}if(R>>>=4,C-=4,H=8+(15&R),0===r.wbits)r.wbits=H;else if(H>r.wbits){e.msg="invalid window size",r.mode=v;break}r.dmax=1<<r.wbits,e.adler=r.check=1,r.mode=512&R?10:E,R=0,C=0;break;case 2:for(;C<16;){if(0===A)break e;A--,R+=S[T++]<<C,C+=8}if(r.flags=R,(255&r.flags)!==_){e.msg="unknown compression method",r.mode=v;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=v;break}r.head&&(r.head.text=R>>8&1),512&r.flags&&(q[0]=255&R,q[1]=R>>>8&255,r.check=i(r.check,q,2,0)),R=0,C=0,r.mode=3;case 3:for(;C<32;){if(0===A)break e;A--,R+=S[T++]<<C,C+=8}r.head&&(r.head.time=R),512&r.flags&&(q[0]=255&R,q[1]=R>>>8&255,q[2]=R>>>16&255,q[3]=R>>>24&255,r.check=i(r.check,q,4,0)),R=0,C=0,r.mode=4;case 4:for(;C<16;){if(0===A)break e;A--,R+=S[T++]<<C,C+=8}r.head&&(r.head.xflags=255&R,r.head.os=R>>8),512&r.flags&&(q[0]=255&R,q[1]=R>>>8&255,r.check=i(r.check,q,2,0)),R=0,C=0,r.mode=5;case 5:if(1024&r.flags){for(;C<16;){if(0===A)break e;A--,R+=S[T++]<<C,C+=8}r.length=R,r.head&&(r.head.extra_len=R),512&r.flags&&(q[0]=255&R,q[1]=R>>>8&255,r.check=i(r.check,q,2,0)),R=0,C=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(k=r.length,k>A&&(k=A),k&&(r.head&&(H=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(S.subarray(T,T+k),H)),512&r.flags&&(r.check=i(r.check,S,k,T)),A-=k,T+=k,r.length-=k),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===A)break e;k=0;do{H=S[T+k++],r.head&&H&&r.length<65536&&(r.head.name+=String.fromCharCode(H))}while(H&&k<A);if(512&r.flags&&(r.check=i(r.check,S,k,T)),A-=k,T+=k,H)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===A)break e;k=0;do{H=S[T+k++],r.head&&H&&r.length<65536&&(r.head.comment+=String.fromCharCode(H))}while(H&&k<A);if(512&r.flags&&(r.check=i(r.check,S,k,T)),A-=k,T+=k,H)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;C<16;){if(0===A)break e;A--,R+=S[T++]<<C,C+=8}if(R!==(65535&r.check)){e.msg="header crc mismatch",r.mode=v;break}R=0,C=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=E;break;case 10:for(;C<32;){if(0===A)break e;A--,R+=S[T++]<<C,C+=8}e.adler=r.check=y(R),R=0,C=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=P,e.avail_out=w,e.next_in=T,e.avail_in=A,r.hold=R,r.bits=C,h;e.adler=r.check=1,r.mode=E;case E:if(t===c||t===l)break e;case 13:if(r.last){R>>>=7&C,C-=7&C,r.mode=27;break}for(;C<3;){if(0===A)break e;A--,R+=S[T++]<<C,C+=8}switch(r.last=1&R,R>>>=1,C-=1,3&R){case 0:r.mode=14;break;case 1:if(I(r),r.mode=20,t===l){R>>>=2,C-=2;break e}break;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=v}R>>>=2,C-=2;break;case 14:for(R>>>=7&C,C-=7&C;C<32;){if(0===A)break e;A--,R+=S[T++]<<C,C+=8}if((65535&R)!=(R>>>16^65535)){e.msg="invalid stored block lengths",r.mode=v;break}if(r.length=65535&R,R=0,C=0,r.mode=15,t===l)break e;case 15:r.mode=16;case 16:if(k=r.length,k){if(k>A&&(k=A),k>w&&(k=w),0===k)break e;b.set(S.subarray(T,T+k),P),A-=k,T+=k,w-=k,P+=k,r.length-=k;break}r.mode=E;break;case 17:for(;C<14;){if(0===A)break e;A--,R+=S[T++]<<C,C+=8}if(r.nlen=257+(31&R),R>>>=5,C-=5,r.ndist=1+(31&R),R>>>=5,C-=5,r.ncode=4+(15&R),R>>>=4,C-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=v;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;C<3;){if(0===A)break e;A--,R+=S[T++]<<C,C+=8}r.lens[Y[r.have++]]=7&R,R>>>=3,C-=3}for(;r.have<19;)r.lens[Y[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,$={bits:r.lenbits},V=s(0,r.lens,0,19,r.lencode,0,r.work,$),r.lenbits=$.bits,V){e.msg="invalid code lengths set",r.mode=v;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;W=r.lencode[R&(1<<r.lenbits)-1],x=W>>>24,F=W>>>16&255,U=65535&W,!(x<=C);){if(0===A)break e;A--,R+=S[T++]<<C,C+=8}if(U<16)R>>>=x,C-=x,r.lens[r.have++]=U;else{if(16===U){for(z=x+2;C<z;){if(0===A)break e;A--,R+=S[T++]<<C,C+=8}if(R>>>=x,C-=x,0===r.have){e.msg="invalid bit length repeat",r.mode=v;break}H=r.lens[r.have-1],k=3+(3&R),R>>>=2,C-=2}else if(17===U){for(z=x+3;C<z;){if(0===A)break e;A--,R+=S[T++]<<C,C+=8}R>>>=x,C-=x,H=0,k=3+(7&R),R>>>=3,C-=3}else{for(z=x+7;C<z;){if(0===A)break e;A--,R+=S[T++]<<C,C+=8}R>>>=x,C-=x,H=0,k=11+(127&R),R>>>=7,C-=7}if(r.have+k>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=v;break}for(;k--;)r.lens[r.have++]=H}}if(r.mode===v)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=v;break}if(r.lenbits=9,$={bits:r.lenbits},V=s(1,r.lens,0,r.nlen,r.lencode,0,r.work,$),r.lenbits=$.bits,V){e.msg="invalid literal/lengths set",r.mode=v;break}if(r.distbits=6,r.distcode=r.distdyn,$={bits:r.distbits},V=s(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,$),r.distbits=$.bits,V){e.msg="invalid distances set",r.mode=v;break}if(r.mode=20,t===l)break e;case 20:r.mode=21;case 21:if(A>=6&&w>=258){e.next_out=P,e.avail_out=w,e.next_in=T,e.avail_in=A,r.hold=R,r.bits=C,o(e,M),P=e.next_out,b=e.output,w=e.avail_out,T=e.next_in,S=e.input,A=e.avail_in,R=r.hold,C=r.bits,r.mode===E&&(r.back=-1);break}for(r.back=0;W=r.lencode[R&(1<<r.lenbits)-1],x=W>>>24,F=W>>>16&255,U=65535&W,!(x<=C);){if(0===A)break e;A--,R+=S[T++]<<C,C+=8}if(F&&0==(240&F)){for(j=x,B=F,G=U;W=r.lencode[G+((R&(1<<j+B)-1)>>j)],x=W>>>24,F=W>>>16&255,U=65535&W,!(j+x<=C);){if(0===A)break e;A--,R+=S[T++]<<C,C+=8}R>>>=j,C-=j,r.back+=j}if(R>>>=x,C-=x,r.back+=x,r.length=U,0===F){r.mode=26;break}if(32&F){r.back=-1,r.mode=E;break}if(64&F){e.msg="invalid literal/length code",r.mode=v;break}r.extra=15&F,r.mode=22;case 22:if(r.extra){for(z=r.extra;C<z;){if(0===A)break e;A--,R+=S[T++]<<C,C+=8}r.length+=R&(1<<r.extra)-1,R>>>=r.extra,C-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;W=r.distcode[R&(1<<r.distbits)-1],x=W>>>24,F=W>>>16&255,U=65535&W,!(x<=C);){if(0===A)break e;A--,R+=S[T++]<<C,C+=8}if(0==(240&F)){for(j=x,B=F,G=U;W=r.distcode[G+((R&(1<<j+B)-1)>>j)],x=W>>>24,F=W>>>16&255,U=65535&W,!(j+x<=C);){if(0===A)break e;A--,R+=S[T++]<<C,C+=8}R>>>=j,C-=j,r.back+=j}if(R>>>=x,C-=x,r.back+=x,64&F){e.msg="invalid distance code",r.mode=v;break}r.offset=U,r.extra=15&F,r.mode=24;case 24:if(r.extra){for(z=r.extra;C<z;){if(0===A)break e;A--,R+=S[T++]<<C,C+=8}r.offset+=R&(1<<r.extra)-1,R>>>=r.extra,C-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=v;break}r.mode=25;case 25:if(0===w)break e;if(k=M-w,r.offset>k){if(k=r.offset-k,k>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=v;break}k>r.wnext?(k-=r.wnext,D=r.wsize-k):D=r.wnext-k,k>r.length&&(k=r.length),L=r.window}else L=b,D=P-r.offset,k=r.length;k>w&&(k=w),w-=k,r.length-=k;do{b[P++]=L[D++]}while(--k);0===r.length&&(r.mode=21);break;case 26:if(0===w)break e;b[P++]=r.length,w--,r.mode=21;break;case 27:if(r.wrap){for(;C<32;){if(0===A)break e;A--,R|=S[T++]<<C,C+=8}if(M-=w,e.total_out+=M,r.total+=M,M&&(e.adler=r.check=r.flags?i(r.check,b,M,P-M):n(r.check,b,M,P-M)),M=w,(r.flags?R:y(R))!==r.check){e.msg="incorrect data check",r.mode=v;break}R=0,C=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;C<32;){if(0===A)break e;A--,R+=S[T++]<<C,C+=8}if(R!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=v;break}R=0,C=0}r.mode=29;case 29:V=d;break e;case v:V=f;break e;case 31:return g;case 32:default:return p}return e.next_out=P,e.avail_out=w,e.next_in=T,e.avail_in=A,r.hold=R,r.bits=C,(r.wsize||M!==e.avail_out&&r.mode<v&&(r.mode<27||t!==a))&&O(e,e.output,e.next_out,M-e.avail_out)?(r.mode=31,g):(N-=e.avail_in,M-=e.avail_out,e.total_in+=N,e.total_out+=M,r.total+=M,r.wrap&&M&&(e.adler=r.check=r.flags?i(r.check,b,M,e.next_out-M):n(r.check,b,M,e.next_out-M)),e.data_type=r.bits+(r.last?64:0)+(r.mode===E?128:0)+(20===r.mode||15===r.mode?256:0),(0===N&&0===M||t===a)&&V===u&&(V=m),V)},e.exports.inflateEnd=e=>{if(!e||!e.state)return p;let t=e.state;return t.window&&(t.window=null),e.state=null,u},e.exports.inflateGetHeader=(e,t)=>{if(!e||!e.state)return p;const r=e.state;return 0==(2&r.wrap)?p:(r.head=t,t.done=!1,u)},e.exports.inflateSetDictionary=(e,t)=>{const r=t.length;let i,o,s;return e&&e.state?(i=e.state,0!==i.wrap&&11!==i.mode?p:11===i.mode&&(o=1,o=n(o,t,r,0),o!==i.check)?f:(s=O(e,t,r,r),s?(i.mode=31,g):(i.havedict=1,u))):p},e.exports.inflateInfo="pako inflate (from Nodeca project)"},9241:e=>{"use strict";const t=15,r=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),n=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),i=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),o=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);e.exports=(e,s,a,c,l,u,d,h)=>{const p=h.bits;let f,g,m,_,E,v,y=0,S=0,b=0,T=0,P=0,A=0,w=0,R=0,C=0,I=0,O=null,N=0;const M=new Uint16Array(16),k=new Uint16Array(16);let D,L,x,F=null,U=0;for(y=0;y<=t;y++)M[y]=0;for(S=0;S<c;S++)M[s[a+S]]++;for(P=p,T=t;T>=1&&0===M[T];T--);if(P>T&&(P=T),0===T)return l[u++]=20971520,l[u++]=20971520,h.bits=1,0;for(b=1;b<T&&0===M[b];b++);for(P<b&&(P=b),R=1,y=1;y<=t;y++)if(R<<=1,R-=M[y],R<0)return-1;if(R>0&&(0===e||1!==T))return-1;for(k[1]=0,y=1;y<t;y++)k[y+1]=k[y]+M[y];for(S=0;S<c;S++)0!==s[a+S]&&(d[k[s[a+S]]++]=S);if(0===e?(O=F=d,v=19):1===e?(O=r,N-=257,F=n,U-=257,v=256):(O=i,F=o,v=-1),I=0,S=0,y=b,E=u,A=P,w=0,m=-1,C=1<<P,_=C-1,1===e&&C>852||2===e&&C>592)return 1;for(;;){D=y-w,d[S]<v?(L=0,x=d[S]):d[S]>v?(L=F[U+d[S]],x=O[N+d[S]]):(L=96,x=0),f=1<<y-w,g=1<<A,b=g;do{g-=f,l[E+(I>>w)+g]=D<<24|L<<16|x|0}while(0!==g);for(f=1<<y-1;I&f;)f>>=1;if(0!==f?(I&=f-1,I+=f):I=0,S++,0==--M[y]){if(y===T)break;y=s[a+d[S]]}if(y>P&&(I&_)!==m){for(0===w&&(w=P),E+=b,A=y-w,R=1<<A;A+w<T&&(R-=M[A+w],!(R<=0));)A++,R<<=1;if(C+=1<<A,1===e&&C>852||2===e&&C>592)return 1;m=I&_,l[m]=P<<24|A<<16|E-u|0}}return 0!==I&&(l[E+I]=y-w<<24|64<<16|0),h.bits=P,0}},8898:e=>{"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},342:e=>{"use strict";function t(e){let t=e.length;for(;--t>=0;)e[t]=0}const r=256,n=286,i=30,o=15,s=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),a=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),c=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),l=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),u=new Array(576);t(u);const d=new Array(60);t(d);const h=new Array(512);t(h);const p=new Array(256);t(p);const f=new Array(29);t(f);const g=new Array(i);function m(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}let _,E,v;function y(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}t(g);const S=e=>e<256?h[e]:h[256+(e>>>7)],b=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},T=(e,t,r)=>{e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,b(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},P=(e,t,r)=>{T(e,r[2*t],r[2*t+1])},A=(e,t)=>{let r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1},w=(e,t,r)=>{const n=new Array(16);let i,s,a=0;for(i=1;i<=o;i++)n[i]=a=a+r[i-1]<<1;for(s=0;s<=t;s++){let t=e[2*s+1];0!==t&&(e[2*s]=A(n[t]++,t))}},R=e=>{let t;for(t=0;t<n;t++)e.dyn_ltree[2*t]=0;for(t=0;t<i;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},C=e=>{e.bi_valid>8?b(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},I=(e,t,r,n)=>{const i=2*t,o=2*r;return e[i]<e[o]||e[i]===e[o]&&n[t]<=n[r]},O=(e,t,r)=>{const n=e.heap[r];let i=r<<1;for(;i<=e.heap_len&&(i<e.heap_len&&I(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!I(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n},N=(e,t,n)=>{let i,o,c,l,u=0;if(0!==e.last_lit)do{i=e.pending_buf[e.d_buf+2*u]<<8|e.pending_buf[e.d_buf+2*u+1],o=e.pending_buf[e.l_buf+u],u++,0===i?P(e,o,t):(c=p[o],P(e,c+r+1,t),l=s[c],0!==l&&(o-=f[c],T(e,o,l)),i--,c=S(i),P(e,c,n),l=a[c],0!==l&&(i-=g[c],T(e,i,l)))}while(u<e.last_lit);P(e,256,t)},M=(e,t)=>{const r=t.dyn_tree,n=t.stat_desc.static_tree,i=t.stat_desc.has_stree,s=t.stat_desc.elems;let a,c,l,u=-1;for(e.heap_len=0,e.heap_max=573,a=0;a<s;a++)0!==r[2*a]?(e.heap[++e.heap_len]=u=a,e.depth[a]=0):r[2*a+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=u<2?++u:0,r[2*l]=1,e.depth[l]=0,e.opt_len--,i&&(e.static_len-=n[2*l+1]);for(t.max_code=u,a=e.heap_len>>1;a>=1;a--)O(e,r,a);l=s;do{a=e.heap[1],e.heap[1]=e.heap[e.heap_len--],O(e,r,1),c=e.heap[1],e.heap[--e.heap_max]=a,e.heap[--e.heap_max]=c,r[2*l]=r[2*a]+r[2*c],e.depth[l]=(e.depth[a]>=e.depth[c]?e.depth[a]:e.depth[c])+1,r[2*a+1]=r[2*c+1]=l,e.heap[1]=l++,O(e,r,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const r=t.dyn_tree,n=t.max_code,i=t.stat_desc.static_tree,s=t.stat_desc.has_stree,a=t.stat_desc.extra_bits,c=t.stat_desc.extra_base,l=t.stat_desc.max_length;let u,d,h,p,f,g,m=0;for(p=0;p<=o;p++)e.bl_count[p]=0;for(r[2*e.heap[e.heap_max]+1]=0,u=e.heap_max+1;u<573;u++)d=e.heap[u],p=r[2*r[2*d+1]+1]+1,p>l&&(p=l,m++),r[2*d+1]=p,d>n||(e.bl_count[p]++,f=0,d>=c&&(f=a[d-c]),g=r[2*d],e.opt_len+=g*(p+f),s&&(e.static_len+=g*(i[2*d+1]+f)));if(0!==m){do{for(p=l-1;0===e.bl_count[p];)p--;e.bl_count[p]--,e.bl_count[p+1]+=2,e.bl_count[l]--,m-=2}while(m>0);for(p=l;0!==p;p--)for(d=e.bl_count[p];0!==d;)h=e.heap[--u],h>n||(r[2*h+1]!==p&&(e.opt_len+=(p-r[2*h+1])*r[2*h],r[2*h+1]=p),d--)}})(e,t),w(r,u,e.bl_count)},k=(e,t,r)=>{let n,i,o=-1,s=t[1],a=0,c=7,l=4;for(0===s&&(c=138,l=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=s,s=t[2*(n+1)+1],++a<c&&i===s||(a<l?e.bl_tree[2*i]+=a:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=0,o=i,0===s?(c=138,l=3):i===s?(c=6,l=3):(c=7,l=4))},D=(e,t,r)=>{let n,i,o=-1,s=t[1],a=0,c=7,l=4;for(0===s&&(c=138,l=3),n=0;n<=r;n++)if(i=s,s=t[2*(n+1)+1],!(++a<c&&i===s)){if(a<l)do{P(e,i,e.bl_tree)}while(0!=--a);else 0!==i?(i!==o&&(P(e,i,e.bl_tree),a--),P(e,16,e.bl_tree),T(e,a-3,2)):a<=10?(P(e,17,e.bl_tree),T(e,a-3,3)):(P(e,18,e.bl_tree),T(e,a-11,7));a=0,o=i,0===s?(c=138,l=3):i===s?(c=6,l=3):(c=7,l=4)}};let L=!1;const x=(e,t,r,n)=>{T(e,0+(n?1:0),3),((e,t,r,n)=>{C(e),n&&(b(e,r),b(e,~r)),e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r})(e,t,r,!0)};e.exports._tr_init=e=>{L||((()=>{let e,t,r,l,y;const S=new Array(16);for(r=0,l=0;l<28;l++)for(f[l]=r,e=0;e<1<<s[l];e++)p[r++]=l;for(p[r-1]=l,y=0,l=0;l<16;l++)for(g[l]=y,e=0;e<1<<a[l];e++)h[y++]=l;for(y>>=7;l<i;l++)for(g[l]=y<<7,e=0;e<1<<a[l]-7;e++)h[256+y++]=l;for(t=0;t<=o;t++)S[t]=0;for(e=0;e<=143;)u[2*e+1]=8,e++,S[8]++;for(;e<=255;)u[2*e+1]=9,e++,S[9]++;for(;e<=279;)u[2*e+1]=7,e++,S[7]++;for(;e<=287;)u[2*e+1]=8,e++,S[8]++;for(w(u,287,S),e=0;e<i;e++)d[2*e+1]=5,d[2*e]=A(e,5);_=new m(u,s,257,n,o),E=new m(d,a,0,i,o),v=new m(new Array(0),c,0,19,7)})(),L=!0),e.l_desc=new y(e.dyn_ltree,_),e.d_desc=new y(e.dyn_dtree,E),e.bl_desc=new y(e.bl_tree,v),e.bi_buf=0,e.bi_valid=0,R(e)},e.exports._tr_stored_block=x,e.exports._tr_flush_block=(e,t,n,i)=>{let o,s,a=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<r;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),M(e,e.l_desc),M(e,e.d_desc),a=(e=>{let t;for(k(e,e.dyn_ltree,e.l_desc.max_code),k(e,e.dyn_dtree,e.d_desc.max_code),M(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*l[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),o=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=o&&(o=s)):o=s=n+5,n+4<=o&&-1!==t?x(e,t,n,i):4===e.strategy||s===o?(T(e,2+(i?1:0),3),N(e,u,d)):(T(e,4+(i?1:0),3),((e,t,r,n)=>{let i;for(T(e,t-257,5),T(e,r-1,5),T(e,n-4,4),i=0;i<n;i++)T(e,e.bl_tree[2*l[i]+1],3);D(e,e.dyn_ltree,t-1),D(e,e.dyn_dtree,r-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),N(e,e.dyn_ltree,e.dyn_dtree)),R(e),i&&C(e)},e.exports._tr_tally=(e,t,n)=>(e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(p[n]+r+1)]++,e.dyn_dtree[2*S(t)]++),e.last_lit===e.lit_bufsize-1),e.exports._tr_align=e=>{T(e,2,3),P(e,256,u),(e=>{16===e.bi_valid?(b(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}},2292:e=>{"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},4095:e=>{"use strict";function t(e){return"/"===e.charAt(0)}function r(e){var t=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/.exec(e),r=t[1]||"",n=Boolean(r&&":"!==r.charAt(1));return Boolean(t[2]||n)}e.exports="win32"===process.platform?r:t,e.exports.posix=t,e.exports.win32=r},9291:(e,t,r)=>{"use strict";!function(){if("arm"!==process.arch){var t=[];!function(){for(var e=0;e<256;e++){for(var r=e,n=0;n<8;n++)1&r?r=3988292384^r>>>1:r>>>=1;t[e]=r>>>0}}(),e.exports=function(){for(var e=arguments.length,t=-1,r=0;r<e;r++)t=n(t,new Buffer(arguments[r]));return t=(-1^t)>>>0}}else e.exports=r(3481);function n(e,r){for(var n=r.length,i=0;i<n;i++)e=t[255&(e^r[i])]^e>>>8;return e}}()},3481:e=>{"use strict";for(var t=[],r=0;r<256;r++){var n=t[r]=new Buffer(4);n.writeUInt32BE(r,0);for(var i=0;i<8;i++){var o=1&n[0],s=1&n[1],a=1&n[2],c=1&n[3];n[0]=n[0]>>1^(c?237:0),n[1]=n[1]>>1^(c?184:0)^(o?128:0),n[2]=n[2]>>1^(c?131:0)^(s?128:0),n[3]=n[3]>>1^(c?32:0)^(a?128:0)}}function l(e,r){for(var n=r.length,i=0;i<n;i++){var o=t[e[3]^r[i]];e[3]=o[3]^e[2],e[2]=o[2]^e[1],e[1]=o[1]^e[0],e[0]=o[0]}}e.exports=function(){var e=arguments.length,t=new Buffer(4);t.fill(255);for(var r=0;r<e;r++)l(t,new Buffer(arguments[r]));return t[0]=255^t[0],t[1]=255^t[1],t[2]=255^t[2],t[3]=255^t[3],t.readUInt32BE(0)}},3381:e=>{"use strict";function t(e,t,r){for(var n=1<<t-1;n;n>>>=1)e.push(n&r?1:0)}var r=function(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=r;return t}("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:");function n(e,i){var o,s=typeof e;if("string"==s||"number"==s)o=""+e,e=new Buffer(o);else if(Buffer.isBuffer(e))o=e.toString();else{if(!Array.isArray(e))throw new Error("Bad data");o=(e=new Buffer(e)).toString()}if(/^[0-9]+$/.test(o)){if(e.length>7089)throw new Error("Too much data");return function(e){for(var r=e.length,n=[],i=0;i<r;i+=3){var o=e.substr(i,3);t(n,Math.ceil(10*o.length/3),parseInt(o,10))}var s,a={};return t(s=[0,0,0,1],14,r),a.data27=s.concat(n),r<4096&&(t(s=[0,0,0,1],12,r),a.data10=s.concat(n)),r<1024&&(t(s=[0,0,0,1],10,r),a.data1=s.concat(n)),a}(o)}if(/^[0-9A-Z \$%\*\+\.\/\:\-]+$/.test(o)){if(e.length>4296)throw new Error("Too much data");return function(e){for(var n=e.length,i=[],o=0;o<n;o+=2){var s=6,a=r[e[o]];e[o+1]&&(s=11,a=45*a+r[e[o+1]]),t(i,s,a)}var c,l={};return t(c=[0,0,1,0],13,n),l.data27=c.concat(i),n<2048&&(t(c=[0,0,1,0],11,n),l.data10=c.concat(i)),n<512&&(t(c=[0,0,1,0],9,n),l.data1=c.concat(i)),l}(o)}if(i&&/^https?:/i.test(o))return function(e){var t=e.indexOf("/",8)+1||e.length,r=n(e.slice(0,t).toUpperCase(),!1);if(t>=e.length)return r;var i=n(e.slice(t),!1);return r.data27=r.data27.concat(i.data27),r.data10&&i.data10&&(r.data10=r.data10.concat(i.data10)),r.data1&&i.data1&&(r.data1=r.data1.concat(i.data1)),r}(o);if(e.length>2953)throw new Error("Too much data");return function(e){for(var r=e.length,n=[],i=0;i<r;i++)t(n,8,e[i]);var o,s={};return t(o=[0,1,0,0],16,r),s.data10=s.data27=o.concat(n),r<256&&(t(o=[0,1,0,0],8,r),s.data1=o.concat(n)),s}(e)}e.exports=n},2126:e=>{"use strict";for(var t=[1],r=[],n=1;n<256;n++){var i=t[n-1]<<1;i>255&&(i^=285),t[n]=i}for(n=0;n<255;n++)r[t[n]]=n;function o(e){for(;e<0;)e+=255;for(;e>255;)e-=255;return t[e]}function s(e){if(e<1||e>255)throw Error("Bad log("+e+")");return r[e]}var a=[[0],[0,0],[0,25,1]];function c(e){if(a[e])return a[e];var t=c(e-1),r=[];r[0]=t[0];for(var n=1;n<=e;n++)r[n]=s(o(t[n])^o(t[n-1]+e-1));return a[e]=r,r}e.exports=function(e,t){e=[].slice.call(e);for(var r=c(t),n=0;n<t;n++)e.push(0);for(;e.length>t;)if(e[0]){var i=s(e[0]);for(n=0;n<=t;n++)e[n]=e[n]^o(r[n]+i);e.shift()}else e.shift();return new Buffer(e)}},9691:e=>{"use strict";function t(e){var t=4*e+17,r=[],n=new Buffer(t);n.fill(0),n=[].slice.call(n);for(var i=0;i<t;i++)r[i]=n.slice();return r}function r(e){for(var t=e.length,r=-3;r<=3;r++)for(var n=-3;n<=3;n++){var i=Math.max(r,n),o=Math.min(r,n),s=2==i&&o>=-2||-2==o&&i<=2?128:129;e[3+r][3+n]=s,e[3+r][t-4+n]=s,e[t-4+r][3+n]=s}for(r=0;r<8;r++)e[7][r]=e[r][7]=e[7][t-r-1]=e[r][t-8]=e[t-8][r]=e[t-1-r][7]=128}function n(e){var t=e.length;if(t>21){var r=t-13,n=Math.round(r/Math.ceil(r/28));n%2&&n++;for(var i=[],o=r+6;o>10;o-=n)i.unshift(o);i.unshift(6);for(var s=0;s<i.length;s++)for(var a=0;a<i.length;a++){var c=i[s],l=i[a];if(!e[c][l])for(var u=-2;u<=2;u++)for(var d=-2;d<=2;d++){var h=Math.max(u,d),p=Math.min(u,d),f=1==h&&p>=-1||-1==p&&h<=1?128:129;e[c+u][l+d]=f}}}for(s=8;s<t-8;s++)e[6][s]=e[s][6]=s%2?128:129}function i(e){for(var t=e.length,r=0;r<8;r++)6!=r&&(e[8][r]=e[r][8]=128),e[8][t-1-r]=128,e[t-1-r][8]=128;if(e[8][8]=128,e[t-8][8]=129,!(t<45))for(r=t-11;r<t-8;r++)for(var n=0;n<6;n++)e[r][n]=e[n][r]=128}var o,s=function(){for(var e=Array(32),t=Array(40),r=0;r<32;r++){for(var n=r<<10,i=5;i>0;i--)n>>>9+i&&(n^=1335<<i-1);e[r]=21522^(n|r<<10)}for(var o=7;o<=40;o++){for(n=o<<12,i=6;i>0;i--)n>>>11+i&&(n^=7973<<i-1);t[o]=n|o<<12}var s={L:1,M:0,Q:3,H:2};return function(r,n,i){var o=r.length,a=e[s[n]<<3|i];function c(e){return a>>e&1?129:128}for(var l=0;l<8;l++)r[8][o-1-l]=c(l),l<6&&(r[l][8]=c(l));for(l=8;l<15;l++)r[o-15+l][8]=c(l),l>8&&(r[8][14-l]=c(l));r[7][8]=c(6),r[8][8]=c(7),r[8][7]=c(8);var u=t[(o-17)/4];if(u)for(l=0;l<6;l++)for(var d=0;d<3;d++)r[o-11+d][l]=r[l][o-11+d]=u>>3*l+d&1?129:128}}(),a=(o=[function(e,t){return(e+t)%2==0},function(e,t){return e%2==0},function(e,t){return t%3==0},function(e,t){return(e+t)%3==0},function(e,t){return(Math.floor(e/2)+Math.floor(t/3))%2==0},function(e,t){return e*t%2+e*t%3==0},function(e,t){return(e*t%2+e*t%3)%2==0},function(e,t){return(e*t%3+(e+t)%2)%2==0}],function(e,t,r){var n,i,s=e.length,a=-1;n=i=s-1;for(var c=o[r],l=t.blocks[t.blocks.length-1].length,u=0;u<l;u++)for(var d=0;d<t.blocks.length;d++)t.blocks[d].length<=u||h(t.blocks[d][u]);for(l=t.ec_len,u=0;u<l;u++)for(d=0;d<t.ec.length;d++)h(t.ec[d][u]);if(i>-1)do{e[n][i]=c(n,i)?1:0}while(p());function h(t){for(var r=128;r;r>>=1){var o=!!(r&t);c(n,i)&&(o=!o),e[n][i]=o?1:0,p()}}function p(){do{if(i%2^i<6?a<0&&0==n||a>0&&n==s-1?(i--,a=-a):(i++,n+=a):i--,6==i&&i--,i<0)return!1}while(240&e[n][i]);return!0}});function c(e){for(var t=e.length,r=0,n=0;n<t;n++){for(var i=1&e[n][0],o=1,s=1;s<t;s++){(a=1&e[n][s])!=i?(o>=5&&(r+=o-2),i=a,o=1):o++}o>=5&&(r+=o-2)}for(s=0;s<t;s++){for(i=1&e[0][s],o=1,n=1;n<t;n++){var a;(a=1&e[n][s])!=i?(o>=5&&(r+=o-2),i=a,o=1):o++}o>=5&&(r+=o-2)}for(n=0;n<t-1;n++)for(s=0;s<t-1;s++){var c=e[n][s]+e[n][s+1]+e[n+1][s]+e[n+1][s+1]&7;0!=c&&4!=c||(r+=3)}function l(t){return 1&e[n][s+t]}function u(t){return 1&e[n+t][s]}for(n=0;n<t;n++)for(s=0;s<t;s++)s<t-6&&l(0)&&!l(1)&&l(2)&&l(3)&&l(4)&&!l(5)&&l(6)&&(s>=4&&!(l(-4)||l(-3)||l(-2)||l(-1))&&(r+=40),s<t-10&&!(l(7)||l(8)||l(9)||l(10))&&(r+=40)),n<t-6&&u(0)&&!u(1)&&u(2)&&u(3)&&u(4)&&!u(5)&&u(6)&&(n>=4&&!(u(-4)||u(-3)||u(-2)||u(-1))&&(r+=40),n<t-10&&!(u(7)||u(8)||u(9)||u(10))&&(r+=40));var d=0;for(n=0;n<t;n++)for(s=0;s<t;s++)1&e[n][s]&&d++;return r+=10*Math.floor(Math.abs(10-20*d/(t*t)))}e.exports={getMatrix:function(e){var o=t(e.version);r(o),n(o),i(o);for(var l=1/0,u=0,d=0;d<8;d++){a(o,e,d),s(o,e.ec_level,d);var h=c(o);h<l&&(l=h,u=d)}return a(o,e,u),s(o,e.ec_level,u),o.map((function(e){return e.map((function(e){return 1&e}))}))},init:t,fillFinders:r,fillAlignAndTiming:n,fillStub:i,fillReserved:s,fillData:a,calculatePenalty:c}},7100:(e,t,r)=>{"use strict";var n=r(8761),i=r(9291),o=new Buffer([137,80,78,71,13,10,26,10]),s=new Buffer([0,0,0,13,73,72,68,82,0,0,0,0,0,0,0,0,8,0,0,0,0,0,0,0,0]),a=new Buffer([0,0,0,0,73,68,65,84]),c=new Buffer([0,0,0,0,73,69,78,68,174,66,96,130]);e.exports={bitmap:function(e,t,r){var n=e.length,i=(n+2*r)*t,o=new Buffer((i+1)*i);o.fill(255);for(var s=0;s<i;s++)o[s*(i+1)]=0;for(s=0;s<n;s++)for(var a=0;a<n;a++)if(e[s][a]){var c=((r+s)*(i+1)+(r+a))*t+1;o.fill(0,c,c+t);for(var l=1;l<t;l++)o.copy(o,c+l*(i+1),c,c+t)}return{data:o,size:i}},png:function(e,t){t.push(o);var r=Buffer.concat([s]);r.writeUInt32BE(e.size,8),r.writeUInt32BE(e.size,12),r.writeUInt32BE(i(r.slice(4,-4)),21),t.push(r);var l=Buffer.concat([a,n.deflateSync(e.data,{level:9}),new Buffer(4)]);l.writeUInt32BE(l.length-12,0),l.writeUInt32BE(i(l.slice(4,-4)),l.length-4),t.push(l),t.push(c),t.push(null)}}},247:(e,t,r)=>{"use strict";var n=r(3381),i=r(2126),o=r(9691);function s(e){return JSON.parse(JSON.stringify(e))}var a=["L","M","Q","H"],c=[[],[26,7,1,10,1,13,1,17,1],[44,10,1,16,1,22,1,28,1],[70,15,1,26,1,36,2,44,2],[100,20,1,36,2,52,2,64,4],[134,26,1,48,2,72,4,88,4],[172,36,2,64,4,96,4,112,4],[196,40,2,72,4,108,6,130,5],[242,48,2,88,4,132,6,156,6],[292,60,2,110,5,160,8,192,8],[346,72,4,130,5,192,8,224,8],[404,80,4,150,5,224,8,264,11],[466,96,4,176,8,260,10,308,11],[532,104,4,198,9,288,12,352,16],[581,120,4,216,9,320,16,384,16],[655,132,6,240,10,360,12,432,18],[733,144,6,280,10,408,17,480,16],[815,168,6,308,11,448,16,532,19],[901,180,6,338,13,504,18,588,21],[991,196,7,364,14,546,21,650,25],[1085,224,8,416,16,600,20,700,25],[1156,224,8,442,17,644,23,750,25],[1258,252,9,476,17,690,23,816,34],[1364,270,9,504,18,750,25,900,30],[1474,300,10,560,20,810,27,960,32],[1588,312,12,588,21,870,29,1050,35],[1706,336,12,644,23,952,34,1110,37],[1828,360,12,700,25,1020,34,1200,40],[1921,390,13,728,26,1050,35,1260,42],[2051,420,14,784,28,1140,38,1350,45],[2185,450,15,812,29,1200,40,1440,48],[2323,480,16,868,31,1290,43,1530,51],[2465,510,17,924,33,1350,45,1620,54],[2611,540,18,980,35,1440,48,1710,57],[2761,570,19,1036,37,1530,51,1800,60],[2876,570,19,1064,38,1590,53,1890,63],[3034,600,20,1120,40,1680,56,1980,66],[3196,630,21,1204,43,1770,59,2100,70],[3362,660,22,1260,45,1860,62,2220,74],[3532,720,24,1316,47,1950,65,2310,77],[3706,750,25,1372,49,2040,68,2430,81]];function l(e,t){var r,n=1;for(e.data1?r=Math.ceil(e.data1.length/8):n=10;n<10;n++){if((i=c[n][t]).data_len>=r)return s(i)}for(e.data10?r=Math.ceil(e.data10.length/8):n=27;n<27;n++){if((i=c[n][t]).data_len>=r)return s(i)}for(r=Math.ceil(e.data27.length/8);n<41;n++){var i;if((i=c[n][t]).data_len>=r)return s(i)}throw new Error("Too much data")}function u(e,t){var r=new Buffer(t.data_len);r.fill(0);for(var n=(e=t.version<10?e.data1:t.version<27?e.data10:e.data27).length,o=0;o<n;o+=8){for(var s=0,a=0;a<8;a++)s=s<<1|(e[o+a]?1:0);r[o/8]=s}var c=236;for(o=Math.ceil((n+4)/8);o<r.length;o++)r[o]=c,c=236==c?17:236;var l=0;return t.blocks=t.blocks.map((function(e){var n=r.slice(l,l+e);return l+=e,t.ec.push(i(n,t.ec_len)),n})),t}c=c.map((function(e,t){if(!t)return{};for(var r={},n=1;n<8;n+=2){for(var i=e[0]-e[n],o=e[n+1],s=a[n/2|0],c={version:t,ec_level:s,data_len:i,ec_len:e[n]/o,blocks:[],ec:[]},l=o,u=i;l>0;l--){var d=u/l|0;c.blocks.push(d),u-=d}r[s]=c}return r})),e.exports={QR:function(e,t,r){t=a.indexOf(t)>-1?t:"M";var i=n(e,r),s=u(i,l(i,t));return o.getMatrix(s)},getTemplate:l,fillTemplate:u}},7318:(e,t,r)=>{"use strict";var n=r(2413).Readable,i=r(247).QR,o=r(7100),s=r(1559),a=function(){},c={parse_url:!1,ec_level:"M",size:5,margin:4,customize:null},l={parse_url:!1,ec_level:"M",margin:1,size:0};function u(e,t){e="string"==typeof e?{ec_level:e}:e||{};var r={type:String(t||e.type||"png").toLowerCase()},n="png"==r.type?c:l;for(var i in n)r[i]=i in e?e[i]:n[i];return r}e.exports={matrix:i,image:function(e,t){t=u(t);var r=i(e,t.ec_level,t.parse_url),c=new n;switch(c._read=a,t.type){case"svg":case"pdf":case"eps":process.nextTick((function(){s[t.type](r,c,t.margin,t.size)}));break;case"svgpath":process.nextTick((function(){var e=s.svg_object(r,t.margin,t.size);c.push(e.path),c.push(null)}));break;case"png":default:process.nextTick((function(){var e=o.bitmap(r,t.size,t.margin);t.customize&&t.customize(e),o.png(e,c)}))}return c},imageSync:function(e,t){t=u(t);var r,n=i(e,t.ec_level,t.parse_url),a=[];switch(t.type){case"svg":case"pdf":case"eps":s[t.type](n,a,t.margin,t.size),r=a.filter(Boolean).join("");break;case"png":default:var c=o.bitmap(n,t.size,t.margin);t.customize&&t.customize(c),o.png(c,a),r=Buffer.concat(a.filter(Boolean))}return r},svgObject:function(e,t){t=u(t,"svg");var r=i(e,t.ec_level);return s.svg_object(r,t.margin)}}},1559:e=>{"use strict";function t(e){for(var t=e.length,r=[],n=-1;n<=t;n++)r[n]=[];var i=[];for(n=0;n<t;n++)for(var o=0;o<t;o++)r[n][o]||(r[n][o]=1,s(n,o)?s(n-1,o)||i.push(a(n,o,"right")):s(n,o-1)&&i.push(a(n,o,"down")));return i;function s(r,n){return!(r<0||n<0||r>=t||n>=t)&&!!e[r][n]}function a(e,t,n){r[e][t]=1;var i=[];i.push(["M",t,e]);var o=e,a=t,c=0;do{switch(n){case"right":r[o][a]=1,s(o,a)?(r[o-1][a]=1,s(o-1,a)?(i.push(["h",c]),c=0,n="up"):(c++,a++)):(i.push(["h",c]),c=0,n="down");break;case"left":r[o-1][a-1]=1,s(o-1,a-1)?(r[o][a-1]=1,s(o,a-1)?(i.push(["h",-c]),c=0,n="down"):(c++,a--)):(i.push(["h",-c]),c=0,n="up");break;case"down":r[o][a-1]=1,s(o,a-1)?(r[o][a]=1,s(o,a)?(i.push(["v",c]),c=0,n="right"):(c++,o++)):(i.push(["v",c]),c=0,n="left");break;case"up":r[o-1][a]=1,s(o-1,a)?(r[o-1][a-1]=1,s(o-1,a-1)?(i.push(["v",-c]),c=0,n="left"):(c++,o--)):(i.push(["v",-c]),c=0,n="right")}}while(o!=e||a!=t);return i}}function r(e,r,n){t(e).forEach((function(e){for(var t="",i=0;i<e.length;i++){var o=e[i];switch(o[0]){case"M":t+="M"+(o[1]+n)+" "+(o[2]+n);break;default:t+=o.join("")}}t+="z",r.push(t)}))}e.exports={svg:function(e,t,n,i){var o=e.length+2*n;if(t.push('<svg xmlns="http://www.w3.org/2000/svg" '),i>0){var s=o*i;t.push('width="'+s+'" height="'+s+'" ')}t.push('viewBox="0 0 '+o+" "+o+'">'),t.push('<path d="'),r(e,t,n),t.push('"/></svg>'),t.push(null)},eps:function(e,r,n){var i=e.length,o=9*(i+2*n);r.push(["%!PS-Adobe-3.0 EPSF-3.0","%%BoundingBox: 0 0 "+o+" "+o,"/h { 0 rlineto } bind def","/v { 0 exch neg rlineto } bind def","/M { neg "+(i+n)+" add moveto } bind def","/z { closepath } bind def","9 9 scale",""].join("\n")),t(e).forEach((function(e){for(var t="",i=0;i<e.length;i++){var o=e[i];switch(o[0]){case"M":t+=o[1]+n+" "+o[2]+" M ";break;default:t+=o[1]+" "+o[0]+" "}}t+="z\n",r.push(t)})),r.push("fill\n%%EOF\n"),r.push(null)},pdf:function(e,r,n){var i=e.length,o=9*(i+2*n),s=["%PDF-1.0\n\n","1 0 obj << /Type /Catalog /Pages 2 0 R >> endobj\n","2 0 obj << /Type /Pages /Count 1 /Kids [ 3 0 R ] >> endobj\n"];s.push("3 0 obj << /Type /Page /Parent 2 0 R /Resources <<>> /Contents 4 0 R /MediaBox [ 0 0 "+o+" "+o+" ] >> endobj\n");var a="9 0 0 9 0 0 cm\n";a+=t(e).map((function(e){for(var t,r,o="",s=0;s<e.length;s++){var a=e[s];switch(a[0]){case"M":o+=(t=a[1]+n)+" "+(r=i-a[2]+n)+" m ";break;case"h":o+=(t+=a[1])+" "+r+" l ";break;case"v":o+=t+" "+(r-=a[1])+" l "}}return o+="h"})).join("\n"),a+="\nf\n",s.push("4 0 obj << /Length "+a.length+" >> stream\n"+a+"endstream\nendobj\n");for(var c="xref\n0 5\n0000000000 65535 f \n",l=1,u=s[0].length;l<5;l++)c+=("0000000000"+u).substr(-10)+" 00000 n \n",u+=s[l].length;s.push(c,"trailer << /Root 1 0 R /Size 5 >>\n","startxref\n"+u+"\n%%EOF\n"),r.push(s.join("")),r.push(null)},svg_object:function(e,t){var n=[];return r(e,n,t),{size:e.length+2*t,path:n.filter(Boolean).join("")}}}},984:(e,t,r)=>{const n=r(2357),i=r(5622),o=r(5747);let s;try{s=r(2884)}catch(e){}const a={nosort:!0,silent:!0};let c=0;const l="win32"===process.platform,u=e=>{if(["unlink","chmod","stat","lstat","rmdir","readdir"].forEach((t=>{e[t]=e[t]||o[t],e[t+="Sync"]=e[t]||o[t]})),e.maxBusyTries=e.maxBusyTries||3,e.emfileWait=e.emfileWait||1e3,!1===e.glob&&(e.disableGlob=!0),!0!==e.disableGlob&&void 0===s)throw Error("glob dependency not found, set `options.disableGlob = true` if intentional");e.disableGlob=e.disableGlob||!1,e.glob=e.glob||a},d=(e,t,r)=>{"function"==typeof t&&(r=t,t={}),n(e,"rimraf: missing path"),n.equal(typeof e,"string","rimraf: path should be a string"),n.equal(typeof r,"function","rimraf: callback function required"),n(t,"rimraf: invalid options argument provided"),n.equal(typeof t,"object","rimraf: options should be object"),u(t);let i=0,o=null,a=0;const l=(e,n)=>e?r(e):(a=n.length,0===a?r():void n.forEach((e=>{const n=s=>{if(s){if(("EBUSY"===s.code||"ENOTEMPTY"===s.code||"EPERM"===s.code)&&i<t.maxBusyTries)return i++,setTimeout((()=>h(e,t,n)),100*i);if("EMFILE"===s.code&&c<t.emfileWait)return setTimeout((()=>h(e,t,n)),c++);"ENOENT"===s.code&&(s=null)}c=0,(e=>{o=o||e,0==--a&&r(o)})(s)};h(e,t,n)})));if(t.disableGlob||!s.hasMagic(e))return l(null,[e]);t.lstat(e,((r,n)=>{if(!r)return l(null,[e]);s(e,t.glob,l)}))},h=(e,t,r)=>{n(e),n(t),n("function"==typeof r),t.lstat(e,((n,i)=>n&&"ENOENT"===n.code?r(null):(n&&"EPERM"===n.code&&l&&p(e,t,n,r),i&&i.isDirectory()?g(e,t,n,r):void t.unlink(e,(n=>{if(n){if("ENOENT"===n.code)return r(null);if("EPERM"===n.code)return l?p(e,t,n,r):g(e,t,n,r);if("EISDIR"===n.code)return g(e,t,n,r)}return r(n)})))))},p=(e,t,r,i)=>{n(e),n(t),n("function"==typeof i),t.chmod(e,438,(n=>{n?i("ENOENT"===n.code?null:r):t.stat(e,((n,o)=>{n?i("ENOENT"===n.code?null:r):o.isDirectory()?g(e,t,r,i):t.unlink(e,i)}))}))},f=(e,t,r)=>{n(e),n(t);try{t.chmodSync(e,438)}catch(e){if("ENOENT"===e.code)return;throw r}let i;try{i=t.statSync(e)}catch(e){if("ENOENT"===e.code)return;throw r}i.isDirectory()?E(e,t,r):t.unlinkSync(e)},g=(e,t,r,i)=>{n(e),n(t),n("function"==typeof i),t.rmdir(e,(n=>{!n||"ENOTEMPTY"!==n.code&&"EEXIST"!==n.code&&"EPERM"!==n.code?n&&"ENOTDIR"===n.code?i(r):i(n):m(e,t,i)}))},m=(e,t,r)=>{n(e),n(t),n("function"==typeof r),t.readdir(e,((n,o)=>{if(n)return r(n);let s,a=o.length;if(0===a)return t.rmdir(e,r);o.forEach((n=>{d(i.join(e,n),t,(n=>{if(!s)return n?r(s=n):void(0==--a&&t.rmdir(e,r))}))}))}))},_=(e,t)=>{let r;if(u(t=t||{}),n(e,"rimraf: missing path"),n.equal(typeof e,"string","rimraf: path should be a string"),n(t,"rimraf: missing options"),n.equal(typeof t,"object","rimraf: options should be object"),t.disableGlob||!s.hasMagic(e))r=[e];else try{t.lstatSync(e),r=[e]}catch(n){r=s.sync(e,t.glob)}if(r.length)for(let e=0;e<r.length;e++){const n=r[e];let i;try{i=t.lstatSync(n)}catch(e){if("ENOENT"===e.code)return;"EPERM"===e.code&&l&&f(n,t,e)}try{i&&i.isDirectory()?E(n,t,null):t.unlinkSync(n)}catch(e){if("ENOENT"===e.code)return;if("EPERM"===e.code)return l?f(n,t,e):E(n,t,e);if("EISDIR"!==e.code)throw e;E(n,t,e)}}},E=(e,t,r)=>{n(e),n(t);try{t.rmdirSync(e)}catch(n){if("ENOENT"===n.code)return;if("ENOTDIR"===n.code)throw r;"ENOTEMPTY"!==n.code&&"EEXIST"!==n.code&&"EPERM"!==n.code||v(e,t)}},v=(e,t)=>{n(e),n(t),t.readdirSync(e).forEach((r=>_(i.join(e,r),t)));const r=l?100:1;let o=0;for(;;){let n=!0;try{const i=t.rmdirSync(e,t);return n=!1,i}finally{if(++o<r&&n)continue}}};e.exports=d,d.sync=_},2453:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeWellKnownAuthMetadata=function(e,t){if(e===o.UNPARSEABLE_AUTH_TYPE||e===o.UNKNOWN_RESERVED_AUTH_TYPE)throw new Error(`Illegal WellKnownAuthType[${e.toString()}]. Only allowed AuthType should be used`);const r=(0,i.createBuffer)(1);return r.writeUInt8(128|e.identifier),n.LiteBuffer.concat([r,t])},t.encodeCustomAuthMetadata=function(e,t){const r=(0,i.toBuffer)(e);if(r.byteLength!==e.length)throw new Error("Custom auth type must be US_ASCII characters only");if(r.byteLength<1||r.byteLength>128)throw new Error("Custom auth type must have a strictly positive length that fits on 7 unsigned bits, ie 1-128");const o=(0,i.createBuffer)(1+r.byteLength);return o.writeUInt8(r.byteLength-1),o.write(e,1),n.LiteBuffer.concat([o,t])},t.encodeSimpleAuthMetadata=function(e,t){const r=(0,i.toBuffer)(e),s=(0,i.toBuffer)(t),a=r.byteLength;if(a>65535)throw new Error(`Username should be shorter than or equal to 65535 bytes length in UTF-8 encoding but the given was ${a}`);const c=(0,i.createBuffer)(3);return c.writeUInt8(128|o.SIMPLE.identifier),c.writeUInt16BE(a,1),n.LiteBuffer.concat([c,r,s])},t.encodeBearerAuthMetadata=function(e){const t=(0,i.toBuffer)(e),r=(0,i.createBuffer)(1);return r.writeUInt8(128|o.BEARER.identifier),n.LiteBuffer.concat([r,t])},t.decodeAuthMetadata=function(e){if(e.byteLength<1)throw new Error("Unable to decode Auth metadata. Not enough readable bytes");const t=e.readUInt8(),r=127&t;if(r!==t){const t=o.default.fromIdentifier(r);return{payload:e.slice(1),type:{identifier:t.identifier,string:t.string}}}{const r=t+1;if(e.byteLength<r+1)throw new Error("Unable to decode custom Auth type. Malformed length or auth type string");const n=e.toString("utf8",1,1+r);return{payload:e.slice(r+1),type:{identifier:o.UNPARSEABLE_AUTH_TYPE.identifier,string:n}}}},t.decodeSimpleAuthPayload=function(e){if(e.byteLength<2)throw new Error("Unable to decode Simple Auth Payload. Not enough readable bytes");const t=e.readUInt16BE();if(e.byteLength<t+2)throw new Error("Unable to decode Simple Auth Payload. Not enough readable bytes");const r=e.slice(2,2+t);return{password:e.slice(2+t),username:r}};var n=r(7771),i=r(3502),o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=n?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}r.default=e,t&&t.set(e,r);return r}(r(8063));function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}},6145:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeCompositeMetadata=function(e){let t=(0,i.createBuffer)(0);for(const[r,n]of e){const e="function"==typeof n?n():n;t=r instanceof o.default||"number"==typeof r||"WellKnownMimeType"===r.constructor.name?l(t,r,e):c(t,r,e)}return t},t.encodeAndAddCustomMetadata=c,t.encodeAndAddWellKnownMetadata=l,t.decodeMimeAndContentBuffersSlices=u,t.decodeMimeTypeFromMimeBuffer=d,t.encodeCustomMetadataHeader=h,t.encodeWellKnownMetadataHeader=p,t.decodeCompositeMetadata=f,t.WellKnownMimeTypeEntry=t.ReservedMimeTypeEntry=t.ExplicitMimeTimeEntry=t.CompositeMetadata=void 0;var n=r(7771),i=r(3502),o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=n?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}r.default=e,t&&t.set(e,r);return r}(r(8369));function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}class a{constructor(e){this._buffer=e}iterator(){return f(this._buffer)}[Symbol.iterator](){return f(this._buffer)}}function c(e,t,r){return n.LiteBuffer.concat([e,h(t,r.byteLength),r])}function l(e,t,r){let i;return i=Number.isInteger(t)?t:t.identifier,n.LiteBuffer.concat([e,p(i,r.byteLength),r])}function u(e,t){const r=e.readInt8(t);let n,o=t;if((r&y)===y)n=e.slice(o,o+1),o+=1;else{const t=1+(255&r);if(!(e.byteLength>o+t))throw new Error("Metadata is malformed. Inappropriately formed Mime Length");n=e.slice(o,o+t+1),o+=t+1}if(e.byteLength>=o+3){const t=(0,i.readUInt24BE)(e,o);if(o+=3,e.byteLength>=t+o){return[n,e.slice(o,o+t)]}throw new Error("Metadata is malformed. Inappropriately formed Metadata Length or malformed content")}throw new Error("Metadata is malformed. Metadata Length is absent or malformed")}function d(e){if(e.length<2)throw new Error("Unable to decode explicit MIME type");return e.toString("ascii",1)}function h(e,t){const r=(0,i.createBuffer)(4+e.length),n=r.write(e,1);if(!function(e,t){let r=!0;for(let n=t,i=e.length;n<i;n++)if(e[n]>127){r=!1;break}return r}(r,1))throw new Error("Custom mime type must be US_ASCII characters only");if(n<1||n>128)throw new Error("Custom mime type must have a strictly positive length that fits on 7 unsigned bits, ie 1-128");return r.writeUInt8(n-1),(0,i.writeUInt24BE)(r,t,n+1),r}function p(e,t){const r=n.LiteBuffer.alloc(4);return r.writeUInt8(e|y),(0,i.writeUInt24BE)(r,t,1),r}function*f(e){const t=e.byteLength;let r=0;for(;r<t;){const t=u(e,r),i=t[0],s=t[1];if(n=s,r=r+i.byteLength+3+n.byteLength,!v(i)){const e=d(i);if(!e)throw new Error("MIME type cannot be null");yield new g(s,e);continue}const a=E(i),c=o.default.fromIdentifier(a);o.UNKNOWN_RESERVED_MIME_TYPE!==c?yield new _(s,c):yield new m(s,a)}var n}t.CompositeMetadata=a;class g{constructor(e,t){this._content=e,this._type=t}get content(){return this._content}get mimeType(){return this._type}}t.ExplicitMimeTimeEntry=g;class m{constructor(e,t){this._content=e,this._type=t}get content(){return this._content}get mimeType(){}get type(){return this._type}}t.ReservedMimeTypeEntry=m;class _{constructor(e,t){this._content=e,this._type=t}get content(){return this._content}get mimeType(){return this._type.string}get type(){return this._type}}function E(e){return v(e)?e.readInt8()&S:o.UNPARSEABLE_MIME_TYPE.identifier}function v(e){return 1===e.byteLength}t.WellKnownMimeTypeEntry=_;const y=128,S=127},7771:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LiteBuffer=t.Buffer=void 0;var n,i=(n=r(4293))&&n.__esModule?n:{default:n};const o="undefined"!=typeof global&&global.hasOwnProperty("Buffer");function s(e){return null==e||"utf8"===e||"utf-8"===e?"utf8":function(e){switch(e.length){case 4:if("UTF8"===e)return"utf8";if("ucs2"===e||"UCS2"===e)return"utf16le";if("utf8"===(e=`${e}`.toLowerCase()))return"utf8";if("ucs2"===e)return"utf16le";break;case 3:if("hex"===e||"HEX"===e||"hex"===`${e}`.toLowerCase())return"hex";break;case 5:if("ascii"===e)return"ascii";if("ucs-2"===e)return"utf16le";if("UTF-8"===e)return"utf8";if("ASCII"===e)return"ascii";if("UCS-2"===e)return"utf16le";if("utf-8"===(e=`${e}`.toLowerCase()))return"utf8";if("ascii"===e)return"ascii";if("ucs-2"===e)return"utf16le";break;case 6:if("base64"===e)return"base64";if("latin1"===e||"binary"===e)return"latin1";if("BASE64"===e)return"base64";if("LATIN1"===e||"BINARY"===e)return"latin1";if("base64"===(e=`${e}`.toLowerCase()))return"base64";if("latin1"===e||"binary"===e)return"latin1";break;case 7:if("utf16le"===e||"UTF16LE"===e||"utf16le"===`${e}`.toLowerCase())return"utf16le";break;case 8:if("utf-16le"===e||"UTF-16LE"===e||"utf-16le"===`${e}`.toLowerCase())return"utf16le";break;default:if(""===e)return"utf8"}}(e)}function a(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}const c=["base64","hex","ascii","binary","latin1","ucs2","utf16le"];function l(e="utf8",t=!0){if("string"!=typeof e||t&&""===e){if(!t)return"utf8";throw new TypeError(`Unknown encoding: ${e}`)}const r=s(e);if(void 0===r)throw new TypeError(`Unknown encoding: ${e}`);return c.includes(e)&&function(e){throw new Error(e?`Not implemented: ${e}`:"Not implemented")}(`"${e}" encoding`),r}const u={ascii:{byteLength:e=>e.length},base64:{byteLength:e=>function(e,t){61===e.charCodeAt(t-1)&&t--;t>1&&61===e.charCodeAt(t-1)&&t--;return 3*t>>>2}(e,e.length)},hex:{byteLength:e=>e.length>>>1},latin1:{byteLength:e=>e.length},ucs2:{byteLength:e=>2*e.length},utf16le:{byteLength:e=>2*e.length},utf8:{byteLength:e=>d(e).length}};function d(e,t=1/0){let r,n=t;const i=e.length;let o=null;const s=[];for(let t=0;t<i;++t){if(r=e.charCodeAt(t),r>55295&&r<57344){if(!o){if(r>56319){(n-=3)>-1&&s.push(239,191,189);continue}if(t+1===i){(n-=3)>-1&&s.push(239,191,189);continue}o=r;continue}if(r<56320){(n-=3)>-1&&s.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(n-=3)>-1&&s.push(239,191,189);if(o=null,r<128){if((n-=1)<0)break;s.push(r)}else if(r<2048){if((n-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((n-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((n-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function h(e,t,r){r=Math.min(e.length,r);const n=[];let i=t;for(;i<r;){const t=e[i];let o=null,s=t>239?4:t>223?3:t>191?2:1;if(i+s<=r){let r,n,a,c;switch(s){case 1:t<128&&(o=t);break;case 2:r=e[i+1],128==(192&r)&&(c=(31&t)<<6|63&r,c>127&&(o=c));break;case 3:r=e[i+1],n=e[i+2],128==(192&r)&&128==(192&n)&&(c=(15&t)<<12|(63&r)<<6|63&n,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:r=e[i+1],n=e[i+2],a=e[i+3],128==(192&r)&&128==(192&n)&&128==(192&a)&&(c=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&a,c>65535&&c<1114112&&(o=c))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return function(e){const t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}class p extends Uint8Array{constructor(e,t,r){super(e,t,r)}static alloc(e,t=0,r="utf8"){if("number"!=typeof e)throw new TypeError('The "size" argument must be of type number. Received type '+typeof e);const n=new p(e);if(0===e)return n;let i;if("string"==typeof t)r=l(r),1===t.length&&"utf8"===r?n.fill(t.charCodeAt(0)):i=p.from(t,r);else if("number"==typeof t)n.fill(t);else if(a(t,Uint8Array)){if(0===t.length)throw new TypeError(`The argument "value" is invalid. Received ${t.constructor.name} []`);i=t}if(i){i.length>n.length&&(i=i.subarray(0,n.length));let t=0;for(;t<e&&(n.set(i,t),t+=i.length,!(t+i.length>=e)););t!==e&&n.set(i.subarray(0,e-t),t)}return n}static allocUnsafe(e){return new p(e)}static byteLength(e,t="utf8"){return"string"!=typeof e?e.byteLength:(t=s(t)||"utf8",u[t].byteLength(e))}static concat(e,t){if(null==t){t=0;for(const r of e)t+=r.length}const r=new p(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r}static from(e,t,r){const n="string"==typeof t?void 0:t;let i="string"==typeof t?t:void 0;if("string"==typeof e||"String"===e.constructor.name)switch(e=e.toString(),i=l(i,!1),i){case"utf8":return"undefined"!=typeof TextEncoder?new p((new TextEncoder).encode(e).buffer):new p(d(e));default:throw new TypeError("Unknown encoding: "+i)}return new p(e,n,r)}static isBuffer(e){return a(e,p)}static isEncoding(e){return"string"==typeof e&&0!==e.length&&void 0!==s(e)}copy(e,t=0,r=0,n=this.length){const i=this.subarray(r,n);return e.set(i,t),i.length}equals(e){if(!a(e,Uint8Array))throw new TypeError('The "otherBuffer" argument must be an instance of Buffer or Uint8Array. Received type '+typeof e);if(this===e)return!0;if(this.byteLength!==e.byteLength)return!1;for(let t=0;t<this.length;t++)if(this[t]!==e[t])return!1;return!0}readDoubleBE(e=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).getFloat64(e)}readDoubleLE(e=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).getFloat64(e,!0)}readFloatBE(e=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).getFloat32(e)}readFloatLE(e=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).getFloat32(e,!0)}readInt8(e=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).getInt8(e)}readInt16BE(e=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).getInt16(e)}readInt16LE(e=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).getInt16(e,!0)}readInt32BE(e=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).getInt32(e)}readInt32LE(e=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).getInt32(e,!0)}readUInt8(e=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).getUint8(e)}readUInt16BE(e=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).getUint16(e)}readUInt16LE(e=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).getUint16(e,!0)}readUInt32BE(e=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).getUint32(e)}readUInt32LE(e=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).getUint32(e,!0)}slice(e=0,t=this.length){return this.subarray(e,t)}subarray(e=0,t=this.length){return new p(super.subarray(e,t))}toJSON(){return{data:Array.from(this),type:"Buffer"}}toString(e="utf8",t=0,r=this.length){if(e=l(e),"undefined"!=typeof TextDecoder){const e=this.subarray(t,r);return(new TextDecoder).decode(e)}return this.slowToString(e,t,r)}slowToString(e="utf8",t=0,r=this.length){if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";switch(e=l(e)){case"utf8":return h(this,t,r);default:throw new TypeError("Unsupported encoding: "+e)}}write(e,t=0,r=this.length,n="utf8"){switch(n=l(n)){case"utf8":if("undefined"!=typeof TextEncoder){const n=(new TextEncoder).encode(e);return this.set(n,t),n.byteLength>r-t?r-t:n.byteLength}return function(e,t,r,n){return function(e,t,r,n){let i=0;for(;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}(d(t,e.length-r),e,r,n)}(this,e,t,r);default:throw new TypeError("Unknown encoding: "+n)}}writeDoubleBE(e,t=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).setFloat64(t,e),t+8}writeDoubleLE(e,t=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).setFloat64(t,e,!0),t+8}writeFloatBE(e,t=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).setFloat32(t,e),t+4}writeFloatLE(e,t=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).setFloat32(t,e,!0),t+4}writeInt8(e,t=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).setInt8(t,e),t+1}writeInt16BE(e,t=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).setInt16(t,e),t+2}writeInt16LE(e,t=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).setInt16(t,e,!0),t+2}writeInt32BE(e,t=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).setUint32(t,e),t+4}writeInt32LE(e,t=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).setInt32(t,e,!0),t+4}writeUInt8(e,t=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).setUint8(t,e),t+1}writeUInt16BE(e,t=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).setUint16(t,e),t+2}writeUInt16LE(e,t=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).setUint16(t,e,!0),t+2}writeUInt32BE(e,t=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).setUint32(t,e),t+4}writeUInt32LE(e,t=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).setUint32(t,e,!0),t+4}}t.Buffer=p,o||(i.default.hasOwnProperty("Buffer")&&Object.defineProperty(i.default,"Buffer",{configurable:!0,enumerable:!1,value:p,writable:!0}),Object.defineProperty(window,"Buffer",{configurable:!0,enumerable:!1,value:p,writable:!0}));const f=o?global.Buffer:p;t.LiteBuffer=f},4776:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeFrameWithLength=function(e,t){const r=(0,a.readUInt24BE)(e,0);return c(e.slice(3,3+r),t)},t.deserializeFrames=function(e,t){const r=[];let n=0;for(;n+3<e.length;){const i=(0,a.readUInt24BE)(e,n),o=n+3,s=o+i;if(s>e.length)break;const l=c(e.slice(o,s),t);r.push(l),n=s}return[r,e.slice(n,e.length)]},t.serializeFrameWithLength=function(e,t){const r=l(e,t),n=(0,a.createBuffer)(r.length+3);return(0,a.writeUInt24BE)(n,r.length,0),r.copy(n,3,0,r.length),n},t.deserializeFrame=c,t.serializeFrame=l,t.sizeOfFrame=function(e,t){switch(t=t||s.Utf8Encoders,e.type){case o.FRAME_TYPES.SETUP:return function(e,t){const r=null!=e.resumeToken?t.resumeToken.byteLength(e.resumeToken):0,n=null!=e.metadataMimeType?t.metadataMimeType.byteLength(e.metadataMimeType):0,i=null!=e.dataMimeType?t.dataMimeType.byteLength(e.dataMimeType):0,o=d(e,t);return 20+(r?2+r:0)+n+i+o}(e,t);case o.FRAME_TYPES.PAYLOAD:return function(e,t){const r=d(e,t);return 6+r}(e,t);case o.FRAME_TYPES.ERROR:return function(e,t){const r=null!=e.message?t.message.byteLength(e.message):0;return 10+r}(e,t);case o.FRAME_TYPES.KEEPALIVE:return function(e,t){const r=null!=e.data?t.data.byteLength(e.data):0;return 14+r}(e,t);case o.FRAME_TYPES.REQUEST_FNF:case o.FRAME_TYPES.REQUEST_RESPONSE:return function(e,t){const r=d(e,t);return 6+r}(e,t);case o.FRAME_TYPES.REQUEST_STREAM:case o.FRAME_TYPES.REQUEST_CHANNEL:return function(e,t){const r=d(e,t);return 10+r}(e,t);case o.FRAME_TYPES.REQUEST_N:return 10;case o.FRAME_TYPES.RESUME:return function(e,t){const r=t.resumeToken.byteLength(e.resumeToken);return 28+r}(e,t);case o.FRAME_TYPES.RESUME_OK:return 14;case o.FRAME_TYPES.CANCEL:return 6;case o.FRAME_TYPES.LEASE:return function(e,t){const r=null!=e.metadata?t.metadata.byteLength(e.metadata):0;return 14+r}(e,t);default:(0,i.default)(!1,"RSocketBinaryFraming: Unsupported frame type `%s`.",(0,o.getFrameTypeName)(e.type))}};var n,i=(n=r(3759))&&n.__esModule?n:{default:n},o=r(1148),s=r(9882),a=r(3502);function c(e,t){t=t||s.Utf8Encoders;let r=0;const n=e.readInt32BE(r);r+=4,(0,i.default)(n>=0,"RSocketBinaryFraming: Invalid frame, expected a positive stream id, got `%s.",n);const c=e.readUInt16BE(r);r+=2;const l=c>>>o.FRAME_TYPE_OFFFSET,u=c&o.FLAGS_MASK;switch(l){case o.FRAME_TYPES.SETUP:return function(e,t,r,n){(0,i.default)(0===t,"RSocketBinaryFraming: Invalid SETUP frame, expected stream id to be 0.");const s=e.length;let a=6;const c=e.readUInt16BE(a);a+=2;const l=e.readUInt16BE(a);a+=2;const u=e.readInt32BE(a);a+=4,(0,i.default)(u>=0&&u<=o.MAX_KEEPALIVE,"RSocketBinaryFraming: Invalid SETUP frame, expected keepAlive to be >= 0 and <= %s. Got `%s`.",o.MAX_KEEPALIVE,u);const d=e.readInt32BE(a);a+=4,(0,i.default)(d>=0&&d<=o.MAX_LIFETIME,"RSocketBinaryFraming: Invalid SETUP frame, expected lifetime to be >= 0 and <= %s. Got `%s`.",o.MAX_LIFETIME,d);let h=null;if(r&o.FLAGS.RESUME_ENABLE){const t=e.readInt16BE(a);a+=2,(0,i.default)(t>=0&&t<=o.MAX_RESUME_LENGTH,"RSocketBinaryFraming: Invalid SETUP frame, expected resumeToken length to be >= 0 and <= %s. Got `%s`.",o.MAX_RESUME_LENGTH,t),h=n.resumeToken.decode(e,a,a+t),a+=t}const f=e.readUInt8(a);a+=1;const g=n.metadataMimeType.decode(e,a,a+f);a+=f;const m=e.readUInt8(a);a+=1;const _=n.dataMimeType.decode(e,a,a+m);a+=m;const E={data:null,dataMimeType:_,flags:r,keepAlive:u,length:s,lifetime:d,majorVersion:c,metadata:null,metadataMimeType:g,minorVersion:l,resumeToken:h,streamId:t,type:o.FRAME_TYPES.SETUP};return p(e,E,n,a),E}(e,n,u,t);case o.FRAME_TYPES.PAYLOAD:return function(e,t,r,n){(0,i.default)(t>0,"RSocketBinaryFraming: Invalid PAYLOAD frame, expected stream id to be > 0.");const s=e.length,a={data:null,flags:r,length:s,metadata:null,streamId:t,type:o.FRAME_TYPES.PAYLOAD};return p(e,a,n,6),a}(e,n,u,t);case o.FRAME_TYPES.ERROR:return function(e,t,r,n){const s=e.length;let a=6;const c=e.readInt32BE(a);a+=4,(0,i.default)(c>=0&&c<=o.MAX_CODE,"RSocketBinaryFraming: Invalid ERROR frame, expected code to be >= 0 and <= %s. Got `%s`.",o.MAX_CODE,c);const l=e.length-a;let u="";l>0&&(u=n.message.decode(e,a,a+l),a+=l);return{code:c,flags:r,length:s,message:u,streamId:t,type:o.FRAME_TYPES.ERROR}}(e,n,u,t);case o.FRAME_TYPES.KEEPALIVE:return function(e,t,r,n){(0,i.default)(0===t,"RSocketBinaryFraming: Invalid KEEPALIVE frame, expected stream id to be 0.");const s=e.length;let c=6;const l=(0,a.readUInt64BE)(e,c);c+=8;let u=null;c<e.length&&(u=n.data.decode(e,c,e.length));return{data:u,flags:r,lastReceivedPosition:l,length:s,streamId:t,type:o.FRAME_TYPES.KEEPALIVE}}(e,n,u,t);case o.FRAME_TYPES.REQUEST_FNF:return function(e,t,r,n){(0,i.default)(t>0,"RSocketBinaryFraming: Invalid REQUEST_FNF frame, expected stream id to be > 0.");const s=e.length,a={data:null,flags:r,length:s,metadata:null,streamId:t,type:o.FRAME_TYPES.REQUEST_FNF};return p(e,a,n,6),a}(e,n,u,t);case o.FRAME_TYPES.REQUEST_RESPONSE:return function(e,t,r,n){(0,i.default)(t>0,"RSocketBinaryFraming: Invalid REQUEST_RESPONSE frame, expected stream id to be > 0.");const s=e.length,a={data:null,flags:r,length:s,metadata:null,streamId:t,type:o.FRAME_TYPES.REQUEST_RESPONSE};return p(e,a,n,6),a}(e,n,u,t);case o.FRAME_TYPES.REQUEST_STREAM:return function(e,t,r,n){(0,i.default)(t>0,"RSocketBinaryFraming: Invalid REQUEST_STREAM frame, expected stream id to be > 0.");const s=e.length;let a=6;const c=e.readInt32BE(a);a+=4,(0,i.default)(c>0,"RSocketBinaryFraming: Invalid REQUEST_STREAM frame, expected requestN to be > 0, got `%s`.",c);const l={data:null,flags:r,length:s,metadata:null,requestN:c,streamId:t,type:o.FRAME_TYPES.REQUEST_STREAM};return p(e,l,n,a),l}(e,n,u,t);case o.FRAME_TYPES.REQUEST_CHANNEL:return function(e,t,r,n){(0,i.default)(t>0,"RSocketBinaryFraming: Invalid REQUEST_CHANNEL frame, expected stream id to be > 0.");const s=e.length;let a=6;const c=e.readInt32BE(a);a+=4,(0,i.default)(c>0,"RSocketBinaryFraming: Invalid REQUEST_STREAM frame, expected requestN to be > 0, got `%s`.",c);const l={data:null,flags:r,length:s,metadata:null,requestN:c,streamId:t,type:o.FRAME_TYPES.REQUEST_CHANNEL};return p(e,l,n,a),l}(e,n,u,t);case o.FRAME_TYPES.REQUEST_N:return function(e,t,r,n){(0,i.default)(t>0,"RSocketBinaryFraming: Invalid REQUEST_N frame, expected stream id to be > 0.");const s=e.length,a=e.readInt32BE(6);return(0,i.default)(a>0,"RSocketBinaryFraming: Invalid REQUEST_STREAM frame, expected requestN to be > 0, got `%s`.",a),{flags:r,length:s,requestN:a,streamId:t,type:o.FRAME_TYPES.REQUEST_N}}(e,n,u);case o.FRAME_TYPES.RESUME:return function(e,t,r,n){(0,i.default)(0===t,"RSocketBinaryFraming: Invalid RESUME frame, expected stream id to be 0.");const s=e.length;let c=6;const l=e.readUInt16BE(c);c+=2;const u=e.readUInt16BE(c);c+=2;const d=e.readInt16BE(c);c+=2,(0,i.default)(d>=0&&d<=o.MAX_RESUME_LENGTH,"RSocketBinaryFraming: Invalid SETUP frame, expected resumeToken length to be >= 0 and <= %s. Got `%s`.",o.MAX_RESUME_LENGTH,d);const h=n.resumeToken.decode(e,c,c+d);c+=d;const p=(0,a.readUInt64BE)(e,c);c+=8;const f=(0,a.readUInt64BE)(e,c);return c+=8,{clientPosition:f,flags:r,length:s,majorVersion:l,minorVersion:u,resumeToken:h,serverPosition:p,streamId:t,type:o.FRAME_TYPES.RESUME}}(e,n,u,t);case o.FRAME_TYPES.RESUME_OK:return function(e,t,r,n){(0,i.default)(0===t,"RSocketBinaryFraming: Invalid RESUME frame, expected stream id to be 0.");const s=e.length;return{clientPosition:(0,a.readUInt64BE)(e,6),flags:r,length:s,streamId:t,type:o.FRAME_TYPES.RESUME_OK}}(e,n,u);case o.FRAME_TYPES.CANCEL:return function(e,t,r,n){(0,i.default)(t>0,"RSocketBinaryFraming: Invalid CANCEL frame, expected stream id to be > 0.");const s=e.length;return{flags:r,length:s,streamId:t,type:o.FRAME_TYPES.CANCEL}}(e,n,u);case o.FRAME_TYPES.LEASE:return function(e,t,r,n){(0,i.default)(0===t,"RSocketBinaryFraming: Invalid LEASE frame, expected stream id to be 0.");const s=e.length;let a=6;const c=e.readUInt32BE(a);a+=4;const l=e.readUInt32BE(a);a+=4;let u=null;a<e.length&&(u=n.metadata.decode(e,a,e.length));return{flags:r,length:s,metadata:u,requestCount:l,streamId:t,ttl:c,type:o.FRAME_TYPES.LEASE}}(e,n,u,t);default:(0,i.default)(!1,"RSocketBinaryFraming: Unsupported frame type `%s`.",(0,o.getFrameTypeName)(l))}}function l(e,t){switch(t=t||s.Utf8Encoders,e.type){case o.FRAME_TYPES.SETUP:return function(e,t){const r=null!=e.resumeToken?t.resumeToken.byteLength(e.resumeToken):0,n=null!=e.metadataMimeType?t.metadataMimeType.byteLength(e.metadataMimeType):0,i=null!=e.dataMimeType?t.dataMimeType.byteLength(e.dataMimeType):0,s=d(e,t),c=(0,a.createBuffer)(20+(r?2+r:0)+n+i+s);let l=u(e,c);l=c.writeUInt16BE(e.majorVersion,l),l=c.writeUInt16BE(e.minorVersion,l),l=c.writeUInt32BE(e.keepAlive,l),l=c.writeUInt32BE(e.lifetime,l),e.flags&o.FLAGS.RESUME_ENABLE&&(l=c.writeUInt16BE(r,l),null!=e.resumeToken&&(l=t.resumeToken.encode(e.resumeToken,c,l,l+r)));l=c.writeUInt8(n,l),null!=e.metadataMimeType&&(l=t.metadataMimeType.encode(e.metadataMimeType,c,l,l+n));l=c.writeUInt8(i,l),null!=e.dataMimeType&&(l=t.dataMimeType.encode(e.dataMimeType,c,l,l+i));return h(e,c,t,l),c}(e,t);case o.FRAME_TYPES.PAYLOAD:return function(e,t){const r=d(e,t),n=(0,a.createBuffer)(6+r),i=u(e,n);return h(e,n,t,i),n}(e,t);case o.FRAME_TYPES.ERROR:return function(e,t){const r=null!=e.message?t.message.byteLength(e.message):0,n=(0,a.createBuffer)(10+r);let i=u(e,n);i=n.writeUInt32BE(e.code,i),null!=e.message&&t.message.encode(e.message,n,i,i+r);return n}(e,t);case o.FRAME_TYPES.KEEPALIVE:return function(e,t){const r=null!=e.data?t.data.byteLength(e.data):0,n=(0,a.createBuffer)(14+r);let i=u(e,n);i=(0,a.writeUInt64BE)(n,e.lastReceivedPosition,i),null!=e.data&&t.data.encode(e.data,n,i,i+r);return n}(e,t);case o.FRAME_TYPES.REQUEST_FNF:case o.FRAME_TYPES.REQUEST_RESPONSE:return function(e,t){const r=d(e,t),n=(0,a.createBuffer)(6+r),i=u(e,n);return h(e,n,t,i),n}(e,t);case o.FRAME_TYPES.REQUEST_STREAM:case o.FRAME_TYPES.REQUEST_CHANNEL:return function(e,t){const r=d(e,t),n=(0,a.createBuffer)(10+r);let i=u(e,n);return i=n.writeUInt32BE(e.requestN,i),h(e,n,t,i),n}(e,t);case o.FRAME_TYPES.REQUEST_N:return function(e,t){const r=(0,a.createBuffer)(10),n=u(e,r);return r.writeUInt32BE(e.requestN,n),r}(e);case o.FRAME_TYPES.RESUME:return function(e,t){const r=t.resumeToken.byteLength(e.resumeToken),n=(0,a.createBuffer)(28+r);let i=u(e,n);return i=n.writeUInt16BE(e.majorVersion,i),i=n.writeUInt16BE(e.minorVersion,i),i=n.writeUInt16BE(r,i),i=t.resumeToken.encode(e.resumeToken,n,i,i+r),i=(0,a.writeUInt64BE)(n,e.serverPosition,i),(0,a.writeUInt64BE)(n,e.clientPosition,i),n}(e,t);case o.FRAME_TYPES.RESUME_OK:return function(e,t){const r=(0,a.createBuffer)(14),n=u(e,r);return(0,a.writeUInt64BE)(r,e.clientPosition,n),r}(e);case o.FRAME_TYPES.CANCEL:return function(e,t){const r=(0,a.createBuffer)(6);return u(e,r),r}(e);case o.FRAME_TYPES.LEASE:return function(e,t){const r=null!=e.metadata?t.metadata.byteLength(e.metadata):0,n=(0,a.createBuffer)(14+r);let i=u(e,n);i=n.writeUInt32BE(e.ttl,i),i=n.writeUInt32BE(e.requestCount,i),null!=e.metadata&&t.metadata.encode(e.metadata,n,i,i+r);return n}(e,t);default:(0,i.default)(!1,"RSocketBinaryFraming: Unsupported frame type `%s`.",(0,o.getFrameTypeName)(e.type))}}function u(e,t){const r=t.writeInt32BE(e.streamId,0);return t.writeUInt16BE(e.type<<o.FRAME_TYPE_OFFFSET|e.flags&o.FLAGS_MASK,r)}function d(e,t){let r=0;return null!=e.data&&(r+=t.data.byteLength(e.data)),(0,o.isMetadata)(e.flags)&&(r+=3,null!=e.metadata&&(r+=t.metadata.byteLength(e.metadata))),r}function h(e,t,r,n){if((0,o.isMetadata)(e.flags))if(null!=e.metadata){const i=r.metadata.byteLength(e.metadata);n=(0,a.writeUInt24BE)(t,i,n),n=r.metadata.encode(e.metadata,t,n,n+i)}else n=(0,a.writeUInt24BE)(t,0,n);null!=e.data&&r.data.encode(e.data,t,n,t.length)}function p(e,t,r,n){if((0,o.isMetadata)(t.flags)){const i=(0,a.readUInt24BE)(e,n);n+=3,i>0&&(t.metadata=r.metadata.decode(e,n,n+i),n+=i)}n<e.length&&(t.data=r.data.decode(e,n,e.length))}},3502:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.readUInt24BE=function(e,t){const r=e.readUInt8(t)<<16,n=e.readUInt8(t+1)<<8,i=e.readUInt8(t+2);return r|n|i},t.writeUInt24BE=function(e,t,r){return r=e.writeUInt8(t>>>16,r),r=e.writeUInt8(t>>>8&255,r),e.writeUInt8(255&t,r)},t.readUInt64BE=function(e,t){const r=e.readUInt32BE(t),n=e.readUInt32BE(t+4);return r*i+n},t.writeUInt64BE=function(e,t,r){const n=t/i|0,o=t%i;return r=e.writeUInt32BE(n,r),e.writeUInt32BE(o,r)},t.byteLength=function(e,t){if(null==e)return 0;return n.LiteBuffer.byteLength(e,t)},t.createBuffer=t.toBuffer=void 0;var n=r(7771);const i=4294967296;const o="function"==typeof n.LiteBuffer.from?(...e)=>e[0]instanceof n.LiteBuffer?e[0]:n.LiteBuffer.from.apply(n.LiteBuffer,e):(...e)=>e[0]instanceof n.LiteBuffer?e[0]:new(n.LiteBuffer.bind.apply(n.LiteBuffer,[n.LiteBuffer,...e]));t.toBuffer=o;const s="function"==typeof n.LiteBuffer.alloc?e=>n.LiteBuffer.alloc(e):e=>new n.LiteBuffer(e).fill(0);t.createBuffer=s},6694:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=r(7956),o=(n=r(3759))&&n.__esModule?n:{default:n},s=r(1148),a=r(3253),c=r(8491),l=r(2307),u=r(2806),d=r(1357);t.default=class{constructor(e){this._checkConfig(e),this._cancel=null,this._config=e,this._connection=null,this._socket=null}close(){this._config.transport.close()}connect(){return(0,o.default)(!this._connection,"RSocketClient: Unexpected call to connect(), already connected."),this._connection=new i.Single((e=>{const t=this._config.transport;let r;t.connectionStatus().subscribe({onNext:n=>{"CONNECTED"===n.kind?(r&&r.cancel(),e.onComplete(new h(this._config,new d.ReassemblyDuplexConnection(t)))):"ERROR"===n.kind?(r&&r.cancel(),e.onError(n.error)):"CLOSED"===n.kind&&(r&&r.cancel(),e.onError(new Error("RSocketClient: Connection closed.")))},onSubscribe:n=>{r=n,e.onSubscribe((()=>{n.cancel(),t.close()})),r.request(Number.MAX_SAFE_INTEGER)}}),t.connect()})),this._connection}_checkConfig(e){const t=e.setup,r=t&&t.keepAlive;try{const e=window&&window.navigator;r>3e4&&e&&e.userAgent&&(e.userAgent.includes("Trident")||e.userAgent.includes("Edg"))&&console.warn("rsocket-js: Due to a browser bug, Internet Explorer and Edge users may experience WebSocket instability with keepAlive values longer than 30 seconds.")}catch(e){}}};class h{constructor(e,t){let r,n;const o=e.leases;if(o){const e=o();r=new l.RequesterLeaseHandler(e._receiver),n=new l.ResponderLeaseHandler(e._sender,e._stats)}const{keepAlive:a,lifetime:u}=e.setup;this._machine=(0,c.createClientMachine)(t,(e=>t.receive().subscribe(e)),u,e.serializers,e.responder,e.errorHandler,r,n),t.sendOne(this._buildSetupFrame(e));const d=(0,i.every)(a).map((()=>({data:null,flags:s.FLAGS.RESPOND,lastReceivedPosition:0,streamId:s.CONNECTION_STREAM_ID,type:s.FRAME_TYPES.KEEPALIVE})));t.send(d)}fireAndForget(e){this._machine.fireAndForget(e)}requestResponse(e){return this._machine.requestResponse(e)}requestStream(e){return this._machine.requestStream(e)}requestChannel(e){return this._machine.requestChannel(e)}metadataPush(e){return this._machine.metadataPush(e)}close(){this._machine.close()}connectionStatus(){return this._machine.connectionStatus()}availability(){return this._machine.availability()}_buildSetupFrame(e){const{dataMimeType:t,keepAlive:r,lifetime:n,metadataMimeType:i,payload:o}=e.setup,c=e.serializers||u.IdentitySerializers,l=o?c.data.serialize(o.data):void 0,d=o?c.metadata.serialize(o.metadata):void 0;let h=0;return void 0!==d&&(h|=s.FLAGS.METADATA),{data:l,dataMimeType:t,flags:h|(e.leases?s.FLAGS.LEASE:0),keepAlive:r,lifetime:n,majorVersion:a.MAJOR_VERSION,metadata:d,metadataMimeType:i,minorVersion:a.MINOR_VERSION,resumeToken:null,streamId:s.CONNECTION_STREAM_ID,type:s.FRAME_TYPES.SETUP}}}},9882:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BufferEncoders=t.Utf8Encoders=t.BufferEncoder=t.UTF8Encoder=void 0;var n,i=r(3502),o=(n=r(3759))&&n.__esModule?n:{default:n};const s={byteLength:e=>(0,i.byteLength)(e,"utf8"),decode:(e,t,r)=>e.toString("utf8",t,r),encode:(e,t,r,n)=>((0,o.default)("string"==typeof e,"RSocketEncoding: Expected value to be a string, got `%s`.",e),t.write(e,r,n-r,"utf8"),n)};t.UTF8Encoder=s;const a={byteLength:e=>((0,o.default)(Buffer.isBuffer(e),"RSocketEncoding: Expected value to be a buffer, got `%s`.",e),e.length),decode:(e,t,r)=>e.slice(t,r),encode:(e,t,r,n)=>((0,o.default)(Buffer.isBuffer(e),"RSocketEncoding: Expected value to be a buffer, got `%s`.",e),e.copy(t,r,0,e.length),n)};t.BufferEncoder=a;const c={data:s,dataMimeType:s,message:s,metadata:s,metadataMimeType:s,resumeToken:s};t.Utf8Encoders=c;const l={data:a,dataMimeType:s,message:s,metadata:a,metadataMimeType:s,resumeToken:a};t.BufferEncoders=l},1148:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isIgnore=function(e){return(e&u.IGNORE)===u.IGNORE},t.isMetadata=function(e){return(e&u.METADATA)===u.METADATA},t.isComplete=function(e){return(e&u.COMPLETE)===u.COMPLETE},t.isNext=function(e){return(e&u.NEXT)===u.NEXT},t.isRespond=function(e){return(e&u.RESPOND)===u.RESPOND},t.isResumeEnable=function(e){return(e&u.RESUME_ENABLE)===u.RESUME_ENABLE},t.isLease=function(e){return(e&u.LEASE)===u.LEASE},t.isFollows=function(e){return(e&u.FOLLOWS)===u.FOLLOWS},t.isResumePositionFrameType=function(e){return e===c.CANCEL||e===c.ERROR||e===c.PAYLOAD||e===c.REQUEST_CHANNEL||e===c.REQUEST_FNF||e===c.REQUEST_RESPONSE||e===c.REQUEST_STREAM||e===c.REQUEST_N},t.getFrameTypeName=p,t.createErrorFromFrame=function(e){const{code:t,message:r}=e,n=f(t),o=new Error((0,i.default)("RSocket error %s (%s): %s. See error `source` property for details.",g(t),n,r));return o.source={code:t,explanation:n,message:r},o},t.getErrorCodeExplanation=f,t.printFrame=function(e){const t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e);t.type=p(e.type)+` (${g(e.type)})`;const r=[];(0,n.default)(u,((t,n)=>{(e.flags&t)===t&&r.push(n)})),r.length||r.push("NO FLAGS");t.flags=r.join(" | ")+` (${g(e.flags)})`,e.type===c.ERROR&&(t.code=f(e.code)+` (${g(e.code)})`);return JSON.stringify(t,null,2)},t.MAX_VERSION=t.MAX_TTL=t.MAX_STREAM_ID=t.MAX_RESUME_LENGTH=t.MAX_REQUEST_N=t.MAX_REQUEST_COUNT=t.MAX_MIME_LENGTH=t.MAX_METADATA_LENGTH=t.MAX_LIFETIME=t.MAX_KEEPALIVE=t.MAX_CODE=t.FRAME_TYPE_OFFFSET=t.FLAGS_MASK=t.ERROR_EXPLANATIONS=t.ERROR_CODES=t.FLAGS=t.FRAME_TYPE_NAMES=t.FRAME_TYPES=t.CONNECTION_STREAM_ID=void 0;var n=o(r(4520)),i=o(r(8857));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.CONNECTION_STREAM_ID=0;const c={CANCEL:9,ERROR:11,EXT:63,KEEPALIVE:3,LEASE:2,METADATA_PUSH:12,PAYLOAD:10,REQUEST_CHANNEL:7,REQUEST_FNF:5,REQUEST_N:8,REQUEST_RESPONSE:4,REQUEST_STREAM:6,RESERVED:0,RESUME:13,RESUME_OK:14,SETUP:1};t.FRAME_TYPES=c;const l={};t.FRAME_TYPE_NAMES=l,(0,n.default)(c,((e,t)=>{l[e]=t}));const u={COMPLETE:64,FOLLOWS:128,IGNORE:512,LEASE:64,METADATA:256,NEXT:32,RESPOND:128,RESUME_ENABLE:128};t.FLAGS=u;const d={APPLICATION_ERROR:513,CANCELED:515,CONNECTION_CLOSE:258,CONNECTION_ERROR:257,INVALID:516,INVALID_SETUP:1,REJECTED:514,REJECTED_RESUME:4,REJECTED_SETUP:3,RESERVED:0,RESERVED_EXTENSION:4294967295,UNSUPPORTED_SETUP:2};t.ERROR_CODES=d;const h={};t.ERROR_EXPLANATIONS=h,(0,n.default)(d,((e,t)=>{h[e]=t}));t.FLAGS_MASK=1023;t.FRAME_TYPE_OFFFSET=10;t.MAX_CODE=2147483647;t.MAX_KEEPALIVE=2147483647;t.MAX_LIFETIME=2147483647;t.MAX_METADATA_LENGTH=16777215;t.MAX_MIME_LENGTH=255;t.MAX_REQUEST_COUNT=2147483647;t.MAX_REQUEST_N=2147483647;t.MAX_RESUME_LENGTH=65535;t.MAX_STREAM_ID=2147483647;t.MAX_TTL=2147483647;function p(e){const t=l[e];return null!=t?t:g(e)}function f(e){const t=h[e];return null!=t?t:e<=768?"RESERVED (PROTOCOL)":"RESERVED (APPLICATION)"}function g(e){return"0x"+e.toString(16)}t.MAX_VERSION=65535},2307:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResponderLeaseHandler=t.RequesterLeaseHandler=t.Leases=t.Lease=void 0;var n,i=(n=r(3759))&&n.__esModule?n:{default:n},o=r(7956),s=r(1148);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class c{constructor(e,t,r){(0,i.default)(e>0,"Lease time-to-live must be positive"),(0,i.default)(t>0,"Lease allowed requests must be positive"),this.timeToLiveMillis=e,this.allowedRequests=t,this.startingAllowedRequests=t,this.expiry=Date.now()+e,this.metadata=r}expired(){return Date.now()>this.expiry}valid(){return this.allowedRequests>0&&!this.expired()}_use(){if(this.expired())return!1;const e=this.allowedRequests,t=e>0;return t&&(this.allowedRequests=e-1),t}}t.Lease=c;t.Leases=class{constructor(){a(this,"_sender",(()=>o.Flowable.never())),a(this,"_receiver",(e=>{}))}sender(e){return this._sender=e,this}receiver(e){return this._receiver=e,this}stats(e){return this._stats=e,this}};t.RequesterLeaseHandler=class{constructor(e){a(this,"_requestN",-1),e(new o.Flowable((e=>{this._subscriber?e.onError(new Error("only 1 subscriber is allowed")):this.isDisposed()?e.onComplete():(this._subscriber=e,e.onSubscribe({cancel:()=>{this.dispose()},request:t=>{if(t<=0&&e.onError(new Error(`request demand must be positive: ${t}`)),!this.isDisposed()){const e=this._requestN;this._onRequestN(e),this._requestN=Math.min(Number.MAX_SAFE_INTEGER,Math.max(0,e)+t)}}}))})))}use(){const e=this._lease;return!!e&&e._use()}errorMessage(){return l(this._lease)}receive(e){if(!this.isDisposed()){const t=e.ttl,r=e.requestCount,n=e.metadata;this._onLease(new c(t,r,n))}}availability(){const e=this._lease;return e&&e.valid()?e.allowedRequests/e.startingAllowedRequests:0}dispose(){if(!this._isDisposed){this._isDisposed=!0;const e=this._subscriber;e&&e.onComplete()}}isDisposed(){return this._isDisposed}_onRequestN(e){const t=this._lease,r=this._subscriber;e<0&&t&&r&&r.onNext(t)}_onLease(e){const t=this._subscriber,r=this._requestN-1;r>=0&&t&&t.onNext(e),this._requestN=Math.max(-1,r),this._lease=e}};function l(e){if(!e)return"Lease was not received yet";if(e.valid())return"Missing leases";{const t=e.expired(),r=e.allowedRequests;return`Missing leases. Expired: ${t.toString()}, allowedRequests: ${r}`}}t.ResponderLeaseHandler=class{constructor(e,t,r){this._leaseSender=e,this._stats=t,this._errorConsumer=r}use(){const e=this._lease,t=!!e&&e._use();return this._onStatsEvent(t),t}errorMessage(){return l(this._lease)}send(e){let t,r;return this._leaseSender(this._stats).subscribe({onComplete:()=>this._onStatsEvent(),onError:e=>{this._onStatsEvent();const t=this._errorConsumer;t&&t(e)},onNext:t=>{this._lease=t,e(t)},onSubscribe:e=>{r?e.cancel():(e.request(s.MAX_REQUEST_N),t=e)}}),{dispose(){r||(r=!0,this._onStatsEvent(),t&&t.cancel())},isDisposed:()=>r}}_onStatsEvent(e){const t=this._stats;if(t){const r=void 0===e?"Terminate":e?"Accept":"Reject";t.onEvent(r)}}}},8491:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createServerMachine=function(e,t,r,n,i,o,s){return new p("SERVER",e,t,r,n,void 0,i,o,s)},t.createClientMachine=function(e,t,r,n,i,o,s,a){return new p("CLIENT",e,t,r,n,i,o,s,a)};var n=r(7956),i=c(r(139)),o=(c(r(3759)),c(r(3620))),s=r(1148),a=r(2806);r(2307);function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class h{constructor(e){this._responder=e||{}}setResponder(e){this._responder=e||{}}fireAndForget(e){if(this._responder.fireAndForget)try{this._responder.fireAndForget(e)}catch(e){console.error("fireAndForget threw an exception",e)}}requestResponse(e){let t;if(this._responder.requestResponse)try{return this._responder.requestResponse(e)}catch(e){console.error("requestResponse threw an exception",e),t=e}return n.Single.error(t||new Error("not implemented"))}requestStream(e){let t;if(this._responder.requestStream)try{return this._responder.requestStream(e)}catch(e){console.error("requestStream threw an exception",e),t=e}return n.Flowable.error(t||new Error("not implemented"))}requestChannel(e){let t;if(this._responder.requestChannel)try{return this._responder.requestChannel(e)}catch(e){console.error("requestChannel threw an exception",e),t=e}return n.Flowable.error(t||new Error("not implemented"))}metadataPush(e){let t;if(this._responder.metadataPush)try{return this._responder.metadataPush(e)}catch(e){console.error("metadataPush threw an exception",e),t=e}return n.Single.error(t||new Error("not implemented"))}}class p{constructor(e,t,r,n,i,o,c,l,u){d(this,"_connectionAvailability",1),d(this,"_handleTransportClose",(()=>{this._handleError(new Error("RSocket: The connection was closed."))})),d(this,"_handleError",(e=>{this._receivers.forEach((t=>{t.onError(e)})),this._receivers.clear(),this._subscriptions.forEach((e=>{e.cancel()})),this._subscriptions.clear(),this._connectionAvailability=0,this._dispose(this._requesterLeaseHandler,this._responderLeaseSenderDisposable);const t=this._keepAliveTimerHandle;t&&(clearTimeout(t),this._keepAliveTimerHandle=null)})),d(this,"_handleFrame",(e=>{const{streamId:t}=e;t===s.CONNECTION_STREAM_ID?this._handleConnectionFrame(e):this._handleStreamFrame(t,e)})),this._connection=t,this._requesterLeaseHandler=l,this._responderLeaseHandler=u,this._nextStreamId="CLIENT"===e?1:2,this._receivers=new Map,this._subscriptions=new Map,this._serializers=i||a.IdentitySerializers,this._requestHandler=new h(o),this._errorHandler=c,r({onComplete:this._handleTransportClose,onError:this._handleError,onNext:this._handleFrame,onSubscribe:e=>e.request(Number.MAX_SAFE_INTEGER)});const p=this._responderLeaseHandler;p&&(this._responderLeaseSenderDisposable=p.send(this._leaseFrameSender())),this._connection.connectionStatus().subscribe({onNext:e=>{"CLOSED"===e.kind?this._handleTransportClose():"ERROR"===e.kind&&this._handleError(e.error)},onSubscribe:e=>e.request(Number.MAX_SAFE_INTEGER)});this._keepAliveLastReceivedMillis=Date.now();const f=()=>{const e=Date.now()-this._keepAliveLastReceivedMillis;e>=n?this._handleConnectionError(new Error(`No keep-alive acks for ${n} millis`)):this._keepAliveTimerHandle=setTimeout(f,Math.max(100,n-e))};this._keepAliveTimerHandle=setTimeout(f,n)}setRequestHandler(e){this._requestHandler.setResponder(e)}close(){this._connection.close()}connectionStatus(){return this._connection.connectionStatus()}availability(){const e=this._requesterLeaseHandler,t=e?e.availability():1;return Math.min(this._connectionAvailability,t)}fireAndForget(e){if(this._useLeaseOrError(this._requesterLeaseHandler))return;const t=this._getNextStreamId(this._receivers),r=this._serializers.data.serialize(e.data),n=this._serializers.metadata.serialize(e.metadata),i={data:r,flags:void 0!==e.metadata?s.FLAGS.METADATA:0,metadata:n,streamId:t,type:s.FRAME_TYPES.REQUEST_FNF};this._connection.sendOne(i)}requestResponse(e){const t=this._useLeaseOrError(this._requesterLeaseHandler);if(t)return n.Single.error(new Error(t));const r=this._getNextStreamId(this._receivers);return new n.Single((t=>{this._receivers.set(r,{onComplete:i.default,onError:e=>t.onError(e),onNext:e=>t.onComplete(e)});const n=this._serializers.data.serialize(e.data),o=this._serializers.metadata.serialize(e.metadata),a={data:n,flags:void 0!==e.metadata?s.FLAGS.METADATA:0,metadata:o,streamId:r,type:s.FRAME_TYPES.REQUEST_RESPONSE};this._connection.sendOne(a),t.onSubscribe((()=>{this._receivers.delete(r);const e={flags:0,streamId:r,type:s.FRAME_TYPES.CANCEL};this._connection.sendOne(e)}))}))}requestStream(e){const t=this._useLeaseOrError(this._requesterLeaseHandler);if(t)return n.Flowable.error(new Error(t));const r=this._getNextStreamId(this._receivers);return new n.Flowable((t=>{this._receivers.set(r,t);let n=!1;t.onSubscribe({cancel:()=>{if(this._receivers.delete(r),!n)return;const e={flags:0,streamId:r,type:s.FRAME_TYPES.CANCEL};this._connection.sendOne(e)},request:t=>{if(t>s.MAX_REQUEST_N&&(t=s.MAX_REQUEST_N),n){const e={flags:0,requestN:t,streamId:r,type:s.FRAME_TYPES.REQUEST_N};this._connection.sendOne(e)}else{n=!0;const i=this._serializers.data.serialize(e.data),o=this._serializers.metadata.serialize(e.metadata),a={data:i,flags:void 0!==e.metadata?s.FLAGS.METADATA:0,metadata:o,requestN:t,streamId:r,type:s.FRAME_TYPES.REQUEST_STREAM};this._connection.sendOne(a)}}})}),s.MAX_REQUEST_N)}requestChannel(e){const t=this._useLeaseOrError(this._requesterLeaseHandler);if(t)return n.Flowable.error(new Error(t));const r=this._getNextStreamId(this._receivers);let i=!1;return new n.Flowable((t=>{try{this._receivers.set(r,t);let n=!1;t.onSubscribe({cancel:()=>{if(this._receivers.delete(r),!n)return;const e={flags:0,streamId:r,type:s.FRAME_TYPES.CANCEL};this._connection.sendOne(e)},request:t=>{if(t>s.MAX_REQUEST_N&&(t=s.MAX_REQUEST_N),n){const e={flags:0,requestN:t,streamId:r,type:s.FRAME_TYPES.REQUEST_N};this._connection.sendOne(e)}else i?(0,o.default)(!1,"RSocketClient: re-entrant call to request n before initial channel established."):(i=!0,e.subscribe({onComplete:()=>{this._sendStreamComplete(r)},onError:e=>{this._sendStreamError(r,e.message)},onNext:e=>{const i=this._serializers.data.serialize(e.data),o=this._serializers.metadata.serialize(e.metadata);if(n){const t={data:i,flags:s.FLAGS.NEXT|(void 0!==e.metadata?s.FLAGS.METADATA:0),metadata:o,streamId:r,type:s.FRAME_TYPES.PAYLOAD};this._connection.sendOne(t)}else{n=!0;const a={data:i,flags:void 0!==e.metadata?s.FLAGS.METADATA:0,metadata:o,requestN:t,streamId:r,type:s.FRAME_TYPES.REQUEST_CHANNEL};this._connection.sendOne(a)}},onSubscribe:e=>{this._subscriptions.set(r,e),e.request(1)}}))}})}catch(e){console.warn("Exception while subscribing to channel flowable:"+e)}}),s.MAX_REQUEST_N)}metadataPush(e){throw new Error("metadataPush() is not implemented")}_getNextStreamId(e){const t=this._nextStreamId;do{this._nextStreamId=this._nextStreamId+2&s.MAX_STREAM_ID}while(0===this._nextStreamId||e.has(t));return t}_useLeaseOrError(e){if(e&&!e.use())return e.errorMessage()}_leaseFrameSender(){return e=>this._connection.sendOne({flags:0,metadata:e.metadata,requestCount:e.allowedRequests,streamId:s.CONNECTION_STREAM_ID,ttl:e.timeToLiveMillis,type:s.FRAME_TYPES.LEASE})}_dispose(...e){e.forEach((e=>{e&&e.dispose()}))}_isRequest(e){switch(e){case s.FRAME_TYPES.REQUEST_FNF:case s.FRAME_TYPES.REQUEST_RESPONSE:case s.FRAME_TYPES.REQUEST_STREAM:case s.FRAME_TYPES.REQUEST_CHANNEL:return!0;default:return!1}}_handleConnectionError(e){this._handleError(e),this._connection.close();const t=this._errorHandler;t&&t(e)}_handleConnectionFrame(e){switch(e.type){case s.FRAME_TYPES.ERROR:const t=(0,s.createErrorFromFrame)(e);this._handleConnectionError(t);break;case s.FRAME_TYPES.EXT:break;case s.FRAME_TYPES.KEEPALIVE:this._keepAliveLastReceivedMillis=Date.now(),(0,s.isRespond)(e.flags)&&this._connection.sendOne(u(u({},e),{},{flags:e.flags^s.FLAGS.RESPOND,lastReceivedPosition:0}));break;case s.FRAME_TYPES.LEASE:const r=this._requesterLeaseHandler;r&&r.receive(e);break;case s.FRAME_TYPES.METADATA_PUSH:case s.FRAME_TYPES.REQUEST_CHANNEL:case s.FRAME_TYPES.REQUEST_FNF:case s.FRAME_TYPES.REQUEST_RESPONSE:case s.FRAME_TYPES.REQUEST_STREAM:case s.FRAME_TYPES.RESERVED:break;case s.FRAME_TYPES.RESUME:case s.FRAME_TYPES.RESUME_OK:break;default:0}}_handleStreamFrame(e,t){if(this._isRequest(t.type)){const t=this._useLeaseOrError(this._responderLeaseHandler);if(t)return void this._sendStreamError(e,t)}switch(t.type){case s.FRAME_TYPES.CANCEL:this._handleCancel(e,t);break;case s.FRAME_TYPES.REQUEST_N:this._handleRequestN(e,t);break;case s.FRAME_TYPES.REQUEST_FNF:this._handleFireAndForget(e,t);break;case s.FRAME_TYPES.REQUEST_RESPONSE:this._handleRequestResponse(e,t);break;case s.FRAME_TYPES.REQUEST_STREAM:this._handleRequestStream(e,t);break;case s.FRAME_TYPES.REQUEST_CHANNEL:this._handleRequestChannel(e,t);break;case s.FRAME_TYPES.ERROR:const r=(0,s.createErrorFromFrame)(t);this._handleStreamError(e,r);break;case s.FRAME_TYPES.PAYLOAD:const n=this._receivers.get(e);if(null!=n){if((0,s.isNext)(t.flags)){const e={data:this._serializers.data.deserialize(t.data),metadata:this._serializers.metadata.deserialize(t.metadata)};n.onNext(e)}(0,s.isComplete)(t.flags)&&(this._receivers.delete(e),n.onComplete())}break;default:0}}_handleCancel(e,t){const r=this._subscriptions.get(e);r&&(r.cancel(),this._subscriptions.delete(e))}_handleRequestN(e,t){const r=this._subscriptions.get(e);r&&r.request(t.requestN)}_handleFireAndForget(e,t){const r=this._deserializePayload(t);this._requestHandler.fireAndForget(r)}_handleRequestResponse(e,t){const r=this._deserializePayload(t);this._requestHandler.requestResponse(r).subscribe({onComplete:t=>{this._sendStreamPayload(e,t,!0)},onError:t=>this._sendStreamError(e,t.message),onSubscribe:t=>{const r={cancel:t,request:i.default};this._subscriptions.set(e,r)}})}_handleRequestStream(e,t){const r=this._deserializePayload(t);this._requestHandler.requestStream(r).subscribe({onComplete:()=>this._sendStreamComplete(e),onError:t=>this._sendStreamError(e,t.message),onNext:t=>this._sendStreamPayload(e,t),onSubscribe:r=>{this._subscriptions.set(e,r),r.request(t.requestN)}})}_handleRequestChannel(e,t){if(this._subscriptions.get(e))return;const r=new n.Flowable((r=>{let n=!0;r.onSubscribe({cancel:()=>{this._receivers.delete(e);const t={flags:0,streamId:e,type:s.FRAME_TYPES.CANCEL};this._connection.sendOne(t)},request:i=>{if(i>s.MAX_REQUEST_N&&(i=s.MAX_REQUEST_N),n&&i--,i>0){const t={flags:0,requestN:i,streamId:e,type:s.FRAME_TYPES.REQUEST_N};this._connection.sendOne(t)}n&&i>=0&&(n=!1,r.onNext(t))}})}),s.MAX_REQUEST_N),i=new n.FlowableProcessor(r,(e=>this._deserializePayload(e)));this._receivers.set(e,i),this._requestHandler.requestChannel(i).subscribe({onComplete:()=>this._sendStreamComplete(e),onError:t=>this._sendStreamError(e,t.message),onNext:t=>this._sendStreamPayload(e,t),onSubscribe:r=>{this._subscriptions.set(e,r),r.request(t.requestN)}})}_sendStreamComplete(e){this._subscriptions.delete(e),this._connection.sendOne({data:null,flags:s.FLAGS.COMPLETE,metadata:null,streamId:e,type:s.FRAME_TYPES.PAYLOAD})}_sendStreamError(e,t){this._subscriptions.delete(e),this._connection.sendOne({code:s.ERROR_CODES.APPLICATION_ERROR,flags:0,message:t,streamId:e,type:s.FRAME_TYPES.ERROR})}_sendStreamPayload(e,t,r=!1){let n=s.FLAGS.NEXT;r&&(n|=s.FLAGS.COMPLETE,this._subscriptions.delete(e));const i=this._serializers.data.serialize(t.data),o=this._serializers.metadata.serialize(t.metadata);this._connection.sendOne({data:i,flags:n,metadata:o,streamId:e,type:s.FRAME_TYPES.PAYLOAD})}_deserializePayload(e){return function(e,t){return{data:e.data.deserialize(t.data),metadata:e.metadata.deserialize(t.metadata)}}(this._serializers,e)}_handleStreamError(e,t){const r=this._receivers.get(e);null!=r&&(this._receivers.delete(e),r.onError(t))}}},9986:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=r(7956),o=(n=r(3759))&&n.__esModule?n:{default:n},s=r(1148),a=r(9904),c=r(4776);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.default=class{constructor(e,t,r){(0,o.default)(t.bufferSize>=0,"RSocketResumableTransport: bufferSize option must be >= 0, got `%s`.",t.bufferSize),this._encoders=r,this._bufferSize=t.bufferSize,this._sentFramesSize=0,this._position={client:0,server:0},this._currentConnection=null,this._statusSubscription=null,this._receiveSubscription=null,this._receivers=new Set,this._resumeToken=t.resumeToken,this._sessionTimeoutMillis=1e3*t.sessionDurationSeconds,this._sessionTimeoutHandle=null,this._senders=new Set,this._sentFrames=[],this._setupFrame=null,this._source=e,this._status=a.CONNECTION_STATUS.NOT_CONNECTED,this._statusSubscribers=new Set}close(){this._close()}connect(){(0,o.default)(!this._isTerminated(),"RSocketResumableTransport: Cannot connect(), connection terminated (%s: %s).",this._status.kind,"ERROR"===this._status.kind?this._status.error.message:"no message");try{this._disconnect(),this._currentConnection=null,this._receiveSubscription=null,this._statusSubscription=null,this._setConnectionStatus(a.CONNECTION_STATUS.CONNECTING);const e=this._source();e.connectionStatus().subscribe({onNext:t=>{t.kind!==this._status.kind&&("CONNECTED"===t.kind?(this._sessionTimeoutHandle&&(clearTimeout(this._sessionTimeoutHandle),this._sessionTimeoutHandle=null),null==this._setupFrame?this._handleConnected(e):this._handleResume(e)):this._isTerminationStatus(t)&&(this._sessionTimeoutHandle||(this._sessionTimeoutHandle=setTimeout((()=>this._close(this._resumeTimeoutError())),this._sessionTimeoutMillis)),this._disconnect(),this._setConnectionStatus(a.CONNECTION_STATUS.NOT_CONNECTED)))},onSubscribe:e=>{this._statusSubscription=e,e.request(Number.MAX_SAFE_INTEGER)}}),e.connect()}catch(e){this._close(e)}}connectionStatus(){return new i.Flowable((e=>{e.onSubscribe({cancel:()=>{this._statusSubscribers.delete(e)},request:()=>{this._statusSubscribers.add(e),e.onNext(this._status)}})}))}receive(){return new i.Flowable((e=>{let t=!1;e.onSubscribe({cancel:()=>{this._receivers.delete(e)},request:()=>{t||(t=!0,this._receivers.add(e))}})}))}sendOne(e){try{this._writeFrame(e)}catch(e){this._close(e)}}send(e){let t;e.subscribe({onComplete:()=>{t&&this._senders.delete(t)},onError:e=>{t&&this._senders.delete(t),this._close(e)},onNext:e=>this._writeFrame(e),onSubscribe:e=>{t=e,this._senders.add(t),t.request(Number.MAX_SAFE_INTEGER)}})}_close(e){if(this._isTerminated())return;e?this._setConnectionStatus({error:e,kind:"ERROR"}):this._setConnectionStatus(a.CONNECTION_STATUS.CLOSED);const t=this._receivers;t.forEach((e=>e.onComplete())),t.clear();const r=this._senders;r.forEach((e=>e.cancel())),r.clear(),this._sentFrames.length=0,this._disconnect()}_disconnect(){this._statusSubscription&&(this._statusSubscription.cancel(),this._statusSubscription=null),this._receiveSubscription&&(this._receiveSubscription.cancel(),this._receiveSubscription=null),this._currentConnection&&(this._currentConnection.close(),this._currentConnection=null)}_handleConnected(e){this._currentConnection=e,this._flushFrames(),this._setConnectionStatus(a.CONNECTION_STATUS.CONNECTED),e.receive().subscribe({onNext:e=>{try{this._receiveFrame(e)}catch(e){this._close(e)}},onSubscribe:e=>{this._receiveSubscription=e,e.request(Number.MAX_SAFE_INTEGER)}})}_handleResume(e){e.receive().take(1).subscribe({onNext:t=>{try{if(t.type===s.FRAME_TYPES.RESUME_OK){const{clientPosition:r}=t;if(r<this._position.client)return void this._close(this._nonResumableStateError());let n=r-this._position.client,i=0;for(;n>0;){const e=this._onReleasedTailFrame(this._sentFrames[i]);if(!e)return void this._close(this._absentLengthError(t));n-=e,i++}if(0!==n)return void this._close(this._inconsistentImpliedPositionError());i>0&&this._sentFrames.splice(0,i),this._handleConnected(e)}else{const e=t.type===s.FRAME_TYPES.ERROR?(0,s.createErrorFromFrame)(t):new Error("RSocketResumableTransport: Resumption failed for an unspecified reason.");this._close(e)}}catch(e){this._close(e)}},onSubscribe:e=>{this._receiveSubscription=e,e.request(1)}});const t=this._setupFrame;(0,o.default)(t,"RSocketResumableTransport: Cannot resume, setup frame has not been sent."),e.sendOne({clientPosition:this._position.client,flags:0,majorVersion:t.majorVersion,minorVersion:t.minorVersion,resumeToken:this._resumeToken,serverPosition:this._position.server,streamId:s.CONNECTION_STREAM_ID,type:s.FRAME_TYPES.RESUME})}_absentLengthError(e){return new Error("RSocketResumableTransport: absent frame.length for type "+e.type)}_inconsistentImpliedPositionError(){return new Error("RSocketResumableTransport: local frames are inconsistent with remote implied position")}_nonResumableStateError(){return new Error("RSocketResumableTransport: resumption failed, server is missing frames that are no longer in the client buffer.")}_resumeTimeoutError(){return new Error("RSocketResumableTransport: resumable session timed out")}_isTerminated(){return this._isTerminationStatus(this._status)}_isTerminationStatus(e){const t=e.kind;return"CLOSED"===t||"ERROR"===t}_setConnectionStatus(e){e.kind!==this._status.kind&&(this._status=e,this._statusSubscribers.forEach((t=>t.onNext(e))))}_receiveFrame(e){(0,s.isResumePositionFrameType)(e.type)&&e.length&&(this._position.server+=e.length),this._receivers.forEach((t=>t.onNext(e)))}_flushFrames(){this._sentFrames.forEach((e=>{const t=this._currentConnection;t&&t.sendOne(e)}))}_onReleasedTailFrame(e){const t=e.length;if(t)return this._sentFramesSize-=t,this._position.client+=t,t}_writeFrame(e){if(e.type===s.FRAME_TYPES.SETUP&&(e=u(u({},e),{},{flags:e.flags|s.FLAGS.RESUME_ENABLE,resumeToken:this._resumeToken}),this._setupFrame=e),e.length=(0,c.sizeOfFrame)(e,this._encoders),(0,s.isResumePositionFrameType)(e.type)){let t=this._bufferSize-this._sentFramesSize;const r=e.length;if(!r)return void this._close(this._absentLengthError(e));for(;t<r;){const r=this._sentFrames.shift();if(!r)break;{const n=this._onReleasedTailFrame(r);if(!n)return void this._close(this._absentLengthError(e));t+=n}}t>=r?(this._sentFrames.push(e),this._sentFramesSize+=r):this._position.client+=r}const t=this._currentConnection;t&&t.sendOne(e)}}},2806:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IdentitySerializers=t.IdentitySerializer=t.JsonSerializers=t.JsonSerializer=void 0;var n,i=r(7771),o=(n=r(3759))&&n.__esModule?n:{default:n};const s={deserialize:e=>{let t;if(null==e)return null;if("string"==typeof e)t=e;else if(i.LiteBuffer.isBuffer(e)){t=e.toString("utf8")}else{t=i.LiteBuffer.from(e).toString("utf8")}return JSON.parse(t)},serialize:JSON.stringify};t.JsonSerializer=s;const a={data:s,metadata:s};t.JsonSerializers=a;const c={deserialize:e=>((0,o.default)(null==e||"string"==typeof e||i.LiteBuffer.isBuffer(e)||e instanceof Uint8Array,"RSocketSerialization: Expected data to be a string, Buffer, or Uint8Array. Got `%s`.",e),e),serialize:e=>e};t.IdentitySerializer=c;const l={data:c,metadata:c};t.IdentitySerializers=l},7268:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(7956);var n,i=(n=r(3759))&&n.__esModule?n:{default:n},o=r(1148),s=r(2806),a=r(8491),c=r(2307),l=r(1357);function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.default=class{constructor(e){u(this,"_handleTransportComplete",(()=>{this._handleTransportError(new Error("RSocketServer: Connection closed unexpectedly."))})),u(this,"_handleTransportError",(e=>{this._connections.forEach((e=>{e.close()}))})),u(this,"_handleTransportConnection",(e=>{const t=new d;let r;(e=new l.ReassemblyDuplexConnection(e)).receive().subscribe(t.swap({onError:e=>console.error(e),onNext:r=>{switch(r.type){case o.FRAME_TYPES.RESUME:e.sendOne({code:o.ERROR_CODES.REJECTED_RESUME,flags:0,message:"RSocketServer: RESUME not supported.",streamId:o.CONNECTION_STREAM_ID,type:o.FRAME_TYPES.ERROR}),e.close();break;case o.FRAME_TYPES.SETUP:if(this._setupLeaseError(r)){e.sendOne({code:o.ERROR_CODES.INVALID_SETUP,flags:0,message:"RSocketServer: LEASE not supported.",streamId:o.CONNECTION_STREAM_ID,type:o.FRAME_TYPES.ERROR}),e.close();break}const n=this._getSerializers();let s,l;const u=this._config.leases;if(u){const e=u();s=new c.RequesterLeaseHandler(e._receiver),l=new c.ResponderLeaseHandler(e._sender,e._stats)}const d=(0,a.createServerMachine)(e,(e=>{t.swap(e)}),r.lifetime,n,this._config.errorHandler,s,l);try{const e=this._config.getRequestHandler(d,function(e,t){return{data:e.data.deserialize(t.data),metadata:e.metadata.deserialize(t.metadata)}}(n,r));d.setRequestHandler(e),this._connections.add(d)}catch(t){e.sendOne({code:o.ERROR_CODES.REJECTED_SETUP,flags:0,message:"Application rejected setup, reason: "+t.message,streamId:o.CONNECTION_STREAM_ID,type:o.FRAME_TYPES.ERROR}),e.close()}break;default:(0,i.default)(!1,"RSocketServer: Expected first frame to be SETUP or RESUME, got `%s`.",(0,o.getFrameTypeName)(r.type))}},onSubscribe:e=>{r=e,r.request(1)}}))})),this._config=e,this._connections=new Set,this._started=!1,this._subscription=null}start(){(0,i.default)(!this._started,"RSocketServer: Unexpected call to start(), already started."),this._started=!0,this._config.transport.start().subscribe({onComplete:this._handleTransportComplete,onError:this._handleTransportError,onNext:this._handleTransportConnection,onSubscribe:e=>{this._subscription=e,e.request(Number.MAX_SAFE_INTEGER)}})}stop(){this._subscription&&this._subscription.cancel(),this._config.transport.stop(),this._handleTransportError(new Error("RSocketServer: Connection terminated via stop()."))}_getSerializers(){return this._config.serializers||s.IdentitySerializers}_setupLeaseError(e){const t=(e.flags&o.FLAGS.LEASE)===o.FLAGS.LEASE,r=this._config.leases;return t&&!r}};class d{constructor(e){this._target=e}swap(e){return this._target=e,this._subscription&&this._target.onSubscribe&&this._target.onSubscribe(this._subscription),this}onComplete(){(0,i.default)(this._target,"must have target"),this._target.onComplete&&this._target.onComplete()}onError(e){(0,i.default)(this._target,"must have target"),this._target.onError&&this._target.onError(e)}onNext(e){(0,i.default)(this._target,"must have target"),this._target.onNext&&this._target.onNext(e)}onSubscribe(e){(0,i.default)(this._target,"must have target"),this._subscription=e,this._target.onSubscribe&&this._target.onSubscribe(e)}}},3253:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MINOR_VERSION=t.MAJOR_VERSION=void 0;t.MAJOR_VERSION=1;t.MINOR_VERSION=0},1357:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReassemblyDuplexConnection=void 0;var n=r(7771),i=(r(7956),r(1148));t.ReassemblyDuplexConnection=class{constructor(e){this._source=e}sendOne(e){this._source.sendOne(e)}send(e){this._source.send(e)}receive(){return this._source.receive().lift((e=>new o(e)))}close(){this._source.close()}connect(){this._source.connect()}connectionStatus(){return this._source.connectionStatus()}};class o{constructor(e){var t,r,n;t=this,r="_framesReassemblyMap",n=new Map,r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,this._actual=e}request(e){this._subscription.request(e)}cancel(){this._subscription.cancel(),this._framesReassemblyMap.clear()}onSubscribe(e){null==this._subscription?(this._subscription=e,this._actual.onSubscribe(this)):e.cancel()}onComplete(){this._actual.onComplete()}onError(e){this._actual.onError(e)}onNext(e){const t=e.streamId;if(t!==i.CONNECTION_STREAM_ID){const r=(0,i.isFollows)(e.flags),n=(0,i.isComplete)(e.flags),o=e.type===i.FRAME_TYPES.ERROR||e.type===i.FRAME_TYPES.CANCEL,a=this._framesReassemblyMap.get(t);if(a){if(!o)return a.metadata&&e.metadata&&(a.metadata=s(a.metadata,e.metadata)),a.data&&e.data?a.data=s(a.data,e.data):!a.data&&e.data&&(a.data=e.data),void(r&&!n||(n&&(a.flags|=i.FLAGS.COMPLETE),this._framesReassemblyMap.delete(t),this._actual.onNext(a)));this._framesReassemblyMap.delete(t)}else if(r&&!n&&!o)return void this._framesReassemblyMap.set(t,e)}this._actual.onNext(e)}}const s=(e,t)=>{switch(e.constructor.name){case"String":return e+t;case"Uint8Array":const r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r;default:return n.LiteBuffer.concat([e,t])}}},9794:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeRoutes=function(...e){if(e.length<1)throw new Error("routes should be non empty array");return n.LiteBuffer.concat(e.map((e=>s(e))))},t.encodeRoute=s,t.decodeRoutes=a,t.RoutingMetadata=void 0;var n=r(7771),i=r(3502);class o{constructor(e){this._buffer=e}iterator(){return a(this._buffer)}[Symbol.iterator](){return a(this._buffer)}}function s(e){const t=(0,i.toBuffer)(e,"utf8");if(t.length>255)throw new Error(`route length should fit into unsigned byte length but the given one is ${t.length}`);const r=(0,i.createBuffer)(1);return r.writeUInt8(t.length),n.LiteBuffer.concat([r,t])}function*a(e){const t=e.byteLength;let r=0;for(;r<t;){const n=e.readUInt8(r++);if(r+n>t)throw new Error(`Malformed RouteMetadata. Offset(${r}) + RouteLength(${n}) is greater than TotalLength`);const i=e.toString("utf8",r,r+n);r+=n,yield i}}t.RoutingMetadata=o},8063:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TYPES_BY_AUTH_STRING=t.TYPES_BY_AUTH_ID=t.BEARER=t.SIMPLE=t.UNKNOWN_RESERVED_AUTH_TYPE=t.UNPARSEABLE_AUTH_TYPE=t.default=void 0;class r{constructor(e,t){this._string=e,this._identifier=t}static fromIdentifier(e){return e<0||e>127?n:a[e]}static fromString(e){if(!e)throw new Error("type must be non-null");return e===i.string?n:c.get(e)||n}get identifier(){return this._identifier}get string(){return this._string}toString(){return this._string}}t.default=r;const n=new r("UNPARSEABLE_AUTH_TYPE_DO_NOT_USE",-2);t.UNPARSEABLE_AUTH_TYPE=n;const i=new r("UNKNOWN_YET_RESERVED_DO_NOT_USE",-1);t.UNKNOWN_RESERVED_AUTH_TYPE=i;const o=new r("simple",0);t.SIMPLE=o;const s=new r("bearer",1);t.BEARER=s;const a=new Array(128);t.TYPES_BY_AUTH_ID=a;const c=new Map;t.TYPES_BY_AUTH_STRING=c;const l=[n,i,o,s];a.fill(i);for(const e of l)e.identifier>=0&&(a[e.identifier]=e,c.set(e.string,e));Object.seal&&Object.seal(a)},8369:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TYPES_BY_MIME_STRING=t.TYPES_BY_MIME_ID=t.MESSAGE_RSOCKET_COMPOSITE_METADATA=t.MESSAGE_RSOCKET_ROUTING=t.MESSAGE_RSOCKET_TRACING_ZIPKIN=t.MESSAGE_RSOCKET_AUTHENTICATION=t.MESSAGE_RSOCKET_ACCEPT_MIMETYPES=t.MESSAGE_RSOCKET_MIMETYPE=t.APPLICATION_CLOUDEVENTS_JSON=t.APPLICATION_JAVA_OBJECT=t.APPLICATION_HESSIAN=t.VIDEO_VP8=t.VIDEO_H265=t.VIDEO_H264=t.TEXT_XML=t.TEXT_PLAIN=t.TEXT_HTML=t.TEXT_CSV=t.TEXT_CSS=t.MULTIPART_MIXED=t.IMAGE_TIFF=t.IMAGE_PNG=t.IMAGE_JPEG=t.IMAGE_HEIF=t.IMAGE_HEIF_SEQUENCE=t.IMAGE_HEIC=t.IMAGE_HEIC_SEQUENCE=t.IMAGE_GIG=t.IMAGE_BMP=t.AUDIO_VORBIS=t.AUDIO_OPUS=t.AUDIO_OGG=t.AUDIO_MPEG=t.AUDIO_MPEG3=t.AUDIO_MP4=t.AUDIO_MP3=t.AUDIO_AAC=t.APPLICATION_ZIP=t.APPLICATION_XML=t.APPLICATION_PROTOBUF=t.APPLICATION_THRIFT=t.APPLICATION_PDF=t.APPLICATION_OCTET_STREAM=t.APPLICATION_JSON=t.APPLICATION_JAVASCRIPT=t.APPLICATION_GZIP=t.APPLICATION_GRAPHQL=t.APPLICATION_CBOR=t.APPLICATION_AVRO=t.UNKNOWN_RESERVED_MIME_TYPE=t.UNPARSEABLE_MIME_TYPE=t.default=void 0;class r{constructor(e,t){this._string=e,this._identifier=t}static fromIdentifier(e){return e<0||e>127?n:Q[e]}static fromString(e){if(!e)throw new Error("type must be non-null");return e===i.string?n:Z.get(e)||n}get identifier(){return this._identifier}get string(){return this._string}toString(){return this._string}}t.default=r;const n=new r("UNPARSEABLE_MIME_TYPE_DO_NOT_USE",-2);t.UNPARSEABLE_MIME_TYPE=n;const i=new r("UNKNOWN_YET_RESERVED_DO_NOT_USE",-1);t.UNKNOWN_RESERVED_MIME_TYPE=i;const o=new r("application/avro",0);t.APPLICATION_AVRO=o;const s=new r("application/cbor",1);t.APPLICATION_CBOR=s;const a=new r("application/graphql",2);t.APPLICATION_GRAPHQL=a;const c=new r("application/gzip",3);t.APPLICATION_GZIP=c;const l=new r("application/javascript",4);t.APPLICATION_JAVASCRIPT=l;const u=new r("application/json",5);t.APPLICATION_JSON=u;const d=new r("application/octet-stream",6);t.APPLICATION_OCTET_STREAM=d;const h=new r("application/pdf",7);t.APPLICATION_PDF=h;const p=new r("application/vnd.apache.thrift.binary",8);t.APPLICATION_THRIFT=p;const f=new r("application/vnd.google.protobuf",9);t.APPLICATION_PROTOBUF=f;const g=new r("application/xml",10);t.APPLICATION_XML=g;const m=new r("application/zip",11);t.APPLICATION_ZIP=m;const _=new r("audio/aac",12);t.AUDIO_AAC=_;const E=new r("audio/mp3",13);t.AUDIO_MP3=E;const v=new r("audio/mp4",14);t.AUDIO_MP4=v;const y=new r("audio/mpeg3",15);t.AUDIO_MPEG3=y;const S=new r("audio/mpeg",16);t.AUDIO_MPEG=S;const b=new r("audio/ogg",17);t.AUDIO_OGG=b;const T=new r("audio/opus",18);t.AUDIO_OPUS=T;const P=new r("audio/vorbis",19);t.AUDIO_VORBIS=P;const A=new r("image/bmp",20);t.IMAGE_BMP=A;const w=new r("image/gif",21);t.IMAGE_GIG=w;const R=new r("image/heic-sequence",22);t.IMAGE_HEIC_SEQUENCE=R;const C=new r("image/heic",23);t.IMAGE_HEIC=C;const I=new r("image/heif-sequence",24);t.IMAGE_HEIF_SEQUENCE=I;const O=new r("image/heif",25);t.IMAGE_HEIF=O;const N=new r("image/jpeg",26);t.IMAGE_JPEG=N;const M=new r("image/png",27);t.IMAGE_PNG=M;const k=new r("image/tiff",28);t.IMAGE_TIFF=k;const D=new r("multipart/mixed",29);t.MULTIPART_MIXED=D;const L=new r("text/css",30);t.TEXT_CSS=L;const x=new r("text/csv",31);t.TEXT_CSV=x;const F=new r("text/html",32);t.TEXT_HTML=F;const U=new r("text/plain",33);t.TEXT_PLAIN=U;const j=new r("text/xml",34);t.TEXT_XML=j;const B=new r("video/H264",35);t.VIDEO_H264=B;const G=new r("video/H265",36);t.VIDEO_H265=G;const H=new r("video/VP8",37);t.VIDEO_VP8=H;const V=new r("application/x-hessian",38);t.APPLICATION_HESSIAN=V;const W=new r("application/x-java-object",39);t.APPLICATION_JAVA_OBJECT=W;const q=new r("application/cloudevents+json",40);t.APPLICATION_CLOUDEVENTS_JSON=q;const $=new r("message/x.rsocket.mime-type.v0",122);t.MESSAGE_RSOCKET_MIMETYPE=$;const z=new r("message/x.rsocket.accept-mime-types.v0",123);t.MESSAGE_RSOCKET_ACCEPT_MIMETYPES=z;const Y=new r("message/x.rsocket.authentication.v0",124);t.MESSAGE_RSOCKET_AUTHENTICATION=Y;const X=new r("message/x.rsocket.tracing-zipkin.v0",125);t.MESSAGE_RSOCKET_TRACING_ZIPKIN=X;const K=new r("message/x.rsocket.routing.v0",126);t.MESSAGE_RSOCKET_ROUTING=K;const J=new r("message/x.rsocket.composite-metadata.v0",127);t.MESSAGE_RSOCKET_COMPOSITE_METADATA=J;const Q=new Array(128);t.TYPES_BY_MIME_ID=Q;const Z=new Map;t.TYPES_BY_MIME_STRING=Z;const ee=[n,i,o,s,a,c,l,u,d,h,p,f,g,m,_,E,v,y,S,b,T,P,A,w,R,C,I,O,N,M,k,D,L,x,F,U,j,B,G,H,V,W,q,$,z,Y,X,K,J];Q.fill(i);for(const e of ee)e.identifier>=0&&(Q[e.identifier]=e,Z.set(e.string,e));Object.seal&&Object.seal(Q)},1269:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RSocketClient",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"RSocketServer",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"RSocketResumableTransport",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"WellKnownMimeType",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"UNPARSEABLE_MIME_TYPE",{enumerable:!0,get:function(){return s.UNPARSEABLE_MIME_TYPE}}),Object.defineProperty(t,"UNKNOWN_RESERVED_MIME_TYPE",{enumerable:!0,get:function(){return s.UNKNOWN_RESERVED_MIME_TYPE}}),Object.defineProperty(t,"APPLICATION_AVRO",{enumerable:!0,get:function(){return s.APPLICATION_AVRO}}),Object.defineProperty(t,"APPLICATION_CBOR",{enumerable:!0,get:function(){return s.APPLICATION_CBOR}}),Object.defineProperty(t,"APPLICATION_GRAPHQL",{enumerable:!0,get:function(){return s.APPLICATION_GRAPHQL}}),Object.defineProperty(t,"APPLICATION_GZIP",{enumerable:!0,get:function(){return s.APPLICATION_GZIP}}),Object.defineProperty(t,"APPLICATION_JAVASCRIPT",{enumerable:!0,get:function(){return s.APPLICATION_JAVASCRIPT}}),Object.defineProperty(t,"APPLICATION_JSON",{enumerable:!0,get:function(){return s.APPLICATION_JSON}}),Object.defineProperty(t,"APPLICATION_OCTET_STREAM",{enumerable:!0,get:function(){return s.APPLICATION_OCTET_STREAM}}),Object.defineProperty(t,"APPLICATION_PDF",{enumerable:!0,get:function(){return s.APPLICATION_PDF}}),Object.defineProperty(t,"APPLICATION_THRIFT",{enumerable:!0,get:function(){return s.APPLICATION_THRIFT}}),Object.defineProperty(t,"APPLICATION_PROTOBUF",{enumerable:!0,get:function(){return s.APPLICATION_PROTOBUF}}),Object.defineProperty(t,"APPLICATION_XML",{enumerable:!0,get:function(){return s.APPLICATION_XML}}),Object.defineProperty(t,"APPLICATION_ZIP",{enumerable:!0,get:function(){return s.APPLICATION_ZIP}}),Object.defineProperty(t,"AUDIO_AAC",{enumerable:!0,get:function(){return s.AUDIO_AAC}}),Object.defineProperty(t,"AUDIO_MP3",{enumerable:!0,get:function(){return s.AUDIO_MP3}}),Object.defineProperty(t,"AUDIO_MP4",{enumerable:!0,get:function(){return s.AUDIO_MP4}}),Object.defineProperty(t,"AUDIO_MPEG3",{enumerable:!0,get:function(){return s.AUDIO_MPEG3}}),Object.defineProperty(t,"AUDIO_MPEG",{enumerable:!0,get:function(){return s.AUDIO_MPEG}}),Object.defineProperty(t,"AUDIO_OGG",{enumerable:!0,get:function(){return s.AUDIO_OGG}}),Object.defineProperty(t,"AUDIO_OPUS",{enumerable:!0,get:function(){return s.AUDIO_OPUS}}),Object.defineProperty(t,"AUDIO_VORBIS",{enumerable:!0,get:function(){return s.AUDIO_VORBIS}}),Object.defineProperty(t,"IMAGE_BMP",{enumerable:!0,get:function(){return s.IMAGE_BMP}}),Object.defineProperty(t,"IMAGE_GIG",{enumerable:!0,get:function(){return s.IMAGE_GIG}}),Object.defineProperty(t,"IMAGE_HEIC_SEQUENCE",{enumerable:!0,get:function(){return s.IMAGE_HEIC_SEQUENCE}}),Object.defineProperty(t,"IMAGE_HEIC",{enumerable:!0,get:function(){return s.IMAGE_HEIC}}),Object.defineProperty(t,"IMAGE_HEIF_SEQUENCE",{enumerable:!0,get:function(){return s.IMAGE_HEIF_SEQUENCE}}),Object.defineProperty(t,"IMAGE_HEIF",{enumerable:!0,get:function(){return s.IMAGE_HEIF}}),Object.defineProperty(t,"IMAGE_JPEG",{enumerable:!0,get:function(){return s.IMAGE_JPEG}}),Object.defineProperty(t,"IMAGE_PNG",{enumerable:!0,get:function(){return s.IMAGE_PNG}}),Object.defineProperty(t,"IMAGE_TIFF",{enumerable:!0,get:function(){return s.IMAGE_TIFF}}),Object.defineProperty(t,"MULTIPART_MIXED",{enumerable:!0,get:function(){return s.MULTIPART_MIXED}}),Object.defineProperty(t,"TEXT_CSS",{enumerable:!0,get:function(){return s.TEXT_CSS}}),Object.defineProperty(t,"TEXT_CSV",{enumerable:!0,get:function(){return s.TEXT_CSV}}),Object.defineProperty(t,"TEXT_HTML",{enumerable:!0,get:function(){return s.TEXT_HTML}}),Object.defineProperty(t,"TEXT_PLAIN",{enumerable:!0,get:function(){return s.TEXT_PLAIN}}),Object.defineProperty(t,"TEXT_XML",{enumerable:!0,get:function(){return s.TEXT_XML}}),Object.defineProperty(t,"VIDEO_H264",{enumerable:!0,get:function(){return s.VIDEO_H264}}),Object.defineProperty(t,"VIDEO_H265",{enumerable:!0,get:function(){return s.VIDEO_H265}}),Object.defineProperty(t,"VIDEO_VP8",{enumerable:!0,get:function(){return s.VIDEO_VP8}}),Object.defineProperty(t,"APPLICATION_HESSIAN",{enumerable:!0,get:function(){return s.APPLICATION_HESSIAN}}),Object.defineProperty(t,"APPLICATION_JAVA_OBJECT",{enumerable:!0,get:function(){return s.APPLICATION_JAVA_OBJECT}}),Object.defineProperty(t,"APPLICATION_CLOUDEVENTS_JSON",{enumerable:!0,get:function(){return s.APPLICATION_CLOUDEVENTS_JSON}}),Object.defineProperty(t,"MESSAGE_RSOCKET_MIMETYPE",{enumerable:!0,get:function(){return s.MESSAGE_RSOCKET_MIMETYPE}}),Object.defineProperty(t,"MESSAGE_RSOCKET_ACCEPT_MIMETYPES",{enumerable:!0,get:function(){return s.MESSAGE_RSOCKET_ACCEPT_MIMETYPES}}),Object.defineProperty(t,"MESSAGE_RSOCKET_AUTHENTICATION",{enumerable:!0,get:function(){return s.MESSAGE_RSOCKET_AUTHENTICATION}}),Object.defineProperty(t,"MESSAGE_RSOCKET_TRACING_ZIPKIN",{enumerable:!0,get:function(){return s.MESSAGE_RSOCKET_TRACING_ZIPKIN}}),Object.defineProperty(t,"MESSAGE_RSOCKET_ROUTING",{enumerable:!0,get:function(){return s.MESSAGE_RSOCKET_ROUTING}}),Object.defineProperty(t,"MESSAGE_RSOCKET_COMPOSITE_METADATA",{enumerable:!0,get:function(){return s.MESSAGE_RSOCKET_COMPOSITE_METADATA}}),Object.defineProperty(t,"WellKnownAuthType",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"UNPARSEABLE_AUTH_TYPE",{enumerable:!0,get:function(){return a.UNPARSEABLE_AUTH_TYPE}}),Object.defineProperty(t,"UNKNOWN_RESERVED_AUTH_TYPE",{enumerable:!0,get:function(){return a.UNKNOWN_RESERVED_AUTH_TYPE}}),Object.defineProperty(t,"SIMPLE",{enumerable:!0,get:function(){return a.SIMPLE}}),Object.defineProperty(t,"BEARER",{enumerable:!0,get:function(){return a.BEARER}}),Object.defineProperty(t,"CONNECTION_STREAM_ID",{enumerable:!0,get:function(){return c.CONNECTION_STREAM_ID}}),Object.defineProperty(t,"ERROR_CODES",{enumerable:!0,get:function(){return c.ERROR_CODES}}),Object.defineProperty(t,"ERROR_EXPLANATIONS",{enumerable:!0,get:function(){return c.ERROR_EXPLANATIONS}}),Object.defineProperty(t,"FLAGS_MASK",{enumerable:!0,get:function(){return c.FLAGS_MASK}}),Object.defineProperty(t,"FLAGS",{enumerable:!0,get:function(){return c.FLAGS}}),Object.defineProperty(t,"FRAME_TYPE_OFFFSET",{enumerable:!0,get:function(){return c.FRAME_TYPE_OFFFSET}}),Object.defineProperty(t,"FRAME_TYPES",{enumerable:!0,get:function(){return c.FRAME_TYPES}}),Object.defineProperty(t,"MAX_CODE",{enumerable:!0,get:function(){return c.MAX_CODE}}),Object.defineProperty(t,"MAX_KEEPALIVE",{enumerable:!0,get:function(){return c.MAX_KEEPALIVE}}),Object.defineProperty(t,"MAX_LIFETIME",{enumerable:!0,get:function(){return c.MAX_LIFETIME}}),Object.defineProperty(t,"MAX_MIME_LENGTH",{enumerable:!0,get:function(){return c.MAX_MIME_LENGTH}}),Object.defineProperty(t,"MAX_RESUME_LENGTH",{enumerable:!0,get:function(){return c.MAX_RESUME_LENGTH}}),Object.defineProperty(t,"MAX_STREAM_ID",{enumerable:!0,get:function(){return c.MAX_STREAM_ID}}),Object.defineProperty(t,"MAX_VERSION",{enumerable:!0,get:function(){return c.MAX_VERSION}}),Object.defineProperty(t,"createErrorFromFrame",{enumerable:!0,get:function(){return c.createErrorFromFrame}}),Object.defineProperty(t,"getErrorCodeExplanation",{enumerable:!0,get:function(){return c.getErrorCodeExplanation}}),Object.defineProperty(t,"isComplete",{enumerable:!0,get:function(){return c.isComplete}}),Object.defineProperty(t,"isIgnore",{enumerable:!0,get:function(){return c.isIgnore}}),Object.defineProperty(t,"isLease",{enumerable:!0,get:function(){return c.isLease}}),Object.defineProperty(t,"isMetadata",{enumerable:!0,get:function(){return c.isMetadata}}),Object.defineProperty(t,"isNext",{enumerable:!0,get:function(){return c.isNext}}),Object.defineProperty(t,"isRespond",{enumerable:!0,get:function(){return c.isRespond}}),Object.defineProperty(t,"isResumeEnable",{enumerable:!0,get:function(){return c.isResumeEnable}}),Object.defineProperty(t,"printFrame",{enumerable:!0,get:function(){return c.printFrame}}),Object.defineProperty(t,"deserializeFrame",{enumerable:!0,get:function(){return l.deserializeFrame}}),Object.defineProperty(t,"deserializeFrameWithLength",{enumerable:!0,get:function(){return l.deserializeFrameWithLength}}),Object.defineProperty(t,"deserializeFrames",{enumerable:!0,get:function(){return l.deserializeFrames}}),Object.defineProperty(t,"serializeFrame",{enumerable:!0,get:function(){return l.serializeFrame}}),Object.defineProperty(t,"serializeFrameWithLength",{enumerable:!0,get:function(){return l.serializeFrameWithLength}}),Object.defineProperty(t,"byteLength",{enumerable:!0,get:function(){return u.byteLength}}),Object.defineProperty(t,"createBuffer",{enumerable:!0,get:function(){return u.createBuffer}}),Object.defineProperty(t,"readUInt24BE",{enumerable:!0,get:function(){return u.readUInt24BE}}),Object.defineProperty(t,"toBuffer",{enumerable:!0,get:function(){return u.toBuffer}}),Object.defineProperty(t,"writeUInt24BE",{enumerable:!0,get:function(){return u.writeUInt24BE}}),Object.defineProperty(t,"BufferEncoders",{enumerable:!0,get:function(){return d.BufferEncoders}}),Object.defineProperty(t,"BufferEncoder",{enumerable:!0,get:function(){return d.BufferEncoder}}),Object.defineProperty(t,"Utf8Encoders",{enumerable:!0,get:function(){return d.Utf8Encoders}}),Object.defineProperty(t,"UTF8Encoder",{enumerable:!0,get:function(){return d.UTF8Encoder}}),Object.defineProperty(t,"IdentitySerializer",{enumerable:!0,get:function(){return h.IdentitySerializer}}),Object.defineProperty(t,"IdentitySerializers",{enumerable:!0,get:function(){return h.IdentitySerializers}}),Object.defineProperty(t,"JsonSerializer",{enumerable:!0,get:function(){return h.JsonSerializer}}),Object.defineProperty(t,"JsonSerializers",{enumerable:!0,get:function(){return h.JsonSerializers}}),Object.defineProperty(t,"Leases",{enumerable:!0,get:function(){return p.Leases}}),Object.defineProperty(t,"Lease",{enumerable:!0,get:function(){return p.Lease}}),Object.defineProperty(t,"CompositeMetadata",{enumerable:!0,get:function(){return f.CompositeMetadata}}),Object.defineProperty(t,"ReservedMimeTypeEntry",{enumerable:!0,get:function(){return f.ReservedMimeTypeEntry}}),Object.defineProperty(t,"WellKnownMimeTypeEntry",{enumerable:!0,get:function(){return f.WellKnownMimeTypeEntry}}),Object.defineProperty(t,"ExplicitMimeTimeEntry",{enumerable:!0,get:function(){return f.ExplicitMimeTimeEntry}}),Object.defineProperty(t,"encodeAndAddCustomMetadata",{enumerable:!0,get:function(){return f.encodeAndAddCustomMetadata}}),Object.defineProperty(t,"encodeAndAddWellKnownMetadata",{enumerable:!0,get:function(){return f.encodeAndAddWellKnownMetadata}}),Object.defineProperty(t,"encodeCompositeMetadata",{enumerable:!0,get:function(){return f.encodeCompositeMetadata}}),Object.defineProperty(t,"decodeCompositeMetadata",{enumerable:!0,get:function(){return f.decodeCompositeMetadata}}),Object.defineProperty(t,"RoutingMetadata",{enumerable:!0,get:function(){return g.RoutingMetadata}}),Object.defineProperty(t,"encodeRoute",{enumerable:!0,get:function(){return g.encodeRoute}}),Object.defineProperty(t,"encodeRoutes",{enumerable:!0,get:function(){return g.encodeRoutes}}),Object.defineProperty(t,"decodeRoutes",{enumerable:!0,get:function(){return g.decodeRoutes}}),Object.defineProperty(t,"encodeSimpleAuthMetadata",{enumerable:!0,get:function(){return m.encodeSimpleAuthMetadata}}),Object.defineProperty(t,"encodeBearerAuthMetadata",{enumerable:!0,get:function(){return m.encodeBearerAuthMetadata}}),Object.defineProperty(t,"encodeWellKnownAuthMetadata",{enumerable:!0,get:function(){return m.encodeWellKnownAuthMetadata}}),Object.defineProperty(t,"encodeCustomAuthMetadata",{enumerable:!0,get:function(){return m.encodeCustomAuthMetadata}}),Object.defineProperty(t,"decodeSimpleAuthPayload",{enumerable:!0,get:function(){return m.decodeSimpleAuthPayload}}),Object.defineProperty(t,"decodeAuthMetadata",{enumerable:!0,get:function(){return m.decodeAuthMetadata}});var n=v(r(6694)),i=v(r(7268)),o=v(r(9986)),s=E(r(8369)),a=E(r(8063)),c=r(1148),l=r(4776),u=r(3502),d=r(9882),h=r(2806),p=r(2307),f=r(6145),g=r(9794),m=r(2453);function _(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _=function(){return e},e}function E(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=_();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=n?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function v(e){return e&&e.__esModule?e:{default:e}}},2046:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=c(r(5758)),i=c(r(2688)),o=c(r(3759)),s=c(r(3620)),a=c(r(139));function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class u{static just(...e){return new u((t=>{let r=!1,n=0;t.onSubscribe({cancel:()=>{r=!0},request:i=>{for(;!r&&i>0&&n<e.length;)t.onNext(e[n++]),i--;r||n!=e.length||t.onComplete()}})}))}static error(e){return new u((t=>{t.onSubscribe({cancel:()=>{},request:()=>{t.onError(e)}})}))}static never(){return new u((e=>{e.onSubscribe({cancel:a.default,request:a.default})}))}constructor(e,t=Number.MAX_SAFE_INTEGER){this._max=t,this._source=e}subscribe(e){let t;t="function"==typeof e?this._wrapCallback(e):e;const r=new d(t,this._max);this._source(r)}lift(e){return new u((t=>this._source(e(t))))}map(e){return this.lift((t=>new n.default(t,e)))}take(e){return this.lift((t=>new i.default(t,e)))}_wrapCallback(e){const t=this._max;return{onNext:e,onSubscribe(e){e.request(t)}}}}t.default=u;class d{constructor(e,t){l(this,"_cancel",(()=>{this._active&&(this._active=!1,this._subscription&&this._subscription.cancel())})),l(this,"_request",(e=>{(0,o.default)(Number.isInteger(e)&&e>=1&&e<=this._max,"Flowable: Expected request value to be an integer with a value greater than 0 and less than or equal to %s, got `%s`.",this._max,e),this._active&&(e===this._max?this._pending=this._max:(this._pending+=e,this._pending>=this._max&&(this._pending=this._max)),this._subscription&&this._subscription.request(e))})),this._active=!1,this._max=t,this._pending=0,this._started=!1,this._subscriber=e||{},this._subscription=null}onComplete(){if(this._active){this._active=!1,this._started=!0;try{this._subscriber.onComplete&&this._subscriber.onComplete()}catch(e){this._subscriber.onError&&this._subscriber.onError(e)}}else(0,s.default)(!1,"Flowable: Invalid call to onComplete(): %s.",this._started?"onComplete/onError was already called":"onSubscribe has not been called")}onError(e){!this._started||this._active?(this._active=!1,this._started=!0,this._subscriber.onError&&this._subscriber.onError(e)):(0,s.default)(!1,"Flowable: Invalid call to onError(): %s.",this._active?"onComplete/onError was already called":"onSubscribe has not been called")}onNext(e){if(this._active)if(0!==this._pending){this._pending!==this._max&&this._pending--;try{this._subscriber.onNext&&this._subscriber.onNext(e)}catch(e){this._subscription&&this._subscription.cancel(),this.onError(e)}}else(0,s.default)(!1,"Flowable: Invalid call to onNext(), all request()ed values have been published.");else(0,s.default)(!1,"Flowable: Invalid call to onNext(): %s.",this._active?"onComplete/onError was already called":"onSubscribe has not been called")}onSubscribe(e){if(this._started)(0,s.default)(!1,"Flowable: Invalid call to onSubscribe(): already called.");else{this._active=!0,this._started=!0,this._subscription=e;try{this._subscriber.onSubscribe&&this._subscriber.onSubscribe({cancel:this._cancel,request:this._request})}catch(e){this.onError(e)}}}}},5758:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=(n=r(2045))&&n.__esModule?n:{default:n};t.default=class{constructor(e,t){this._fn=t,this._subscriber=e,this._subscription=null}onComplete(){this._subscriber.onComplete()}onError(e){this._subscriber.onError(e)}onNext(e){try{this._subscriber.onNext(this._fn(e))}catch(e){(0,i.default)(this._subscription).cancel(),this._subscriber.onError(e)}}onSubscribe(e){this._subscription=e,this._subscriber.onSubscribe(e)}}},2827:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=(n=r(3620))&&n.__esModule?n:{default:n};t.default=class{constructor(e,t){this._source=e,this._transformer=t,this._done=!1,this._mappers=[]}onSubscribe(e){this._subscription=e}onNext(e){if(!this._sink)return void(0,i.default)("Warning, premature onNext for processor, dropping value");let t=e;this._transformer&&(t=this._transformer(e));const r=this._mappers.reduce(((e,t)=>t(e)),t);this._sink.onNext(r)}onError(e){this._error=e,this._sink?this._sink.onError(e):(0,i.default)("Warning, premature onError for processor, marking complete/errored")}onComplete(){this._done=!0,this._sink?this._sink.onComplete():(0,i.default)("Warning, premature onError for processor, marking complete")}subscribe(e){this._source.subscribe&&this._source.subscribe(this),this._sink=e,this._sink.onSubscribe(this),this._error?this._sink.onError(this._error):this._done&&this._sink.onComplete()}map(e){return this._mappers.push(e),this}request(e){this._subscription&&this._subscription.request(e)}cancel(){this._subscription&&this._subscription.cancel()}}},2688:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=(n=r(2045))&&n.__esModule?n:{default:n};t.default=class{constructor(e,t){this._subscriber=e,this._subscription=null,this._toTake=t}onComplete(){this._subscriber.onComplete()}onError(e){this._subscriber.onError(e)}onNext(e){try{this._subscriber.onNext(e),0==--this._toTake&&this._cancelAndComplete()}catch(e){(0,i.default)(this._subscription).cancel(),this._subscriber.onError(e)}}onSubscribe(e){this._subscription=e,this._subscriber.onSubscribe(e),this._toTake<=0&&this._cancelAndComplete()}_cancelAndComplete(){(0,i.default)(this._subscription).cancel(),this._subscriber.onComplete()}}},2727:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.every=function(e){return new i.default((t=>{let r=null,n=0;t.onSubscribe({cancel:()=>{null!=r&&(clearInterval(r),r=null)},request:i=>{i<Number.MAX_SAFE_INTEGER?n+=i:n=Number.MAX_SAFE_INTEGER,null==r&&(r=setInterval((()=>{n>0&&(n!==Number.MAX_SAFE_INTEGER&&n--,t.onNext(Date.now()))}),e))}})}))};var n,i=(n=r(2046))&&n.__esModule?n:{default:n}},6941:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r(3620)),i=o(r(139));function o(e){return e&&e.__esModule?e:{default:e}}class s{static of(e){return new s((t=>{t.onSubscribe(),t.onComplete(e)}))}static error(e){return new s((t=>{t.onSubscribe(),t.onError(e)}))}static never(){return new s((e=>{e.onSubscribe()}))}constructor(e){this._source=e}subscribe(e){const t=new a(e);try{this._source(t)}catch(e){t.onError(e)}}flatMap(e){return new s((t=>{let r;const n=()=>{r&&r(),r=null};this._source({onComplete:n=>{e(n).subscribe({onComplete:e=>{t.onComplete(e)},onError:e=>t.onError(e),onSubscribe:e=>{r=e}})},onError:e=>t.onError(e),onSubscribe:e=>{r=e,t.onSubscribe(n)}})}))}map(e){return new s((t=>this._source({onComplete:r=>t.onComplete(e(r)),onError:e=>t.onError(e),onSubscribe:e=>t.onSubscribe(e)})))}then(e,t){this.subscribe({onComplete:e||i.default,onError:t||i.default})}}t.default=s;class a{constructor(e){this._active=!1,this._started=!1,this._subscriber=e||{}}onComplete(e){if(this._active){this._active=!1,this._started=!0;try{this._subscriber.onComplete&&this._subscriber.onComplete(e)}catch(e){this._subscriber.onError&&this._subscriber.onError(e)}}else(0,n.default)(!1,"Single: Invalid call to onComplete(): %s.",this._started?"onComplete/onError was already called":"onSubscribe has not been called")}onError(e){!this._started||this._active?(this._active=!1,this._started=!0,this._subscriber.onError&&this._subscriber.onError(e)):(0,n.default)(!1,"Single: Invalid call to onError(): %s.",this._active?"onComplete/onError was already called":"onSubscribe has not been called")}onSubscribe(e){if(this._started)(0,n.default)(!1,"Single: Invalid call to onSubscribe(): already called.");else{this._active=!0,this._started=!0;try{this._subscriber.onSubscribe&&this._subscriber.onSubscribe((()=>{this._active&&(this._active=!1,e&&e())}))}catch(e){this.onError(e)}}}}},7956:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Flowable",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"Single",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"FlowableProcessor",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"every",{enumerable:!0,get:function(){return s.every}});var n=a(r(2046)),i=a(r(6941)),o=a(r(2827)),s=r(2727);function a(e){return e&&e.__esModule?e:{default:e}}},1160:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RSocketTlsClient=t.RSocketTcpClient=t.RSocketTcpConnection=void 0;var n=l(r(1631)),i=l(r(4016)),o=r(7956),s=l(r(3759)),a=r(1269),c=r(9904);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class d{constructor(e,t){u(this,"_handleError",(e=>{e=e||new Error("RSocketTcpClient: Socket closed unexpectedly."),this._close(e)})),u(this,"_handleData",(e=>{try{this._readFrames(e).forEach((e=>{this._receivers.forEach((t=>t.onNext(e)))}))}catch(e){this._handleError(e)}})),this._buffer=(0,a.createBuffer)(0),this._encoders=t,this._receivers=new Set,this._senders=new Set,this._statusSubscribers=new Set,e?(this.setupSocket(e),this._status=c.CONNECTION_STATUS.CONNECTED):(this._socket=null,this._status=c.CONNECTION_STATUS.NOT_CONNECTED)}close(){this._close()}connect(){throw new Error("not supported")}setupSocket(e){this._socket=e,e.on("close",this._handleError),e.on("end",this._handleError),e.on("error",this._handleError),e.on("data",this._handleData)}connectionStatus(){return new o.Flowable((e=>{e.onSubscribe({cancel:()=>{this._statusSubscribers.delete(e)},request:()=>{this._statusSubscribers.add(e),e.onNext(this._status)}})}))}receive(){return new o.Flowable((e=>{e.onSubscribe({cancel:()=>{this._receivers.delete(e)},request:()=>{this._receivers.add(e)}})}))}sendOne(e){this._writeFrame(e)}send(e){let t;e.subscribe({onComplete:()=>{t&&this._senders.delete(t)},onError:e=>{t&&this._senders.delete(t),this._handleError(e)},onNext:e=>this._writeFrame(e),onSubscribe:e=>{t=e,this._senders.add(t),t.request(Number.MAX_SAFE_INTEGER)}})}getConnectionState(){return this._status}setConnectionStatus(e){this._status=e,this._statusSubscribers.forEach((t=>t.onNext(e)))}_close(e){if("CLOSED"===this._status.kind||"ERROR"===this._status.kind)return;const t=e?{error:e,kind:"ERROR"}:c.CONNECTION_STATUS.CLOSED;this.setConnectionStatus(t),this._receivers.forEach((t=>{e?t.onError(e):t.onComplete()})),this._receivers.clear(),this._senders.forEach((e=>e.cancel())),this._senders.clear();const r=this._socket;r&&(r.removeAllListeners(),r.end(),this._socket=null)}_readFrames(e){const t=Buffer.concat([this._buffer,e]),[r,n]=(0,a.deserializeFrames)(t,this._encoders);return this._buffer=n,r}_writeFrame(e){try{const t=(0,a.serializeFrameWithLength)(e,this._encoders);(0,s.default)(this._socket,"RSocketTcpClient: Cannot send frame, not connected."),this._socket.write(t)}catch(e){this._handleError(e)}}}t.RSocketTcpConnection=d;t.RSocketTcpClient=class extends d{constructor(e,t){super(null,t),u(this,"_handleOpened",(()=>{this.setConnectionStatus(c.CONNECTION_STATUS.CONNECTED)})),this._options=e}connect(){(0,s.default)("NOT_CONNECTED"===this.getConnectionState().kind,"RSocketTcpClient: Cannot connect(), a connection is already established."),this.setConnectionStatus(c.CONNECTION_STATUS.CONNECTING);const e=n.default.connect(this._options);this.setupSocket(e),e.on("connect",this._handleOpened)}};t.RSocketTlsClient=class extends d{constructor(e,t){super(null,t),u(this,"_handleOpened",(()=>{this.setConnectionStatus(c.CONNECTION_STATUS.CONNECTED)})),this._options=e}connect(){(0,s.default)("NOT_CONNECTED"===this.getConnectionState().kind,"RSocketTlsClient: Cannot connect(), a connection is already established."),this.setConnectionStatus(c.CONNECTION_STATUS.CONNECTING);const e=i.default.connect(this._options);this.setupSocket(e),e.on("connect",this._handleOpened)}}},7876:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RSocketTcpConnection",{enumerable:!0,get:function(){return n.RSocketTcpConnection}}),t.default=void 0;var n=r(1160),i=n.RSocketTcpClient;t.default=i},637:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(7876),i=a(r(8614)),o=a(r(1631)),s=r(7956);function a(e){return e&&e.__esModule?e:{default:e}}t.default=class{constructor(e,t){this._emitter=new i.default,this._encoders=t,this._options=e}start(){return new s.Flowable((e=>{let t;const r=()=>{t&&t.close(),e.onComplete()},i=t=>e.onError(t),s=t=>{e.onNext(new n.RSocketTcpConnection(t,this._encoders))};e.onSubscribe({cancel:()=>{t&&(t.removeListener("connection",s),t.removeListener("error",i),this._emitter.removeListener("close",r),t.close(),t=null)},request:e=>{if(!t){const e=this._options.serverFactory||o.default.createServer;t=e(s),t.listen(this._options.port,this._options.host),t.on("error",i),this._emitter.on("close",r)}}})}))}stop(){this._emitter.emit("close")}}},381:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((n=r(637))&&n.__esModule?n:{default:n}).default;t.default=i},2628:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONNECTION_STATUS=void 0;const r={CLOSED:Object.freeze({kind:"CLOSED"}),CONNECTED:Object.freeze({kind:"CONNECTED"}),CONNECTING:Object.freeze({kind:"CONNECTING"}),NOT_CONNECTED:Object.freeze({kind:"NOT_CONNECTED"})};t.CONNECTION_STATUS=r},8945:()=>{},9904:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2628);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var i=r(8945);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}))},6625:(e,t)=>{var r;t=e.exports=d,r="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=Number.MAX_SAFE_INTEGER||9007199254740991,i=t.re=[],o=t.src=[],s=t.tokens={},a=0;function c(e){s[e]=a++}c("NUMERICIDENTIFIER"),o[s.NUMERICIDENTIFIER]="0|[1-9]\\d*",c("NUMERICIDENTIFIERLOOSE"),o[s.NUMERICIDENTIFIERLOOSE]="[0-9]+",c("NONNUMERICIDENTIFIER"),o[s.NONNUMERICIDENTIFIER]="\\d*[a-zA-Z-][a-zA-Z0-9-]*",c("MAINVERSION"),o[s.MAINVERSION]="("+o[s.NUMERICIDENTIFIER]+")\\.("+o[s.NUMERICIDENTIFIER]+")\\.("+o[s.NUMERICIDENTIFIER]+")",c("MAINVERSIONLOOSE"),o[s.MAINVERSIONLOOSE]="("+o[s.NUMERICIDENTIFIERLOOSE]+")\\.("+o[s.NUMERICIDENTIFIERLOOSE]+")\\.("+o[s.NUMERICIDENTIFIERLOOSE]+")",c("PRERELEASEIDENTIFIER"),o[s.PRERELEASEIDENTIFIER]="(?:"+o[s.NUMERICIDENTIFIER]+"|"+o[s.NONNUMERICIDENTIFIER]+")",c("PRERELEASEIDENTIFIERLOOSE"),o[s.PRERELEASEIDENTIFIERLOOSE]="(?:"+o[s.NUMERICIDENTIFIERLOOSE]+"|"+o[s.NONNUMERICIDENTIFIER]+")",c("PRERELEASE"),o[s.PRERELEASE]="(?:-("+o[s.PRERELEASEIDENTIFIER]+"(?:\\."+o[s.PRERELEASEIDENTIFIER]+")*))",c("PRERELEASELOOSE"),o[s.PRERELEASELOOSE]="(?:-?("+o[s.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+o[s.PRERELEASEIDENTIFIERLOOSE]+")*))",c("BUILDIDENTIFIER"),o[s.BUILDIDENTIFIER]="[0-9A-Za-z-]+",c("BUILD"),o[s.BUILD]="(?:\\+("+o[s.BUILDIDENTIFIER]+"(?:\\."+o[s.BUILDIDENTIFIER]+")*))",c("FULL"),c("FULLPLAIN"),o[s.FULLPLAIN]="v?"+o[s.MAINVERSION]+o[s.PRERELEASE]+"?"+o[s.BUILD]+"?",o[s.FULL]="^"+o[s.FULLPLAIN]+"$",c("LOOSEPLAIN"),o[s.LOOSEPLAIN]="[v=\\s]*"+o[s.MAINVERSIONLOOSE]+o[s.PRERELEASELOOSE]+"?"+o[s.BUILD]+"?",c("LOOSE"),o[s.LOOSE]="^"+o[s.LOOSEPLAIN]+"$",c("GTLT"),o[s.GTLT]="((?:<|>)?=?)",c("XRANGEIDENTIFIERLOOSE"),o[s.XRANGEIDENTIFIERLOOSE]=o[s.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*",c("XRANGEIDENTIFIER"),o[s.XRANGEIDENTIFIER]=o[s.NUMERICIDENTIFIER]+"|x|X|\\*",c("XRANGEPLAIN"),o[s.XRANGEPLAIN]="[v=\\s]*("+o[s.XRANGEIDENTIFIER]+")(?:\\.("+o[s.XRANGEIDENTIFIER]+")(?:\\.("+o[s.XRANGEIDENTIFIER]+")(?:"+o[s.PRERELEASE]+")?"+o[s.BUILD]+"?)?)?",c("XRANGEPLAINLOOSE"),o[s.XRANGEPLAINLOOSE]="[v=\\s]*("+o[s.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+o[s.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+o[s.XRANGEIDENTIFIERLOOSE]+")(?:"+o[s.PRERELEASELOOSE]+")?"+o[s.BUILD]+"?)?)?",c("XRANGE"),o[s.XRANGE]="^"+o[s.GTLT]+"\\s*"+o[s.XRANGEPLAIN]+"$",c("XRANGELOOSE"),o[s.XRANGELOOSE]="^"+o[s.GTLT]+"\\s*"+o[s.XRANGEPLAINLOOSE]+"$",c("COERCE"),o[s.COERCE]="(^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])",c("COERCERTL"),i[s.COERCERTL]=new RegExp(o[s.COERCE],"g"),c("LONETILDE"),o[s.LONETILDE]="(?:~>?)",c("TILDETRIM"),o[s.TILDETRIM]="(\\s*)"+o[s.LONETILDE]+"\\s+",i[s.TILDETRIM]=new RegExp(o[s.TILDETRIM],"g");c("TILDE"),o[s.TILDE]="^"+o[s.LONETILDE]+o[s.XRANGEPLAIN]+"$",c("TILDELOOSE"),o[s.TILDELOOSE]="^"+o[s.LONETILDE]+o[s.XRANGEPLAINLOOSE]+"$",c("LONECARET"),o[s.LONECARET]="(?:\\^)",c("CARETTRIM"),o[s.CARETTRIM]="(\\s*)"+o[s.LONECARET]+"\\s+",i[s.CARETTRIM]=new RegExp(o[s.CARETTRIM],"g");c("CARET"),o[s.CARET]="^"+o[s.LONECARET]+o[s.XRANGEPLAIN]+"$",c("CARETLOOSE"),o[s.CARETLOOSE]="^"+o[s.LONECARET]+o[s.XRANGEPLAINLOOSE]+"$",c("COMPARATORLOOSE"),o[s.COMPARATORLOOSE]="^"+o[s.GTLT]+"\\s*("+o[s.LOOSEPLAIN]+")$|^$",c("COMPARATOR"),o[s.COMPARATOR]="^"+o[s.GTLT]+"\\s*("+o[s.FULLPLAIN]+")$|^$",c("COMPARATORTRIM"),o[s.COMPARATORTRIM]="(\\s*)"+o[s.GTLT]+"\\s*("+o[s.LOOSEPLAIN]+"|"+o[s.XRANGEPLAIN]+")",i[s.COMPARATORTRIM]=new RegExp(o[s.COMPARATORTRIM],"g");c("HYPHENRANGE"),o[s.HYPHENRANGE]="^\\s*("+o[s.XRANGEPLAIN]+")\\s+-\\s+("+o[s.XRANGEPLAIN]+")\\s*$",c("HYPHENRANGELOOSE"),o[s.HYPHENRANGELOOSE]="^\\s*("+o[s.XRANGEPLAINLOOSE]+")\\s+-\\s+("+o[s.XRANGEPLAINLOOSE]+")\\s*$",c("STAR"),o[s.STAR]="(<|>)?=?\\s*\\*";for(var l=0;l<a;l++)r(l,o[l]),i[l]||(i[l]=new RegExp(o[l]));function u(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof d)return e;if("string"!=typeof e)return null;if(e.length>256)return null;if(!(t.loose?i[s.LOOSE]:i[s.FULL]).test(e))return null;try{return new d(e,t)}catch(e){return null}}function d(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof d){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>256)throw new TypeError("version is longer than 256 characters");if(!(this instanceof d))return new d(e,t);r("SemVer",e,t),this.options=t,this.loose=!!t.loose;var o=e.trim().match(t.loose?i[s.LOOSE]:i[s.FULL]);if(!o)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+o[1],this.minor=+o[2],this.patch=+o[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");o[4]?this.prerelease=o[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<n)return t}return e})):this.prerelease=[],this.build=o[5]?o[5].split("."):[],this.format()}t.parse=u,t.valid=function(e,t){var r=u(e,t);return r?r.version:null},t.clean=function(e,t){var r=u(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null},t.SemVer=d,d.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},d.prototype.toString=function(){return this.version},d.prototype.compare=function(e){return r("SemVer.compare",this.version,this.options,e),e instanceof d||(e=new d(e,this.options)),this.compareMain(e)||this.comparePre(e)},d.prototype.compareMain=function(e){return e instanceof d||(e=new d(e,this.options)),p(this.major,e.major)||p(this.minor,e.minor)||p(this.patch,e.patch)},d.prototype.comparePre=function(e){if(e instanceof d||(e=new d(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],i=e.prerelease[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return p(n,i)}while(++t)},d.prototype.compareBuild=function(e){e instanceof d||(e=new d(e,this.options));var t=0;do{var n=this.build[t],i=e.build[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return p(n,i)}while(++t)},d.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,r,n){"string"==typeof r&&(n=r,r=void 0);try{return new d(e,r).inc(t,n).version}catch(e){return null}},t.diff=function(e,t){if(_(e,t))return null;var r=u(e),n=u(t),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var o="prerelease"}for(var s in r)if(("major"===s||"minor"===s||"patch"===s)&&r[s]!==n[s])return i+s;return o},t.compareIdentifiers=p;var h=/^[0-9]+$/;function p(e,t){var r=h.test(e),n=h.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}function f(e,t,r){return new d(e,r).compare(new d(t,r))}function g(e,t,r){return f(e,t,r)>0}function m(e,t,r){return f(e,t,r)<0}function _(e,t,r){return 0===f(e,t,r)}function E(e,t,r){return 0!==f(e,t,r)}function v(e,t,r){return f(e,t,r)>=0}function y(e,t,r){return f(e,t,r)<=0}function S(e,t,r,n){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return _(e,r,n);case"!=":return E(e,r,n);case">":return g(e,r,n);case">=":return v(e,r,n);case"<":return m(e,r,n);case"<=":return y(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}function b(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof b){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof b))return new b(e,t);r("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===T?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}t.rcompareIdentifiers=function(e,t){return p(t,e)},t.major=function(e,t){return new d(e,t).major},t.minor=function(e,t){return new d(e,t).minor},t.patch=function(e,t){return new d(e,t).patch},t.compare=f,t.compareLoose=function(e,t){return f(e,t,!0)},t.compareBuild=function(e,t,r){var n=new d(e,r),i=new d(t,r);return n.compare(i)||n.compareBuild(i)},t.rcompare=function(e,t,r){return f(t,e,r)},t.sort=function(e,r){return e.sort((function(e,n){return t.compareBuild(e,n,r)}))},t.rsort=function(e,r){return e.sort((function(e,n){return t.compareBuild(n,e,r)}))},t.gt=g,t.lt=m,t.eq=_,t.neq=E,t.gte=v,t.lte=y,t.cmp=S,t.Comparator=b;var T={};function P(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof P)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new P(e.raw,t);if(e instanceof b)return new P(e.value,t);if(!(this instanceof P))return new P(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function A(e,t){for(var r=!0,n=e.slice(),i=n.pop();r&&n.length;)r=n.every((function(e){return i.intersects(e,t)})),i=n.pop();return r}function w(e){return!e||"x"===e.toLowerCase()||"*"===e}function R(e,t,r,n,i,o,s,a,c,l,u,d,h){return((t=w(r)?"":w(n)?">="+r+".0.0":w(i)?">="+r+"."+n+".0":">="+t)+" "+(a=w(c)?"":w(l)?"<"+(+c+1)+".0.0":w(u)?"<"+c+"."+(+l+1)+".0":d?"<="+c+"."+l+"."+u+"-"+d:"<="+a)).trim()}function C(e,t,n){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(i=0;i<e.length;i++)if(r(e[i].semver),e[i].semver!==T&&e[i].semver.prerelease.length>0){var o=e[i].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function I(e,t,r){try{t=new P(t,r)}catch(e){return!1}return t.test(e)}function O(e,t,r,n){var i,o,s,a,c;switch(e=new d(e,n),t=new P(t,n),r){case">":i=g,o=y,s=m,a=">",c=">=";break;case"<":i=m,o=v,s=g,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(I(e,t,n))return!1;for(var l=0;l<t.set.length;++l){var u=t.set[l],h=null,p=null;if(u.forEach((function(e){e.semver===T&&(e=new b(">=0.0.0")),h=h||e,p=p||e,i(e.semver,h.semver,n)?h=e:s(e.semver,p.semver,n)&&(p=e)})),h.operator===a||h.operator===c)return!1;if((!p.operator||p.operator===a)&&o(e,p.semver))return!1;if(p.operator===c&&s(e,p.semver))return!1}return!0}b.prototype.parse=function(e){var t=this.options.loose?i[s.COMPARATORLOOSE]:i[s.COMPARATOR],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new d(r[2],this.options.loose):this.semver=T},b.prototype.toString=function(){return this.value},b.prototype.test=function(e){if(r("Comparator.test",e,this.options.loose),this.semver===T||e===T)return!0;if("string"==typeof e)try{e=new d(e,this.options)}catch(e){return!1}return S(e,this.operator,this.semver,this.options)},b.prototype.intersects=function(e,t){if(!(e instanceof b))throw new TypeError("a Comparator is required");var r;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||(r=new P(e.value,t),I(this.value,r,t));if(""===e.operator)return""===e.value||(r=new P(this.value,t),I(e.semver,r,t));var n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=S(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=S(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||i||o&&s||a||c},t.Range=P,P.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},P.prototype.toString=function(){return this.range},P.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?i[s.HYPHENRANGELOOSE]:i[s.HYPHENRANGE];e=e.replace(n,R),r("hyphen replace",e),e=e.replace(i[s.COMPARATORTRIM],"$1$2$3"),r("comparator trim",e,i[s.COMPARATORTRIM]),e=(e=(e=e.replace(i[s.TILDETRIM],"$1~")).replace(i[s.CARETTRIM],"$1^")).split(/\s+/).join(" ");var o=t?i[s.COMPARATORLOOSE]:i[s.COMPARATOR],a=e.split(" ").map((function(e){return function(e,t){return r("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){r("caret",e,t);var n=t.loose?i[s.CARETLOOSE]:i[s.CARET];return e.replace(n,(function(t,n,i,o,s){var a;return r("caret",e,t,n,i,o,s),w(n)?a="":w(i)?a=">="+n+".0.0 <"+(+n+1)+".0.0":w(o)?a="0"===n?">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":">="+n+"."+i+".0 <"+(+n+1)+".0.0":s?(r("replaceCaret pr",s),a="0"===n?"0"===i?">="+n+"."+i+"."+o+"-"+s+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+"-"+s+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+"-"+s+" <"+(+n+1)+".0.0"):(r("no pr"),a="0"===n?"0"===i?">="+n+"."+i+"."+o+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+" <"+(+n+1)+".0.0"),r("caret return",a),a}))}(e,t)})).join(" ")}(e,t),r("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var n=t.loose?i[s.TILDELOOSE]:i[s.TILDE];return e.replace(n,(function(t,n,i,o,s){var a;return r("tilde",e,t,n,i,o,s),w(n)?a="":w(i)?a=">="+n+".0.0 <"+(+n+1)+".0.0":w(o)?a=">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":s?(r("replaceTilde pr",s),a=">="+n+"."+i+"."+o+"-"+s+" <"+n+"."+(+i+1)+".0"):a=">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0",r("tilde return",a),a}))}(e,t)})).join(" ")}(e,t),r("tildes",e),e=function(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var n=t.loose?i[s.XRANGELOOSE]:i[s.XRANGE];return e.replace(n,(function(n,i,o,s,a,c){r("xRange",e,n,i,o,s,a,c);var l=w(o),u=l||w(s),d=u||w(a),h=d;return"="===i&&h&&(i=""),c=t.includePrerelease?"-0":"",l?n=">"===i||"<"===i?"<0.0.0-0":"*":i&&h?(u&&(s=0),a=0,">"===i?(i=">=",u?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):"<="===i&&(i="<",u?o=+o+1:s=+s+1),n=i+o+"."+s+"."+a+c):u?n=">="+o+".0.0"+c+" <"+(+o+1)+".0.0"+c:d&&(n=">="+o+"."+s+".0"+c+" <"+o+"."+(+s+1)+".0"+c),r("xRange return",n),n}))}(e,t)})).join(" ")}(e,t),r("xrange",e),e=function(e,t){return r("replaceStars",e,t),e.trim().replace(i[s.STAR],"")}(e,t),r("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(a=a.filter((function(e){return!!e.match(o)}))),a=a.map((function(e){return new b(e,this.options)}),this)},P.prototype.intersects=function(e,t){if(!(e instanceof P))throw new TypeError("a Range is required");return this.set.some((function(r){return A(r,t)&&e.set.some((function(e){return A(e,t)&&r.every((function(r){return e.every((function(e){return r.intersects(e,t)}))}))}))}))},t.toComparators=function(e,t){return new P(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},P.prototype.test=function(e){if(!e)return!1;if("string"==typeof e)try{e=new d(e,this.options)}catch(e){return!1}for(var t=0;t<this.set.length;t++)if(C(this.set[t],e,this.options))return!0;return!1},t.satisfies=I,t.maxSatisfying=function(e,t,r){var n=null,i=null;try{var o=new P(t,r)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(n&&-1!==i.compare(e)||(i=new d(n=e,r)))})),n},t.minSatisfying=function(e,t,r){var n=null,i=null;try{var o=new P(t,r)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(n&&1!==i.compare(e)||(i=new d(n=e,r)))})),n},t.minVersion=function(e,t){e=new P(e,t);var r=new d("0.0.0");if(e.test(r))return r;if(r=new d("0.0.0-0"),e.test(r))return r;r=null;for(var n=0;n<e.set.length;++n){e.set[n].forEach((function(e){var t=new d(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":r&&!g(r,t)||(r=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}))}if(r&&e.test(r))return r;return null},t.validRange=function(e,t){try{return new P(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,r){return O(e,t,"<",r)},t.gtr=function(e,t,r){return O(e,t,">",r)},t.outside=O,t.prerelease=function(e,t){var r=u(e,t);return r&&r.prerelease.length?r.prerelease:null},t.intersects=function(e,t,r){return e=new P(e,r),t=new P(t,r),e.intersects(t)},t.coerce=function(e,t){if(e instanceof d)return e;"number"==typeof e&&(e=String(e));if("string"!=typeof e)return null;var r=null;if((t=t||{}).rtl){for(var n;(n=i[s.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&n.index+n[0].length===r.index+r[0].length||(r=n),i[s.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;i[s.COERCERTL].lastIndex=-1}else r=e.match(i[s.COERCE]);if(null===r)return null;return u(r[2]+"."+(r[3]||"0")+"."+(r[4]||"0"),t)}},7908:(e,t,r)=>{var n,i=r(2357),o=r(5397),s=/^win/i.test(process.platform),a=r(8614);function c(){d&&(d=!1,o.forEach((function(e){try{process.removeListener(e,u[e])}catch(e){}})),process.emit=g,process.reallyExit=p,n.count-=1)}function l(e,t,r){n.emitted[e]||(n.emitted[e]=!0,n.emit(e,t,r))}"function"!=typeof a&&(a=a.EventEmitter),process.__signal_exit_emitter__?n=process.__signal_exit_emitter__:((n=process.__signal_exit_emitter__=new a).count=0,n.emitted={}),n.infinite||(n.setMaxListeners(1/0),n.infinite=!0),e.exports=function(e,t){i.equal(typeof e,"function","a callback must be provided for exit handler"),!1===d&&h();var r="exit";t&&t.alwaysLast&&(r="afterexit");return n.on(r,e),function(){n.removeListener(r,e),0===n.listeners("exit").length&&0===n.listeners("afterexit").length&&c()}},e.exports.unload=c;var u={};o.forEach((function(e){u[e]=function(){process.listeners(e).length===n.count&&(c(),l("exit",null,e),l("afterexit",null,e),s&&"SIGHUP"===e&&(e="SIGINT"),process.kill(process.pid,e))}})),e.exports.signals=function(){return o},e.exports.load=h;var d=!1;function h(){d||(d=!0,n.count+=1,o=o.filter((function(e){try{return process.on(e,u[e]),!0}catch(e){return!1}})),process.emit=m,process.reallyExit=f)}var p=process.reallyExit;function f(e){process.exitCode=e||0,l("exit",process.exitCode,null),l("afterexit",process.exitCode,null),p.call(process,process.exitCode)}var g=process.emit;function m(e,t){if("exit"===e){void 0!==t&&(process.exitCode=t);var r=g.apply(this,arguments);return l("exit",process.exitCode,null),l("afterexit",process.exitCode,null),r}return g.apply(this,arguments)}},5397:e=>{e.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"],"win32"!==process.platform&&e.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT"),"linux"===process.platform&&e.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")},6028:(e,t,r)=>{var n=r(4020);e.exports=function(e){return n(e.replace(/\+/g,"%2B"))}},6027:(e,t,r)=>{var n=r(8835);e.exports=function(){return Array.prototype.reduce.call(arguments,(function(e,t){return n.resolve(e,t)}))}},9564:(e,t,r)=>{var n=r(6636),i=r(6027),o=r(6028),s=r(8146),a=r(3825);function c(e,t,r){setImmediate((function(){e(t,r)}))}function l(e,t){try{return JSON.parse(e.replace(/^\)\]\}'/,""))}catch(e){throw e.sourceMapData=t,e}}function u(e,t,r){var n=o(t);try{return String(e(n))}catch(e){throw e.sourceMapData=r,e}}function d(e,t,r,n){var i;try{i=m(e,t)}catch(e){return c(n,e)}if(!i||i.map)return c(n,null,i);r(o(i.url),(function(e,t){if(e)return e.sourceMapData=i,n(e);i.map=String(t);try{i.map=l(i.map,i)}catch(e){return n(e)}n(null,i)}))}function h(e,t,r){var n=m(e,t);return!n||n.map||(n.map=u(r,n.url,n),n.map=l(n.map,n)),n}var p=/^data:([^,;]*)(;[^,;]*)*(?:,(.*))?$/,f=/^(?:application|text)\/json$/;function g(e){if("undefined"==typeof TextDecoder||"undefined"==typeof Uint8Array)return a(e);var t=function(e){for(var t=a(e),r=t.length,n=new Uint8Array(r),i=0;i<r;i++)n[i]=t.charCodeAt(i);return n}(e);return new TextDecoder("utf-8",{fatal:!0}).decode(t)}function m(e,t){t=s(t);var r=n.getFrom(e);if(!r)return null;var o=r.match(p);if(o){var a=o[1]||"text/plain",c=o[2]||"",u=o[3]||"",d={sourceMappingURL:r,url:null,sourcesRelativeTo:t,map:u};if(!f.test(a)){var h=new Error("Unuseful data uri mime type: "+a);throw h.sourceMapData=d,h}try{d.map=l(";base64"===c?g(u):decodeURIComponent(u),d)}catch(h){throw h.sourceMapData=d,h}return d}var m=i(t,r);return{sourceMappingURL:r,url:m,sourcesRelativeTo:m,map:null}}function _(e,t,r,n,i){"function"==typeof n&&(i=n,n={});var s=e.sources?e.sources.length:0,a={sourcesResolved:[],sourcesContent:[]};if(0!==s){var l=function(){0===--s&&i(null,a)};y(e,t,n,(function(e,t,n){if(a.sourcesResolved[n]=e,"string"==typeof t)a.sourcesContent[n]=t,c(l,null);else{var i=o(e);r(i,(function(e,t){a.sourcesContent[n]=e||String(t),l()}))}}))}else c(i,null,a)}function E(e,t,r,n){var i={sourcesResolved:[],sourcesContent:[]};return e.sources&&0!==e.sources.length?(y(e,t,n,(function(e,t,n){if(i.sourcesResolved[n]=e,null!==r)if("string"==typeof t)i.sourcesContent[n]=t;else{var s=o(e);try{i.sourcesContent[n]=String(r(s))}catch(e){i.sourcesContent[n]=e}}})),i):i}var v=/\/?$/;function y(e,t,r,n){var o;r=r||{},t=s(t);for(var a=0,c=e.sources.length;a<c;a++)o=null,"string"==typeof r.sourceRoot?o=r.sourceRoot:"string"==typeof e.sourceRoot&&!1!==r.sourceRoot&&(o=e.sourceRoot),n(null===o||""===o?i(t,e.sources[a]):i(t,o.replace(v,"/"),e.sources[a]),(e.sourcesContent||[])[a],a)}e.exports={resolveSourceMap:d,resolveSourceMapSync:h,resolveSources:_,resolveSourcesSync:E,resolve:function(e,t,r,n,i){if("function"==typeof n&&(i=n,n={}),null===e){var s={sourceMappingURL:null,url:t,sourcesRelativeTo:t,map:null},a=o(t);r(a,(function(e,t){if(e)return e.sourceMapData=s,i(e);s.map=String(t);try{s.map=l(s.map,s)}catch(e){return i(e)}c(s)}))}else d(e,t,r,(function(e,t){return e?i(e):t?void c(t):i(null,null)}));function c(e){_(e.map,e.sourcesRelativeTo,r,n,(function(t,r){if(t)return i(t);e.sourcesResolved=r.sourcesResolved,e.sourcesContent=r.sourcesContent,i(null,e)}))}},resolveSync:function(e,t,r,n){var i;if(null===e){(i={sourceMappingURL:null,url:t,sourcesRelativeTo:t,map:null}).map=u(r,t,i),i.map=l(i.map,i)}else if(!(i=h(e,t,r)))return null;var o=E(i.map,i.sourcesRelativeTo,r,n);return i.sourcesResolved=o.sourcesResolved,i.sourcesContent=o.sourcesContent,i},parseMapToJSON:l}},9502:(e,t,r)=>{r(1079).SourceMapGenerator,t.SourceMapConsumer=r(1656).SourceMapConsumer,r(5574).SourceNode},1656:(e,t,r)=>{if(e=r.nmd(e),"function"!=typeof n)var n=r(5233)(e,r(4514));n((function(e,t,r){var n=e("./util"),i=e("./binary-search"),o=e("./array-set").ArraySet,s=e("./base64-vlq");function a(e){var t=e;"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,"")));var r=n.getArg(t,"version"),i=n.getArg(t,"sources"),s=n.getArg(t,"names",[]),a=n.getArg(t,"sourceRoot",null),c=n.getArg(t,"sourcesContent",null),l=n.getArg(t,"mappings"),u=n.getArg(t,"file",null);if(r!=this._version)throw new Error("Unsupported version: "+r);this._names=o.fromArray(s,!0),this._sources=o.fromArray(i,!0),this.sourceRoot=a,this.sourcesContent=c,this._mappings=l,this.file=u}a.fromSourceMap=function(e){var t=Object.create(a.prototype);return t._names=o.fromArray(e._names.toArray(),!0),t._sources=o.fromArray(e._sources.toArray(),!0),t.sourceRoot=e._sourceRoot,t.sourcesContent=e._generateSourcesContent(t._sources.toArray(),t.sourceRoot),t.file=e._file,t.__generatedMappings=e._mappings.slice().sort(n.compareByGeneratedPositions),t.__originalMappings=e._mappings.slice().sort(n.compareByOriginalPositions),t},a.prototype._version=3,Object.defineProperty(a.prototype,"sources",{get:function(){return this._sources.toArray().map((function(e){return this.sourceRoot?n.join(this.sourceRoot,e):e}),this)}}),a.prototype.__generatedMappings=null,Object.defineProperty(a.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||(this.__generatedMappings=[],this.__originalMappings=[],this._parseMappings(this._mappings,this.sourceRoot)),this.__generatedMappings}}),a.prototype.__originalMappings=null,Object.defineProperty(a.prototype,"_originalMappings",{get:function(){return this.__originalMappings||(this.__generatedMappings=[],this.__originalMappings=[],this._parseMappings(this._mappings,this.sourceRoot)),this.__originalMappings}}),a.prototype._parseMappings=function(e,t){for(var r,i,o=1,a=0,c=0,l=0,u=0,d=0,h=/^[,;]/,p=e;p.length>0;)if(";"===p.charAt(0))o++,p=p.slice(1),a=0;else if(","===p.charAt(0))p=p.slice(1);else{if((r={}).generatedLine=o,i=s.decode(p),r.generatedColumn=a+i.value,a=r.generatedColumn,(p=i.rest).length>0&&!h.test(p.charAt(0))){if(i=s.decode(p),r.source=this._sources.at(u+i.value),u+=i.value,0===(p=i.rest).length||h.test(p.charAt(0)))throw new Error("Found a source, but no line and column");if(i=s.decode(p),r.originalLine=c+i.value,c=r.originalLine,r.originalLine+=1,0===(p=i.rest).length||h.test(p.charAt(0)))throw new Error("Found a source and line, but no column");i=s.decode(p),r.originalColumn=l+i.value,l=r.originalColumn,(p=i.rest).length>0&&!h.test(p.charAt(0))&&(i=s.decode(p),r.name=this._names.at(d+i.value),d+=i.value,p=i.rest)}this.__generatedMappings.push(r),"number"==typeof r.originalLine&&this.__originalMappings.push(r)}this.__generatedMappings.sort(n.compareByGeneratedPositions),this.__originalMappings.sort(n.compareByOriginalPositions)},a.prototype._findMapping=function(e,t,r,n,o){if(e[r]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[r]);if(e[n]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[n]);return i.search(e,t,o)},a.prototype.originalPositionFor=function(e){var t={generatedLine:n.getArg(e,"line"),generatedColumn:n.getArg(e,"column")},r=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",n.compareByGeneratedPositions);if(r){var i=n.getArg(r,"source",null);return i&&this.sourceRoot&&(i=n.join(this.sourceRoot,i)),{source:i,line:n.getArg(r,"originalLine",null),column:n.getArg(r,"originalColumn",null),name:n.getArg(r,"name",null)}}return{source:null,line:null,column:null,name:null}},a.prototype.sourceContentFor=function(e){if(!this.sourcesContent)return null;if(this.sourceRoot&&(e=n.relative(this.sourceRoot,e)),this._sources.has(e))return this.sourcesContent[this._sources.indexOf(e)];var t;if(this.sourceRoot&&(t=n.urlParse(this.sourceRoot))){var r=e.replace(/^file:\/\//,"");if("file"==t.scheme&&this._sources.has(r))return this.sourcesContent[this._sources.indexOf(r)];if((!t.path||"/"==t.path)&&this._sources.has("/"+e))return this.sourcesContent[this._sources.indexOf("/"+e)]}throw new Error('"'+e+'" is not in the SourceMap.')},a.prototype.generatedPositionFor=function(e){var t={source:n.getArg(e,"source"),originalLine:n.getArg(e,"line"),originalColumn:n.getArg(e,"column")};this.sourceRoot&&(t.source=n.relative(this.sourceRoot,t.source));var r=this._findMapping(t,this._originalMappings,"originalLine","originalColumn",n.compareByOriginalPositions);return r?{line:n.getArg(r,"generatedLine",null),column:n.getArg(r,"generatedColumn",null)}:{line:null,column:null}},a.GENERATED_ORDER=1,a.ORIGINAL_ORDER=2,a.prototype.eachMapping=function(e,t,r){var i,o=t||null;switch(r||a.GENERATED_ORDER){case a.GENERATED_ORDER:i=this._generatedMappings;break;case a.ORIGINAL_ORDER:i=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var s=this.sourceRoot;i.map((function(e){var t=e.source;return t&&s&&(t=n.join(s,t)),{source:t,generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:e.name}})).forEach(e,o)},t.SourceMapConsumer=a}))},1079:(e,t,r)=>{if(e=r.nmd(e),"function"!=typeof n)var n=r(5233)(e,r(4514));n((function(e,t,r){var n=e("./base64-vlq"),i=e("./util"),o=e("./array-set").ArraySet;function s(e){this._file=i.getArg(e,"file"),this._sourceRoot=i.getArg(e,"sourceRoot",null),this._sources=new o,this._names=new o,this._mappings=[],this._sourcesContents=null}s.prototype._version=3,s.fromSourceMap=function(e){var t=e.sourceRoot,r=new s({file:e.file,sourceRoot:t});return e.eachMapping((function(e){var n={generated:{line:e.generatedLine,column:e.generatedColumn}};e.source&&(n.source=e.source,t&&(n.source=i.relative(t,n.source)),n.original={line:e.originalLine,column:e.originalColumn},e.name&&(n.name=e.name)),r.addMapping(n)})),e.sources.forEach((function(t){var n=e.sourceContentFor(t);n&&r.setSourceContent(t,n)})),r},s.prototype.addMapping=function(e){var t=i.getArg(e,"generated"),r=i.getArg(e,"original",null),n=i.getArg(e,"source",null),o=i.getArg(e,"name",null);this._validateMapping(t,r,n,o),n&&!this._sources.has(n)&&this._sources.add(n),o&&!this._names.has(o)&&this._names.add(o),this._mappings.push({generatedLine:t.line,generatedColumn:t.column,originalLine:null!=r&&r.line,originalColumn:null!=r&&r.column,source:n,name:o})},s.prototype.setSourceContent=function(e,t){var r=e;this._sourceRoot&&(r=i.relative(this._sourceRoot,r)),null!==t?(this._sourcesContents||(this._sourcesContents={}),this._sourcesContents[i.toSetString(r)]=t):(delete this._sourcesContents[i.toSetString(r)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},s.prototype.applySourceMap=function(e,t){t||(t=e.file);var r=this._sourceRoot;r&&(t=i.relative(r,t));var n=new o,s=new o;this._mappings.forEach((function(o){if(o.source===t&&o.originalLine){var a=e.originalPositionFor({line:o.originalLine,column:o.originalColumn});null!==a.source&&(o.source=r?i.relative(r,a.source):a.source,o.originalLine=a.line,o.originalColumn=a.column,null!==a.name&&null!==o.name&&(o.name=a.name))}var c=o.source;c&&!n.has(c)&&n.add(c);var l=o.name;l&&!s.has(l)&&s.add(l)}),this),this._sources=n,this._names=s,e.sources.forEach((function(t){var n=e.sourceContentFor(t);n&&(r&&(t=i.relative(r,t)),this.setSourceContent(t,n))}),this)},s.prototype._validateMapping=function(e,t,r,n){if((!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0)||t||r||n)&&!(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&r))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:r,original:t,name:n}))},s.prototype._serializeMappings=function(){var e,t=0,r=1,o=0,s=0,a=0,c=0,l="";this._mappings.sort(i.compareByGeneratedPositions);for(var u=0,d=this._mappings.length;u<d;u++){if((e=this._mappings[u]).generatedLine!==r)for(t=0;e.generatedLine!==r;)l+=";",r++;else if(u>0){if(!i.compareByGeneratedPositions(e,this._mappings[u-1]))continue;l+=","}l+=n.encode(e.generatedColumn-t),t=e.generatedColumn,e.source&&(l+=n.encode(this._sources.indexOf(e.source)-c),c=this._sources.indexOf(e.source),l+=n.encode(e.originalLine-1-s),s=e.originalLine-1,l+=n.encode(e.originalColumn-o),o=e.originalColumn,e.name&&(l+=n.encode(this._names.indexOf(e.name)-a),a=this._names.indexOf(e.name)))}return l},s.prototype._generateSourcesContent=function(e,t){return e.map((function(e){if(!this._sourcesContents)return null;t&&(e=i.relative(t,e));var r=i.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,r)?this._sourcesContents[r]:null}),this)},s.prototype.toJSON=function(){var e={version:this._version,file:this._file,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},s.prototype.toString=function(){return JSON.stringify(this)},t.SourceMapGenerator=s}))},5574:(e,t,r)=>{if(e=r.nmd(e),"function"!=typeof n)var n=r(5233)(e,r(4514));n((function(e,t,r){var n=e("./source-map-generator").SourceMapGenerator,i=e("./util");function o(e,t,r,n,i){this.children=[],this.sourceContents={},this.line=void 0===e?null:e,this.column=void 0===t?null:t,this.source=void 0===r?null:r,this.name=void 0===i?null:i,null!=n&&this.add(n)}o.fromStringWithSourceMap=function(e,t){var r=new o,n=e.split("\n"),i=1,s=0,a=null;return t.eachMapping((function(e){if(null===a){for(;i<e.generatedLine;)r.add(n.shift()+"\n"),i++;if(s<e.generatedColumn){var t=n[0];r.add(t.substr(0,e.generatedColumn)),n[0]=t.substr(e.generatedColumn),s=e.generatedColumn}}else if(i<e.generatedLine){var o="";do{o+=n.shift()+"\n",i++,s=0}while(i<e.generatedLine);if(s<e.generatedColumn)o+=(t=n[0]).substr(0,e.generatedColumn),n[0]=t.substr(e.generatedColumn),s=e.generatedColumn;c(a,o)}else{o=(t=n[0]).substr(0,e.generatedColumn-s);n[0]=t.substr(e.generatedColumn-s),s=e.generatedColumn,c(a,o)}a=e}),this),c(a,n.join("\n")),t.sources.forEach((function(e){var n=t.sourceContentFor(e);n&&r.setSourceContent(e,n)})),r;function c(e,t){null===e||void 0===e.source?r.add(t):r.add(new o(e.originalLine,e.originalColumn,e.source,t,e.name))}},o.prototype.add=function(e){if(Array.isArray(e))e.forEach((function(e){this.add(e)}),this);else{if(!(e instanceof o||"string"==typeof e))throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this},o.prototype.prepend=function(e){if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)this.prepend(e[t]);else{if(!(e instanceof o||"string"==typeof e))throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this},o.prototype.walk=function(e){for(var t,r=0,n=this.children.length;r<n;r++)(t=this.children[r])instanceof o?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},o.prototype.join=function(e){var t,r,n=this.children.length;if(n>0){for(t=[],r=0;r<n-1;r++)t.push(this.children[r]),t.push(e);t.push(this.children[r]),this.children=t}return this},o.prototype.replaceRight=function(e,t){var r=this.children[this.children.length-1];return r instanceof o?r.replaceRight(e,t):"string"==typeof r?this.children[this.children.length-1]=r.replace(e,t):this.children.push("".replace(e,t)),this},o.prototype.setSourceContent=function(e,t){this.sourceContents[i.toSetString(e)]=t},o.prototype.walkSourceContents=function(e){for(var t=0,r=this.children.length;t<r;t++)this.children[t]instanceof o&&this.children[t].walkSourceContents(e);var n=Object.keys(this.sourceContents);for(t=0,r=n.length;t<r;t++)e(i.fromSetString(n[t]),this.sourceContents[n[t]])},o.prototype.toString=function(){var e="";return this.walk((function(t){e+=t})),e},o.prototype.toStringWithSourceMap=function(e){var t={code:"",line:1,column:0},r=new n(e),i=!1,o=null,s=null,a=null,c=null;return this.walk((function(e,n){t.code+=e,null!==n.source&&null!==n.line&&null!==n.column?(o===n.source&&s===n.line&&a===n.column&&c===n.name||r.addMapping({source:n.source,original:{line:n.line,column:n.column},generated:{line:t.line,column:t.column},name:n.name}),o=n.source,s=n.line,a=n.column,c=n.name,i=!0):i&&(r.addMapping({generated:{line:t.line,column:t.column}}),o=null,i=!1),e.split("").forEach((function(e){"\n"===e?(t.line++,t.column=0):t.column++}))})),this.walkSourceContents((function(e,t){r.setSourceContent(e,t)})),{code:t.code,map:r}},t.SourceNode=o}))},4514:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=4514,e.exports=t},6252:(e,t,r)=>{var n=r(9502).SourceMapConsumer,i=r(5622),o=r(5747),s=!1,a=!1,c=!1,l="auto",u={},d={},h=/^data:application\/json[^,]+base64,/,p=[],f=[];function g(){return"browser"===l||"node"!==l&&("undefined"!=typeof window&&"function"==typeof XMLHttpRequest)}function m(e){return function(t){for(var r=0;r<e.length;r++){var n=e[r](t);if(n)return n}return null}}var _=m(p);function E(e,t){if(!e)return t;var r=i.dirname(e),n=/^\w+:\/\/[^\/]*/.exec(r),o=n?n[0]:"";return o+i.resolve(r.slice(o.length),t)}p.push((function(e){if((e=e.trim())in u)return u[e];try{if(g()){var t=new XMLHttpRequest;t.open("GET",e,!1),t.send(null);var r=null;4===t.readyState&&200===t.status&&(r=t.responseText)}else r=o.readFileSync(e,"utf8")}catch(e){r=null}return u[e]=r}));var v=m(f);function y(e){var t=d[e.source];if(!t){var r=v(e.source);r?(t=d[e.source]={url:r.url,map:new n(r.map)}).map.sourcesContent&&t.map.sources.forEach((function(e,r){var n=t.map.sourcesContent[r];if(n){var i=E(t.url,e);u[i]=n}})):t=d[e.source]={url:null,map:null}}if(t&&t.map){var i=t.map.originalPositionFor(e);if(null!==i.source)return i.source=E(t.url,i.source),i}return e}function S(e){var t=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(e);if(t){var r=y({source:t[2],line:t[3],column:t[4]-1});return"eval at "+t[1]+" ("+r.source+":"+r.line+":"+(r.column+1)+")"}return(t=/^eval at ([^(]+) \((.+)\)$/.exec(e))?"eval at "+t[1]+" ("+S(t[2])+")":e}function b(){var e,t="";if(this.isNative())t="native";else{!(e=this.getScriptNameOrSourceURL())&&this.isEval()&&(t=this.getEvalOrigin(),t+=", "),t+=e||"<anonymous>";var r=this.getLineNumber();if(null!=r){t+=":"+r;var n=this.getColumnNumber();n&&(t+=":"+n)}}var i="",o=this.getFunctionName(),s=!0,a=this.isConstructor();if(!(this.isToplevel()||a)){var c=this.getTypeName(),l=this.getMethodName();o?(c&&0!=o.indexOf(c)&&(i+=c+"."),i+=o,l&&o.indexOf("."+l)!=o.length-l.length-1&&(i+=" [as "+l+"]")):i+=c+"."+(l||"<anonymous>")}else a?i+="new "+(o||"<anonymous>"):o?i+=o:(i+=t,s=!1);return s&&(i+=" ("+t+")"),i}function T(e){var t={};return Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach((function(r){t[r]=/^(?:is|get)/.test(r)?function(){return e[r].call(e)}:e[r]})),t.toString=b,t}function P(e){var t=e.getFileName()||e.getScriptNameOrSourceURL();if(t){var r=e.getLineNumber(),n=e.getColumnNumber()-1;1!==r||g()||e.isEval()||n>63&&(n-=62);var i=y({source:t,line:r,column:n});return(e=T(e)).getFileName=function(){return i.source},e.getLineNumber=function(){return i.line},e.getColumnNumber=function(){return i.column+1},e.getScriptNameOrSourceURL=function(){return i.source},e}var o=e.isEval()&&e.getEvalOrigin();return o?(o=S(o),(e=T(e)).getEvalOrigin=function(){return o},e):e}function A(e,t){return c&&(u={},d={}),e+t.map((function(e){return"\n    at "+P(e)})).join("")}function w(e){var t=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(e.stack);if(t){var r=t[1],n=+t[2],i=+t[3],s=u[r];if(!s&&o.existsSync(r)&&(s=o.readFileSync(r,"utf8")),s){var a=s.split(/(?:\r\n|\r|\n)/)[n-1];if(a)return r+":"+n+"\n"+a+"\n"+new Array(i).join(" ")+"^"}}return null}function R(e){var t=w(e);t&&(console.error(),console.error(t)),console.error(e.stack),process.exit(1)}f.push((function(e){var t,r=function(e){var t;if(g()){var r=new XMLHttpRequest;r.open("GET",e,!1),r.send(null),t=4===r.readyState?r.responseText:null;var n=r.getResponseHeader("SourceMap")||r.getResponseHeader("X-SourceMap");if(n)return n}t=_(e);for(var i,o,s=/(?:\/\/[@#][ \t]+sourceMappingURL=([^\s'"]+?)[ \t]*$)|(?:\/\*[@#][ \t]+sourceMappingURL=([^\*]+?)[ \t]*(?:\*\/)[ \t]*$)/gm;o=s.exec(t);)i=o;return i?i[1]:null}(e);if(!r)return null;if(h.test(r)){var n=r.slice(r.indexOf(",")+1);t=new Buffer(n,"base64").toString(),r=null}else r=E(e,r),t=_(r);return t?{url:r,map:t}:null})),t.wrapCallSite=P,t.getErrorSource=w,t.mapSourcePosition=y,t.retrieveSourceMap=v,t.install=function(e){if((e=e||{}).environment&&(l=e.environment,-1===["node","browser","auto"].indexOf(l)))throw new Error("environment "+l+" was unknown. Available options are {auto, browser, node}");var t;(e.retrieveFile&&(e.overrideRetrieveFile&&(p.length=0),p.unshift(e.retrieveFile)),e.retrieveSourceMap&&(e.overrideRetrieveSourceMap&&(f.length=0),f.unshift(e.retrieveSourceMap)),c||(c="emptyCacheBetweenOperations"in e&&e.emptyCacheBetweenOperations),s||(s=!0,Error.prepareStackTrace=A),a)||(!("handleUncaughtExceptions"in e)||e.handleUncaughtExceptions)&&"object"==typeof process&&null!==process&&"function"==typeof process.on&&(a=!0,t=process.emit,process.emit=function(e){if("uncaughtException"===e){var r=arguments[1]&&arguments[1].stack,n=this.listeners(e).length>0;if(r&&!n)return R(arguments[1])}return t.apply(this,arguments)})}},6636:function(e,t,r){var n,i;void 0===(i="function"==typeof(n=function(){var e=/[#@] sourceMappingURL=([^\s'"]*)/,t=RegExp("(?:/\\*(?:\\s*\r?\n(?://)?)?(?:"+e.source+")\\s*\\*/|//(?:"+e.source+"))\\s*");return{regex:t,_innerRegex:e,getFrom:function(e){var r=e.match(t);return r?r[1]||r[2]||"":null},existsIn:function(e){return t.test(e)},removeFrom:function(e){return e.replace(t,"")},insertBefore:function(e,r){var n=e.match(t);return n?e.slice(0,n.index)+r+e.slice(n.index):e+r}}})?n.call(t,r,t,e):n)||(e.exports=i)},8213:(e,t,r)=>{{var n=r(2728);function i(){this._array=[],this._set={}}i.fromArray=function(e,t){for(var r=new i,n=0,o=e.length;n<o;n++)r.add(e[n],t);return r},i.prototype.size=function(){return Object.getOwnPropertyNames(this._set).length},i.prototype.add=function(e,t){var r=n.toSetString(e),i=this._set.hasOwnProperty(r),o=this._array.length;i&&!t||this._array.push(e),i||(this._set[r]=o)},i.prototype.has=function(e){var t=n.toSetString(e);return this._set.hasOwnProperty(t)},i.prototype.indexOf=function(e){var t=n.toSetString(e);if(this._set.hasOwnProperty(t))return this._set[t];throw new Error('"'+e+'" is not in the set.')},i.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},i.prototype.toArray=function(){return this._array.slice()},t.I=i}},6400:(e,t,r)=>{var n=r(7923);t.encode=function(e){var t,r="",i=function(e){return e<0?1+(-e<<1):0+(e<<1)}(e);do{t=31&i,(i>>>=5)>0&&(t|=32),r+=n.encode(t)}while(i>0);return r},t.decode=function(e,t,r){var i,o,s,a,c=e.length,l=0,u=0;do{if(t>=c)throw new Error("Expected more digits in base 64 VLQ value.");if(-1===(o=n.decode(e.charCodeAt(t++))))throw new Error("Invalid base64 digit: "+e.charAt(t-1));i=!!(32&o),l+=(o&=31)<<u,u+=5}while(i);r.value=(a=(s=l)>>1,1==(1&s)?-a:a),r.rest=t}},7923:(e,t)=>{var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");t.encode=function(e){if(0<=e&&e<r.length)return r[e];throw new TypeError("Must be between 0 and 63: "+e)},t.decode=function(e){return 65<=e&&e<=90?e-65:97<=e&&e<=122?e-97+26:48<=e&&e<=57?e-48+52:43==e?62:47==e?63:-1}},9216:(e,t)=>{{function r(e,n,i,o,s,a){var c=Math.floor((n-e)/2)+e,l=s(i,o[c],!0);return 0===l?c:l>0?n-c>1?r(c,n,i,o,s,a):a==t.LEAST_UPPER_BOUND?n<o.length?n:-1:c:c-e>1?r(e,c,i,o,s,a):a==t.LEAST_UPPER_BOUND?c:e<0?-1:e}t.GREATEST_LOWER_BOUND=1,t.LEAST_UPPER_BOUND=2,t.search=function(e,n,i,o){if(0===n.length)return-1;var s=r(-1,n.length,e,n,i,o||t.GREATEST_LOWER_BOUND);if(s<0)return-1;for(;s-1>=0&&0===i(n[s],n[s-1],!0);)--s;return s}}},1188:(e,t,r)=>{{var n=r(2728);function i(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}i.prototype.unsortedForEach=function(e,t){this._array.forEach(e,t)},i.prototype.add=function(e){var t,r,i,o,s,a;t=this._last,r=e,i=t.generatedLine,o=r.generatedLine,s=t.generatedColumn,a=r.generatedColumn,o>i||o==i&&a>=s||n.compareByGeneratedPositionsInflated(t,r)<=0?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))},i.prototype.toArray=function(){return this._sorted||(this._array.sort(n.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},t.H=i}},2826:(e,t)=>{{function r(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function n(e,t,i,o){if(i<o){var s=i-1;r(e,(u=i,d=o,Math.round(u+Math.random()*(d-u))),o);for(var a=e[o],c=i;c<o;c++)t(e[c],a)<=0&&r(e,s+=1,c);r(e,s+1,c);var l=s+1;n(e,t,i,l-1),n(e,t,l+1,o)}var u,d}t.U=function(e,t){n(e,t,0,e.length-1)}}},6771:(e,t,r)=>{{var n=r(2728),i=r(9216),o=r(8213).I,s=r(6400),a=r(2826).U;function c(e){var t=e;return"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,""))),null!=t.sections?new d(t):new l(t)}function l(e){var t=e;"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,"")));var r=n.getArg(t,"version"),i=n.getArg(t,"sources"),s=n.getArg(t,"names",[]),a=n.getArg(t,"sourceRoot",null),c=n.getArg(t,"sourcesContent",null),l=n.getArg(t,"mappings"),u=n.getArg(t,"file",null);if(r!=this._version)throw new Error("Unsupported version: "+r);i=i.map(n.normalize).map((function(e){return a&&n.isAbsolute(a)&&n.isAbsolute(e)?n.relative(a,e):e})),this._names=o.fromArray(s,!0),this._sources=o.fromArray(i,!0),this.sourceRoot=a,this.sourcesContent=c,this._mappings=l,this.file=u}function u(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function d(e){var t=e;"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,"")));var r=n.getArg(t,"version"),i=n.getArg(t,"sections");if(r!=this._version)throw new Error("Unsupported version: "+r);this._sources=new o,this._names=new o;var s={line:-1,column:0};this._sections=i.map((function(e){if(e.url)throw new Error("Support for url field in sections not implemented.");var t=n.getArg(e,"offset"),r=n.getArg(t,"line"),i=n.getArg(t,"column");if(r<s.line||r===s.line&&i<s.column)throw new Error("Section offsets must be ordered and non-overlapping.");return s=t,{generatedOffset:{generatedLine:r+1,generatedColumn:i+1},consumer:new c(n.getArg(e,"map"))}}))}c.fromSourceMap=function(e){return l.fromSourceMap(e)},c.prototype._version=3,c.prototype.__generatedMappings=null,Object.defineProperty(c.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),c.prototype.__originalMappings=null,Object.defineProperty(c.prototype,"_originalMappings",{get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),c.prototype._charIsMappingSeparator=function(e,t){var r=e.charAt(t);return";"===r||","===r},c.prototype._parseMappings=function(e,t){throw new Error("Subclasses must implement _parseMappings")},c.GENERATED_ORDER=1,c.ORIGINAL_ORDER=2,c.GREATEST_LOWER_BOUND=1,c.LEAST_UPPER_BOUND=2,c.prototype.eachMapping=function(e,t,r){var i,o=t||null;switch(r||c.GENERATED_ORDER){case c.GENERATED_ORDER:i=this._generatedMappings;break;case c.ORIGINAL_ORDER:i=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var s=this.sourceRoot;i.map((function(e){var t=null===e.source?null:this._sources.at(e.source);return null!=t&&null!=s&&(t=n.join(s,t)),{source:t,generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:null===e.name?null:this._names.at(e.name)}}),this).forEach(e,o)},c.prototype.allGeneratedPositionsFor=function(e){var t=n.getArg(e,"line"),r={source:n.getArg(e,"source"),originalLine:t,originalColumn:n.getArg(e,"column",0)};if(null!=this.sourceRoot&&(r.source=n.relative(this.sourceRoot,r.source)),!this._sources.has(r.source))return[];r.source=this._sources.indexOf(r.source);var o=[],s=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",n.compareByOriginalPositions,i.LEAST_UPPER_BOUND);if(s>=0){var a=this._originalMappings[s];if(void 0===e.column)for(var c=a.originalLine;a&&a.originalLine===c;)o.push({line:n.getArg(a,"generatedLine",null),column:n.getArg(a,"generatedColumn",null),lastColumn:n.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++s];else for(var l=a.originalColumn;a&&a.originalLine===t&&a.originalColumn==l;)o.push({line:n.getArg(a,"generatedLine",null),column:n.getArg(a,"generatedColumn",null),lastColumn:n.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++s]}return o},t.SourceMapConsumer=c,l.prototype=Object.create(c.prototype),l.prototype.consumer=c,l.fromSourceMap=function(e){var t=Object.create(l.prototype),r=t._names=o.fromArray(e._names.toArray(),!0),i=t._sources=o.fromArray(e._sources.toArray(),!0);t.sourceRoot=e._sourceRoot,t.sourcesContent=e._generateSourcesContent(t._sources.toArray(),t.sourceRoot),t.file=e._file;for(var s=e._mappings.toArray().slice(),c=t.__generatedMappings=[],d=t.__originalMappings=[],h=0,p=s.length;h<p;h++){var f=s[h],g=new u;g.generatedLine=f.generatedLine,g.generatedColumn=f.generatedColumn,f.source&&(g.source=i.indexOf(f.source),g.originalLine=f.originalLine,g.originalColumn=f.originalColumn,f.name&&(g.name=r.indexOf(f.name)),d.push(g)),c.push(g)}return a(t.__originalMappings,n.compareByOriginalPositions),t},l.prototype._version=3,Object.defineProperty(l.prototype,"sources",{get:function(){return this._sources.toArray().map((function(e){return null!=this.sourceRoot?n.join(this.sourceRoot,e):e}),this)}}),l.prototype._parseMappings=function(e,t){for(var r,i,o,c,l,d=1,h=0,p=0,f=0,g=0,m=0,_=e.length,E=0,v={},y={},S=[],b=[];E<_;)if(";"===e.charAt(E))d++,E++,h=0;else if(","===e.charAt(E))E++;else{for((r=new u).generatedLine=d,c=E;c<_&&!this._charIsMappingSeparator(e,c);c++);if(o=v[i=e.slice(E,c)])E+=i.length;else{for(o=[];E<c;)s.decode(e,E,y),l=y.value,E=y.rest,o.push(l);if(2===o.length)throw new Error("Found a source, but no line and column");if(3===o.length)throw new Error("Found a source and line, but no column");v[i]=o}r.generatedColumn=h+o[0],h=r.generatedColumn,o.length>1&&(r.source=g+o[1],g+=o[1],r.originalLine=p+o[2],p=r.originalLine,r.originalLine+=1,r.originalColumn=f+o[3],f=r.originalColumn,o.length>4&&(r.name=m+o[4],m+=o[4])),b.push(r),"number"==typeof r.originalLine&&S.push(r)}a(b,n.compareByGeneratedPositionsDeflated),this.__generatedMappings=b,a(S,n.compareByOriginalPositions),this.__originalMappings=S},l.prototype._findMapping=function(e,t,r,n,o,s){if(e[r]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[r]);if(e[n]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[n]);return i.search(e,t,o,s)},l.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var r=this._generatedMappings[e+1];if(t.generatedLine===r.generatedLine){t.lastGeneratedColumn=r.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},l.prototype.originalPositionFor=function(e){var t={generatedLine:n.getArg(e,"line"),generatedColumn:n.getArg(e,"column")},r=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",n.compareByGeneratedPositionsDeflated,n.getArg(e,"bias",c.GREATEST_LOWER_BOUND));if(r>=0){var i=this._generatedMappings[r];if(i.generatedLine===t.generatedLine){var o=n.getArg(i,"source",null);null!==o&&(o=this._sources.at(o),null!=this.sourceRoot&&(o=n.join(this.sourceRoot,o)));var s=n.getArg(i,"name",null);return null!==s&&(s=this._names.at(s)),{source:o,line:n.getArg(i,"originalLine",null),column:n.getArg(i,"originalColumn",null),name:s}}}return{source:null,line:null,column:null,name:null}},l.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&(this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some((function(e){return null==e})))},l.prototype.sourceContentFor=function(e,t){if(!this.sourcesContent)return null;if(null!=this.sourceRoot&&(e=n.relative(this.sourceRoot,e)),this._sources.has(e))return this.sourcesContent[this._sources.indexOf(e)];var r;if(null!=this.sourceRoot&&(r=n.urlParse(this.sourceRoot))){var i=e.replace(/^file:\/\//,"");if("file"==r.scheme&&this._sources.has(i))return this.sourcesContent[this._sources.indexOf(i)];if((!r.path||"/"==r.path)&&this._sources.has("/"+e))return this.sourcesContent[this._sources.indexOf("/"+e)]}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},l.prototype.generatedPositionFor=function(e){var t=n.getArg(e,"source");if(null!=this.sourceRoot&&(t=n.relative(this.sourceRoot,t)),!this._sources.has(t))return{line:null,column:null,lastColumn:null};var r={source:t=this._sources.indexOf(t),originalLine:n.getArg(e,"line"),originalColumn:n.getArg(e,"column")},i=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",n.compareByOriginalPositions,n.getArg(e,"bias",c.GREATEST_LOWER_BOUND));if(i>=0){var o=this._originalMappings[i];if(o.source===r.source)return{line:n.getArg(o,"generatedLine",null),column:n.getArg(o,"generatedColumn",null),lastColumn:n.getArg(o,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},l,d.prototype=Object.create(c.prototype),d.prototype.constructor=c,d.prototype._version=3,Object.defineProperty(d.prototype,"sources",{get:function(){for(var e=[],t=0;t<this._sections.length;t++)for(var r=0;r<this._sections[t].consumer.sources.length;r++)e.push(this._sections[t].consumer.sources[r]);return e}}),d.prototype.originalPositionFor=function(e){var t={generatedLine:n.getArg(e,"line"),generatedColumn:n.getArg(e,"column")},r=i.search(t,this._sections,(function(e,t){var r=e.generatedLine-t.generatedOffset.generatedLine;return r||e.generatedColumn-t.generatedOffset.generatedColumn})),o=this._sections[r];return o?o.consumer.originalPositionFor({line:t.generatedLine-(o.generatedOffset.generatedLine-1),column:t.generatedColumn-(o.generatedOffset.generatedLine===t.generatedLine?o.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},d.prototype.hasContentsOfAllSources=function(){return this._sections.every((function(e){return e.consumer.hasContentsOfAllSources()}))},d.prototype.sourceContentFor=function(e,t){for(var r=0;r<this._sections.length;r++){var n=this._sections[r].consumer.sourceContentFor(e,!0);if(n)return n}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},d.prototype.generatedPositionFor=function(e){for(var t=0;t<this._sections.length;t++){var r=this._sections[t];if(-1!==r.consumer.sources.indexOf(n.getArg(e,"source"))){var i=r.consumer.generatedPositionFor(e);if(i)return{line:i.line+(r.generatedOffset.generatedLine-1),column:i.column+(r.generatedOffset.generatedLine===i.line?r.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}},d.prototype._parseMappings=function(e,t){this.__generatedMappings=[],this.__originalMappings=[];for(var r=0;r<this._sections.length;r++)for(var i=this._sections[r],o=i.consumer._generatedMappings,s=0;s<o.length;s++){var c=o[s],l=i.consumer._sources.at(c.source);null!==i.consumer.sourceRoot&&(l=n.join(i.consumer.sourceRoot,l)),this._sources.add(l),l=this._sources.indexOf(l);var u=i.consumer._names.at(c.name);this._names.add(u),u=this._names.indexOf(u);var d={source:l,generatedLine:c.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:c.generatedColumn+(i.generatedOffset.generatedLine===c.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:c.originalLine,originalColumn:c.originalColumn,name:u};this.__generatedMappings.push(d),"number"==typeof d.originalLine&&this.__originalMappings.push(d)}a(this.__generatedMappings,n.compareByGeneratedPositionsDeflated),a(this.__originalMappings,n.compareByOriginalPositions)},d}},4433:(e,t,r)=>{{var n=r(6400),i=r(2728),o=r(8213).I,s=r(1188).H;function a(e){e||(e={}),this._file=i.getArg(e,"file",null),this._sourceRoot=i.getArg(e,"sourceRoot",null),this._skipValidation=i.getArg(e,"skipValidation",!1),this._sources=new o,this._names=new o,this._mappings=new s,this._sourcesContents=null}a.prototype._version=3,a.fromSourceMap=function(e){var t=e.sourceRoot,r=new a({file:e.file,sourceRoot:t});return e.eachMapping((function(e){var n={generated:{line:e.generatedLine,column:e.generatedColumn}};null!=e.source&&(n.source=e.source,null!=t&&(n.source=i.relative(t,n.source)),n.original={line:e.originalLine,column:e.originalColumn},null!=e.name&&(n.name=e.name)),r.addMapping(n)})),e.sources.forEach((function(t){var n=e.sourceContentFor(t);null!=n&&r.setSourceContent(t,n)})),r},a.prototype.addMapping=function(e){var t=i.getArg(e,"generated"),r=i.getArg(e,"original",null),n=i.getArg(e,"source",null),o=i.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,r,n,o),null==n||this._sources.has(n)||this._sources.add(n),null==o||this._names.has(o)||this._names.add(o),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:null!=r&&r.line,originalColumn:null!=r&&r.column,source:n,name:o})},a.prototype.setSourceContent=function(e,t){var r=e;null!=this._sourceRoot&&(r=i.relative(this._sourceRoot,r)),null!=t?(this._sourcesContents||(this._sourcesContents={}),this._sourcesContents[i.toSetString(r)]=t):this._sourcesContents&&(delete this._sourcesContents[i.toSetString(r)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},a.prototype.applySourceMap=function(e,t,r){var n=t;if(null==t){if(null==e.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');n=e.file}var s=this._sourceRoot;null!=s&&(n=i.relative(s,n));var a=new o,c=new o;this._mappings.unsortedForEach((function(t){if(t.source===n&&null!=t.originalLine){var o=e.originalPositionFor({line:t.originalLine,column:t.originalColumn});null!=o.source&&(t.source=o.source,null!=r&&(t.source=i.join(r,t.source)),null!=s&&(t.source=i.relative(s,t.source)),t.originalLine=o.line,t.originalColumn=o.column,null!=o.name&&(t.name=o.name))}var l=t.source;null==l||a.has(l)||a.add(l);var u=t.name;null==u||c.has(u)||c.add(u)}),this),this._sources=a,this._names=c,e.sources.forEach((function(t){var n=e.sourceContentFor(t);null!=n&&(null!=r&&(t=i.join(r,t)),null!=s&&(t=i.relative(s,t)),this.setSourceContent(t,n))}),this)},a.prototype._validateMapping=function(e,t,r,n){if((!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0)||t||r||n)&&!(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&r))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:r,original:t,name:n}))},a.prototype._serializeMappings=function(){for(var e,t,r,o=0,s=1,a=0,c=0,l=0,u=0,d="",h=this._mappings.toArray(),p=0,f=h.length;p<f;p++){if((e=h[p]).generatedLine!==s)for(o=0;e.generatedLine!==s;)d+=";",s++;else if(p>0){if(!i.compareByGeneratedPositionsInflated(e,h[p-1]))continue;d+=","}d+=n.encode(e.generatedColumn-o),o=e.generatedColumn,null!=e.source&&(r=this._sources.indexOf(e.source),d+=n.encode(r-u),u=r,d+=n.encode(e.originalLine-1-c),c=e.originalLine-1,d+=n.encode(e.originalColumn-a),a=e.originalColumn,null!=e.name&&(t=this._names.indexOf(e.name),d+=n.encode(t-l),l=t))}return d},a.prototype._generateSourcesContent=function(e,t){return e.map((function(e){if(!this._sourcesContents)return null;null!=t&&(e=i.relative(t,e));var r=i.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,r)?this._sourcesContents[r]:null}),this)},a.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(e.file=this._file),null!=this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},a.prototype.toString=function(){return JSON.stringify(this.toJSON())},t.SourceMapGenerator=a}},7085:(e,t,r)=>{{var n=r(4433).SourceMapGenerator,i=r(2728),o=/(\r?\n)/,s="$$$isSourceNode$$$";function a(e,t,r,n,i){this.children=[],this.sourceContents={},this.line=null==e?null:e,this.column=null==t?null:t,this.source=null==r?null:r,this.name=null==i?null:i,this[s]=!0,null!=n&&this.add(n)}a.fromStringWithSourceMap=function(e,t,r){var n=new a,s=e.split(o),c=function(){return s.shift()+(s.shift()||"")},l=1,u=0,d=null;return t.eachMapping((function(e){if(null!==d){if(!(l<e.generatedLine)){var t=(r=s[0]).substr(0,e.generatedColumn-u);return s[0]=r.substr(e.generatedColumn-u),u=e.generatedColumn,h(d,t),void(d=e)}h(d,c()),l++,u=0}for(;l<e.generatedLine;)n.add(c()),l++;if(u<e.generatedColumn){var r=s[0];n.add(r.substr(0,e.generatedColumn)),s[0]=r.substr(e.generatedColumn),u=e.generatedColumn}d=e}),this),s.length>0&&(d&&h(d,c()),n.add(s.join(""))),t.sources.forEach((function(e){var o=t.sourceContentFor(e);null!=o&&(null!=r&&(e=i.join(r,e)),n.setSourceContent(e,o))})),n;function h(e,t){if(null===e||void 0===e.source)n.add(t);else{var o=r?i.join(r,e.source):e.source;n.add(new a(e.originalLine,e.originalColumn,o,t,e.name))}}},a.prototype.add=function(e){if(Array.isArray(e))e.forEach((function(e){this.add(e)}),this);else{if(!e[s]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this},a.prototype.prepend=function(e){if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)this.prepend(e[t]);else{if(!e[s]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this},a.prototype.walk=function(e){for(var t,r=0,n=this.children.length;r<n;r++)(t=this.children[r])[s]?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},a.prototype.join=function(e){var t,r,n=this.children.length;if(n>0){for(t=[],r=0;r<n-1;r++)t.push(this.children[r]),t.push(e);t.push(this.children[r]),this.children=t}return this},a.prototype.replaceRight=function(e,t){var r=this.children[this.children.length-1];return r[s]?r.replaceRight(e,t):"string"==typeof r?this.children[this.children.length-1]=r.replace(e,t):this.children.push("".replace(e,t)),this},a.prototype.setSourceContent=function(e,t){this.sourceContents[i.toSetString(e)]=t},a.prototype.walkSourceContents=function(e){for(var t=0,r=this.children.length;t<r;t++)this.children[t][s]&&this.children[t].walkSourceContents(e);var n=Object.keys(this.sourceContents);for(t=0,r=n.length;t<r;t++)e(i.fromSetString(n[t]),this.sourceContents[n[t]])},a.prototype.toString=function(){var e="";return this.walk((function(t){e+=t})),e},a.prototype.toStringWithSourceMap=function(e){var t={code:"",line:1,column:0},r=new n(e),i=!1,o=null,s=null,a=null,c=null;return this.walk((function(e,n){t.code+=e,null!==n.source&&null!==n.line&&null!==n.column?(o===n.source&&s===n.line&&a===n.column&&c===n.name||r.addMapping({source:n.source,original:{line:n.line,column:n.column},generated:{line:t.line,column:t.column},name:n.name}),o=n.source,s=n.line,a=n.column,c=n.name,i=!0):i&&(r.addMapping({generated:{line:t.line,column:t.column}}),o=null,i=!1);for(var l=0,u=e.length;l<u;l++)10===e.charCodeAt(l)?(t.line++,t.column=0,l+1===u?(o=null,i=!1):i&&r.addMapping({source:n.source,original:{line:n.line,column:n.column},generated:{line:t.line,column:t.column},name:n.name})):t.column++})),this.walkSourceContents((function(e,t){r.setSourceContent(e,t)})),{code:t.code,map:r}},t.SourceNode=a}},2728:(e,t)=>{{t.getArg=function(e,t,r){if(t in e)return e[t];if(3===arguments.length)return r;throw new Error('"'+t+'" is a required argument.')};var r=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/,n=/^data:.+\,.+$/;function i(e){var t=e.match(r);return t?{scheme:t[1],auth:t[2],host:t[3],port:t[4],path:t[5]}:null}function o(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}function s(e){var r=e,n=i(e);if(n){if(!n.path)return e;r=n.path}for(var s,a=t.isAbsolute(r),c=r.split(/\/+/),l=0,u=c.length-1;u>=0;u--)"."===(s=c[u])?c.splice(u,1):".."===s?l++:l>0&&(""===s?(c.splice(u+1,l),l=0):(c.splice(u,2),l--));return""===(r=c.join("/"))&&(r=a?"/":"."),n?(n.path=r,o(n)):r}function a(e,t){return e===t?0:e>t?1:-1}t.urlParse=i,t.urlGenerate=o,t.normalize=s,t.join=function(e,t){""===e&&(e="."),""===t&&(t=".");var r=i(t),a=i(e);if(a&&(e=a.path||"/"),r&&!r.scheme)return a&&(r.scheme=a.scheme),o(r);if(r||t.match(n))return t;if(a&&!a.host&&!a.path)return a.host=t,o(a);var c="/"===t.charAt(0)?t:s(e.replace(/\/+$/,"")+"/"+t);return a?(a.path=c,o(a)):c},t.isAbsolute=function(e){return"/"===e.charAt(0)||!!e.match(r)},t.relative=function(e,t){""===e&&(e="."),e=e.replace(/\/$/,"");for(var r=0;0!==t.indexOf(e+"/");){var n=e.lastIndexOf("/");if(n<0)return t;if((e=e.slice(0,n)).match(/^([^\/]+:\/)?\/*$/))return t;++r}return Array(r+1).join("../")+t.substr(e.length+1)},t.toSetString=function(e){return"$"+e},t.fromSetString=function(e){return e.substr(1)},t.compareByOriginalPositions=function(e,t,r){var n=e.source-t.source;return 0!==n||0!==(n=e.originalLine-t.originalLine)||0!==(n=e.originalColumn-t.originalColumn)||r||0!==(n=e.generatedColumn-t.generatedColumn)||0!==(n=e.generatedLine-t.generatedLine)?n:e.name-t.name},t.compareByGeneratedPositionsDeflated=function(e,t,r){var n=e.generatedLine-t.generatedLine;return 0!==n||0!==(n=e.generatedColumn-t.generatedColumn)||r||0!==(n=e.source-t.source)||0!==(n=e.originalLine-t.originalLine)||0!==(n=e.originalColumn-t.originalColumn)?n:e.name-t.name},t.compareByGeneratedPositionsInflated=function(e,t){var r=e.generatedLine-t.generatedLine;return 0!==r||0!==(r=e.generatedColumn-t.generatedColumn)||0!==(r=a(e.source,t.source))||0!==(r=e.originalLine-t.originalLine)||0!==(r=e.originalColumn-t.originalColumn)?r:a(e.name,t.name)}}},9125:(e,t,r)=>{t.SourceMapGenerator=r(4433).SourceMapGenerator,t.SourceMapConsumer=r(6771).SourceMapConsumer,t.SourceNode=r(7085).SourceNode},1409:e=>{"use strict";function t(){return""}function r(e,t,r){return e.slice(t,r).replace(/\S/g," ")}e.exports=function(e,n){for(var i,o,s=!1,a=!1,c=0,l="",u=!1===(n=n||{}).whitespace?t:r,d=0;d<e.length;d++){if(i=e[d],o=e[d+1],!a&&'"'===i)"\\"===e[d-1]&&"\\"!==e[d-2]||(s=!s);if(!s)if(a||i+o!=="//"){if(1===a&&i+o==="\r\n"){a=!1,l+=u(e,c,++d),c=d;continue}if(1===a&&"\n"===i)a=!1,l+=u(e,c,d),c=d;else{if(!a&&i+o==="/*"){l+=e.slice(c,d),c=d,a=2,d++;continue}if(2===a&&i+o==="*/"){a=!1,l+=u(e,c,++d+1),c=d+1;continue}}}else l+=e.slice(c,d),c=d,a=1,d++}return l+(a?u(e.substr(c)):e.substr(c))}},7504:(e,t,r)=>{"use strict";const{promisify:n}=r(1669),i=r(6276);e.exports.fileSync=i.fileSync;const o=n(((e,t)=>i.file(e,((e,r,i,o)=>e?t(e):t(void 0,{path:r,fd:i,cleanup:n(o)})))));e.exports.file=async e=>o(e),e.exports.withFile=async function(t,r){const{path:n,fd:i,cleanup:o}=await e.exports.file(r);try{return await t({path:n,fd:i})}finally{await o()}},e.exports.dirSync=i.dirSync;const s=n(((e,t)=>i.dir(e,((e,r,i)=>e?t(e):t(void 0,{path:r,cleanup:n(i)})))));e.exports.dir=async e=>s(e),e.exports.withDir=async function(t,r){const{path:n,cleanup:i}=await e.exports.dir(r);try{return await t({path:n})}finally{await i()}},e.exports.tmpNameSync=i.tmpNameSync,e.exports.tmpName=n(i.tmpName),e.exports.tmpdir=i.tmpdir,e.exports.setGracefulCleanup=i.setGracefulCleanup},6276:(e,t,r)=>{
/*!
 * Tmp
 *
 * Copyright (c) 2011-2017 KARASZI Istvan <github@spam.raszi.hu>
 *
 * MIT Licensed
 */
const n=r(5747),i=r(2087),o=r(5622),s=r(6417),a={fs:n.constants,os:i.constants},c=r(984),l="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",u=/XXXXXX/,d=(a.O_CREAT||a.fs.O_CREAT)|(a.O_EXCL||a.fs.O_EXCL)|(a.O_RDWR||a.fs.O_RDWR),h="win32"===i.platform(),p=a.EBADF||a.os.errno.EBADF,f=a.ENOENT||a.os.errno.ENOENT,g=[],m=n.rmdirSync.bind(n),_=c.sync;let E=!1;function v(e,t){const r=I(e,t),i=r[0],o=r[1];try{N(i)}catch(e){return o(e)}let s=i.tries;!function e(){try{const t=O(i);n.stat(t,(function(r){if(!r)return s-- >0?e():o(new Error("Could not get a unique tmp filename, max tries reached "+t));o(null,t)}))}catch(e){o(e)}}()}function y(e){const t=I(e)[0];N(t);let r=t.tries;do{const e=O(t);try{n.statSync(e)}catch(t){return e}}while(r-- >0);throw new Error("Could not get a unique tmp filename, max tries reached")}function S(e,t){const r=function(e){if(e&&!L(e))return t(e);t()};0<=e[0]?n.close(e[0],(function(){n.unlink(e[1],r)})):n.unlink(e[1],r)}function b(e){let t=null;try{0<=e[0]&&n.closeSync(e[0])}catch(e){if(!(r=e,x(r,-p,"EBADF")||L(e)))throw e}finally{try{n.unlinkSync(e[1])}catch(e){L(e)||(t=e)}}var r;if(null!==t)throw t}function T(e,t,r,n){const i=A(b,[t,e],n),o=A(S,[t,e],n,i);return r.keep||g.unshift(i),n?i:o}function P(e,t,r){const i=t.unsafeCleanup?c:n.rmdir.bind(n),o=A(t.unsafeCleanup?_:m,e,r),s=A(i,e,r,o);return t.keep||g.unshift(o),r?o:s}function A(e,t,r,n){let i=!1;return function o(s){if(!i){const a=n||o,c=g.indexOf(a);return c>=0&&g.splice(c,1),i=!0,r||e===m||e===_?e(t):e(t,s||function(){})}}}function w(e){let t=[],r=null;try{r=s.randomBytes(e)}catch(t){r=s.pseudoRandomBytes(e)}for(var n=0;n<e;n++)t.push(l[r[n]%l.length]);return t.join("")}function R(e){return null===e||C(e)||!e.trim()}function C(e){return void 0===e}function I(e,t){if("function"==typeof e)return[{},e];if(C(e))return[{},t];const r={};for(const t of Object.getOwnPropertyNames(e))r[t]=e[t];return[r,t]}function O(e){const t=e.tmpdir;if(!C(e.name))return o.join(t,e.dir,e.name);if(!C(e.template))return o.join(t,e.dir,e.template).replace(u,w(6));const r=[e.prefix?e.prefix:"tmp","-",process.pid,"-",w(12),e.postfix?"-"+e.postfix:""].join("");return o.join(t,e.dir,r)}function N(e){e.tmpdir=F(e);const t=e.tmpdir;if(C(e.name)||D(e.name,"name",t),C(e.dir)||D(e.dir,"dir",t),!C(e.template)&&(D(e.template,"template",t),!e.template.match(u)))throw new Error(`Invalid template, found "${e.template}".`);if(!C(e.tries)&&isNaN(e.tries)||e.tries<0)throw new Error(`Invalid tries, found "${e.tries}".`);e.tries=C(e.name)?e.tries||3:1,e.keep=!!e.keep,e.detachDescriptor=!!e.detachDescriptor,e.discardDescriptor=!!e.discardDescriptor,e.unsafeCleanup=!!e.unsafeCleanup,e.dir=C(e.dir)?"":o.relative(t,M(e.dir,t)),e.template=C(e.template)?void 0:o.relative(t,M(e.template,t)),e.template=R(e.template)?void 0:o.relative(e.dir,e.template),e.name=C(e.name)?void 0:k(e.name),e.prefix=C(e.prefix)?"":e.prefix,e.postfix=C(e.postfix)?"":e.postfix}function M(e,t){const r=k(e);return r.startsWith(t)?o.resolve(r):o.resolve(o.join(t,r))}function k(e){return R(e)?e:e.replace(/["']/g,"")}function D(e,t,r){if("name"===t){if(o.isAbsolute(e))throw new Error(`${t} option must not contain an absolute path, found "${e}".`);let r=o.basename(e);if(".."===r||"."===r||r!==e)throw new Error(`${t} option must not contain a path, found "${e}".`)}else{if(o.isAbsolute(e)&&!e.startsWith(r))throw new Error(`${t} option must be relative to "${r}", found "${e}".`);let n=M(e,r);if(!n.startsWith(r))throw new Error(`${t} option must be relative to "${r}", found "${n}".`)}}function L(e){return x(e,-f,"ENOENT")}function x(e,t,r){return h?e.code===r:e.code===r&&e.errno===t}function F(e){return o.resolve(k(e&&e.tmpdir||i.tmpdir()))}process.addListener("exit",(function(){if(E)for(;g.length;)try{g[0]()}catch(e){}})),Object.defineProperty(e.exports,"tmpdir",{enumerable:!0,configurable:!1,get:function(){return F()}}),e.exports.dir=function(e,t){const r=I(e,t),i=r[0],o=r[1];v(i,(function(e,t){if(e)return o(e);n.mkdir(t,i.mode||448,(function(e){if(e)return o(e);o(null,t,P(t,i,!1))}))}))},e.exports.dirSync=function(e){const t=I(e)[0],r=y(t);return n.mkdirSync(r,t.mode||448),{name:r,removeCallback:P(r,t,!0)}},e.exports.file=function(e,t){const r=I(e,t),i=r[0],o=r[1];v(i,(function(e,t){if(e)return o(e);n.open(t,d,i.mode||384,(function(e,r){if(e)return o(e);if(i.discardDescriptor)return n.close(r,(function(e){return o(e,t,void 0,T(t,-1,i,!1))}));{const e=i.discardDescriptor||i.detachDescriptor;o(null,t,r,T(t,e?-1:r,i,!1))}}))}))},e.exports.fileSync=function(e){const t=I(e)[0],r=t.discardDescriptor||t.detachDescriptor,i=y(t);var o=n.openSync(i,d,t.mode||384);return t.discardDescriptor&&(n.closeSync(o),o=void 0),{name:i,fd:o,removeCallback:T(i,r?-1:o,t,!0)}},e.exports.tmpName=v,e.exports.tmpNameSync=y,e.exports.setGracefulCleanup=function(){E=!0}},5054:(e,t,r)=>{var n=r(4501).strict;e.exports=function(e){if(n(e)){var t=Buffer.from(e.buffer);return e.byteLength!==e.buffer.byteLength&&(t=t.slice(e.byteOffset,e.byteOffset+e.byteLength)),t}return Buffer.from(e)}},6277:(e,t,r)=>{"use strict";const n=r(511);e.exports=()=>n(32)},8146:(e,t,r)=>{var n=r(5622);e.exports=function(e){return"\\"===n.sep?e.replace(/\\/g,"/").replace(/^[a-z]:\/?/i,"/"):e}},2277:(e,t,r)=>{"use strict";r.r(t),r.d(t,{NIL:()=>b,parse:()=>_,stringify:()=>d,v1:()=>m,v3:()=>v,v4:()=>y,v5:()=>S,validate:()=>l,version:()=>T});var n=r(6417),i=r.n(n);const o=new Uint8Array(256);let s=o.length;function a(){return s>o.length-16&&(i().randomFillSync(o),s=0),o.slice(s,s+=16)}const c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const l=function(e){return"string"==typeof e&&c.test(e)},u=[];for(let e=0;e<256;++e)u.push((e+256).toString(16).substr(1));const d=function(e,t=0){const r=(u[e[t+0]]+u[e[t+1]]+u[e[t+2]]+u[e[t+3]]+"-"+u[e[t+4]]+u[e[t+5]]+"-"+u[e[t+6]]+u[e[t+7]]+"-"+u[e[t+8]]+u[e[t+9]]+"-"+u[e[t+10]]+u[e[t+11]]+u[e[t+12]]+u[e[t+13]]+u[e[t+14]]+u[e[t+15]]).toLowerCase();if(!l(r))throw TypeError("Stringified UUID is invalid");return r};let h,p,f=0,g=0;const m=function(e,t,r){let n=t&&r||0;const i=t||new Array(16);let o=(e=e||{}).node||h,s=void 0!==e.clockseq?e.clockseq:p;if(null==o||null==s){const t=e.random||(e.rng||a)();null==o&&(o=h=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==s&&(s=p=16383&(t[6]<<8|t[7]))}let c=void 0!==e.msecs?e.msecs:Date.now(),l=void 0!==e.nsecs?e.nsecs:g+1;const u=c-f+(l-g)/1e4;if(u<0&&void 0===e.clockseq&&(s=s+1&16383),(u<0||c>f)&&void 0===e.nsecs&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");f=c,g=l,p=s,c+=122192928e5;const m=(1e4*(268435455&c)+l)%4294967296;i[n++]=m>>>24&255,i[n++]=m>>>16&255,i[n++]=m>>>8&255,i[n++]=255&m;const _=c/4294967296*1e4&268435455;i[n++]=_>>>8&255,i[n++]=255&_,i[n++]=_>>>24&15|16,i[n++]=_>>>16&255,i[n++]=s>>>8|128,i[n++]=255&s;for(let e=0;e<6;++e)i[n+e]=o[e];return t||d(i)};const _=function(e){if(!l(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};function E(e,t,r){function n(e,n,i,o){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=_(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let s=new Uint8Array(16+e.length);if(s.set(n),s.set(e,n.length),s=r(s),s[6]=15&s[6]|t,s[8]=63&s[8]|128,i){o=o||0;for(let e=0;e<16;++e)i[o+e]=s[e];return i}return d(s)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}const v=E("v3",48,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),i().createHash("md5").update(e).digest()}));const y=function(e,t,r){const n=(e=e||{}).random||(e.rng||a)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return d(n)};const S=E("v5",80,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),i().createHash("sha1").update(e).digest()})),b="00000000-0000-0000-0000-000000000000";const T=function(e){if(!l(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},3949:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends Error{constructor(e){super(e.error.message),this.cause=e}}t.CdpError=r},3706:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(8614),o=r(3949),s=r(6117);t.Connection=class{constructor(e){this.transport=e,this.api=new Proxy({},{get:(e,t)=>{var r;return e[t]=null!=(r=e[t])?r:this.createDomain(t)}}),this.lastId=0,this.callbacks=new Map,this.innerEmitter=new i.EventEmitter,this.commandEmitter=new s.EventEmitter,this.replyEmitter=new s.EventEmitter,this.onError=this.transport.onError,this.onEnd=this.transport.onEnd,this.onCommand=this.commandEmitter.addListener,this.onReply=this.replyEmitter.addListener,e.onMessage((e=>this.processResponse(e)))}pause(){this.pauseQueue=this.pauseQueue||[]}unpause(){if(console.log("process",this.pauseQueue),!this.pauseQueue)return;const e=this.pauseQueue;this.pauseQueue=void 0;for(const t of e)this.processResponse(t)}getId(){return this.lastId++}send(e){this.transport.send(e)}call(e,t){const r=this.lastId++,n={id:r,method:e,params:t};return this.transport.send(n),new Promise(((e,t)=>{this.callbacks.set(r,{resolve:e,reject:t})}))}close(){return n(this,void 0,void 0,(function*(){yield this.transport.close();for(const{reject:e}of this.callbacks.values())e(new s.TaskCancelledError("CDP connection closed"));this.callbacks.clear()}))}createDomain(e){return new Proxy({},{get:(t,r)=>"on"===r?(t,r)=>{const n=`${e}.${t}`;return this.innerEmitter.on(n,r),()=>this.innerEmitter.off(n,r)}:t=>this.call(`${e}.${r}`,t)})}processResponse(e){if(this.pauseQueue&&this.pauseQueue.push(e),void 0===e.id){const t=e;return this.commandEmitter.emit(t),void this.innerEmitter.emit(t.method,t.params)}this.replyEmitter.emit(e);const t=this.callbacks.get(e.id);t&&(this.callbacks.delete(e.id),"error"in e?t.reject(new o.CdpError(e)):"result"in e&&t.resolve(e.result))}}},8973:(e,t,r)=>{"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(4156)),n(r(3706)),n(r(3949)),n(r(7510))},4156:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(8777),o=r(6117),s=r(3706),a=r(7510),c=r(8605);class l{constructor(e,t){this.wss=e,this.httpServer=t,this.connectionEmitter=new o.EventEmitter,this.onConnection=this.connectionEmitter.addListener,this.address=this.httpServer.address(),e.on("connection",((e,t)=>{this.connectionEmitter.emit([new s.Connection(new a.WebSocketTransport(e)),t])}))}static create(e={}){return n(this,void 0,void 0,(function*(){const{host:t="127.0.0.1",port:r=0}=e,n=c.createServer(((e,i)=>{const o=r||n.address().port;i.write(JSON.stringify({webSocketDebuggerUrl:`ws://${t}:${o}/ws`})),i.end()})),o=new i.Server({server:n});return n.listen(r),new l(o,n)}))}dispose(){this.wss.close(),this.httpServer.close()}}t.Server=l},7510:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(8777),o=r(6117);class s extends Error{constructor(e){super(e.message),this.cause=e}}t.WebSocketError=s;class a{constructor(e){this.endEmitter=new o.EventEmitter,this.messageEmitter=new o.EventEmitter,this.errorEmitter=new o.EventEmitter,this.onMessage=this.messageEmitter.addListener,this.onError=this.errorEmitter.addListener,this.onEnd=this.endEmitter.addListener,this.ws=e,this.ws.addEventListener("message",(e=>{this.messageEmitter.emit(JSON.parse(e.data))})),this.ws.addEventListener("close",(()=>{this.endEmitter.emit()})),this.ws.addEventListener("error",(e=>{this.errorEmitter.emit(new s(e))}))}static create(e,t=o.CancellationToken.None){return n(this,void 0,void 0,(function*(){const r=new i(e,[],{perMessageDeflate:!1,maxPayload:268435456});return yield new Promise(((e,n)=>{const i=t.onCancellationRequested((()=>{r.close(),n(new o.TaskCancelledError)}));r.addEventListener("open",(()=>{e(new a(r)),i.dispose()})),r.addEventListener("error",(()=>{n(),i.dispose()}))}))}))}send(e){var t;null===(t=this.ws)||void 0===t||t.send(JSON.stringify(e))}close(){return n(this,void 0,void 0,(function*(){if(!this.ws)return;let e;const t=new Promise((t=>e=t));return this.ws.addEventListener("close",(()=>e())),this.ws.close(),this.ws=void 0,t}))}}t.WebSocketTransport=a},9703:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(7862),i=r(5812),o=r(1631),s=r(8835);t.Source=class{constructor(e,t,r=0,n,i){this.name=e,this.path=t,this.sourceReference=r,n&&(this.origin=n),i&&(this.adapterData=i)}};t.Scope=class{constructor(e,t,r=!1){this.name=e,this.variablesReference=t,this.expensive=r}};t.StackFrame=class{constructor(e,t,r,n=0,i=0){this.id=e,this.source=r,this.line=n,this.column=i,this.name=t}};t.Thread=class{constructor(e,t){this.id=e,this.name=t||"Thread #"+e}};t.Variable=class{constructor(e,t,r=0,n,i){this.name=e,this.value=t,this.variablesReference=r,"number"==typeof i&&(this.namedVariables=i),"number"==typeof n&&(this.indexedVariables=n)}};t.Breakpoint=class{constructor(e,t,r,n){this.verified=e;const i=this;"number"==typeof t&&(i.line=t),"number"==typeof r&&(i.column=r),n&&(i.source=n)}};t.Module=class{constructor(e,t){this.id=e,this.name=t}};t.CompletionItem=class{constructor(e,t,r=0){this.label=e,this.start=t,this.length=r}};class a extends i.Event{constructor(e,t,r){super("stopped"),this.body={reason:e},"number"==typeof t&&(this.body.threadId=t),"string"==typeof r&&(this.body.text=r)}}t.StoppedEvent=a;class c extends i.Event{constructor(e,t){super("continued"),this.body={threadId:e},"boolean"==typeof t&&(this.body.allThreadsContinued=t)}}t.ContinuedEvent=c;class l extends i.Event{constructor(){super("initialized")}}t.InitializedEvent=l;class u extends i.Event{constructor(e){if(super("terminated"),"boolean"==typeof e||e){this.body={restart:e}}}}t.TerminatedEvent=u;class d extends i.Event{constructor(e,t="console",r){super("output"),this.body={category:t,output:e},void 0!==r&&(this.body.data=r)}}t.OutputEvent=d;class h extends i.Event{constructor(e,t){super("thread"),this.body={reason:e,threadId:t}}}t.ThreadEvent=h;class p extends i.Event{constructor(e,t){super("breakpoint"),this.body={reason:e,breakpoint:t}}}t.BreakpointEvent=p;class f extends i.Event{constructor(e,t){super("module"),this.body={reason:e,module:t}}}t.ModuleEvent=f;class g extends i.Event{constructor(e,t){super("loadedSource"),this.body={reason:e,source:t}}}t.LoadedSourceEvent=g;class m extends i.Event{constructor(e){super("capabilities"),this.body={capabilities:e}}}var _;t.CapabilitiesEvent=m,function(e){e[e.User=1]="User",e[e.Telemetry=2]="Telemetry"}(_=t.ErrorDestination||(t.ErrorDestination={}));class E extends n.ProtocolServer{constructor(e,t){super();const r="boolean"==typeof e&&e;this._debuggerLinesStartAt1=r,this._debuggerColumnsStartAt1=r,this._debuggerPathsAreURIs=!1,this._clientLinesStartAt1=!0,this._clientColumnsStartAt1=!0,this._clientPathsAreURIs=!1,this._isServer="boolean"==typeof t&&t,this.on("close",(()=>{this.shutdown()})),this.on("error",(e=>{this.shutdown()}))}setDebuggerPathFormat(e){this._debuggerPathsAreURIs="path"!==e}setDebuggerLinesStartAt1(e){this._debuggerLinesStartAt1=e}setDebuggerColumnsStartAt1(e){this._debuggerColumnsStartAt1=e}setRunAsServer(e){this._isServer=e}static run(e){let t=0;if(process.argv.slice(2).forEach((function(e,r,n){const i=/^--server=(\d{4,5})$/.exec(e);i&&(t=parseInt(i[1],10))})),t>0)console.error(`waiting for debug protocol on port ${t}`),o.createServer((t=>{console.error(">> accepted connection from client"),t.on("end",(()=>{console.error(">> client connection closed\n")}));const r=new e(!1,!0);r.setRunAsServer(!0),r.start(t,t)})).listen(t);else{const t=new e(!1);process.on("SIGTERM",(()=>{t.shutdown()})),t.start(process.stdin,process.stdout)}}shutdown(){this._isServer||this._isRunningInline()||setTimeout((()=>{process.exit(0)}),100)}sendErrorResponse(e,t,r,n,i=_.User){let o;"number"==typeof t?(o={id:t,format:r},n&&(o.variables=n),i&_.User&&(o.showUser=!0),i&_.Telemetry&&(o.sendTelemetry=!0)):o=t,e.success=!1,e.message=E.formatPII(o.format,!0,o.variables),e.body||(e.body={}),e.body.error=o,this.sendResponse(e)}runInTerminalRequest(e,t,r){this.sendRequest("runInTerminal",e,t,r)}dispatchRequest(e){const t=new i.Response(e);try{if("initialize"===e.command){var r=e.arguments;if("boolean"==typeof r.linesStartAt1&&(this._clientLinesStartAt1=r.linesStartAt1),"boolean"==typeof r.columnsStartAt1&&(this._clientColumnsStartAt1=r.columnsStartAt1),"path"!==r.pathFormat)this.sendErrorResponse(t,2018,"debug adapter only supports native paths",null,_.Telemetry);else{const e=t;e.body={},this.initializeRequest(e,r)}}else"launch"===e.command?this.launchRequest(t,e.arguments,e):"attach"===e.command?this.attachRequest(t,e.arguments,e):"disconnect"===e.command?this.disconnectRequest(t,e.arguments,e):"terminate"===e.command?this.terminateRequest(t,e.arguments,e):"restart"===e.command?this.restartRequest(t,e.arguments,e):"setBreakpoints"===e.command?this.setBreakPointsRequest(t,e.arguments,e):"setFunctionBreakpoints"===e.command?this.setFunctionBreakPointsRequest(t,e.arguments,e):"setExceptionBreakpoints"===e.command?this.setExceptionBreakPointsRequest(t,e.arguments,e):"configurationDone"===e.command?this.configurationDoneRequest(t,e.arguments,e):"continue"===e.command?this.continueRequest(t,e.arguments,e):"next"===e.command?this.nextRequest(t,e.arguments,e):"stepIn"===e.command?this.stepInRequest(t,e.arguments,e):"stepOut"===e.command?this.stepOutRequest(t,e.arguments,e):"stepBack"===e.command?this.stepBackRequest(t,e.arguments,e):"reverseContinue"===e.command?this.reverseContinueRequest(t,e.arguments,e):"restartFrame"===e.command?this.restartFrameRequest(t,e.arguments,e):"goto"===e.command?this.gotoRequest(t,e.arguments,e):"pause"===e.command?this.pauseRequest(t,e.arguments,e):"stackTrace"===e.command?this.stackTraceRequest(t,e.arguments,e):"scopes"===e.command?this.scopesRequest(t,e.arguments,e):"variables"===e.command?this.variablesRequest(t,e.arguments,e):"setVariable"===e.command?this.setVariableRequest(t,e.arguments,e):"setExpression"===e.command?this.setExpressionRequest(t,e.arguments,e):"source"===e.command?this.sourceRequest(t,e.arguments,e):"threads"===e.command?this.threadsRequest(t,e):"terminateThreads"===e.command?this.terminateThreadsRequest(t,e.arguments,e):"evaluate"===e.command?this.evaluateRequest(t,e.arguments,e):"stepInTargets"===e.command?this.stepInTargetsRequest(t,e.arguments,e):"gotoTargets"===e.command?this.gotoTargetsRequest(t,e.arguments,e):"completions"===e.command?this.completionsRequest(t,e.arguments,e):"exceptionInfo"===e.command?this.exceptionInfoRequest(t,e.arguments,e):"loadedSources"===e.command?this.loadedSourcesRequest(t,e.arguments,e):"dataBreakpointInfo"===e.command?this.dataBreakpointInfoRequest(t,e.arguments,e):"setDataBreakpoints"===e.command?this.setDataBreakpointsRequest(t,e.arguments,e):"readMemory"===e.command?this.readMemoryRequest(t,e.arguments,e):"disassemble"===e.command?this.disassembleRequest(t,e.arguments,e):"cancel"===e.command?this.cancelRequest(t,e.arguments,e):"breakpointLocations"===e.command?this.breakpointLocationsRequest(t,e.arguments,e):this.customRequest(e.command,t,e.arguments,e)}catch(e){this.sendErrorResponse(t,1104,"{_stack}",{_exception:e.message,_stack:e.stack},_.Telemetry)}}initializeRequest(e,t){e.body.supportsConditionalBreakpoints=!1,e.body.supportsHitConditionalBreakpoints=!1,e.body.supportsFunctionBreakpoints=!1,e.body.supportsConfigurationDoneRequest=!0,e.body.supportsEvaluateForHovers=!1,e.body.supportsStepBack=!1,e.body.supportsSetVariable=!1,e.body.supportsRestartFrame=!1,e.body.supportsStepInTargetsRequest=!1,e.body.supportsGotoTargetsRequest=!1,e.body.supportsCompletionsRequest=!1,e.body.supportsRestartRequest=!1,e.body.supportsExceptionOptions=!1,e.body.supportsValueFormattingOptions=!1,e.body.supportsExceptionInfoRequest=!1,e.body.supportTerminateDebuggee=!1,e.body.supportsDelayedStackTraceLoading=!1,e.body.supportsLoadedSourcesRequest=!1,e.body.supportsLogPoints=!1,e.body.supportsTerminateThreadsRequest=!1,e.body.supportsSetExpression=!1,e.body.supportsTerminateRequest=!1,e.body.supportsDataBreakpoints=!1,e.body.supportsReadMemoryRequest=!1,e.body.supportsDisassembleRequest=!1,e.body.supportsCancelRequest=!1,e.body.supportsBreakpointLocationsRequest=!1,this.sendResponse(e)}disconnectRequest(e,t,r){this.sendResponse(e),this.shutdown()}launchRequest(e,t,r){this.sendResponse(e)}attachRequest(e,t,r){this.sendResponse(e)}terminateRequest(e,t,r){this.sendResponse(e)}restartRequest(e,t,r){this.sendResponse(e)}setBreakPointsRequest(e,t,r){this.sendResponse(e)}setFunctionBreakPointsRequest(e,t,r){this.sendResponse(e)}setExceptionBreakPointsRequest(e,t,r){this.sendResponse(e)}configurationDoneRequest(e,t,r){this.sendResponse(e)}continueRequest(e,t,r){this.sendResponse(e)}nextRequest(e,t,r){this.sendResponse(e)}stepInRequest(e,t,r){this.sendResponse(e)}stepOutRequest(e,t,r){this.sendResponse(e)}stepBackRequest(e,t,r){this.sendResponse(e)}reverseContinueRequest(e,t,r){this.sendResponse(e)}restartFrameRequest(e,t,r){this.sendResponse(e)}gotoRequest(e,t,r){this.sendResponse(e)}pauseRequest(e,t,r){this.sendResponse(e)}sourceRequest(e,t,r){this.sendResponse(e)}threadsRequest(e,t){this.sendResponse(e)}terminateThreadsRequest(e,t,r){this.sendResponse(e)}stackTraceRequest(e,t,r){this.sendResponse(e)}scopesRequest(e,t,r){this.sendResponse(e)}variablesRequest(e,t,r){this.sendResponse(e)}setVariableRequest(e,t,r){this.sendResponse(e)}setExpressionRequest(e,t,r){this.sendResponse(e)}evaluateRequest(e,t,r){this.sendResponse(e)}stepInTargetsRequest(e,t,r){this.sendResponse(e)}gotoTargetsRequest(e,t,r){this.sendResponse(e)}completionsRequest(e,t,r){this.sendResponse(e)}exceptionInfoRequest(e,t,r){this.sendResponse(e)}loadedSourcesRequest(e,t,r){this.sendResponse(e)}dataBreakpointInfoRequest(e,t,r){this.sendResponse(e)}setDataBreakpointsRequest(e,t,r){this.sendResponse(e)}readMemoryRequest(e,t,r){this.sendResponse(e)}disassembleRequest(e,t,r){this.sendResponse(e)}cancelRequest(e,t,r){this.sendResponse(e)}breakpointLocationsRequest(e,t,r){this.sendResponse(e)}customRequest(e,t,r,n){this.sendErrorResponse(t,1014,"unrecognized request",null,_.Telemetry)}convertClientLineToDebugger(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e+1:this._clientLinesStartAt1?e-1:e}convertDebuggerLineToClient(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e-1:this._clientLinesStartAt1?e+1:e}convertClientColumnToDebugger(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e+1:this._clientColumnsStartAt1?e-1:e}convertDebuggerColumnToClient(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e-1:this._clientColumnsStartAt1?e+1:e}convertClientPathToDebugger(e){return this._clientPathsAreURIs!==this._debuggerPathsAreURIs?this._clientPathsAreURIs?E.uri2path(e):E.path2uri(e):e}convertDebuggerPathToClient(e){return this._debuggerPathsAreURIs!==this._clientPathsAreURIs?this._debuggerPathsAreURIs?E.uri2path(e):E.path2uri(e):e}static path2uri(e){"win32"===process.platform&&(/^[A-Z]:/.test(e)&&(e=e[0].toLowerCase()+e.substr(1)),e=e.replace(/\\/g,"/")),e=encodeURI(e);let t=new s.URL("file:");return t.pathname=e,t.toString()}static uri2path(e){let t=new s.URL(e),r=decodeURIComponent(t.pathname);return"win32"===process.platform&&(/^\/[a-zA-Z]:/.test(r)&&(r=r[1].toLowerCase()+r.substr(2)),r=r.replace(/\//g,"\\")),r}static formatPII(e,t,r){return e.replace(E._formatPIIRegexp,(function(e,n){return t&&n.length>0&&"_"!==n[0]?e:r[n]&&r.hasOwnProperty(n)?r[n]:e}))}}E._formatPIIRegexp=/{([^}]+)}/g,t.DebugSession=E},414:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Handles=class{constructor(e){this.START_HANDLE=1e3,this._handleMap=new Map,this._nextHandle="number"==typeof e?e:this.START_HANDLE}reset(){this._nextHandle=this.START_HANDLE,this._handleMap=new Map}create(e){var t=this._nextHandle++;return this._handleMap.set(t,e),t}get(e,t){return this._handleMap.get(e)||t}}},3648:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(5747),o=r(5622),s=r(1919),a=r(9703);var c;!function(e){e[e.Verbose=0]="Verbose",e[e.Log=1]="Log",e[e.Warn=2]="Warn",e[e.Error=3]="Error",e[e.Stop=4]="Stop"}(c=t.LogLevel||(t.LogLevel={}));class l{constructor(){this._pendingLogQ=[]}log(e,t=c.Log){e+="\n",this._write(e,t)}verbose(e){this.log(e,c.Verbose)}warn(e){this.log(e,c.Warn)}error(e){this.log(e,c.Error)}dispose(){if(this._currentLogger){const e=this._currentLogger.dispose();return this._currentLogger=null,e}return Promise.resolve()}_write(e,t=c.Log){e+="",this._pendingLogQ?this._pendingLogQ.push({msg:e,level:t}):this._currentLogger&&this._currentLogger.log(e,t)}setup(e,t,r=!0){const n="string"==typeof t?t:t&&this._logFilePathFromInit;if(this._currentLogger){const t={consoleMinLogLevel:e,logFilePath:n,prependTimestamp:r};this._currentLogger.setup(t).then((()=>{if(this._pendingLogQ){const e=this._pendingLogQ;this._pendingLogQ=null,e.forEach((e=>this._write(e.msg,e.level)))}}))}}init(e,t,r){this._pendingLogQ=this._pendingLogQ||[],this._currentLogger=new u(e,r),this._logFilePathFromInit=t}}t.Logger=l,t.logger=new l;class u{constructor(e,t){this.beforeExitCallback=()=>this.dispose(),this._logCallback=e,this._logToConsole=t,this._minLogLevel=c.Warn,this.disposeCallback=(e,t)=>{this.dispose(),t=t||2,t+=128,process.exit(t)}}setup(e){return n(this,void 0,void 0,(function*(){if(this._minLogLevel=e.consoleMinLogLevel,this._prependTimestamp=e.prependTimestamp,e.logFilePath)if(o.isAbsolute(e.logFilePath)){const r=t=>this.sendLog(`Error creating log file at path: ${e.logFilePath}. Error: ${t.toString()}\n`,c.Error);try{yield(t=o.dirname(e.logFilePath),new Promise(((e,r)=>{s(t,(t=>{t?r(t):e()}))}))),this.log("Verbose logs are written to:\n",c.Warn),this.log(e.logFilePath+"\n",c.Warn),this._logFileStream=i.createWriteStream(e.logFilePath),this.logDateTime(),this.setupShutdownListeners(),this._logFileStream.on("error",(e=>{r(e)}))}catch(e){r(e)}}else this.log(`logFilePath must be an absolute path: ${e.logFilePath}`,c.Error);var t}))}logDateTime(){let e=new Date;const t=e.getUTCFullYear()+"-"+`${e.getUTCMonth()+1}-`+e.getUTCDate()+", "+p();this.log(t+"\n",c.Verbose,!1)}setupShutdownListeners(){process.addListener("beforeExit",this.beforeExitCallback),process.addListener("SIGTERM",this.disposeCallback),process.addListener("SIGINT",this.disposeCallback)}removeShutdownListeners(){process.removeListener("beforeExit",this.beforeExitCallback),process.removeListener("SIGTERM",this.disposeCallback),process.removeListener("SIGINT",this.disposeCallback)}dispose(){return new Promise((e=>{this.removeShutdownListeners(),this._logFileStream?(this._logFileStream.end(e),this._logFileStream=null):e()}))}log(e,t,r=!0){if(this._minLogLevel!==c.Stop){if(t>=this._minLogLevel&&this.sendLog(e,t),this._logToConsole){const r=t===c.Error?console.error:t===c.Warn?console.warn:null;r&&r(h(e))}t===c.Error&&(e=`[${c[t]}] ${e}`),this._prependTimestamp&&r&&(e="["+p()+"] "+e),this._logFileStream&&this._logFileStream.write(e)}}sendLog(e,t){if(e.length>1500){const t=!!e.match(/(\n|\r\n)$/);e=e.substr(0,1500)+"[...]",t&&(e+="\n")}if(this._logCallback){const r=new d(e,t);this._logCallback(r)}}}class d extends a.OutputEvent{constructor(e,t){super(e,t===c.Error?"stderr":t===c.Warn?"console":"stdout")}}function h(e){return e.replace(/(\n|\r\n)$/,"")}function p(){let e=new Date;return f(2,String(e.getUTCHours()))+":"+f(2,String(e.getUTCMinutes()))+":"+f(2,String(e.getUTCSeconds()))+"."+f(3,String(e.getUTCMilliseconds()))+" UTC"}function f(e,t){return t.length>=e?t:String("0".repeat(e)+t).slice(-e)}t.LogOutputEvent=d,t.trimLastNewline=h},8380:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(3648),i=n.logger,o=r(9703);class s extends o.DebugSession{constructor(e,t,r){super(t,r),this.obsolete_logFilePath=e,this.on("error",(e=>{i.error(e.body)}))}start(e,t){super.start(e,t),i.init((e=>this.sendEvent(e)),this.obsolete_logFilePath,this._isServer)}sendEvent(e){if(!(e instanceof n.LogOutputEvent)){let t=e;e instanceof o.OutputEvent&&e.body&&e.body.data&&e.body.data.doNotLogOutput&&(delete e.body.data.doNotLogOutput,t=Object.assign({},e),t.body=Object.assign({},e.body,{output:"<output not logged>"})),i.verbose(`To client: ${JSON.stringify(t)}`)}super.sendEvent(e)}sendRequest(e,t,r,n){i.verbose(`To client: ${JSON.stringify(e)}(${JSON.stringify(t)}), timeout: ${r}`),super.sendRequest(e,t,r,n)}sendResponse(e){i.verbose(`To client: ${JSON.stringify(e)}`),super.sendResponse(e)}dispatchRequest(e){i.verbose(`From client: ${e.command}(${JSON.stringify(e.arguments)})`),super.dispatchRequest(e)}}t.LoggingDebugSession=s},420:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9703);t.DebugSession=n.DebugSession,t.InitializedEvent=n.InitializedEvent,t.TerminatedEvent=n.TerminatedEvent,t.StoppedEvent=n.StoppedEvent,t.ContinuedEvent=n.ContinuedEvent,t.OutputEvent=n.OutputEvent,t.ThreadEvent=n.ThreadEvent,t.BreakpointEvent=n.BreakpointEvent,t.ModuleEvent=n.ModuleEvent,t.LoadedSourceEvent=n.LoadedSourceEvent,t.CapabilitiesEvent=n.CapabilitiesEvent,t.Thread=n.Thread,t.StackFrame=n.StackFrame,t.Scope=n.Scope,t.Variable=n.Variable,t.Breakpoint=n.Breakpoint,t.Source=n.Source,t.Module=n.Module,t.CompletionItem=n.CompletionItem,t.ErrorDestination=n.ErrorDestination;const i=r(8380);t.LoggingDebugSession=i.LoggingDebugSession;const o=r(3648);t.Logger=o;const s=r(5812);t.Event=s.Event,t.Response=s.Response;const a=r(414);t.Handles=a.Handles;const c=o.logger;t.logger=c},5812:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){this.seq=0,this.type=e}}t.Message=r;t.Response=class extends r{constructor(e,t){super("response"),this.request_seq=e.seq,this.command=e.command,t?(this.success=!1,this.message=t):this.success=!0}};t.Event=class extends r{constructor(e,t){super("event"),this.event=e,t&&(this.body=t)}}},7862:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(8614),i=r(5812);class o{get event(){return this._event||(this._event=(e,t)=>{let r;return this._listener=e,this._this=t,r={dispose:()=>{this._listener=void 0,this._this=void 0}},r}),this._event}fire(e){if(this._listener)try{this._listener.call(this._this,e)}catch(e){}}hasListener(){return!!this._listener}dispose(){this._listener=void 0,this._this=void 0}}class s extends n.EventEmitter{constructor(){super(),this._sendMessage=new o,this._pendingRequests=new Map,this.onDidSendMessage=this._sendMessage.event}dispose(){}handleMessage(e){if("request"===e.type)this.dispatchRequest(e);else if("response"===e.type){const t=e,r=this._pendingRequests.get(t.request_seq);r&&(this._pendingRequests.delete(t.request_seq),r(t))}}_isRunningInline(){return this._sendMessage&&this._sendMessage.hasListener()}start(e,t){this._sequence=1,this._writableStream=t,this._rawData=new Buffer(0),e.on("data",(e=>this._handleData(e))),e.on("close",(()=>{this._emitEvent(new i.Event("close"))})),e.on("error",(e=>{this._emitEvent(new i.Event("error","inStream error: "+(e&&e.message)))})),t.on("error",(e=>{this._emitEvent(new i.Event("error","outStream error: "+(e&&e.message)))})),e.resume()}stop(){this._writableStream&&this._writableStream.end()}sendEvent(e){this._send("event",e)}sendResponse(e){e.seq>0?console.error(`attempt to send more than one response for command ${e.command}`):this._send("response",e)}sendRequest(e,t,r,n){const o={command:e};if(t&&Object.keys(t).length>0&&(o.arguments=t),this._send("request",o),n){this._pendingRequests.set(o.seq,n);const e=setTimeout((()=>{clearTimeout(e);const t=this._pendingRequests.get(o.seq);t&&(this._pendingRequests.delete(o.seq),t(new i.Response(o,"timeout")))}),r)}}dispatchRequest(e){}_emitEvent(e){this.emit(e.event,e)}_send(e,t){if(t.type=e,t.seq=this._sequence++,this._writableStream){const e=JSON.stringify(t);this._writableStream.write(`Content-Length: ${Buffer.byteLength(e,"utf8")}\r\n\r\n${e}`,"utf8")}this._sendMessage.fire(t)}_handleData(e){for(this._rawData=Buffer.concat([this._rawData,e]);;){if(this._contentLength>=0){if(this._rawData.length>=this._contentLength){const e=this._rawData.toString("utf8",0,this._contentLength);if(this._rawData=this._rawData.slice(this._contentLength),this._contentLength=-1,e.length>0)try{let t=JSON.parse(e);this.handleMessage(t)}catch(e){this._emitEvent(new i.Event("error","Error handling data: "+(e&&e.message)))}continue}}else{const e=this._rawData.indexOf(s.TWO_CRLF);if(-1!==e){const t=this._rawData.toString("utf8",0,e).split("\r\n");for(let e=0;e<t.length;e++){const r=t[e].split(/: +/);"Content-Length"==r[0]&&(this._contentLength=+r[1])}this._rawData=this._rawData.slice(e+s.TWO_CRLF.length);continue}}break}}}s.TWO_CRLF="\r\n\r\n",t.ProtocolServer=s},1919:(e,t,r)=>{var n=r(5622),i=r(5747),o=parseInt("0777",8);function s(e,t,r,a){"function"==typeof t?(r=t,t={}):t&&"object"==typeof t||(t={mode:t});var c=t.mode,l=t.fs||i;void 0===c&&(c=o),a||(a=null);var u=r||function(){};e=n.resolve(e),l.mkdir(e,c,(function(r){if(!r)return u(null,a=a||e);switch(r.code){case"ENOENT":if(n.dirname(e)===e)return u(r);s(n.dirname(e),t,(function(r,n){r?u(r,n):s(e,t,u,n)}));break;default:l.stat(e,(function(e,t){e||!t.isDirectory()?u(r,a):u(null,a)}))}}))}e.exports=s.mkdirp=s.mkdirP=s,s.sync=function e(t,r,s){r&&"object"==typeof r||(r={mode:r});var a=r.mode,c=r.fs||i;void 0===a&&(a=o),s||(s=null),t=n.resolve(t);try{c.mkdirSync(t,a),s=s||t}catch(i){switch(i.code){case"ENOENT":s=e(n.dirname(t),r,s),e(t,r,s);break;default:var l;try{l=c.statSync(t)}catch(e){throw i}if(!l.isDirectory())throw i}}return s}},4398:(e,t,r)=>{"use strict";var n=r(2087),i=r(7549),o=r(2521),s=r(1283),a=function(){function e(e,t,r){this.extensionId=e,this.extensionVersion=t,o.client?(this.appInsightsClient=o.getClient(r),this.appInsightsClient.channel.setOfflineMode(!0)):this.appInsightsClient=o.setup(r).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setOfflineMode(!0).start().client,this.setupAIClient(this.appInsightsClient),r&&0===r.indexOf("AIF-")&&(this.appInsightsClient.config.endpointUrl="https://vortex.data.microsoft.com/collect/v1"),this.loadCommonProperties(),i&&i.env&&this.loadVSCodeCommonProperties(i.env.machineId,i.env.sessionId,i.version)}return e.prototype.setupAIClient=function(e){if(e&&e.context&&e.context.keys&&e.context.tags){var t=e.context.keys.deviceMachineName;e.context.tags[t]=""}},e.prototype.loadVSCodeCommonProperties=function(e,t,r){this.commonProperties=this.commonProperties||Object.create(null),this.commonProperties.vscodemachineid=e,this.commonProperties.vscodesessionid=t,this.commonProperties.vscodeversion=r},e.prototype.loadCommonProperties=function(){var t=this;this.commonProperties=this.commonProperties||Object.create(null),this.commonProperties.os=n.platform(),this.commonProperties.osversion=n.release(),this.commonProperties.extname=this.extensionId,this.commonProperties.extversion=this.extensionVersion,"win32"===process.platform&&(this.getWinRegKeyData(e.SQM_KEY,e.REGISTRY_USERID_VALUE,s.HKCU,(function(e,r){!e&&r&&(t.commonProperties.sqmid=r)})),this.getWinRegKeyData(e.SQM_KEY,e.REGISTRY_MACHINEID_VALUE,s.HKLM,(function(e,r){!e&&r&&(t.commonProperties.sqmmachineid=r)})))},e.prototype.addCommonProperties=function(e){for(var t in this.commonProperties)e["common."+t]=this.commonProperties[t];return e},e.prototype.getWinRegKeyData=function(e,t,r,n){if("win32"===process.platform)try{new s({hive:r,key:e}).get(t,(function(e,t){e||!t?n(e,null):n(null,t.value)}))}catch(e){n(e,null)}else n(null,null)},e.prototype.sendTelemetryEvent=function(e,t,r){e&&(t=t||Object.create(null),t=this.addCommonProperties(t),this.appInsightsClient.trackEvent(this.extensionId+"/"+e,t,r))},e.SQM_KEY="\\SOFTWARE\\Microsoft\\SQMClient",e.REGISTRY_USERID_VALUE="UserId",e.REGISTRY_MACHINEID_VALUE="MachineId",e}();t.Z=a},4245:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CDP_API_NAMES=void 0,t.CDP_API_NAMES={DEBUGGER_SET_BREAKPOINT:"Debugger.setBreakpoint",RUNTIME_CALL_FUNCTION_ON:"Runtime.callFunctionOn",DEBUGGER_PAUSED:"Debugger.paused",RUNTIME_ENABLE:"Runtime.enable",CONSOLE_MESSAGE_ADDED:"Console.messageAdded",RUNTIME_CONSOLE_API_CALLED:"Runtime.consoleAPICalled",EXECUTION_CONTEXT_CREATED:"Runtime.executionContextCreated",CLOSE:"close"}},1756:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseCDPMessageHandler=void 0;t.BaseCDPMessageHandler=class{processDebuggerCDPMessage(e){return{event:e,sendBack:!1}}processApplicationCDPMessage(e){return{event:e,sendBack:!1}}setDebuggerTarget(e){this.debuggerTarget=e}setApplicationTarget(e){this.applicationTarget=e}}},1590:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HermesCDPMessageHandler=void 0;const n=r(4245),i=r(1756);class o extends i.BaseCDPMessageHandler{constructor(){super(...arguments),this.HERMES_NATIVE_FUNCTION_NAME="(native)",this.HERMES_NATIVE_FUNCTION_SCRIPT_ID="4294967295",this.ARRAY_REQUEST_PHRASE_MARKER="Object.getOwnPropertyDescriptor"}processDebuggerCDPMessage(e){let t=!1;return e.method===n.CDP_API_NAMES.DEBUGGER_SET_BREAKPOINT?e=this.handleBreakpointSetting(e):e.method===n.CDP_API_NAMES.RUNTIME_CALL_FUNCTION_ON&&e.params.functionDeclaration.includes(this.ARRAY_REQUEST_PHRASE_MARKER)&&(e=this.handleCallFunctionOnEvent(e),t=!0),{event:e,sendBack:t}}processApplicationCDPMessage(e){return e.method===n.CDP_API_NAMES.DEBUGGER_PAUSED?e=this.handlePausedEvent(e):e.result&&e.result.result&&(e=this.handleFunctionTypeResult(e)),{event:e,sendBack:!1}}handleCallFunctionOnEvent(e){return{result:{result:{objectId:e.params.objectId}},id:e.id}}handleFunctionTypeResult(e){if(Array.isArray(e.result.result)){let t=e.result.result;t.forEach((e=>{e.value&&"function"===e.value.type&&!e.value.description&&(e.value.description="function() { … }")})),e.result.result=t}return e}handlePausedEvent(e){let t=e.params.callFrames;return t=t.filter((e=>e.functionName!==this.HERMES_NATIVE_FUNCTION_NAME&&e.location.scriptId!==this.HERMES_NATIVE_FUNCTION_SCRIPT_ID)),e.params.callFrames=t,e}handleBreakpointSetting(e){return e.params&&delete e.params.location.columnNumber,e}}t.HermesCDPMessageHandler=o},725:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IOSDirectCDPMessageHandler=void 0;const n=r(1756),i=r(4245);class o extends n.BaseCDPMessageHandler{constructor(){super(),this.isBackcompatConfigured=!1,this.customMessageLastId=0}processDebuggerCDPMessage(e){return this.isBackcompatConfigured||e.method!==i.CDP_API_NAMES.RUNTIME_ENABLE||(this.configureTargetForIWDPCommunication(),this.configureDebuggerForIWDPCommunication(),this.isBackcompatConfigured=!0),{event:e,sendBack:!1}}processApplicationCDPMessage(e){return e.method===i.CDP_API_NAMES.CONSOLE_MESSAGE_ADDED&&(e=this.processDeprecatedConsoleMessage(e)),e.result&&e.result.properties&&(e.result={result:e.result.properties}),{event:e,sendBack:!1}}processDeprecatedConsoleMessage(e){return{method:i.CDP_API_NAMES.RUNTIME_CONSOLE_API_CALLED,params:{type:e.params.message.type,timestamp:e.params.message.timestamp,args:e.params.message.parameters||[{type:"string",value:e.params.message.text}],stackTrace:{callFrames:e.params.message.stack||e.params.message.stackTrace},executionContextId:1}}}configureTargetForIWDPCommunication(){var e,t;try{null===(e=this.applicationTarget)||void 0===e||e.api.Console.enable({}),null===(t=this.applicationTarget)||void 0===t||t.api.Debugger.setBreakpointsActive({active:!0})}catch(e){}}configureDebuggerForIWDPCommunication(){const e={id:this.customMessageLastId++,origin:"",name:"IOS Execution Context",auxData:{isDefault:!0}};try{this.sendCustomRequestToDebuggerTarget(i.CDP_API_NAMES.EXECUTION_CONTEXT_CREATED,{context:e},!1)}catch(e){throw Error("Could not create Execution context")}}sendCustomRequestToDebuggerTarget(e,t={},r=!0){var n;let i={method:e,params:t};r&&(i.id=this.customMessageLastId++),null===(n=this.debuggerTarget)||void 0===n||n.send(i)}}t.IOSDirectCDPMessageHandler=o},5585:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RnCDPMessageHandler=void 0;const n=r(4245),i=r(1756);class o extends i.BaseCDPMessageHandler{constructor(){super(),this.firstStop=!0}processDebuggerCDPMessage(e){return e.method===n.CDP_API_NAMES.CLOSE&&this.handleDebuggerDisconnect(),{event:e,sendBack:!1}}processApplicationCDPMessage(e){return e.method===n.CDP_API_NAMES.DEBUGGER_PAUSED&&this.firstStop&&(e.params=this.handleAppBundleFirstPauseEvent(e)),{event:e,sendBack:!1}}handleAppBundleFirstPauseEvent(e){let t=e.params;return t.reason&&"other"===t.reason&&(this.firstStop=!1,t.reason="Break on start"),t}handleDebuggerDisconnect(){this.firstStop=!0}}t.RnCDPMessageHandler=o},691:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.DebuggerEndpointHelper=void 0;const i=r(8835),o=r(413),s=r(881).promises,a=r(8605),c=r(7211),l=r(8102),u=r(9897),d=r(312);t.DebuggerEndpointHelper=class{constructor(){this.localv4=o.toBuffer("127.0.0.1"),this.localv6=o.toBuffer("::1")}retryGetWSEndpoint(e,t,r){return n(this,void 0,void 0,(function*(){for(;;)try{return yield this.getWSEndpoint(e)}catch(n){if(t<1||r.isCancellationRequested){const t=u.ErrorHelper.getInternalError(d.InternalErrorCode.CouldNotConnectToDebugTarget,e,n.message);if(r.isCancellationRequested)throw u.ErrorHelper.getNestedError(t,d.InternalErrorCode.CancellationTokenTriggered);throw t}yield l.PromiseUtil.delay(700)}}))}getWSEndpoint(e){return n(this,void 0,void 0,(function*(){const t=yield this.fetchJson(i.resolve(e,"/json/version"));if(t.webSocketDebuggerUrl)return t.webSocketDebuggerUrl;const r=yield this.fetchJson(i.resolve(e,"/json/list"));if(r.length)return r[0].webSocketDebuggerUrl;throw new Error("Could not find any debuggable target")}))}fetchJson(e){return n(this,void 0,void 0,(function*(){const t=yield this.fetch(e);try{return JSON.parse(t)}catch(e){return{}}}))}fetch(e){return n(this,void 0,void 0,(function*(){const t=!e.startsWith("http://"),r=t?c:a,n=yield this.isLoopback(e);return new Promise(((i,o)=>{const s={};t&&n&&(s.rejectUnauthorized=!1);const a=r.get(e,s,(e=>{let t="";e.setEncoding("utf8"),e.on("data",(e=>t+=e)),e.on("end",(()=>i(t))),e.on("error",o)}));a.on("error",o),a.end()}))}))}isLoopback(e){return n(this,void 0,void 0,(function*(){let t;try{t=new i.URL(e).hostname.replace(/^\[|\]$/g,"")}catch(r){t=e}if(this.isLoopbackIp(t))return!0;try{const e=yield s.lookup(t);return this.isLoopbackIp(e.address)}catch(e){return!1}}))}isLoopbackIp(e){if("localhost"===e.toLowerCase())return!0;let t;try{t=o.toBuffer(e)}catch(e){return!1}return t.equals(this.localv4)||t.equals(this.localv6)}}},2424:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ReactNativeCDPProxy=void 0;const i=r(8973),o=r(9144),s=r(8694),a=r(691);t.ReactNativeCDPProxy=class{constructor(e,t,r=s.LogLevel.None){this.PROXY_LOG_TAGS={DEBUGGER_COMMAND:"Command Debugger To Target",APPLICATION_COMMAND:"Command Target To Debugger",DEBUGGER_REPLY:"Reply From Debugger To Target",APPLICATION_REPLY:"Reply From Target To Debugger"},this.port=t,this.hostAddress=e,this.logger=o.OutputChannelLogger.getChannel("React Native Chrome Proxy","false"!==process.env.REACT_NATIVE_TOOLS_LAZY_LOGS,!1,!0),this.logLevel=r,this.browserInspectUri="",this.debuggerEndpointHelper=new a.DebuggerEndpointHelper}initializeServer(e,t,r){return n(this,void 0,void 0,(function*(){this.logLevel=t,this.CDPMessageHandler=e,this.cancellationToken=r,this.server=yield i.Server.create({port:this.port,host:this.hostAddress}),this.server.onConnection(this.onConnectionHandler.bind(this))}))}stopServer(){return n(this,void 0,void 0,(function*(){this.server&&(this.server.dispose(),this.server=null),this.applicationTarget&&(yield this.applicationTarget.close(),this.applicationTarget=null),this.browserInspectUri="",this.cancellationToken=void 0}))}setBrowserInspectUri(e){this.browserInspectUri=e}setApplicationTargetPort(e){this.applicationTargetPort=e}onConnectionHandler([e,t]){var r,o;return n(this,void 0,void 0,(function*(){this.debuggerTarget=e,this.debuggerTarget.pause(),this.browserInspectUri||(this.cancellationToken?this.browserInspectUri=yield this.debuggerEndpointHelper.retryGetWSEndpoint(`http://localhost:${this.applicationTargetPort}`,90,this.cancellationToken):this.browserInspectUri=yield this.debuggerEndpointHelper.getWSEndpoint(`http://localhost:${this.applicationTargetPort}`)),this.applicationTarget=new i.Connection(yield i.WebSocketTransport.create(this.browserInspectUri)),this.applicationTarget.onError(this.onApplicationTargetError.bind(this)),this.debuggerTarget.onError(this.onDebuggerTargetError.bind(this)),this.applicationTarget.onCommand(this.handleApplicationTargetCommand.bind(this)),this.debuggerTarget.onCommand(this.handleDebuggerTargetCommand.bind(this)),this.applicationTarget.onReply(this.handleApplicationTargetReply.bind(this)),this.debuggerTarget.onReply(this.handleDebuggerTargetReply.bind(this)),this.applicationTarget.onEnd(this.onApplicationTargetClosed.bind(this)),this.debuggerTarget.onEnd(this.onDebuggerTargetClosed.bind(this)),null===(r=this.CDPMessageHandler)||void 0===r||r.setApplicationTarget(this.applicationTarget),null===(o=this.CDPMessageHandler)||void 0===o||o.setDebuggerTarget(this.debuggerTarget),this.debuggerTarget.unpause()}))}handleDebuggerTargetCommand(e){var t,r;this.logger.logWithCustomTag(this.PROXY_LOG_TAGS.DEBUGGER_COMMAND,JSON.stringify(e,null,2),this.logLevel);const n=this.CDPMessageHandler.processDebuggerCDPMessage(e);n.sendBack?null===(t=this.debuggerTarget)||void 0===t||t.send(n.event):null===(r=this.applicationTarget)||void 0===r||r.send(n.event)}handleApplicationTargetCommand(e){var t,r;this.logger.logWithCustomTag(this.PROXY_LOG_TAGS.APPLICATION_COMMAND,JSON.stringify(e,null,2),this.logLevel);const n=this.CDPMessageHandler.processApplicationCDPMessage(e);n.sendBack?null===(t=this.applicationTarget)||void 0===t||t.send(n.event):null===(r=this.debuggerTarget)||void 0===r||r.send(n.event)}handleDebuggerTargetReply(e){var t,r;this.logger.logWithCustomTag(this.PROXY_LOG_TAGS.DEBUGGER_REPLY,JSON.stringify(e,null,2),this.logLevel);const n=this.CDPMessageHandler.processDebuggerCDPMessage(e);n.sendBack?null===(t=this.debuggerTarget)||void 0===t||t.send(n.event):null===(r=this.applicationTarget)||void 0===r||r.send(n.event)}handleApplicationTargetReply(e){var t,r;this.logger.logWithCustomTag(this.PROXY_LOG_TAGS.APPLICATION_REPLY,JSON.stringify(e,null,2),this.logLevel);const n=this.CDPMessageHandler.processApplicationCDPMessage(e);n.sendBack?null===(t=this.applicationTarget)||void 0===t||t.send(n.event):null===(r=this.debuggerTarget)||void 0===r||r.send(n.event)}onDebuggerTargetError(e){this.logger.error("Error on debugger transport",e)}onApplicationTargetError(e){this.logger.error("Error on application transport",e)}onApplicationTargetClosed(){return n(this,void 0,void 0,(function*(){this.applicationTarget=null}))}onDebuggerTargetClosed(){return n(this,void 0,void 0,(function*(){this.browserInspectUri="",this.CDPMessageHandler.processDebuggerCDPMessage({method:"close"}),this.debuggerTarget=null}))}}},5458:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CommandExecutor=t.CommandStatus=t.CommandVerbosity=void 0;const i=r(5622),o=r(4270),s=r(9327),a=r(1376),c=r(9897),l=r(312),u=r(3403),d=r(3116);u.config({messageFormat:u.MessageFormat.bundle,bundleFormat:u.BundleFormat.standalone})(r(5622).join(__dirname,"src\\common\\commandExecutor.ts"));const h=u.loadMessageBundle(r(5622).join(__dirname,"src\\common\\commandExecutor.ts"));var p,f;!function(e){e[e.OUTPUT=0]="OUTPUT",e[e.SILENT=1]="SILENT",e[e.PROGRESS=2]="PROGRESS"}(p=t.CommandVerbosity||(t.CommandVerbosity={})),function(e){e[e.Start=0]="Start",e[e.End=1]="End"}(f=t.CommandStatus||(t.CommandStatus={}));class g{constructor(e,t=process.cwd(),r=new o.NullLogger){this.nodeModulesRoot=e,this.currentWorkingDirectory=t,this.logger=r,this.childProcess=new d.Node.ChildProcess}execute(e,t={}){return n(this,void 0,void 0,(function*(){this.logger.debug(g.getCommandStatusString(e,f.Start));try{const r=yield this.childProcess.execToString(e,{cwd:this.currentWorkingDirectory,env:t.env});this.logger.info(r),this.logger.debug(g.getCommandStatusString(e,f.End))}catch(t){return this.generateRejectionForCommand(e,t)}}))}spawn(e,t,r={}){return this.spawnChildProcess(e,t,r).outcome}spawnReactPackager(e,t={}){return this.spawnReactCommand("start",e,t)}getReactNativeVersion(){return n(this,void 0,void 0,(function*(){return(yield s.ProjectVersionHelper.getReactNativeVersions(this.currentWorkingDirectory)).reactNativeVersion}))}killReactPackager(e){return n(this,void 0,void 0,(function*(){if(e){if(a.HostPlatform.getPlatformId()===a.HostPlatformId.WINDOWS){const t=yield this.childProcess.exec("taskkill /pid "+e.pid+" /T /F");yield t.outcome}else e.kill();this.logger.info(h(0,null))}else this.logger.warning(h(1,null))}))}spawnReactCommand(e,t=[],r={}){const n=a.HostPlatform.getNpmCliCommand(this.selectReactNativeCLI());return this.spawnChildProcess(n,[e,...t],r)}spawnWithProgress(e,t,r={verbosity:p.OUTPUT}){return n(this,void 0,void 0,(function*(){const n=Object.assign({},{cwd:this.currentWorkingDirectory},r),i=e+" "+t.join(" ");let o=0;const s=()=>{const e=Date.now();e-o>1500&&(o=e,this.logger.logStream(".",process.stdout))};r.verbosity===p.OUTPUT&&this.logger.debug(g.getCommandStatusString(i,f.Start));const a=this.childProcess.spawn(e,t,n);a.stdout.on("data",(e=>{r.verbosity===p.OUTPUT?this.logger.logStream(e,process.stdout):r.verbosity===p.PROGRESS&&s()})),a.stderr.on("data",(e=>{r.verbosity===p.OUTPUT?this.logger.logStream(e,process.stderr):r.verbosity===p.PROGRESS&&s()}));try{yield a.outcome,r.verbosity===p.OUTPUT&&this.logger.debug(g.getCommandStatusString(i,f.End)),this.logger.logStream("\n",process.stdout)}catch(e){return this.generateRejectionForCommand(i,e)}}))}selectReactNativeCLI(){return g.ReactNativeCommand||i.resolve(this.nodeModulesRoot,"node_modules",".bin","react-native")}spawnChildProcess(e,t,r={}){const n=Object.assign({},{cwd:this.currentWorkingDirectory},r),i=e+" "+t.join(" ");this.logger.debug(g.getCommandStatusString(i,f.Start));const o=this.childProcess.spawn(e,t,n);return o.stderr.on("data",(e=>{this.logger.logStream(e,process.stderr)})),o.stdout.on("data",(e=>{this.logger.logStream(e,process.stdout)})),o.outcome=o.outcome.then((()=>this.logger.debug(g.getCommandStatusString(i,f.End))),(e=>this.generateRejectionForCommand(i,e))),o}generateRejectionForCommand(e,t){return Promise.reject(t.errorCode===l.InternalErrorCode.CommandFailed?t:c.ErrorHelper.getNestedError(t,l.InternalErrorCode.CommandFailed,e))}static getCommandStatusString(e,t){switch(t){case f.Start:return`Executing command: ${e}`;case f.End:return`Finished executing: ${e}`;default:throw c.ErrorHelper.getInternalError(l.InternalErrorCode.UnsupportedCommandStatus)}}}t.CommandExecutor=g},3292:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurationProviderHelper=void 0;const i=r(9208),o=r(7599),s=r(3350),a=r(4062),c=r(3403);c.config({messageFormat:c.MessageFormat.bundle,bundleFormat:c.BundleFormat.standalone})(r(5622).join(__dirname,"src\\common\\configurationProviderHelper.ts"));const l=c.loadMessageBundle(r(5622).join(__dirname,"src\\common\\configurationProviderHelper.ts"));t.ConfigurationProviderHelper=class{selectPlatform(e,t,r,i,o){return n(this,void 0,void 0,(function*(){let n=yield e.showQuickPick({title:l(0,null),placeholder:l(1,null),step:i,totalSteps:o,items:r,activeItem:r[0]});if(!n)throw new Error("Platform is not selected");return t.platform=n.type,t}))}selectApplicationType(e,t,r,i){return n(this,void 0,void 0,(function*(){let n=yield e.showQuickPick({title:l(2,null),placeholder:l(3,null),step:r,totalSteps:i,items:s.appTypePickConfig,activeItem:s.appTypePickConfig[0]});if(!n)throw new Error("Application type is not selected");return t.type=n.type,t}))}shouldUseHermesEngine(e,t,r,i){return n(this,void 0,void 0,(function*(){let n=yield e.showQuickPick({title:l(4,null),placeholder:l(5,null),step:r,totalSteps:i,items:s.shouldUseHermesEngine,activeItem:s.shouldUseHermesEngine[0]});if(!n)throw new Error(l(6,null));return t.useHermesEngine="yes"===n.type,t}))}selectExpoHostType(e,t,r,i){return n(this,void 0,void 0,(function*(){let n=yield e.showQuickPick({title:l(7,null),placeholder:l(8,null),step:r,totalSteps:i,items:s.expoHostTypePickConfig,activeItem:s.expoHostTypePickConfig[0]});if(!n)throw new Error("Expo host type is not selected");return t.expoHostType=n.type,t}))}configureAddress(e,t,r,i,o){return n(this,void 0,void 0,(function*(){delete t.address;const n=yield e.showInputBox({title:l(9,null),step:r,totalSteps:i,value:o,prompt:l(10,null),validate:e=>Promise.resolve(e&&e.trim().length>0?void 0:l(11,null))});return n&&n.trim()!==o&&(t.address=n.trim()),t}))}configurePort(e,t,r,c){return n(this,void 0,void 0,(function*(){delete t.port;const n=String(t.type!==s.DEBUG_TYPES.REACT_NATIVE_DIRECT||t.platform!==o.PlatformType.iOS||t.useHermesEngine?i.Packager.DEFAULT_PORT:a.IWDPHelper.iOS_WEBKIT_DEBUG_PROXY_DEFAULT_PORT),u=/^\d+$/,d=yield e.showInputBox({title:l(12,null),step:r,totalSteps:c,value:n,prompt:l(13,null),validate:e=>Promise.resolve(e&&u.test(e.trim())?void 0:l(14,null))});let h;return d&&u.test(d.trim())&&(h=parseInt(d,10)),h&&h!==i.Packager.DEFAULT_PORT&&(t.port=h),t}))}}},2756:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurationReader=void 0;const i=r(312),o=r(9897);class s{static readString(e){if(this.isString(e))return e;throw o.ErrorHelper.getInternalError(i.InternalErrorCode.ExpectedStringValue,e)}static readBoolean(e){if(this.isBoolean(e))return e;if("true"===e||"false"===e)return"true"===e;throw o.ErrorHelper.getInternalError(i.InternalErrorCode.ExpectedBooleanValue,e)}static readArray(e){if(this.isArray(e))return e;throw o.ErrorHelper.getInternalError(i.InternalErrorCode.ExpectedArrayValue,e)}static readObject(e){if(this.isObject(e))return e;throw o.ErrorHelper.getInternalError(i.InternalErrorCode.ExpectedObjectValue,e)}static readInt(e){if(this.isInt(e))return e;if(this.isString(e))return parseInt(e,10);throw o.ErrorHelper.getInternalError(i.InternalErrorCode.ExpectedIntegerValue,e)}static readIntWithDefaultSync(e,t){return e?this.readInt(e):t}static readIntWithDefaultAsync(e,t){return n(this,void 0,void 0,(function*(){const r=yield t;return this.readIntWithDefaultSync(e,r)}))}static isArray(e){return Array.isArray(e)}static isObject(e){return"object"==typeof e||!s.isArray(e)}static isString(e){return"string"==typeof e}static isBoolean(e){return"boolean"==typeof e}static isInt(e){return this.isNumber(e)&&e%1==0}static isNumber(e){return"number"==typeof e}}t.ConfigurationReader=s},4800:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONTEXT_VARIABLES_NAMES=void 0,t.CONTEXT_VARIABLES_NAMES={IS_RN_PACKAGER_RUNNING:"isRNPackagerRunning",IS_RNT_NETWORK_INSPECTOR_RUNNING:"isRNTNetworkInspectorRunning",IS_RN_WINDOWS_PROJECT:"isRNWindowsProject",IS_RN_MACOS_PROJECT:"isRNMacOSProject",IS_RN_MACOS_HERMES_PROJECT:"isRNMacosHermesProject",IS_RN_WINDOWS_HERMES_PROJECT:"isRNWindowsHermesProject",IS_RN_ANDROID_HERMES_PROJECT:"isRNAndroidHermesProject",IS_RN_IOS_HERMES_PROJECT:"isRNIosHermesProject",IS_RN_HERMES_PROJECT:"isRNHermesProject",IS_RN_PROJECT:"isRNProject"}},6727:(__unused_webpack_module,exports)=>{"use strict";let customRequire;Object.defineProperty(exports,"__esModule",{value:!0});try{customRequire="function"===global.__non_webpack_require__?global.__non_webpack_require__:eval("require")}catch(e){customRequire=()=>{customRequire.cache={}}}exports.default=customRequire},9658:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EditorColorThemesHelper=t.SystemColorTheme=void 0;const n=r(7549);var i;!function(e){e.Light="Light",e.Dark="Dark"}(i=t.SystemColorTheme||(t.SystemColorTheme={}));class o{static isAutoDetectColorSchemeEnabled(){return!!n.workspace.getConfiguration("window").get("autoDetectColorScheme")}static getCurrentSystemColorTheme(){if(o.isAutoDetectColorSchemeEnabled()){const e=n.workspace.getConfiguration("workbench");return e.get("colorTheme")===e.get("preferredDarkColorTheme")?i.Dark:i.Light}throw new Error("Couldn't detect the current system color theme: 'window.autoDetectColorScheme' parameter is disabled")}}t.EditorColorThemesHelper=o},8079:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EntryPointHandler=t.ProcessType=void 0;const n=r(9897),i=r(3821),o=r(4301),s=r(2663);var a;!function(e){e[e.Extension=0]="Extension",e[e.Debugee=1]="Debugee",e[e.Debugger=2]="Debugger"}(a=t.ProcessType||(t.ProcessType={}));t.EntryPointHandler=class{constructor(e,t=new s.ConsoleLogger){this.logger=t,this.processType=e}runFunction(e,t,r,n=!1,i){return this.runFunctionWExtProps(e,i||{},t,r,n)}runFunctionWExtProps(e,t,r,n,o=!1){return this.handleErrors(r,i.TelemetryHelper.generate(e,t,n),o)}runApp(e,t,r,n,i,s){try{return o.Telemetry.init(e,t,n),this.runFunction(e,r,i,!0,s)}catch(r){throw this.logger.error(r),r}}handleErrors(e,t,r){return t.catch((t=>{const i=this.processType===a.Debugee,o=!r||i;if(this.logger.error(e.message,n.ErrorHelper.wrapError(e,t),o),r){if(!i)throw t;process.exit(1)}})),t}}},9897:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorHelper=void 0;const n=r(6932),i=r(6592);class o{static getInternalError(e,...t){let r=o.getErrorMessage(e,...t);return new n.InternalError(e,r)}static getNestedError(e,t,...r){let i=o.getErrorMessage(t,...r);return new n.NestedError(t,i,e)}static wrapError(e,t){return n.NestedError.getWrappedError(e,t)}static getWarning(e){return new n.InternalError(-1,e,n.InternalErrorLevel.Warning)}static getNestedWarning(e,t){return new n.NestedError(-1,t,e,null,n.InternalErrorLevel.Warning)}static getErrorMessage(e,...t){return o.formatErrorMessage(o.ERROR_STRINGS[e],...t)}static formatErrorMessage(e,...t){if(!e)return e;let r=e;for(let e=0;e<t.length;e++)r=r.replace(new RegExp("\\{"+e+"\\}","g"),t[e]);return r}}t.ErrorHelper=o,o.ERROR_STRINGS=i.ERROR_STRINGS},6592:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ERROR_STRINGS=void 0;const n=r(3403),i=r(312);n.config({messageFormat:n.MessageFormat.bundle,bundleFormat:n.BundleFormat.standalone})(r(5622).join(__dirname,"src\\common\\error\\errorStrings.ts"));const o=n.loadMessageBundle(r(5622).join(__dirname,"src\\common\\error\\errorStrings.ts"));t.ERROR_STRINGS={[i.InternalErrorCode.CommandFailed]:o(0,null),[i.InternalErrorCode.CommandFailedWithDetails]:o(1,null),[i.InternalErrorCode.DebuggingCommandFailed]:o(2,null),[i.InternalErrorCode.CommandFailedWithErrorCode]:o(3,null),[i.InternalErrorCode.ExpectedIntegerValue]:o(4,null),[i.InternalErrorCode.PackagerStartFailed]:o(5,null),[i.InternalErrorCode.IOSDeployNotFound]:o(6,null),[i.InternalErrorCode.DeviceNotPluggedIn]:o(7,null),[i.InternalErrorCode.DeveloperDiskImgNotMountable]:o(8,null),[i.InternalErrorCode.ApplicationLaunchFailed]:o(9,null),[i.InternalErrorCode.CouldNotAttachToDebugger]:o(10,null),[i.InternalErrorCode.ApplicationLaunchTimedOut]:o(11,null),[i.InternalErrorCode.IOSSimulatorNotLaunchable]:o(12,null),[i.InternalErrorCode.OpnPackagerLocationNotFound]:o(13,null),[i.InternalErrorCode.OpnPackagerNotFound]:o(14,null),[i.InternalErrorCode.PackageNotFound]:o(15,null),[i.InternalErrorCode.PlatformNotSupported]:o(16,null),[i.InternalErrorCode.ProjectVersionNotParsable]:o(17,null),[i.InternalErrorCode.ProjectVersionUnsupported]:o(18,null),[i.InternalErrorCode.CouldNotFindProjectVersion]:o(19,null),[i.InternalErrorCode.ProjectVersionNotReadable]:o(20,null),[i.InternalErrorCode.TelemetryInitializationFailed]:o(21,null),[i.InternalErrorCode.ExtensionActivationFailed]:o(22,null),[i.InternalErrorCode.DebuggerStubLauncherFailed]:o(23,null),[i.InternalErrorCode.IntellisenseSetupFailed]:o(24,null),[i.InternalErrorCode.NodeDebuggerConfigurationFailed]:o(25,null),[i.InternalErrorCode.FailedToStopPackagerOnExit]:o(26,null),[i.InternalErrorCode.FailedToRunOnAndroid]:o(27,null),[i.InternalErrorCode.FailedToRunOnIos]:o(28,null),[i.InternalErrorCode.FailedToRunExponent]:o(29,null),[i.InternalErrorCode.FailedToPublishToExpHost]:o(30,null),[i.InternalErrorCode.FailedToStartPackager]:o(31,null),[i.InternalErrorCode.FailedToStopPackager]:o(32,null),[i.InternalErrorCode.FailedToRestartPackager]:o(33,null),[i.InternalErrorCode.DebuggingFailed]:o(34,null),[i.InternalErrorCode.DebuggingFailedInNodeWrapper]:o(35,null),[i.InternalErrorCode.RNTempFolderDeletionFailed]:o(36,null),[i.InternalErrorCode.CouldNotFindLocationOfNodeDebugger]:o(37,null),[i.InternalErrorCode.CouldNotFindWorkspace]:o(38,null),[i.InternalErrorCode.ReactNativePackageIsNotInstalled]:o(39,null),[i.InternalErrorCode.ReactNativeWindowsIsNotInstalled]:o(40,null),[i.InternalErrorCode.PackagerRunningInDifferentPort]:o(41,null),[i.InternalErrorCode.ErrorWhileProcessingMessageInIPMSServer]:o(42,null),[i.InternalErrorCode.ErrorNoPipeFound]:o(43,null),[i.InternalErrorCode.NotAllSuccessPatternsMatched]:o(44,null),[i.InternalErrorCode.CouldNotParsePackageVersion]:o(45,null),[i.InternalErrorCode.UnsupportedCommandStatus]:o(46,null),[i.InternalErrorCode.ExpectedExponentTunnelPath]:o(47,null),[i.InternalErrorCode.WorkspaceNotFound]:o(48,null),[i.InternalErrorCode.RNVersionNotSupportedByExponent]:o(49,null),[i.InternalErrorCode.UserCancelledExpoLogin]:o(50,null),[i.InternalErrorCode.NgrokIsNotInstalledGlobally]:o(51,null),[i.InternalErrorCode.CannotAttachToPackagerCheckPackagerRunningOnPort]:o(52,null),[i.InternalErrorCode.AnotherDebuggerConnectedToPackager]:o(53,null),[i.InternalErrorCode.NotInReactNativeFolderError]:o(54,null),[i.InternalErrorCode.SourcesStoragePathIsNullOrEmpty]:o(55,null),[i.InternalErrorCode.AndroidCouldNotInstallTheAppOnAnyAvailibleDevice]:o(56,null),[i.InternalErrorCode.AndroidShellCommandTimedOut]:o(57,null),[i.InternalErrorCode.AndroidProjectNotFound]:o(58,null),[i.InternalErrorCode.AndroidMoreThanOneDeviceOrEmulator]:o(59,null),[i.InternalErrorCode.AndroidFailedToLaunchTheSpecifiedActivity]:o(60,null),[i.InternalErrorCode.IOSFoundMoreThanOneExecutablesCleanupBuildFolder]:o(61,null),[i.InternalErrorCode.IOSCouldNotFoundExecutableInFolder]:o(62,null),[i.InternalErrorCode.WinRNMPPluginIsNotInstalled]:o(63,null),[i.InternalErrorCode.WinRunCommandFailed]:o(64,null),[i.InternalErrorCode.ReactDevtoolsIsNotInstalled]:o(65,null),[i.InternalErrorCode.CancellationTokenTriggered]:o(66,null),[i.InternalErrorCode.WorkspaceIsNotTrusted]:o(67,null),[i.InternalErrorCode.DebuggingWontWorkReloadJSAndReconnect]:o(68,null),[i.InternalErrorCode.ReconnectionToPackagerFailedCheckForErrorsOrRestartReactNative]:o(69,null),[i.InternalErrorCode.FailedToProcessMessageFromReactNativeApp]:o(70,null),[i.InternalErrorCode.FailedToPrepareJSRuntimeEnvironment]:o(71,null),[i.InternalErrorCode.FailedToSendMessageToTheReactNativeApp]:o(72,null),[i.InternalErrorCode.ReactNativeWorkerProcessThrownAnError]:o(73,null),[i.InternalErrorCode.CouldntImportScriptAt]:o(74,null),[i.InternalErrorCode.RNMessageWithMethodExecuteApplicationScriptDoesntHaveURLProperty]:o(75,null),[i.InternalErrorCode.CouldNotConnectToDebugTarget]:o(76,null),[i.InternalErrorCode.IOSCouldNotFoundDeviceForDirectDebugging]:o(77,null),[i.InternalErrorCode.FailedToStartAndroidEmulator]:o(78,null),[i.InternalErrorCode.FailedToStartIOSSimulator]:o(79,null),[i.InternalErrorCode.AndroidThereIsNoAnyOnlineDebuggableTarget]:o(80,null),[i.InternalErrorCode.IOSThereIsNoAnyDebuggableTarget]:o(81,null),[i.InternalErrorCode.TargetSelectionError]:o(82,null),[i.InternalErrorCode.ReactNativemacOSIsNotInstalled]:o(83,null),[i.InternalErrorCode.AndroidCouldNotStartLogCatMonitor]:o(84,null),[i.InternalErrorCode.AndroidCouldNotStopLogCatMonitor]:o(85,null),[i.InternalErrorCode.AndroidCouldNotFindActiveLogCatMonitor]:o(86,null),[i.InternalErrorCode.CouldNotDirectDebugWithoutHermesEngine]:o(87,null),[i.InternalErrorCode.CouldNotStartNetworkInspector]:o(88,null),[i.InternalErrorCode.CouldNotStopNetworkInspector]:o(89,null)}},6932:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.NestedError=t.InternalError=t.InternalErrorLevel=void 0,function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning"}(r=t.InternalErrorLevel||(t.InternalErrorLevel={}));class n extends Error{constructor(e,t,n=r.Error){super(t),this.errorCode=e,this.errorLevel=n,this.message=e>0?t+` (error code ${this.errorCode})`:t}get isInternalError(){return!0}}t.InternalError=n;class i extends n{constructor(e,t,n=null,i,o=r.Error){super(e,t,o),this.innerError=n,this.name=n?n.name:null;const s=n?n.message:null;this.message=s?`${t}: ${s}`:t,this._extras=i}get extras(){return this._extras}static getWrappedError(e,t){return new i(t.errorCode||e.errorCode,e.message,t)}}t.NestedError=i},312:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InternalErrorCode=void 0,function(e){e[e.CommandFailed=101]="CommandFailed",e[e.CommandFailedWithErrorCode=102]="CommandFailedWithErrorCode",e[e.PackagerStartFailed=103]="PackagerStartFailed",e[e.FailedToRunOnAndroid=104]="FailedToRunOnAndroid",e[e.FailedToRunOnIos=105]="FailedToRunOnIos",e[e.FailedToStartPackager=106]="FailedToStartPackager",e[e.FailedToStopPackager=107]="FailedToStopPackager",e[e.PackagerRunningInDifferentPort=108]="PackagerRunningInDifferentPort",e[e.FailedToRestartPackager=109]="FailedToRestartPackager",e[e.FailedToRunExponent=110]="FailedToRunExponent",e[e.FailedToPublishToExpHost=111]="FailedToPublishToExpHost",e[e.UnsupportedCommandStatus=112]="UnsupportedCommandStatus",e[e.CommandFailedWithDetails=113]="CommandFailedWithDetails",e[e.FailedToRunOnWindows=114]="FailedToRunOnWindows",e[e.FailedToRunOnMacOS=115]="FailedToRunOnMacOS",e[e.DebuggingCommandFailed=116]="DebuggingCommandFailed",e[e.IOSDeployNotFound=201]="IOSDeployNotFound",e[e.DeviceNotPluggedIn=301]="DeviceNotPluggedIn",e[e.DeveloperDiskImgNotMountable=302]="DeveloperDiskImgNotMountable",e[e.ApplicationLaunchFailed=303]="ApplicationLaunchFailed",e[e.ApplicationLaunchTimedOut=304]="ApplicationLaunchTimedOut",e[e.FailedToStartAndroidEmulator=305]="FailedToStartAndroidEmulator",e[e.TargetSelectionError=306]="TargetSelectionError",e[e.FailedToStartIOSSimulator=307]="FailedToStartIOSSimulator",e[e.IOSSimulatorNotLaunchable=401]="IOSSimulatorNotLaunchable",e[e.IOSFoundMoreThanOneExecutablesCleanupBuildFolder=402]="IOSFoundMoreThanOneExecutablesCleanupBuildFolder",e[e.IOSCouldNotFoundExecutableInFolder=403]="IOSCouldNotFoundExecutableInFolder",e[e.IOSCouldNotFoundDeviceForDirectDebugging=404]="IOSCouldNotFoundDeviceForDirectDebugging",e[e.IOSThereIsNoAnyDebuggableTarget=405]="IOSThereIsNoAnyDebuggableTarget",e[e.OpnPackagerLocationNotFound=501]="OpnPackagerLocationNotFound",e[e.OpnPackagerNotFound=502]="OpnPackagerNotFound",e[e.FailedToStopPackagerOnExit=503]="FailedToStopPackagerOnExit",e[e.CannotAttachToPackagerCheckPackagerRunningOnPort=504]="CannotAttachToPackagerCheckPackagerRunningOnPort",e[e.AnotherDebuggerConnectedToPackager=505]="AnotherDebuggerConnectedToPackager",e[e.ProjectVersionNotParsable=601]="ProjectVersionNotParsable",e[e.ProjectVersionUnsupported=602]="ProjectVersionUnsupported",e[e.ProjectVersionNotReadable=603]="ProjectVersionNotReadable",e[e.NotInReactNativeFolderError=604]="NotInReactNativeFolderError",e[e.CouldNotFindProjectVersion=605]="CouldNotFindProjectVersion",e[e.ReactNativePackageIsNotInstalled=606]="ReactNativePackageIsNotInstalled",e[e.ReactNativeWindowsIsNotInstalled=607]="ReactNativeWindowsIsNotInstalled",e[e.ReactNativemacOSIsNotInstalled=608]="ReactNativemacOSIsNotInstalled",e[e.TelemetryInitializationFailed=701]="TelemetryInitializationFailed",e[e.ExtensionActivationFailed=702]="ExtensionActivationFailed",e[e.DebuggerStubLauncherFailed=703]="DebuggerStubLauncherFailed",e[e.IntellisenseSetupFailed=704]="IntellisenseSetupFailed",e[e.NodeDebuggerConfigurationFailed=705]="NodeDebuggerConfigurationFailed",e[e.DebuggingFailed=706]="DebuggingFailed",e[e.RNTempFolderDeletionFailed=707]="RNTempFolderDeletionFailed",e[e.DebuggingFailedInNodeWrapper=708]="DebuggingFailedInNodeWrapper",e[e.PlatformNotSupported=709]="PlatformNotSupported",e[e.WorkspaceNotFound=710]="WorkspaceNotFound",e[e.ExpectedExponentTunnelPath=711]="ExpectedExponentTunnelPath",e[e.NotAllSuccessPatternsMatched=712]="NotAllSuccessPatternsMatched",e[e.CouldNotParsePackageVersion=713]="CouldNotParsePackageVersion",e[e.PackageNotFound=714]="PackageNotFound",e[e.ReactDevtoolsIsNotInstalled=715]="ReactDevtoolsIsNotInstalled",e[e.CancellationTokenTriggered=716]="CancellationTokenTriggered",e[e.UnknownError=717]="UnknownError",e[e.WorkspaceIsNotTrusted=718]="WorkspaceIsNotTrusted",e[e.CouldNotFindLocationOfNodeDebugger=801]="CouldNotFindLocationOfNodeDebugger",e[e.CouldNotFindWorkspace=802]="CouldNotFindWorkspace",e[e.ErrorWhileProcessingMessageInIPMSServer=901]="ErrorWhileProcessingMessageInIPMSServer",e[e.ErrorNoPipeFound=902]="ErrorNoPipeFound",e[e.ExpectedIntegerValue=1001]="ExpectedIntegerValue",e[e.ExpectedStringValue=1002]="ExpectedStringValue",e[e.ExpectedBooleanValue=1003]="ExpectedBooleanValue",e[e.ExpectedArrayValue=1004]="ExpectedArrayValue",e[e.ExpectedObjectValue=1005]="ExpectedObjectValue",e[e.RNVersionNotSupportedByExponent=1101]="RNVersionNotSupportedByExponent",e[e.UserCancelledExpoLogin=1102]="UserCancelledExpoLogin",e[e.NgrokIsNotInstalledGlobally=1103]="NgrokIsNotInstalledGlobally",e[e.AndroidCouldNotInstallTheAppOnAnyAvailibleDevice=1201]="AndroidCouldNotInstallTheAppOnAnyAvailibleDevice",e[e.AndroidShellCommandTimedOut=1202]="AndroidShellCommandTimedOut",e[e.AndroidProjectNotFound=1203]="AndroidProjectNotFound",e[e.AndroidMoreThanOneDeviceOrEmulator=1204]="AndroidMoreThanOneDeviceOrEmulator",e[e.AndroidFailedToLaunchTheSpecifiedActivity=1205]="AndroidFailedToLaunchTheSpecifiedActivity",e[e.AndroidCouldNotStartLogCatMonitor=1206]="AndroidCouldNotStartLogCatMonitor",e[e.AndroidCouldNotStopLogCatMonitor=1207]="AndroidCouldNotStopLogCatMonitor",e[e.AndroidCouldNotFindActiveLogCatMonitor=1208]="AndroidCouldNotFindActiveLogCatMonitor",e[e.AndroidThereIsNoAnyOnlineDebuggableTarget=1209]="AndroidThereIsNoAnyOnlineDebuggableTarget",e[e.WinRNMPPluginIsNotInstalled=1301]="WinRNMPPluginIsNotInstalled",e[e.WinRunCommandFailed=1302]="WinRunCommandFailed",e[e.SourcesStoragePathIsNullOrEmpty=1401]="SourcesStoragePathIsNullOrEmpty",e[e.DebuggingWontWorkReloadJSAndReconnect=1402]="DebuggingWontWorkReloadJSAndReconnect",e[e.ReconnectionToPackagerFailedCheckForErrorsOrRestartReactNative=1403]="ReconnectionToPackagerFailedCheckForErrorsOrRestartReactNative",e[e.FailedToProcessMessageFromReactNativeApp=1404]="FailedToProcessMessageFromReactNativeApp",e[e.FailedToPrepareJSRuntimeEnvironment=1405]="FailedToPrepareJSRuntimeEnvironment",e[e.FailedToSendMessageToTheReactNativeApp=1406]="FailedToSendMessageToTheReactNativeApp",e[e.ReactNativeWorkerProcessThrownAnError=1407]="ReactNativeWorkerProcessThrownAnError",e[e.CouldntImportScriptAt=1408]="CouldntImportScriptAt",e[e.RNMessageWithMethodExecuteApplicationScriptDoesntHaveURLProperty=1409]="RNMessageWithMethodExecuteApplicationScriptDoesntHaveURLProperty",e[e.CouldNotAttachToDebugger=1410]="CouldNotAttachToDebugger",e[e.CouldNotDirectDebugWithoutHermesEngine=1411]="CouldNotDirectDebugWithoutHermesEngine",e[e.CouldNotConnectToDebugTarget=1501]="CouldNotConnectToDebugTarget",e[e.CouldNotStartNetworkInspector=1601]="CouldNotStartNetworkInspector",e[e.CouldNotStopNetworkInspector=1602]="CouldNotStopNetworkInspector"}(t.InternalErrorCode||(t.InternalErrorCode={}))},2966:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RN_VERSION_ERRORS=void 0,t.RN_VERSION_ERRORS={MISSING_PACKAGE_IN_NODE_MODULES:"errorMissingPackageInNodeModules",MISSING_DEPENDENCY_IN_PROJECT_PACKAGE_FILE:"errorMissingDependencyInProjectPackageFile",MISSING_DEPENDENCIES_FIELDS_IN_PROJECT_PACKAGE_FILE:"errorMissingDependenciesFieldsInProjectPackageFile",UNKNOWN_ERROR:"errorUnknown"}},334:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExecutionsFilterBeforeTimestamp=t.ExecutionsLimiter=void 0;t.ExecutionsLimiter=class{constructor(){this.executionToLastTimestamp={}}execute(e,t,r){const n=(new Date).getTime();n-(this.executionToLastTimestamp[e]||0)>=1e3*t&&(this.executionToLastTimestamp[e]=n,r())}};class r{constructor(e){this.sinceWhenToStopFiltering=this.now()+e*r.MILLISECONDS_IN_ONE_SECOND}execute(e){this.now()>=this.sinceWhenToStopFiltering&&e()}now(){return(new Date).getTime()}}t.ExecutionsFilterBeforeTimestamp=r,r.MILLISECONDS_IN_ONE_SECOND=1e3},9185:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getVersionFromExtensionNodeModules=t.isWorkspaceTrusted=t.getNodeModulesInFolderHierarchy=t.generateRandomPortNumber=t.findFileInFolderHierarchy=t.getExtensionName=t.getExtensionVersion=void 0;const i=r(5622),o=r(5747),s=r(7549),a=r(1506);function c(e,t){let r,n=e;for(;!o.existsSync(i.join(n,t));){if(r=i.resolve(n,".."),r===n)return null;n=r}return i.join(n,t)}t.getExtensionVersion=function(){const e=c(__dirname,"package.json");return e?JSON.parse(o.readFileSync(e,"utf-8")).version:null},t.getExtensionName=function(){const e=c(__dirname,"package.json");return e?JSON.parse(o.readFileSync(e,"utf-8")).name:null},t.findFileInFolderHierarchy=c,t.generateRandomPortNumber=function(){return Math.round(4e4*Math.random()+3e3)},t.getNodeModulesInFolderHierarchy=function(e){const t=c(e,i.join("node_modules","react-native"));return t?i.resolve(t,"..",".."):null},t.isWorkspaceTrusted=function(){return"boolean"!=typeof s.workspace.isTrusted||s.workspace.isTrusted},t.getVersionFromExtensionNodeModules=function(e){return n(this,void 0,void 0,(function*(){const t=c(__dirname,"package.json");if(t){const r=i.resolve(t,"..");try{return yield new a.Package(r).getPackageVersionFromNodeModules(e)}catch(e){return null}}return null}))}},1376:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.HostPlatform=t.HostPlatformId=void 0;const i=r(5640),o=r(4724),s=r(5622);var a;!function(e){e[e.WINDOWS=0]="WINDOWS",e[e.OSX=1]="OSX",e[e.LINUX=2]="LINUX"}(a=t.HostPlatformId||(t.HostPlatformId={}));class c{getUserHomePath(){return process.env.USERPROFILE||""}setEnvironmentVariable(e,t){return n(this,void 0,void 0,(function*(){return(yield(new i.ChildProcess).exec(`setx ${e} ${t}`)).outcome}))}getSettingsHome(){return s.join(process.env.APPDATA||"","vscode-react-native")}getNpmCliCommand(e){return`${e}.cmd`}getPlatformId(){return a.WINDOWS}getUserID(){return process.env.USERNAME||""}isCompatibleWithTarget(e){switch(e){case o.TargetPlatformId.ANDROID:case o.TargetPlatformId.EXPONENT:case o.TargetPlatformId.WINDOWS:return!0;default:return!1}}}class l{getUserHomePath(){return process.env.HOME||""}getSettingsHome(){return s.join(process.env.HOME||"",".vscode-react-native")}getNpmCliCommand(e){return e}}class u extends l{setEnvironmentVariable(e,t){return n(this,void 0,void 0,(function*(){return(yield(new i.ChildProcess).exec(`launchctl setenv ${e} ${t}`)).outcome}))}getPlatformId(){return a.OSX}getUserID(){return process.env.LOGNAME||""}isCompatibleWithTarget(e){switch(e){case o.TargetPlatformId.ANDROID:case o.TargetPlatformId.EXPONENT:case o.TargetPlatformId.IOS:case o.TargetPlatformId.MACOS:return!0;default:return!1}}}class d extends l{setEnvironmentVariable(e,t){return n(this,void 0,void 0,(function*(){return(yield(new i.ChildProcess).exec(`export ${e}=${t}`)).outcome}))}getPlatformId(){return a.LINUX}getUserID(){return process.env.USER||""}isCompatibleWithTarget(e){switch(e){case o.TargetPlatformId.ANDROID:case o.TargetPlatformId.EXPONENT:return!0;default:return!1}}}class h{static get platform(){if(!h.platformInstance)switch(process.platform){case"win32":h.platformInstance=new c;break;case"darwin":h.platformInstance=new u;break;case"linux":default:h.platformInstance=new d}return h.platformInstance}static getUserHomePath(){return h.platform.getUserHomePath()}static getSettingsHome(){return h.platform.getSettingsHome()}static getNpmCliCommand(e){return h.platform.getNpmCliCommand(e)}static getPlatformId(){return h.platform.getPlatformId()}static setEnvironmentVariable(e,t){return h.platform.setEnvironmentVariable(e,t)}static getUserID(){return h.platform.getUserID()}static isCompatibleWithTarget(e){return h.platform.isCompatibleWithTarget(e)}}t.HostPlatform=h},643:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LaunchJsonCompletionHelper=void 0;const n=r(7549),i=r(516);t.LaunchJsonCompletionHelper=class{static getTextForInsertion(e,t,r){const n=JSON.stringify(e);return"AfterItem"===t?"BeforeCursor"===r?n:`,${n}`:"BeforeItem"===t?`${n},`:n}static getCursorPositionInConfigurationsArray(e,t){if(this.isConfigurationArrayEmpty(e))return"InsideEmptyArray";const r=i.createScanner(e.getText(),!0);r.setPosition(e.offsetAt(t));const n=r.scan();return 5===n||4===n?"AfterItem":1===n?"BeforeItem":void 0}static isCommaImmediatelyBeforeCursor(e,t){const r=e.lineAt(t.line),i=e.getText(new n.Range(r.range.start,t));if(i.trim().endsWith(","))return!0;if(0!==i.trim().length)return!1;let o=t.line-1;for(;o>0;){const t=e.lineAt(o).text;if(t.trim().endsWith(","))return!0;if(0!==t.trim().length)return!1;o-=1}return!1}static isConfigurationArrayEmpty(e){const t=i.parse(e.getText(),[],{allowTrailingComma:!0,disallowComments:!1});return!t||!Array.isArray(t.configurations)||0===t.configurations.length}}},5640:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ChildProcess=void 0;const i=r(3129),o=r(9897),s=r(312),a=r(9901),c=r(1765);class l{constructor({childProcess:e=i}={}){this.childProcess=e}exec(e,t={}){let r,n;return new Promise((i=>{r=new Promise(((r,i)=>{n=this.childProcess.exec(e,t,((t,n,a)=>{t?i(o.ErrorHelper.getNestedError(t,s.InternalErrorCode.CommandFailed,e)):r(n)}))})),i({process:n,outcome:r})}))}execToString(e,t={}){return n(this,void 0,void 0,(function*(){const r=yield this.exec(e,t);return(yield r.outcome).toString()}))}execFileSync(e,t=[],r={}){return this.childProcess.execFileSync(e,t,r)}spawn(e,t=[],r={},n=!1){const i=this.childProcess.spawn(e,t,r);let a=new Promise(((r,a)=>{i.once("error",(e=>{a(e)}));const c=[],l=[];i.stderr.on("data",(e=>{c.push(e.toString())})),i.stdout.on("data",(e=>{l.push(e.toString())})),i.once("exit",(i=>{if(0===i)r();else{const r=e+" "+t.join(" ");if(n){let e="";l.length>0&&(e=e.concat(`\n\tSTDOUT: ${l[l.length-1]}`)),c.length>0&&(e=e.concat(`\n\tSTDERR: ${c.join("\n\t")}`)),""===e&&(e="STDOUT and STDERR are empty!"),a(o.ErrorHelper.getInternalError(s.InternalErrorCode.CommandFailedWithDetails,r,e))}else a(o.ErrorHelper.getInternalError(s.InternalErrorCode.CommandFailed,r,i))}}))}));return{spawnedProcess:i,stdin:i.stdin,stdout:i.stdout,stderr:i.stderr,outcome:a}}killOrphanedInstrumentsProcesses(){return n(this,void 0,void 0,(function*(){const e=yield this.execToString("ps -e -o user,ppid,pid,comm");e&&e.split("\n").filter(a.notNullOrUndefined).map((e=>/^(\S+)\s+1\s+(\d+)\s+(.+)$/.exec(e))).filter(a.notNullOrUndefined).filter((e=>e[1]===process.env.USER)).filter((e=>e[3]&&["/instruments","/DTServiceHub"].some((t=>e[3].endsWith(t))))).forEach((e=>{const t=e[2];console.debug(`Killing orphaned Instruments process: ${t}`),c.kill(parseInt(t,10),"SIGKILL")}))}))}}t.ChildProcess=l,l.ERROR_TIMEOUT_MILLISECONDS=300},9452:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.FileSystem=void 0;const i=r(5747),o=r(5622),s=r(1890);t.FileSystem=class{constructor({fs:e=i}={}){this.fs=e}ensureDirectory(e){return n(this,void 0,void 0,(function*(){try{if(!(yield this.stat(e)).isDirectory())throw new Error(`Expected ${e} to be a directory`)}catch(t){if(t&&"ENOENT"===t.code)return this.mkDir(e);throw t}}))}ensureFileWithContents(e,t){return n(this,void 0,void 0,(function*(){try{if(!(yield this.stat(e)).isFile())throw new Error(`Expected ${e} to be a file`);{const r=yield this.readFile(e);if(t!==r)return this.writeFile(e,t)}}catch(r){if(r&&"ENOENT"===r.code)return this.writeFile(e,t);throw r}}))}existsSync(e){return this.fs.existsSync(e)}exists(e){return n(this,void 0,void 0,(function*(){try{return yield this.stat(e),!0}catch(e){return!1}}))}readDir(e){return this.fs.promises.readdir(e)}makeDirectoryRecursiveSync(e){let t=o.dirname(e);this.existsSync(t)||this.makeDirectoryRecursiveSync(t),this.fs.mkdirSync(e)}copyFile(e,t){return this.fs.promises.copyFile(e,t)}deleteFileIfExistsSync(e){this.existsSync(e)&&this.fs.unlinkSync(e)}readFile(e,t="utf8"){return this.fs.promises.readFile(e,{encoding:t})}writeFile(e,t){return this.fs.promises.writeFile(e,t)}static writeFileToFolder(e,t,r){return i.existsSync(e)||s.sync(e),i.promises.writeFile(o.join(e,t),r)}unlink(e){return this.fs.promises.unlink(e)}mkDir(e){return this.fs.promises.mkdir(e)}stat(e){return this.fs.promises.stat(e)}directoryExists(e){return n(this,void 0,void 0,(function*(){try{return(yield this.stat(e)).isDirectory()}catch(e){if("ENOENT"===e.code)return!1;throw e}}))}rmdir(e){return this.fs.promises.rmdir(e)}removePathRecursivelyAsync(e){return n(this,void 0,void 0,(function*(){if(yield this.exists(e)){if(!(yield this.stat(e)).isDirectory())return this.unlink(e);{const t=yield this.readDir(e);yield Promise.all(t.map((t=>this.removePathRecursivelyAsync(o.join(e,t))))),yield this.rmdir(e)}}}))}removePathRecursivelySync(e){if(this.fs.existsSync(e)){if(this.fs.statSync(e).isDirectory()){this.fs.readdirSync(e).forEach((t=>this.removePathRecursivelySync(o.join(e,t)))),this.fs.rmdirSync(e)}else this.fs.unlinkSync(e)}}}},3116:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Node=void 0;const n=r(5640),i=r(9452);!function(e){e.ChildProcess=n.ChildProcess,e.FileSystem=i.FileSystem}(t.Node||(t.Node={}))},1506:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Package=void 0;const i=r(5622),o=r(9452),s=r(9897),a=r(312);class c{constructor(e,{fileSystem:t=new o.FileSystem}={}){this.INFORMATION_PACKAGE_FILENAME="package.json",this.DEPENDENCIES_SUBFOLDER="node_modules",this._path=e,this.fileSystem=t}getPackageVersionFromNodeModules(e){return this.dependencyPackage(e).version()}parsePackageInformation(){return n(this,void 0,void 0,(function*(){const e=yield this.fileSystem.readFile(this.informationJsonFilePath(),"utf8");return JSON.parse(e.toString())}))}name(){return this.parseProperty("name")}dependencies(){return this.parseProperty("dependencies")}devDependencies(){return this.parseProperty("devDependencies")}version(){return n(this,void 0,void 0,(function*(){const e=yield this.parseProperty("version");if("string"==typeof e)return e;throw s.ErrorHelper.getInternalError(a.InternalErrorCode.CouldNotParsePackageVersion,this.informationJsonFilePath(),e)}))}setMainFile(e){return n(this,void 0,void 0,(function*(){const t=yield this.parsePackageInformation();return t.main=e,this.fileSystem.writeFile(this.informationJsonFilePath(),JSON.stringify(t))}))}dependencyPath(e){return i.resolve(this._path,this.DEPENDENCIES_SUBFOLDER,e)}dependencyPackage(e){return new c(this.dependencyPath(e),{fileSystem:this.fileSystem})}informationJsonFilePath(){return i.resolve(this._path,this.INFORMATION_PACKAGE_FILENAME)}parseProperty(e){return n(this,void 0,void 0,(function*(){return(yield this.parsePackageInformation())[e]}))}}t.Package=c},8102:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseUtil=void 0;class n{static forEach(e,t){return r(this,void 0,void 0,(function*(){yield Promise.all(e.map((e=>t(e))))}))}static retryAsync(e,t,r,n,i,o){return this.retryAsyncIteration(e,t,r,0,n,i,o)}static reduce(e,t){return r(this,void 0,void 0,(function*(){let n;return n=e instanceof Promise?yield e:e,n.reduce(((e,n)=>r(this,void 0,void 0,(function*(){return yield e,t(n)}))),Promise.resolve())}))}static delay(e){return r(this,void 0,void 0,(function*(){return new Promise((t=>setTimeout(t,e)))}))}static promiseCacheDecorator(e,t=null){let r;return(...n)=>(r||(r=e.apply(t,n)),r)}static retryAsyncIteration(e,t,i,o,s,a,c){return r(this,void 0,void 0,(function*(){const r=yield e();if(yield t(r))return r;if(o<i&&(!c||!c.token.isCancellationRequested))return yield n.delay(s),this.retryAsyncIteration(e,t,i,o+1,s,a,c);throw new Error(a)}))}}t.PromiseUtil=n},5773:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Request=void 0;const n=r(8605),i=r(7211);t.Request=class{static request(e,t=!1,r=!1){return new Promise(((o,s)=>{(r?i:n).get(e,(function(e){let r="";e.on("data",(e=>{r+=e.toString()})),e.on("end",(()=>{t&&200!==e.statusCode?s(new Error(r)):o(r)}))})).on("error",(e=>{s(e)}))}))}}},5643:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isInstalled=t.openssl=void 0;const n=r(289),i=r(3129);t.openssl=function(e,t){return new Promise(((r,i)=>{n.exec(e,t,((e,t)=>{e?i(e):t&&r(t.toString())}))}))},t.isInstalled=function(){return!i.spawnSync("openssl",["version"]).error}},4191:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.OutputVerifier=void 0;const i=r(9897),o=r(312);t.OutputVerifier=class{constructor(e,t,r){this.output="",this.errors="",this.generatePatternsForSuccess=e,this.generatePatternToFailure=t,this.platformName=r}process(e){return n(this,void 0,void 0,(function*(){let t;this.store(e.stdout,(e=>this.output+=e)),this.store(e.stderr,(e=>this.errors+=e));try{yield e.outcome}catch(e){t=e}const r=yield this.generatePatternToFailure(),n=this.findAnyFailurePattern(r);if(n){if(t)throw t.message+="\n"+n.message,t;throw n}if(t)throw t;{const e=yield this.generatePatternsForSuccess();if(!this.areAllSuccessPatternsPresent(e))throw i.ErrorHelper.getInternalError(o.InternalErrorCode.NotAllSuccessPatternsMatched,this.platformName,this.platformName)}}))}store(e,t){e.on("data",(e=>{t(e.toString())}))}findAnyFailurePattern(e){const t=this.errors+this.output;let r;const n=e.find((e=>e.pattern instanceof RegExp?(r=t.match(e.pattern),r&&r.length):-1!==t.indexOf(e.pattern))),o=n?n.errorCode:null;return o?r&&r.length?(r=r.map((e=>e.trim())),i.ErrorHelper.getInternalError(o,r.join("\n"))):i.ErrorHelper.getInternalError(o):null}areAllSuccessPatternsPresent(e){return e.every((e=>new RegExp(e,"i").test(this.output)))}}},7670:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.PackageLoader=t.PackageConfig=void 0;const i=r(9144),o=r(5458),s=r(6727),a=r(9185),c=r(1376),l=r(5622),u=r(8280),d=r(8102);t.PackageConfig=class{constructor(e,t,r){this.packageName=e,this.version=t,this.requirePath=r}getPackageName(){return this.packageName}getRequirePath(){return this.requirePath}getVersion(e=!1){return e?this.version?`@${this.version}`:"":this.version}getStringForInstall(){return this.packageName+this.getVersion(!0)}getStringForRequire(){return this.packageName+(this.requirePath?`/${this.requirePath}`:"")}};class h{constructor(){this.logger=i.OutputChannelLogger.getMainChannel(),this.packagesQueue=[],this.requireQueue=[],this.isCommandsExecuting=!1}static getInstance(){return this.instance||(this.instance=new h),this.instance}installGlobalPackage(e,t){const r=u.AppLauncher.getNodeModulesRootByProjectPath(t);return new o.CommandExecutor(r,t,this.logger).spawnWithProgress(c.HostPlatform.getNpmCliCommand("npm"),["install","-g",e.getStringForInstall(),"--verbose"],{verbosity:o.CommandVerbosity.PROGRESS})}generateGetPackageFunction(e,...t){return d.PromiseUtil.promiseCacheDecorator((()=>this.loadPackage(e,...t)))}getUniquePackages(e){return[...new Set(e).values()]}getTryToRequireFunction(e,t,r){return n=>{let i=!1;return n&&n.includes(e.getStringForInstall())&&(i=!0),this.tryToRequire(e,t,r,i)}}tryToRequire(e,t,r,i){return n(this,void 0,void 0,(function*(){const n=e.getStringForRequire();try{if(this.logger.debug(`Getting ${n} dependency.`),e.getVersion()){const t=yield a.getVersionFromExtensionNodeModules(e.getPackageName());if(e.getVersion()!==t){if(i)throw"The installed version of the package is different from the required one";return this.logger.debug(`Dependency ${n} is present with another version. Retry after install this package with specific version...`),!1}}const r=s.default(n);return t(r),!0}catch(e){return i||"MODULE_NOT_FOUND"!==e.code?(r(e),!0):(this.logger.debug(`Dependency ${n} is not present. Retry after install...`),!1)}}))}tryToRequireAfterInstall(e,t,...r){return n(this,void 0,void 0,(function*(){if(this.packagesQueue.push(t.getStringForInstall()),r.forEach((e=>{this.packagesQueue.push(e.getStringForInstall())})),this.requireQueue.push(e),!this.isCommandsExecuting){this.isCommandsExecuting=!0;const t=l.dirname(a.findFileInFolderHierarchy(__dirname,"package.json")||__dirname),r=new o.CommandExecutor(l.join(t,"node_modules"),t,this.logger);for(;this.packagesQueue.length;){this.packagesQueue=this.getUniquePackages(this.packagesQueue);const t=this.packagesQueue.length,n=this.packagesQueue.slice(0,t);yield r.spawnWithProgress(c.HostPlatform.getNpmCliCommand("npm"),["install",...n,"--verbose","--no-save","--global-style"],{verbosity:o.CommandVerbosity.PROGRESS});const i=[];for(e of this.requireQueue)(yield e(n))&&i.push(e);i.forEach((e=>{const t=this.requireQueue.indexOf(e);t>-1&&this.requireQueue.splice(t,1)})),this.requireQueue.length?(this.packagesQueue=this.getUniquePackages(this.packagesQueue),n.forEach((e=>{const t=this.packagesQueue.findIndex((t=>t===e));-1!==t&&this.packagesQueue.splice(t,1)}))):this.packagesQueue=[]}this.isCommandsExecuting=!1}}))}loadPackage(e,...t){return n(this,void 0,void 0,(function*(){return new Promise(((r,i)=>n(this,void 0,void 0,(function*(){const n=this.getTryToRequireFunction(e,r,i);(yield n())||this.tryToRequireAfterInstall(n,e,...t).catch((e=>i(e)))}))))}))}}t.PackageLoader=h},9208:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Packager=void 0;const i=r(7599),o=r(7005),s=r(5458),a=r(973),c=r(9897),l=r(312),u=r(9144),d=r(1506),h=r(5773),p=r(9327),f=r(5034),g=r(2463),m=r(8280),_=r(5622),E=r(7361),v=r(6625),y=r(7549),S=r(3403),b=r(9185),T=r(9452),P=r(8102),A=r(4800);S.config({messageFormat:S.MessageFormat.bundle,bundleFormat:S.BundleFormat.standalone})(r(5622).join(__dirname,"src\\common\\packager.ts"));const w=S.loadMessageBundle(r(5622).join(__dirname,"src\\common\\packager.ts"));class R{constructor(e,t,r,n){this.workspacePath=e,this.projectPath=t,this.packagerPort=r,this.logger=u.OutputChannelLogger.getChannel(u.OutputChannelLogger.MAIN_CHANNEL_NAME,!0),this.packagerStatus=f.PackagerStatus.PACKAGER_STOPPED,this.packagerStatusIndicator=n||new f.PackagerStatusIndicator(t)}setExponentHelper(e){this.expoHelper=e}getExponentHelper(){return this.expoHelper||(this.expoHelper=new a.ExponentHelper(this.workspacePath,this.projectPath)),this.expoHelper}getPort(){return this.packagerPort||g.SettingsHelper.getPackagerPort(this.workspacePath)}setRunOptions(e){this.runOptions=e}static getHostForPort(e){return`localhost:${e}`}getStatusIndicator(){return this.packagerStatusIndicator}getHost(){return R.getHostForPort(this.getPort())}getPackagerStatus(){return this.packagerStatus}getProjectPath(){return this.projectPath}getPackagerArgs(e,t,r=!1){return n(this,void 0,void 0,(function*(){let n=["--port",this.getPort().toString()];r&&(n=n.concat("--resetCache"));if(yield this.getExponentHelper().isExpoManagedApp(!1)){v.gte(t,"0.57.0")||n.push("--root",_.relative(this.projectPath,_.resolve(this.workspacePath,".vscode")));try{const t=yield this.getExponentHelper().getExpPackagerOptions(e);Object.keys(t).forEach((e=>{n=n.concat([`--${e}`,t[e]])}))}catch(e){this.logger.warning(w(0,null))}}return n}))}start(e=!1){return n(this,void 0,void 0,(function*(){this.packagerStatusIndicator.updatePackagerStatus(f.PackagerStatus.PACKAGER_STARTING);let t,r=!1;if(!(yield this.isRunning())){r=!0;t=(yield p.ProjectVersionHelper.getReactNativeVersions(this.projectPath)).reactNativeVersion,yield this.monkeyPatchOpnForRNPackager(t);const n=yield this.getPackagerArgs(this.projectPath,t,e),i=["0.38.0","0.39.0","0.40.0"];let a=Object.assign({},process.env);if(delete a.CI,this.runOptions&&(this.runOptions.env||this.runOptions.envFile))a=o.GeneralPlatform.getEnvArgument(a,this.runOptions.env,this.runOptions.envFile);else{const e=_.join(this.getProjectPath(),".env");a=o.GeneralPlatform.getEnvArgument(a,null,e)}let c=Object.assign({},a,{REACT_DEBUGGER:"echo A debugger is not needed: ",REACT_EDITOR:i.indexOf(t)<0?"code":this.openFileAtLocationCommand()});this.logger.info(w(1,null));let l={env:c};const u=m.AppLauncher.getNodeModulesRootByProjectPath(this.projectPath),d=new s.CommandExecutor(u,this.projectPath,this.logger).spawnReactPackager(n,l);this.packagerProcess=d.spawnedProcess,d.outcome.then((()=>{}),(()=>{}))}if(yield this.awaitStart(),r)this.logger.info(w(2,null)),this.packagerStatus=f.PackagerStatus.PACKAGER_STARTED,y.commands.executeCommand("setContext",A.CONTEXT_VARIABLES_NAMES.IS_RN_PACKAGER_RUNNING,!0);else if(this.logger.info(w(3,null)),!this.packagerProcess)return this.logger.warning(c.ErrorHelper.getWarning(w(4,null))),void this.setPackagerStopStateUI();this.packagerStatusIndicator.updatePackagerStatus(f.PackagerStatus.PACKAGER_STARTED)}))}stop(e=!1){return n(this,void 0,void 0,(function*(){this.packagerStatusIndicator.updatePackagerStatus(f.PackagerStatus.PACKAGER_STOPPING);let t=!1;return(yield this.isRunning())?this.packagerProcess?(yield this.killPackagerProcess(),t=!0):e||this.logger.warning(c.ErrorHelper.getWarning(w(5,null))):(e||this.logger.warning(c.ErrorHelper.getWarning(w(6,null))),t=!0),this.setPackagerStopStateUI(),y.commands.executeCommand("setContext",A.CONTEXT_VARIABLES_NAMES.IS_RN_PACKAGER_RUNNING,!1),t}))}restart(e){return n(this,void 0,void 0,(function*(){if(this.getPort()&&this.getPort()!==e)throw c.ErrorHelper.getInternalError(l.InternalErrorCode.PackagerRunningInDifferentPort,e,this.getPort());(yield this.stop())&&(yield this.start(!0))}))}prewarmBundleCache(e){return n(this,void 0,void 0,(function*(){if(e!==i.PlatformType.Exponent&&(yield this.isRunning())){const t=_.resolve(this.projectPath,"index.js"),r=_.resolve(this.projectPath,`index.${e}.js`);try{const[n,i]=yield Promise.all([R.fs.exists(t),R.fs.exists(r)]);let o="";if(n)o="index.bundle";else{if(!i)return void this.logger.info(w(7,null,e));o=`index.${e}.bundle`}const s=`http://${this.getHost()}/${o}?platform=${e}`;this.logger.info(w(8,null,s)),yield h.Request.request(s,!0),this.logger.warning(w(9,null))}catch(e){}}}))}isRunning(){return n(this,void 0,void 0,(function*(){let e=`http://${this.getHost()}/status`;try{return"packager-status:running"===(yield h.Request.request(e))}catch(e){return!1}}))}awaitStart(e=60,t=3e3){return n(this,void 0,void 0,(function*(){try{yield P.PromiseUtil.retryAsync((()=>this.isRunning()),(e=>e),e,t,w(10,null))}catch(e){throw this.setPackagerStopStateUI(),e}}))}findOpnPackage(e){return n(this,void 0,void 0,(function*(){try{let t;t=v.gte(e,R.RN_VERSION_WITH_OPEN_PKG)?R.OPN_PACKAGE_NAME.new:R.OPN_PACKAGE_NAME.old;const r=m.AppLauncher.getNodeModulesRootByProjectPath(this.projectPath);let i=_.resolve(r,R.NODE_MODULES_FODLER_NAME,t,R.OPN_PACKAGE_MAIN_FILENAME),o=_.resolve(r,R.NODE_MODULES_FODLER_NAME,R.REACT_NATIVE_PACKAGE_NAME,R.NODE_MODULES_FODLER_NAME,t,R.OPN_PACKAGE_MAIN_FILENAME),s=new T.FileSystem,a=[i,o];const u=(yield Promise.all(a.map((e=>n(this,void 0,void 0,(function*(){return(yield s.exists(e))?e:""})))))).find((e=>!!e));if(u)return u;throw c.ErrorHelper.getInternalError(l.InternalErrorCode.OpnPackagerLocationNotFound)}catch(e){throw c.ErrorHelper.getInternalError(l.InternalErrorCode.OpnPackagerNotFound,e)}}))}monkeyPatchOpnForRNPackager(e){return n(this,void 0,void 0,(function*(){let t,r;r=yield this.findOpnPackage(e),t=new d.Package(_.resolve(_.dirname(r)));const n=yield t.parsePackageInformation();let i,o;if(o=v.gte(e,R.RN_VERSION_WITH_OPEN_PKG)?R.JS_INJECTOR_FILENAME.new:R.JS_INJECTOR_FILENAME.old,i=_.resolve(R.JS_INJECTOR_DIRPATH,o),n.main!==o)return yield(new T.FileSystem).copyFile(i,_.resolve(_.dirname(r),o)),t.setMainFile(o)}))}setPackagerStopStateUI(){this.packagerStatus=f.PackagerStatus.PACKAGER_STOPPED,this.packagerStatusIndicator.updatePackagerStatus(f.PackagerStatus.PACKAGER_STOPPED)}killPackagerProcess(){return n(this,void 0,void 0,(function*(){this.logger.info(w(11,null));const e=m.AppLauncher.getNodeModulesRootByProjectPath(this.projectPath);if(yield new s.CommandExecutor(e,this.projectPath,this.logger).killReactPackager(this.packagerProcess),this.packagerProcess=void 0,yield new a.ExponentHelper(this.workspacePath,this.projectPath).isExpoManagedApp(!1)){this.logger.debug("Stopping Exponent");try{yield E.stopAll(this.projectPath),this.logger.debug("Exponent Stopped")}catch(e){if("NOT_LOGGED_IN"!==e.code)throw e}}}))}openFileAtLocationCommand(){let e="node "+_.join(__dirname,"..","..","scripts","atom");return"win32"===process.platform?e.replace(/\\/g,"/"):e}}t.Packager=R,R.DEFAULT_PORT=8081,R.JS_INJECTOR_FILENAME={new:"open-main.js",old:"opn-main.js"},R.RN_VERSION_WITH_OPEN_PKG="0.60.0",R.JS_INJECTOR_DIRPATH=b.findFileInFolderHierarchy(__dirname,"js-patched")||__dirname,R.NODE_MODULES_FODLER_NAME="node_modules",R.OPN_PACKAGE_NAME={new:"open",old:"opn"},R.REACT_NATIVE_PACKAGE_NAME="react-native",R.OPN_PACKAGE_MAIN_FILENAME="index.js",R.fs=new T.FileSystem},3188:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ensurePackagerRunning=void 0;const i=r(5773);t.ensurePackagerRunning=function(e,t,r){return n(this,void 0,void 0,(function*(){let n=`http://${e}:${t}/status`;try{if("packager-status:running"!==(yield i.Request.request(n,!0)))return Promise.reject()}catch(e){throw r}}))}},9327:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectVersionHelper=t.REACT_NATIVE_PACKAGES=void 0;const i=r(6625),o=r(8835),s=r(1506),a=r(9897),c=r(312),l=r(2966),u=r(7599),d=r(8280);t.REACT_NATIVE_PACKAGES={REACT_NATIVE:{packageName:"react-native",useSemverCoerce:!0},REACT_NATIVE_WINDOWS:{packageName:"react-native-windows",useSemverCoerce:!1},REACT_NATIVE_MACOS:{packageName:"react-native-macos",useSemverCoerce:!1}};class h{static getRNVersionsWithBrokenMetroBundler(){return["0.54.0","0.54.1","0.54.2","0.54.3","0.54.4"]}static getReactNativeVersions(e,t,r){return n(this,void 0,void 0,(function*(){r||(r=d.AppLauncher.getNodeModulesRootByProjectPath(e));try{return yield h.getReactNativePackageVersionsFromNodeModules(r,t)}catch(r){return h.getReactNativeVersionsFromProjectPackage(e,t)}}))}static tryToGetRNSemverValidVersionsFromProjectPackage(e,t,r){return n(this,void 0,void 0,(function*(){const n=yield h.getReactNativeVersionsFromProjectPackage(e,t);if(-1===Object.values(n).findIndex((e=>e.includes(this.SEMVER_INVALID))))return n;r||(r=d.AppLauncher.getNodeModulesRootByProjectPath(e));try{return yield h.getReactNativePackageVersionsFromNodeModules(r,t)}catch(e){return n}}))}static generateAdditionalPackagesToCheckByPlatform(e){let r=[];return e.platform===u.PlatformType.Windows&&r.push(t.REACT_NATIVE_PACKAGES.REACT_NATIVE_WINDOWS),e.platform===u.PlatformType.macOS&&r.push(t.REACT_NATIVE_PACKAGES.REACT_NATIVE_MACOS),r}static generateAllAdditionalPackages(){return[t.REACT_NATIVE_PACKAGES.REACT_NATIVE_WINDOWS,t.REACT_NATIVE_PACKAGES.REACT_NATIVE_MACOS]}static getReactNativePackageVersionsFromNodeModules(e,r){return n(this,void 0,void 0,(function*(){let n=[t.REACT_NATIVE_PACKAGES.REACT_NATIVE];r&&n.push(...r);let i=[];n.forEach((t=>{i.push(h.getProcessedVersionFromNodeModules(e,t))}));const o=(yield Promise.all(i)).reduce(((e,t)=>Object.assign(e,t)),{});if(h.isVersionError(o["react-native"]))throw a.ErrorHelper.getInternalError(c.InternalErrorCode.ReactNativePackageIsNotInstalled);return{reactNativeVersion:o["react-native"],reactNativeWindowsVersion:o["react-native-windows"]||l.RN_VERSION_ERRORS.MISSING_PACKAGE_IN_NODE_MODULES,reactNativeMacOSVersion:o["react-native-macos"]||l.RN_VERSION_ERRORS.MISSING_PACKAGE_IN_NODE_MODULES}}))}static getReactNativeVersionsFromProjectPackage(e,r){return n(this,void 0,void 0,(function*(){let n=[t.REACT_NATIVE_PACKAGES.REACT_NATIVE];r&&n.push(...r);const i=new s.Package(e);try{const e=yield i.dependencies(),t=yield i.devDependencies();let r={};return n.forEach((n=>{try{e[n.packageName]?r[n.packageName]=h.processVersion(e[n.packageName],n.useSemverCoerce):t[n.packageName]?r[n.packageName]=h.processVersion(t[n.packageName],n.useSemverCoerce):r[n.packageName]=l.RN_VERSION_ERRORS.MISSING_DEPENDENCY_IN_PROJECT_PACKAGE_FILE}catch(e){r[n.packageName]=l.RN_VERSION_ERRORS.MISSING_DEPENDENCIES_FIELDS_IN_PROJECT_PACKAGE_FILE}})),{reactNativeVersion:r["react-native"],reactNativeWindowsVersion:r["react-native-windows"]||l.RN_VERSION_ERRORS.MISSING_PACKAGE_IN_NODE_MODULES,reactNativeMacOSVersion:r["react-native-macos"]||l.RN_VERSION_ERRORS.MISSING_PACKAGE_IN_NODE_MODULES}}catch(e){return{reactNativeVersion:l.RN_VERSION_ERRORS.UNKNOWN_ERROR,reactNativeWindowsVersion:l.RN_VERSION_ERRORS.UNKNOWN_ERROR,reactNativeMacOSVersion:l.RN_VERSION_ERRORS.UNKNOWN_ERROR}}}))}static isVersionError(e){return e.toLowerCase().includes("error")}static processVersion(e,t=!0){try{return new o.URL(e)&&`${this.SEMVER_INVALID}: URL`}catch(r){let n;return n=t?i.coerce(e):i.clean(e.replace(/[\^~<>]/g,""),{loose:!0}),n&&n.toString()||this.SEMVER_INVALID}}static getProcessedVersionFromNodeModules(e,t){return n(this,void 0,void 0,(function*(){try{const r=yield new s.Package(e).getPackageVersionFromNodeModules(t.packageName);return{[t.packageName]:h.processVersion(r,t.useSemverCoerce)}}catch(e){return{[t.packageName]:l.RN_VERSION_ERRORS.MISSING_PACKAGE_IN_NODE_MODULES}}}))}}t.ProjectVersionHelper=h,h.SEMVER_INVALID="SemverInvalid"},7551:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ReactNativeProjectHelper=void 0;const i=r(5747),o=r(5622),s=r(9327);t.ReactNativeProjectHelper=class{static isReactNativeProject(e){return n(this,void 0,void 0,(function*(){if(!e||!i.existsSync(o.join(e,"package.json")))return!1;const t=yield s.ProjectVersionHelper.getReactNativeVersions(e,void 0,e);return!s.ProjectVersionHelper.isVersionError(t.reactNativeVersion)}))}static isHaulProject(e){const t=o.join(e,"package.json");if(!e||!i.existsSync(t))return!1;const r=JSON.parse(i.readFileSync(t,"utf-8"));return!!(r.devDependencies&&(r.devDependencies.haul||r.devDependencies["@haul-bundler/cli"]))}static isAndroidHermesEnabled(e){const t=o.join(e,"android","app","build.gradle");if(!e||!i.existsSync(t))return!1;const r=i.readFileSync(t,"utf-8");return/enableHermes\s*:\s*true/.test(r)}static isIOSHermesEnabled(e){const t=o.join(e,"ios","Podfile");if(!e||!i.existsSync(t))return!1;const r=i.readFileSync(t,"utf-8").match(/#?\s*:hermes_enabled\s*=>\s*true/);return!(!r||r[0].startsWith("#"))}static isMacOSHermesEnabled(e){const t=o.join(e,"macos","Podfile");if(!e||!i.existsSync(t))return!1;const r=i.readFileSync(t,"utf-8");let n=r.match(/#?\s*:hermes_enabled\s*=>\s*(true|false)/);return n&&n.length>1?!n[0].startsWith("#")&&"true"===n[1]:(n=r.match(/#?\s*pod\s*'hermes'/),!(!n||n[0].startsWith("#")))}static isWindowsHermesEnabled(e){const t=o.join(e,"windows","ExperimentalFeatures.props");if(!e||!i.existsSync(t))return!1;const r=i.readFileSync(t,"utf-8");return/<UseHermes>\s*true\s*<\/UseHermes>/.test(r)}}},4724:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TargetPlatformHelper=t.TargetPlatformId=void 0;const n=r(2087),i=r(9897),o=r(1376),s=r(312),a=r(7599);var c;!function(e){e[e.ANDROID=0]="ANDROID",e[e.IOS=1]="IOS",e[e.EXPONENT=2]="EXPONENT",e[e.WINDOWS=3]="WINDOWS",e[e.MACOS=4]="MACOS"}(c=t.TargetPlatformId||(t.TargetPlatformId={}));class l{static getTargetPlatformId(e){switch(e.toLowerCase()){case a.PlatformType.Android:return c.ANDROID;case a.PlatformType.iOS:return c.IOS;case a.PlatformType.Exponent:return c.EXPONENT;case a.PlatformType.Windows:return c.WINDOWS;case a.PlatformType.macOS:return c.MACOS;default:throw i.ErrorHelper.getInternalError(s.InternalErrorCode.PlatformNotSupported,e,n.platform())}}static checkTargetPlatformSupport(e){let t=l.getTargetPlatformId(e);if(!o.HostPlatform.isCompatibleWithTarget(t))throw i.ErrorHelper.getInternalError(s.InternalErrorCode.PlatformNotSupported,e,n.platform())}}t.TargetPlatformHelper=l},4301:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Telemetry=void 0;const n=r(6417),i=r(5747),o=r(5622),s=r(1376);!function(e){e.isOptedIn=!1,e.reporterDictionary={};class t{static get telemetrySettingsFile(){let e=s.HostPlatform.getSettingsHome();return o.join(e,t.TELEMETRY_SETTINGS_FILENAME)}static init(r,n){t.loadSettings(),e.reporter=n,e.isOptedIn=t.getTelemetryOptInSetting(),t.saveSettings()}static getTelemetryOptInSetting(){return void 0===t.telemetrySettings.optIn&&(t.telemetrySettings.optIn=!0),t.telemetrySettings.optIn}static loadSettings(){try{t.telemetrySettings=JSON.parse(i.readFileSync(t.telemetrySettingsFile))}catch(e){t.telemetrySettings={}}return t.telemetrySettings}static saveSettings(){let e=s.HostPlatform.getSettingsHome();i.existsSync(e)||i.mkdirSync(e),i.writeFileSync(t.telemetrySettingsFile,JSON.stringify(t.telemetrySettings))}}t.TELEMETRY_SETTINGS_FILENAME="VSCodeTelemetrySettings.json";class a{constructor(e,t){this.name=e,this.properties=t||{}}setPiiProperty(e,t){let r=n.createHmac("sha256",new Buffer(a.PII_HASH_KEY,"utf8")).update(t).digest("hex");this.properties[e]=r}}a.PII_HASH_KEY="959069c9-9e93-4fa1-bf16-3f8120d7db0c",e.TelemetryEvent=a;class c extends a{constructor(e,t){super(e,t),this.start()}start(){this.startTime=process.hrtime()}end(){this.endTime||(this.endTime=process.hrtime(this.startTime),this.properties["reserved.activity.duration"]=1e3*this.endTime[0]+this.endTime[1]/1e6)}}e.TelemetryActivity=c,e.init=function(r,n,i){try{e.appName=r,t.init(n,i)}catch(e){console.error(e)}},e.send=function(t,r=!1){if(e.isOptedIn||r)try{if(t instanceof c&&t.end(),e.reporter){let r={},n={};Object.keys(t.properties||{}).forEach((function(e){switch(typeof t.properties[e]){case"string":r[e]=t.properties[e];break;case"number":n[e]=t.properties[e];break;default:r[e]=JSON.stringify(t.properties[e])}})),e.reporter.sendTelemetryEvent(t.name,r,n)}}catch(e){console.error(e)}},e.APPINSIGHTS_INSTRUMENTATIONKEY="AIF-d9b70cd4-b9f9-4d70-929b-a071c400b217",e.sendExtensionTelemetry=function(t,n,i,o,s,a){let c=e.reporterDictionary[t];if(!c){let o=r(4398).Z;e.reporterDictionary[t]=new o(t,n,i),c=e.reporterDictionary[t]}c.sendTelemetryEvent(o,s,a)}}(t.Telemetry||(t.Telemetry={}))},287:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryGenerator=t.TelemetryGeneratorBase=void 0;const i=r(312),o=r(4301),s=r(3821);class a{constructor(e,t={}){this.telemetryProperties={},this.currentStep="initialStep",this.errorIndex=-1,this.extendedTelemetryProperties={},this.componentName=e,this.extendedTelemetryProperties=t,this.currentStepStartTime=process.hrtime()}add(e,t,r){return this.addWithPiiEvaluator(e,t,(()=>r))}addWithPiiEvaluator(e,t,r){try{Array.isArray(t)?this.addArray(e,t,r):!t||"object"!=typeof t&&"function"!=typeof t?this.addString(e,String(t),r):this.addHash(e,t,r)}catch(t){this.addString("telemetryGenerationError."+e,String(t),(()=>!1))}return this}addError(e){const t=e.errorCode||i.InternalErrorCode.UnknownError;return this.add("error.code"+ ++this.errorIndex,t,!1),this}time(e,t){return n(this,void 0,void 0,(function*(){let r=process.hrtime();try{const n=t();return yield n}catch(e){return this.addError(e),Promise.reject(e)}finally{this.finishTime(e,r)}}))}step(e){return this.finishTime(this.currentStep,this.currentStepStartTime),this.sendCurrentStep(),this.currentStep=e,this.telemetryProperties={},this.currentStepStartTime=process.hrtime(),this}send(){this.currentStep&&this.add("lastStepExecuted",this.currentStep,!1),this.step("")}sendCurrentStep(){this.add("step",this.currentStep,!1);let e=new o.Telemetry.TelemetryEvent(this.componentName);s.TelemetryHelper.addTelemetryEventProperties(e,Object.assign(this.telemetryProperties,this.extendedTelemetryProperties)),this.sendTelemetryEvent(e)}addArray(e,t,r){let n=1;t.forEach((t=>this.addWithPiiEvaluator(e+n++,t,r)))}addHash(e,t,r){Object.keys(t).forEach((n=>this.addWithPiiEvaluator(e+"."+n,t[n],r)))}addString(e,t,r){this.telemetryProperties[e]=s.TelemetryHelper.telemetryProperty(t,r(t,e))}combine(...e){return e.filter((e=>!!e)).join(".")}finishTime(e,t){if(e){let r=process.hrtime(t);this.add(this.combine(e,"time"),String(1e3*r[0]+r[1]/1e6),!1)}}}t.TelemetryGeneratorBase=a;t.TelemetryGenerator=class extends a{sendTelemetryEvent(e){o.Telemetry.send(e)}}},3821:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryHelper=void 0;const n=r(4301),i=r(287),o=r(7599),s=r(9327),a=r(9897),c=r(312);class l{static sendSimpleEvent(e,t){const r=l.createTelemetryEvent(e,t);n.Telemetry.send(r)}static createTelemetryEvent(e,t){return new n.Telemetry.TelemetryEvent(e,t)}static telemetryProperty(e,t){return{value:String(e),isPii:t||!1}}static addPropertyToTelemetryProperties(e,t,r={}){return r[t]={value:e,isPii:!1},r}static addPlatformPropertiesToTelemetryProperties(e,t,r){if(r=l.addPropertyToTelemetryProperties(t.reactNativeVersion,"reactNativeVersion",r),e.platform===o.PlatformType.Windows){if(s.ProjectVersionHelper.isVersionError(t.reactNativeWindowsVersion))throw a.ErrorHelper.getInternalError(c.InternalErrorCode.ReactNativeWindowsIsNotInstalled);r=l.addPropertyToTelemetryProperties(t.reactNativeWindowsVersion,"reactNativeWindowsVersion",r)}if(e.platform===o.PlatformType.macOS){if(s.ProjectVersionHelper.isVersionError(t.reactNativeMacOSVersion))throw a.ErrorHelper.getInternalError(c.InternalErrorCode.ReactNativemacOSIsNotInstalled);r=l.addPropertyToTelemetryProperties(t.reactNativeMacOSVersion,"reactNativeMacOSVersion",r)}return e.platform===o.PlatformType.Exponent&&(r=l.addPropertyToTelemetryProperties(e.expoHostType,"expoHostType",r)),r}static addTelemetryEventProperties(e,t){t&&Object.keys(t).forEach((function(r){l.addTelemetryEventProperty(e,r,t[r].value,t[r].isPii)}))}static sendErrorEvent(e,t,r){const i=l.createTelemetryEvent(e);l.addTelemetryEventErrorProperty(i,t,r,""),n.Telemetry.send(i)}static sendDirect(e,t){const r=l.createTelemetryEvent(e,{isDirect:!0});t&&l.addTelemetryEventProperties(r,t),n.Telemetry.send(r)}static sendCommandSuccessTelemetry(e,t,r=[]){let i=l.createBasicCommandTelemetry(e,r);l.addTelemetryEventProperties(i,t),n.Telemetry.send(i)}static addTelemetryEventProperty(e,t,r,n){Array.isArray(r)?l.addMultiValuedTelemetryEventProperty(e,t,r,n):l.setTelemetryEventProperty(e,t,r,n)}static addTelemetryEventErrorProperty(e,t,r,n=""){let i=t;i.errorCode?(this.addTelemetryEventProperty(e,`${n}error.code`,i.errorCode,!1),r&&this.addTelemetryEventProperty(e,`${n}error.message`,r,!1)):this.addTelemetryEventProperty(e,`${n}error.code`,c.InternalErrorCode.UnknownError,!1)}static addPropertiesFromOptions(e,t,r,n=[]){let i=1;return Object.keys(r).forEach((o=>{let s=r[o];Object.keys(t).indexOf(o)>=0?void 0!==s&&(e["options."+o]=this.telemetryProperty(s,n.indexOf(o)<0)):(e["unknownOption"+i+".name"]=this.telemetryProperty(o,!0),e["unknownOption"+i+++".value"]=this.telemetryProperty(s,!0))})),e}static generate(e,t={},r){let n=new i.TelemetryGenerator(e,t);return n.time("",(()=>r(n))).finally((()=>n.send()))}static createBasicCommandTelemetry(e,t=[]){let r=new n.Telemetry.TelemetryEvent(e||"command");return!e&&t&&t.length>0&&r.setPiiProperty("command",t[0]),t&&l.addTelemetryEventProperty(r,"argument",t,!0),r}static setTelemetryEventProperty(e,t,r,n){n?e.setPiiProperty(t,String(r)):e.properties[t]=String(r)}static addMultiValuedTelemetryEventProperty(e,t,r,n){for(let i=0;i<r.length;i++)l.setTelemetryEventProperty(e,t+i,r[i],n)}}t.TelemetryHelper=l},9901:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.waitUntil=t.getFormattedDatetimeString=t.getFormattedDateString=t.getFormattedTimeString=t.notNullOrUndefined=t.isNullOrUndefined=t.getFileNameWithoutExtension=t.getNodeModulesGlobalPath=t.removeModuleFromRequireCacheByName=void 0;const i=r(5622),o=r(5640),s=r(1376),a=r(6727);function c(e){return null==e}function l(e){return`${d(2,String(e.getUTCHours()))}:${d(2,String(e.getUTCMinutes()))}:${d(2,String(e.getUTCSeconds()))}`}function u(e){return e.getUTCFullYear()+"-"+`${e.getUTCMonth()+1}-`+e.getUTCDate()}function d(e,t){return t.length>=e?t:String("0".repeat(e)+t).slice(-e)}t.removeModuleFromRequireCacheByName=function(e){const t=Object.keys(a.default.cache).find((t=>t.includes(e)));t&&delete a.default.cache[t]},t.getNodeModulesGlobalPath=function(){return(new o.ChildProcess).execToString(`${s.HostPlatform.getNpmCliCommand("npm")} root -g`)},t.getFileNameWithoutExtension=function(e){return i.basename(e,i.extname(e))},t.isNullOrUndefined=c,t.notNullOrUndefined=function(e){return!c(e)},t.getFormattedTimeString=l,t.getFormattedDateString=u,t.getFormattedDatetimeString=function(e){return`${u(e)} ${l(e)}`},t.waitUntil=function(e,t=1e3,r){return new Promise((i=>n(this,void 0,void 0,(function*(){let o,s;r&&(o=setTimeout((()=>{a(),i(null)}),r));const a=()=>{o&&clearTimeout(o),s&&clearInterval(s)},c=()=>n(this,void 0,void 0,(function*(){const t=yield e();return t&&(a(),i(t)),!!t}));(yield c())||(s=setInterval((()=>n(this,void 0,void 0,(function*(){yield c()}))),t))}))))}},8126:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.MultipleLifetimesAppWorker=void 0;const i=r(5622),o=r(8777),s=r(8614),a=r(3188),c=r(9897),l=r(420),u=r(334),d=r(5734),h=r(5884),p=r(7551),f=r(3403),g=r(312),m=r(9452),_=r(8102);f.config({messageFormat:f.MessageFormat.bundle,bundleFormat:f.BundleFormat.standalone})(r(5622).join(__dirname,"src\\debugger\\appWorker.ts"));const E=f.loadMessageBundle(r(5622).join(__dirname,"src\\debugger\\appWorker.ts"));function v(e,t){const r=c.ErrorHelper.getNestedError(e,g.InternalErrorCode.DebuggingWontWorkReloadJSAndReconnect,t);l.logger.error(r.message)}class y extends s.EventEmitter{constructor(e,t,r,n,{webSocketConstructor:i=(e=>new o(e))}={}){if(super(),this.executionLimiter=new u.ExecutionsLimiter,this.nodeFileSystem=new m.FileSystem,this.packagerAddress=e.address||"localhost",this.packagerPort=e.port,this.packagerRemoteRoot=e.remoteRoot,this.packagerLocalRoot=e.localRoot,this.debuggerWorkerUrlPath=e.debuggerWorkerUrlPath,this.sourcesStoragePath=t,this.projectRootPath=r,this.cancellationToken=n,!this.sourcesStoragePath)throw c.ErrorHelper.getInternalError(g.InternalErrorCode.SourcesStoragePathIsNullOrEmpty);this.webSocketConstructor=i,this.scriptImporter=new h.ScriptImporter(this.packagerAddress,this.packagerPort,t,this.packagerRemoteRoot,this.packagerLocalRoot)}start(e=!1){return n(this,void 0,void 0,(function*(){const t=c.ErrorHelper.getInternalError(g.InternalErrorCode.CannotAttachToPackagerCheckPackagerRunningOnPort,this.packagerPort);return yield a.ensurePackagerRunning(this.packagerAddress,this.packagerPort,t),e||(yield this.downloadAndPatchDebuggerWorker()),this.createSocketToApp(e)}))}stop(){this.socketToApp&&(this.socketToApp.removeAllListeners(),this.socketToApp.close()),this.singleLifetimeWorker&&this.singleLifetimeWorker.stop()}downloadAndPatchDebuggerWorker(){return n(this,void 0,void 0,(function*(){let e=i.resolve(this.sourcesStoragePath,h.ScriptImporter.DEBUGGER_WORKER_FILENAME);yield this.scriptImporter.downloadDebuggerWorker(this.sourcesStoragePath,this.projectRootPath,this.debuggerWorkerUrlPath);const t=yield this.nodeFileSystem.readFile(e,"utf8"),r=p.ReactNativeProjectHelper.isHaulProject(this.projectRootPath),n=[y.WORKER_BOOTSTRAP,y.CONSOLE_TRACE_PATCH,y.PROCESS_TO_STRING_PATCH,r?y.FETCH_STUB:null,t,y.WORKER_DONE].join("\n");return this.nodeFileSystem.writeFile(e,n)}))}showDevMenuCommand(){this.singleLifetimeWorker&&this.singleLifetimeWorker.postMessage({method:"vscode_showDevMenu"})}reloadAppCommand(){this.singleLifetimeWorker&&this.singleLifetimeWorker.postMessage({method:"vscode_reloadApp"})}startNewWorkerLifetime(){return n(this,void 0,void 0,(function*(){this.singleLifetimeWorker=new d.ForkedAppWorker(this.packagerAddress,this.packagerPort,this.sourcesStoragePath,this.projectRootPath,(e=>{this.sendMessageToApp(e)}),this.packagerRemoteRoot,this.packagerLocalRoot),l.logger.verbose("A new app worker lifetime was created.");const e=yield this.singleLifetimeWorker.start();this.emit("connected",e)}))}createSocketToApp(e=!1){return n(this,void 0,void 0,(function*(){return new Promise(((t,r)=>{this.socketToApp=this.webSocketConstructor(this.debuggerProxyUrl()),this.socketToApp.on("open",(()=>{this.onSocketOpened()})),this.socketToApp.on("close",(()=>{this.executionLimiter.execute("onSocketClose.msg",10,(()=>{"Another debugger is already connected"===this.socketToApp._closeMessage&&r(c.ErrorHelper.getInternalError(g.InternalErrorCode.AnotherDebuggerConnectedToPackager)),l.logger.log(E(0,null))})),this.cancellationToken.isCancellationRequested||setTimeout((()=>{this.start(!0)}),100)})),this.socketToApp.on("message",(e=>this.onMessage(e))),this.socketToApp.on("error",(t=>{e&&v(c.ErrorHelper.getInternalError(g.InternalErrorCode.ReconnectionToPackagerFailedCheckForErrorsOrRestartReactNative),t),r(t)})),_.PromiseUtil.delay(300).then((()=>t()))}))}))}debuggerProxyUrl(){return`ws://${this.packagerAddress}:${this.packagerPort}/debugger-proxy?role=debugger&name=vscode`}onSocketOpened(){this.executionLimiter.execute("onSocketOpened.msg",10,(()=>l.logger.log(E(1,null))))}killWorker(){this.singleLifetimeWorker&&(this.singleLifetimeWorker.stop(),this.singleLifetimeWorker=null)}onMessage(e){try{l.logger.verbose("From RN APP: "+e);let t=JSON.parse(e);"prepareJSRuntime"===t.method?(this.killWorker(),this.gotPrepareJSRuntime(t)):"$disconnected"===t.method?this.killWorker():t.method?this.singleLifetimeWorker&&this.singleLifetimeWorker.postMessage(t):l.logger.verbose(`The react-native app sent a message without specifying a method: ${e}`)}catch(t){v(c.ErrorHelper.getInternalError(g.InternalErrorCode.FailedToProcessMessageFromReactNativeApp,e),t)}}gotPrepareJSRuntime(e){this.startNewWorkerLifetime().then((()=>{this.sendMessageToApp({replyID:parseInt(e.id,10)})}),(t=>v(c.ErrorHelper.getInternalError(g.InternalErrorCode.FailedToPrepareJSRuntimeEnvironment,e),t)))}sendMessageToApp(e){let t="";try{t=JSON.stringify(e),l.logger.verbose(`To RN APP: ${t}`),this.socketToApp.send(t)}catch(r){let n=t||""+e;v(c.ErrorHelper.getInternalError(g.InternalErrorCode.FailedToSendMessageToTheReactNativeApp,n),r)}}}t.MultipleLifetimesAppWorker=y,y.WORKER_BOOTSTRAP="\n// Initialize some variables before react-native code would access them\nvar onmessage=null, self=global;\n// Cache Node's original require as __debug__.require\nglobal.__debug__={require: require};\n// Prevent leaking process.versions from debugger process to\n// worker because pure React Native doesn't do that and some packages as js-md5 rely on this behavior\nObject.defineProperty(process, \"versions\", {\n    value: undefined\n});\n// TODO: Replace by url.fileURLToPath method when Node 10 LTS become deprecated\nfunction fileUrlToPath(url) {\n  if (process.platform === 'win32') {\n      return url.toString().replace('file:///', '');\n  } else {\n    return url.toString().replace('file://', '');\n  }\n}\nfunction getNativeModules() {\n    var NativeModules;\n    try {\n        // This approach is for old RN versions\n        NativeModules = global.require('NativeModules');\n    } catch (err) {\n        // ignore error and try another way for more recent RN versions\n        try {\n            var nativeModuleId;\n            var modules = global.__r.getModules();\n            var ids = Object.keys(modules);\n            for (var i = 0; i < ids.length; i++) {\n              if (modules[ids[i]].verboseName) {\n                 var packagePath = new String(modules[ids[i]].verboseName);\n                 if (packagePath.indexOf('Libraries/BatchedBridge/NativeModules.js') > 0 || packagePath.indexOf('Libraries\\\\BatchedBridge\\\\NativeModules.js') > 0) {\n                   nativeModuleId = parseInt(ids[i], 10);\n                   break;\n                 }\n              }\n            }\n          if (nativeModuleId) {\n            NativeModules = global.__r(nativeModuleId);\n          }\n        }\n        catch (err) {\n            // suppress errors\n        }\n    }\n    return NativeModules;\n}\n// Originally, this was made for iOS only\nvar vscodeHandlers = {\n    'vscode_reloadApp': function () {\n        var NativeModules = getNativeModules();\n        if (NativeModules && NativeModules.DevSettings) {\n            NativeModules.DevSettings.reload();\n        }\n    },\n    'vscode_showDevMenu': function () {\n        var NativeModules = getNativeModules();\n        if (NativeModules && NativeModules.DevMenu) {\n            NativeModules.DevMenu.show();\n        }\n    }\n};\nprocess.on(\"message\", function (message) {\n    if (message.data && vscodeHandlers[message.data.method]) {\n        vscodeHandlers[message.data.method]();\n    } else if(onmessage) {\n        onmessage(message);\n    }\n});\nvar postMessage = function(message){\n    process.send(message);\n};\nif (!self.postMessage) {\n    self.postMessage = postMessage;\n}\nvar importScripts = (function(){\n    var fs=require('fs'), vm=require('vm');\n    return function(scriptUrl){\n        scriptUrl = fileUrlToPath(scriptUrl);\n        var scriptCode = fs.readFileSync(scriptUrl, 'utf8');\n        // Add a 'debugger;' statement to stop code execution\n        // to wait for the sourcemaps to be processed by the debug adapter\n        vm.runInThisContext('debugger;' + scriptCode, {filename: scriptUrl});\n    };\n})();\n",y.CONSOLE_TRACE_PATCH="// Worker is ran as nodejs process, so console.trace() writes to stderr and it leads to error in native app\n// To avoid this console.trace() is overridden to print stacktrace via console.log()\n// Please, see Node JS implementation: https://github.com/nodejs/node/blob/master/lib/internal/console/constructor.js\nconsole.trace = (function() {\n    return function() {\n        try {\n            var err = {\n                name: 'Trace',\n                message: require('util').format.apply(null, arguments)\n                };\n            // Node uses 10, but usually it's not enough for RN app trace\n            Error.stackTraceLimit = 30;\n            Error.captureStackTrace(err, console.trace);\n            console.log(err.stack);\n        } catch (e) {\n            console.error(e);\n        }\n    };\n})();\n",y.PROCESS_TO_STRING_PATCH="// As worker is ran in node, it breaks broadcast-channels package approach of identifying if it’s ran in node:\n// https://github.com/pubkey/broadcast-channel/blob/master/src/util.js#L64\n// To avoid it if process.toString() is called if will return empty string instead of [object process].\nvar nativeObjectToString = Object.prototype.toString;\nObject.prototype.toString = function() {\n    if (this === process) {\n        return '';\n    } else {\n        return nativeObjectToString.call(this);\n    }\n};\n",y.WORKER_DONE="// Notify debugger that we're done with loading\n// and started listening for IPC messages\npostMessage({workerLoaded:true});",y.FETCH_STUB="(function(self) {\n'use strict';\nif (self.fetch) {\n    return;\n}\nself.fetch = fetch;\nfunction fetch(url) {\n    return new Promise((resolve, reject) => {\n        var data = require('fs').readFileSync(fileUrlToPath(url), 'utf8');\n        resolve(\n            {\n                text: function () {\n                    return data;\n                }\n            });\n    });\n}\n})(global);\n"},7456:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.DebugSessionBase=t.DebugSessionStatus=void 0;const i=r(7549),o=r(5622),s=r(420),a=r(8694),c=r(7551),l=r(9897),u=r(312),d=r(6932),h=r(7599),p=r(8280),f=r(8694),g=r(3403),m=r(2463);g.config({messageFormat:g.MessageFormat.bundle,bundleFormat:g.BundleFormat.standalone})(r(5622).join(__dirname,"src\\debugger\\debugSessionBase.ts"));const _=g.loadMessageBundle(r(5622).join(__dirname,"src\\debugger\\debugSessionBase.ts"));var E;!function(e){e[e.FirstConnection=0]="FirstConnection",e[e.FirstConnectionPending=1]="FirstConnectionPending",e[e.ConnectionAllowed=2]="ConnectionAllowed",e[e.ConnectionPending=3]="ConnectionPending",e[e.ConnectionDone=4]="ConnectionDone",e[e.ConnectionFailed=5]="ConnectionFailed"}(E=t.DebugSessionStatus||(t.DebugSessionStatus={}));class v extends s.LoggingDebugSession{constructor(e){super(),this.pwaNodeSessionName="pwa-node",this.stopCommand="workbench.action.debug.stop",this.session=e,this.isSettingsInitialized=!1,this.debugSessionStatus=E.FirstConnection,this.cancellationTokenSource=new i.CancellationTokenSource}initializeRequest(e,t){e.body=e.body||{},e.body.supportsConfigurationDoneRequest=!0,e.body.supportsEvaluateForHovers=!0,e.body.supportTerminateDebuggee=!0,e.body.supportsCancelRequest=!0,this.sendResponse(e)}initializeSettings(e){return n(this,void 0,void 0,(function*(){if(!this.isSettingsInitialized){let t=a.getLoggingDirectory();t&&(t=o.join(t,"DebugSessionLogs.txt"));let r=e.trace;r?(r=r.replace(r[0],r[0].toUpperCase()),s.logger.setup(s.Logger.LogLevel[r],t||!1),this.cdpProxyLogLevel=f.LogLevel[r]===f.LogLevel.Verbose?f.LogLevel.Custom:f.LogLevel.None):(s.logger.setup(s.Logger.LogLevel.Log,t||!1),this.cdpProxyLogLevel=a.LogHelper.LOG_LEVEL===f.LogLevel.Trace?f.LogLevel.Custom:f.LogLevel.None),"boolean"!=typeof e.sourceMaps&&(e.sourceMaps=!0),"boolean"!=typeof e.enableDebug&&(e.enableDebug=!0),"boolean"!=typeof e.sourceMapRenames&&(e.sourceMapRenames=!1);const n=m.SettingsHelper.getReactNativeProjectRoot(e.cwd);if(!(yield c.ReactNativeProjectHelper.isReactNativeProject(n)))throw l.ErrorHelper.getInternalError(u.InternalErrorCode.NotInReactNativeFolderError);const i=yield p.AppLauncher.getOrCreateAppLauncherByProjectRootPath(n);this.appLauncher=i,this.projectRootPath=n,this.isSettingsInitialized=!0,this.appLauncher.getOrUpdateNodeModulesRoot(!0),this.session.workspaceFolder&&this.appLauncher.updateDebugConfigurationRoot(this.session.workspaceFolder.uri.fsPath)}}))}disconnectRequest(e,t,r){return n(this,void 0,void 0,(function*(){if(this.appLauncher&&(yield this.appLauncher.getRnCdpProxy().stopServer()),this.cancellationTokenSource.cancel(),this.cancellationTokenSource.dispose(),this.previousAttachArgs&&this.previousAttachArgs.platform===h.PlatformType.Android)try{this.appLauncher.getMobilePlatform().dispose()}catch(e){s.logger.warn(_(0,null,e.message||e))}yield s.logger.dispose(),v.rootSessionTerminatedEventEmitter.fire({debugSession:this.session,args:{forcedStop:!!t.forcedStop}}),this.sendResponse(e)}))}showError(e,t){(e instanceof d.InternalError||e instanceof d.NestedError)&&e.errorCode===u.InternalErrorCode.CancellationTokenTriggered||(s.logger.error(e.message),this.sendErrorResponse(t,{format:e.message,id:1},void 0,void 0,s.ErrorDestination.User))}}t.DebugSessionBase=v,v.rootSessionTerminatedEventEmitter=new i.EventEmitter,v.onDidTerminateRootDebugSession=v.rootSessionTerminatedEventEmitter.event},4062:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.IWDPHelper=void 0;const i=r(8102),o=r(5773),s=r(3129),a=r(9897),c=r(312);class l{constructor(){this.iOSWebkitDebugProxyProcess=null}startiOSWebkitDebugProxy(e,t,r){return n(this,void 0,void 0,(function*(){return new Promise(((n,o)=>{this.cleanUp();let a=`null:${e},:${t}-${r}`;this.iOSWebkitDebugProxyProcess=s.spawn("ios_webkit_debug_proxy",["-c",a]),this.iOSWebkitDebugProxyProcess.on("error",(e=>{o(new Error("Unable to start ios_webkit_debug_proxy: "+e))})),i.PromiseUtil.delay(250).then((()=>n()))}))}))}getSimulatorProxyPort(e){return n(this,void 0,void 0,(function*(){const t=yield o.Request.request(`http://localhost:${e.port}/json`,!0);try{let r=JSON.parse(t),n=r;e.target&&(n=r.filter((t=>{var r;return"device"===(null===(r=e.target)||void 0===r?void 0:r.toLowerCase())?"SIMULATOR"!==t.deviceId:"SIMULATOR"===t.deviceId})));let i=n[0];return{targetPort:parseInt(i.url.split(":")[1],10),iOSVersion:i.deviceOSVersion}}catch(e){throw a.ErrorHelper.getInternalError(c.InternalErrorCode.IOSCouldNotFoundDeviceForDirectDebugging)}}))}cleanUp(){this.iOSWebkitDebugProxyProcess&&(this.iOSWebkitDebugProxyProcess.kill(),this.iOSWebkitDebugProxyProcess=null)}}t.IWDPHelper=l,l.iOS_WEBKIT_DEBUG_PROXY_DEFAULT_PORT=9221},5319:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.DirectDebugSession=void 0;const i=r(7549),o=r(9327),s=r(420),a=r(3821),c=r(1590),l=r(7456),u=r(6438),d=r(691),h=r(9897),p=r(312),f=r(3403),g=r(725),m=r(7599),_=r(4062),E=r(9047);f.config({messageFormat:f.MessageFormat.bundle,bundleFormat:f.BundleFormat.standalone})(r(5622).join(__dirname,"src\\debugger\\direct\\directDebugSession.ts"));const v=f.loadMessageBundle(r(5622).join(__dirname,"src\\debugger\\direct\\directDebugSession.ts"));class y extends l.DebugSessionBase{constructor(e){super(e),this.debuggerEndpointHelper=new d.DebuggerEndpointHelper,this.iOSWKDebugProxyHelper=new _.IWDPHelper,this.onDidTerminateDebugSessionHandler=i.debug.onDidTerminateDebugSession(this.handleTerminateDebugSession.bind(this))}launchRequest(e,t,r){return n(this,void 0,void 0,(function*(){let r={platform:{value:t.platform,isPii:!1},isDirect:{value:!0,isPii:!1}};E.TipNotificationService.getInstance().setKnownDateForFeatureById("directDebuggingWithHermes");try{try{yield this.initializeSettings(t),s.logger.log("Launching the application"),s.logger.verbose(`Launching the application: ${JSON.stringify(t,null,2)}`);const n=yield o.ProjectVersionHelper.getReactNativeVersions(this.projectRootPath,o.ProjectVersionHelper.generateAdditionalPackagesToCheckByPlatform(t));if(r=a.TelemetryHelper.addPlatformPropertiesToTelemetryProperties(t,n,r),yield a.TelemetryHelper.generate("launch",r,(e=>this.appLauncher.launch(t))),!t.enableDebug)return void this.sendResponse(e)}catch(e){throw h.ErrorHelper.getInternalError(p.InternalErrorCode.ApplicationLaunchFailed,e.message||e)}yield this.attachRequest(e,t)}catch(t){this.showError(t,e)}}))}attachRequest(e,t,r){return n(this,void 0,void 0,(function*(){let r={platform:{value:t.platform,isPii:!1},isDirect:{value:!0,isPii:!1}};t.webkitRangeMin=t.webkitRangeMin||9223,t.webkitRangeMax=t.webkitRangeMax||9322,this.previousAttachArgs=t;try{yield this.initializeSettings(t),s.logger.log("Attaching to the application"),s.logger.verbose(`Attaching to the application: ${JSON.stringify(t,null,2)}`);const e=yield o.ProjectVersionHelper.getReactNativeVersions(this.projectRootPath,o.ProjectVersionHelper.generateAdditionalPackagesToCheckByPlatform(t));r=a.TelemetryHelper.addPlatformPropertiesToTelemetryProperties(t,e,r),yield a.TelemetryHelper.generate("attach",r,(e=>n(this,void 0,void 0,(function*(){const e=t.useHermesEngine?t.port||this.appLauncher.getPackagerPort(t.cwd):t.platform===m.PlatformType.iOS?t.port||_.IWDPHelper.iOS_WEBKIT_DEBUG_PROXY_DEFAULT_PORT:null;if(null===e)throw h.ErrorHelper.getInternalError(p.InternalErrorCode.CouldNotDirectDebugWithoutHermesEngine,t.platform);t.port=e,s.logger.log(`Connecting to ${t.port} port`),yield this.appLauncher.getRnCdpProxy().stopServer();const r=t.useHermesEngine?new c.HermesCDPMessageHandler:t.platform===m.PlatformType.iOS?new g.IOSDirectCDPMessageHandler:null;if(!r)throw h.ErrorHelper.getInternalError(p.InternalErrorCode.CouldNotDirectDebugWithoutHermesEngine,t.platform);if(yield this.appLauncher.getRnCdpProxy().initializeServer(r,this.cdpProxyLogLevel,this.cancellationTokenSource.token),!t.useHermesEngine&&t.platform===m.PlatformType.iOS){yield this.iOSWKDebugProxyHelper.startiOSWebkitDebugProxy(t.port,t.webkitRangeMin,t.webkitRangeMax);const e=yield this.iOSWKDebugProxyHelper.getSimulatorProxyPort(t);t.port=e.targetPort}yield this.appLauncher.getPackager().start();const n=yield this.debuggerEndpointHelper.retryGetWSEndpoint(`http://localhost:${t.port}`,90,this.cancellationTokenSource.token);this.appLauncher.getRnCdpProxy().setBrowserInspectUri(n),yield this.establishDebugSession(t)}))))}catch(t){this.showError(h.ErrorHelper.getInternalError(p.InternalErrorCode.CouldNotAttachToDebugger,t.message||t),e)}}))}disconnectRequest(e,t,r){const i=Object.create(null,{disconnectRequest:{get:()=>super.disconnectRequest}});return n(this,void 0,void 0,(function*(){this.iOSWKDebugProxyHelper.cleanUp(),this.onDidTerminateDebugSessionHandler.dispose(),i.disconnectRequest.call(this,e,t,r)}))}establishDebugSession(e){return n(this,void 0,void 0,(function*(){const t=u.JsDebugConfigAdapter.createDebuggingConfigForRNHermes(e,this.appLauncher.getCdpProxyPort(),this.session.id);if(!(yield i.debug.startDebugging(this.appLauncher.getWorkspaceFolder(),t,{parentSession:this.session,consoleMode:i.DebugConsoleMode.MergeWithParent})))throw new Error(v(0,null))}))}handleTerminateDebugSession(e){e.configuration.rnDebugSessionId===this.session.id&&e.type===this.pwaNodeSessionName&&i.commands.executeCommand(this.stopCommand,this.session)}initializeSettings(e){const t=Object.create(null,{initializeSettings:{get:()=>super.initializeSettings}});return n(this,void 0,void 0,(function*(){yield t.initializeSettings.call(this,e),void 0===e.useHermesEngine&&(e.useHermesEngine=!0)}))}}t.DirectDebugSession=y},5734:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ForkedAppWorker=void 0;const i=r(5622),o=r(8835),s=r(3129),a=r(5747),c=r(5884),l=r(420),u=r(9897),d=r(312),h=r(8694),p=r(9185);function f(e,t){const r=u.ErrorHelper.getNestedError(e,d.InternalErrorCode.DebuggingWontWorkReloadJSAndReconnect,t);l.logger.error(r.message)}t.ForkedAppWorker=class{constructor(e,t,r,n,i,o,s){this.packagerAddress=e,this.packagerPort=t,this.sourcesStoragePath=r,this.projectRootPath=n,this.postReplyToApp=i,this.packagerRemoteRoot=o,this.packagerLocalRoot=s,this.debuggeeProcess=null,this.scriptImporter=new c.ScriptImporter(this.packagerAddress,this.packagerPort,this.sourcesStoragePath,this.packagerRemoteRoot,this.packagerLocalRoot)}stop(){this.debuggeeProcess&&(l.logger.verbose(`About to kill debuggee with pid ${this.debuggeeProcess.pid}`),this.debuggeeProcess.kill(),this.debuggeeProcess=null)}start(){return n(this,void 0,void 0,(function*(){let e=i.resolve(this.sourcesStoragePath,c.ScriptImporter.DEBUGGER_WORKER_FILENAME);const t=p.generateRandomPortNumber(),r=[`--inspect-brk=${t}`,"--no-deprecation",e];return this.debuggeeProcess=s.spawn("node",r,{stdio:["pipe","pipe","pipe","ipc"]}).on("message",(e=>{e&&e.workerLoaded?this.workerLoaded=Promise.resolve():this.postReplyToApp(e)})).on("error",(e=>{f(u.ErrorHelper.getInternalError(d.InternalErrorCode.ReactNativeWorkerProcessThrownAnError),e)})),this.logDirectory=h.getLoggingDirectory(),this.logDirectory&&(this.logWriteStream=a.createWriteStream(i.join(this.logDirectory,"nodeProcessLog.txt")),this.logWriteStream.on("error",(e=>{l.logger.error(`Error creating log file at path: ${this.logDirectory}. Error: ${e.toString()}\n`)})),this.debuggeeProcess.stdout.pipe(this.logWriteStream),this.debuggeeProcess.stderr.pipe(this.logWriteStream),this.debuggeeProcess.on("close",(()=>{this.logWriteStream.end()}))),l.logger.verbose(`Spawned debuggee process with pid ${this.debuggeeProcess.pid} listening to ${t}`),t}))}postMessage(e){return n(this,void 0,void 0,(function*(){yield new Promise((e=>{if(this.workerLoaded)e();else{const t=setInterval((()=>{this.workerLoaded&&(clearInterval(t),e())}),1e3)}}));const t=(()=>n(this,void 0,void 0,(function*(){if(yield this.workerLoaded,"executeApplicationScript"!==e.method)return yield this.bundleLoaded,e;if(e.url){const t=o.parse(e.url);t.host=`${this.packagerAddress}:${this.packagerPort}`,e=Object.assign(Object.assign({},e),{url:o.format(t)}),l.logger.verbose(`Packager requested runtime to load script from ${e.url}`);const r=yield this.scriptImporter.downloadAppScript(e.url,this.projectRootPath);return this.bundleLoaded=Promise.resolve(),Object.assign({},e,{url:`${this.pathToFileUrl(r.filepath)}`})}throw u.ErrorHelper.getInternalError(d.InternalErrorCode.RNMessageWithMethodExecuteApplicationScriptDoesntHaveURLProperty)})))();return t.then((e=>{this.debuggeeProcess&&this.debuggeeProcess.send({data:e})}),(t=>f(u.ErrorHelper.getInternalError(d.InternalErrorCode.CouldntImportScriptAt,e.url),t))),t}))}pathToFileUrl(e){return("win32"===process.platform?"file:///":"file://")+e}}},6438:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JsDebugConfigAdapter=void 0;class r{static createDebuggingConfigForPureRN(e,t,n){return Object.assign({},r.getExistingExtraArgs(e),{type:"pwa-node",request:"attach",name:"Attach",continueOnAttach:!0,port:t,rnDebugSessionId:n,resolveSourceMapLocations:["!**/debuggerWorker.js"]})}static createDebuggingConfigForRNHermes(e,t,n){return Object.assign({},r.getExistingExtraArgs(e),{type:"pwa-node",request:"attach",name:"Attach",continueOnAttach:!0,port:t,rnDebugSessionId:n,resolveSourceMapLocations:["**","!**/node_modules/!(expo)/**"]})}static getExistingExtraArgs(e){let t={};return e.env&&(t.env=e.env),e.envFile&&(t.envFile=e.envFile),t.sourceMaps=e.sourceMaps,t.sourceMapRenames=e.sourceMapRenames,e.sourceMapPathOverrides&&(t.sourceMapPathOverrides=e.sourceMapPathOverrides),e.skipFiles&&(t.skipFiles=e.skipFiles),t}}t.JsDebugConfigAdapter=r},4518:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RNDebugSession=void 0;const i=r(7549),o=r(5622),s=r(1890),a=r(420),c=r(9327),l=r(3821),u=r(8126),d=r(5585),h=r(7456),p=r(6438),f=r(9897),g=r(312),m=r(3403);m.config({messageFormat:m.MessageFormat.bundle,bundleFormat:m.BundleFormat.standalone})(r(5622).join(__dirname,"src\\debugger\\rnDebugSession.ts"));const _=m.loadMessageBundle(r(5622).join(__dirname,"src\\debugger\\rnDebugSession.ts"));class E extends h.DebugSessionBase{constructor(e){super(e),this.terminateCommand="terminate",this.appWorker=null,this.onDidStartDebugSessionHandler=i.debug.onDidStartDebugSession(this.handleStartDebugSession.bind(this)),this.onDidTerminateDebugSessionHandler=i.debug.onDidTerminateDebugSession(this.handleTerminateDebugSession.bind(this))}launchRequest(e,t,r){return n(this,void 0,void 0,(function*(){try{try{if(yield this.initializeSettings(t),a.logger.log("Launching the application"),a.logger.verbose(`Launching the application: ${JSON.stringify(t,null,2)}`),yield this.appLauncher.launch(t),!t.enableDebug)return void this.sendResponse(e)}catch(e){throw f.ErrorHelper.getInternalError(g.InternalErrorCode.ApplicationLaunchFailed,e.message||e)}yield this.attachRequest(e,t)}catch(t){this.showError(t,e)}}))}attachRequest(e,t,r){return n(this,void 0,void 0,(function*(){let r={platform:{value:t.platform,isPii:!1}};return this.previousAttachArgs=t,new Promise(((e,i)=>n(this,void 0,void 0,(function*(){try{yield this.initializeSettings(t),a.logger.log("Attaching to the application"),a.logger.verbose(`Attaching to the application: ${JSON.stringify(t,null,2)}`);const i=yield c.ProjectVersionHelper.getReactNativeVersions(this.projectRootPath,c.ProjectVersionHelper.generateAdditionalPackagesToCheckByPlatform(t));r=l.TelemetryHelper.addPlatformPropertiesToTelemetryProperties(t,i,r),yield l.TelemetryHelper.generate("attach",r,(r=>n(this,void 0,void 0,(function*(){t.port=t.port||this.appLauncher.getPackagerPort(t.cwd);const r=this.appLauncher.getRnCdpProxy();yield r.stopServer(),yield r.initializeServer(new d.RnCDPMessageHandler,this.cdpProxyLogLevel,this.cancellationTokenSource.token),yield this.appLauncher.getPackager().start(),a.logger.log(_(0,null));const n=o.join(this.projectRootPath,".vscode",".react");return s.sync(n),this.appWorker=new u.MultipleLifetimesAppWorker(t,n,this.projectRootPath,this.cancellationTokenSource.token,void 0),this.appLauncher.setAppWorker(this.appWorker),this.appWorker.on("connected",(n=>{var i;if(this.cancellationTokenSource.token.isCancellationRequested)return null===(i=this.appWorker)||void 0===i?void 0:i.stop();a.logger.log(_(1,null,n)),r.setApplicationTargetPort(n),this.debugSessionStatus!==h.DebugSessionStatus.ConnectionPending&&(this.debugSessionStatus===h.DebugSessionStatus.FirstConnection?(this.debugSessionStatus=h.DebugSessionStatus.FirstConnectionPending,this.establishDebugSession(t,e)):this.debugSessionStatus===h.DebugSessionStatus.ConnectionAllowed&&this.nodeSession&&(this.debugSessionStatus=h.DebugSessionStatus.ConnectionPending,this.nodeSession.customRequest(this.terminateCommand)))})),this.cancellationTokenSource.token.isCancellationRequested?this.appWorker.stop():yield this.appWorker.start()}))))}catch(e){i(e)}})))).catch((t=>this.showError(f.ErrorHelper.getInternalError(g.InternalErrorCode.CouldNotAttachToDebugger,t.message||t),e)))}))}disconnectRequest(e,t,r){const i=Object.create(null,{disconnectRequest:{get:()=>super.disconnectRequest}});return n(this,void 0,void 0,(function*(){return this.appWorker&&this.appWorker.stop(),this.onDidStartDebugSessionHandler.dispose(),this.onDidTerminateDebugSessionHandler.dispose(),i.disconnectRequest.call(this,e,t,r)}))}establishDebugSession(e,t){const r=p.JsDebugConfigAdapter.createDebuggingConfigForPureRN(e,this.appLauncher.getCdpProxyPort(),this.session.id);i.debug.startDebugging(this.appLauncher.getWorkspaceFolder(),r,{parentSession:this.session,consoleMode:i.DebugConsoleMode.MergeWithParent}).then((e=>{if(!e)throw this.debugSessionStatus=h.DebugSessionStatus.ConnectionFailed,this.setConnectionAllowedIfPossible(),this.resetFirstConnectionStatus(),new Error("Cannot start child debug session");this.debugSessionStatus=h.DebugSessionStatus.ConnectionDone,this.setConnectionAllowedIfPossible(),t&&(this.debugSessionStatus=h.DebugSessionStatus.ConnectionAllowed,t())}),(e=>{throw this.debugSessionStatus=h.DebugSessionStatus.ConnectionFailed,this.setConnectionAllowedIfPossible(),this.resetFirstConnectionStatus(),e}))}handleStartDebugSession(e){e.configuration.rnDebugSessionId===this.session.id&&e.type===this.pwaNodeSessionName&&(this.nodeSession=e)}handleTerminateDebugSession(e){e.configuration.rnDebugSessionId===this.session.id&&e.type===this.pwaNodeSessionName&&(this.debugSessionStatus===h.DebugSessionStatus.ConnectionPending?this.establishDebugSession(this.previousAttachArgs):i.commands.executeCommand(this.stopCommand,this.session))}setConnectionAllowedIfPossible(){this.debugSessionStatus!==h.DebugSessionStatus.ConnectionDone&&this.debugSessionStatus!==h.DebugSessionStatus.ConnectionFailed||(this.debugSessionStatus=h.DebugSessionStatus.ConnectionAllowed)}resetFirstConnectionStatus(){this.debugSessionStatus===h.DebugSessionStatus.FirstConnectionPending&&(this.debugSessionStatus=h.DebugSessionStatus.FirstConnection)}}t.RNDebugSession=E},5884:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ScriptImporter=void 0;const i=r(420),o=r(3188),s=r(5622),a=r(5773),c=r(5040),l=r(8835),u=r(6625),d=r(9327),h=r(9897),p=r(312),f=r(9452);class g{constructor(e,t,r,n,i){this.packagerAddress=e,this.packagerPort=t,this.sourcesStoragePath=r,this.packagerRemoteRoot=n,this.packagerLocalRoot=i,this.sourceMapUtil=new c.SourceMapUtil}downloadAppScript(e,t){return n(this,void 0,void 0,(function*(){const r="localhost"===l.parse(e).hostname?this.overridePackagerPort(e):e;let n=yield a.Request.request(r,!0);const o=yield d.ProjectVersionHelper.getReactNativeVersions(t);if(d.ProjectVersionHelper.getRNVersionsWithBrokenMetroBundler().indexOf(o.reactNativeVersion)>=0){if(null===n.match(/sourceMappingURL=/g)){let e=r.replace("bundle","map");n=this.sourceMapUtil.appendSourceMapPaths(n,e)}}let s=l.parse(r),c=this.sourceMapUtil.getSourceMapURL(s,n),h=Promise.resolve();c&&(h=this.writeAppSourceMap(c,s).then((()=>{n=this.sourceMapUtil.updateScriptPaths(n,c),u.gte(o.reactNativeVersion,"0.61.0")&&(n=this.sourceMapUtil.removeSourceURL(n))}))),yield h;const p=yield this.writeAppScript(n,s);return i.logger.verbose(`Script ${r} downloaded to ${p}`),{contents:n,filepath:p}}))}downloadDebuggerWorker(e,t,r){return n(this,void 0,void 0,(function*(){const n=h.ErrorHelper.getInternalError(p.InternalErrorCode.CannotAttachToPackagerCheckPackagerRunningOnPort,this.packagerPort);yield o.ensurePackagerRunning(this.packagerAddress,this.packagerPort,n);const c=yield d.ProjectVersionHelper.getReactNativeVersions(t);let l=this.prepareDebuggerWorkerURL(c.reactNativeVersion,r),u=s.join(e,g.DEBUGGER_WORKER_FILENAME);i.logger.verbose("About to download: "+l+" to: "+u);const m=yield a.Request.request(l,!0);return(new f.FileSystem).writeFile(u,m)}))}prepareDebuggerWorkerURL(e,t){let r;if(void 0!==t)r=`http://${this.packagerAddress}:${this.packagerPort}/${t}${g.DEBUGGER_WORKER_FILENAME}`;else{let t="";u.valid(e)&&!u.gte(e,"0.50.0")||(t="debugger-ui/"),r=`http://${this.packagerAddress}:${this.packagerPort}/${t}${g.DEBUGGER_WORKER_FILENAME}`}return r}writeAppScript(e,t){return n(this,void 0,void 0,(function*(){let r=s.join(this.sourcesStoragePath,s.basename(t.pathname));return yield(new f.FileSystem).writeFile(r,e),r}))}writeAppSourceMap(e,t){return n(this,void 0,void 0,(function*(){const r=yield a.Request.request(e.href,!0);let n=s.join(this.sourcesStoragePath,s.basename(e.pathname)),i=s.basename(t.pathname),o=this.sourceMapUtil.updateSourceMapFile(r,i,this.sourcesStoragePath,this.packagerRemoteRoot,this.packagerLocalRoot);return(new f.FileSystem).writeFile(n,o)}))}overridePackagerPort(e){let t=l.parse(e);return t.port=this.packagerPort.toString(),delete t.host,l.format(t)}}t.ScriptImporter=g,g.DEBUGGER_WORKER_FILE_BASENAME="debuggerWorker",g.DEBUGGER_WORKER_FILENAME=g.DEBUGGER_WORKER_FILE_BASENAME+".js"},5040:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SourceMapUtil=void 0;const n=r(8835),i=r(5622),o=r(8523),s=/^[a-zA-z]{2,}:\/\//;class a{getSourceMapURL(e,t){let r=null,i=this.getSourceMapRelativeUrl(t);if(i){let t=n.parse(i);t.protocol=e.protocol,t.host=e.host,r=n.parse(n.format(t))}return r}updateSourceMapFile(e,t,n,i,a){try{let c=JSON.parse(e);return c.sections&&(c.sections=c.sections.filter((e=>null!=e.map)),c=r(9828)(c)),c=(new o.SourceMapsCombinator).convert(c),c.sources&&(c.sources=c.sources.map((e=>s.test(e)?e:this.updateSourceMapPath(e,n,i,a)))),delete c.sourcesContent,c.sourceRoot="",c.file=t,JSON.stringify(c)}catch(t){return e}}appendSourceMapPaths(e,t){return e+=`//# sourceMappingURL=${t}`}updateScriptPaths(e,t){return e.replace(a.SourceMapURLRegex,"//# sourceMappingURL="+i.basename(t.pathname))}removeSourceURL(e){return e.replace(a.SourceURLRegex,"")}getSourceMapRelativeUrl(e){let t=e.match(a.SourceMapURLGlobalRegex);if(t){const e=t[t.length-1].match(a.SourceMapURLRegex);if(e)return(e[2].includes("platform=macos")||e[2].includes("platform=window"))&&!e[2].includes("http:")&&e[2].startsWith("//")?"http:"+e[2]:e[2]}return null}updateSourceMapPath(e,t,r,n){r&&n&&(r=this.makeUnixStylePath(r),n=this.makeUnixStylePath(n),e=e.replace(r,n));let o=i.relative(t,e);return this.makeUnixStylePath(o)}makeUnixStylePath(e){let t=e.split(i.sep);return i.posix.join.apply(null,t)}}t.SourceMapUtil=a,a.SourceMapURLGlobalRegex=/\/\/(#|@) sourceMappingURL=((?!data:).+?)\s*$/gm,a.SourceMapURLRegex=/\/\/(#|@) sourceMappingURL=((?!data:).+?)\s*$/m,a.SourceURLRegex=/^\/\/[#@] ?sourceURL=(.+)$/m},8523:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SourceMapsCombinator=void 0;const n=r(5747),i=r(5622),o=r(9125),s=r(9564),a=/^(?:[a-z]{2,}:\/\/\/)?[a-z]:/i;function c(e,t){return t.match(a)?n.readFileSync(t):n.readFileSync(`${e}${t}`)}t.SourceMapsCombinator=class{convert(e){const t=e.sources.reduce(((e,t)=>{if(t.indexOf("node_modules")>=0)return e;try{let r=this.getSourceMapConsumerFrom(t);r&&(e[t]=r)}finally{return e}}),{});if(0===Object.keys(t).length)return e;const r=new o.SourceMapGenerator;return new o.SourceMapConsumer(e).eachMapping((n=>{if(null===n.source)return;let o={generated:{line:n.generatedLine,column:n.generatedColumn},original:{line:n.originalLine,column:n.originalColumn},source:n.source,name:n.name};if(t[n.source]){let r={line:n.originalLine,column:n.originalColumn},s=t[n.source].originalPositionFor(r);if(null===s.source)return;s.source.match(a)||(s.source=i.resolve(e.sourceRoot,i.dirname(n.source),s.source)),o.source=s.source,o.name=s.name||o.name,null!==s.line&&null!==s.column&&(o.original={line:s.line,column:s.column})}try{r.addMapping(o)}catch(e){}})),r.toJSON()}getSourceMapConsumerFrom(e){let t=n.readFileSync(e);return this.readSourcemap(e,t.toString())}readSourcemap(e,t){let r=s.resolveSync(t,e,c.bind(null,function(e){const t=e.match(a);return t?t[0]:""}(e)));return null===r?null:new o.SourceMapConsumer(r.map)}}},6729:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractDeviceTracker=void 0;const i=r(9144);t.AbstractDeviceTracker=class{constructor(){this.logger=i.OutputChannelLogger.getMainChannel(),this.isStop=!1}queryDevicesLoop(){return n(this,void 0,void 0,(function*(){try{yield this.queryDevices(),this.isStop||setTimeout((()=>this.queryDevicesLoop()),3e3)}catch(e){this.logger.error(e.toString())}}))}}},166:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AdbHelper=t.AndroidAPILevel=void 0;const i=r(5640),o=r(5458),s=r(5622),a=r(5747),c=r(2087),l=r(3403),u=r(8102);l.config({messageFormat:l.MessageFormat.bundle,bundleFormat:l.BundleFormat.standalone})(r(5622).join(__dirname,"src\\extension\\android\\adb.ts"));const d=l.loadMessageBundle(r(5622).join(__dirname,"src\\extension\\android\\adb.ts"));var h;!function(e){e[e.Marshmallow=23]="Marshmallow",e[e.LOLLIPOP_MR1=22]="LOLLIPOP_MR1",e[e.LOLLIPOP=21]="LOLLIPOP",e[e.KITKAT=19]="KITKAT",e[e.JELLY_BEAN_MR2=18]="JELLY_BEAN_MR2",e[e.JELLY_BEAN_MR1=17]="JELLY_BEAN_MR1",e[e.JELLY_BEAN=16]="JELLY_BEAN",e[e.ICE_CREAM_SANDWICH_MR1=15]="ICE_CREAM_SANDWICH_MR1",e[e.GINGERBREAD_MR1=10]="GINGERBREAD_MR1"}(t.AndroidAPILevel||(t.AndroidAPILevel={})),function(e){e[e.KEYCODE_BACK=4]="KEYCODE_BACK",e[e.KEYCODE_DPAD_UP=19]="KEYCODE_DPAD_UP",e[e.KEYCODE_DPAD_DOWN=20]="KEYCODE_DPAD_DOWN",e[e.KEYCODE_DPAD_CENTER=23]="KEYCODE_DPAD_CENTER",e[e.KEYCODE_MENU=82]="KEYCODE_MENU"}(h||(h={}));class p{constructor(e,t,r,n="MainActivity"){this.childProcess=new i.ChildProcess,this.adbExecutable="",this.nodeModulesRoot=t,this.adbExecutable=this.getAdbPath(e,r),this.commandExecutor=new o.CommandExecutor(this.nodeModulesRoot),this.launchActivity=n}getConnectedTargets(){return n(this,void 0,void 0,(function*(){const e=yield this.childProcess.execToString(`${this.adbExecutable} devices`);return this.parseConnectedTargets(e)}))}findOnlineTargetById(e){return n(this,void 0,void 0,(function*(){return(yield this.getOnlineTargets()).find((t=>t.id===e))}))}getAvdsNames(){return n(this,void 0,void 0,(function*(){const e=yield this.childProcess.execToString("emulator -list-avds");let t=[];if(e){t=e.split(/\r?\n|\r/g);const r=t.indexOf("");r>=0&&t.splice(r,1)}return t}))}isRemoteTarget(e){return!!e.match(p.AndroidRemoteTargetPattern)}getAvdNameById(e){return n(this,void 0,void 0,(function*(){try{const t=yield this.childProcess.execToString(`${this.adbExecutable} -s ${e} emu avd name`);return t?t.split(/\r?\n|\r/g)[0]:null}catch(e){return null}}))}setLaunchActivity(e){this.launchActivity=e}switchDebugMode(e,t,r,i,s){return n(this,void 0,void 0,(function*(){let n=`${this.adbExecutable} ${i?"-s "+i:""} shell am broadcast -a "${t}.RELOAD_APP_ACTION" --ez jsproxy ${r}`;return yield new o.CommandExecutor(this.nodeModulesRoot,e).execute(n),yield u.PromiseUtil.delay(200),yield this.stopApp(e,t,i,s),this.launchApp(e,t,i,s)}))}launchApp(e,t,r,n){let i=`${this.adbExecutable} ${r?"-s "+r:""} shell am start -n ${t}${n?"."+n:""}/${t}.${this.launchActivity}`;return new o.CommandExecutor(e).execute(i)}stopApp(e,t,r,n){let i=`${this.adbExecutable} ${r?"-s "+r:""} shell am force-stop ${t}${n?"."+n:""}`;return new o.CommandExecutor(e).execute(i)}apiVersion(e){return n(this,void 0,void 0,(function*(){const t=yield this.executeQuery(e,"shell getprop ro.build.version.sdk");return parseInt(t,10)}))}reverseAdb(e,t){return this.execute(e,`reverse tcp:${t} tcp:${t}`)}showDevMenu(e){let t=`${this.adbExecutable} ${e?"-s "+e:""} shell input keyevent ${h.KEYCODE_MENU}`;return this.commandExecutor.execute(t)}reloadApp(e){let t=`${this.adbExecutable} ${e?"-s "+e:""} shell input text "RR"`;return this.commandExecutor.execute(t)}getOnlineTargets(){return n(this,void 0,void 0,(function*(){return(yield this.getConnectedTargets()).filter((e=>e.isOnline))}))}startLogCat(e){return this.childProcess.spawn(this.adbExecutable.replace(/\"/g,""),e)}parseSdkLocation(e,t){const r=e.match(/^sdk\.dir\s*=(.+)$/m);if(!r||!r[1])return t&&t.info(d(0,null)),null;let n=r[1].trim();return"win32"===c.platform()&&(n=n.replace(/\\\\/g,"\\").replace("\\:",":")),t&&t.info(d(1,null,n)),n}getAdbPath(e,t){const r=this.getSdkLocationFromLocalPropertiesFile(e,t);return r?`"${s.join(r,"platform-tools","adb")}"`:"adb"}executeShellCommand(e,t){return this.executeQuery(e,`shell "${t}"`)}executeQuery(e,t){return this.childProcess.execToString(this.generateCommandForTarget(e,t))}parseConnectedTargets(e){let t=[],r=new RegExp("^(\\S+)\\t(\\S+)$","mg"),n=r.exec(e);for(;null!=n;)t.push({id:n[1],isOnline:"device"===n[2],isVirtualTarget:this.isVirtualTarget(n[1])}),n=r.exec(e);return t}isVirtualTarget(e){return!!e.match(p.AndroidSDKEmulatorPattern)}execute(e,t){return this.commandExecutor.execute(this.generateCommandForTarget(e,t))}generateCommandForTarget(e,t){return`${this.adbExecutable} -s "${e}" ${t}`}getSdkLocationFromLocalPropertiesFile(e,t){const r=s.join(e,"android","local.properties");if(!a.existsSync(r))return t&&t.info(d(2,null)),null;let n;try{n=a.readFileSync(r).toString()}catch(e){return t&&(t.error(d(3,null,r),e,e.stack),t.info(d(4,null))),null}return this.parseSdkLocation(n,t)}}t.AdbHelper=p,p.AndroidRemoteTargetPattern=/^(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}:\d{1,5}|.*_adb-tls-connect\._tcp.*)$/gm,p.AndroidSDKEmulatorPattern=/^emulator-\d{1,5}$/},3781:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.pushFile=t.pull=t.push=void 0;const i=r(5622),o=/^[\w.-]+$/,s=/not an application/,a=/debuggable/,c=/not permitted/,l="/data/local/tmp/";var u;!function(e){e[e.NotAnApp=1]="NotAnApp",e[e.NotDebuggable=2]="NotDebuggable"}(u||(u={}));class d extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,new.target.prototype)}}
/**
 * @preserve
 * Start region: the code is borrowed from https://github.com/facebook/flipper/blob/v0.79.1/desktop/app/src/utils/androidContainerUtility.tsx#L19-L46
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 * @format
 */
/**
 * @preserve
 * Start region: the code is borrowed from https://github.com/facebook/flipper/blob/v0.79.1/desktop/app/src/utils/androidContainerUtilityInternal.tsx
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 * @format
 */
function h(e){return e.match(o)?Promise.resolve(e):Promise.reject(new Error(`Disallowed run-as user: ${e}`))}function p(e){return e.match(/[']/)?Promise.reject(new Error(`Disallowed escaping filepath: ${e}`)):Promise.resolve(e)}function f(e,t,r,n){return m(e,t,r,n,`run-as '${r}'`)}function g(e,t,r,n){return m(e,t,r,n,"su")}function m(e,t,r,n,i){return e.executeShellCommand(t,`echo '${n}' | ${i}`).then((e=>{if(e.match(s))throw new d(u.NotAnApp,`Android package ${r} is not an application. To use it with Flipper, either run adb as root or add an <application> tag to AndroidManifest.xml`);if(e.match(a))throw new d(u.NotDebuggable,`Android app ${r} is not debuggable. To use it with Flipper, add android:debuggable="true" to the application section of AndroidManifest.xml`);if(e.toLowerCase().match(c))throw new Error(`Your android device (${t}) does not support the adb shell run-as command. We're tracking this at https://github.com/facebook/flipper/issues/92`);return e}))}
/**
 * @preserve
 * End region: https://github.com/facebook/flipper/blob/v0.79.1/desktop/app/src/utils/androidContainerUtilityInternal.tsx
 */t.push=function(e,t,r,n,i,o){return h(r).then((r=>p(n).then((n=>function(e){if(!e.match(/["]/))return Promise.resolve(e);return Promise.reject(new Error(`Disallowed escaping file content: ${e}`))}(i).then((i=>function(e,t,r,n,i,o){const s=`echo \\"${i}\\" > "${n}" && chmod 644 "${n}"`;return f(e,t,r,s).then((e=>{null==o||o.debug(e)})).catch((n=>{if(n instanceof d)return g(e,t,r,s).then((()=>{})).catch((e=>{throw null==o||o.debug(e.toString()),n}));throw n}))}(e,t,r,n,i,o)))))))},t.pull=function(e,t,r,n,i){return h(r).then((r=>p(n).then((n=>function(e,t,r,n,i){const o=`cat "${n}"`;return f(e,t,r,o).catch((n=>{if(n instanceof d)return g(e,t,r,o).catch((e=>{throw null==i||i.debug(e.toString()),n}));throw n}))}(e,t,r,n,i)))))},t.pushFile=
/**
 * @preserve
 * End region: https://github.com/facebook/flipper/blob/v0.79.1/desktop/app/src/utils/androidContainerUtility.tsx#L19-L46
 */
function(e,t,r,o,s,a){return n(this,void 0,void 0,(function*(){const c=yield h(r),u=yield p(o);return function(e,t,r,o,s,a){return n(this,void 0,void 0,(function*(){const n=i.basename(o),c=l+n;try{const n=yield e.executeQuery(t,`push ${s} ${c}`);null==a||a.debug(n);const i=`cp "${c}" "${o}" && chmod 644 "${o}"`,l=yield f(e,t,r,i);null==a||a.debug(l)}finally{yield e.executeShellCommand(t,`rm ${c}`)}}))}(e,t,c,u,s,a)}))}},8631:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AndroidDeviceTracker=void 0;const i=r(7693),o=r(5637),s=r(2501),a=r(8226),c=r(1205),l=r(6729);class u extends l.AbstractDeviceTracker{constructor(e){super(),this.adbHelper=e}start(){return n(this,void 0,void 0,(function*(){this.logger.debug("Start Android device tracker"),yield this.queryDevicesLoop()}))}stop(){this.logger.debug("Stop Android device tracker"),this.isStop=!0}queryDevices(){return n(this,void 0,void 0,(function*(){const e=yield this.adbHelper.getOnlineTargets();let t=new Set([...i.DeviceStorage.devices.keys()].filter((e=>i.DeviceStorage.devices.get(e)instanceof o.AndroidClientDevice)));for(const r of e)if(t.has(r.id))t.delete(r.id);else{const e=new o.AndroidClientDevice(r.id,r.isVirtualTarget,c.ClientOS.Android);yield this.initAndroidDevice(e),i.DeviceStorage.devices.set(e.id,e)}t.forEach((e=>{i.DeviceStorage.devices.delete(e)}))}))}initAndroidDevice(e){return n(this,void 0,void 0,(function*(){yield this.adbHelper.reverseAdb(e.id,s.NetworkInspectorServer.InsecureServerPort),yield this.adbHelper.reverseAdb(e.id,s.NetworkInspectorServer.SecureServerPort),e.deviceStatus=a.DeviceStatus.Prepared}))}}t.AndroidDeviceTracker=u},7833:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AndroidPlatform=void 0;const i=r(6625),o=r(7005),s=r(7599),a=r(1506),c=r(1008),l=r(4191),u=r(3821),d=r(5458),h=r(5618),p=r(3403),f=r(312),g=r(9897),m=r(9901),_=r(8102),E=r(3773),v=r(8943),y=r(166),S=r(1638);p.config({messageFormat:p.MessageFormat.bundle,bundleFormat:p.BundleFormat.standalone})(r(5622).join(__dirname,"src\\extension\\android\\androidPlatform.ts"));const b=p.loadMessageBundle(r(5622).join(__dirname,"src\\extension\\android\\androidPlatform.ts"));class T extends S.GeneralMobilePlatform{constructor(e,t={}){super(e,t),this.runOptions=e,this.logCatMonitor=null,this.needsToLaunchApps=!1,this.adbHelper=new y.AdbHelper(this.runOptions.projectRoot,e.nodeModulesRoot,this.logger),this.targetManager=new v.AndroidTargetManager(this.adbHelper)}showDevMenu(e){return this.adbHelper.showDevMenu(e)}reloadApp(e){return this.adbHelper.reloadApp(e)}getTarget(){return n(this,void 0,void 0,(function*(){if(!this.target){const e=yield this.adbHelper.getOnlineTargets(),t=yield this.getTargetFromRunArgs();if(t)this.target=t;else{const t=e.filter((e=>{switch(this.runOptions.target){case o.TargetType.Simulator:return e.isVirtualTarget;case o.TargetType.Device:return!e.isVirtualTarget;case void 0:case"":return!0;default:return e.id===this.runOptions.target}}));if(t.length)this.target=v.AndroidTarget.fromInterface(t[0]);else{if(!e.length)throw g.ErrorHelper.getInternalError(f.InternalErrorCode.AndroidThereIsNoAnyOnlineDebuggableTarget);this.logger.warning(b(0,null,this.runOptions.target)),this.target=v.AndroidTarget.fromInterface(e[0])}}}return this.target}))}runApp(e=!1){var t;return n(this,void 0,void 0,(function*(){let r={platform:{value:s.PlatformType.Android,isPii:!1}};this.runOptions.isDirect&&(r.isDirect={value:!0,isPii:!1},null===(t=this.projectObserver)||void 0===t||t.updateRNAndroidHermesProjectState(!0)),r=u.TelemetryHelper.addPlatformPropertiesToTelemetryProperties(this.runOptions,this.runOptions.reactNativeVersions,r),yield u.TelemetryHelper.generate("AndroidPlatform.runApp",r,(()=>n(this,void 0,void 0,(function*(){const t=S.GeneralMobilePlatform.getEnvArgument(process.env,this.runOptions.env,this.runOptions.envFile);i.valid(this.runOptions.reactNativeVersions.reactNativeVersion)&&!i.gte(this.runOptions.reactNativeVersions.reactNativeVersion,T.NO_PACKAGER_VERSION)||this.runArguments.push("--no-packager");let r=S.GeneralMobilePlatform.getOptFromRunArgs(this.runArguments,"--main-activity");r?this.adbHelper.setLaunchActivity(r):m.notNullOrUndefined(this.runOptions.debugLaunchActivity)&&(this.runArguments.push("--main-activity",this.runOptions.debugLaunchActivity),this.adbHelper.setLaunchActivity(this.runOptions.debugLaunchActivity));const n=new d.CommandExecutor(this.runOptions.nodeModulesRoot,this.projectPath,this.logger).spawnReactCommand("run-android",this.runArguments,{env:t}),o=new l.OutputVerifier((()=>Promise.resolve(T.RUN_ANDROID_SUCCESS_PATTERNS)),(()=>Promise.resolve(T.RUN_ANDROID_FAILURE_PATTERNS)),s.PlatformType.Android).process(n);let a=[];const c=(yield this.adbHelper.getOnlineTargets()).map((e=>e.id));let u;try{try{yield o}finally{u=yield this.getTargetIdForRunApp(c),this.packageName=yield this.getPackageName(),a=[u]}}catch(t){if(u||(u=yield this.getTargetIdForRunApp(c)),!(t.message===g.ErrorHelper.getInternalError(f.InternalErrorCode.AndroidMoreThanOneDeviceOrEmulator).message&&c.length>=1&&u))throw t;this.needsToLaunchApps=!0,a=e?c:[u]}yield _.PromiseUtil.forEach(a,(e=>this.launchAppWithADBReverseAndLogCat(e)))}))))}))}enableJSDebuggingMode(){return n(this,void 0,void 0,(function*(){return this.adbHelper.switchDebugMode(this.runOptions.projectRoot,this.packageName,!0,(yield this.getTarget()).id,this.getAppIdSuffixFromRunArgumentsIfExists())}))}disableJSDebuggingMode(){return n(this,void 0,void 0,(function*(){return this.adbHelper.switchDebugMode(this.runOptions.projectRoot,this.packageName,!1,(yield this.getTarget()).id,this.getAppIdSuffixFromRunArgumentsIfExists())}))}prewarmBundleCache(){return this.packager.prewarmBundleCache(s.PlatformType.Android)}getRunArguments(){let e=[];return this.runOptions.runArguments&&this.runOptions.runArguments.length>0?e=this.runOptions.runArguments:(this.runOptions.variant&&e.push("--variant",this.runOptions.variant),this.runOptions.target&&this.runOptions.target!==o.TargetType.Device&&this.runOptions.target!==o.TargetType.Simulator&&e.push("--deviceId",this.runOptions.target)),e}dispose(){this.logCatMonitor&&(E.LogCatMonitorManager.delMonitor(this.logCatMonitor.deviceId),this.logCatMonitor=null)}getTargetFromRunArgs(){return n(this,void 0,void 0,(function*(){if(this.runOptions.runArguments&&this.runOptions.runArguments.length){const e=S.GeneralMobilePlatform.getOptFromRunArgs(this.runOptions.runArguments,"--deviceId");if(e)return new v.AndroidTarget(!0,this.adbHelper.isVirtualTarget(e),e)}}))}getTargetIdForRunApp(e){return n(this,void 0,void 0,(function*(){let t;return this.runOptions.runArguments&&this.runOptions.runArguments.length&&(t=S.GeneralMobilePlatform.getOptFromRunArgs(this.runOptions.runArguments,"--deviceId")),t||(this.runOptions.target&&this.runOptions.target!==o.TargetType.Simulator&&this.runOptions.target!==o.TargetType.Device&&e.find((e=>e===this.runOptions.target))?this.runOptions.target:(yield this.getTarget()).id)}))}getAppIdSuffixFromRunArgumentsIfExists(){const e=this.runArguments.indexOf("--appIdSuffix");if(e>-1)return this.runArguments[e+1]}launchAppWithADBReverseAndLogCat(e){return n(this,void 0,void 0,(function*(){return yield this.configureADBReverseWhenApplicable(e),this.needsToLaunchApps&&(yield this.adbHelper.launchApp(this.runOptions.projectRoot,this.packageName,e)),this.startMonitoringLogCat(e,this.runOptions.logCatArguments)}))}configureADBReverseWhenApplicable(e){return n(this,void 0,void 0,(function*(){const t=yield this.adbHelper.apiVersion(e);if(t>=y.AndroidAPILevel.LOLLIPOP)try{this.adbHelper.reverseAdb(e,Number(this.runOptions.packagerPort))}catch(t){if(!this.adbHelper.isRemoteTarget(e)||!t.message.includes(T.RUN_ANDROID_FAILURE_PATTERNS[3].pattern))throw t;this.logger.warning(t.message)}else this.logger.warning(b(1,null,e,t,y.AndroidAPILevel.LOLLIPOP))}))}getPackageName(){return n(this,void 0,void 0,(function*(){const e=yield new a.Package(this.runOptions.projectRoot).name();return new c.PackageNameResolver(e).resolvePackageName(this.runOptions.projectRoot)}))}startMonitoringLogCat(e,t){E.LogCatMonitorManager.delMonitor(e),this.logCatMonitor=new h.LogCatMonitor(e,this.adbHelper,t),E.LogCatMonitorManager.addMonitor(this.logCatMonitor),this.logCatMonitor.start().catch((e=>{this.logger.warning(e),this.logger.warning(b(2,null))}))}}t.AndroidPlatform=T,T.RUN_ANDROID_FAILURE_PATTERNS=[{pattern:"Failed to install on any devices",errorCode:f.InternalErrorCode.AndroidCouldNotInstallTheAppOnAnyAvailibleDevice},{pattern:"com.android.ddmlib.ShellCommandUnresponsiveException",errorCode:f.InternalErrorCode.AndroidShellCommandTimedOut},{pattern:"Android project not found",errorCode:f.InternalErrorCode.AndroidProjectNotFound},{pattern:"error: more than one device/emulator",errorCode:f.InternalErrorCode.AndroidMoreThanOneDeviceOrEmulator},{pattern:/^Error: Activity class \{.*\} does not exist\.$/m,errorCode:f.InternalErrorCode.AndroidFailedToLaunchTheSpecifiedActivity}],T.RUN_ANDROID_SUCCESS_PATTERNS=["BUILD SUCCESSFUL","Starting the app","Starting: Intent"]},8943:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AndroidTargetManager=t.AndroidTarget=void 0;const i=r(3403),o=r(9023),s=r(166),a=r(5640),c=r(9144),l=r(1529),u=r(9901),d=r(7005);i.config({messageFormat:i.MessageFormat.bundle,bundleFormat:i.BundleFormat.standalone})(r(5622).join(__dirname,"src\\extension\\android\\androidTargetManager.ts"));const h=i.loadMessageBundle(r(5622).join(__dirname,"src\\extension\\android\\androidTargetManager.ts"));class p extends l.MobileTarget{static fromInterface(e){return new p(e.isOnline,e.isVirtualTarget,e.id,e.name)}constructor(e,t,r,n){super(e,t,r,n||r)}}t.AndroidTarget=p;class f extends o.MobileTargetManager{constructor(e){super(),this.adbHelper=e,this.logger=c.OutputChannelLogger.getChannel(c.OutputChannelLogger.MAIN_CHANNEL_NAME,!0),this.childProcess=new a.ChildProcess}isVirtualTarget(e){return n(this,void 0,void 0,(function*(){try{if(e===d.TargetType.Device)return!1;if(e===d.TargetType.Simulator||e.match(s.AdbHelper.AndroidSDKEmulatorPattern)||(yield this.adbHelper.getAvdsNames()).includes(e))return!0;{const t=yield this.adbHelper.findOnlineTargetById(e);if(t)return t.isVirtualTarget;throw new Error("There is no any online target")}}catch(t){throw new Error(h(0,null,e))}}))}selectAndPrepareTarget(e){return n(this,void 0,void 0,(function*(){const t=yield this.startSelection(e);if(t){if(!t.isOnline&&t.isVirtualTarget)return this.launchSimulator(t);if(t.id)return p.fromInterface(t)}}))}collectTargets(){return n(this,void 0,void 0,(function*(){const e=[];let t=yield this.adbHelper.getAvdsNames();e.push(...t.map((e=>({name:e,isOnline:!1,isVirtualTarget:!0}))));const r=yield this.adbHelper.getOnlineTargets();for(let t of r)if(t.isVirtualTarget){const r=yield this.adbHelper.getAvdNameById(t.id),n=e.find((e=>e.name===r));n&&(n.isOnline=!0,n.id=t.id)}else e.push({id:t.id,isOnline:!0,isVirtualTarget:!1});this.targets=e}))}startSelection(e){return n(this,void 0,void 0,(function*(){return this.selectTarget(e)}))}launchSimulator(e){return n(this,void 0,void 0,(function*(){return new Promise(((t,r)=>{const i=this.childProcess.spawn(f.EMULATOR_COMMAND,[f.EMULATOR_AVD_START_COMMAND,e.name],{detached:!0},!0);i.outcome.catch((e=>{"win32"==process.platform&&process.env.SESSIONNAME&&process.env.SESSIONNAME.toLowerCase().includes("rdp-tcp")&&this.logger.warning(h(1,null)),r(new Error(`Virtual device launch finished with an exception: ${e}`))})),i.spawnedProcess.unref();return u.waitUntil((()=>n(this,void 0,void 0,(function*(){const t=yield this.adbHelper.getOnlineTargets();for(let r of t){if((yield this.adbHelper.getAvdNameById(r.id))===e.name)return r.id}return null}))),1e3,1e3*f.EMULATOR_START_TIMEOUT).then((n=>{n?(e.id=n,e.isOnline=!0,this.logger.info(h(2,null,e.name)),t(p.fromInterface(e))):r(new Error(`Virtual device launch finished with an exception: ${h(3,null,e.name,f.EMULATOR_START_TIMEOUT)}`))}))}))}))}}t.AndroidTargetManager=f,f.EMULATOR_COMMAND="emulator",f.EMULATOR_AVD_START_COMMAND="-avd",f.EMULATOR_START_TIMEOUT=120},5618:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.LogCatMonitor=void 0;const i=r(9144),o=r(334),s=r(3403);s.config({messageFormat:s.MessageFormat.bundle,bundleFormat:s.BundleFormat.standalone})(r(5622).join(__dirname,"src\\extension\\android\\logCatMonitor.ts"));const a=s.loadMessageBundle(r(5622).join(__dirname,"src\\extension\\android\\logCatMonitor.ts"));class c{constructor(e,t,r){this.deviceId=e,this._userProvidedLogCatArguments=r,this._logger=i.OutputChannelLogger.getChannel(`LogCat - ${e}`),this.adbHelper=t}start(){return n(this,void 0,void 0,(function*(){const e=this.getLogCatArguments(),t=["-s",this.deviceId,"logcat"].concat(e);this._logger.debug(`Monitoring LogCat for device ${this.deviceId} with arguments: ${e}`),this._logCatSpawn=this.adbHelper.startLogCat(t);const r=new o.ExecutionsFilterBeforeTimestamp(.5);this._logCatSpawn.stderr.on("data",(e=>{r.execute((()=>this._logger.info(e.toString())))})),this._logCatSpawn.stdout.on("data",(e=>{r.execute((()=>this._logger.info(e.toString())))}));try{yield this._logCatSpawn.outcome,this._logger.info(a(0,null))}catch(e){if(this._logCatSpawn)throw e;this._logger.info(a(1,null))}finally{this._logCatSpawn=null}}))}dispose(){if(this._logCatSpawn){const e=this._logCatSpawn;this._logCatSpawn=null,e.spawnedProcess.kill()}i.OutputChannelLogger.disposeChannel(this._logger.channelName)}getLogCatArguments(){return this.isNullOrUndefined(this._userProvidedLogCatArguments)?c.DEFAULT_PARAMETERS:(""+this._userProvidedLogCatArguments).split(" ")}isNullOrUndefined(e){return null==e}}t.LogCatMonitor=c,c.DEFAULT_PARAMETERS=["*:S","ReactNative:V","ReactNativeJS:V"]},3773:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogCatMonitorManager=void 0;class r{static addMonitor(e){this.logCatMonitorsCache[e.deviceId.toLowerCase()]=e}static getMonitor(e){return this.logCatMonitorsCache[e.toLowerCase()]}static delMonitor(e){this.logCatMonitorsCache[e.toLowerCase()]&&(this.logCatMonitorsCache[e.toLowerCase()].dispose(),delete this.logCatMonitorsCache[e.toLowerCase()])}static cleanUp(){Object.keys(r.logCatMonitorsCache).forEach((e=>{r.delMonitor(e)}))}}t.LogCatMonitorManager=r,r.logCatMonitorsCache={}},1008:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.PackageNameResolver=void 0;const i=r(9452),o=r(5622);class s{constructor(e){this.applicationName=e}resolvePackageName(e){let t=o.join.apply(this,[e].concat(s.DefaultManifestLocation));return this.readPackageName(t)}readPackageName(e){return n(this,void 0,void 0,(function*(){if(e){let t=new i.FileSystem;if(yield t.exists(e)){const r=yield t.readFile(e);let n=this.parsePackageName(r.toString());return n||(n=this.getDefaultPackageName(this.applicationName)),n}return this.getDefaultPackageName(this.applicationName)}return this.getDefaultPackageName(this.applicationName)}))}getDefaultPackageName(e){return(s.DefaultPackagePrefix+e).toLowerCase()}parsePackageName(e){let t=e.match(s.PackageNameRegexp);return t?t[1]:null}}t.PackageNameResolver=s,s.PackageNameRegexp=/package="(.+?)"/,s.ManifestName="AndroidManifest.xml",s.DefaultPackagePrefix="com.",s.SourceRootRelPath=["android","app","src","main"],s.DefaultManifestLocation=s.SourceRootRelPath.concat(s.ManifestName)},8280:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AppLauncher=void 0;const i=r(7549),o=r(9208),s=r(973),a=r(2463),c=r(5034),l=r(5458),u=r(9901),d=r(9144),h=r(7005),p=r(3833),f=r(9327),g=r(3821),m=r(9897),_=r(312),E=r(4724),v=r(9185),y=r(8730),S=r(2424),b=r(9185),T=r(3350),P=r(3403),A=r(7599),w=r(3377),R=r(6465),C=r(1638);P.config({messageFormat:P.MessageFormat.bundle,bundleFormat:P.BundleFormat.standalone})(r(5622).join(__dirname,"src\\extension\\appLauncher.ts"));const I=P.loadMessageBundle(r(5622).join(__dirname,"src\\extension\\appLauncher.ts"));class O{constructor(e,t,r){this.logger=d.OutputChannelLogger.getMainChannel(),this.cdpProxyPort=b.generateRandomPortNumber(),this.cdpProxyHostAddress="127.0.0.1";const n=r.uri.fsPath;this.debugConfigurationRoot=n,this.launchScenariosManager=new w.LaunchScenariosManager(this.debugConfigurationRoot);const i=a.SettingsHelper.getReactNativeProjectRoot(n);this.exponentHelper=new s.ExponentHelper(n,i);const l=new c.PackagerStatusIndicator(n);this.packager=new o.Packager(n,i,a.SettingsHelper.getPackagerPort(r.uri.fsPath),l),this.packager.setExponentHelper(this.exponentHelper),this.reactDirManager=e,this.workspaceFolder=r,this.projectObserver=t,this.rnCdpProxy=new S.ReactNativeCDPProxy(this.cdpProxyHostAddress,this.cdpProxyPort)}static getAppLauncherByProjectRootPath(e){const t=y.ProjectsStorage.projectsCache[e.toLowerCase()];if(!t)throw new Error(`Could not find AppLauncher by the project root path ${e}`);return t}static getOrCreateAppLauncherByProjectRootPath(e){return n(this,void 0,void 0,(function*(){let t=y.ProjectsStorage.projectsCache[e.toLowerCase()];if(!t){const r=R.createAdditionalWorkspaceFolder(e);if(r&&(yield R.onFolderAdded(r),t=y.ProjectsStorage.projectsCache[r.uri.fsPath.toLocaleLowerCase()]),!t)throw new Error(`Could not find AppLauncher by the project root path ${e}`)}return t}))}static getNodeModulesRootByProjectPath(e){return O.getAppLauncherByProjectRootPath(e).getOrUpdateNodeModulesRoot()}updateDebugConfigurationRoot(e){this.debugConfigurationRoot!==e&&(this.debugConfigurationRoot=e,this.launchScenariosManager=new w.LaunchScenariosManager(this.debugConfigurationRoot))}getCdpProxyPort(){return this.cdpProxyPort}getRnCdpProxy(){return this.rnCdpProxy}getPackager(){return this.packager}getWorkspaceFolderUri(){return this.workspaceFolder.uri}getWorkspaceFolder(){return this.workspaceFolder}getReactNativeVersions(){return this.reactNativeVersions}getExponentHelper(){return this.exponentHelper}getReactDirManager(){return this.reactDirManager}setReactNativeVersions(e){this.reactNativeVersions=e}setAppWorker(e){this.appWorker=e}getAppWorker(){return this.appWorker}getMobilePlatform(){return this.mobilePlatform}getOrUpdateNodeModulesRoot(e=!1){if(!this.nodeModulesRoot||e){const e=v.getNodeModulesInFolderHierarchy(this.packager.getProjectPath());if(!e)throw m.ErrorHelper.getInternalError(_.InternalErrorCode.ReactNativePackageIsNotInstalled);this.nodeModulesRoot=e}return this.nodeModulesRoot}dispose(){this.packager.getStatusIndicator().dispose(),this.packager.stop(!0),this.mobilePlatform.dispose()}openFileAtLocation(e,t){return n(this,void 0,void 0,(function*(){const r=yield i.workspace.openTextDocument(i.Uri.file(e)),n=yield i.window.showTextDocument(r);let o=n.document.lineAt(t-1).range;n.selection=new i.Selection(o.start,o.end),n.revealRange(o,i.TextEditorRevealType.InCenter)}))}getPackagerPort(e){return a.SettingsHelper.getPackagerPort(e)}launch(e){return n(this,void 0,void 0,(function*(){let t=this.requestSetup(e);u.isNullOrUndefined(e.logCatArguments)||(t.logCatArguments=[this.parseLogCatArguments(e.logCatArguments)]),u.isNullOrUndefined(e.variant)||(t.variant=e.variant),u.isNullOrUndefined(e.scheme)||(t.scheme=e.scheme),u.isNullOrUndefined(e.productName)||(t.productName=e.productName),u.isNullOrUndefined(e.launchActivity)||(t.debugLaunchActivity=e.launchActivity),e.type===T.DEBUG_TYPES.REACT_NATIVE_DIRECT&&(t.isDirect=!0),t.packagerPort=a.SettingsHelper.getPackagerPort(e.cwd||e.program);const r={packager:this.packager,projectObserver:this.projectObserver};this.mobilePlatform=(new p.PlatformResolver).resolveMobilePlatform(e.platform,t,r);let i={platform:{value:e.platform,isPii:!1}};t.isDirect&&(i.isDirect={value:!0,isPii:!1});try{const r=yield f.ProjectVersionHelper.getReactNativePackageVersionsFromNodeModules(t.nodeModulesRoot,f.ProjectVersionHelper.generateAdditionalPackagesToCheckByPlatform(e));t.reactNativeVersions=r,i=g.TelemetryHelper.addPlatformPropertiesToTelemetryProperties(e,r,i),yield g.TelemetryHelper.generate("launch",i,(r=>n(this,void 0,void 0,(function*(){try{this.mobilePlatform instanceof C.GeneralMobilePlatform&&(r.step("resolveMobileTarget"),yield this.resolveAndSaveMobileTarget(e,this.mobilePlatform)),yield this.mobilePlatform.beforeStartPackager(),r.step("checkPlatformCompatibility"),E.TargetPlatformHelper.checkTargetPlatformSupport(t.platform),r.step("startPackager"),yield this.mobilePlatform.startPackager(),r.step("prewarmBundleCache"),this.logger.info(I(0,null)),yield this.mobilePlatform.prewarmBundleCache(),r.step("mobilePlatform.runApp").add("target",t.target,!1),this.logger.info(I(1,null)),yield this.mobilePlatform.runApp(),t.isDirect?(e.useHermesEngine?(r.step("mobilePlatform.enableHermesDebuggingMode"),t.enableDebug?this.logger.info(I(2,null)):this.logger.info(I(3,null))):e.platform===A.PlatformType.iOS&&(r.step("mobilePlatform.enableIosDirectDebuggingMode"),t.enableDebug?this.logger.info(I(4,null)):this.logger.info(I(5,null))),r.step("mobilePlatform.disableJSDebuggingMode"),this.logger.info(I(6,null)),yield this.mobilePlatform.disableJSDebuggingMode()):(r.step("mobilePlatform.enableJSDebuggingMode"),this.logger.info(I(7,null)),yield this.mobilePlatform.enableJSDebuggingMode())}catch(n){if(!t.enableDebug&&e.platform===A.PlatformType.iOS&&e.type===T.DEBUG_TYPES.REACT_NATIVE)return;throw r.addError(n),this.logger.error(n),n}}))))}catch(e){throw e&&e.errorCode&&(e.errorCode===_.InternalErrorCode.ReactNativePackageIsNotInstalled?g.TelemetryHelper.sendErrorEvent("ReactNativePackageIsNotInstalled",m.ErrorHelper.getInternalError(_.InternalErrorCode.ReactNativePackageIsNotInstalled)):e.errorCode===_.InternalErrorCode.ReactNativeWindowsIsNotInstalled&&g.TelemetryHelper.sendErrorEvent("ReactNativeWindowsPackageIsNotInstalled",m.ErrorHelper.getInternalError(_.InternalErrorCode.ReactNativeWindowsIsNotInstalled))),this.logger.error(e),e}}))}resolveAndSaveMobileTarget(e,t){return n(this,void 0,void 0,(function*(){if(e.target&&!(yield t.getTargetFromRunArgs())){const r=e.target.toLowerCase()===h.TargetType.Simulator||e.target.toLowerCase()===h.TargetType.Device,n=yield t.resolveMobileTarget(e.target);if(n&&r){(yield t.getTargetsCountByFilter((e=>e.isVirtualTarget===n.isVirtualTarget)))>1&&this.launchScenariosManager.updateLaunchScenario(e,{target:e.platform===A.PlatformType.Android?n.name:n.id})}}}))}requestSetup(e){const t=i.workspace.getWorkspaceFolder(i.Uri.file(e.cwd||e.program)),r=this.getProjectRoot(e);let n={workspaceRoot:t.uri.fsPath,projectRoot:r,platform:e.platform,env:e.env,envFile:e.envFile,target:e.target||"simulator",enableDebug:e.enableDebug,nodeModulesRoot:this.getOrUpdateNodeModulesRoot()};if(e.platform===A.PlatformType.Exponent&&(n.expoHostType=e.expoHostType||"lan",n.openExpoQR="boolean"!=typeof e.openExpoQR||e.openExpoQR),l.CommandExecutor.ReactNativeCommand=a.SettingsHelper.getReactNativeGlobalCommandName(t.uri),e.runArguments)n.runArguments=e.runArguments;else{let r=a.SettingsHelper.getRunArgs(e.platform,e.target||"simulator",t.uri);n.runArguments=r}return n}getProjectRoot(e){return a.SettingsHelper.getReactNativeProjectRoot(e.cwd||e.program)}parseLogCatArguments(e){return Array.isArray(e)?e.join(" "):e}}t.AppLauncher=O},9845:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ApplePlatformDebugModeManager=void 0;const i=r(9144),o=r(8102),s=r(3403);s.config({messageFormat:s.MessageFormat.bundle,bundleFormat:s.BundleFormat.standalone})(r(5622).join(__dirname,"src\\extension\\applePlatformDebugModeManager.ts"));const a=s.loadMessageBundle(r(5622).join(__dirname,"src\\extension\\applePlatformDebugModeManager.ts"));class c{constructor(e,t){this.logger=i.OutputChannelLogger.getMainChannel(),this.projectRoot=t,this.platformProjectRoot=e}findPListFileWithRetry(e,t){return n(this,void 0,void 0,(function*(){const r=a(0,null);return o.PromiseUtil.retryAsync((()=>this.tryOneAttemptToFindPListFile(e,t)),(e=>""!==e),c.MAX_RETRIES,c.DELAY_UNTIL_RETRY,r)}))}}t.ApplePlatformDebugModeManager=c,c.REMOTE_DEBUGGING_SETTING_NAME=":RCTDevMenu:isDebuggingRemotely",c.MAX_RETRIES=5,c.DELAY_UNTIL_RETRY=2e3},9885:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CommandPaletteHandler=void 0;const i=r(7549),o=r(7361),s=r(2463),a=r(9144),c=r(7005),l=r(7833),u=r(9911),d=r(9327),h=r(7551),p=r(4724),f=r(3821),g=r(8730),m=r(7599),_=r(1837),E=r(3129),v=r(1376),y=r(643),S=r(5458),b=r(9185),T=r(3403),P=r(9897),A=r(312),w=r(8631),R=r(233),C=r(166),I=r(5618),O=r(3773),N=r(2501),M=r(2162),k=r(5070),D=r(4800),L=r(147),x=r(9047),F=r(3350),U=r(8943),j=r(8287);T.config({messageFormat:T.MessageFormat.bundle,bundleFormat:T.BundleFormat.standalone})(r(5622).join(__dirname,"src\\extension\\commandPaletteHandler.ts"));const B=T.loadMessageBundle(r(5622).join(__dirname,"src\\extension\\commandPaletteHandler.ts"));class G{static startPackager(){return n(this,void 0,void 0,(function*(){const e=yield this.selectProject();yield this.trustedWorkspaceRequired(e.getPackager().getProjectPath(),"Start Packager");const t=e.getOrUpdateNodeModulesRoot();return yield d.ProjectVersionHelper.getReactNativePackageVersionsFromNodeModules(t),yield this.executeCommandInContext("startPackager",e.getWorkspaceFolder(),(()=>n(this,void 0,void 0,(function*(){(yield e.getPackager().isRunning())&&(yield e.getPackager().stop())})))),yield e.getPackager().start()}))}static stopPackager(){return n(this,void 0,void 0,(function*(){const e=yield this.selectProject();return yield this.trustedWorkspaceRequired(e.getPackager().getProjectPath(),"Stop Packager"),yield this.executeCommandInContext("stopPackager",e.getWorkspaceFolder(),(()=>n(this,void 0,void 0,(function*(){yield e.getPackager().stop()}))))}))}static stopAllPackagers(){return n(this,void 0,void 0,(function*(){let e=Object.keys(g.ProjectsStorage.projectsCache),t=[];e.forEach((e=>{let r=g.ProjectsStorage.projectsCache[e];t.push(this.executeCommandInContext("stopPackager",r.getWorkspaceFolder(),(()=>r.getPackager().stop().then())))})),yield Promise.all(t)}))}static restartPackager(){return n(this,void 0,void 0,(function*(){const e=yield this.selectProject();yield this.trustedWorkspaceRequired(e.getPackager().getProjectPath(),"Restart Packager");const t=e.getOrUpdateNodeModulesRoot();return yield d.ProjectVersionHelper.getReactNativePackageVersionsFromNodeModules(t),yield this.executeCommandInContext("restartPackager",e.getWorkspaceFolder(),(()=>this.runRestartPackagerCommandAndUpdateStatus(e)))}))}static publishToExpHost(){return n(this,void 0,void 0,(function*(){const e=yield this.selectProject();yield this.executeCommandInContext("publishToExpHost",e.getWorkspaceFolder(),(()=>n(this,void 0,void 0,(function*(){(yield this.executePublishToExpHost(e))||G.logger.warning(B(0,null))}))))}))}static launchAndroidEmulator(){return n(this,void 0,void 0,(function*(){const e=yield this.selectProject(),t=e.getPackager().getProjectPath(),r=e.getOrUpdateNodeModulesRoot(),n=new C.AdbHelper(t,r),i=new U.AndroidTargetManager(n);yield i.selectAndPrepareTarget((e=>e.isVirtualTarget))}))}static launchIOSSimulator(){return n(this,void 0,void 0,(function*(){const e=new j.IOSTargetManager;yield e.collectTargets(c.TargetType.Simulator),yield e.selectAndPrepareTarget((e=>e.isVirtualTarget))}))}static runAndroid(e=c.TargetType.Simulator){return n(this,void 0,void 0,(function*(){const t=yield this.selectProject();p.TargetPlatformHelper.checkTargetPlatformSupport(m.PlatformType.Android);const r=t.getOrUpdateNodeModulesRoot(),i=yield d.ProjectVersionHelper.getReactNativePackageVersionsFromNodeModules(r);t.setReactNativeVersions(i),yield this.executeCommandInContext("runAndroid",t.getWorkspaceFolder(),(()=>n(this,void 0,void 0,(function*(){const r=this.createPlatform(t,m.PlatformType.Android,l.AndroidPlatform,e);yield r.resolveMobileTarget(e),yield r.beforeStartPackager(),yield r.startPackager(),yield r.runApp(!0),yield r.disableJSDebuggingMode()}))))}))}static runIos(e=c.TargetType.Simulator){return n(this,void 0,void 0,(function*(){const t=yield this.selectProject(),r=t.getOrUpdateNodeModulesRoot(),i=yield d.ProjectVersionHelper.getReactNativePackageVersionsFromNodeModules(r);return t.setReactNativeVersions(i),p.TargetPlatformHelper.checkTargetPlatformSupport(m.PlatformType.iOS),yield this.executeCommandInContext("runIos",t.getWorkspaceFolder(),(()=>n(this,void 0,void 0,(function*(){const r=this.createPlatform(t,m.PlatformType.iOS,u.IOSPlatform,e);try{yield r.resolveMobileTarget(e),yield r.beforeStartPackager(),yield r.startPackager(),yield r.disableJSDebuggingMode()}catch(e){}yield r.runApp()}))))}))}static runExponent(){return n(this,void 0,void 0,(function*(){const e=yield this.selectProject(),t=e.getOrUpdateNodeModulesRoot(),r=yield d.ProjectVersionHelper.getReactNativePackageVersionsFromNodeModules(t);return yield this.loginToExponent(e),yield this.executeCommandInContext("runExponent",e.getWorkspaceFolder(),(()=>n(this,void 0,void 0,(function*(){e.setReactNativeVersions(r);const t=this.createPlatform(e,m.PlatformType.Exponent,_.ExponentPlatform);yield t.beforeStartPackager(),yield t.startPackager(),yield t.runApp()}))))}))}static runWindows(){return n(this,void 0,void 0,(function*(){x.TipNotificationService.getInstance().setKnownDateForFeatureById("debuggingRNWAndMacOSApps");const e=[d.REACT_NATIVE_PACKAGES.REACT_NATIVE_WINDOWS],t=yield this.selectProject();p.TargetPlatformHelper.checkTargetPlatformSupport(m.PlatformType.Windows);const r=yield d.ProjectVersionHelper.getReactNativePackageVersionsFromNodeModules(t.getOrUpdateNodeModulesRoot(),e);return t.setReactNativeVersions(r),yield this.executeCommandInContext("runWindows",t.getWorkspaceFolder(),(()=>n(this,void 0,void 0,(function*(){const e=this.createPlatform(t,m.PlatformType.Windows,k.WindowsPlatform);yield e.beforeStartPackager(),yield e.startPackager(),yield e.runApp(!1)}))))}))}static runMacOS(){return n(this,void 0,void 0,(function*(){x.TipNotificationService.getInstance().setKnownDateForFeatureById("debuggingRNWAndMacOSApps");const e=[d.REACT_NATIVE_PACKAGES.REACT_NATIVE_MACOS],t=yield this.selectProject();p.TargetPlatformHelper.checkTargetPlatformSupport(m.PlatformType.macOS);const r=yield d.ProjectVersionHelper.getReactNativePackageVersionsFromNodeModules(t.getOrUpdateNodeModulesRoot(),e);return t.setReactNativeVersions(r),yield this.executeCommandInContext("runMacOS",t.getWorkspaceFolder(),(()=>n(this,void 0,void 0,(function*(){const e=this.createPlatform(t,m.PlatformType.macOS,L.MacOSPlatform);try{yield e.beforeStartPackager(),yield e.startPackager(),yield e.disableJSDebuggingMode()}catch(e){}yield e.runApp()}))))}))}static showDevMenu(){return n(this,void 0,void 0,(function*(){const e=yield this.selectProject();if(this.createPlatform(e,m.PlatformType.Android,l.AndroidPlatform).showDevMenu().catch((()=>{})),"darwin"===process.platform){this.createPlatform(e,m.PlatformType.iOS,u.IOSPlatform).showDevMenu(e).catch((()=>{}))}process.platform}))}static reloadApp(){return n(this,void 0,void 0,(function*(){const e=yield this.selectProject();if(this.createPlatform(e,m.PlatformType.Android,l.AndroidPlatform).reloadApp().catch((()=>{})),"win32"===process.platform){const t=e.getOrUpdateNodeModulesRoot();d.ProjectVersionHelper.getReactNativePackageVersionsFromNodeModules(t,[d.REACT_NATIVE_PACKAGES.REACT_NATIVE_WINDOWS]).then((t=>{if(!d.ProjectVersionHelper.isVersionError(t.reactNativeWindowsVersion)){this.createPlatform(e,m.PlatformType.Windows,k.WindowsPlatform).reloadApp(e).catch((()=>{}))}}))}if("darwin"===process.platform){this.createPlatform(e,m.PlatformType.iOS,u.IOSPlatform).reloadApp(e).catch((()=>{}))}}))}static runElementInspector(){return n(this,void 0,void 0,(function*(){if(x.TipNotificationService.getInstance().setKnownDateForFeatureById("elementInspector"),G.elementInspector)this.logger.info(B(1,null));else{let e=Object.assign({},process.env);delete e.ATOM_SHELL_INTERNAL_RUN_AS_NODE,delete e.ELECTRON_RUN_AS_NODE;let t=v.HostPlatform.getNpmCliCommand("react-devtools");if(G.elementInspector=E.spawn(t,[],{env:e}),!G.elementInspector.pid)throw G.elementInspector=null,P.ErrorHelper.getInternalError(A.InternalErrorCode.ReactDevtoolsIsNotInstalled);G.elementInspector.stdout.on("data",(e=>{this.logger.info(e)})),G.elementInspector.stderr.on("data",(e=>{this.logger.error(e)})),G.elementInspector.once("exit",(()=>{G.elementInspector=null}))}}))}static stopElementInspector(){return G.elementInspector?G.elementInspector.kill():void 0}static startNetworkInspector(){return n(this,void 0,void 0,(function*(){if(G.networkInspectorModule)this.logger.info(B(2,null));else{const e=yield this.selectProject(),t=new C.AdbHelper(e.getPackager().getProjectPath(),e.getOrUpdateNodeModulesRoot()),r=new N.NetworkInspectorServer,n=new w.AndroidDeviceTracker(t);let o=null;"darwin"===process.platform&&(o=new R.IOSDeviceTracker),G.networkInspectorModule={networkInspector:r,androidDeviceTracker:n,iOSDeviceTracker:o};try{o&&(yield o.start()),yield n.start(),yield r.start(t),i.commands.executeCommand("setContext",D.CONTEXT_VARIABLES_NAMES.IS_RNT_NETWORK_INSPECTOR_RUNNING,!0)}catch(e){throw yield G.stopNetworkInspector(),e}}}))}static stopNetworkInspector(){return n(this,void 0,void 0,(function*(){G.networkInspectorModule&&(G.networkInspectorModule.androidDeviceTracker.stop(),G.networkInspectorModule.iOSDeviceTracker&&G.networkInspectorModule.iOSDeviceTracker.stop(),yield G.networkInspectorModule.networkInspector.stop(),G.networkInspectorModule=null,M.InspectorViewFactory.clearCache()),i.commands.executeCommand("setContext",D.CONTEXT_VARIABLES_NAMES.IS_RNT_NETWORK_INSPECTOR_RUNNING,!1)}))}static getPlatformByCommandName(e){return(e=e.toLocaleLowerCase()).indexOf(m.PlatformType.Android)>-1?m.PlatformType.Android:e.indexOf(m.PlatformType.iOS)>-1?m.PlatformType.iOS:e.indexOf(m.PlatformType.Exponent)>-1?m.PlatformType.Exponent:""}static startLogCatMonitor(){return n(this,void 0,void 0,(function*(){x.TipNotificationService.getInstance().setKnownDateForFeatureById("logCatMonitor");const e=yield this.selectProject(),t=e.getPackager().getProjectPath(),r=e.getOrUpdateNodeModulesRoot(),n=new C.AdbHelper(t,r),o=new U.AndroidTargetManager(n),a=yield o.selectAndPrepareTarget((e=>e.isOnline));if(a){O.LogCatMonitorManager.delMonitor(a.id);let t=s.SettingsHelper.getLogCatFilteringArgs(e.getWorkspaceFolderUri()),r=new I.LogCatMonitor(a.id,n,t);O.LogCatMonitorManager.addMonitor(r),r.start().catch((()=>this.logger.warning(B(3,null))))}else i.window.showErrorMessage(B(4,null))}))}static stopLogCatMonitor(){return n(this,void 0,void 0,(function*(){const e=yield this.selectLogCatMonitor();O.LogCatMonitorManager.delMonitor(e.deviceId)}))}static selectAndInsertDebugConfiguration(e,t,r,o){return n(this,void 0,void 0,(function*(){if(i.window.activeTextEditor&&i.window.activeTextEditor.document===t){const n=i.workspace.getWorkspaceFolder(t.uri),s=yield e.provideDebugConfigurationSequentially(n,o);if(!o.isCancellationRequested&&s){const e=y.LaunchJsonCompletionHelper.getCursorPositionInConfigurationsArray(t,r);if(!e)return;const n=y.LaunchJsonCompletionHelper.isCommaImmediatelyBeforeCursor(t,r)?"BeforeCursor":void 0,o=y.LaunchJsonCompletionHelper.getTextForInsertion(s,e,n),a=new i.WorkspaceEdit;a.insert(t.uri,r,o),yield i.workspace.applyEdit(a),i.commands.executeCommand("editor.action.formatDocument").then((()=>{}),(()=>{}))}}}))}static startDebuggingScenario(e){return n(this,void 0,void 0,(function*(){const t=yield this.selectProject(),r=F.debugConfigurations[e];if(!r)throw new Error(B(5,null,e));r.isDynamic=!0,i.debug.startDebugging(t.getWorkspaceFolder(),r)}))}static trustedWorkspaceRequired(e,t){return n(this,void 0,void 0,(function*(){if(!b.isWorkspaceTrusted())throw P.ErrorHelper.getInternalError(A.InternalErrorCode.WorkspaceIsNotTrusted,e,t)}))}static createPlatform(e,t,r,n){const i=G.getRunOptions(e,t,n);return i.nodeModulesRoot=e.getOrUpdateNodeModulesRoot(),new r(i,{packager:e.getPackager()})}static runRestartPackagerCommandAndUpdateStatus(e){return n(this,void 0,void 0,(function*(){yield e.getPackager().restart(s.SettingsHelper.getPackagerPort(e.getWorkspaceFolderUri().fsPath))}))}static executeCommandInContext(e,t,r){return n(this,void 0,void 0,(function*(){const o={platform:{value:G.getPlatformByCommandName(e),isPii:!1}};yield f.TelemetryHelper.generate("RNCommand",o,(o=>n(this,void 0,void 0,(function*(){o.add("command",e,!1);const n=s.SettingsHelper.getReactNativeProjectRoot(t.uri.fsPath);this.logger.debug(`Command palette: run project ${n} in context`);const a=yield h.ReactNativeProjectHelper.isReactNativeProject(n);o.add("isRNProject",a,!1),a?(this.logger.setFocusOnLogChannel(),yield r()):i.window.showErrorMessage(`${n} workspace is not a React Native project.`)}))))}))}static executePublishToExpHost(e){return n(this,void 0,void 0,(function*(){G.logger.info(B(6,null));const t=yield this.loginToExponent(e);G.logger.debug(`Publishing as ${t.username}...`),yield this.runExponent();const r=yield o.publish(e.getWorkspaceFolderUri().fsPath);if(r.err||!r.url)return!1;const n=B(7,null,r.url);return G.logger.info(n),i.window.showInformationMessage(n),!0}))}static loginToExponent(e){return n(this,void 0,void 0,(function*(){try{return yield e.getExponentHelper().loginToExponent(((e,t)=>new Promise(((r,n)=>{i.window.showInputBox({placeHolder:e,password:t}).then((e=>{r(e||"")}),n)}))),(e=>new Promise(((t,r)=>{i.window.showInformationMessage(e).then((e=>{t(e||"")}),r)}))))}catch(e){throw G.logger.warning(B(8,null)),e}}))}static selectProject(){return n(this,void 0,void 0,(function*(){let e=Object.keys(g.ProjectsStorage.projectsCache);if(e.length>1)return new Promise(((t,r)=>{i.window.showQuickPick(e).then((e=>{e&&(this.logger.debug(`Command palette: selected project ${e}`),t(g.ProjectsStorage.projectsCache[e]))}),r)}));if(1===e.length)return this.logger.debug(`Command palette: once project ${e[0]}`),g.ProjectsStorage.projectsCache[e[0]];throw P.ErrorHelper.getInternalError(A.InternalErrorCode.WorkspaceNotFound,"Current workspace does not contain React Native projects.")}))}static selectLogCatMonitor(){return n(this,void 0,void 0,(function*(){let e=Object.keys(O.LogCatMonitorManager.logCatMonitorsCache);if(e.length>1)return new Promise(((t,r)=>{i.window.showQuickPick(e).then((e=>{e&&(this.logger.debug(`Command palette: selected LogCat monitor ${e}`),t(O.LogCatMonitorManager.logCatMonitorsCache[e]))}),r)}));if(1===e.length)return this.logger.debug(`Command palette: once LogCat monitor ${e[0]}`),O.LogCatMonitorManager.logCatMonitorsCache[e[0]];throw P.ErrorHelper.getInternalError(A.InternalErrorCode.AndroidCouldNotFindActiveLogCatMonitor)}))}static getRunOptions(e,t,r=c.TargetType.Simulator){const n=s.SettingsHelper.getPackagerPort(e.getWorkspaceFolderUri().fsPath),i=s.SettingsHelper.getRunArgs(t,r,e.getWorkspaceFolderUri()),o=s.SettingsHelper.getEnvArgs(t,r,e.getWorkspaceFolderUri()),a=s.SettingsHelper.getEnvFile(t,r,e.getWorkspaceFolderUri()),l=s.SettingsHelper.getReactNativeProjectRoot(e.getWorkspaceFolderUri().fsPath),u=e.getOrUpdateNodeModulesRoot(),d={platform:t,workspaceRoot:e.getWorkspaceFolderUri().fsPath,projectRoot:l,packagerPort:n,runArguments:i,env:o,envFile:a,reactNativeVersions:e.getReactNativeVersions()||{reactNativeVersion:"",reactNativeWindowsVersion:"",reactNativeMacOSVersion:""},nodeModulesRoot:u};return t===m.PlatformType.iOS&&"device"===r&&(d.target="device"),S.CommandExecutor.ReactNativeCommand=s.SettingsHelper.getReactNativeGlobalCommandName(e.getWorkspaceFolderUri()),d}}t.CommandPaletteHandler=G,G.logger=a.OutputChannelLogger.getMainChannel()},4379:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AttachConfigProvider=void 0;const i=r(3757),o=r(3350);class s extends i.BaseConfigProvider{constructor(){super(),this.defaultAddress="localhost",this.maxStepCount=3}buildConfiguration(e,t){return n(this,void 0,void 0,(function*(){this.maxStepCount=3,t.config={};const r={name:"Attach to application",request:"attach",type:o.DEBUG_TYPES.REACT_NATIVE,cwd:"${workspaceFolder}"};return t.scenarioType=o.DebugScenarioType.AttachApp,yield this.configurationProviderHelper.selectApplicationType(e,r,1,this.maxStepCount),Object.assign(t.config,r),t.config.type===o.DEBUG_TYPES.REACT_NATIVE_DIRECT?(this.maxStepCount++,()=>this.configureDirectPlatform(e,t.config)):()=>this.configureAddress(e,t.config)}))}configureDirectPlatform(e,t){return n(this,void 0,void 0,(function*(){return delete t.platform,yield this.configurationProviderHelper.selectPlatform(e,t,o.platformTypeDirectPickConfig,2,this.maxStepCount),t.platform?t.useHermesEngine=!1:(delete t.platform,delete t.useHermesEngine),()=>this.configureAddress(e,t)}))}configureAddress(e,t){return n(this,void 0,void 0,(function*(){return yield this.configurationProviderHelper.configureAddress(e,t,t.type===o.DEBUG_TYPES.REACT_NATIVE_DIRECT?3:2,this.maxStepCount,this.defaultAddress),()=>this.configurePort(e,t)}))}configurePort(e,t){return n(this,void 0,void 0,(function*(){yield this.configurationProviderHelper.configurePort(e,t,t.type===o.DEBUG_TYPES.REACT_NATIVE_DIRECT?4:3,this.maxStepCount)}))}}t.AttachConfigProvider=s},3757:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseConfigProvider=void 0;const n=r(3292);t.BaseConfigProvider=class{constructor(){this.configurationProviderHelper=new n.ConfigurationProviderHelper}}},9139:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigProviderFactory=void 0;const n=r(3850),i=r(8312),o=r(4379),s=r(3350);t.ConfigProviderFactory=class{static create(e){switch(e){case s.DebugScenarioType.RunApp:return new n.RunConfigProvider;case s.DebugScenarioType.DebugApp:return new i.DebugConfigProvider;case s.DebugScenarioType.AttachApp:return new o.AttachConfigProvider;default:throw new Error(`Couldn't find ${e} config adapter type`)}}}},8312:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.DebugConfigProvider=void 0;const i=r(3757),o=r(3350),s=r(7599);class a extends i.BaseConfigProvider{constructor(){super(),this.maxStepCount=2}buildConfiguration(e,t){return n(this,void 0,void 0,(function*(){t.config={};const r={name:"Debug application",request:"launch",type:o.DEBUG_TYPES.REACT_NATIVE,cwd:"${workspaceFolder}"};return t.scenarioType=o.DebugScenarioType.DebugApp,yield this.configurationProviderHelper.selectPlatform(e,r,o.platformTypeDebugPickConfig,1,this.maxStepCount),Object.assign(t.config,r),t.config.platform!==s.PlatformType.Exponent?()=>n(this,void 0,void 0,(function*(){yield this.configureApplicationType(e,t.config),t.config.platform===s.PlatformType.iOS&&t.config.type===o.DEBUG_TYPES.REACT_NATIVE_DIRECT&&(this.maxStepCount=3,yield this.configureUseHermesEngine(e,t.config),!1===t.config.useHermesEngine&&(t.config.target="device"))})):t.config.platform===s.PlatformType.Exponent?()=>this.configureExpoHostType(e,t.config):void 0}))}configureApplicationType(e,t){return n(this,void 0,void 0,(function*(){yield this.configurationProviderHelper.selectApplicationType(e,t,2,this.maxStepCount)}))}configureExpoHostType(e,t){return n(this,void 0,void 0,(function*(){yield this.configurationProviderHelper.selectExpoHostType(e,t,2,this.maxStepCount)}))}configureUseHermesEngine(e,t){return n(this,void 0,void 0,(function*(){delete t.useHermesEngine,yield this.configurationProviderHelper.shouldUseHermesEngine(e,t,3,this.maxStepCount),t.useHermesEngine&&delete t.useHermesEngine}))}}t.DebugConfigProvider=a},3850:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RunConfigProvider=void 0;const i=r(3757),o=r(3350),s=r(7599);class a extends i.BaseConfigProvider{constructor(){super(),this.maxStepCount=2}buildConfiguration(e,t){return n(this,void 0,void 0,(function*(){t.config={};const r={name:"Run application",request:"launch",type:o.DEBUG_TYPES.REACT_NATIVE,cwd:"${workspaceFolder}",enableDebug:!1};return t.scenarioType=o.DebugScenarioType.RunApp,yield this.configurationProviderHelper.selectPlatform(e,r,o.platformTypeRunPickConfig,1,this.maxStepCount),Object.assign(t.config,r),t.config.platform!==s.PlatformType.Exponent?()=>n(this,void 0,void 0,(function*(){yield this.configureApplicationType(e,t.config),t.config.platform===s.PlatformType.iOS&&t.config.type===o.DEBUG_TYPES.REACT_NATIVE_DIRECT&&(this.maxStepCount=3,yield this.configureUseHermesEngine(e,t.config),!1===t.config.useHermesEngine&&(t.config.target="device"))})):void 0}))}configureApplicationType(e,t){return n(this,void 0,void 0,(function*(){yield this.configurationProviderHelper.selectApplicationType(e,t,2,this.maxStepCount)}))}configureUseHermesEngine(e,t){return n(this,void 0,void 0,(function*(){delete t.useHermesEngine,yield this.configurationProviderHelper.shouldUseHermesEngine(e,t,3,this.maxStepCount),t.useHermesEngine&&delete t.useHermesEngine}))}}t.RunConfigProvider=a},3350:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debugConfigurations=t.DEBUG_CONFIGURATION_NAMES=t.expoHostTypePickConfig=t.shouldUseHermesEngine=t.appTypePickConfig=t.platformTypeDirectPickConfig=t.platformTypeDebugPickConfig=t.platformTypeRunPickConfig=t.DEBUG_TYPES=t.DebugScenarioType=void 0;const n=r(7599),i=r(4062),o=r(3403);o.config({messageFormat:o.MessageFormat.bundle,bundleFormat:o.BundleFormat.standalone})(r(5622).join(__dirname,"src\\extension\\debuggingConfiguration\\debugConfigTypesAndConstants.ts"));const s=o.loadMessageBundle(r(5622).join(__dirname,"src\\extension\\debuggingConfiguration\\debugConfigTypesAndConstants.ts"));!function(e){e.RunApp="runapp",e.DebugApp="debugapp",e.AttachApp="attachapp"}(t.DebugScenarioType||(t.DebugScenarioType={})),t.DEBUG_TYPES={REACT_NATIVE:"reactnative",REACT_NATIVE_DIRECT:"reactnativedirect"},t.platformTypeRunPickConfig=[{label:"Android",type:n.PlatformType.Android},{label:"iOS",type:n.PlatformType.iOS},{label:"MacOS",type:n.PlatformType.macOS},{label:"Windows",type:n.PlatformType.Windows}],t.platformTypeDebugPickConfig=[...t.platformTypeRunPickConfig,{label:"Exponent",type:n.PlatformType.Exponent}],t.platformTypeDirectPickConfig=[{label:"Hermes engine - Experimental",type:""},{label:"Direct iOS - Experimental",type:n.PlatformType.iOS}],t.appTypePickConfig=[{label:"Application in direct mode",type:t.DEBUG_TYPES.REACT_NATIVE_DIRECT},{label:"Classic application",type:t.DEBUG_TYPES.REACT_NATIVE}],t.shouldUseHermesEngine=[{label:"Yes",type:"yes"},{label:"No",type:"no"}],t.expoHostTypePickConfig=[{label:"Tunnel",description:s(0,null),type:"tunnel"},{label:"LAN",description:s(1,null),type:"lan"},{label:"Local",description:s(2,null),type:"local"}],t.DEBUG_CONFIGURATION_NAMES={ATTACH_TO_HERMES_APPLICATION_EXPERIMENTAL:"Attach to Hermes application - Experimental",ATTACH_TO_DIRECT_IOS_EXPERIMENTAL:"Attach to Direct iOS - Experimental",ATTACH_TO_PACKAGER:"Attach to packager",DEBUG_ANDROID:"Debug Android",DEBUG_IOS:"Debug iOS",DEBUG_WINDOWS:"Debug Windows",DEBUG_MACOS:"Debug macOS",DEBUG_IN_EXPONENT:"Debug in Exponent",DEBUG_ANDROID_HERMES_EXPERIMENTAL:"Debug Android Hermes - Experimental",DEBUG_DIRECT_IOS_EXPERIMENTAL:"Debug Direct iOS - Experimental",DEBUG_IOS_HERMES_EXPERIMENTAL:"Debug iOS Hermes - Experimental",DEBUG_MACOS_HERMES_EXPERIMENTAL:"Debug macOS Hermes - Experimental",DEBUG_WINDOWS_HERMES_EXPERIMENTAL:"Debug Windows Hermes - Experimental",RUN_ANDROID:"Run Android",RUN_IOS:"Run iOS",RUN_ANDROID_HERMES_EXPERIMENTAL:"Run Android Hermes - Experimental",RUN_IOS_HERMES_EXPERIMENTAL:"Run iOS Hermes - Experimental",RUN_DIRECT_IOS_EXPERIMENTAL:"Run Direct iOS - Experimental"},t.debugConfigurations={[t.DEBUG_CONFIGURATION_NAMES.ATTACH_TO_HERMES_APPLICATION_EXPERIMENTAL]:{name:t.DEBUG_CONFIGURATION_NAMES.ATTACH_TO_HERMES_APPLICATION_EXPERIMENTAL,cwd:"${workspaceFolder}",type:t.DEBUG_TYPES.REACT_NATIVE_DIRECT,request:"attach"},[t.DEBUG_CONFIGURATION_NAMES.ATTACH_TO_DIRECT_IOS_EXPERIMENTAL]:{name:t.DEBUG_CONFIGURATION_NAMES.ATTACH_TO_DIRECT_IOS_EXPERIMENTAL,cwd:"${workspaceFolder}",type:t.DEBUG_TYPES.REACT_NATIVE_DIRECT,request:"attach",platform:n.PlatformType.iOS,useHermesEngine:!1,port:i.IWDPHelper.iOS_WEBKIT_DEBUG_PROXY_DEFAULT_PORT},[t.DEBUG_CONFIGURATION_NAMES.ATTACH_TO_PACKAGER]:{name:t.DEBUG_CONFIGURATION_NAMES.ATTACH_TO_PACKAGER,cwd:"${workspaceFolder}",type:t.DEBUG_TYPES.REACT_NATIVE,request:"attach"},[t.DEBUG_CONFIGURATION_NAMES.DEBUG_ANDROID]:{name:t.DEBUG_CONFIGURATION_NAMES.DEBUG_ANDROID,cwd:"${workspaceFolder}",type:t.DEBUG_TYPES.REACT_NATIVE,request:"launch",platform:n.PlatformType.Android},[t.DEBUG_CONFIGURATION_NAMES.DEBUG_IOS]:{name:t.DEBUG_CONFIGURATION_NAMES.DEBUG_IOS,cwd:"${workspaceFolder}",type:t.DEBUG_TYPES.REACT_NATIVE,request:"launch",platform:n.PlatformType.iOS},[t.DEBUG_CONFIGURATION_NAMES.DEBUG_WINDOWS]:{name:t.DEBUG_CONFIGURATION_NAMES.DEBUG_WINDOWS,cwd:"${workspaceFolder}",type:t.DEBUG_TYPES.REACT_NATIVE,request:"launch",platform:n.PlatformType.Windows},[t.DEBUG_CONFIGURATION_NAMES.DEBUG_MACOS]:{name:t.DEBUG_CONFIGURATION_NAMES.DEBUG_MACOS,cwd:"${workspaceFolder}",type:t.DEBUG_TYPES.REACT_NATIVE,request:"launch",platform:n.PlatformType.macOS},[t.DEBUG_CONFIGURATION_NAMES.DEBUG_IN_EXPONENT]:{name:t.DEBUG_CONFIGURATION_NAMES.DEBUG_IN_EXPONENT,cwd:"${workspaceFolder}",type:t.DEBUG_TYPES.REACT_NATIVE,request:"launch",platform:n.PlatformType.Exponent},[t.DEBUG_CONFIGURATION_NAMES.DEBUG_ANDROID_HERMES_EXPERIMENTAL]:{name:t.DEBUG_CONFIGURATION_NAMES.DEBUG_ANDROID_HERMES_EXPERIMENTAL,cwd:"${workspaceFolder}",type:t.DEBUG_TYPES.REACT_NATIVE_DIRECT,request:"launch",platform:n.PlatformType.Android},[t.DEBUG_CONFIGURATION_NAMES.DEBUG_DIRECT_IOS_EXPERIMENTAL]:{name:t.DEBUG_CONFIGURATION_NAMES.DEBUG_DIRECT_IOS_EXPERIMENTAL,cwd:"${workspaceFolder}",type:t.DEBUG_TYPES.REACT_NATIVE_DIRECT,request:"launch",platform:n.PlatformType.iOS,useHermesEngine:!1,target:"device",port:i.IWDPHelper.iOS_WEBKIT_DEBUG_PROXY_DEFAULT_PORT},[t.DEBUG_CONFIGURATION_NAMES.DEBUG_IOS_HERMES_EXPERIMENTAL]:{name:t.DEBUG_CONFIGURATION_NAMES.DEBUG_IOS_HERMES_EXPERIMENTAL,cwd:"${workspaceFolder}",type:t.DEBUG_TYPES.REACT_NATIVE_DIRECT,request:"launch",platform:n.PlatformType.iOS},[t.DEBUG_CONFIGURATION_NAMES.DEBUG_MACOS_HERMES_EXPERIMENTAL]:{name:t.DEBUG_CONFIGURATION_NAMES.DEBUG_MACOS_HERMES_EXPERIMENTAL,cwd:"${workspaceFolder}",type:t.DEBUG_TYPES.REACT_NATIVE_DIRECT,request:"launch",platform:n.PlatformType.macOS},[t.DEBUG_CONFIGURATION_NAMES.DEBUG_WINDOWS_HERMES_EXPERIMENTAL]:{name:t.DEBUG_CONFIGURATION_NAMES.DEBUG_WINDOWS_HERMES_EXPERIMENTAL,cwd:"${workspaceFolder}",type:t.DEBUG_TYPES.REACT_NATIVE_DIRECT,request:"launch",platform:n.PlatformType.Windows},[t.DEBUG_CONFIGURATION_NAMES.RUN_ANDROID]:{name:t.DEBUG_CONFIGURATION_NAMES.RUN_ANDROID,cwd:"${workspaceFolder}",type:t.DEBUG_TYPES.REACT_NATIVE,request:"launch",platform:n.PlatformType.Android,enableDebug:!1},[t.DEBUG_CONFIGURATION_NAMES.RUN_IOS]:{name:t.DEBUG_CONFIGURATION_NAMES.RUN_IOS,cwd:"${workspaceFolder}",type:t.DEBUG_TYPES.REACT_NATIVE,request:"launch",platform:n.PlatformType.iOS,enableDebug:!1},[t.DEBUG_CONFIGURATION_NAMES.RUN_ANDROID_HERMES_EXPERIMENTAL]:{name:t.DEBUG_CONFIGURATION_NAMES.RUN_ANDROID_HERMES_EXPERIMENTAL,cwd:"${workspaceFolder}",type:t.DEBUG_TYPES.REACT_NATIVE_DIRECT,request:"launch",platform:n.PlatformType.Android,enableDebug:!1},[t.DEBUG_CONFIGURATION_NAMES.RUN_IOS_HERMES_EXPERIMENTAL]:{name:t.DEBUG_CONFIGURATION_NAMES.RUN_IOS_HERMES_EXPERIMENTAL,cwd:"${workspaceFolder}",type:t.DEBUG_TYPES.REACT_NATIVE_DIRECT,request:"launch",platform:n.PlatformType.iOS,enableDebug:!1},[t.DEBUG_CONFIGURATION_NAMES.RUN_DIRECT_IOS_EXPERIMENTAL]:{name:t.DEBUG_CONFIGURATION_NAMES.RUN_DIRECT_IOS_EXPERIMENTAL,cwd:"${workspaceFolder}",type:t.DEBUG_TYPES.REACT_NATIVE_DIRECT,request:"launch",platform:n.PlatformType.iOS,enableDebug:!1,useHermesEngine:!1,target:"device"}}},4792:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DebugScenarioNameGenerator=void 0;const n=r(7599),i=r(3350),o=r(3350);t.DebugScenarioNameGenerator=class{static createScenarioName(e,t,r,n=!1,i=!1){let s=this.createScenarioAccordingToDebugScenarioType(e);return s.platformType=this.getPlatformTypeName(r),t===o.DEBUG_TYPES.REACT_NATIVE?this.configureNotDirectModeScenario(s,e,t,r):this.configureDirectModeScenario(s,e,t,n,r),i&&(s.experimentalDescription="- Experimental"),this.debugScenarioNameToString(s)}static createScenarioAccordingToDebugScenarioType(e){switch(e){case i.DebugScenarioType.RunApp:return{debugScenarioType:"Run"};case i.DebugScenarioType.DebugApp:return{debugScenarioType:"Debug"};case i.DebugScenarioType.AttachApp:return{debugScenarioType:"Attach to"}}}static configureNotDirectModeScenario(e,t,r,o){t===i.DebugScenarioType.AttachApp&&(e.platformType="packager"),o===n.PlatformType.Exponent&&(e.prePlatformTypeDescription="in")}static configureDirectModeScenario(e,t,r,o,s){switch(o&&(e.postPlatformTypeDescription=t===i.DebugScenarioType.AttachApp?"Hermes application":"Hermes"),s){case n.PlatformType.iOS:o||(e.prePlatformTypeDescription="Direct")}}static getPlatformTypeName(e){switch(e){case n.PlatformType.Android:return"Android";case n.PlatformType.iOS:return"iOS";case n.PlatformType.Exponent:return"Exponent";case n.PlatformType.Windows:return"Windows";case n.PlatformType.macOS:return"macOS";default:return""}}static debugScenarioNameToString(e){let t=e.debugScenarioType;return e.prePlatformTypeDescription&&(t+=` ${e.prePlatformTypeDescription}`),e.platformType&&(t+=` ${e.platformType}`),e.postPlatformTypeDescription&&(t+=` ${e.postPlatformTypeDescription}`),e.experimentalDescription&&(t+=` ${e.experimentalDescription}`),t}}},9149:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LaunchJsonCompletionProvider=t.JsonLanguages=void 0;const n=r(7549),i=r(5622),o=r(516),s=r(3403);s.config({messageFormat:s.MessageFormat.bundle,bundleFormat:s.BundleFormat.standalone})(r(5622).join(__dirname,"src\\extension\\debuggingConfiguration\\launchJsonCompletionProvider.ts"));const a=s.loadMessageBundle(r(5622).join(__dirname,"src\\extension\\debuggingConfiguration\\launchJsonCompletionProvider.ts"));!function(e){e.json="json",e.jsonWithComments="jsonc"}(t.JsonLanguages||(t.JsonLanguages={}));t.LaunchJsonCompletionProvider=class{constructor(){this.configurationNodeName="configurations"}provideCompletionItems(e,t,r,i){return this.canProvideCompletions(e,t)?[{command:{command:"reactNative.selectAndInsertDebugConfiguration",title:a(0,null),arguments:[e,t,r]},documentation:a(1,null),sortText:"AAAA",preselect:!0,kind:n.CompletionItemKind.Enum,label:"React Native",insertText:new n.SnippetString}]:[]}canProvideCompletions(e,t){if("launch.json"!==i.basename(e.uri.fsPath))return!1;const r=o.getLocation(e.getText(),e.offsetAt(t));return r.path[0]===this.configurationNodeName&&2===r.path.length}}},3614:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.MultiStepInput=t.InputFlowAction=void 0;const i=r(7549);class o{}t.InputFlowAction=o,o.back=new o,o.cancel=new o,o.resume=new o;t.MultiStepInput=class{constructor(){this.steps=[]}run(e,t){return this.stepThrough(e,t)}showQuickPick({title:e,step:t,totalSteps:r,items:s,activeItem:a,placeholder:c,buttons:l,shouldResume:u,matchOnDescription:d,matchOnDetail:h,acceptFilterBoxTextAsSelection:p}){return n(this,void 0,void 0,(function*(){const f=[];try{return yield new Promise(((g,m)=>{const _=i.window.createQuickPick();_.title=e,_.step=t,_.totalSteps=r,_.placeholder=c,_.ignoreFocusOut=!0,_.items=s,_.matchOnDescription=d||!1,_.matchOnDetail=h||!1,_.activeItems=a?[a]:[],_.buttons=[...this.steps.length>1?[i.QuickInputButtons.Back]:[],...l||[]],f.push(_.onDidTriggerButton((e=>{e===i.QuickInputButtons.Back?m(o.back):g(e)})),_.onDidChangeSelection((e=>g(e[0]))),_.onDidHide((()=>{(()=>n(this,void 0,void 0,(function*(){m(u&&(yield u())?o.resume:o.cancel)})))().catch(m)}))),p&&f.push(_.onDidAccept((()=>{g(_.value)}))),this.current&&this.current.dispose(),this.current=_,this.current.show()}))}finally{f.forEach((e=>e.dispose()))}}))}showInputBox({title:e,step:t,totalSteps:r,value:s,prompt:a,validate:c,password:l,buttons:u,shouldResume:d}){return n(this,void 0,void 0,(function*(){const h=[];try{return yield new Promise(((p,f)=>{const g=i.window.createInputBox();g.title=e,g.step=t,g.totalSteps=r,g.password=!!l,g.value=s||"",g.prompt=a,g.ignoreFocusOut=!0,g.buttons=[...this.steps.length>1?[i.QuickInputButtons.Back]:[],...u||[]];let m=c("");h.push(g.onDidTriggerButton((e=>{e===i.QuickInputButtons.Back?f(o.back):p(e)})),g.onDidAccept((()=>n(this,void 0,void 0,(function*(){const e=g.value;g.enabled=!1,g.busy=!0,(yield c(e))||p(e),g.enabled=!0,g.busy=!1})))),g.onDidChangeValue((e=>n(this,void 0,void 0,(function*(){const t=c(e);m=t;const r=yield t;t===m&&(g.validationMessage=r)})))),g.onDidHide((()=>{(()=>n(this,void 0,void 0,(function*(){f(d&&(yield d())?o.resume:o.cancel)})))().catch(f)}))),this.current&&this.current.dispose(),this.current=g,this.current.show()}))}finally{h.forEach((e=>e.dispose()))}}))}stepThrough(e,t){return n(this,void 0,void 0,(function*(){let r=e;for(;r;){this.steps.push(r),this.current&&(this.current.enabled=!1,this.current.busy=!0);try{r=yield r(this,t)}catch(e){if(e===o.back)this.steps.pop(),r=this.steps.pop();else if(e===o.resume)r=this.steps.pop();else{if(e!==o.cancel)throw e;r=void 0}}}this.current&&this.current.dispose()}))}}},3879:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ReactNativeDebugConfigProvider=void 0;const i=r(7549),o=r(3821),s=r(4301),a=r(3350),c=r(4792),l=r(3350),u=r(3614),d=r(9139),h=r(3403);h.config({messageFormat:h.MessageFormat.bundle,bundleFormat:h.BundleFormat.standalone})(r(5622).join(__dirname,"src\\extension\\debuggingConfiguration\\reactNativeDebugConfigProvider.ts"));const p=h.loadMessageBundle(r(5622).join(__dirname,"src\\extension\\debuggingConfiguration\\reactNativeDebugConfigProvider.ts"));t.ReactNativeDebugConfigProvider=class{constructor(){this.initialPickConfig=[{label:a.DEBUG_CONFIGURATION_NAMES.DEBUG_ANDROID,description:p(0,null)},{label:a.DEBUG_CONFIGURATION_NAMES.RUN_ANDROID,description:p(1,null)},{label:a.DEBUG_CONFIGURATION_NAMES.DEBUG_IOS,description:p(2,null)},{label:a.DEBUG_CONFIGURATION_NAMES.RUN_IOS,description:p(3,null)},{label:a.DEBUG_CONFIGURATION_NAMES.DEBUG_WINDOWS,description:p(4,null)},{label:a.DEBUG_CONFIGURATION_NAMES.DEBUG_MACOS,description:p(5,null)},{label:a.DEBUG_CONFIGURATION_NAMES.ATTACH_TO_PACKAGER,description:p(6,null)},{label:a.DEBUG_CONFIGURATION_NAMES.DEBUG_IN_EXPONENT,description:p(7,null)},{label:a.DEBUG_CONFIGURATION_NAMES.DEBUG_ANDROID_HERMES_EXPERIMENTAL,description:p(8,null)},{label:a.DEBUG_CONFIGURATION_NAMES.RUN_ANDROID_HERMES_EXPERIMENTAL,description:p(9,null)},{label:a.DEBUG_CONFIGURATION_NAMES.DEBUG_IOS_HERMES_EXPERIMENTAL,description:p(10,null)},{label:a.DEBUG_CONFIGURATION_NAMES.RUN_IOS_HERMES_EXPERIMENTAL,description:p(11,null)},{label:a.DEBUG_CONFIGURATION_NAMES.DEBUG_MACOS_HERMES_EXPERIMENTAL,description:p(12,null)},{label:a.DEBUG_CONFIGURATION_NAMES.DEBUG_WINDOWS_HERMES_EXPERIMENTAL,description:p(13,null)},{label:a.DEBUG_CONFIGURATION_NAMES.ATTACH_TO_HERMES_APPLICATION_EXPERIMENTAL,description:p(14,null)},{label:a.DEBUG_CONFIGURATION_NAMES.DEBUG_DIRECT_IOS_EXPERIMENTAL,description:p(15,null)},{label:a.DEBUG_CONFIGURATION_NAMES.RUN_DIRECT_IOS_EXPERIMENTAL,description:p(16,null)},{label:a.DEBUG_CONFIGURATION_NAMES.ATTACH_TO_DIRECT_IOS_EXPERIMENTAL,description:p(17,null)}],this.sequentialPickConfig=[{label:"Run application",description:p(18,null),type:l.DebugScenarioType.RunApp},{label:"Debug application",description:p(19,null),type:l.DebugScenarioType.DebugApp},{label:"Attach to application",description:p(20,null),type:l.DebugScenarioType.AttachApp}]}provideDebugConfigurations(e,t){return n(this,void 0,void 0,(function*(){return new Promise((e=>{const t=this.prepareDebugConfigPicker(),r=[],n=()=>{let n=o.TelemetryHelper.createTelemetryEvent("chosenDebugConfigurations"),i=t.selectedItems.map((e=>e.label));n.properties.selectedItems=i,s.Telemetry.send(n);const a=this.gatherDebugScenarios(i);r.forEach((e=>e.dispose())),e(a)};r.push(t.onDidAccept(n),t.onDidHide(n),t),t.show()}))}))}provideDebugConfigurationSequentially(e,t){return n(this,void 0,void 0,(function*(){const r={config:{},scenarioType:l.DebugScenarioType.DebugApp,folder:e,token:t},n=new u.MultiStepInput;return yield n.run(((e,t)=>this.pickDebugConfiguration(e,t)),r),0===Object.keys(r.config).length?void 0:(r.config.type===l.DEBUG_TYPES.REACT_NATIVE_DIRECT?r.config.name=c.DebugScenarioNameGenerator.createScenarioName(r.scenarioType,r.config.type,r.config.platform,!1!==r.config.useHermesEngine,!0):r.config.name=c.DebugScenarioNameGenerator.createScenarioName(r.scenarioType,r.config.type||l.DEBUG_TYPES.REACT_NATIVE,r.config.platform),r.config)}))}pickDebugConfiguration(e,t){return n(this,void 0,void 0,(function*(){t.config={};const r=yield e.showQuickPick({title:p(21,null),placeholder:"Debug Configuration",activeItem:this.sequentialPickConfig[0],items:this.sequentialPickConfig});if(r){const e=d.ConfigProviderFactory.create(r.type);return e.buildConfiguration.bind(e)}}))}gatherDebugScenarios(e){return e.map((e=>a.debugConfigurations[e]))}prepareDebugConfigPicker(){const e=i.window.createQuickPick();return e.canSelectMany=!0,e.ignoreFocusOut=!0,e.title=p(22,null),e.items=this.initialPickConfig,e.selectedItems=[this.initialPickConfig[0]],e}}},1126:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ReactNativeDebugDynamicConfigProvider=void 0;const i=r(3350),o=r(2463),s=r(3821),a=r(4301),c=r(9327),l=r(7551),u=r(7599),d=r(3614),h=r(3292);t.ReactNativeDebugDynamicConfigProvider=class{provideDebugConfigurations(e,t){return n(this,void 0,void 0,(function*(){let t=Object.assign({},i.debugConfigurations);if(e){let r=e.uri.fsPath,n=o.SettingsHelper.getReactNativeProjectRoot(r);const s=yield c.ProjectVersionHelper.tryToGetRNSemverValidVersionsFromProjectPackage(n,c.ProjectVersionHelper.generateAllAdditionalPackages(),n);let a=!1,u=!1,d=l.ReactNativeProjectHelper.isAndroidHermesEnabled(r),h=l.ReactNativeProjectHelper.isIOSHermesEnabled(r);c.ProjectVersionHelper.isVersionError(s.reactNativeWindowsVersion)?(delete t[i.DEBUG_CONFIGURATION_NAMES.DEBUG_WINDOWS],delete t[i.DEBUG_CONFIGURATION_NAMES.DEBUG_WINDOWS_HERMES_EXPERIMENTAL]):(u=l.ReactNativeProjectHelper.isWindowsHermesEnabled(r),u||delete t[i.DEBUG_CONFIGURATION_NAMES.DEBUG_WINDOWS_HERMES_EXPERIMENTAL]),c.ProjectVersionHelper.isVersionError(s.reactNativeMacOSVersion)?(delete t[i.DEBUG_CONFIGURATION_NAMES.DEBUG_MACOS],delete t[i.DEBUG_CONFIGURATION_NAMES.DEBUG_MACOS_HERMES_EXPERIMENTAL]):(a=l.ReactNativeProjectHelper.isMacOSHermesEnabled(r),a||delete t[i.DEBUG_CONFIGURATION_NAMES.DEBUG_MACOS_HERMES_EXPERIMENTAL]),d||(delete t[i.DEBUG_CONFIGURATION_NAMES.DEBUG_ANDROID_HERMES_EXPERIMENTAL],delete t[i.DEBUG_CONFIGURATION_NAMES.RUN_ANDROID_HERMES_EXPERIMENTAL]),h||(delete t[i.DEBUG_CONFIGURATION_NAMES.DEBUG_IOS_HERMES_EXPERIMENTAL],delete t[i.DEBUG_CONFIGURATION_NAMES.RUN_IOS_HERMES_EXPERIMENTAL]),d||h||a||u||delete t[i.DEBUG_CONFIGURATION_NAMES.ATTACH_TO_HERMES_APPLICATION_EXPERIMENTAL]}const r=Object.values(t);return r.forEach((e=>{e.isDynamic=!0})),r}))}resolveDebugConfiguration(e,t,r){return n(this,void 0,void 0,(function*(){if(t.isDynamic){const n=s.TelemetryHelper.createTelemetryEvent("chosenDynamicDebugConfiguration",{selectedConfiguration:t.name});a.Telemetry.send(n),"attach"===t.request&&(yield this.configureAttachScenario(e,t,r)),t.platform===u.PlatformType.Exponent&&(yield this.configureExpoScenario(e,t,r))}return t}))}configureExpoScenario(e,t,r){return n(this,void 0,void 0,(function*(){const o={config:t,scenarioType:i.DebugScenarioType.DebugApp,folder:e,token:r},s=new d.MultiStepInput,a=new h.ConfigurationProviderHelper;return yield s.run(((e,t)=>n(this,void 0,void 0,(function*(){yield a.selectExpoHostType(e,t.config,1,1)}))),o),t}))}configureAttachScenario(e,t,r){return n(this,void 0,void 0,(function*(){const o={config:t,scenarioType:i.DebugScenarioType.AttachApp,folder:e,token:r},s=new d.MultiStepInput,a=new h.ConfigurationProviderHelper,c=(e,t)=>n(this,void 0,void 0,(function*(){yield a.configurePort(e,t,2,2)})),l=(e,t)=>n(this,void 0,void 0,(function*(){return yield a.configureAddress(e,t,1,2,"localhost"),()=>c(e,t)}));return yield s.run(((e,t)=>l(e,t.config)),o),t}))}}},973:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ExponentHelper=void 0;const i=r(5622),o=r(6625),s=r(7549),a=r(2884),c=r(7361),l=r(1506),u=r(9327),d=r(9144),h=r(1409),p=r(3403),f=r(9897),g=r(9901),m=r(7670),_=r(312),E=r(9452),v=r(2463);p.config({messageFormat:p.MessageFormat.bundle,bundleFormat:p.BundleFormat.standalone})(r(5622).join(__dirname,"src\\extension\\exponent\\exponentHelper.ts"));const y=p.loadMessageBundle(r(5622).join(__dirname,"src\\extension\\exponent\\exponentHelper.ts")),S="app.json",b="exponentIndex.js",T="index.js",P="index.ios.js",A="index.android.js",w=/\\/g;t.ExponentHelper=class{constructor(e,t,r=new E.FileSystem){this.logger=d.OutputChannelLogger.getMainChannel(),this.workspaceRootPath=e,this.projectRootPath=t,this.fs=r,this.hasInitialized=!1,this.nodeModulesGlobalPathAddedToEnv=!1}preloadExponentDependency(){return n(this,void 0,void 0,(function*(){return this.logger.info(y(0,null)),Promise.all([c.getXDLPackage(),c.getMetroConfigPackage()])}))}configureExponentEnvironment(){return n(this,void 0,void 0,(function*(){let e;yield this.lazilyInitialize(),this.logger.logStream(y(1,null)),e=yield this.isExpoManagedApp(!0),e||(yield this.appHasExpoInstalled())||(this.logger.logStream("\n"),this.logger.logStream(y(2,null)),this.logger.logStream("\n")),this.logger.logStream(".\n"),yield this.patchAppJson(e)}))}loginToExponent(e,t){return n(this,void 0,void 0,(function*(){yield this.lazilyInitialize();let r=yield c.currentUser();if(!r){yield t(y(3,null));const n=yield e(y(4,null),!1),i=yield e(y(5,null),!0);r=yield c.login(n,i)}return r}))}getExpPackagerOptions(e){return n(this,void 0,void 0,(function*(){yield this.lazilyInitialize();const t=yield this.getFromExpConfig("packagerOpts").then((e=>e||{})),r=yield this.getArgumentsFromExpoMetroConfig(e);return Object.assign(Object.assign({},t),r)}))}appHasExpoInstalled(){return n(this,void 0,void 0,(function*(){const e=yield this.getAppPackageInformation();return e.dependencies&&e.dependencies.expo?(this.logger.debug("'expo' package is found in 'dependencies' section of package.json"),!0):!(!e.devDependencies||!e.devDependencies.expo)&&(this.logger.debug("'expo' package is found in 'devDependencies' section of package.json"),!0)}))}isExpoManagedApp(e=!1){return n(this,void 0,void 0,(function*(){e&&this.logger.logStream("...");try{if(!(yield this.appHasExpoInstalled()))return!1;const t=yield this.isBareWorkflowProject();return e&&this.logger.logStream("."),!t}catch(t){return this.logger.error(t.message,t,t.stack),e&&this.logger.logStream("."),!1}}))}findOrInstallNgrokGlobally(){return n(this,void 0,void 0,(function*(){let e;try{yield this.addNodeModulesPathToEnvIfNotPresent(),e=yield c.isNgrokInstalled(this.projectRootPath)}catch(t){e=!1}if(!e){const e=v.SettingsHelper.getExpoDependencyVersion("@expo/ngrok"),t=new m.PackageConfig("@expo/ngrok",e),r=y(6,null,t.getStringForInstall()),n=y(7,null),i=y(8,null);if((yield s.window.showWarningMessage(r,n,i))!==n)throw f.ErrorHelper.getInternalError(_.InternalErrorCode.NgrokIsNotInstalledGlobally,t.getVersion(!0));yield m.PackageLoader.getInstance().installGlobalPackage(t,this.projectRootPath),this.logger.info(y(9,null,t.getStringForInstall()))}}))}removeNodeModulesPathFromEnvIfWasSet(){this.nodeModulesGlobalPathAddedToEnv&&(delete process.env.NODE_MODULES,this.nodeModulesGlobalPathAddedToEnv=!1)}addNodeModulesPathToEnvIfNotPresent(){return n(this,void 0,void 0,(function*(){process.env.NODE_MODULES||(process.env.NODE_MODULES=yield g.getNodeModulesGlobalPath(),this.nodeModulesGlobalPathAddedToEnv=!0)}))}isBareWorkflowProject(){return n(this,void 0,void 0,(function*(){const e=yield this.getAppPackageInformation();if(e.dependencies&&e.dependencies.expokit)return!1;if(e.devDependencies&&e.devDependencies.expokit)return!1;if(a.sync("ios/**/*.xcodeproj",{absolute:!0,cwd:this.projectRootPath}).length)return!0;return!!a.sync("android/**/*.gradle",{absolute:!0,cwd:this.projectRootPath}).length}))}getArgumentsFromExpoMetroConfig(e){return n(this,void 0,void 0,(function*(){return{sourceExts:(yield c.getMetroConfig(e)).resolver.sourceExts}}))}dotvscodePath(e,t){let r=[".vscode",e];return t&&(r=[this.workspaceRootPath].concat(...r)),i.join(...r)}createExpoEntry(e){return n(this,void 0,void 0,(function*(){yield this.lazilyInitialize();const t=yield this.detectEntry(),r=this.generateFileContent(e,t);return yield this.fs.writeFile(this.dotvscodePath(b,!0),r)}))}detectEntry(){return n(this,void 0,void 0,(function*(){yield this.lazilyInitialize();const[e,t]=yield Promise.all([this.fs.exists(this.pathToFileInWorkspace(T)),this.fs.exists(this.pathToFileInWorkspace(P)),this.fs.exists(this.pathToFileInWorkspace(A))]);return e?this.pathToFileInWorkspace(T):t?this.pathToFileInWorkspace(P):this.pathToFileInWorkspace(A)}))}generateFileContent(e,t){return`// This file is automatically generated by VS Code\n// Please do not modify it manually. All changes will be lost.\nvar React = require('${this.pathToFileInWorkspace("/node_modules/react")}');\nvar { Component } = React;\nvar ReactNative = require('${this.pathToFileInWorkspace("/node_modules/react-native")}');\nvar { AppRegistry } = ReactNative;\nAppRegistry.registerRunnable('main', function(appParameters) {\n    AppRegistry.runApplication('${e}', appParameters);\n});\nvar entryPoint = require('${t}');`}patchAppJson(e=!0){return n(this,void 0,void 0,(function*(){let t;try{t=yield this.readAppJson()}catch(e){t={}}const r=yield this.getPackageName(),n=t.expo||{};if(n.name&&n.slug||(n.slug=n.slug||t.name||r.replace(" ","-"),n.name=n.name||t.name||r,t.expo=n),t.name||(t.name=r),!t.expo.sdkVersion){const e=yield this.exponentSdk(!0);t.expo.sdkVersion=e}e||(t.expo.entryPoint=this.dotvscodePath(b,!1)),t=t?yield this.writeAppJson(t):t,e||(yield this.createExpoEntry(t.expo.name))}))}exponentSdk(e=!1){return n(this,void 0,void 0,(function*(){e&&this.logger.logStream("...");const t=yield u.ProjectVersionHelper.getReactNativeVersions(this.projectRootPath);e&&this.logger.logStream(".");const r=yield this.mapFacebookReactNativeVersionToExpoVersion(t.reactNativeVersion);if(!r){const e=yield this.getFacebookReactNativeVersions();throw f.ErrorHelper.getInternalError(_.InternalErrorCode.RNVersionNotSupportedByExponent,e.join(", "))}return r}))}getFacebookReactNativeVersions(){return n(this,void 0,void 0,(function*(){const e=yield c.getExpoSdkVersions(),t=new Set(Object.values(e).map((e=>e.facebookReactNativeVersion)).filter((e=>e)));return Array.from(t)}))}mapFacebookReactNativeVersionToExpoVersion(e){return n(this,void 0,void 0,(function*(){if(!o.valid(e))throw new Error(`${e} is not a valid version. It must be in the form of x.y.z`);const t=yield c.getReleasedExpoSdkVersions();let r=null;for(const[n,{facebookReactNativeVersion:i}]of Object.entries(t))o.major(e)!==o.major(i)||o.minor(e)!==o.minor(i)||r&&!o.gt(n,r)||(r=n);return r}))}getPackageName(){return new l.Package(this.projectRootPath,{fileSystem:this.fs}).name()}getExpConfig(){return n(this,void 0,void 0,(function*(){try{return this.readExpJson()}catch(e){if("ENOENT"===e.code){return(yield this.readAppJson()).expo||{}}throw e}}))}getFromExpConfig(e){return n(this,void 0,void 0,(function*(){return(yield this.getExpConfig())[e]}))}readExpJson(){return n(this,void 0,void 0,(function*(){const e=this.pathToFileInWorkspace("exp.json"),t=yield this.fs.readFile(e);return JSON.parse(h(t.toString()))}))}readAppJson(){return n(this,void 0,void 0,(function*(){const e=this.pathToFileInWorkspace(S),t=yield this.fs.readFile(e);return JSON.parse(h(t.toString()))}))}writeAppJson(e){return n(this,void 0,void 0,(function*(){const t=this.pathToFileInWorkspace(S);return yield this.fs.writeFile(t,JSON.stringify(e,null,2)),e}))}getAppPackageInformation(){return new l.Package(this.projectRootPath,{fileSystem:this.fs}).parsePackageInformation()}pathToFileInWorkspace(e){return i.join(this.projectRootPath,e).replace(w,"/")}lazilyInitialize(){return n(this,void 0,void 0,(function*(){this.hasInitialized||(this.hasInitialized=!0,yield this.preloadExponentDependency(),c.configReactNativeVersionWarnings(),c.attachLoggerStream(this.projectRootPath,{stream:{write:e=>{e.level<=30?this.logger.logStream(e.msg):40===e.level?this.logger.warning(e.msg):this.logger.error(e.msg)}},type:"raw"}))}))}}},1837:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ExponentPlatform=void 0;const i=r(9897),o=r(312),s=r(7599),a=r(7005),c=r(3821),l=r(1181),u=r(7549),d=r(7361),h=r(8835),p=r(3403);p.config({messageFormat:p.MessageFormat.bundle,bundleFormat:p.BundleFormat.standalone})(r(5622).join(__dirname,"src\\extension\\exponent\\exponentPlatform.ts"));const f=p.loadMessageBundle(r(5622).join(__dirname,"src\\extension\\exponent\\exponentPlatform.ts"));class g extends a.GeneralPlatform{constructor(e,t={}){super(e,t),this.qrCodeContentProvider=new l.QRCodeContentProvider,this.exponentHelper=this.packager.getExponentHelper(),this.exponentTunnelPath=null}runApp(){return n(this,void 0,void 0,(function*(){let e={platform:{value:s.PlatformType.Exponent,isPii:!1}};e=c.TelemetryHelper.addPlatformPropertiesToTelemetryProperties(this.runOptions,this.runOptions.reactNativeVersions,e),yield c.TelemetryHelper.generate("ExponentPlatform.runApp",e,(()=>n(this,void 0,void 0,(function*(){yield this.loginToExponentOrSkip(this.runOptions.expoHostType),yield d.setOptions(this.projectPath,{packagerPort:this.packager.getPort()}),yield d.startExponentServer(this.projectPath),"tunnel"===this.runOptions.expoHostType?yield this.prepareExpoTunnels():yield d.stopAdbReverse(this.projectPath);const e="local"===this.runOptions.expoHostType&&(yield d.startAdbReverse(this.projectPath));let t="";switch(this.runOptions.expoHostType){case"lan":t=yield d.getUrl(this.projectPath,{dev:!0,minify:!1,hostType:"lan"});break;case"local":e?this.logger.info(f(0,null)):this.logger.warning(f(1,null)),t=yield d.getUrl(this.projectPath,{dev:!0,minify:!1,hostType:"localhost"});break;case"tunnel":default:t=yield d.getUrl(this.projectPath,{dev:!0,minify:!1})}if(t="exp://"+h.parse(t).host,!t)throw i.ErrorHelper.getInternalError(o.InternalErrorCode.ExpectedExponentTunnelPath);if(this.runOptions.openExpoQR){u.window.createWebviewPanel("Expo QR Code","Expo QR Code",u.ViewColumn.Two,{}).webview.html=this.qrCodeContentProvider.provideTextDocumentContent(u.Uri.parse(t))}this.exponentTunnelPath=t;const r=f(2,null,this.exponentTunnelPath);this.logger.info(r);const n=f(3,null);u.window.showInformationMessage(r,n).then((e=>{e===n&&u.env.clipboard.writeText(t)}))}))))}))}loginToExponentOrSkip(e){return n(this,void 0,void 0,(function*(){if("tunnel"===e)return yield this.exponentHelper.loginToExponent(((e,t)=>n(this,void 0,void 0,(function*(){return(yield u.window.showInputBox({placeHolder:e,password:t}))||""}))),(e=>n(this,void 0,void 0,(function*(){const t={title:"Cancel",isCloseAffordance:!0};if((yield u.window.showInformationMessage(e,{modal:!0},{title:"Ok"},t))===t)throw i.ErrorHelper.getInternalError(o.InternalErrorCode.UserCancelledExpoLogin);return""}))))}))}beforeStartPackager(){return n(this,void 0,void 0,(function*(){return this.exponentHelper.configureExponentEnvironment()}))}enableJSDebuggingMode(){return n(this,void 0,void 0,(function*(){this.logger.info(f(4,null))}))}getRunArguments(){return[]}prepareExpoTunnels(){return n(this,void 0,void 0,(function*(){try{yield this.exponentHelper.findOrInstallNgrokGlobally(),yield d.startTunnels(this.projectPath)}finally{this.exponentHelper.removeNodeModulesPathFromEnvIfWasSet()}}))}}t.ExponentPlatform=g},7361:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.isNgrokInstalled=t.getMetroConfig=t.stopAdbReverse=t.startAdbReverse=t.stopAll=t.getUrl=t.startTunnels=t.startExponentServer=t.setOptions=t.publish=t.getReleasedExpoSdkVersions=t.getExpoSdkVersions=t.login=t.currentUser=t.attachLoggerStream=t.configReactNativeVersionWarnings=t.getNgrokResolver=t.getMetroConfigPackage=t.getXDLPackage=void 0;const i=r(5622),o=r(7670),s=r(9901),a=r(2463),c="@expo/metro-config",l=new o.PackageConfig("xdl",a.SettingsHelper.getExpoDependencyVersion("xdl")),u=new o.PackageConfig(c,a.SettingsHelper.getExpoDependencyVersion(c)),d=new o.PackageConfig(l.getPackageName(),l.getVersion(),"build/start/resolveNgrok"),h=[l,u];t.getXDLPackage=o.PackageLoader.getInstance().generateGetPackageFunction(l,...h),t.getMetroConfigPackage=o.PackageLoader.getInstance().generateGetPackageFunction(u,...h),t.getNgrokResolver=o.PackageLoader.getInstance().generateGetPackageFunction(d,...h),t.configReactNativeVersionWarnings=function(){return n(this,void 0,void 0,(function*(){(yield t.getXDLPackage()).Config.validation.reactNativeVersionWarnings=!1}))},t.attachLoggerStream=function(e,r){return n(this,void 0,void 0,(function*(){(yield t.getXDLPackage()).ProjectUtils.attachLoggerStream(e,r)}))},t.currentUser=function(){return n(this,void 0,void 0,(function*(){const e=yield t.getXDLPackage();return yield e.User?e.User.getCurrentUserAsync():e.UserManager.getCurrentUserAsync()}))},t.login=function(e,r){return n(this,void 0,void 0,(function*(){const n=yield t.getXDLPackage();return yield n.User?n.User.loginAsync("user-pass",{username:e,password:r}):n.UserManager.loginAsync("user-pass",{username:e,password:r})}))},t.getExpoSdkVersions=function(){return n(this,void 0,void 0,(function*(){return(yield t.getXDLPackage()).Versions.sdkVersionsAsync()}))},t.getReleasedExpoSdkVersions=function(){return n(this,void 0,void 0,(function*(){return(yield t.getXDLPackage()).Versions.releasedSdkVersionsAsync()}))},t.publish=function(e,r){return n(this,void 0,void 0,(function*(){return(yield t.getXDLPackage()).Project.publishAsync(e,r)}))},t.setOptions=function(e,r){return n(this,void 0,void 0,(function*(){yield(yield t.getXDLPackage()).ProjectSettings.setPackagerInfoAsync(e,r)}))},t.startExponentServer=function(e){return n(this,void 0,void 0,(function*(){yield(yield t.getXDLPackage()).Project.startExpoServerAsync(e)}))},t.startTunnels=function(e){return n(this,void 0,void 0,(function*(){yield(yield t.getXDLPackage()).Project.startTunnelsAsync(e)}))},t.getUrl=function(e,r){return n(this,void 0,void 0,(function*(){return(yield t.getXDLPackage()).UrlUtils.constructManifestUrlAsync(e,r)}))},t.stopAll=function(e){return n(this,void 0,void 0,(function*(){yield(yield t.getXDLPackage()).Project.stopAsync(e)}))},t.startAdbReverse=function(e){return n(this,void 0,void 0,(function*(){return(yield t.getXDLPackage()).Android.startAdbReverseAsync(e)}))},t.stopAdbReverse=function(e){return n(this,void 0,void 0,(function*(){yield(yield t.getXDLPackage()).Android.stopAdbReverseAsync(e)}))},t.getMetroConfig=function(e){return n(this,void 0,void 0,(function*(){return(yield t.getMetroConfigPackage()).loadAsync(e)}))},t.isNgrokInstalled=function(e){return n(this,void 0,void 0,(function*(){const r=yield t.getNgrokResolver();try{return!!(yield r.resolveNgrokAsync(e,{shouldPrompt:!1,autoInstall:!1}))}catch(e){throw s.removeModuleFromRequireCacheByName(i.join("ngrok","package.json")),e}}))}},4952:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionConfigManager=void 0;const n=r(214);class i{}t.ExtensionConfigManager=i,i.configName="reactNativeToolsConfig",i.config=new n(i.configName)},1638:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.GeneralMobilePlatform=void 0;const i=r(9897),o=r(312),s=r(3821),a=r(7005),c=r(3403),l=r(9911);c.config({messageFormat:c.MessageFormat.bundle,bundleFormat:c.BundleFormat.standalone})(r(5622).join(__dirname,"src\\extension\\generalMobilePlatform.ts"));const u=c.loadMessageBundle(r(5622).join(__dirname,"src\\extension\\generalMobilePlatform.ts"));class d extends a.GeneralPlatform{getTargetsCountByFilter(e){return n(this,void 0,void 0,(function*(){return this.targetManager.getTargetsCountWithFilter(e)}))}resolveMobileTarget(e){return n(this,void 0,void 0,(function*(){let t,r=!1,n=!1;e.toLowerCase()===a.TargetType.Simulator?(n=!0,t=!0):e.toLowerCase()===a.TargetType.Device?(n=!0,t=!1):(yield this.targetManager.collectTargets(),r=!0,t=yield this.targetManager.isVirtualTarget(e)),r||(yield this.targetManager.collectTargets(t?a.TargetType.Simulator:a.TargetType.Device));const c=()=>{this.runOptions.target=t?a.TargetType.Simulator:a.TargetType.Device,this.runArguments=this.getRunArguments()};try{this.target=yield this.targetManager.selectAndPrepareTarget((r=>{const i=!!n||(r.name===e||r.id===e);return t===r.isVirtualTarget&&i})),this.target?this instanceof l.IOSPlatform||(yield this.needToPassTargetToRunArgs())?this.addTargetToRunArgs(this.target):c():(this.logger.warning(u(0,null,e)),this.logger.warning(u(1,null)),c())}catch(e){if(!e||!e.errorCode||e.errorCode!==o.InternalErrorCode.TargetSelectionError)throw e;s.TelemetryHelper.sendErrorEvent("TargetSelectionError",i.ErrorHelper.getInternalError(o.InternalErrorCode.TargetSelectionError)),this.logger.warning(e),this.logger.warning(u(2,null)),c()}return this.target}))}needToPassTargetToRunArgs(){return n(this,void 0,void 0,(function*(){return(yield this.targetManager.getTargetList()).filter((e=>e.isOnline)).length>1}))}addTargetToRunArgs(e){this.runOptions.target=e.id,this.runArguments=this.getRunArguments()}}t.GeneralMobilePlatform=d},7005:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.GeneralPlatform=t.TargetType=void 0;const i=r(5747),o=r(9208),s=r(5034),a=r(2463),c=r(9144),l=r(3403);l.config({messageFormat:l.MessageFormat.bundle,bundleFormat:l.BundleFormat.standalone})(r(5622).join(__dirname,"src\\extension\\generalPlatform.ts"));const u=l.loadMessageBundle(r(5622).join(__dirname,"src\\extension\\generalPlatform.ts"));!function(e){e.Device="device",e.Simulator="simulator"}(t.TargetType||(t.TargetType={}));class d{constructor(e,t={}){this.runOptions=e,this.platformName=this.runOptions.platform,this.projectPath=this.runOptions.projectRoot,this.packager=t.packager||new o.Packager(this.runOptions.workspaceRoot,this.projectPath,a.SettingsHelper.getPackagerPort(this.runOptions.workspaceRoot),new s.PackagerStatusIndicator(this.projectPath)),this.projectObserver=t.projectObserver,this.packager.setRunOptions(e),this.logger=c.OutputChannelLogger.getChannel(u(0,null,this.platformName),!0),this.logger.clear(),this.runArguments=this.getRunArguments()}dispose(){}runApp(){return n(this,void 0,void 0,(function*(){this.logger.info(u(1,null))}))}enableJSDebuggingMode(){return n(this,void 0,void 0,(function*(){this.logger.info(u(2,null))}))}disableJSDebuggingMode(){return n(this,void 0,void 0,(function*(){this.logger.info(u(3,null))}))}beforeStartPackager(){return n(this,void 0,void 0,(function*(){}))}startPackager(){return n(this,void 0,void 0,(function*(){this.logger.info(u(4,null)),(yield this.packager.isRunning())&&(this.packager.getPackagerStatus()!==s.PackagerStatus.PACKAGER_STARTED&&(yield this.packager.stop()),this.logger.info(u(5,null))),yield this.packager.start()}))}prewarmBundleCache(){return n(this,void 0,void 0,(function*(){}))}static removeRunArgument(e,t,r){const n=e.indexOf(t);n>-1&&(r?e.splice(n,1):e.splice(n,2))}static setRunArgument(e,t,r){const n="boolean"==typeof r,i=e.indexOf(t);i>-1?(n&&!r&&d.removeRunArgument(e,t,!0),n||(e[i+1]=r)):(n&&r&&e.push(t),n||(e.push(t),e.push(r)))}static getOptFromRunArgs(e,t,r=!1){if(e.length>0){const n=e.indexOf(t);let i;if(n>-1)i=!!r||e[n+1];else for(let n=0;n<e.length;n++){const o=e[n];if(o.indexOf(t)>-1)if(r)i=!0;else{const e=o.split("=");i=e.length>1?e[1].trim():void 0}}if(r)return void 0!==i||void 0;if(i)try{return JSON.parse(i)}catch(e){return i}}}getRunArguments(){throw new Error("Not yet implemented: GeneralPlatform.getRunArguments")}static getEnvArgument(e,t,r){let n=Object.assign({},e);if(r){const e=this.readEnvFile(r);if(null!=e)for(let t in e)!n[t]&&e.hasOwnProperty(t)&&(n[t]=e[t])}if(t)for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}static readEnvFile(e){if(i.existsSync(e)){let t=i.readFileSync(e,"utf8"),r={};return t&&"\ufeff"===t[0]&&(t=t.substr(1)),t.split("\n").forEach((e=>{const t=e.match(/^\s*([\w\.\-]+)\s*=\s*(.*)?\s*$/);if(null!==t){const e=t[1];let n=t[2]||"";n.length>0&&'"'===n.charAt(0)&&'"'===n.charAt(n.length-1)&&(n=n.replace(/\\n/gm,"\n")),r[e]=n.replace(/(^['"]|['"]$)/g,"")}})),r}return null}}t.GeneralPlatform=d,d.NO_PACKAGER_VERSION="0.42.0"},5288:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};Object.defineProperty(t,"__esModule",{value:!0}),t.checkIdbIsInstalled=t.idbListTargets=t.isXcodeDetected=t.isIdbAvailable=t.idbPath=void 0;const o=r(5640),s=r(8102),a=r(5747),c=r(5622),l=r(3648);
/**
 * @preserve
 * Start region: the code is borrowed from https://github.com/facebook/flipper/blob/c2848df7f210c363113797c0f2e3db8c5d4fd49f/desktop/app/src/server/devices/ios/iOSContainerUtility.tsx
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 * @format
 */
t.idbPath="/usr/local/bin/idb";function u(){return t.idbPath?a.promises.access(t.idbPath,a.constants.X_OK).then((()=>!0)).catch((()=>!1)):Promise.resolve(!1)}function d(){return n(this,void 0,void 0,(function*(){return(new o.ChildProcess).execToString("xcode-select -p").then((e=>a.existsSync(e.trim()))).catch((e=>!1))}))}function h(e){return e.trim().split("\n").map((e=>e.trim())).filter(Boolean).map((e=>JSON.parse(e))).filter((({state:e})=>"booted"===e.toLocaleLowerCase())).map((e=>{var{type:t,target_type:r}=e,n=i(e,["type","target_type"]);return Object.assign({type:"simulator"===(t||r)?"emulator":"physical"},n)})).map((e=>({id:e.udid,isVirtualTarget:"emulator"===e.type,name:e.name,isOnline:!0})))}function p(e){return n(this,void 0,void 0,(function*(){return(new o.ChildProcess).execToString(`${e} list-targets --json`).then((e=>h(e))).catch((e=>(l.logger.warn(`Failed to query idb for targets: ${e}`),[])))}))}function f(){return n(this,void 0,void 0,(function*(){if(!(yield t.isIdbAvailable()))throw new Error("idb is required to use iOS devices. Please install it with instructions from https://github.com/facebook/idb.")}))}function g(e){if(e.message&&e.message.includes("sudo: no tty present and no askpass program specified"))throw new Error(`idb doesn't appear to be installed. Run "${t.idbPath} list-targets" to fix this.`);throw e}function m(e,t){return e.catch((e=>{throw null==t||t.error(e.message),new Error("A problem with idb has ocurred. Please run `sudo rm -rf /tmp/idb*` and `sudo yum install -y fb-idb` to update it, if that doesn't fix it, post in https://github.com/microsoft/vscode-react-native.")}))}t.isIdbAvailable=s.PromiseUtil.promiseCacheDecorator(u),t.isXcodeDetected=d,t.idbListTargets=p,t.checkIdbIsInstalled=f,t.default={isAvailable:u,targets:function(){return n(this,void 0,void 0,(function*(){if("darwin"!==process.platform)return[];if(!(yield d())){return function(e,t){return n(this,void 0,void 0,(function*(){return(yield t(e))?(new o.ChildProcess).execToString(`${e} --list 1 --only device`).then((e=>h(e))).catch((e=>(l.logger.warn(`Failed to query idb_companion --list 1 --only device for physical targets: ${e}`),[]))):(l.logger.warn(`Unable to locate idb_companion in ${e}. Try running sudo yum install -y fb-idb`),[])}))}(c.dirname(t.idbPath)+"/idb_companion",u)}return(yield t.isIdbAvailable())?yield p(t.idbPath):(new o.ChildProcess).execToString("xcrun xctrace list devices").then((e=>{const t=[],r=e.split("\n").map((e=>e.trim())).filter((e=>!!e)),n=r.findIndex((e=>"== Devices =="===e))+1,i=r.findIndex((e=>"== Simulators =="===e))-1;for(let e=n;e<=i;e++){const n=r[e].split(" ").map((e=>e.trim())).filter((e=>!!e));n[n.length-1].match(/\(.+\)/)&&n[n.length-2].match(/\(.+\)/)&&t.push({id:n[n.length-1].replace(/\(|\)/g,"").trim(),name:n.slice(0,n.length-2).join(" "),isVirtualTarget:!1,isOnline:!0})}return t})).catch((e=>(l.logger.warn(`Failed to query for devices using xctrace: ${e}`),[])))}))},push:function(e,r,i,s,a){return n(this,void 0,void 0,(function*(){const n=new o.ChildProcess;return yield f(),m(n.execToString(`${t.idbPath} --log DEBUG file push --udid ${e} --bundle-id ${i} '${r}' '${s}'`).then((()=>{})).catch((e=>g(e))),a)}))},pull:function(e,r,i,s,a){return n(this,void 0,void 0,(function*(){const n=new o.ChildProcess;return yield f(),m(n.execToString(`${t.idbPath} --log DEBUG file pull --udid ${e} --bundle-id ${i} '${r}' '${s}'`).then((()=>{})).catch((e=>g(e))),a)}))}}},7629:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.IOSDebugModeManager=void 0;const i=r(9845),o=r(3590),s=r(7073);class a extends i.ApplePlatformDebugModeManager{constructor(e,t,r){super(e,t),this.projectRoot=t,this.simulatorPlist=new s.SimulatorPlist(this.platformProjectRoot,this.projectRoot,r)}setAppRemoteDebuggingSetting(e,t,r){return n(this,void 0,void 0,(function*(){const n=new o.PlistBuddy,i=yield this.findPListFileWithRetry(t,r);yield e?n.setPlistProperty(i,a.EXECUTOR_CLASS_SETTING_NAME,a.WEBSOCKET_EXECUTOR_NAME):n.deletePlistProperty(i,a.EXECUTOR_CLASS_SETTING_NAME),yield n.setPlistBooleanProperty(i,a.REMOTE_DEBUGGING_SETTING_NAME,e)}))}getAppRemoteDebuggingSetting(e,t){return n(this,void 0,void 0,(function*(){const r=yield this.findPListFileWithRetry(e,t);try{const[e,t]=yield Promise.all([(new o.PlistBuddy).readPlistProperty(r,a.EXECUTOR_CLASS_SETTING_NAME),(new o.PlistBuddy).readPlistProperty(r,a.REMOTE_DEBUGGING_SETTING_NAME)]);return e===a.WEBSOCKET_EXECUTOR_NAME&&"true"===t}catch(e){return!1}}))}tryOneAttemptToFindPListFile(e,t){return n(this,void 0,void 0,(function*(){try{return yield this.simulatorPlist.findPlistFile(e,t)}catch(e){return this.logger.debug(`Failed one attempt to find plist file: ${e}`),""}}))}}t.IOSDebugModeManager=a,a.WEBSOCKET_EXECUTOR_NAME="RCTWebSocketExecutor",a.EXECUTOR_CLASS_SETTING_NAME=":RCTDevMenu:executorClass"},233:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.IOSDeviceTracker=void 0;const i=r(6729),o=r(5288),s=r(7693),a=r(1205),c=r(9505),l=r(9185),u=r(3129),d=r(8287);class h extends i.AbstractDeviceTracker{constructor(){super(),this.portForwardingClientPath=(l.findFileInFolderHierarchy(__dirname,"static/PortForwardingMacApp.app")||__dirname)+"/Contents/MacOS/PortForwardingMacApp",this.iOSTargetManager=new d.IOSTargetManager,this.portForwarders=[]}start(){return n(this,void 0,void 0,(function*(){this.logger.debug("Start iOS device tracker"),(yield o.isXcodeDetected())&&this.startDevicePortForwarders(),yield this.queryDevicesLoop()}))}stop(){this.logger.debug("Stop iOS device tracker"),this.isStop=!0,this.portForwarders.forEach((e=>e.kill()))}queryDevices(){return n(this,void 0,void 0,(function*(){const e=yield this.getRunningSimulators();this.processDevices(e,!0);const t=yield this.getActiveDevices();this.processDevices(t,!1)}))}processDevices(e,t){let r=new Set([...s.DeviceStorage.devices.entries()].filter((e=>e[1]instanceof c.IOSClienDevice&&e[1].isVirtualTarget===t)).map((e=>e[0])));for(const n of e)if(r.has(n.id))r.delete(n.id);else{const e=new c.IOSClienDevice(n.id,t,a.ClientOS.iOS,n.isOnline,n.name);s.DeviceStorage.devices.set(e.id,e)}r.forEach((e=>{s.DeviceStorage.devices.delete(e)}))}
/**
     * @preserve
     * Start region: The code is borrowed from https://github.com/facebook/flipper/blob/v0.79.1/desktop/app/src/dispatcher/iOSDevice.tsx#L81-L88
     *
     * Copyright (c) Facebook, Inc. and its affiliates.
     *
     * This source code is licensed under the MIT license found in the
     * LICENSE file in the root directory of this source tree.
     *
     * @format
     */startDevicePortForwarders(){this.portForwarders.length>0||(this.portForwarders=[this.forwardPort(8089,8079),this.forwardPort(8088,8078)])}
/**
     * @preserve
     * End region: https://github.com/facebook/flipper/blob/v0.79.1/desktop/app/src/dispatcher/iOSDevice.tsx#L81-L88
     */
/**
     * @preserve
     * Start region: the code is borrowed from https://github.com/facebook/flipper/blob/v0.79.1/desktop/app/src/dispatcher/iOSDevice.tsx#L63-L79
     *
     * Copyright (c) Facebook, Inc. and its affiliates.
     *
     * This source code is licensed under the MIT license found in the
     * LICENSE file in the root directory of this source tree.
     *
     * @format
     */forwardPort(e,t){const r=u.execFile(this.portForwardingClientPath,[`-portForward=${e}`,`-multiplexChannelPort=${t}`],((e,t,r)=>{(null==e?void 0:e.killed)||this.logger.error(`Port forwarding app failed to start: ${null==e?void 0:e.message}, ${t}, ${r}`)}));return this.logger.debug(`Port forwarding app started for ${e} port`),r.addListener("error",(e=>{this.logger.error("Port forwarding app error",e)})),r.addListener("exit",(e=>{this.logger.debug(`Port forwarding app exited with code ${e}`)})),r}
/**
     * @preserve
     * End region: https://github.com/facebook/flipper/blob/v0.79.1/desktop/app/src/dispatcher/iOSDevice.tsx#L63-L79
     */getRunningSimulators(){return n(this,void 0,void 0,(function*(){return yield this.iOSTargetManager.getTargetList((e=>e.isOnline))}))}
/**
     * @preserve
     * Start region: the code is borrowed from https://github.com/facebook/flipper/blob/v0.79.1/desktop/app/src/dispatcher/iOSDevice.tsx#L227-L232
     *
     * Copyright (c) Facebook, Inc. and its affiliates.
     *
     * This source code is licensed under the MIT license found in the
     * LICENSE file in the root directory of this source tree.
     *
     * @format
     */getActiveDevices(){return o.default.targets().catch((e=>(this.logger.error(e.message),[])))}}t.IOSDeviceTracker=h},9911:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.IOSPlatform=void 0;const i=r(5622),o=r(6625),s=r(5640),a=r(5458),c=r(7005),l=r(7599),u=r(3590),d=r(7629),h=r(4191),p=r(3821),f=r(312),g=r(3403),m=r(1638),_=r(8287),E=r(9897);g.config({messageFormat:g.MessageFormat.bundle,bundleFormat:g.BundleFormat.standalone})(r(5622).join(__dirname,"src\\extension\\ios\\iOSPlatform.ts"));const v=g.loadMessageBundle(r(5622).join(__dirname,"src\\extension\\ios\\iOSPlatform.ts"));class y extends m.GeneralMobilePlatform{constructor(e,t={}){super(e,t),this.runOptions=e,this.plistBuddy=new u.PlistBuddy,this.defaultConfiguration="Debug",this.configurationArgumentName="--configuration",this.targetManager=new _.IOSTargetManager,this.runOptions.configuration=this.getConfiguration(),this.runOptions.iosRelativeProjectPath&&this.logger.warning(v(0,null));const r=y.getOptFromRunArgs(this.runArguments,"--project-path",!1);this.iosProjectRoot=i.join(this.projectPath,r||this.runOptions.iosRelativeProjectPath||y.DEFAULT_IOS_PROJECT_RELATIVE_PATH);const n=y.getOptFromRunArgs(this.runArguments,"--scheme",!1);this.iosDebugModeManager=new d.IOSDebugModeManager(this.iosProjectRoot,this.projectPath,n||this.runOptions.scheme)}getTarget(){return n(this,void 0,void 0,(function*(){if(!this.target){const e=yield this.getTargetFromRunArgs();if(e)this.target=e;else{const e=yield this.targetManager.getTargetList(),t=e.filter((e=>{switch(this.runOptions.target){case c.TargetType.Simulator:return e.isVirtualTarget;case c.TargetType.Device:return!e.isVirtualTarget;case void 0:case"":return!0;default:return e.id===this.runOptions.target||e.name===this.runOptions.target}}));if(t.length)this.target=_.IOSTarget.fromInterface(t[0]);else{if(!e.length)throw E.ErrorHelper.getInternalError(f.InternalErrorCode.IOSThereIsNoAnyDebuggableTarget);this.logger.warning(v(1,null,this.runOptions.target)),this.target=_.IOSTarget.fromInterface(e[0])}}}return this.target}))}showDevMenu(e){return n(this,void 0,void 0,(function*(){const t=e.getAppWorker();t&&t.showDevMenuCommand()}))}reloadApp(e){return n(this,void 0,void 0,(function*(){const t=e.getAppWorker();t&&t.reloadAppCommand()}))}runApp(){var e;return n(this,void 0,void 0,(function*(){let t={platform:{value:l.PlatformType.iOS,isPii:!1}};this.runOptions.isDirect&&(t.isDirect={value:!0,isPii:!1},null===(e=this.projectObserver)||void 0===e||e.updateRNIosHermesProjectState(!0)),t=p.TelemetryHelper.addPlatformPropertiesToTelemetryProperties(this.runOptions,this.runOptions.reactNativeVersions,t),yield p.TelemetryHelper.generate("iOSPlatform.runApp",t,(()=>n(this,void 0,void 0,(function*(){const e=m.GeneralMobilePlatform.getEnvArgument(process.env,this.runOptions.env,this.runOptions.envFile);o.valid(this.runOptions.reactNativeVersions.reactNativeVersion)&&!o.gte(this.runOptions.reactNativeVersions.reactNativeVersion,y.NO_PACKAGER_VERSION)||this.runArguments.push("--no-packager"),o.gte(this.runOptions.reactNativeVersions.reactNativeVersion,"0.60.0")&&this.runArguments.push("--verbose");const t=new a.CommandExecutor(this.runOptions.nodeModulesRoot,this.projectPath,this.logger).spawnReactCommand("run-ios",this.runArguments,{env:e});yield new h.OutputVerifier((()=>this.generateSuccessPatterns(this.runOptions.reactNativeVersions.reactNativeVersion)),(()=>Promise.resolve(y.RUN_IOS_FAILURE_PATTERNS)),l.PlatformType.iOS).process(t)}))))}))}enableJSDebuggingMode(){return n(this,void 0,void 0,(function*(){if(!(yield this.getTarget()).isVirtualTarget)return void this.logger.info("Application is running on a device, please shake device and select 'Debug JS Remotely' to enable debugging.");const[e,t]=yield Promise.all([this.iosDebugModeManager.getAppRemoteDebuggingSetting(this.runOptions.configuration,this.runOptions.productName),this.getBundleId()]);if(e)return;const r=new s.ChildProcess,n=yield r.execToString("xcrun simctl spawn booted launchctl list"),i=new RegExp(`(\\S+${t}\\S+)`).exec(n);return i&&(yield r.exec(`xcrun simctl spawn booted launchctl stop ${i[1]}`)),yield this.iosDebugModeManager.setAppRemoteDebuggingSetting(!0,this.runOptions.configuration,this.runOptions.productName),yield this.runApp()}))}disableJSDebuggingMode(){return n(this,void 0,void 0,(function*(){if((yield this.getTarget()).isVirtualTarget)return this.iosDebugModeManager.setAppRemoteDebuggingSetting(!1,this.runOptions.configuration,this.runOptions.productName)}))}prewarmBundleCache(){return this.packager.prewarmBundleCache(l.PlatformType.iOS)}getRunArguments(){let e=[];if(this.runOptions.runArguments&&this.runOptions.runArguments.length>0){if(e=this.runOptions.runArguments,this.runOptions.scheme){y.getOptFromRunArgs(e,"--scheme",!1)?this.logger.warning(v(2,null)):e.push("--scheme",this.runOptions.scheme)}}else this.runOptions.target&&e.push(...this.handleTargetArg(this.runOptions.target)),this.runOptions.iosRelativeProjectPath&&e.push("--project-path",this.runOptions.iosRelativeProjectPath),this.runOptions.scheme&&e.push("--scheme",this.runOptions.scheme);return e}getTargetFromRunArgs(){return n(this,void 0,void 0,(function*(){if(this.runOptions.runArguments&&this.runOptions.runArguments.length>0){const e=yield this.targetManager.getTargetList(),t=m.GeneralMobilePlatform.getOptFromRunArgs(this.runOptions.runArguments,"--udid");if(t){const r=e.find((e=>e.id===t));if(r)return _.IOSTarget.fromInterface(r);this.logger.warning(v(3,null,t))}const r=m.GeneralMobilePlatform.getOptFromRunArgs(this.runOptions.runArguments,"--device");if(r){const t=e.find((e=>!e.isVirtualTarget&&e.name===r));if(t)return _.IOSTarget.fromInterface(t);this.logger.warning(v(4,null,r))}const n=m.GeneralMobilePlatform.getOptFromRunArgs(this.runOptions.runArguments,"--simulator");if(n){const t=e.find((e=>e.isVirtualTarget&&e.name===n));if(t)return _.IOSTarget.fromInterface(t);this.logger.warning(v(5,null,n))}}}))}handleTargetArg(e){return e===c.TargetType.Device||e===c.TargetType.Simulator?[`--${e}`]:["--udid",e]}generateSuccessPatterns(e){return n(this,void 0,void 0,(function*(){let t=[...y.RUN_IOS_SUCCESS_PATTERNS];if((yield this.getTarget()).isVirtualTarget){const r=yield this.getBundleId();return o.gte(e,"0.60.0")?t.push(`Launching "${r}"\nsuccess Successfully launched the app `):t.push(`Launching ${r}\n${r}: `),t}return o.gte(e,"0.60.0")?t.push("success Installed the app on the device"):t.push("INSTALLATION SUCCEEDED"),t}))}getConfiguration(){return y.getOptFromRunArgs(this.runArguments,this.configurationArgumentName)||this.defaultConfiguration}getBundleId(){let e=this.runOptions.scheme;if(!e){const t=y.getOptFromRunArgs(this.runArguments,"--scheme",!1);t&&(e=t)}return this.plistBuddy.getBundleId(this.iosProjectRoot,this.projectPath,l.PlatformType.iOS,!0,this.runOptions.configuration,this.runOptions.productName,e)}}t.IOSPlatform=y,y.DEFAULT_IOS_PROJECT_RELATIVE_PATH="ios",y.RUN_IOS_FAILURE_PATTERNS=[{pattern:"No devices are booted",errorCode:f.InternalErrorCode.IOSSimulatorNotLaunchable},{pattern:"FBSOpenApplicationErrorDomain",errorCode:f.InternalErrorCode.IOSSimulatorNotLaunchable},{pattern:"ios-deploy",errorCode:f.InternalErrorCode.IOSDeployNotFound}],y.RUN_IOS_SUCCESS_PATTERNS=["BUILD SUCCEEDED"]},8287:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.IOSTargetManager=t.IOSTarget=void 0;const i=r(5640),o=r(9901),s=r(1529),a=r(9023),c=r(3403),l=r(9144),u=r(7549),d=r(7005);c.config({messageFormat:c.MessageFormat.bundle,bundleFormat:c.BundleFormat.standalone})(r(5622).join(__dirname,"src\\extension\\ios\\iOSTargetManager.ts"));const h=c.loadMessageBundle(r(5622).join(__dirname,"src\\extension\\ios\\iOSTargetManager.ts"));class p extends s.MobileTarget{constructor(e,t,r,n,i){super(e,t,r,n),this._system=i}static fromInterface(e){return new p(e.isOnline,e.isVirtualTarget,e.id,e.name,e.system)}get system(){return this._system}get name(){return this._name}set name(e){this._name=e}}t.IOSTarget=p;class f extends a.MobileTargetManager{constructor(){super(...arguments),this.childProcess=new i.ChildProcess,this.logger=l.OutputChannelLogger.getChannel(l.OutputChannelLogger.MAIN_CHANNEL_NAME,!0)}collectTargets(e){return n(this,void 0,void 0,(function*(){if(this.targets=[],void 0===e||e===d.TargetType.Simulator){const e=JSON.parse(yield this.childProcess.execToString(`${f.SIMULATORS_LIST_COMMAND}`));Object.keys(e.devices).forEach((t=>{const r=t.split(".").slice(-1)[0].split("-"),n=`${r[0]} ${r.slice(1).join(".")}`;e.devices[t].forEach((e=>{var t;n.includes("iOS")&&(null===(t=this.targets)||void 0===t||t.push({id:e.udid,name:e.name,system:n,isVirtualTarget:!0,isOnline:e.state===f.BOOTED_STATE}))}))}))}if(void 0===e||e===d.TargetType.Device){const e=(yield this.childProcess.execToString(`${f.ALL_DEVICES_LIST_COMMAND}`)).split("\n").map((e=>e.trim())).filter((e=>!!e)),t=e.findIndex((e=>"== Devices =="===e))+1,r=e.findIndex((e=>"== Simulators =="===e))-1;for(let n=t;n<=r;n++){const t=e[n].split(" ").map((e=>e.trim())).filter((e=>!!e));t[t.length-1].match(/\(.+\)/)&&t[t.length-2].match(/\(.+\)/)&&this.targets.push({id:t[t.length-1].replace(/\(|\)/g,"").trim(),name:t.slice(0,t.length-2).join(" "),system:t[t.length-2].replace(/\(|\)/g,"").trim(),isVirtualTarget:!1,isOnline:!0})}}}))}selectAndPrepareTarget(e){return n(this,void 0,void 0,(function*(){const t=yield this.startSelection(e);if(t)return!t.isOnline&&t.isVirtualTarget?this.launchSimulator(t):p.fromInterface(t)}))}isVirtualTarget(e){return n(this,void 0,void 0,(function*(){try{if(e===d.TargetType.Device)return!1;if(e===d.TargetType.Simulator)return!0;{const t=(yield this.getTargetList((t=>t.id===e||t.name===e)))[0];if(t)return t.isVirtualTarget;throw Error("There is no any target with specified target string")}}catch(t){throw new Error(h(0,null,e))}}))}startSelection(e){return n(this,void 0,void 0,(function*(){const t=yield this.selectSystem(e);if(t)return yield this.selectTarget((r=>(!e||e(r))&&(t===f.ANY_SYSTEM||r.system===t)))}))}selectSystem(e){return n(this,void 0,void 0,(function*(){const t=yield this.getTargetList(e);if(!t.find((e=>e.isVirtualTarget)))return f.ANY_SYSTEM;const r=new Set(t.map((e=>e.system))),n=Array.from(r);let i=n[0];if(n.length>1){const e={ignoreFocusOut:!0,canPickMany:!1,placeHolder:h(1,null)};i=yield u.window.showQuickPick(n,e)}return null==i?void 0:i.toString()}))}launchSimulator(e){return n(this,void 0,void 0,(function*(){return new Promise(((t,r)=>{const i=this.childProcess.spawn(f.XCRUN_COMMAND,[f.SIMCTL_COMMAND,f.BOOT_COMMAND,e.id],{detached:!0},!0);i.spawnedProcess.unref(),i.outcome.catch((t=>{this.logger.error(h(2,null,`${e.name}(${e.id})`,t)),r(t)}));return o.waitUntil((()=>n(this,void 0,void 0,(function*(){yield this.collectTargets(d.TargetType.Simulator);return!!(yield this.getTargetList()).find((t=>t.id===e.id&&t.isOnline))||null}))),1e3,1e3*f.SIMULATOR_START_TIMEOUT).then((n=>{n?(e.isOnline=!0,this.logger.info(h(3,null,e.name)),t(p.fromInterface(e))):r(new Error(`Virtual device launch finished with an exception: ${h(4,null,e.name,f.SIMULATOR_START_TIMEOUT)}`))}))}))}))}}t.IOSTargetManager=f,f.XCRUN_COMMAND="xcrun",f.SIMCTL_COMMAND="simctl",f.BOOT_COMMAND="boot",f.SIMULATORS_LIST_COMMAND=`${f.XCRUN_COMMAND} ${f.SIMCTL_COMMAND} list devices available --json`,f.ALL_DEVICES_LIST_COMMAND=`${f.XCRUN_COMMAND} xctrace list devices`,f.BOOTED_STATE="Booted",f.SIMULATOR_START_TIMEOUT=120,f.ANY_SYSTEM="AnySystem"},3590:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.PlistBuddy=void 0;const i=r(5622),o=r(2884),s=r(5747),a=r(6625),c=r(3116),l=r(9897),u=r(312),d=r(9327),h=r(9901),p=r(6727),f=r(7599),g=r(8280);class m{constructor({nodeChildProcess:e=new c.Node.ChildProcess}={}){this.TARGET_BUILD_DIR_SEARCH_KEY="TARGET_BUILD_DIR",this.FULL_PRODUCT_NAME_SEARCH_KEY="FULL_PRODUCT_NAME",this.nodeChildProcess=e}getBundleId(e,t,r,o=!0,s="Debug",a,c){return n(this,void 0,void 0,(function*(){const n=yield this.getExecutableAndConfigurationFolder(e,t,r,o,s,a,c),l=i.join(n.configurationFolder,n.executable,r===f.PlatformType.iOS?"Info.plist":i.join("Contents","Info.plist"));return yield this.invokePlistBuddy("Print:CFBundleIdentifier",l)}))}getExecutableAndConfigurationFolder(e,t,r,o=!0,c="Debug",h,p){return n(this,void 0,void 0,(function*(){const n=yield d.ProjectVersionHelper.getReactNativeVersions(t);let g;a.gte(n.reactNativeVersion,"0.59.0")?(p||(p=this.getInferredScheme(e,t,n.reactNativeVersion),r===f.PlatformType.macOS&&(p+="-macOS")),g=i.join(e,"build",p,"Build","Products")):g=i.join(e,"build","Build","Products");let m=r===f.PlatformType.iOS?this.getSdkType(o,p):void 0,_=i.join(g,`${c}${m?`-${m}`:""}`),E="";if(h){if(E=`${h}.app`,!s.existsSync(i.join(_,E))){_=this.getConfigurationData(t,n.reactNativeVersion,e,c,p,_,m).configurationFolder}}else{const r=this.findExecutable(_);if(r.length){if(r.length>1)throw l.ErrorHelper.getInternalError(u.InternalErrorCode.IOSFoundMoreThanOneExecutablesCleanupBuildFolder,_)}else{const i=this.getConfigurationData(t,n.reactNativeVersion,e,c,p,_,m);_=i.configurationFolder,r.push(i.fullProductName)}E=`${r[0]}`}return{executable:E,configurationFolder:_}}))}setPlistProperty(e,t,r){return n(this,void 0,void 0,(function*(){try{yield this.invokePlistBuddy(`Set ${t} ${r}`,e)}catch(n){yield this.invokePlistBuddy(`Add ${t} string ${r}`,e)}}))}setPlistBooleanProperty(e,t,r){return n(this,void 0,void 0,(function*(){try{yield this.invokePlistBuddy(`Set ${t} ${r}`,e)}catch(n){yield this.invokePlistBuddy(`Add ${t} bool ${r}`,e)}}))}deletePlistProperty(e,t){return n(this,void 0,void 0,(function*(){try{yield this.invokePlistBuddy(`Delete ${t}`,e)}catch(e){if(!e.toString().toLowerCase().includes("does not exist"))throw e}}))}readPlistProperty(e,t){return this.invokePlistBuddy(`Print ${t}`,e)}getBuildPathAndProductName(e,t,r,n,i){const o=["-workspace",t,"-scheme",n];i&&o.push("-sdk",i),o.push("-configuration",r,"-showBuildSettings");const s=this.nodeChildProcess.execFileSync("xcodebuild",o,{encoding:"utf8",cwd:e}),a=this.fetchParameterFromBuildSettings(s,this.TARGET_BUILD_DIR_SEARCH_KEY),c=this.fetchParameterFromBuildSettings(s,this.FULL_PRODUCT_NAME_SEARCH_KEY);if(!a)throw new Error("Failed to get the target build directory.");if(!c)throw new Error("Failed to get full product name.");return{fullProductName:c,configurationFolder:a}}getInferredScheme(e,t,r){const n=this.getProjectWorkspaceConfigName(e,t,r);return h.getFileNameWithoutExtension(n)}getSdkType(e,t){var r;const n=e?"simulator":"os";return`${(null!==(r=null==t?void 0:t.toLowerCase().indexOf("tvos"))&&void 0!==r?r:-1)>-1?"appletv":"iphone"}${n}`}getProjectWorkspaceConfigName(e,t,r){let n;n=a.gte(r,"0.60.0")?"cli-platform-ios":"cli";const o=(0,p.default(i.join(g.AppLauncher.getNodeModulesRootByProjectPath(t),`node_modules/@react-native-community/${n}/build/commands/runIOS/findXcodeProject`)).default)(s.readdirSync(e));if(!o)throw new Error(`Could not find Xcode project files in "${e}" folder`);return o.name}getConfigurationData(e,t,r,n,i,o,s){if(!i)throw l.ErrorHelper.getInternalError(u.InternalErrorCode.IOSCouldNotFoundExecutableInFolder,o);const a=this.getProjectWorkspaceConfigName(r,e,t);return this.getBuildPathAndProductName(r,a,n,i,s)}fetchParameterFromBuildSettings(e,t){const r=new RegExp(`${t} = (.+)$`,"m").exec(e);return r&&r[1]?r[1].trim():null}findExecutable(e){return o.sync("*.app",{cwd:e})}invokePlistBuddy(e,t){return n(this,void 0,void 0,(function*(){const r=yield this.nodeChildProcess.exec(`${m.plistBuddyExecutable} -c '${e}' '${t}'`);return(yield r.outcome).toString().trim()}))}}t.PlistBuddy=m,m.plistBuddyExecutable="/usr/libexec/PlistBuddy"},7073:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SimulatorPlist=void 0;const i=r(5622),o=r(9897),s=r(3590),a=r(9144),c=r(9452),l=r(5640),u=r(3821),d=r(3403),h=r(7599);d.config({messageFormat:d.MessageFormat.bundle,bundleFormat:d.BundleFormat.standalone})(r(5622).join(__dirname,"src\\extension\\ios\\simulatorPlist.ts"));const p=d.loadMessageBundle(r(5622).join(__dirname,"src\\extension\\ios\\simulatorPlist.ts"));t.SimulatorPlist=class{constructor(e,t,r,{nodeFileSystem:n=new c.FileSystem,plistBuddy:i,nodeChildProcess:o=new l.ChildProcess}={}){this.logger=a.OutputChannelLogger.getMainChannel(),this.iosProjectRoot=e,this.projectRoot=t,this.scheme=r,this.nodeFileSystem=n,this.plistBuddy=i||new s.PlistBuddy,this.nodeChildProcess=o}findPlistFile(e,t){return n(this,void 0,void 0,(function*(){const[r,n]=yield Promise.all([this.plistBuddy.getBundleId(this.iosProjectRoot,this.projectRoot,h.PlatformType.iOS,!0,e,t,this.scheme),this.nodeChildProcess.exec("xcrun simctl getenv booted HOME").then((e=>e.outcome))]),s=i.join(n.toString().trim(),"Containers","Data","Application"),a=i.join("Library","Preferences",`${r}.plist`),c=yield this.nodeFileSystem.readDir(s);this.logger.info(`About to search for plist in base folder: ${s} pathAfter: ${a} in each of the apps: ${c}`);const l=c.map((e=>i.join(s,e,a))).filter((e=>this.nodeFileSystem.existsSync(e)));if(0===l.length)throw new Error(`Unable to find plist file for ${r}`);return l.length>1&&(u.TelemetryHelper.sendSimpleEvent("multipleDebugPlistFound"),this.logger.warning(o.ErrorHelper.getWarning(p(0,null)))),l[0]}))}}},7599:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlatformType=void 0,function(e){e.Android="android",e.iOS="ios",e.Windows="windows",e.Exponent="exponent",e.macOS="macos"}(t.PlatformType||(t.PlatformType={}))},3377:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LaunchScenariosManager=void 0;const n=r(5622),i=r(5747),o=r(1409);t.LaunchScenariosManager=class{constructor(e){this.pathToLaunchFile=n.resolve(e,".vscode","launch.json")}getLaunchScenarios(){return this.launchScenarios}readLaunchScenarios(){if(i.existsSync(this.pathToLaunchFile)){const e=i.readFileSync(this.pathToLaunchFile,"utf8");this.launchScenarios=JSON.parse(o(e))}}updateLaunchScenario(e,t){this.readLaunchScenarios();let r=this.getFirstScenarioIndexByParams(e);const n=this.getLaunchScenarios();null!==r&&n.configurations&&(Object.assign(n.configurations[r],t),this.writeLaunchScenarios(n))}getFirstScenarioIndexByParams(e){if(this.launchScenarios.configurations)for(let t=0;t<this.launchScenarios.configurations.length;t++){const r=this.launchScenarios.configurations[t];if(e.name===r.name&&e.platform===r.platform&&e.type===r.type&&e.request===r.request)return t}return null}writeLaunchScenarios(e=this.launchScenarios){i.existsSync(this.pathToLaunchFile)&&i.writeFileSync(this.pathToLaunchFile,JSON.stringify(e,null,4))}}},2663:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleLogger=void 0;const n=r(8694);class i{log(e,t){n.LogHelper.LOG_LEVEL!==n.LogLevel.None&&t>=n.LogHelper.LOG_LEVEL&&(e=i.getFormattedMessage(e,t),console.log(e))}info(e){this.log(e,n.LogLevel.Info)}warning(e){this.log(e,n.LogLevel.Warning)}error(e,t,r=!0){console.error(i.getFormattedMessage(e,n.LogLevel.Error)),r&&t&&t.stack&&console.error(`Stack: ${t.stack}`)}debug(e){this.log(e,n.LogLevel.Debug)}logStream(e,t){t.write(e.toString())}static getFormattedMessage(e,t){return`[${n.LogLevel[t]}] ${e}\n`}}t.ConsoleLogger=i},8694:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLoggingDirectory=t.getLoggingOptions=t.LogHelper=t.LogLevel=void 0;const n=r(5622),i=r(1890);var o;!function(e){e[e.None=0]="None",e[e.Trace=1]="Trace",e[e.Debug=2]="Debug",e[e.Info=3]="Info",e[e.Warning=4]="Warning",e[e.Error=5]="Error",e[e.Verbose=6]="Verbose",e[e.Custom=7]="Custom"}(o=t.LogLevel||(t.LogLevel={}));function s(){return{LogsDirectory:process.env.REACT_NATIVE_TOOLS_LOGS_DIR}}t.LogHelper=class{static get LOG_LEVEL(){return function(){try{return r(2463).SettingsHelper.getLogLevel()}catch(e){return o.Info}}()}},t.getLoggingOptions=s,t.getLoggingDirectory=function(){const e=s();if(e.LogsDirectory){let t=e.LogsDirectory;return n.isAbsolute(t)?(i.sync(t),t):null}return null}},4270:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NullLogger=void 0;t.NullLogger=class{log(e,t){}info(e){}warning(e){}error(e,t,r){}debug(e){}logStream(e,t){}}},9144:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OutputChannelLogger=void 0;const n=r(7549),i=r(8694),o=r(5747),s=r(5622),a=r(9901),c={};class l{constructor(e,t=!1,r=!1,a=!1){this.channelName=e,this.preserveFocus=r,this.logTimestamps=a;const c=i.getLoggingDirectory();if(c){const t=e.replace(l.forbiddenFileNameSymbols,"");this.channelLogFilePath=s.join(c,`${t}.txt`),this.channelLogFileStream=o.createWriteStream(this.channelLogFilePath),this.channelLogFileStream.on("error",(e=>{this.error(`Error writing to log file at path: ${this.channelLogFilePath}. Error: ${e.toString()}\n`)}))}t||(this.channel=n.window.createOutputChannel(this.channelName),this.channel.show(this.preserveFocus))}static disposeChannel(e){c[e]&&(c[e].getOutputChannel().dispose(),c[e].channelLogFileStream&&c[e].channelLogFileStream.end(),delete c[e])}static getMainChannel(){return this.getChannel(this.MAIN_CHANNEL_NAME,!0)}static getChannel(e,t,r,n){return c[e]||(c[e]=new l(e,t,r,n)),c[e]}log(e,t){i.LogHelper.LOG_LEVEL!==i.LogLevel.None&&t>=i.LogHelper.LOG_LEVEL&&(e=l.getFormattedMessage(e,i.LogLevel[t],this.logTimestamps),this.channel.appendLine(e),this.channelLogFileStream&&this.channelLogFileStream.write(e))}logWithCustomTag(e,t,r){i.LogHelper.LOG_LEVEL!==i.LogLevel.None&&r===i.LogLevel.Custom&&(t=l.getFormattedMessage(t,e,this.logTimestamps),this.channel.appendLine(t),this.channelLogFileStream&&this.channelLogFileStream.write(t))}info(e){this.log(e,i.LogLevel.Info)}warning(e){this.log(e.toString(),i.LogLevel.Warning)}error(e,t,r=!0){const n=l.getFormattedMessage(e,i.LogLevel[i.LogLevel.Error],this.logTimestamps);this.channel.appendLine(n),this.channelLogFileStream&&this.channelLogFileStream.write(n),r&&t&&t.stack&&(this.channel.appendLine(`Stack: ${t.stack}`),this.channelLogFileStream&&this.channelLogFileStream.write(`Stack: ${t.stack}`))}debug(e){this.log(e,i.LogLevel.Debug)}logStream(e){this.channel.append(e.toString()),this.channelLogFileStream&&this.channelLogFileStream.write(e)}setFocusOnLogChannel(){this.channel.show(!1)}static getFormattedMessage(e,t,r=!1){let n=`[${t}] ${e}\n`;return r&&(n=`[${a.getFormattedDatetimeString(new Date)}] ${n}`),n}getOutputChannel(){return this.channel}clear(){this.channel.clear()}get channel(){return this.outputChannel||(this.outputChannel=n.window.createOutputChannel(this.channelName),this.outputChannel.show(this.preserveFocus)),this.outputChannel}set channel(e){this.outputChannel=e}}t.OutputChannelLogger=l,l.MAIN_CHANNEL_NAME="React Native",l.forbiddenFileNameSymbols=/\W/gi},5353:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultsHelper=void 0;const i=r(3116);t.DefaultsHelper=class{constructor(){this.DEV_MENU_SETTINGS="RCTDevMenu",this.nodeChildProcess=new i.Node.ChildProcess}setPlistBooleanProperty(e,t,r){return n(this,void 0,void 0,(function*(){yield this.invokeDefaultsCommand(`write ${e} ${this.DEV_MENU_SETTINGS} -dict-add ${t} -bool ${r}`)}))}invokeDefaultsCommand(e){return n(this,void 0,void 0,(function*(){const t=yield this.nodeChildProcess.exec(`defaults ${e}`);return(yield t.outcome).toString().trim()}))}}},2760:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.MacOSDebugModeManager=void 0;const i=r(5622),o=r(2087),s=r(9845),a=r(3590),c=r(9452),l=r(7599),u=r(5353);class d extends s.ApplePlatformDebugModeManager{constructor(e,t,r,{nodeFileSystem:n=new c.FileSystem,plistBuddy:i}={}){super(e,t),this.scheme=r,this.nodeFileSystem=n,this.plistBuddy=i||new a.PlistBuddy,this.defaultsHelper=new u.DefaultsHelper}setAppRemoteDebuggingSetting(e,t,r){return n(this,void 0,void 0,(function*(){const n=yield this.findPListFileWithRetry(t,r);return yield this.defaultsHelper.setPlistBooleanProperty(n,d.REMOTE_DEBUGGING_FLAG_NAME,e)}))}getAppRemoteDebuggingSetting(e,t){return n(this,void 0,void 0,(function*(){const r=yield this.findPListFileWithRetry(e,t);try{return"true"===(yield this.plistBuddy.readPlistProperty(r,d.REMOTE_DEBUGGING_SETTING_NAME))}catch(e){return!1}}))}tryOneAttemptToFindPListFile(e,t){return n(this,void 0,void 0,(function*(){try{return yield this.findPlistFile(e,t)}catch(e){return this.logger.debug(`Failed one attempt to find plist file: ${e}`),""}}))}findPlistFile(e,t){return n(this,void 0,void 0,(function*(){const r=yield this.plistBuddy.getBundleId(this.platformProjectRoot,this.projectRoot,l.PlatformType.macOS,!1,e,t,this.scheme),n=i.join(o.homedir(),"Library","Preferences",`${r}.plist`);if(yield this.nodeFileSystem.exists(n))return n;throw new Error(`Unable to find plist file for ${r}`)}))}}t.MacOSDebugModeManager=d,d.REMOTE_DEBUGGING_FLAG_NAME="isDebuggingRemotely"},147:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.MacOSPlatform=void 0;const i=r(6625),o=r(5622),s=r(7005),a=r(2760),c=r(7599),l=r(4191),u=r(3821),d=r(5458),h=r(312),p=r(3590),f=r(5640);class g extends s.GeneralPlatform{constructor(e,t={}){super(e,t),this.runOptions=e;const r=g.getOptFromRunArgs(this.runArguments,"--project-path",!1);this.macosProjectRoot=o.join(this.projectPath,r||g.DEFAULT_MACOS_PROJECT_RELATIVE_PATH),this.plistBuddy=new p.PlistBuddy;const n=g.getOptFromRunArgs(this.runArguments,"--scheme",!1);this.macOSDebugModeManager=new a.MacOSDebugModeManager(this.macosProjectRoot,this.projectPath,n||this.runOptions.scheme)}runApp(){var e,t;return n(this,void 0,void 0,(function*(){let r={platform:{value:c.PlatformType.macOS,isPii:!1}};null===(e=this.projectObserver)||void 0===e||e.updateRNMacosProjectState(!0),this.runOptions.isDirect&&(r.isDirect={value:!0,isPii:!1},null===(t=this.projectObserver)||void 0===t||t.updateRNMacosHermesProjectState(!0)),r=u.TelemetryHelper.addPlatformPropertiesToTelemetryProperties(this.runOptions,this.runOptions.reactNativeVersions,r),yield u.TelemetryHelper.generate("MacOSPlatform.runApp",r,(()=>n(this,void 0,void 0,(function*(){const e=s.GeneralPlatform.getEnvArgument(process.env,this.runOptions.env,this.runOptions.envFile);i.valid(this.runOptions.reactNativeVersions.reactNativeVersion)&&!i.gte(this.runOptions.reactNativeVersions.reactNativeVersion,g.NO_PACKAGER_VERSION)||this.runArguments.push("--no-packager");const t=new d.CommandExecutor(this.runOptions.nodeModulesRoot,this.projectPath,this.logger).spawnReactCommand(`run-${this.platformName}`,this.runArguments,{env:e});yield new l.OutputVerifier((()=>Promise.resolve(g.SUCCESS_PATTERNS)),(()=>Promise.resolve(g.FAILURE_PATTERNS)),this.platformName).process(t)}))))}))}prewarmBundleCache(){return n(this,void 0,void 0,(function*(){return this.packager.prewarmBundleCache(c.PlatformType.macOS)}))}getRunArguments(){let e=[];if(this.runOptions.runArguments&&this.runOptions.runArguments.length>0)e.push(...this.runOptions.runArguments);else{let t=this.runOptions.target===s.TargetType.Simulator?"":this.runOptions.target;t&&e.push(`--${t}`)}return e}enableJSDebuggingMode(){return n(this,void 0,void 0,(function*(){const[e,t]=yield Promise.all([this.macOSDebugModeManager.getAppRemoteDebuggingSetting(this.runOptions.configuration,this.runOptions.productName),this.getApplicationName()]);e||(yield this.terminateMacOSapp(t),yield this.macOSDebugModeManager.setAppRemoteDebuggingSetting(!0,this.runOptions.configuration,this.runOptions.productName),yield this.runApp())}))}disableJSDebuggingMode(){return this.macOSDebugModeManager.setAppRemoteDebuggingSetting(!1,this.runOptions.configuration,this.runOptions.productName)}getApplicationName(){return n(this,void 0,void 0,(function*(){return(yield this.plistBuddy.getExecutableAndConfigurationFolder(this.macosProjectRoot,this.projectPath,c.PlatformType.macOS,!1,this.runOptions.configuration,this.runOptions.productName,this.getSchemeFromDebuggingParameters())).executable}))}getSchemeFromDebuggingParameters(){let e=this.runOptions.scheme;if(!e){const t=g.getOptFromRunArgs(this.runArguments,"--scheme",!1);t&&(e=t)}return e}terminateMacOSapp(e){return n(this,void 0,void 0,(function*(){let t=new f.ChildProcess;const r=yield t.execToString(`ps -ax | grep ${e}`);if(r){const n=/(^\d*)\s\?\?/g,i=r.split("\n").find((t=>t.includes(e)));if(i){const e=n.exec(i.trim());e&&e[1]&&(yield t.execToString(`kill ${e[1]}`))}}}))}}t.MacOSPlatform=g,g.SUCCESS_PATTERNS=["Launching app"],g.FAILURE_PATTERNS=[{pattern:"Unrecognized command 'run-macos'",errorCode:h.InternalErrorCode.ReactNativemacOSIsNotInstalled}],g.DEFAULT_MACOS_PROJECT_RELATIVE_PATH="macos"},1529:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MobileTarget=void 0;t.MobileTarget=class{constructor(e,t,r,n){this._isOnline=e,this._isVirtualTarget=t,this._name=n,this._id=r}get name(){return this._name}set name(e){this._name=e}get id(){return this._id}set id(e){this._id=e}get isOnline(){return this._isOnline}set isOnline(e){this._isOnline=e}get isVirtualTarget(){return this._isVirtualTarget}}},9023:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.MobileTargetManager=void 0;const i=r(3403),o=r(7549),s=r(7005);i.config({messageFormat:i.MessageFormat.bundle,bundleFormat:i.BundleFormat.standalone})(r(5622).join(__dirname,"src\\extension\\mobileTargetManager.ts"));const a=i.loadMessageBundle(r(5622).join(__dirname,"src\\extension\\mobileTargetManager.ts"));t.MobileTargetManager=class{getTargetList(e){return n(this,void 0,void 0,(function*(){return this.targets||(yield this.collectTargets()),e?this.targets.filter(e):this.targets}))}getTargetsCountWithFilter(e){return n(this,void 0,void 0,(function*(){return(yield this.getTargetList(e)).length}))}isVirtualTarget(e){return n(this,void 0,void 0,(function*(){if(e===s.TargetType.Device)return!1;if(e===s.TargetType.Simulator)return!0;throw new Error(a(0,null,e))}))}selectTarget(e){var t,r;return n(this,void 0,void 0,(function*(){const n=yield this.getTargetList(e);let i=(null===(t=n[0])||void 0===t?void 0:t.name)||(null===(r=n[0])||void 0===r?void 0:r.id);if(n.length>1){const e={ignoreFocusOut:!0,canPickMany:!1,placeHolder:a(1,null)};i=yield o.window.showQuickPick(n.map((e=>(null==e?void 0:e.name)||(null==e?void 0:e.id))),e)}return i?n.find((e=>e.name===i||e.id===i)):void 0}))}}},6712:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CertificateProvider=void 0;const i=r(5643),o=r(5622),s=r(2087),a=r(5747),c=r(9452),l=r(1890),u=r(7504),d=r(3781),h=r(5288),p=r(2277),f=r(9144),g=r(2501),m=r(1205),_=r(3403);_.config({messageFormat:_.MessageFormat.bundle,bundleFormat:_.BundleFormat.standalone})(r(5622).join(__dirname,"src\\extension\\networkInspector\\certificateProvider.ts"));const E=_.loadMessageBundle(r(5622).join(__dirname,"src\\extension\\networkInspector\\certificateProvider.ts")),v=C("ca.key"),y=C("ca.crt"),S=C("server.key"),b=C("server.csr"),T=C("server.srl"),P=C("server.crt"),A="app.csr",w=/^[\w.-]+$/,R=/[=,]\s*CN=([^,]*)(,.*)?$/;
/**
 * @preserve
 * End region: https://github.com/facebook/flipper/blob/v0.79.1/desktop/app/src/utils/CertificateProvider.tsx
 */
function C(e){return o.resolve(s.homedir(),".config","vscode-react-native","certs",e)}t.CertificateProvider=class{constructor(e){this.adbHelper=e,this.certificateSetup=this.ensureServerCertExists(),this.logger=f.OutputChannelLogger.getChannel(g.NETWORK_INSPECTOR_LOG_CHANNEL_NAME)}loadSecureServerConfig(){return this.certificateSetup.then((()=>({key:a.readFileSync(S),cert:a.readFileSync(P),ca:a.readFileSync(y),requestCert:!0,rejectUnauthorized:!0})))}processCertificateSigningRequest(e,t,r,i){return n(this,void 0,void 0,(function*(){const n=this.santitizeString(e);if(""===n)return Promise.reject(new Error(`Received empty CSR from ${t} device`));this.ensureOpenSSLIsAvailable();const s=(yield u.dir()).path,a=o.join(s,"FlipperCerts");return this.certificateSetup.then((()=>this.getCACertificate())).then((e=>this.deployOrStageFileForMobileApp(r,"sonarCA.crt",e,n,t,i,a))).then((()=>this.generateClientCertificate(n))).then((e=>this.deployOrStageFileForMobileApp(r,"device.crt",e,n,t,i,a))).then((()=>this.extractAppNameFromCSR(n))).then((e=>"FS_ACCESS"===i?this.getTargetDeviceId(t,e,r,n):p.v4())).then((e=>({deviceId:e})))}))}extractAppNameFromCSR(e){return this.writeToTempFile(e).then((e=>i.openssl("req",{in:e,noout:!0,subject:!0,nameopt:!0,RFC2253:!1}).then((t=>[e,t])))).then((([e,t])=>new Promise((function(r,n){a.unlink(e,(e=>{e?n(e):r(t)}))})))).then((e=>{const t=e.trim().match(R);if(!t||t.length<2)throw new Error(`Cannot extract CN from ${e}`);return t[1]})).then((e=>{if(!e.match(w))throw new Error(`Disallowed app name in CSR: ${e}. Only alphanumeric characters and '.' allowed.`);return e}))}getTargetDeviceId(e,t,r,n){return e===m.ClientOS.Android?this.getTargetAndroidDeviceId(t,r,n):e===m.ClientOS.iOS?this.getTargetiOSDeviceId(t,r,n):e==m.ClientOS.MacOS?Promise.resolve(""):Promise.resolve("unknown")}ensureOpenSSLIsAvailable(){if(!i.isInstalled())throw new Error("It looks like you don't have OpenSSL installed globally. Please install it and add it to Path to continue.")}getCACertificate(){return new Promise(((e,t)=>{a.readFile(y,((r,n)=>{r?t(r):e(n.toString())}))}))}generateClientCertificate(e){return this.writeToTempFile(e).then((e=>i.openssl("x509",{req:!0,in:e,CA:y,CAkey:v,CAcreateserial:!0,CAserial:T})))}getRelativePathInAppContainer(e){const t=/Application\/[^/]+\/(.*)/.exec(e);if(t&&2===t.length)return t[1];throw new Error("Path didn't match expected pattern: "+e)}deployOrStageFileForMobileApp(e,t,r,i,s,l,u){return n(this,void 0,void 0,(function*(){const n=this.extractAppNameFromCSR(i);if("WWW"===l)return c.FileSystem.writeFileToFolder(u,t,r).catch((e=>{throw new Error(`Failed to write ${t} to temporary folder. Error: ${e}`)}));if(s===m.ClientOS.Android){const s=n.then((t=>this.getTargetAndroidDeviceId(t,e,i)));return Promise.all([s,n]).then((([n,i])=>"win32"===process.platform?c.FileSystem.writeFileToFolder(u,t,r).then((()=>d.pushFile(this.adbHelper,n,i,e+t,o.join(u,t),this.logger))):d.push(this.adbHelper,n,i,e+t,r,this.logger)))}return s===m.ClientOS.iOS||s===m.ClientOS.Windows||s===m.ClientOS.MacOS?a.promises.writeFile(e+t,r).catch((o=>{if(s===m.ClientOS.iOS){const o=this.getRelativePathInAppContainer(e);return n.then((t=>this.getTargetiOSDeviceId(t,e,i))).then((e=>n.then((n=>this.pushFileToiOSDevice(e,n,o,t,r)))))}throw new Error(`Invalid appDirectory recieved from ${s} device: ${e}: `+o.toString())})):Promise.reject(new Error(`Unsupported device os: ${s}`))}))}pushFileToiOSDevice(e,t,r,n,i){return u.dir({unsafeCleanup:!0}).then((s=>{const c=o.resolve(s.path,n);a.promises.writeFile(c,i).then((()=>h.default.push(e,c,t,r,this.logger)))}))}getTargetAndroidDeviceId(e,t,r){return this.adbHelper.getOnlineTargets().then((n=>{if(0===n.length)throw new Error("No Android devices found");const i=n.map((n=>this.androidDeviceHasMatchingCSR(t,n.id,e,r).then((e=>Object.assign(Object.assign({id:n.id},e),{error:null}))).catch((t=>(this.logger.error(`Unable to check for matching CSR in ${n.id}:${e}`),{id:n.id,isMatch:!1,foundCsr:null,error:t})))));return Promise.all(i).then((t=>{const n=t.filter((e=>e.isMatch)).map((e=>e.id));if(0==n.length){const n=t.find((e=>e.error));if(n)throw n.error;const i=t.filter((e=>null!==e.foundCsr)).map((e=>e.foundCsr?encodeURI(e.foundCsr):"null"));throw this.logger.error(`Looking for CSR (url encoded):\n            ${encodeURI(this.santitizeString(r))}\n            Found these:\n            ${i.join("\n\n")}`),new Error(`No matching device found for app: ${e}`)}return n.length>1&&this.logger.error(`More than one matching device found for CSR:\n${r}`),n[0]}))}))}getTargetiOSDeviceId(e,t,r){const n=/\/Devices\/([^/]+)\//.exec(t);return n&&2==n.length?Promise.resolve(n[1]):h.default.targets().then((n=>{if(0===n.length)throw new Error("No iOS devices found");const i=n.map((n=>this.iOSDeviceHasMatchingCSR(t,n.id,e,r).then((e=>({id:n.id,isMatch:e})))));return Promise.all(i).then((t=>{const r=t.filter((e=>e.isMatch)).map((e=>e.id));if(0==r.length)throw new Error(`No matching device found for app: ${e}`);return r[0]}))}))}androidDeviceHasMatchingCSR(e,t,r,n){return d.pull(this.adbHelper,t,r,e+A,this.logger).then((e=>{const[t,r]=[e.toString(),n].map((e=>this.santitizeString(e)));return{isMatch:t===r,foundCsr:t}}))}iOSDeviceHasMatchingCSR(e,t,r,n){const i=this.getRelativePathInAppContainer(o.resolve(e,A));return u.dir({unsafeCleanup:!0}).then((e=>h.default.pull(t,i,r,o.join(e.path,A),this.logger).then((()=>e)))).then((e=>a.promises.readdir(e.path).then((e=>{if(e.length>1)throw new Error("Conflict in temp dir");if(0===e.length)throw new Error("Failed to pull CSR from device");return e[0]})).then((t=>{const r=o.resolve(e.path,t);return a.promises.readFile(r).then((e=>this.santitizeString(e.toString())))})))).then((e=>e===this.santitizeString(n)))}santitizeString(e){return e.replace(/\r/g,"").trim()}ensureCertificateAuthorityExists(){return a.existsSync(v)?this.checkCertIsValid(y).catch((()=>this.generateCertificateAuthority())):this.generateCertificateAuthority()}checkCertIsValid(e){return a.existsSync(e)?i.openssl("x509",{checkend:86400,in:e}).then((()=>{})).catch((t=>{throw this.logger.warning(E(0,null,e)),t})).then((()=>i.openssl("x509",{enddate:!0,in:e,noout:!0}))).then((e=>{const t=e.trim().split("=")[1].trim(),r=Date.parse(t);if(isNaN(r))throw this.logger.error("Unable to parse certificate expiry date: "+e),new Error("Cannot parse certificate expiry date. Assuming it has expired.");if(r<=Date.now()+864e5)throw new Error("Certificate has expired or will expire soon.")})):Promise.reject(new Error(`${e} does not exist`))}verifyServerCertWasIssuedByCA(){const e={CAfile:y};return e[P]=!1,i.openssl("verify",e).then((e=>{if(!e.match(/[^:]+: OK/))throw new Error("Current server cert was not issued by current CA")}))}generateCertificateAuthority(){return a.existsSync(C(""))||l.sync(C("")),i.openssl("genrsa",{out:v,2048:!1}).then((()=>i.openssl("req",{new:!0,x509:!0,subj:"/C=US/ST=CA/L=Redmond/O=Microsoft/CN=ReactNativeExtensionCA",key:v,out:y}))).then((()=>{}))}ensureServerCertExists(){return n(this,void 0,void 0,(function*(){return this.ensureOpenSSLIsAvailable(),a.existsSync(S)&&a.existsSync(P)&&a.existsSync(y)?this.checkCertIsValid(P).then((()=>this.verifyServerCertWasIssuedByCA())).catch((()=>this.generateServerCertificate())):this.generateServerCertificate()}))}generateServerCertificate(){return this.ensureCertificateAuthorityExists().then((()=>i.openssl("genrsa",{out:S,2048:!1}))).then((()=>i.openssl("req",{new:!0,key:S,out:b,subj:"/C=US/ST=CA/L=Redmond/O=Microsoft/CN=localhost"}))).then((()=>i.openssl("x509",{req:!0,in:b,CA:y,CAkey:v,CAcreateserial:!0,CAserial:T,out:P}))).then((()=>{}))}writeToTempFile(e){return u.file().then((t=>a.promises.writeFile(t.path,e).then((()=>t.path))))}}},5616:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ClientDevice=void 0;const i=r(2162);t.ClientDevice=class{constructor(e,t,r,n,o){this.networkInspectorPluginName="Network",this._id=e,this._query=t,this._connection=r,this.logger=o,this.messageIdCounter=0,this.sdkVersion=t.sdk_version||0,this.activePlugins=new Set,this.requestCallbacks=new Map,this.inspectorView=i.InspectorViewFactory.getInspectorView(n)}get id(){return this._id}get query(){return this._query}get connection(){return this._connection}init(){return n(this,void 0,void 0,(function*(){(yield this.loadPlugins()).includes(this.networkInspectorPluginName)&&this.initNetworkInspectorPlugin(),yield this.inspectorView.init()}))}onMessage(e){if("string"!=typeof e)return;let t;try{t=JSON.parse(e)}catch(t){return void this.logger.error(`Invalid JSON: ${e}`)}const r=t;if(r.id){if(this.sdkVersion<1){const e=this.requestCallbacks.get(r.id);if(!e)return;this.requestCallbacks.delete(r.id),this.onResponse(r,e.resolve,e.reject)}}else{const{error:e}=r;e?this.logger.error(`Error received from device ${r.method?`when calling ${r.method}`:""}: ${e.message} + \nDevice Stack Trace: ${e.stacktrace}`):"execute"===r.method&&r.params&&this.inspectorView.handleMessage(r.params)}}initNetworkInspectorPlugin(){this.activePlugins.add(this.networkInspectorPluginName),this.rawSend("init",{plugin:this.networkInspectorPluginName})}loadPlugins(){return n(this,void 0,void 0,(function*(){return yield this.rawCall("getPlugins",!1).then((e=>e.plugins))}))}rawSend(e,t){const r={method:e,params:t};this._connection&&this._connection.fireAndForget({data:JSON.stringify(r)})}rawCall(e,t,r){return new Promise(((n,i)=>{const o=this.messageIdCounter++,s={method:e,id:o,params:r};this.sdkVersion<1&&this.requestCallbacks.set(o,{reject:i,resolve:n,metadata:s});const a={id:o,method:e,params:r},c=r?r.api:void 0;this.sdkVersion<1?this._connection&&this._connection.fireAndForget({data:JSON.stringify(a)}):!t||this.isAcceptingMessagesFromPlugin(c)?this._connection.requestResponse({data:JSON.stringify(a)}).subscribe({onComplete:e=>{if(!t||this.isAcceptingMessagesFromPlugin(c)){const t=JSON.parse(e.data);this.onResponse(t,n,i)}},onError:e=>{i(e)}}):i(new Error(`Cannot send ${e}, client is not accepting messages for plugin ${c}`))}))}onResponse(e,t,r){if(e.success)t&&t(e.success);else if(e.error){r(e.error);const{error:t}=e;t&&this.logger.debug(t.message)}}isAcceptingMessagesFromPlugin(e){return!(!this._connection||e&&!this.activePlugins.has(e))}}},1205:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.appNameWithUpdateHint=t.buildClientId=t.ClientOS=void 0,function(e){e.iOS="iOS",e.Android="Android",e.Windows="Windows",e.MacOS="MacOS"}(r=t.ClientOS||(t.ClientOS={})),t.buildClientId=
/**
 * @preserve
 * Start region: the code is borrowed from https://github.com/facebook/flipper/blob/v0.79.1/desktop/app/src/utils/clientUtils.tsx#L60-L78
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 * @format
 */
function(e,t){for(const r of["app","os","device","device_id"])e[r]||t.error(`Attempted to build clientId with invalid ${r}: "${e[r]}`);return`${escape(e.app)}#${e.os}#${e.device}#${e.device_id}`},t.appNameWithUpdateHint=
/**
 * @preserve
 * End region: https://github.com/facebook/flipper/blob/v0.79.1/desktop/app/src/utils/clientUtils.tsx#L60-L78
 */
/**
 * @preserve
 * Start region: the code is borrowed from https://github.com/facebook/flipper/blob/v0.79.1/desktop/app/src/server.tsx#L74-L83
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 * @format
 */
function(e){return e.os===r.Android&&(!e.sdk_version||e.sdk_version<3)?e.app+" (Outdated SDK)":e.app}}
/**
 * @preserve
 * End region: https://github.com/facebook/flipper/blob/v0.79.1/desktop/app/src/server.tsx#L74-L83
 */,5637:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AndroidClientDevice=void 0;const n=r(8226);class i extends n.BaseClientDevice{constructor(e,t,r,n){super(e,t,r,n)}}t.AndroidClientDevice=i},8226:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.BaseClientDevice=t.DeviceStatus=void 0,function(e){e[e.Prepared=0]="Prepared",e[e.NotPrepared=1]="NotPrepared"}(r=t.DeviceStatus||(t.DeviceStatus={}));t.BaseClientDevice=class{constructor(e,t,n,i){this._id=e,this._name=i,this._isVirtualTarget=t,this._os=n,this._deviceStatus=r.NotPrepared}get id(){return this._id}get os(){return this._os}get name(){return this._name}get isVirtualTarget(){return this._isVirtualTarget}get deviceStatus(){return this._deviceStatus}set deviceStatus(e){this._deviceStatus=e}}},7693:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeviceStorage=void 0;class r{}t.DeviceStorage=r,r.devices=new Map},9505:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IOSClienDevice=void 0;const n=r(8226);class i extends n.BaseClientDevice{constructor(e,t,r,n,i){super(e,t,r,i),this._isOnline=n}get isOnline(){return this._isOnline}set isOnline(e){this._isOnline=e}}t.IOSClienDevice=i},2501:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkInspectorServer=t.NETWORK_INSPECTOR_LOG_CHANNEL_NAME=void 0;const i=r(1269),o=r(381),s=r(7956),a=r(1205),c=r(5616),l=r(9144),u=r(6712),d=r(1205),h=r(1631),p=r(4016),f=r(3403),g=r(2397),m=r(9047);f.config({messageFormat:f.MessageFormat.bundle,bundleFormat:f.BundleFormat.standalone})(r(5622).join(__dirname,"src\\extension\\networkInspector\\networkInspectorServer.ts"));const _=f.loadMessageBundle(r(5622).join(__dirname,"src\\extension\\networkInspector\\networkInspectorServer.ts"));
/**
 * @preserve
 * Start region: the code is borrowed from https://github.com/facebook/flipper/blob/master/desktop/app/src/server.tsx
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 * @format
 */function E(e){return 1==e?"FS_ACCESS":2==e?"WWW":"FS_ACCESS"}t.NETWORK_INSPECTOR_LOG_CHANNEL_NAME="Network Inspector";class v{constructor(){this.trustedRequestHandler=(e,t)=>{const r=this;if(!t.data)return{};const n=JSON.parse(t.data),{app:i,os:o,device:s,device_id:a,sdk_version:c,csr:l,csr_path:u,medium:d}=n,h=E(d),p=this.addConnection(e,{app:i,os:o,device:s,device_id:a,sdk_version:c,medium:h},{csr:l,csr_path:u}).then((e=>f=e));let f;return e.connectionStatus().subscribe({onNext(e){"ERROR"!=e.kind&&"CLOSED"!=e.kind||p.then((e=>{r.logger.info(_(0,null,e.id)),r.removeConnection(e.id)}))},onSubscribe(e){e.request(Number.MAX_SAFE_INTEGER)},onError(e){r.logger.error("Network inspector server connection status error ",e)}}),{fireAndForget:e=>{f?f.onMessage(e.data):p.then((t=>{t.onMessage(e.data)}))}}},this.untrustedRequestHandler=(e,t)=>{if(!t.data)return{};const r=JSON.parse(t.data);return{requestResponse:e=>{if("string"!=typeof e.data)return new s.Single((()=>{}));let t;try{t=JSON.parse(e.data)}catch(t){return this.logger.error(`Network inspector: invalid JSON: ${e.data}`),new s.Single((()=>{}))}const n=t;if("signCertificate"===n.method){this.logger.debug("CSR received from device");const{csr:e,destination:t,medium:i}=n;return new s.Single((n=>{n.onSubscribe(void 0),this.certificateProvider.processCertificateSigningRequest(e,r.os,t,E(i)).then((e=>{n.onComplete({data:JSON.stringify({deviceId:e.deviceId}),metadata:""})})).catch((e=>{this.logger.error(e.toString()),n.onError(e)}))}))}return new s.Single((()=>{}))},fireAndForget:e=>{if("string"!=typeof e.data)return;let t;try{t=JSON.parse(e.data)}catch(t){return void this.logger.error(`Network inspector: invalid JSON: ${e.data}`)}if(t&&"signCertificate"===t.method){this.logger.debug("CSR received from device");const{csr:e,destination:n,medium:i}=t;this.certificateProvider.processCertificateSigningRequest(e,r.os,n,E(i)).catch((e=>{this.logger.error(e.toString())}))}}}},this.connections=new Map,this.logger=l.OutputChannelLogger.getChannel(t.NETWORK_INSPECTOR_LOG_CHANNEL_NAME)}start(e){return n(this,void 0,void 0,(function*(){return this.logger.info(_(1,null)),m.TipNotificationService.getInstance().setKnownDateForFeatureById("networkInspector"),m.TipNotificationService.getInstance().showTipNotification(!1,"networkInspectorLogsColorTheme"),this.initialisePromise=new Promise(((t,r)=>n(this,void 0,void 0,(function*(){this.certificateProvider=new u.CertificateProvider(e);try{let e=yield this.certificateProvider.loadSecureServerConfig();this.secureServer=yield this.startServer(v.SecureServerPort,e),this.insecureServer=yield this.startServer(v.InsecureServerPort)}catch(e){return r(e)}this.logger.info(_(2,null)),t()})))),this.initialisePromise}))}stop(){return n(this,void 0,void 0,(function*(){if(this.initialisePromise){try{yield this.initialisePromise}catch(e){this.logger.error(e.toString())}this.secureServer&&this.secureServer.stop(),this.insecureServer&&this.insecureServer.stop()}this.logger.info(_(3,null))}))}startServer(e,t){return n(this,void 0,void 0,(function*(){return new Promise(((r,n)=>{let s;s=new i.RSocketServer({getRequestHandler:t?this.trustedRequestHandler:this.untrustedRequestHandler,transport:new o.default({port:e,serverFactory:i=>{const o=t?p.createServer(t,(e=>{i(e)})):h.createServer(i);return o.on("error",(t=>{this.logger.error(_(4,null,e)),n(t)})).on("listening",(()=>{this.logger.debug(`${t?"Secure":"Certificate"} server started on port ${e}`),r(s)})),o}})}),s&&s.start()}))}))}addConnection(e,t,r){return n(this,void 0,void 0,(function*(){const{csr_path:i,csr:o}=r;return(i&&o&&t.os!==d.ClientOS.iOS?this.certificateProvider.extractAppNameFromCSR(o).then((e=>this.certificateProvider.getTargetDeviceId(t.os,e,i,o))):Promise.resolve(t.device_id)).then((r=>n(this,void 0,void 0,(function*(){t.device_id=r,t.app=a.appNameWithUpdateHint(t);const n=a.buildClientId({app:t.app,os:t.os,device:t.device,device_id:r},this.logger);this.logger.info(_(5,null,n));const i=new c.ClientDevice(n,t,e,g.InspectorViewType.console,this.logger);return i.init().then((()=>{this.logger.debug(`Device client initialised: ${n}`),this.removeConnection(n),this.connections.set(n,i)})),i}))))}))}
/**
     * @preserve
     * End region: https://github.com/facebook/flipper/blob/master/desktop/app/src/server.tsx
     */removeConnection(e){const t=this.connections.get(e);t&&(t.connection&&t.connection.close(),this.connections.delete(e))}}t.NetworkInspectorServer=v,v.SecureServerPort=8088,v.InsecureServerPort=8089},2374:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormUrlencodedFormatter=void 0;const n=r(367),i=r(1191);t.FormUrlencodedFormatter=
/**
 * @preserve
 * Start region: the code is borrowed from https://github.com/facebook/flipper/blob/v0.79.1/desktop/plugins/network/RequestDetails.tsx#L769-L785
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 * @format
 */
class{constructor(e){this.logger=e}formatRequest(e,t){if(t.startsWith("application/x-www-form-urlencoded")){const t=n.decodeBody(e,this.logger);return t?i.parse(t):null}return null}}}
/**
 * @preserve
 * End region: https://github.com/facebook/flipper/blob/v0.79.1/desktop/plugins/network/RequestDetails.tsx#L769-L785
 */,131:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphQLFormatter=void 0;const n=r(367),i=r(1191);t.GraphQLFormatter=
/**
 * @preserve
 * Start region: the code is borrowed from https://github.com/facebook/flipper/blob/v0.79.1/desktop/plugins/network/RequestDetails.tsx#L704-L767
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 * @format
 */
class{constructor(e){this.logger=e}formatRequest(e,t){if(e.url.indexOf("graphql")>0){const t=n.decodeBody(e,this.logger);if(!t)return null;const r=i.parse(t);return"string"==typeof r.variables&&(r.variables=JSON.parse(r.variables)),"string"==typeof r.query_params&&(r.query_params=JSON.parse(r.query_params)),r}return null}formatResponse(e,t){if(t.startsWith("application/json")||t.startsWith("application/hal+json")||t.startsWith("text/javascript")||t.startsWith("text/html")||t.startsWith("application/x-fb-flatbuffer")){let t=n.decodeBody(e,this.logger);try{return JSON.parse(t)}catch(e){return t.replace(/}{/g,"}\r\n{").split("\n").map((e=>JSON.parse(e)))}}return null}}}
/**
 * @preserve
 * End region: https://github.com/facebook/flipper/blob/v0.79.1/desktop/plugins/network/RequestDetails.tsx#L704-L767
 */,5682:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageFormatter=void 0;t.ImageFormatter=
/**
 * @preserve
 * Start region: the code is borrowed from https://github.com/facebook/flipper/blob/v0.79.1/desktop/plugins/network/RequestDetails.tsx#L482-L497
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 * @format
 */
class{formatResponse(e,t){return t.startsWith("image/")&&e.data?e.data:null}}}
/**
 * @preserve
 * End region: https://github.com/facebook/flipper/blob/v0.79.1/desktop/plugins/network/RequestDetails.tsx#L482-L497
 */,6908:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JSONFormatter=void 0;const n=r(367);
/**
 * @preserve
 * Start region: the code is borrowed from https://github.com/facebook/flipper/blob/v0.79.1/desktop/plugins/network/RequestDetails.tsx#L609-L653
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 * @format
 */t.JSONFormatter=class{constructor(e){this.logger=e}formatRequest(e,t){return this.format(n.decodeBody(e,this.logger),t)}formatResponse(e,t){return this.format(n.decodeBody(e,this.logger),t)}format(e,t){if(t.startsWith("application/json")||t.startsWith("application/hal+json")||t.startsWith("text/javascript")||t.startsWith("application/x-fb-flatbuffer"))try{return JSON.parse(e)}catch(t){return e.split("\n").map((e=>JSON.parse(e)))}return null}}}
/**
 * @preserve
 * End region: https://github.com/facebook/flipper/blob/v0.79.1/desktop/plugins/network/RequestDetails.tsx#L609-L653
 */,367:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getHeaderValue=t.decodeBody=t.RequestBodyFormatter=void 0;const n=r(4276),i=r(9591),o=r(6908),s=r(5682),a=r(131),c=r(2374),l=r(9901);
/**
 * @preserve
 * Start region: the code is borrowed from https://github.com/facebook/flipper/blob/v0.79.1/desktop/plugins/network/utils.tsx#L23-L60
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 * @format
 */
function u(e,t){if(!e.data)return"";try{if("gzip"===d(e.headers,"Content-Encoding"))try{const t=n.Base64.atob(e.data),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return i.inflate(r,{to:"string"})}catch(e){if(!e.toString().includes("incorrect header check"))throw e}return n.Base64.decode(e.data)}catch(r){return null==t||t.debug(`Network inspector failed to decode request/response body (size: ${e.data.length}): ${r.toString()}`),""}}
/**
 * @preserve
 * End region: https://github.com/facebook/flipper/blob/v0.79.1/desktop/plugins/network/utils.tsx#L23-L60
 */
/**
 * @preserve
 * Start region: the code is borrowed from https://github.com/facebook/flipper/blob/v0.79.1/desktop/plugins/network/utils.tsx#L14-L21
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 * @format
 */
function d(e,t){for(const r of e)if(r.key.toLowerCase()===t.toLowerCase())return r.value;return""}t.RequestBodyFormatter=class{constructor(e){this.logger=e,this.formatters=[new s.ImageFormatter,new a.GraphQLFormatter(this.logger),new o.JSONFormatter(this.logger),new c.FormUrlencodedFormatter(this.logger)]}formatBody(e){const t=d(e.headers,"content-type");for(let r of this.formatters)try{let n=null;if(e.status?r.formatResponse&&(n=r.formatResponse(e,t)):r.formatRequest&&(n=r.formatRequest(e,t)),l.notNullOrUndefined(n))return n}catch(e){this.logger.debug(`RequestBodyFormatter exception from ${r.constructor.name} ${e.message}`)}return u(e,this.logger)}},t.decodeBody=u,t.getHeaderValue=d}
/**
 * @preserve
 * End region: https://github.com/facebook/flipper/blob/v0.79.1/desktop/plugins/network/utils.tsx#L14-L21
 */,1073:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.combineBase64Chunks=void 0;const n=r(1669),i=r(4276);t.combineBase64Chunks=
/**
 * @preserve
 * Start region: the code is borrowed from https://github.com/facebook/flipper/blob/v0.79.1/desktop/plugins/network/chunks.tsx#L12-L28
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 * @format
 */
function(e){const t=e.map((e=>Uint8Array.from(i.Base64.atob(e),(e=>e.charCodeAt(0))).buffer)),r=t.map((e=>e.byteLength)).reduce(((e,t)=>e+t),0),o=new Uint8Array(r);let s=0;for(let e=0;e<t.length;e++)o.set(new Uint8Array(t[e]),s),s+=t[e].byteLength;return new n.TextDecoder("utf-8").decode(o)}}
/**
 * @preserve
 * End region: https://github.com/facebook/flipper/blob/v0.79.1/desktop/plugins/network/chunks.tsx#L12-L28
 */,9194:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.InspectorConsoleView=void 0;const i=r(2397),o=r(8835),s=r(7549),a=r(9658),c=r(2463),l=r(1073),u=r(4276);class d extends i.InspectorView{constructor(){super(...arguments),this.maxResponseBodyLength=75e3,this.openDeveloperToolsCommand="workbench.action.toggleDevTools",this.consoleLogsColors={Blue:"#0000ff",Orange:"#f28b54"}}init(){return n(this,void 0,void 0,(function*(){this.isInitialized||(this.isInitialized=!0,yield s.commands.executeCommand(this.openDeveloperToolsCommand),a.EditorColorThemesHelper.isAutoDetectColorSchemeEnabled()?this.setupConsoleLogsColor(a.EditorColorThemesHelper.getCurrentSystemColorTheme()):this.setupConsoleLogsColor(c.SettingsHelper.getNetworkInspectorConsoleLogsColorTheme()))}))}handleMessage(e){if(e.params)switch(e.method){case"newRequest":this.handleRequest(e.params);break;case"newResponse":this.handleResponse(e.params);break;case"partialResponse":this.handlePartialResponse(e.params)}}setupConsoleLogsColor(e){e===a.SystemColorTheme.Light?this.consoleLogsColor=this.consoleLogsColors.Blue:this.consoleLogsColor=this.consoleLogsColors.Orange}handleRequest(e){this.requests.set(e.id,e)}handleResponse(e){this.responses.set(e.id,e),this.requests.has(e.id)&&this.printNetworkRequestData(this.createNetworkRequestData(this.requests.get(e.id),e))}handlePartialResponse(e){var t,r;let n,i;if(void 0!==e.index&&e.index>0){const r=e,o=null!==(t=this.partialResponses.get(r.id))&&void 0!==t?t:{followupChunks:{}};n=Object.assign({},o),n.followupChunks[r.index]=r.data,i=r.id}else{const t=e,o=null!==(r=this.partialResponses.get(t.id))&&void 0!==r?r:{followupChunks:{}};n=Object.assign(Object.assign({},o),{initialResponse:t}),i=t.id}const o=this.assembleChunksIfResponseIsComplete(n);o?(this.handleResponse(o),this.partialResponses.delete(i)):this.partialResponses.set(i,n)}
/**
     * @preserve
     * Start region: the code is borrowed from https://github.com/facebook/flipper/blob/v0.79.1/desktop/plugins/network/index.tsx#L276-L324
     *
     * Copyright (c) Facebook, Inc. and its affiliates.
     *
     * This source code is licensed under the MIT license found in the
     * LICENSE file in the root directory of this source tree.
     *
     * @format
     */assembleChunksIfResponseIsComplete(e){var t;const r=null===(t=e.initialResponse)||void 0===t?void 0:t.totalChunks;if(!e.initialResponse||!r||Object.keys(e.followupChunks).length+1<r)return null;const n=e.initialResponse,i=null!=n.data?[n.data,...Object.entries(e.followupChunks).sort(((e,t)=>parseInt(e[0],10)-parseInt(t[0],10))).map((([e,t])=>t))]:[],o=l.combineBase64Chunks(i);return Object.assign(Object.assign({},n),{data:u.Base64.btoa(o)})}
/**
     * @preserve
     * End region: https://github.com/facebook/flipper/blob/v0.79.1/desktop/plugins/network/index.tsx#L276-L324
     */createNetworkRequestData(e,t){const r=new o.URL(e.url),n={title:`%cNetwork request: ${e.method} ${r?r.host+r.pathname:"<unknown>"}`,networkRequestData:{URL:e.url,Method:e.method,Status:t.status,Duration:this.getRequestDurationString(e.timestamp,t.timestamp),"Request Headers":this.prepareHeadersViewObject(e.headers),"Response Headers":this.prepareHeadersViewObject(t.headers),"Request Body":this.requestBodyDecoder.formatBody(e),"Response Body":this.requestBodyDecoder.formatBody(t)}};return r.search&&(n.networkRequestData["Request Query Parameters"]=this.retrieveURLSearchParams(r.searchParams)),n}retrieveURLSearchParams(e){let t={};return e.forEach(((e,r)=>{t[r]=e})),t}getRequestDurationString(e,t){return Math.abs(t-e)+"ms"}prepareHeadersViewObject(e){return e.reduce(((e,t)=>(e[t.key]=t.value,e)),{})}printNetworkRequestData(e){const t=e.networkRequestData["Response Body"];t&&"string"==typeof t&&t.length>this.maxResponseBodyLength&&(e.networkRequestData["Response Body"]=t.substring(0,this.maxResponseBodyLength)+"... (Response body exceeds output limit, the rest its part is omitted)"),console.log(e.title,`color: ${this.consoleLogsColor}`,e.networkRequestData),this.logger.debug(`${e.title}\ncolor: ${this.consoleLogsColor}\n${JSON.stringify(e.networkRequestData,null,2)}`)}}t.InspectorConsoleView=d},2397:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InspectorView=t.InspectorViewType=void 0;const n=r(367);!function(e){e[e.console=0]="console"}(t.InspectorViewType||(t.InspectorViewType={}));t.InspectorView=class{constructor(e){this.logger=e,this.requests=new Map,this.responses=new Map,this.partialResponses=new Map,this.isInitialized=!1,this.requestBodyDecoder=new n.RequestBodyFormatter(this.logger)}dispose(){}}},2162:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InspectorViewFactory=void 0;const n=r(9144),i=r(2501),o=r(9194),s=r(2397);class a{static getInspectorView(e){if(!a.cachedInspectorViews.has(e)){if(e!==s.InspectorViewType.console)throw new Error(`Unsupported inspector view type: ${e}`);a.cachedInspectorViews.set(s.InspectorViewType.console,new o.InspectorConsoleView(n.OutputChannelLogger.getChannel(i.NETWORK_INSPECTOR_LOG_CHANNEL_NAME)))}return a.cachedInspectorViews.get(e)}static clearCache(){a.cachedInspectorViews.forEach((e=>{e.dispose()})),a.cachedInspectorViews.clear()}}t.InspectorViewFactory=a,a.cachedInspectorViews=new Map},5034:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PackagerStatusIndicator=t.PackagerStatus=void 0;const n=r(7549),i=r(6625),o=r(3403),s=r(2463);o.config({messageFormat:o.MessageFormat.bundle,bundleFormat:o.BundleFormat.standalone})(r(5622).join(__dirname,"src\\extension\\packagerStatusIndicator.ts"));const a=o.loadMessageBundle(r(5622).join(__dirname,"src\\extension\\packagerStatusIndicator.ts"));var c;!function(e){e[e.PACKAGER_STOPPED=0]="PACKAGER_STOPPED",e[e.PACKAGER_STOPPING=1]="PACKAGER_STOPPING",e[e.PACKAGER_STARTED=2]="PACKAGER_STARTED",e[e.PACKAGER_STARTING=3]="PACKAGER_STARTING"}(c=t.PackagerStatus||(t.PackagerStatus={}));class l{constructor(e){this.projectRoot=e,i.gte(n.version,"1.57.0")?(this.restartPackagerItem=n.window.createStatusBarItem("restartPackagerItem",n.StatusBarAlignment.Left,10),this.restartPackagerItem.name=l.RESTART_TOOLTIP,this.togglePackagerItem=n.window.createStatusBarItem("togglePackagerItem",n.StatusBarAlignment.Left,10),this.togglePackagerItem.name=l.PACKAGER_NAME):(this.restartPackagerItem=n.window.createStatusBarItem(n.StatusBarAlignment.Left,10),this.togglePackagerItem=n.window.createStatusBarItem(n.StatusBarAlignment.Left,10)),this.restartPackagerItem.text=l.RESTART_ICON,this.restartPackagerItem.command=l.RESTART_COMMAND,this.restartPackagerItem.tooltip=l.RESTART_TOOLTIP,this.setupPackagerStatusIndicatorItems(l.START_ICON,l.START_COMMAND,l.START_TOOLTIP)}updateDisplayVersion(){this.displayVersion=l.FULL_VERSION;try{this.projectRoot&&(this.displayVersion=s.SettingsHelper.getPackagerStatusIndicatorPattern(this.projectRoot))}catch(e){}}dispose(){this.togglePackagerItem.dispose(),this.restartPackagerItem.dispose()}setupPackagerStatusIndicatorItems(e,t,r=""){switch(this.updateDisplayVersion(),this.togglePackagerItem.command=t,this.togglePackagerItem.tooltip=r,this.displayVersion){case l.FULL_VERSION:this.togglePackagerItem.text=`${e} ${l.PACKAGER_NAME}`,this.togglePackagerItem.show(),this.restartPackagerItem.show();break;case l.SHORT_VERSION:this.togglePackagerItem.text=`${e}`,this.togglePackagerItem.show(),this.restartPackagerItem.show()}}updatePackagerStatus(e){switch(e){case c.PACKAGER_STOPPED:this.setupPackagerStatusIndicatorItems(l.START_ICON,l.START_COMMAND,l.START_TOOLTIP);break;case c.PACKAGER_STOPPING:this.setupPackagerStatusIndicatorItems(l.ACTIVITY_ICON,void 0,l.STOPPING_TOOLTIP);break;case c.PACKAGER_STARTED:this.setupPackagerStatusIndicatorItems(l.STOP_ICON,l.STOP_COMMAND,l.STOP_TOOLTIP);break;case c.PACKAGER_STARTING:this.setupPackagerStatusIndicatorItems(l.ACTIVITY_ICON,void 0,l.STARTING_TOOLTIP)}}}t.PackagerStatusIndicator=l,l.PACKAGER_NAME=a(0,null),l.STOP_TOOLTIP=a(1,null),l.START_TOOLTIP=a(2,null),l.RESTART_TOOLTIP=a(3,null),l.STARTING_TOOLTIP=a(4,null),l.STOPPING_TOOLTIP=a(5,null),l.START_ICON="$(play)",l.STOP_ICON="$(primitive-square)",l.ACTIVITY_ICON="$(loading~spin)",l.RESTART_ICON="$(sync)",l.START_COMMAND="reactNative.startPackager",l.RESTART_COMMAND="reactNative.restartPackager",l.STOP_COMMAND="reactNative.stopPackager",l.FULL_VERSION="Full",l.SHORT_VERSION="Short"},3833:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlatformResolver=void 0;const n=r(7599),i=r(9911),o=r(7833),s=r(5070),a=r(7005),c=r(1837),l=r(147);t.PlatformResolver=class{resolveMobilePlatform(e,t,r){switch(e){case n.PlatformType.iOS:return new i.IOSPlatform(t,r);case n.PlatformType.Android:return new o.AndroidPlatform(t,r);case n.PlatformType.Exponent:return new c.ExponentPlatform(t,r);case n.PlatformType.Windows:return new s.WindowsPlatform(t,r);case n.PlatformType.macOS:return new l.MacOSPlatform(t,r);default:return new a.GeneralPlatform(t,r)}}}},8730:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectsStorage=void 0;class r{static addFolder(e,t){this.projectsCache[e.toLowerCase()]=t}static getFolder(e){return this.projectsCache[e.uri.fsPath.toLowerCase()]}static delFolder(e){delete this.projectsCache[e.uri.fsPath.toLowerCase()]}}t.ProjectsStorage=r,r.projectsCache={}},1181:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QRCodeContentProvider=void 0;const n=r(7318),i=r(3403);i.config({messageFormat:i.MessageFormat.bundle,bundleFormat:i.BundleFormat.standalone})(r(5622).join(__dirname,"src\\extension\\qrCodeContentProvider.ts"));const o=i.loadMessageBundle(r(5622).join(__dirname,"src\\extension\\qrCodeContentProvider.ts"));t.QRCodeContentProvider=class{constructor(){this.cache={}}provideTextDocumentContent(e){let t=e.toString();if(!this.cache[t]){const e=n.imageSync(t);this.cache[t]="data:image/png;base64,"+e.toString("base64")}return`<!DOCTYPE html>\n        <html>\n        <body>\n            <div style="text-align:center">\n                <h3>\n                    ${o(0,null,t)}\n                <h3>\n                <img src="${this.cache[t]}" />\n            </div>\n        </body>\n        </html>`}}},5526:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ReactDirManager=void 0;const i=r(5622),o=r(9144),s=r(9897),a=r(312),c=r(9452),l=r(8079);t.ReactDirManager=class{constructor(e){this.isDisposed=!1,this.vscodeDirPath=i.join(e||"",".vscode"),this.reactDirPath=i.join(this.vscodeDirPath,".react")}setup(){return n(this,void 0,void 0,(function*(){this.isDisposed=!1;let e=new c.FileSystem;yield e.removePathRecursivelyAsync(this.reactDirPath),e.existsSync(this.vscodeDirPath)||(yield e.mkDir(this.vscodeDirPath)),yield e.mkDir(this.reactDirPath)}))}dispose(){this.isDisposed=!0,new l.EntryPointHandler(l.ProcessType.Extension,o.OutputChannelLogger.getMainChannel()).runFunction("extension.deleteTemporaryFolder",s.ErrorHelper.getInternalError(a.InternalErrorCode.RNTempFolderDeletionFailed,this.reactDirPath),(()=>(new c.FileSystem).removePathRecursivelySync(this.reactDirPath)))}}},4418:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReactNativeSessionManager=void 0;const n=r(7549),i=r(1631),o=r(3350),s=r(4518),a=r(5319);t.ReactNativeSessionManager=class{constructor(){this.servers=new Map,this.connections=new Map}createDebugAdapterDescriptor(e,t){const r=i.createServer((t=>{let r;r=e.type===o.DEBUG_TYPES.REACT_NATIVE?new s.RNDebugSession(e):new a.DirectDebugSession(e),this.connections.set(e.id,t),r.setRunAsServer(!0),r.start(t,t)}));return r.listen(0),this.servers.set(e.id,r),new n.DebugAdapterServer(r.address().port)}terminate(e){this.destroyServer(e.debugSession.id,this.servers.get(e.debugSession.id));let t=this.connections.get(e.debugSession.id);t&&(e.args.forcedStop&&this.destroyConnection(t),this.connections.delete(e.debugSession.id))}dispose(){this.servers.forEach(((e,t)=>{this.destroyServer(t,e)})),this.connections.forEach(((e,t)=>{this.destroyConnection(e),this.connections.delete(t)}))}destroyConnection(e){e.removeAllListeners(),e.on("error",(()=>{})),e.destroy()}destroyServer(e,t){t&&(t.close(),this.servers.delete(e))}}},1714:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.retryDownloadConfig=t.downloadConfig=void 0;const i=r(8102),o=r(5773);function s(e){return n(this,void 0,void 0,(function*(){const t=yield o.Request.request(e,!1,!0);return JSON.parse(t)}))}t.downloadConfig=s,t.retryDownloadConfig=function(e,t,r=60){return n(this,void 0,void 0,(function*(){return i.PromiseUtil.retryAsync((()=>n(this,void 0,void 0,(function*(){try{return yield s(e)}catch(e){return}}))),(e=>!!e),r,2e3,`Could not download remote config from ${e}`,t)}))}},6465:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.onFolderAdded=t.getCountOfWorkspaceFolders=t.createAdditionalWorkspaceFolder=t.deactivate=t.activate=void 0;try{r(5747).statSync(`${__filename}.map`),r(6252).install()}catch(e){}const i=r(5622),o=r(5747),s=r(7549),a=r(6625),c=r(9885),l=r(8079),u=r(9897),d=r(312),h=r(2463),p=r(9327),f=r(5526),g=r(4301),m=r(3821),_=r(9144),E=r(3879),v=r(1126),y=r(3350),S=r(9149),b=r(7456),T=r(4418),P=r(8730),A=r(8280),w=r(4800),R=r(3403),C=r(9185),I=r(3773),O=r(4952),N=r(9047),M=r(1334),k=r(7005);R.config({messageFormat:R.MessageFormat.bundle,bundleFormat:R.BundleFormat.standalone})(r(5622).join(__dirname,"src\\extension\\rn-extension.ts"));const D=R.loadMessageBundle(r(5622).join(__dirname,"src\\extension\\rn-extension.ts")),L=_.OutputChannelLogger.getMainChannel(),x=new l.EntryPointHandler(l.ProcessType.Extension,L);let F,U;const j="react-native-tools";let B,G=9e3;function H(e){return n(this,void 0,void 0,(function*(){let t=e.uri.fsPath,r=h.SettingsHelper.getReactNativeProjectRoot(t);L.debug(`Add project: ${r}`);const i=yield p.ProjectVersionHelper.tryToGetRNSemverValidVersionsFromProjectPackage(r,p.ProjectVersionHelper.generateAllAdditionalPackages(),r);L.debug(`React Native version: ${i.reactNativeVersion}`);let o=[];p.ProjectVersionHelper.isVersionError(i.reactNativeVersion)?(L.debug(`react-native package version is not found in ${r}. Reason: ${i.reactNativeVersion}`),m.TelemetryHelper.sendErrorEvent("AddProjectReactNativeVersionIsEmpty",u.ErrorHelper.getInternalError(d.InternalErrorCode.CouldNotFindProjectVersion),i.reactNativeVersion)):!function(e){if(a.valid(e)&&!a.gte(e,"0.19.0")){m.TelemetryHelper.sendSimpleEvent("unsupportedRNVersion",{rnVersion:e});const t=D(1,null),r=`${t}: ${e}`;return s.window.showWarningMessage(t),L.warning(r),!1}return!0}(i.reactNativeVersion)?L.debug(`react-native@${i.reactNativeVersion} isn't supported`):(s.commands.executeCommand("setContext",w.CONTEXT_VARIABLES_NAMES.IS_RN_PROJECT,!0),o.push(x.runFunction("debugger.setupLauncherStub",u.ErrorHelper.getInternalError(d.InternalErrorCode.DebuggerStubLauncherFailed),(()=>n(this,void 0,void 0,(function*(){let o=new f.ReactDirManager(t);const s=new M.RNProjectObserver(r,i);yield function(e){return n(this,void 0,void 0,(function*(){return yield e.setup(),B.subscriptions.push(e),e}))}(o),P.ProjectsStorage.addFolder(r,new A.AppLauncher(o,s,e)),G++})))))),yield Promise.all(o)}))}function V(e,t,r){B.subscriptions.push(s.commands.registerCommand(`reactNative.${e}`,((...n)=>{const i={platform:{value:c.CommandPaletteHandler.getPlatformByCommandName(e),isPii:!1}};return L.debug(`Run command: ${e}`),x.runFunctionWExtProps(`commandPalette.${e}`,i,t,r.bind(null,n))})))}t.activate=function(e){return n(this,void 0,void 0,(function*(){const t=C.getExtensionName(),i=C.getExtensionVersion();if(!i)throw new Error(D(0,null));if(t){const e=function(e){if(!O.ExtensionConfigManager.config.has("version")||O.ExtensionConfigManager.config.get("version")!==e)return O.ExtensionConfigManager.config.set("version",e),!0;return!1}(i);if(t.includes("preview")){if(function(){if(s.extensions.getExtension("msjsdiag.vscode-react-native"))return s.window.showInformationMessage(D(5,null)),!0;return!1}())return}else e&&function(e){const t=C.findFileInFolderHierarchy(__dirname,"CHANGELOG.md");t&&s.window.showInformationMessage(D(6,null,e),D(7,null)).then((()=>{s.commands.executeCommand("markdown.showPreview",s.Uri.file(t))}))}(i);e&&N.TipNotificationService.getInstance().updateTipsConfig(),N.TipNotificationService.getInstance().showTipNotification()}L.debug("Begin to activate..."),L.debug(`Extension version: ${i}`);const o=new(0,r(4398).Z)(j,i,g.Telemetry.APPINSIGHTS_INSTRUMENTATIONKEY),a=F=new E.ReactNativeDebugConfigProvider,l=U=new v.ReactNativeDebugDynamicConfigProvider,h=new S.LaunchJsonCompletionProvider,p=s.workspace.workspaceFolders;let f={};return p&&(f={workspaceFoldersCount:{value:p.length,isPii:!1}}),B=e,x.runApp(j,i,u.ErrorHelper.getInternalError(d.InternalErrorCode.ExtensionActivationFailed),o,(function(){return n(this,void 0,void 0,(function*(){B.subscriptions.push(s.workspace.onDidChangeWorkspaceFolders((e=>function(e){e.removed.length&&e.removed.forEach((e=>{!function(e){let t=P.ProjectsStorage.getFolder(e);Object.keys(t).forEach((e=>{t[e].dispose&&t[e].dispose()})),L.debug(`Delete project: ${e.uri.fsPath}`),P.ProjectsStorage.delFolder(e);try{B.subscriptions.forEach(((e,t)=>{e.isDisposed&&B.subscriptions.splice(t,1)}))}catch(e){}}(e)}));e.added.length&&e.added.forEach((e=>{H(e)}))}(e)))),B.subscriptions.push(s.workspace.onDidChangeConfiguration((()=>{}))),B.subscriptions.push(N.TipNotificationService.getInstance()),B.subscriptions.push(s.debug.registerDebugConfigurationProvider(y.DEBUG_TYPES.REACT_NATIVE,a)),B.subscriptions.push(s.debug.registerDebugConfigurationProvider(y.DEBUG_TYPES.REACT_NATIVE,l,s.DebugConfigurationProviderTriggerKind.Dynamic)),B.subscriptions.push(s.debug.registerDebugConfigurationProvider(y.DEBUG_TYPES.REACT_NATIVE_DIRECT,l,s.DebugConfigurationProviderTriggerKind.Dynamic)),B.subscriptions.push(s.languages.registerCompletionItemProvider({language:S.JsonLanguages.json},h)),B.subscriptions.push(s.languages.registerCompletionItemProvider({language:S.JsonLanguages.jsonWithComments},h));const e=new T.ReactNativeSessionManager;B.subscriptions.push(s.debug.registerDebugAdapterDescriptorFactory(y.DEBUG_TYPES.REACT_NATIVE,e)),B.subscriptions.push(s.debug.registerDebugAdapterDescriptorFactory(y.DEBUG_TYPES.REACT_NATIVE_DIRECT,e)),B.subscriptions.push(e),B.subscriptions.push(b.DebugSessionBase.onDidTerminateRootDebugSession((t=>{e.terminate(t)})));let t=m.TelemetryHelper.createTelemetryEvent("activate");g.Telemetry.send(t);let r=[];p?(L.debug(`Projects found: ${p.length}`),p.forEach((e=>{r.push(H(e))}))):(L.warning("Could not find workspace while activating"),m.TelemetryHelper.sendErrorEvent("ActivateCouldNotFindWorkspace",u.ErrorHelper.getInternalError(d.InternalErrorCode.CouldNotFindWorkspace))),yield Promise.all(r),V("launchAndroidSimulator",u.ErrorHelper.getInternalError(d.InternalErrorCode.FailedToStartAndroidEmulator),(()=>c.CommandPaletteHandler.launchAndroidEmulator())),V("launchIOSSimulator",u.ErrorHelper.getInternalError(d.InternalErrorCode.FailedToStartIOSSimulator),(()=>c.CommandPaletteHandler.launchIOSSimulator())),V("runAndroidSimulator",u.ErrorHelper.getInternalError(d.InternalErrorCode.FailedToRunOnAndroid),(()=>c.CommandPaletteHandler.runAndroid(k.TargetType.Simulator))),V("runAndroidDevice",u.ErrorHelper.getInternalError(d.InternalErrorCode.FailedToRunOnAndroid),(()=>c.CommandPaletteHandler.runAndroid(k.TargetType.Device))),V("runIosSimulator",u.ErrorHelper.getInternalError(d.InternalErrorCode.FailedToRunOnIos),(()=>c.CommandPaletteHandler.runIos(k.TargetType.Simulator))),V("runIosDevice",u.ErrorHelper.getInternalError(d.InternalErrorCode.FailedToRunOnIos),(()=>c.CommandPaletteHandler.runIos(k.TargetType.Device))),V("runExponent",u.ErrorHelper.getInternalError(d.InternalErrorCode.FailedToRunExponent),(()=>c.CommandPaletteHandler.runExponent())),V("runWindows",u.ErrorHelper.getInternalError(d.InternalErrorCode.FailedToRunOnWindows),(()=>c.CommandPaletteHandler.runWindows())),V("runMacOS",u.ErrorHelper.getInternalError(d.InternalErrorCode.FailedToRunOnMacOS),(()=>c.CommandPaletteHandler.runMacOS())),V("startPackager",u.ErrorHelper.getInternalError(d.InternalErrorCode.FailedToStartPackager),(()=>c.CommandPaletteHandler.startPackager())),V("stopPackager",u.ErrorHelper.getInternalError(d.InternalErrorCode.FailedToStopPackager),(()=>c.CommandPaletteHandler.stopPackager())),V("restartPackager",u.ErrorHelper.getInternalError(d.InternalErrorCode.FailedToRestartPackager),(()=>c.CommandPaletteHandler.restartPackager())),V("publishToExpHost",u.ErrorHelper.getInternalError(d.InternalErrorCode.FailedToPublishToExpHost),(()=>c.CommandPaletteHandler.publishToExpHost())),V("startLogCatMonitor",u.ErrorHelper.getInternalError(d.InternalErrorCode.AndroidCouldNotStartLogCatMonitor),(()=>c.CommandPaletteHandler.startLogCatMonitor())),V("stopLogCatMonitor",u.ErrorHelper.getInternalError(d.InternalErrorCode.AndroidCouldNotStopLogCatMonitor),(()=>c.CommandPaletteHandler.stopLogCatMonitor())),V("startNetworkInspector",u.ErrorHelper.getInternalError(d.InternalErrorCode.CouldNotStartNetworkInspector),(()=>c.CommandPaletteHandler.startNetworkInspector())),V("stopNetworkInspector",u.ErrorHelper.getInternalError(d.InternalErrorCode.CouldNotStopNetworkInspector),(()=>c.CommandPaletteHandler.stopNetworkInspector())),V("showDevMenu",u.ErrorHelper.getInternalError(d.InternalErrorCode.CommandFailed,D(2,null)),(()=>c.CommandPaletteHandler.showDevMenu())),V("reloadApp",u.ErrorHelper.getInternalError(d.InternalErrorCode.CommandFailed,D(3,null)),(()=>c.CommandPaletteHandler.reloadApp())),V("runInspector",u.ErrorHelper.getInternalError(d.InternalErrorCode.CommandFailed,D(4,null)),(()=>c.CommandPaletteHandler.runElementInspector())),V("debugScenario.attachHermesApplicationExperimental",u.ErrorHelper.getInternalError(d.InternalErrorCode.DebuggingCommandFailed,y.DEBUG_CONFIGURATION_NAMES.ATTACH_TO_HERMES_APPLICATION_EXPERIMENTAL),(()=>c.CommandPaletteHandler.startDebuggingScenario(y.DEBUG_CONFIGURATION_NAMES.ATTACH_TO_HERMES_APPLICATION_EXPERIMENTAL))),V("debugScenario.attachDirectIosExperimental",u.ErrorHelper.getInternalError(d.InternalErrorCode.DebuggingCommandFailed,y.DEBUG_CONFIGURATION_NAMES.ATTACH_TO_DIRECT_IOS_EXPERIMENTAL),(()=>c.CommandPaletteHandler.startDebuggingScenario(y.DEBUG_CONFIGURATION_NAMES.ATTACH_TO_DIRECT_IOS_EXPERIMENTAL))),V("debugScenario.attachToPackager",u.ErrorHelper.getInternalError(d.InternalErrorCode.DebuggingCommandFailed,y.DEBUG_CONFIGURATION_NAMES.ATTACH_TO_PACKAGER),(()=>c.CommandPaletteHandler.startDebuggingScenario(y.DEBUG_CONFIGURATION_NAMES.ATTACH_TO_PACKAGER))),V("debugScenario.debugAndroid",u.ErrorHelper.getInternalError(d.InternalErrorCode.DebuggingCommandFailed,y.DEBUG_CONFIGURATION_NAMES.DEBUG_ANDROID),(()=>c.CommandPaletteHandler.startDebuggingScenario(y.DEBUG_CONFIGURATION_NAMES.DEBUG_ANDROID))),V("debugScenario.debugIos",u.ErrorHelper.getInternalError(d.InternalErrorCode.DebuggingCommandFailed,y.DEBUG_CONFIGURATION_NAMES.DEBUG_IOS),(()=>c.CommandPaletteHandler.startDebuggingScenario(y.DEBUG_CONFIGURATION_NAMES.DEBUG_IOS))),V("debugScenario.debugWindows",u.ErrorHelper.getInternalError(d.InternalErrorCode.DebuggingCommandFailed,y.DEBUG_CONFIGURATION_NAMES.DEBUG_WINDOWS),(()=>c.CommandPaletteHandler.startDebuggingScenario(y.DEBUG_CONFIGURATION_NAMES.DEBUG_WINDOWS))),V("debugScenario.debugMacos",u.ErrorHelper.getInternalError(d.InternalErrorCode.DebuggingCommandFailed,y.DEBUG_CONFIGURATION_NAMES.DEBUG_MACOS),(()=>c.CommandPaletteHandler.startDebuggingScenario(y.DEBUG_CONFIGURATION_NAMES.DEBUG_MACOS))),V("debugScenario.debugInExponent",u.ErrorHelper.getInternalError(d.InternalErrorCode.DebuggingCommandFailed,y.DEBUG_CONFIGURATION_NAMES.DEBUG_IN_EXPONENT),(()=>c.CommandPaletteHandler.startDebuggingScenario(y.DEBUG_CONFIGURATION_NAMES.DEBUG_IN_EXPONENT))),V("debugScenario.debugAndroidHermesExperimental",u.ErrorHelper.getInternalError(d.InternalErrorCode.DebuggingCommandFailed,y.DEBUG_CONFIGURATION_NAMES.DEBUG_ANDROID_HERMES_EXPERIMENTAL),(()=>c.CommandPaletteHandler.startDebuggingScenario(y.DEBUG_CONFIGURATION_NAMES.DEBUG_ANDROID_HERMES_EXPERIMENTAL))),V("debugScenario.debugDirectIosExperimental",u.ErrorHelper.getInternalError(d.InternalErrorCode.DebuggingCommandFailed,y.DEBUG_CONFIGURATION_NAMES.DEBUG_DIRECT_IOS_EXPERIMENTAL),(()=>c.CommandPaletteHandler.startDebuggingScenario(y.DEBUG_CONFIGURATION_NAMES.DEBUG_DIRECT_IOS_EXPERIMENTAL))),V("debugScenario.debugIosHermesExperimental",u.ErrorHelper.getInternalError(d.InternalErrorCode.DebuggingCommandFailed,y.DEBUG_CONFIGURATION_NAMES.DEBUG_IOS_HERMES_EXPERIMENTAL),(()=>c.CommandPaletteHandler.startDebuggingScenario(y.DEBUG_CONFIGURATION_NAMES.DEBUG_IOS_HERMES_EXPERIMENTAL))),V("debugScenario.debugMacosHermesExperimental",u.ErrorHelper.getInternalError(d.InternalErrorCode.DebuggingCommandFailed,y.DEBUG_CONFIGURATION_NAMES.DEBUG_MACOS_HERMES_EXPERIMENTAL),(()=>c.CommandPaletteHandler.startDebuggingScenario(y.DEBUG_CONFIGURATION_NAMES.DEBUG_MACOS_HERMES_EXPERIMENTAL))),V("debugScenario.debugWindowsHermesExperimental",u.ErrorHelper.getInternalError(d.InternalErrorCode.DebuggingCommandFailed,y.DEBUG_CONFIGURATION_NAMES.DEBUG_WINDOWS_HERMES_EXPERIMENTAL),(()=>c.CommandPaletteHandler.startDebuggingScenario(y.DEBUG_CONFIGURATION_NAMES.DEBUG_WINDOWS_HERMES_EXPERIMENTAL))),V("debugScenario.runAndroid",u.ErrorHelper.getInternalError(d.InternalErrorCode.DebuggingCommandFailed,y.DEBUG_CONFIGURATION_NAMES.RUN_ANDROID),(()=>c.CommandPaletteHandler.startDebuggingScenario(y.DEBUG_CONFIGURATION_NAMES.RUN_ANDROID))),V("debugScenario.runIos",u.ErrorHelper.getInternalError(d.InternalErrorCode.DebuggingCommandFailed,y.DEBUG_CONFIGURATION_NAMES.RUN_IOS),(()=>c.CommandPaletteHandler.startDebuggingScenario(y.DEBUG_CONFIGURATION_NAMES.RUN_IOS))),V("debugScenario.runAndroidHermesExperimental",u.ErrorHelper.getInternalError(d.InternalErrorCode.DebuggingCommandFailed,y.DEBUG_CONFIGURATION_NAMES.RUN_ANDROID_HERMES_EXPERIMENTAL),(()=>c.CommandPaletteHandler.startDebuggingScenario(y.DEBUG_CONFIGURATION_NAMES.RUN_ANDROID_HERMES_EXPERIMENTAL))),V("debugScenario.runIosHermesExperimental",u.ErrorHelper.getInternalError(d.InternalErrorCode.DebuggingCommandFailed,y.DEBUG_CONFIGURATION_NAMES.RUN_IOS_HERMES_EXPERIMENTAL),(()=>c.CommandPaletteHandler.startDebuggingScenario(y.DEBUG_CONFIGURATION_NAMES.RUN_IOS_HERMES_EXPERIMENTAL))),V("debugScenario.runDirectIosExperimental",u.ErrorHelper.getInternalError(d.InternalErrorCode.DebuggingCommandFailed,y.DEBUG_CONFIGURATION_NAMES.RUN_DIRECT_IOS_EXPERIMENTAL),(()=>c.CommandPaletteHandler.startDebuggingScenario(y.DEBUG_CONFIGURATION_NAMES.RUN_DIRECT_IOS_EXPERIMENTAL))),V("selectAndInsertDebugConfiguration",u.ErrorHelper.getInternalError(d.InternalErrorCode.CommandFailed),(e=>{if(!F||e.length<3)throw u.ErrorHelper.getInternalError(d.InternalErrorCode.CommandFailed);return c.CommandPaletteHandler.selectAndInsertDebugConfiguration(F,e[0],e[1],e[2])}))}))}),f)}))},t.deactivate=function(){return new Promise((function(e){x.runFunction("extension.deactivate",u.ErrorHelper.getInternalError(d.InternalErrorCode.FailedToStopPackagerOnExit),(()=>{F&&(F=null),U&&(U=null),c.CommandPaletteHandler.stopAllPackagers().then((()=>c.CommandPaletteHandler.stopElementInspector())).then((()=>{I.LogCatMonitorManager.cleanUp(),e()}))}),!0)}))},t.createAdditionalWorkspaceFolder=function(e){if(o.existsSync(e)){return{uri:s.Uri.file(e),name:i.basename(e),index:++G}}return null},t.getCountOfWorkspaceFolders=function(){return G},t.onFolderAdded=H},1334:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RNProjectObserver=void 0;const n=r(7549),i=r(4800),o=r(9327),s=r(7551);t.RNProjectObserver=class{constructor(e,t){this._isRNMacosProject=!1,this._isRNWindowsProject=!1,this._isRNMacosHermesProject=!1,this._isRNWindowsHermesProject=!1,this._isRNAndroidHermesProject=!1,this._isRNIosHermesProject=!1,this._isRNHermesProject=!1,this.initialize(e,t)}initialize(e,t){o.ProjectVersionHelper.isVersionError(t.reactNativeWindowsVersion)||(this.updateRNWindowsProjectState(!0),this.updateRNWindowsHermesProjectState(s.ReactNativeProjectHelper.isWindowsHermesEnabled(e))),o.ProjectVersionHelper.isVersionError(t.reactNativeMacOSVersion)||(this.updateRNMacosProjectState(!0),this.updateRNMacosHermesProjectState(s.ReactNativeProjectHelper.isMacOSHermesEnabled(e))),this.updateRNAndroidHermesProjectState(s.ReactNativeProjectHelper.isAndroidHermesEnabled(e)),this.updateRNIosHermesProjectState(s.ReactNativeProjectHelper.isIOSHermesEnabled(e)),this.updateRNHermesProjectState()}get isRNMacosProject(){return this._isRNMacosProject}get isRNWindowsProject(){return this._isRNWindowsProject}get isRNMacosHermesProject(){return this._isRNMacosHermesProject}get isRNWindowsHermesProject(){return this._isRNWindowsHermesProject}get isRNAndroidHermesProject(){return this._isRNAndroidHermesProject}get isRNIosHermesProject(){return this._isRNIosHermesProject}get isRNHermesProject(){return this._isRNHermesProject=this._isRNMacosHermesProject||this._isRNWindowsHermesProject||this._isRNAndroidHermesProject||this._isRNIosHermesProject,this._isRNHermesProject}updateRNMacosProjectState(e){e!==this._isRNMacosProject&&(this._isRNMacosProject=e,this.updateContextState(i.CONTEXT_VARIABLES_NAMES.IS_RN_MACOS_PROJECT,this._isRNMacosProject))}updateRNWindowsProjectState(e){e!==this._isRNWindowsProject&&(this._isRNWindowsProject=e,this.updateContextState(i.CONTEXT_VARIABLES_NAMES.IS_RN_WINDOWS_PROJECT,this._isRNWindowsProject))}updateRNMacosHermesProjectState(e){e!==this._isRNMacosHermesProject&&(this._isRNMacosHermesProject=e,this.updateContextState(i.CONTEXT_VARIABLES_NAMES.IS_RN_MACOS_HERMES_PROJECT,this._isRNMacosHermesProject),this.updateRNHermesProjectState())}updateRNWindowsHermesProjectState(e){e!==this._isRNWindowsHermesProject&&(this._isRNWindowsHermesProject=e,this.updateContextState(i.CONTEXT_VARIABLES_NAMES.IS_RN_WINDOWS_HERMES_PROJECT,this._isRNWindowsHermesProject),this.updateRNHermesProjectState())}updateRNAndroidHermesProjectState(e){e!==this._isRNAndroidHermesProject&&(this._isRNAndroidHermesProject=e,this.updateContextState(i.CONTEXT_VARIABLES_NAMES.IS_RN_ANDROID_HERMES_PROJECT,this._isRNAndroidHermesProject),this.updateRNHermesProjectState())}updateRNIosHermesProjectState(e){e!==this._isRNIosHermesProject&&(this._isRNIosHermesProject=e,this.updateContextState(i.CONTEXT_VARIABLES_NAMES.IS_RN_IOS_HERMES_PROJECT,this._isRNIosHermesProject),this.updateRNHermesProjectState())}updateRNHermesProjectState(){this._isRNHermesProject!==this.isRNHermesProject&&this.updateContextState(i.CONTEXT_VARIABLES_NAMES.IS_RN_HERMES_PROJECT,this._isRNHermesProject)}updateContextState(e,t){n.commands.executeCommand("setContext",e,t)}}},2463:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsHelper=void 0;const i=r(7549),o=r(5622),s=r(2756),a=r(9208),c=r(8694),l=r(9658),u=r(5034);class d{static getPackagerPort(e){const t=d.getReactNativeProjectRoot(e);let r=i.Uri.file(t);const n=i.workspace.getConfiguration("react-native.packager",r);return n.has("port")?s.ConfigurationReader.readInt(n.get("port")):a.Packager.DEFAULT_PORT}static getLogLevel(){const e=i.workspace.getConfiguration("react-native-tools",null);if(e.has("logLevel")){let t=s.ConfigurationReader.readString(e.get("logLevel"));return parseInt(c.LogLevel[t],10)}return c.LogLevel.Info}static getReactNativeProjectRoot(e){let t=i.Uri.file(e);const r=i.workspace.getConfiguration("react-native-tools",t);if(r.has("projectRoot")){let e=s.ConfigurationReader.readString(r.get("projectRoot"));return o.isAbsolute(e)?e:o.resolve(t.fsPath,e)}return t.fsPath}static getReactNativeGlobalCommandName(e){const t=i.workspace.getConfiguration("react-native-tools",e);return t.has("reactNativeGlobalCommandName")?s.ConfigurationReader.readString(t.get("reactNativeGlobalCommandName")):null}static getRunArgs(e,t,r){const n=i.workspace.getConfiguration("react-native",r),o=`${e}.runArguments.${t}`;return n.has(o)?s.ConfigurationReader.readArray(n.get(o)):[]}static getEnvArgs(e,t,r){const n=i.workspace.getConfiguration("react-native",r),o=`${e}.env.${t}`;return n.has(o)?s.ConfigurationReader.readObject(n.get(o)):{}}static getEnvFile(e,t,r){const n=i.workspace.getConfiguration("react-native",r),o=`${e}.envFile.${t}`;return n.has(o)?s.ConfigurationReader.readString(n.get(o)):""}static getNetworkInspectorConsoleLogsColorTheme(){const e=i.workspace.getConfiguration("react-native-tools.networkInspector",null);if(e.has("consoleLogsColorTheme")){const t=s.ConfigurationReader.readString(e.get("consoleLogsColorTheme"));return l.SystemColorTheme[t]}return l.SystemColorTheme.Light}static getPackagerStatusIndicatorPattern(e){const t=d.getReactNativeProjectRoot(e);let r=i.Uri.file(t);const n=i.workspace.getConfiguration("react-native.packager",r);if(n.has("status-indicator")){const e=s.ConfigurationReader.readString(n.get("status-indicator"));if(e===u.PackagerStatusIndicator.FULL_VERSION||e===u.PackagerStatusIndicator.SHORT_VERSION)return e}return u.PackagerStatusIndicator.FULL_VERSION}static getLogCatFilteringArgs(e){const t=i.workspace.getConfiguration("react-native",e);if(t.has("android.logCatArguments"))return s.ConfigurationReader.readArray(t.get("android.logCatArguments"))}static getExpoDependencyVersion(e){const t=i.workspace.getConfiguration("react-native.expo.dependencies");if(t.has(e)){return s.ConfigurationReader.readString(t.get(e))}}static getShowTips(){const e=i.workspace.getConfiguration("react-native-tools",null);return!!e.has("showUserTips")&&s.ConfigurationReader.readBoolean(e.get("showUserTips"))}static setShowTips(e){return n(this,void 0,void 0,(function*(){const t=i.workspace.getConfiguration("react-native-tools",null);t.has("showUserTips")&&(yield t.update("showUserTips",e,!0))}))}}t.SettingsHelper=d},9047:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TipNotificationService=void 0;const i=r(7549),o=r(1714),s=r(3821),a=r(4301),c=r(4952),l=r(2874),u=r(9185),d=r(2463),h=r(9144),p=r(5622);var f;!function(e){e.GET_MORE_INFO="tipsMoreInfo",e.DO_NOT_SHOW_AGAIN="tipsDoNotShow",e.SHOWN="tipShown"}(f||(f={}));class g{constructor(){this.endpointURL="https://microsoft.github.io/vscode-react-native/tipsNotifications/tipsNotificationsConfig.json",this.TIPS_NOTIFICATIONS_LOG_CHANNEL_NAME="Tips Notifications",this.TIPS_CONFIG_NAME="tipsConfig",this.getMoreInfoButtonText="Get more info",this.doNotShowTipsAgainButtonText="Don't show tips again",this.cancellationTokenSource=new i.CancellationTokenSource,this._tipsConfig=null,this.downloadConfigRequest=o.retryDownloadConfig(this.endpointURL,this.cancellationTokenSource),this.showTips=d.SettingsHelper.getShowTips(),this.logger=h.OutputChannelLogger.getChannel(this.TIPS_NOTIFICATIONS_LOG_CHANNEL_NAME,!0)}static getInstance(){return g.instance||(g.instance=new g),g.instance}dispose(){this.cancellationTokenSource.cancel(),this.cancellationTokenSource.dispose()}showTipNotification(e=!0,t){return n(this,void 0,void 0,(function*(){if(!e&&!t)return void this.logger.debug("The specific tip key parameter isn't passed for a specific tip");if(yield this.initializeTipsConfig(),!this.showTips)return;const r=new Date;let n;e?(this.deleteOutdatedKnownDate(),0===this.tipsConfig.daysLeftBeforeGeneralTip?n=yield this.showRandomGeneralTipNotification():this.tipsConfig.lastExtensionUsageDate&&!this.areSameDates(r,this.tipsConfig.lastExtensionUsageDate)&&this.tipsConfig.daysLeftBeforeGeneralTip--):n=yield this.showSpecificTipNotification(t),n&&(yield this.handleUserActionOnTip(n,e)),this.tipsConfig.lastExtensionUsageDate=r,c.ExtensionConfigManager.config.set(this.TIPS_CONFIG_NAME,this.tipsConfig)}))}setKnownDateForFeatureById(e,t=!0){return n(this,void 0,void 0,(function*(){yield this.initializeTipsConfig(),t?this.tipsConfig.tips.generalTips[e].knownDate=new Date:this.tipsConfig.tips.specificTips[e].knownDate=new Date,c.ExtensionConfigManager.config.set(this.TIPS_CONFIG_NAME,this.tipsConfig)}))}updateTipsConfig(){if(!c.ExtensionConfigManager.config.has(this.TIPS_CONFIG_NAME))return;const e=this.tipsConfig;e.tips.generalTips=this.updateConfigTipsFromStorage(l.default.generalTips,e.tips.generalTips),e.tips.specificTips=this.updateConfigTipsFromStorage(l.default.specificTips,e.tips.specificTips),this._tipsConfig=e,c.ExtensionConfigManager.config.set(this.TIPS_CONFIG_NAME,e)}updateConfigTipsFromStorage(e,t){for(let r in t)r in e||delete t[r];for(let r in e)r in t||(t[r]={});return t}get tipsConfig(){if(!this._tipsConfig){if(!c.ExtensionConfigManager.config.has(this.TIPS_CONFIG_NAME))throw new Error("Could not find Tips config in the config store.");this._tipsConfig=this.parseDatesInRawConfig(c.ExtensionConfigManager.config.get(this.TIPS_CONFIG_NAME))}return this._tipsConfig}handleUserActionOnTip(e,t){return n(this,void 0,void 0,(function*(){const{selection:r,tipKey:n}=e;if(r===this.getMoreInfoButtonText){this.sendTipNotificationActionTelemetry(n,f.GET_MORE_INFO);const e=u.findFileInFolderHierarchy(__dirname,"README.md");if(e){const r=t?this.getGeneralTipNotificationAnchorLinkByKey(n):this.getSpecificTipNotificationAnchorLinkByKey(n),o=i.Uri.parse(p.normalize(`file://${e}${r}`));i.commands.executeCommand("markdown.showPreview",o)}}r===this.doNotShowTipsAgainButtonText&&(this.sendTipNotificationActionTelemetry(n,f.DO_NOT_SHOW_AGAIN),this.showTips=!1,yield d.SettingsHelper.setShowTips(this.showTips))}))}initializeTipsConfig(){return n(this,void 0,void 0,(function*(){if(this.showTips=d.SettingsHelper.getShowTips(),this._tipsConfig)return;let e;c.ExtensionConfigManager.config.has(this.TIPS_CONFIG_NAME)?e=this.parseDatesInRawConfig(c.ExtensionConfigManager.config.get(this.TIPS_CONFIG_NAME)):(e={daysLeftBeforeGeneralTip:0,firstTimeMinDaysToRemind:3,firstTimeMaxDaysToRemind:6,minDaysToRemind:6,maxDaysToRemind:10,daysAfterLastUsage:30,allTipsShownFirstly:!1,tips:{generalTips:{},specificTips:{}}},e=yield this.mergeRemoteConfigToLocal(e),Object.keys(l.default.generalTips).forEach((t=>{e.tips.generalTips[t]={}})),Object.keys(l.default.specificTips).forEach((t=>{e.tips.specificTips[t]={}})),c.ExtensionConfigManager.config.set(this.TIPS_CONFIG_NAME,e)),this._tipsConfig=e}))}showRandomGeneralTipNotification(){return n(this,void 0,void 0,(function*(){let e;const t=this.tipsConfig.tips.generalTips,r=Object.keys(this.tipsConfig.tips.generalTips);let n;switch(this.tipsConfig.allTipsShownFirstly?e=r.sort(((e,r)=>{var n,i;return(null!==(n=t[r].shownDate)&&void 0!==n?n:new Date(0)).getTime()-(null!==(i=t[e].shownDate)&&void 0!==i?i:new Date(0)).getTime()})):(e=r.filter((e=>!t[e].knownDate&&!t[e].shownDate)),1===e.length&&(this.tipsConfig.allTipsShownFirstly=!0)),e.length){case 0:return{selection:void 0,tipKey:""};case 1:n=0;break;case 2:n=1;break;default:n=2}const o=e[this.getRandomIntInclusive(n,e.length-1)],s=this.getGeneralTipNotificationTextByKey(o);this.tipsConfig.tips.generalTips[o].shownDate=new Date,this._tipsConfig=yield this.mergeRemoteConfigToLocal(this.tipsConfig);const a=this.tipsConfig.allTipsShownFirstly?this.getRandomIntInclusive(this.tipsConfig.minDaysToRemind,this.tipsConfig.maxDaysToRemind):this.getRandomIntInclusive(this.tipsConfig.firstTimeMinDaysToRemind,this.tipsConfig.firstTimeMaxDaysToRemind);return this.tipsConfig.daysLeftBeforeGeneralTip=a,c.ExtensionConfigManager.config.set(this.TIPS_CONFIG_NAME,this.tipsConfig),this.sendShowTipNotificationTelemetry(o),{selection:yield i.window.showInformationMessage(s,this.getMoreInfoButtonText,this.doNotShowTipsAgainButtonText),tipKey:o}}))}showSpecificTipNotification(e){return n(this,void 0,void 0,(function*(){if(this.tipsConfig.tips.specificTips[e].shownDate)return;const t=this.getSpecificTipNotificationTextByKey(e);return this.tipsConfig.tips.specificTips[e].shownDate=new Date,c.ExtensionConfigManager.config.set(this.TIPS_CONFIG_NAME,this.tipsConfig),this.sendShowTipNotificationTelemetry(e),{selection:yield i.window.showInformationMessage(t,this.getMoreInfoButtonText,this.doNotShowTipsAgainButtonText),tipKey:e}}))}mergeRemoteConfigToLocal(e){return n(this,void 0,void 0,(function*(){const t=yield this.downloadConfigRequest;return e.firstTimeMinDaysToRemind=t.firstTimeMinDaysToRemind,e.firstTimeMaxDaysToRemind=t.firstTimeMaxDaysToRemind,e.minDaysToRemind=t.minDaysToRemind,e.maxDaysToRemind=t.maxDaysToRemind,e.daysAfterLastUsage=t.daysAfterLastUsage,e}))}getGeneralTipNotificationTextByKey(e){return l.default.generalTips[e].text}getSpecificTipNotificationTextByKey(e){return l.default.specificTips[e].text}getGeneralTipNotificationAnchorLinkByKey(e){return l.default.generalTips[e].anchorLink}getSpecificTipNotificationAnchorLinkByKey(e){return l.default.specificTips[e].anchorLink}deleteOutdatedKnownDate(){const e=new Date,t=this.tipsConfig.tips.generalTips;Object.keys(this.tipsConfig.tips.generalTips).filter((r=>{var n;const i=null!==(n=t[r].knownDate)&&void 0!==n?n:new Date;return t[r].knownDate&&this.getDifferenceInDays(i,e)>this.tipsConfig.daysAfterLastUsage})).forEach((e=>{delete t[e].knownDate}))}areSameDates(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}getDifferenceInDays(e,t){return Math.abs(t.getTime()-e.getTime())/864e5}getRandomIntInclusive(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}parseDatesInRawConfig(e){e.lastExtensionUsageDate&&(e.lastExtensionUsageDate=new Date(e.lastExtensionUsageDate));const t=(t,r)=>{t.forEach((t=>{let n=e.tips[r][t];n.knownDate&&(e.tips[r][t].knownDate=new Date(n.knownDate)),n.shownDate&&n.shownDate&&(e.tips[r][t].shownDate=new Date(n.shownDate))}))};return t(Object.keys(e.tips.specificTips),"specificTips"),t(Object.keys(e.tips.generalTips),"generalTips"),e}sendShowTipNotificationTelemetry(e){const t=s.TelemetryHelper.createTelemetryEvent("showTipNotification",{tipKey:e});a.Telemetry.send(t)}sendTipNotificationActionTelemetry(e,t){const r=s.TelemetryHelper.createTelemetryEvent("tipNotificationAction",{tipKey:e,tipNotificationAction:t});a.Telemetry.send(r)}}t.TipNotificationService=g},2874:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(3403);n.config({messageFormat:n.MessageFormat.bundle,bundleFormat:n.BundleFormat.standalone})(r(5622).join(__dirname,"src\\extension\\tipsNotificationsService\\tipsStorage.ts"));const i=n.loadMessageBundle(r(5622).join(__dirname,"src\\extension\\tipsNotificationsService\\tipsStorage.ts"));t.default={generalTips:{elementInspector:{text:i(0,null),anchorLink:"#react-native-commands-in-the-command-palette"},logCatMonitor:{text:i(1,null),anchorLink:"#configure-an-android-logcat-monitor"},networkInspector:{text:i(2,null),anchorLink:"#network-inspector"},directDebuggingWithHermes:{text:i(3,null),anchorLink:"#hermes-engine"},debuggingRNWAndMacOSApps:{text:i(4,null),anchorLink:"#react-native-for-windows"},expoHostType:{text:i(5,null),anchorLink:"#expo-applications"},customEnvVariables:{text:i(6,null),anchorLink:"#custom-environment-variables"}},specificTips:{networkInspectorLogsColorTheme:{text:i(7,null),anchorLink:"#network-inspector-logs-theme"}}}},5070:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.WindowsPlatform=void 0;const i=r(6625),o=r(7005),s=r(7599),a=r(4191),c=r(3821),l=r(5458),u=r(312);class d extends o.GeneralPlatform{constructor(e,t={}){super(e,t),this.runOptions=e}reloadApp(e){return n(this,void 0,void 0,(function*(){const t=e.getAppWorker();t&&t.reloadAppCommand()}))}runApp(e=!0){var t,r;return n(this,void 0,void 0,(function*(){let u={platform:{value:s.PlatformType.Windows,isPii:!1}};null===(t=this.projectObserver)||void 0===t||t.updateRNWindowsProjectState(!0),this.runOptions.isDirect&&(u.isDirect={value:!0,isPii:!1},null===(r=this.projectObserver)||void 0===r||r.updateRNWindowsHermesProjectState(!0)),u=c.TelemetryHelper.addPlatformPropertiesToTelemetryProperties(this.runOptions,this.runOptions.reactNativeVersions,u),yield c.TelemetryHelper.generate("WindowsPlatform.runApp",u,(()=>n(this,void 0,void 0,(function*(){const t=o.GeneralPlatform.getEnvArgument(process.env,this.runOptions.env,this.runOptions.envFile);i.gte(this.runOptions.reactNativeVersions.reactNativeWindowsVersion,"0.63.0")&&(this.runArguments.push("--logging"),e&&(this.runOptions.isDirect?this.runArguments.push("--direct-debugging"):this.runArguments.push("--remote-debugging"))),i.valid(this.runOptions.reactNativeVersions.reactNativeVersion)&&!i.gte(this.runOptions.reactNativeVersions.reactNativeVersion,d.NO_PACKAGER_VERSION)||this.runArguments.push("--no-packager");const r=new l.CommandExecutor(this.runOptions.nodeModulesRoot,this.projectPath,this.logger).spawnReactCommand(`run-${this.platformName}`,this.runArguments,{env:t});yield new a.OutputVerifier((()=>Promise.resolve(d.SUCCESS_PATTERNS)),(()=>Promise.resolve(d.FAILURE_PATTERNS)),this.platformName).process(r)}))))}))}prewarmBundleCache(){return this.packager.prewarmBundleCache(s.PlatformType.Windows)}getRunArguments(){let e=[];if(this.runOptions.runArguments&&this.runOptions.runArguments.length>0)e.push(...this.runOptions.runArguments);else{let t=this.runOptions.target===o.TargetType.Simulator?"":this.runOptions.target;t&&e.push(`--${t}`)}return e}}t.WindowsPlatform=d,d.NO_PACKAGER_VERSION="0.53.0",d.SUCCESS_PATTERNS=["Starting the app"],d.FAILURE_PATTERNS=[{pattern:"Unrecognized command 'run-windows'",errorCode:u.InternalErrorCode.WinRNMPPluginIsNotInstalled},{pattern:/×.+$/gm,errorCode:u.InternalErrorCode.WinRunCommandFailed}]},3403:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i,o,s,a,c,l=r(5622),u=r(5747),d=Object.prototype.toString;function h(e){return void 0!==e}function p(e){return"[object Number]"===d.call(e)}function f(e){return"[object String]"===d.call(e)}function g(e){return JSON.parse(u.readFileSync(e,"utf8"))}function m(e,t){return c&&(e="［"+e.replace(/[aouei]/g,"$&$&")+"］"),0===t.length?e:e.replace(/\{(\d+)\}/g,(function(e,r){var n=r[0],i=t[n],o=e;return"string"==typeof i?o=i:"number"!=typeof i&&"boolean"!=typeof i&&null!=i||(o=String(i)),o}))}function _(e){return function(t,r){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return p(t)?t>=e.length?void console.error("Broken localize call found. Index out of bounds. Stacktrace is\n: "+new Error("").stack):m(e[t],n):f(r)?(console.warn("Message "+r+" didn't get externalized correctly."),m(r,n)):void console.error("Broken localize call found. Stacktrace is\n: "+new Error("").stack)}}function E(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return m(t,r)}function v(e,t){return s[e]=t,t}function y(e,t){var r,n,i,o=l.join(a.cacheRoot,e.id+"-"+e.hash+".json"),s=!1,c=!1;try{return r=JSON.parse(u.readFileSync(o,{encoding:"utf8",flag:"r"})),n=o,i=new Date,u.utimes(n,i,i,(function(){})),r}catch(e){if("ENOENT"===e.code)c=!0;else{if(!(e instanceof SyntaxError))throw e;console.log("Syntax error parsing message bundle: "+e.message+"."),u.unlink(o,(function(e){e&&console.error("Deleting corrupted bundle "+o+" failed.")})),s=!0}}if(!(r=function(e,t){var r=a.translationsConfig[e.id];if(r){var n=g(r).contents,i=g(l.join(t,"nls.metadata.json")),o=Object.create(null);for(var s in i){var c=i[s],u=n[e.outDir+"/"+s];if(u){for(var d=[],h=0;h<c.keys.length;h++){var p=c.keys[h],m=u[f(p)?p:p.key];void 0===m&&(m=c.messages[h]),d.push(m)}o[s]=d}else o[s]=c.messages}return o}}(e,t))||s)return r;if(c)try{u.writeFileSync(o,JSON.stringify(r),{encoding:"utf8",flag:"wx"})}catch(e){if("EEXIST"===e.code)return r;throw e}return r}function S(e){try{return function(e){var t=g(l.join(e,"nls.metadata.json")),r=Object.create(null);for(var n in t){var i=t[n];r[n]=i.messages}return r}(e)}catch(e){return void console.log("Generating default bundle from meta data failed.",e)}}function b(e,t){var r;if(!0===a.languagePackSupport&&void 0!==a.cacheRoot&&void 0!==a.languagePackId&&void 0!==a.translationsConfigFile&&void 0!==a.translationsConfig)try{r=y(e,t)}catch(e){console.log("Load or create bundle failed ",e)}if(!r){if(a.languagePackSupport)return S(t);var n=function(e){for(var t=a.language;t;){var r=l.join(e,"nls.bundle."+t+".json");if(u.existsSync(r))return r;var n=t.lastIndexOf("-");t=n>0?t.substring(0,n):void 0}if(void 0===t&&(r=l.join(e,"nls.bundle.json"),u.existsSync(r)))return r}(t);if(n)try{return g(n)}catch(e){console.log("Loading in the box message bundle failed.",e)}r=S(t)}return r}function T(e){if(!e)return E;var t=l.extname(e);if(t&&(e=e.substr(0,e.length-t.length)),a.messageFormat===n.both||a.messageFormat===n.bundle){var r=function(e){for(var t,r=l.dirname(e);t=l.join(r,"nls.metadata.header.json"),!u.existsSync(t);){var n=l.dirname(r);if(n===r){t=void 0;break}r=n}return t}(e);if(r){var i=l.dirname(r),o=s[i];if(void 0===o)try{var d=JSON.parse(u.readFileSync(r,"utf8"));try{var p=b(d,i);o=v(i,p?{header:d,nlsBundle:p}:null)}catch(e){console.error("Failed to load nls bundle",e),o=v(i,null)}}catch(e){console.error("Failed to read header file",e),o=v(i,null)}if(o){var f=e.substr(i.length+1).replace(/\\/g,"/"),m=o.nlsBundle[f];return void 0===m?(console.error("Messages for file "+e+" not found. See console for details."),function(){return"Messages not found."}):_(m)}}}if(a.messageFormat===n.both||a.messageFormat===n.file)try{var y=g(function(e){var t;if(a.cacheLanguageResolution&&t)t=t;else{if(c||!a.language)t=".nls.json";else for(var r=a.language;r;){var n=".nls."+r+".json";if(u.existsSync(e+n)){t=n;break}var i=r.lastIndexOf("-");i>0?r=r.substring(0,i):(t=".nls.json",r=null)}a.cacheLanguageResolution&&(t=t)}return e+t}(e));return Array.isArray(y)?_(y):h(y.messages)&&h(y.keys)?_(y.messages):(console.error("String bundle '"+e+"' uses an unsupported format."),function(){return"File bundle has unsupported format. See console for details"})}catch(e){"ENOENT"!==e.code&&console.error("Failed to load single file bundle",e)}return console.error("Failed to load message bundle for file "+e),function(){return"Failed to load message bundle. See console for details."}}!function(e){e.file="file",e.bundle="bundle",e.both="both"}(n=t.MessageFormat||(t.MessageFormat={})),function(e){e.standalone="standalone",e.languagePack="languagePack"}(i=t.BundleFormat||(t.BundleFormat={})),function(e){e.is=function(e){var t=e;return t&&h(t.key)&&h(t.comment)}}(o||(o={})),function(){if(a={locale:void 0,language:void 0,languagePackSupport:!1,cacheLanguageResolution:!0,messageFormat:n.bundle},f(process.env.VSCODE_NLS_CONFIG))try{var e=JSON.parse(process.env.VSCODE_NLS_CONFIG),t=void 0;if(e.availableLanguages){var r=e.availableLanguages["*"];f(r)&&(t=r)}if(f(e.locale)&&(a.locale=e.locale.toLowerCase()),void 0===t?a.language=a.locale:"en"!==t&&(a.language=t),function(e){return!0===e||!1===e}(e._languagePackSupport)&&(a.languagePackSupport=e._languagePackSupport),f(e._cacheRoot)&&(a.cacheRoot=e._cacheRoot),f(e._languagePackId)&&(a.languagePackId=e._languagePackId),f(e._translationsConfigFile)){a.translationsConfigFile=e._translationsConfigFile;try{a.translationsConfig=g(a.translationsConfigFile)}catch(t){if(e._corruptedFile){var i=l.dirname(e._corruptedFile);u.exists(i,(function(t){t&&u.writeFile(e._corruptedFile,"corrupted","utf8",(function(e){console.error(e)}))}))}}}}catch(e){}c="pseudo"===a.locale,void 0,s=Object.create(null)}(),t.loadMessageBundle=T,t.config=function(e){return e&&(f(e.locale)&&(a.locale=e.locale.toLowerCase(),a.language=a.locale,void 0,s=Object.create(null)),void 0!==e.messageFormat&&(a.messageFormat=e.messageFormat),e.bundleFormat===i.standalone&&!0===a.languagePackSupport&&(a.languagePackSupport=!1)),c="pseudo"===a.locale,T}},1283:(e,t,r)=>{var n=r(1669),i=r(3129).spawn,o="HKLM",s="HKCU",a="HKCR",c="HKCC",l=[o,s,a,"HKU",c],u="REG_SZ",d="REG_MULTI_SZ",h="REG_EXPAND_SZ",p="REG_DWORD",f="REG_QWORD",g="REG_BINARY",m="REG_NONE",_=[u,d,h,p,f,g,m],E=/(\\[a-zA-Z0-9_\s]+)*/,v=/^(HKEY_LOCAL_MACHINE|HKEY_CURRENT_USER|HKEY_CLASSES_ROOT|HKEY_USERS|HKEY_CURRENT_CONFIG)(.*)$/,y=/^(.*)\s(REG_SZ|REG_MULTI_SZ|REG_EXPAND_SZ|REG_DWORD|REG_QWORD|REG_BINARY|REG_NONE)\s+([^\s].*)$/;function S(e,t,r,n,i,o){if(!(this instanceof S))return new S(e,t,r,n,i,o);var s=e,a=t,c=r,l=n,u=i,d=o;this.__defineGetter__("host",(function(){return s})),this.__defineGetter__("hive",(function(){return a})),this.__defineGetter__("key",(function(){return c})),this.__defineGetter__("name",(function(){return l})),this.__defineGetter__("type",(function(){return u})),this.__defineGetter__("value",(function(){return d})),Object.freeze(this)}function b(e){if(!(this instanceof b))return new b(e);var t=e||{},r=""+(t.host||""),n=""+(t.hive||o),i=""+(t.key||"");if(this.__defineGetter__("host",(function(){return r})),this.__defineGetter__("hive",(function(){return n})),this.__defineGetter__("key",(function(){return i})),this.__defineGetter__("path",(function(){return(0==r.length?"":"\\\\"+host+"\\")+n+i})),this.__defineGetter__("parent",(function(){var e=i.lastIndexOf("\\");return new b({host:this.host,hive:this.hive,key:-1==e?"":i.substring(0,e)})})),-1==l.indexOf(n))throw new Error("illegal hive specified.");if(!E.test(i))throw new Error("illegal key specified.");Object.freeze(this)}n.inherits(S,Object),Object.freeze(S),Object.freeze(S.prototype),n.inherits(b,Object),b.HKLM=o,b.HKCU=s,b.HKCR=a,b.HKU="HKU",b.HKCC=c,b.HIVES=l,b.REG_SZ=u,b.REG_MULTI_SZ=d,b.REG_EXPAND_SZ=h,b.REG_DWORD=p,b.REG_QWORD=f,b.REG_BINARY=g,b.REG_NONE=m,b.REG_TYPES=_,b.prototype.values=function(e){if("function"!=typeof e)throw new TypeError("must specify a callback");var t=["QUERY",this.path],r=i("REG",t,{cwd:void 0,env:process.env,stdio:["ignore","pipe","ignore"]}),n="",o=this;return r.on("close",(function(t){if(0!==t)e(new Error("process exited with code "+t),null);else{for(var r=[],i=[],s=n.split("\n"),a=0,c=0,l=s.length;c<l;c++){var u=s[c].trim();u.length>0&&(0!=a&&r.push(u),++a)}for(c=0,l=r.length;c<l;c++){var d,h,p,f=y.exec(r[c]);f&&(d=f[1].trim(),h=f[2].trim(),p=f[3],i.push(new S(o.host,o.hive,o.key,d,h,p)))}e(null,i)}})),r.stdout.on("data",(function(e){n+=e.toString()})),this},b.prototype.keys=function(e){if("function"!=typeof e)throw new TypeError("must specify a callback");var t=["QUERY",this.path],r=i("REG",t,{cwd:void 0,env:process.env,stdio:["ignore","pipe","ignore"]}),n="",o=this;return r.on("close",(function(t){0!==t&&e(new Error("process exited with code "+t),null)})),r.stdout.on("data",(function(e){n+=e.toString()})),r.stdout.on("end",(function(){for(var t=[],r=[],i=n.split("\n"),s=0,a=i.length;s<a;s++){var c=i[s].trim();c.length>0&&t.push(c)}for(s=0,a=t.length;s<a;s++){var l,u=v.exec(t[s]);u&&(u[1],(l=u[2])&&l!==o.key&&r.push(new b({host:o.host,hive:o.hive,key:l})))}e(null,r)})),this},b.prototype.get=function(e,t){if("function"!=typeof t)throw new TypeError("must specify a callback");var r=["QUERY",this.path];""==e?r.push("/ve"):r=r.concat(["/v",e]);var n=i("REG",r,{cwd:void 0,env:process.env,stdio:["ignore","pipe","ignore"]}),o="",s=this;return n.on("close",(function(e){if(0!==e)t(new Error("process exited with code "+e),null);else{for(var r=[],n=null,i=o.split("\n"),a=0,c=0,l=i.length;c<l;c++){var u=i[c].trim();u.length>0&&(0!=a&&r.push(u),++a)}var d,h,p,f=r[r.length-1]||"",g=y.exec(f);g&&(d=g[1].trim(),h=g[2].trim(),p=g[3],n=new S(s.host,s.hive,s.key,d,h,p)),t(null,n)}})),n.stdout.on("data",(function(e){o+=e.toString()})),this},b.prototype.set=function(e,t,r,n){if("function"!=typeof n)throw new TypeError("must specify a callback");if(-1==_.indexOf(t))throw Error("illegal type specified.");var o=["ADD",this.path];""==e?o.push("/ve"):o=o.concat(["/v",e]),o=o.concat(["/t",t,"/d",r,"/f"]);var s=i("REG",o,{cwd:void 0,env:process.env,stdio:["ignore","pipe","ignore"]});return s.on("close",(function(e){n(0!==e?new Error("process exited with code "+e):null)})),s.stdout.on("data",(function(e){})),this},b.prototype.remove=function(e,t){if("function"!=typeof t)throw new TypeError("must specify a callback");var r=e?["DELETE",this.path,"/f","/v",e]:["DELETE",this.path,"/f","/ve"],n=i("REG",r,{cwd:void 0,env:process.env,stdio:["ignore","pipe","ignore"]});return n.on("close",(function(e){t(0!==e?new Error("process exited with code "+e):null)})),n.stdout.on("data",(function(e){})),this},b.prototype.erase=function(e){if("function"!=typeof e)throw new TypeError("must specify a callback");var t=["DELETE",this.path,"/f","/va"],r=i("REG",t,{cwd:void 0,env:process.env,stdio:["ignore","pipe","ignore"]});return r.on("close",(function(t){e(0!==t?new Error("process exited with code "+t):null)})),r.stdout.on("data",(function(e){})),this},b.prototype.create=function(e){if("function"!=typeof e)throw new TypeError("must specify a callback");var t=["ADD",this.path,"/f"],r=i("REG",t,{cwd:void 0,env:process.env,stdio:["ignore","pipe","ignore"]});return r.on("close",(function(t){e(0!==t?new Error("process exited with code "+t):null)})),r.stdout.on("data",(function(e){})),this},e.exports=b,Object.freeze(b),Object.freeze(b.prototype)},2479:e=>{e.exports=function e(t,r){if(t&&r)return e(t)(r);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach((function(e){n[e]=t[e]})),n;function n(){for(var e=new Array(arguments.length),r=0;r<e.length;r++)e[r]=arguments[r];var n=t.apply(this,e),i=e[e.length-1];return"function"==typeof n&&n!==i&&Object.keys(i).forEach((function(e){n[e]=i[e]})),n}}},902:(e,t,r)=>{"use strict";e.exports=function(e,t,r,i){r instanceof Function&&(i=r,r={});const d=async function(e,t,r={}){"string"==typeof r&&(r={encoding:r});let i,d;const h=o(f((()=>d))),m=s.resolve(e);try{await function(e){return new Promise((t=>{u[e]||(u[e]=[]),u[e].push(t),1===u[e].length&&t()}))}(m);const o=await l(n.realpath)(e).catch((()=>e));if(d=p(o),!r.mode||!r.chown){const e=await l(n.stat)(o).catch((()=>{}));e&&(null==r.mode&&(r.mode=e.mode),null==r.chown&&process.getuid&&(r.chown={uid:e.uid,gid:e.gid}))}i=await l(n.open)(d,"w",r.mode),r.tmpfileCreated&&await r.tmpfileCreated(d),a(t)&&(t=c(t)),Buffer.isBuffer(t)?await l(n.write)(i,t,0,t.length,0):null!=t&&await l(n.write)(i,String(t),0,String(r.encoding||"utf8")),!1!==r.fsync&&await l(n.fsync)(i),await l(n.close)(i),i=null,r.chown&&await l(n.chown)(d,r.chown.uid,r.chown.gid).catch((e=>{if(!g(e))throw e})),r.mode&&await l(n.chmod)(d,r.mode).catch((e=>{if(!g(e))throw e})),await l(n.rename)(d,o)}finally{i&&await l(n.close)(i).catch((()=>{})),h(),await l(n.unlink)(d).catch((()=>{})),u[m].shift(),u[m].length>0?u[m][0]():delete u[m]}}(e,t,r);i&&d.then(i,i);return d},e.exports.sync=function(e,t,r){"string"==typeof r?r={encoding:r}:r||(r={});try{e=n.realpathSync(e)}catch(e){}const i=p(e);if(!r.mode||!r.chown)try{const t=n.statSync(e);(r=Object.assign({},r)).mode||(r.mode=t.mode),!r.chown&&process.getuid&&(r.chown={uid:t.uid,gid:t.gid})}catch(e){}let s;const l=f(i),u=o(l);let d=!0;try{if(s=n.openSync(i,"w",r.mode||438),r.tmpfileCreated&&r.tmpfileCreated(i),a(t)&&(t=c(t)),Buffer.isBuffer(t)?n.writeSync(s,t,0,t.length,0):null!=t&&n.writeSync(s,String(t),0,String(r.encoding||"utf8")),!1!==r.fsync&&n.fsyncSync(s),n.closeSync(s),s=null,r.chown)try{n.chownSync(i,r.chown.uid,r.chown.gid)}catch(e){if(!g(e))throw e}if(r.mode)try{n.chmodSync(i,r.mode)}catch(e){if(!g(e))throw e}n.renameSync(i,e),d=!1}finally{if(s)try{n.closeSync(s)}catch(e){}u(),d&&l()}},e.exports._getTmpname=p,e.exports._cleanupOnExit=f;const n=r(5747),i=r(4269),o=r(7908),s=r(5622),a=r(4501),c=r(5054),{promisify:l}=r(1669),u={},d=function(){try{return r(5013).threadId}catch(e){return 0}}();let h=0;function p(e){return e+"."+i(__filename).hash(String(process.pid)).hash(String(d)).hash(String(++h)).result()}function f(e){return()=>{try{n.unlinkSync("function"==typeof e?e():e)}catch(e){}}}function g(e){if("ENOSYS"===e.code)return!0;return!(process.getuid&&0===process.getuid()||"EINVAL"!==e.code&&"EPERM"!==e.code)}},8777:(e,t,r)=>{"use strict";const n=r(8762);n.createWebSocketStream=r(404),n.Server=r(9284),n.Receiver=r(2957),n.Sender=r(7330),e.exports=n},977:(e,t,r)=>{"use strict";const{EMPTY_BUFFER:n}=r(1872);function i(e,t){if(0===e.length)return n;if(1===e.length)return e[0];const r=Buffer.allocUnsafe(t);let i=0;for(let t=0;t<e.length;t++){const n=e[t];r.set(n,i),i+=n.length}return i<t?r.slice(0,i):r}function o(e,t,r,n,i){for(let o=0;o<i;o++)r[n+o]=e[o]^t[3&o]}function s(e,t){const r=e.length;for(let n=0;n<r;n++)e[n]^=t[3&n]}function a(e){return e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}function c(e){if(c.readOnly=!0,Buffer.isBuffer(e))return e;let t;return e instanceof ArrayBuffer?t=Buffer.from(e):ArrayBuffer.isView(e)?t=Buffer.from(e.buffer,e.byteOffset,e.byteLength):(t=Buffer.from(e),c.readOnly=!1),t}try{const t=r(Object(function(){var e=new Error("Cannot find module 'bufferutil'");throw e.code="MODULE_NOT_FOUND",e}())),n=t.BufferUtil||t;e.exports={concat:i,mask(e,t,r,i,s){s<48?o(e,t,r,i,s):n.mask(e,t,r,i,s)},toArrayBuffer:a,toBuffer:c,unmask(e,t){e.length<32?s(e,t):n.unmask(e,t)}}}catch(t){e.exports={concat:i,mask:o,toArrayBuffer:a,toBuffer:c,unmask:s}}},1872:e=>{"use strict";e.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),EMPTY_BUFFER:Buffer.alloc(0),NOOP:()=>{}}},62:e=>{"use strict";class t{constructor(e,t){this.target=t,this.type=e}}class r extends t{constructor(e,t){super("message",t),this.data=e}}class n extends t{constructor(e,t,r){super("close",r),this.wasClean=r._closeFrameReceived&&r._closeFrameSent,this.reason=t,this.code=e}}class i extends t{constructor(e){super("open",e)}}class o extends t{constructor(e,t){super("error",t),this.message=e.message,this.error=e}}const s={addEventListener(e,t,s){if("function"!=typeof t)return;function a(e){t.call(this,new r(e,this))}function c(e,r){t.call(this,new n(e,r,this))}function l(e){t.call(this,new o(e,this))}function u(){t.call(this,new i(this))}const d=s&&s.once?"once":"on";"message"===e?(a._listener=t,this[d](e,a)):"close"===e?(c._listener=t,this[d](e,c)):"error"===e?(l._listener=t,this[d](e,l)):"open"===e?(u._listener=t,this[d](e,u)):this[d](e,t)},removeEventListener(e,t){const r=this.listeners(e);for(let n=0;n<r.length;n++)r[n]!==t&&r[n]._listener!==t||this.removeListener(e,r[n])}};e.exports=s},1503:e=>{"use strict";const t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function r(e,t,r){void 0===e[t]?e[t]=[r]:e[t].push(r)}e.exports={format:function(e){return Object.keys(e).map((t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map((e=>[t].concat(Object.keys(e).map((t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map((e=>!0===e?t:`${t}=${e}`)).join("; ")}))).join("; "))).join(", ")})).join(", ")},parse:function(e){const n=Object.create(null);if(void 0===e||""===e)return n;let i,o,s=Object.create(null),a=!1,c=!1,l=!1,u=-1,d=-1,h=0;for(;h<e.length;h++){const p=e.charCodeAt(h);if(void 0===i)if(-1===d&&1===t[p])-1===u&&(u=h);else if(32===p||9===p)-1===d&&-1!==u&&(d=h);else{if(59!==p&&44!==p)throw new SyntaxError(`Unexpected character at index ${h}`);{if(-1===u)throw new SyntaxError(`Unexpected character at index ${h}`);-1===d&&(d=h);const t=e.slice(u,d);44===p?(r(n,t,s),s=Object.create(null)):i=t,u=d=-1}}else if(void 0===o)if(-1===d&&1===t[p])-1===u&&(u=h);else if(32===p||9===p)-1===d&&-1!==u&&(d=h);else if(59===p||44===p){if(-1===u)throw new SyntaxError(`Unexpected character at index ${h}`);-1===d&&(d=h),r(s,e.slice(u,d),!0),44===p&&(r(n,i,s),s=Object.create(null),i=void 0),u=d=-1}else{if(61!==p||-1===u||-1!==d)throw new SyntaxError(`Unexpected character at index ${h}`);o=e.slice(u,h),u=d=-1}else if(c){if(1!==t[p])throw new SyntaxError(`Unexpected character at index ${h}`);-1===u?u=h:a||(a=!0),c=!1}else if(l)if(1===t[p])-1===u&&(u=h);else if(34===p&&-1!==u)l=!1,d=h;else{if(92!==p)throw new SyntaxError(`Unexpected character at index ${h}`);c=!0}else if(34===p&&61===e.charCodeAt(h-1))l=!0;else if(-1===d&&1===t[p])-1===u&&(u=h);else if(-1===u||32!==p&&9!==p){if(59!==p&&44!==p)throw new SyntaxError(`Unexpected character at index ${h}`);{if(-1===u)throw new SyntaxError(`Unexpected character at index ${h}`);-1===d&&(d=h);let t=e.slice(u,d);a&&(t=t.replace(/\\/g,""),a=!1),r(s,o,t),44===p&&(r(n,i,s),s=Object.create(null),i=void 0),o=void 0,u=d=-1}}else-1===d&&(d=h)}if(-1===u||l)throw new SyntaxError("Unexpected end of input");-1===d&&(d=h);const p=e.slice(u,d);return void 0===i?r(n,p,s):(void 0===o?r(s,p,!0):r(s,o,a?p.replace(/\\/g,""):p),r(n,i,s)),n}}},305:e=>{"use strict";const t=Symbol("kDone"),r=Symbol("kRun");e.exports=class{constructor(e){this[t]=()=>{this.pending--,this[r]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[r]()}[r](){if(this.pending!==this.concurrency&&this.jobs.length){const e=this.jobs.shift();this.pending++,e(this[t])}}}},5196:(e,t,r)=>{"use strict";const n=r(8761),i=r(977),o=r(305),{kStatusCode:s,NOOP:a}=r(1872),c=Buffer.from([0,0,255,255]),l=Symbol("permessage-deflate"),u=Symbol("total-length"),d=Symbol("callback"),h=Symbol("buffers"),p=Symbol("error");let f;function g(e){this[h].push(e),this[u]+=e.length}function m(e){this[u]+=e.length,this[l]._maxPayload<1||this[u]<=this[l]._maxPayload?this[h].push(e):(this[p]=new RangeError("Max payload size exceeded"),this[p][s]=1009,this.removeListener("data",m),this.reset())}function _(e){this[l]._inflate=null,e[s]=1007,this[d](e)}e.exports=class{constructor(e,t,r){if(this._maxPayload=0|r,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!f){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;f=new o(e)}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){const e=this._deflate[d];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){const t=this._options,r=e.find((e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits)));if(!r)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(r.server_no_context_takeover=!0),t.clientNoContextTakeover&&(r.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(r.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?r.client_max_window_bits=t.clientMaxWindowBits:!0!==r.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete r.client_max_window_bits,r}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach((e=>{Object.keys(e).forEach((t=>{let r=e[t];if(r.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(r=r[0],"client_max_window_bits"===t){if(!0!==r){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}else if("server_max_window_bits"===t){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==r)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}e[t]=r}))})),e}decompress(e,t,r){f.add((n=>{this._decompress(e,t,((e,t)=>{n(),r(e,t)}))}))}compress(e,t,r){f.add((n=>{this._compress(e,t,((e,t)=>{n(),r(e,t)}))}))}_decompress(e,t,r){const o=this._isServer?"client":"server";if(!this._inflate){const e=`${o}_max_window_bits`,t="number"!=typeof this.params[e]?n.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=n.createInflateRaw({...this._options.zlibInflateOptions,windowBits:t}),this._inflate[l]=this,this._inflate[u]=0,this._inflate[h]=[],this._inflate.on("error",_),this._inflate.on("data",m)}this._inflate[d]=r,this._inflate.write(e),t&&this._inflate.write(c),this._inflate.flush((()=>{const e=this._inflate[p];if(e)return this._inflate.close(),this._inflate=null,void r(e);const n=i.concat(this._inflate[h],this._inflate[u]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[u]=0,this._inflate[h]=[],t&&this.params[`${o}_no_context_takeover`]&&this._inflate.reset()),r(null,n)}))}_compress(e,t,r){const o=this._isServer?"server":"client";if(!this._deflate){const e=`${o}_max_window_bits`,t="number"!=typeof this.params[e]?n.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=n.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:t}),this._deflate[u]=0,this._deflate[h]=[],this._deflate.on("error",a),this._deflate.on("data",g)}this._deflate[d]=r,this._deflate.write(e),this._deflate.flush(n.Z_SYNC_FLUSH,(()=>{if(!this._deflate)return;let e=i.concat(this._deflate[h],this._deflate[u]);t&&(e=e.slice(0,e.length-4)),this._deflate[d]=null,this._deflate[u]=0,this._deflate[h]=[],t&&this.params[`${o}_no_context_takeover`]&&this._deflate.reset(),r(null,e)}))}}},2957:(e,t,r)=>{"use strict";const{Writable:n}=r(2413),i=r(5196),{BINARY_TYPES:o,EMPTY_BUFFER:s,kStatusCode:a,kWebSocket:c}=r(1872),{concat:l,toArrayBuffer:u,unmask:d}=r(977),{isValidStatusCode:h,isValidUTF8:p}=r(6746);function f(e,t,r,n){const i=new e(r?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(i,f),i[a]=n,i}e.exports=class extends n{constructor(e,t,r,n){super(),this._binaryType=e||o[0],this[c]=void 0,this._extensions=t||{},this._isServer=!!r,this._maxPayload=0|n,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=0,this._loop=!1}_write(e,t,r){if(8===this._opcode&&0==this._state)return r();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(r)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=t.slice(e),t.slice(0,e)}const t=Buffer.allocUnsafe(e);do{const r=this._buffers[0],n=t.length-e;e>=r.length?t.set(this._buffers.shift(),n):(t.set(new Uint8Array(r.buffer,r.byteOffset,e),n),this._buffers[0]=r.slice(e)),e-=r.length}while(e>0);return t}startLoop(e){let t;this._loop=!0;do{switch(this._state){case 0:t=this.getInfo();break;case 1:t=this.getPayloadLength16();break;case 2:t=this.getPayloadLength64();break;case 3:this.getMask();break;case 4:t=this.getData(e);break;default:return void(this._loop=!1)}}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2)return void(this._loop=!1);const e=this.consume(2);if(0!=(48&e[0]))return this._loop=!1,f(RangeError,"RSV2 and RSV3 must be clear",!0,1002);const t=64==(64&e[0]);if(t&&!this._extensions[i.extensionName])return this._loop=!1,f(RangeError,"RSV1 must be clear",!0,1002);if(this._fin=128==(128&e[0]),this._opcode=15&e[0],this._payloadLength=127&e[1],0===this._opcode){if(t)return this._loop=!1,f(RangeError,"RSV1 must be clear",!0,1002);if(!this._fragmented)return this._loop=!1,f(RangeError,"invalid opcode 0",!0,1002);this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,f(RangeError,`invalid opcode ${this._opcode}`,!0,1002);this._compressed=t}else{if(!(this._opcode>7&&this._opcode<11))return this._loop=!1,f(RangeError,`invalid opcode ${this._opcode}`,!0,1002);if(!this._fin)return this._loop=!1,f(RangeError,"FIN must be set",!0,1002);if(t)return this._loop=!1,f(RangeError,"RSV1 must be clear",!0,1002);if(this._payloadLength>125)return this._loop=!1,f(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002)}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=128==(128&e[1]),this._isServer){if(!this._masked)return this._loop=!1,f(RangeError,"MASK must be set",!0,1002)}else if(this._masked)return this._loop=!1,f(RangeError,"MASK must be clear",!0,1002);if(126===this._payloadLength)this._state=1;else{if(127!==this._payloadLength)return this.haveLength();this._state=2}}getPayloadLength16(){if(!(this._bufferedBytes<2))return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength();this._loop=!1}getPayloadLength64(){if(this._bufferedBytes<8)return void(this._loop=!1);const e=this.consume(8),t=e.readUInt32BE(0);return t>Math.pow(2,21)-1?(this._loop=!1,f(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009)):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,f(RangeError,"Max payload size exceeded",!1,1009);this._masked?this._state=3:this._state=4}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=4)}getData(e){let t=s;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&d(t,this._mask)}return this._opcode>7?this.controlMessage(t):this._compressed?(this._state=5,void this.decompress(t,e)):(t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage())}decompress(e,t){this._extensions[i.extensionName].decompress(e,this._fin,((e,r)=>{if(e)return t(e);if(r.length){if(this._messageLength+=r.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return t(f(RangeError,"Max payload size exceeded",!1,1009));this._fragments.push(r)}const n=this.dataMessage();if(n)return t(n);this.startLoop(t)}))}dataMessage(){if(this._fin){const e=this._messageLength,t=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let r;r="nodebuffer"===this._binaryType?l(t,e):"arraybuffer"===this._binaryType?u(l(t,e)):t,this.emit("message",r)}else{const r=l(t,e);if(!p(r))return this._loop=!1,f(Error,"invalid UTF-8 sequence",!0,1007);this.emit("message",r.toString())}}this._state=0}controlMessage(e){if(8===this._opcode)if(this._loop=!1,0===e.length)this.emit("conclude",1005,""),this.end();else{if(1===e.length)return f(RangeError,"invalid payload length 1",!0,1002);{const t=e.readUInt16BE(0);if(!h(t))return f(RangeError,`invalid status code ${t}`,!0,1002);const r=e.slice(2);if(!p(r))return f(Error,"invalid UTF-8 sequence",!0,1007);this.emit("conclude",t,r.toString()),this.end()}}else 9===this._opcode?this.emit("ping",e):this.emit("pong",e);this._state=0}}},7330:(e,t,r)=>{"use strict";const{randomFillSync:n}=r(6417),i=r(5196),{EMPTY_BUFFER:o}=r(1872),{isValidStatusCode:s}=r(6746),{mask:a,toBuffer:c}=r(977),l=Buffer.alloc(4);class u{constructor(e,t){this._extensions=t||{},this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){const r=t.mask&&t.readOnly;let i=t.mask?6:2,o=e.length;e.length>=65536?(i+=8,o=127):e.length>125&&(i+=2,o=126);const s=Buffer.allocUnsafe(r?e.length+i:i);return s[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(s[0]|=64),s[1]=o,126===o?s.writeUInt16BE(e.length,2):127===o&&(s.writeUInt32BE(0,2),s.writeUInt32BE(e.length,6)),t.mask?(n(l,0,4),s[1]|=128,s[i-4]=l[0],s[i-3]=l[1],s[i-2]=l[2],s[i-1]=l[3],r?(a(e,l,s,i,e.length),[s]):(a(e,l,e,0,e.length),[s,e])):[s,e]}close(e,t,r,n){let i;if(void 0===e)i=o;else{if("number"!=typeof e||!s(e))throw new TypeError("First argument must be a valid error code number");if(void 0===t||""===t)i=Buffer.allocUnsafe(2),i.writeUInt16BE(e,0);else{const r=Buffer.byteLength(t);if(r>123)throw new RangeError("The message must not be greater than 123 bytes");i=Buffer.allocUnsafe(2+r),i.writeUInt16BE(e,0),i.write(t,2)}}this._deflating?this.enqueue([this.doClose,i,r,n]):this.doClose(i,r,n)}doClose(e,t,r){this.sendFrame(u.frame(e,{fin:!0,rsv1:!1,opcode:8,mask:t,readOnly:!1}),r)}ping(e,t,r){const n=c(e);if(n.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPing,n,t,c.readOnly,r]):this.doPing(n,t,c.readOnly,r)}doPing(e,t,r,n){this.sendFrame(u.frame(e,{fin:!0,rsv1:!1,opcode:9,mask:t,readOnly:r}),n)}pong(e,t,r){const n=c(e);if(n.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPong,n,t,c.readOnly,r]):this.doPong(n,t,c.readOnly,r)}doPong(e,t,r,n){this.sendFrame(u.frame(e,{fin:!0,rsv1:!1,opcode:10,mask:t,readOnly:r}),n)}send(e,t,r){const n=c(e),o=this._extensions[i.extensionName];let s=t.binary?2:1,a=t.compress;if(this._firstFragment?(this._firstFragment=!1,a&&o&&(a=n.length>=o._threshold),this._compress=a):(a=!1,s=0),t.fin&&(this._firstFragment=!0),o){const e={fin:t.fin,rsv1:a,opcode:s,mask:t.mask,readOnly:c.readOnly};this._deflating?this.enqueue([this.dispatch,n,this._compress,e,r]):this.dispatch(n,this._compress,e,r)}else this.sendFrame(u.frame(n,{fin:t.fin,rsv1:!1,opcode:s,mask:t.mask,readOnly:c.readOnly}),r)}dispatch(e,t,r,n){if(!t)return void this.sendFrame(u.frame(e,r),n);const o=this._extensions[i.extensionName];this._bufferedBytes+=e.length,this._deflating=!0,o.compress(e,r.fin,((t,i)=>{if(this._socket.destroyed){const e=new Error("The socket was closed while data was being compressed");"function"==typeof n&&n(e);for(let t=0;t<this._queue.length;t++){const r=this._queue[t][4];"function"==typeof r&&r(e)}}else this._bufferedBytes-=e.length,this._deflating=!1,r.readOnly=!1,this.sendFrame(u.frame(i,r),n),this.dequeue()}))}dequeue(){for(;!this._deflating&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[1].length,Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[1].length,this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}e.exports=u},404:(e,t,r)=>{"use strict";const{Duplex:n}=r(2413);function i(e){e.emit("close")}function o(){!this.destroyed&&this._writableState.finished&&this.destroy()}function s(e){this.removeListener("error",s),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}e.exports=function(e,t){let r=!0;function a(){r&&e._socket.resume()}e.readyState===e.CONNECTING?e.once("open",(function(){e._receiver.removeAllListeners("drain"),e._receiver.on("drain",a)})):(e._receiver.removeAllListeners("drain"),e._receiver.on("drain",a));const c=new n({...t,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return e.on("message",(function(t){c.push(t)||(r=!1,e._socket.pause())})),e.once("error",(function(e){c.destroyed||c.destroy(e)})),e.once("close",(function(){c.destroyed||c.push(null)})),c._destroy=function(t,r){if(e.readyState===e.CLOSED)return r(t),void process.nextTick(i,c);let n=!1;e.once("error",(function(e){n=!0,r(e)})),e.once("close",(function(){n||r(t),process.nextTick(i,c)})),e.terminate()},c._final=function(t){e.readyState!==e.CONNECTING?null!==e._socket&&(e._socket._writableState.finished?(t(),c._readableState.endEmitted&&c.destroy()):(e._socket.once("finish",(function(){t()})),e.close())):e.once("open",(function(){c._final(t)}))},c._read=function(){e.readyState!==e.OPEN||r||(r=!0,e._receiver._writableState.needDrain||e._socket.resume())},c._write=function(t,r,n){e.readyState!==e.CONNECTING?e.send(t,n):e.once("open",(function(){c._write(t,r,n)}))},c.on("end",o),c.on("error",s),c}},6746:(e,t,r)=>{"use strict";function n(e){return e>=1e3&&e<=1014&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999}function i(e){const t=e.length;let r=0;for(;r<t;)if(0==(128&e[r]))r++;else if(192==(224&e[r])){if(r+1===t||128!=(192&e[r+1])||192==(254&e[r]))return!1;r+=2}else if(224==(240&e[r])){if(r+2>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||224===e[r]&&128==(224&e[r+1])||237===e[r]&&160==(224&e[r+1]))return!1;r+=3}else{if(240!=(248&e[r]))return!1;if(r+3>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||128!=(192&e[r+3])||240===e[r]&&128==(240&e[r+1])||244===e[r]&&e[r+1]>143||e[r]>244)return!1;r+=4}return!0}try{let t=r(Object(function(){var e=new Error("Cannot find module 'utf-8-validate'");throw e.code="MODULE_NOT_FOUND",e}()));"object"==typeof t&&(t=t.Validation.isValidUTF8),e.exports={isValidStatusCode:n,isValidUTF8:e=>e.length<150?i(e):t(e)}}catch(t){e.exports={isValidStatusCode:n,isValidUTF8:i}}},9284:(e,t,r)=>{"use strict";const n=r(8614),{createHash:i}=r(6417),{createServer:o,STATUS_CODES:s}=r(8605),a=r(5196),c=r(8762),{format:l,parse:u}=r(1503),{GUID:d,kWebSocket:h}=r(1872),p=/^[+/0-9A-Za-z]{22}==$/;function f(e){e.emit("close")}function g(){this.destroy()}function m(e,t,r,n){e.writable&&(r=r||s[t],n={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...n},e.write(`HTTP/1.1 ${t} ${s[t]}\r\n`+Object.keys(n).map((e=>`${e}: ${n[e]}`)).join("\r\n")+"\r\n\r\n"+r)),e.removeListener("error",g),e.destroy()}function _(e){return e.trim()}e.exports=class extends n{constructor(e,t){if(super(),null==(e={maxPayload:104857600,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,...e}).port&&!e.server&&!e.noServer)throw new TypeError('One of the "port", "server", or "noServer" options must be specified');if(null!=e.port?(this._server=o(((e,t)=>{const r=s[426];t.writeHead(426,{"Content-Length":r.length,"Content-Type":"text/plain"}),t.end(r)})),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){const e=this.emit.bind(this,"connection");this._removeListeners=function(e,t){for(const r of Object.keys(t))e.on(r,t[r]);return function(){for(const r of Object.keys(t))e.removeListener(r,t[r])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(t,r,n)=>{this.handleUpgrade(t,r,n,e)}})}!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set),this.options=e}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(e&&this.once("close",e),this.clients)for(const e of this.clients)e.terminate();const t=this._server;t&&(this._removeListeners(),this._removeListeners=this._server=null,null!=this.options.port)?t.close((()=>this.emit("close"))):process.nextTick(f,this)}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,r,n){t.on("error",g);const i=void 0!==e.headers["sec-websocket-key"]&&e.headers["sec-websocket-key"].trim(),o=+e.headers["sec-websocket-version"],s={};if("GET"!==e.method||"websocket"!==e.headers.upgrade.toLowerCase()||!i||!p.test(i)||8!==o&&13!==o||!this.shouldHandle(e))return m(t,400);if(this.options.perMessageDeflate){const r=new a(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const t=u(e.headers["sec-websocket-extensions"]);t[a.extensionName]&&(r.accept(t[a.extensionName]),s[a.extensionName]=r)}catch(e){return m(t,400)}}if(this.options.verifyClient){const a={origin:e.headers[""+(8===o?"sec-websocket-origin":"origin")],secure:!(!e.socket.authorized&&!e.socket.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(a,((o,a,c,l)=>{if(!o)return m(t,a||401,c,l);this.completeUpgrade(i,s,e,t,r,n)}));if(!this.options.verifyClient(a))return m(t,401)}this.completeUpgrade(i,s,e,t,r,n)}completeUpgrade(e,t,r,n,o,s){if(!n.readable||!n.writable)return n.destroy();if(n[h])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");const u=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${i("sha1").update(e+d).digest("base64")}`],p=new c(null);let f=r.headers["sec-websocket-protocol"];if(f&&(f=f.split(",").map(_),f=this.options.handleProtocols?this.options.handleProtocols(f,r):f[0],f&&(u.push(`Sec-WebSocket-Protocol: ${f}`),p._protocol=f)),t[a.extensionName]){const e=t[a.extensionName].params,r=l({[a.extensionName]:[e]});u.push(`Sec-WebSocket-Extensions: ${r}`),p._extensions=t}this.emit("headers",u,r),n.write(u.concat("\r\n").join("\r\n")),n.removeListener("error",g),p.setSocket(n,o,this.options.maxPayload),this.clients&&(this.clients.add(p),p.on("close",(()=>this.clients.delete(p)))),s(p,r)}}},8762:(e,t,r)=>{"use strict";const n=r(8614),i=r(7211),o=r(8605),s=r(1631),a=r(4016),{randomBytes:c,createHash:l}=r(6417),{URL:u}=r(8835),d=r(5196),h=r(2957),p=r(7330),{BINARY_TYPES:f,EMPTY_BUFFER:g,GUID:m,kStatusCode:_,kWebSocket:E,NOOP:v}=r(1872),{addEventListener:y,removeEventListener:S}=r(62),{format:b,parse:T}=r(1503),{toBuffer:P}=r(977),A=["CONNECTING","OPEN","CLOSING","CLOSED"],w=[8,13];class R extends n{constructor(e,t,r){super(),this._binaryType=f[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage="",this._closeTimer=null,this._extensions={},this._protocol="",this._readyState=R.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,Array.isArray(t)?t=t.join(", "):"object"==typeof t&&null!==t&&(r=t,t=void 0),C(this,e,t,r)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(e){f.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,r){const n=new h(this.binaryType,this._extensions,this._isServer,r);this._sender=new p(e,this._extensions),this._receiver=n,this._socket=e,n[E]=this,e[E]=this,n.on("conclude",k),n.on("drain",D),n.on("error",L),n.on("message",F),n.on("ping",U),n.on("pong",j),e.setTimeout(0),e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",B),e.on("data",G),e.on("end",H),e.on("error",V),this._readyState=R.OPEN,this.emit("open")}emitClose(){if(!this._socket)return this._readyState=R.CLOSED,void this.emit("close",this._closeCode,this._closeMessage);this._extensions[d.extensionName]&&this._extensions[d.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=R.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==R.CLOSED){if(this.readyState===R.CONNECTING){const e="WebSocket was closed before the connection was established";return N(this,this._req,e)}this.readyState!==R.CLOSING?(this._readyState=R.CLOSING,this._sender.close(e,t,!this._isServer,(e=>{e||(this._closeFrameSent=!0,this._closeFrameReceived&&this._socket.end())})),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),3e4)):this._closeFrameSent&&this._closeFrameReceived&&this._socket.end()}}ping(e,t,r){if(this.readyState===R.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===R.OPEN?(void 0===t&&(t=!this._isServer),this._sender.ping(e||g,t,r)):M(this,e,r)}pong(e,t,r){if(this.readyState===R.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===R.OPEN?(void 0===t&&(t=!this._isServer),this._sender.pong(e||g,t,r)):M(this,e,r)}send(e,t,r){if(this.readyState===R.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t&&(r=t,t={}),"number"==typeof e&&(e=e.toString()),this.readyState!==R.OPEN)return void M(this,e,r);const n={binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[d.extensionName]||(n.compress=!1),this._sender.send(e||g,n,r)}terminate(){if(this.readyState!==R.CLOSED){if(this.readyState===R.CONNECTING){const e="WebSocket was closed before the connection was established";return N(this,this._req,e)}this._socket&&(this._readyState=R.CLOSING,this._socket.destroy())}}}function C(e,t,r,n){const s={protocolVersion:w[1],maxPayload:104857600,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...n,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:void 0,host:void 0,path:void 0,port:void 0};if(!w.includes(s.protocolVersion))throw new RangeError(`Unsupported protocol version: ${s.protocolVersion} (supported versions: ${w.join(", ")})`);let a;t instanceof u?(a=t,e._url=t.href):(a=new u(t),e._url=t);const h="ws+unix:"===a.protocol;if(!(a.host||h&&a.pathname))throw new Error(`Invalid URL: ${e.url}`);const p="wss:"===a.protocol||"https:"===a.protocol,f=p?443:80,g=c(16).toString("base64"),_=p?i.get:o.get;let E;if(s.createConnection=p?O:I,s.defaultPort=s.defaultPort||f,s.port=a.port||f,s.host=a.hostname.startsWith("[")?a.hostname.slice(1,-1):a.hostname,s.headers={"Sec-WebSocket-Version":s.protocolVersion,"Sec-WebSocket-Key":g,Connection:"Upgrade",Upgrade:"websocket",...s.headers},s.path=a.pathname+a.search,s.timeout=s.handshakeTimeout,s.perMessageDeflate&&(E=new d(!0!==s.perMessageDeflate?s.perMessageDeflate:{},!1,s.maxPayload),s.headers["Sec-WebSocket-Extensions"]=b({[d.extensionName]:E.offer()})),r&&(s.headers["Sec-WebSocket-Protocol"]=r),s.origin&&(s.protocolVersion<13?s.headers["Sec-WebSocket-Origin"]=s.origin:s.headers.Origin=s.origin),(a.username||a.password)&&(s.auth=`${a.username}:${a.password}`),h){const e=s.path.split(":");s.socketPath=e[0],s.path=e[1]}let v=e._req=_(s);s.timeout&&v.on("timeout",(()=>{N(e,v,"Opening handshake has timed out")})),v.on("error",(t=>{null===v||v.aborted||(v=e._req=null,e._readyState=R.CLOSING,e.emit("error",t),e.emitClose())})),v.on("response",(i=>{const o=i.headers.location,a=i.statusCode;if(o&&s.followRedirects&&a>=300&&a<400){if(++e._redirects>s.maxRedirects)return void N(e,v,"Maximum redirects exceeded");v.abort();const i=new u(o,t);C(e,i,r,n)}else e.emit("unexpected-response",v,i)||N(e,v,`Unexpected server response: ${i.statusCode}`)})),v.on("upgrade",((t,n,i)=>{if(e.emit("upgrade",t),e.readyState!==R.CONNECTING)return;v=e._req=null;const o=l("sha1").update(g+m).digest("base64");if(t.headers["sec-websocket-accept"]!==o)return void N(e,n,"Invalid Sec-WebSocket-Accept header");const a=t.headers["sec-websocket-protocol"],c=(r||"").split(/, */);let u;if(!r&&a?u="Server sent a subprotocol but none was requested":r&&!a?u="Server sent no subprotocol":a&&!c.includes(a)&&(u="Server sent an invalid subprotocol"),u)N(e,n,u);else{if(a&&(e._protocol=a),E)try{const r=T(t.headers["sec-websocket-extensions"]);r[d.extensionName]&&(E.accept(r[d.extensionName]),e._extensions[d.extensionName]=E)}catch(t){return void N(e,n,"Invalid Sec-WebSocket-Extensions header")}e.setSocket(n,i,s.maxPayload)}}))}function I(e){return e.path=e.socketPath,s.connect(e)}function O(e){return e.path=void 0,e.servername||""===e.servername||(e.servername=s.isIP(e.host)?"":e.host),a.connect(e)}function N(e,t,r){e._readyState=R.CLOSING;const n=new Error(r);Error.captureStackTrace(n,N),t.setHeader?(t.abort(),t.socket&&!t.socket.destroyed&&t.socket.destroy(),t.once("abort",e.emitClose.bind(e)),e.emit("error",n)):(t.destroy(n),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function M(e,t,r){if(t){const r=P(t).length;e._socket?e._sender._bufferedBytes+=r:e._bufferedAmount+=r}if(r){r(new Error(`WebSocket is not open: readyState ${e.readyState} (${A[e.readyState]})`))}}function k(e,t){const r=this[E];r._socket.removeListener("data",G),r._socket.resume(),r._closeFrameReceived=!0,r._closeMessage=t,r._closeCode=e,1005===e?r.close():r.close(e,t)}function D(){this[E]._socket.resume()}function L(e){const t=this[E];t._socket.removeListener("data",G),t._readyState=R.CLOSING,t._closeCode=e[_],t.emit("error",e),t._socket.destroy()}function x(){this[E].emitClose()}function F(e){this[E].emit("message",e)}function U(e){const t=this[E];t.pong(e,!t._isServer,v),t.emit("ping",e)}function j(e){this[E].emit("pong",e)}function B(){const e=this[E];this.removeListener("close",B),this.removeListener("end",H),e._readyState=R.CLOSING,e._socket.read(),e._receiver.end(),this.removeListener("data",G),this[E]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",x),e._receiver.on("finish",x))}function G(e){this[E]._receiver.write(e)||this.pause()}function H(){const e=this[E];e._readyState=R.CLOSING,e._receiver.end(),this.end()}function V(){const e=this[E];this.removeListener("error",V),this.on("error",v),e&&(e._readyState=R.CLOSING,this.destroy())}A.forEach(((e,t)=>{const r={enumerable:!0,value:t};Object.defineProperty(R.prototype,e,r),Object.defineProperty(R,e,r)})),["binaryType","bufferedAmount","extensions","protocol","readyState","url"].forEach((e=>{Object.defineProperty(R.prototype,e,{enumerable:!0})})),["open","error","close","message"].forEach((e=>{Object.defineProperty(R.prototype,`on${e}`,{configurable:!0,enumerable:!0,get(){const t=this.listeners(e);for(let e=0;e<t.length;e++)if(t[e]._listener)return t[e]._listener},set(t){const r=this.listeners(e);for(let t=0;t<r.length;t++)r[t]._listener&&this.removeListener(e,r[t]);this.addEventListener(e,t)}})})),R.prototype.addEventListener=y,R.prototype.removeEventListener=S,e.exports=R},71:(e,t,r)=>{"use strict";const n=r(2087),i=r(5622),o=n.homedir(),{env:s}=process;t.data=s.XDG_DATA_HOME||(o?i.join(o,".local","share"):void 0),t.config=s.XDG_CONFIG_HOME||(o?i.join(o,".config"):void 0),t.cache=s.XDG_CACHE_HOME||(o?i.join(o,".cache"):void 0),t.runtime=s.XDG_RUNTIME_DIR||void 0,t.dataDirs=(s.XDG_DATA_DIRS||"/usr/local/share/:/usr/share/").split(":"),t.data&&t.dataDirs.unshift(t.data),t.configDirs=(s.XDG_CONFIG_DIRS||"/etc/xdg").split(":"),t.config&&t.configDirs.unshift(t.config)},2357:e=>{"use strict";e.exports=require("assert")},4293:e=>{"use strict";e.exports=require("buffer")},3129:e=>{"use strict";e.exports=require("child_process")},7619:e=>{"use strict";e.exports=require("constants")},6417:e=>{"use strict";e.exports=require("crypto")},881:e=>{"use strict";e.exports=require("dns")},8614:e=>{"use strict";e.exports=require("events")},5747:e=>{"use strict";e.exports=require("fs")},8605:e=>{"use strict";e.exports=require("http")},7211:e=>{"use strict";e.exports=require("https")},1631:e=>{"use strict";e.exports=require("net")},2087:e=>{"use strict";e.exports=require("os")},5622:e=>{"use strict";e.exports=require("path")},1765:e=>{"use strict";e.exports=require("process")},1191:e=>{"use strict";e.exports=require("querystring")},2413:e=>{"use strict";e.exports=require("stream")},4016:e=>{"use strict";e.exports=require("tls")},8835:e=>{"use strict";e.exports=require("url")},1669:e=>{"use strict";e.exports=require("util")},7549:e=>{"use strict";e.exports=require("vscode")},5013:e=>{"use strict";e.exports=require("worker_threads")},8761:e=>{"use strict";e.exports=require("zlib")}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.loaded=!0,r.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var __webpack_exports__=__webpack_require__(6465);module.exports=__webpack_exports__})();